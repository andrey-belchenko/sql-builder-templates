<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-06-29T03:13:43.636182+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="54503-main" timestamp="14.04.2025 02:37:54" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param name="kod_emp_isp_pio" type="array" />
        <param name="kod_group_cust_parent" type="array" />
        <param name="kod_group_cust" type="array" />
        <param name="dat_isk_s" type="date" />
        <param name="dat_isk_po" type="date" />
        <param name="is_isk_before_dat" type="number" />
        <param name="kod_emp_isp" type="number" />
        <param name="kod_emp_podp" type="number" />
      </params>
      <select>
        <column table="ur_mat" column="kod_mat" as="kod_mat" key="1" fixed="1" />
        <call function="row_num" as="row_num" group="max" comment="с группировкой тут что-то не срослось" key="0">
          <column table="ur_mat" column="dat_doc" />
          <column table="kod_podr" column="sname" />
          <column table="kodp" column="name" />
          <column table="ur_mat" column="num_delo" />
        </call>
        <column table="kod_folders" column="kodp" as="kodp" key="0" />
        <column table="kod_folders" column="kod_podr" as="kod_podr" key="0" />
        <column table="ur_hist_mat" column="kod_hist_mat" as="kod_hist_mat" key="0" />
        <column table="ur_mat_add_info" column="ur_pretenz_last_pio_kod_emp" as="pio_kod_emp" key="0" is-fact-use="1" />
        <column table="kodp" column="name" comment="-----общий блок 2." as="kodp_name" title="Наименование     абонента" key="0" />
        <column table="ur_mat" column="num_delo" comment="3." title="Номер дела" as="num_delo" key="0" />
        <column table="ur_mat" column="dat_doc" comment="4." as="dat_pod" title="Дата подачи иска/заявления" key="0" />
        <column table="ur_hist_mat" column="dat_post" comment="5." as="dat_prin" title="Дата принятия судебного акта" key="0" />
        <call function="||" comment="6." as="predmet_isk" title="Предмет иска/заявления " key="0">
          <column table="ur_mat_add_info" column="kr_dog_name" is-fact-use="1" />
          <call function="case">
            <call function="when">
              <call function="gt">
                <call function="nvl0">
                  <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
                </call>
                <const>0</const>
              </call>
              <call function="||">
                <const>' '</const>
                <column table="ur_mat_add_info" column="ur_dogplat_ym_str" is-fact-use="1" />
              </call>
            </call>
            <call function="when">
              <call function="and">
                <call function="le">
                  <call function="nvl0">
                    <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
                  </call>
                  <const>0</const>
                </call>
                <call function="gt">
                  <call function="nvl0">
                    <column table="ur_mat_add_info" column="ur_dp_sum_peni" is-fact-use="1" />
                  </call>
                  <const>0</const>
                </call>
              </call>
              <call function="||">
                <const>' '</const>
                <column table="ur_mat_add_info" column="peni_period_str" is-fact-use="1" />
              </call>
            </call>
          </call>
        </call>
        <column table="kod_podr" column="sname" comment="7." as="podr_name" title="Филиал" key="0" />
        <call function="+nvl" comment="-----первый белый блок 8." as="pred_osn" title="Предъявлено - долг, расходы на ограничение" group="sum" key="0">
          <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
          <column table="ur_hist_mat" column="ogr" />
        </call>
        <column table="ur_mat_add_info" column="ur_dp_sum_peni" comment="9." as="pred_peni" title="Предъявлено - проценты/ пени, неустойка" group="sum" key="0" is-fact-use="1" />
        <column table="ur_mat_add_info" column="ur_mat_sum_gp" comment="10." as="pred_gp" title="Предъявлено - госпошлина/ третейскмй сбор" group="sum" key="0" is-fact-use="1" />
        <call function="+" title="Предъявлено - общая сумма" as="pred_sum" comment="11." group="sum" key="0">
          <column table="this" column="pred_osn" />
          <column table="this" column="pred_peni" />
          <column table="this" column="pred_gp" />
        </call>
        <call function="()" as="pred_count" title="Предъявлено - кол-во" comment="12." group="sum" type="number" key="0">
          <const>1</const>
        </call>
        <call function="if" comment="-----зеленый блок 13." as="udv_osn" title="Удовлетворено - долг, расходы на ограничение" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <call function="+">
            <column table="ur_mat_add_info" column="ur_dp_priz_osn" is-fact-use="1" />
            <column table="ur_hist_mat" column="ogr" />
          </call>
        </call>
        <call function="if" comment="14." as="udv_peni" title="Удовлетворено - проценты/ неустойка" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_mat_add_info" column="ur_dp_priz_peni" is-fact-use="1" />
        </call>
        <call function="if" comment="15." as="udv_gp" title="Удовлетворено - госпошлина/ третейскмй сбор" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_hist_mat" column="gp_otv" />
        </call>
        <call function="if" comment="16." as="udv_gp_ret" title="Удовлетворено - справка на возврат" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_hist_mat" column="gp_ret" />
        </call>
        <call function="if" comment="17." as="udv_count" title="Удовлетворено - кол-во" group="sum" type="number" key="0">
          <call function="and">
            <call function="or">
              <call function="!=">
                <call function="nvl">
                  <column table="this" column="udv_osn" />
                  <const>0</const>
                </call>
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="this" column="otkaz_osn" />
                    <const>0</const>
                  </call>
                  <const>0</const>
                </call>
                <call function="!=0">
                  <call function="+nvl">
                    <column table="this" column="udv_peni" />
                    <column table="this" column="udv_gp" />
                  </call>
                </call>
              </call>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="this" column="otkaz_osn" />
                    <const>0</const>
                  </call>
                  <const>0</const>
                </call>
                <call function="=0">
                  <call function="+nvl">
                    <column table="this" column="otkaz_peni" />
                    <column table="this" column="otkaz_gp" />
                  </call>
                </call>
              </call>
            </call>
            <call function="in">
              <column table="ur_hist_mat" column="kod_result" />
              <call function="array">
                <const>42</const>
                <const>43</const>
                <const>7</const>
                <const>10</const>
                <const>45</const>
                <const>97</const>
                <const>8</const>
                <const>91</const>
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="-----оранжевый блок 18." title="Отказано - долг, расходы на ограничение" as="otkaz_osn" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_osn" />
            <column table="this" column="udv_osn" />
          </call>
        </call>
        <call function="if" comment="19." title="Отказано - проценты/ неустойка" as="otkaz_peni" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_peni" />
            <column table="this" column="udv_peni" />
          </call>
        </call>
        <call function="if" comment="20." title="Отказано - госпошлина/ третейскмй сбор" as="otkaz_gp" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_gp" />
            <call function="+nvl">
              <column table="this" column="udv_gp_ret" />
              <column table="this" column="udv_gp" />
            </call>
          </call>
        </call>
        <call function="if" comment="21." title="Отказано - кол-во" as="otkaz_count" group="sum" type="number" key="0">
          <call function="and">
            <call function="in">
              <column table="ur_hist_mat" column="kod_result" />
              <call function="array">
                <const>44</const>
                <const>5</const>
                <const>6</const>
                <const>43</const>
                <const>41</const>
                <const>91</const>
                <const>42</const>
                <const>7</const>
                <const>10</const>
                <const>45</const>
                <const>97</const>
                <const>8</const>
              </call>
            </call>
            <call function="=0">
              <call function="nvl0">
                <column table="this" column="udv_count" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="-----желтый блок 22." as="rassm_osn" title="На рассмотрении - долг, расходы на ограничение" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_osn" />
        </call>
        <call function="if" comment="23." as="rassm_peni" title="На рассмотрении - проценты/ неустойка" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_peni" />
        </call>
        <call function="if" comment="24." as="rassm_gp" title="На рассмотрении - госпошлина/ третейскмй сбор" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_gp" />
        </call>
        <call function="if" comment="25." as="rassm_count" title="На рассмотрении - кол-во" group="sum" type="number" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="least" as="opl_osn" title="Оплата - долг, расходы на ограничение" comment="-----второй белый блок 26." group="sum" key="0">
          <column table="this" column="otkaz_osn" />
          <call function="+nvl">
            <column table="ur_mat_add_info" column="ur_opl_do_resh_osn" is-fact-use="1" />
            <column table="ur_mat_add_info" column="ur_opl_do_il_osn" is-fact-use="1" />
          </call>
        </call>
        <call as="opl_peni" title="Оплата - проценты/ неустойка" comment="27." group="sum" function="least" key="0">
          <column table="this" column="otkaz_peni" />
          <call function="+nvl">
            <column table="ur_mat_add_info" column="ur_opl_do_resh_peni" is-fact-use="1" />
            <column table="ur_mat_add_info" column="ur_opl_do_il_peni" is-fact-use="1" />
          </call>
        </call>
        <call as="opl_gp" title="Оплата - госпошлина/ третейскмй сбор" comment="28." group="sum" function="least" key="0">
          <column table="this" column="otkaz_gp" />
          <column table="ur_mat_add_info" column="ur_opl_do_il_gp" is-fact-use="1" />
        </call>
        <call function="if" comment="29." title="Оплата - кол-во" as="opl_count" group="sum" type="number" key="0">
          <call function="gt">
            <call function="+nvl">
              <column table="this" column="opl_osn" />
              <column table="this" column="opl_peni" />
              <column table="this" column="opl_gp" />
            </call>
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="По заявке 64628" title="Отменено судебных приказов - долг, расходы на ограничение" as="otmena_osn" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_osn" />
        </call>
        <call function="if" comment="По заявке 64628" title="Отменено судебных приказов - проценты/ неустойка" as="otmena_peni" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_peni" />
        </call>
        <call function="if" comment="По заявке 64628" title="Отменено судебных приказов - госпошлина/ третейскмй сбор" as="otmena_gp" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_gp" />
        </call>
        <call function="if" comment="По заявке 64628" title="Отменено судебных приказов - кол-во" as="otmena_count" group="sum" type="number" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="ur_mat" as="ur_mat" title="Материалы переданные в суд">
          <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка">
            <link name="kodp" as="kodp" table="kr_payer" child="ur_folders" field="kodp" parent="kr_payer" back="ur_folders" title="Абонент" />
            <link name="kod_podr" as="kod_podr" table="kr_org" child="ur_folders" field="kod_podr" parent="kr_org" back="ur_folders" />
          </link>
        </query>
        <query name="54503-ur_mat_info" join="left outer" as="ur_mat_add_info" dname="54503-main">
          <call function="=">
            <column table="ur_mat" column="kod_mat" />
            <column table="ur_mat_add_info" column="kod_mat" />
          </call>
        </query>
        <query name="54503-ur_mat_gr_p_filter" join="inner" as="ur_mat_gr_p" dname="54503-main">
          <call function="=">
            <column table="ur_mat" column="kod_mat" />
            <column table="ur_mat_gr_p" column="kod_mat" />
          </call>
          <withparams>
            <useparam name="kod_group_cust_parent" />
            <useparam name="kod_group_cust" />
          </withparams>
        </query>
        <query name="54503-ur_hist_mat_last_resh" join="left outer" as="ur_hist_mat" dname="54503-main">
          <call function="and">
            <call function="=">
              <column table="ur_mat" column="kod_mat" />
              <column table="ur_hist_mat" column="kod_mat" />
            </call>
            <call function="=">
              <column table="ur_hist_mat" column="max_date_over_mat_dec" />
              <column table="ur_hist_mat" column="dat_rassm" />
            </call>
            <call function="=">
              <column table="ur_hist_mat" column="mat_has_decision" />
              <column table="ur_hist_mat" column="decision" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_folders" column="kod_sdp" />
            <const>1</const>
          </call>
          <call function="in" optional="1">
            <column table="this" column="kod_podr" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="this" column="pio_kod_emp" />
            <useparam name="kod_emp_isp_pio" />
          </call>
          <call function="le" optional="1">
            <column table="this" column="dat_pod" />
            <useparam name="dat_isk_po" />
          </call>
          <call function="ge" optional="1">
            <column table="this" column="dat_pod" />
            <useparam name="dat_isk_s" />
          </call>
        </call>
      </where>
      <grouping>
        <grset as="itog">
          <grset as="isk" order="dat_pod,podr_name,kodp_name,num_delo">
            <group>
              <column table="this" column="kod_mat" />
              <column table="this" column="kodp" />
              <column table="this" column="kod_podr" />
              <column table="this" column="kod_hist_mat" />
              <column table="this" column="pio_kod_emp" />
              <column table="this" column="kodp_name" />
              <column table="this" column="num_delo" />
              <column table="this" column="dat_pod" />
              <column table="this" column="dat_prin" />
              <column table="this" column="predmet_isk" />
              <column table="this" column="podr_name" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="54503-ur_mat_info" materialize="1" timestamp="07.11.2022 13:30:00" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml" haskeys="1">
      <select>
        <column table="ur_mat" column="kod_mat" as="kod_mat" key="1" fixed="1" />
        <fact column="kr_dog_name" as="kr_dog_name" is-fact-use="1" key="0" />
        <fact column="ur_dogplat_ym_str" as="ur_dogplat_ym_str" is-fact-use="1" key="0" />
        <fact column="ur_dogplat_ym_all" as="ur_dogplat_ym_all" is-fact-use="1" key="0" />
        <fact column="peni_period_str" as="peni_period_str" is-fact-use="1" key="0" />
        <fact column="ur_dp_sum_osn" as="ur_dp_sum_osn" is-fact-use="1" key="0" />
        <column table="ur_mat" column="ogr" as="ogr" key="0" />
        <fact column="ur_dp_sum_peni" as="ur_dp_sum_peni" is-fact-use="1" key="0" />
        <fact column="ur_mat_sum_gp" as="ur_mat_sum_gp" is-fact-use="1" key="0" />
        <fact column="ur_dp_priz_osn" as="ur_dp_priz_osn" is-fact-use="1" key="0" />
        <fact column="ur_dp_priz_peni" as="ur_dp_priz_peni" is-fact-use="1" key="0" />
        <fact column="ur_opl_do_il_osn" as="ur_opl_do_il_osn" is-fact-use="1" key="0" />
        <fact column="ur_opl_do_il_peni" as="ur_opl_do_il_peni" is-fact-use="1" key="0" />
        <fact column="ur_opl_do_il_gp" as="ur_opl_do_il_gp" is-fact-use="1" key="0" />
        <fact column="ur_opl_do_resh_osn" as="ur_opl_do_resh_osn" is-fact-use="1" key="0" />
        <fact column="ur_opl_do_resh_peni" as="ur_opl_do_resh_peni" is-fact-use="1" key="0" />
        <fact column="ur_pretenz_last_pio_kod_emp" as="ur_pretenz_last_pio_kod_emp" is-fact-use="1" key="0" />
      </select>
      <from>
        <query name="ur_mat" as="ur_mat" title="Материалы переданные в суд" />
      </from>
    </query>
    <query name="54503-ur_mat_gr_p_filter" materialize="1" timestamp="07.11.2022 13:35:00" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml" haskeys="1">
      <params>
        <param name="kod_group_cust_parent" type="array" />
        <param name="kod_group_cust" type="array" />
      </params>
      <select>
        <column column="kod_mat" table="ur_mat" group="1" as="kod_mat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_mat" as="ur_mat" title="Материалы переданные в суд">
          <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <link name="kod_deb_sf" as="kod_deb_sf" table="vv_all_deb_sf" child="ur_dogplat" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat">
              <link name="kod_sf" as="kod_sf" table="sr_facvip" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
                <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="sr_facvip" field="kod_dog" parent="kr_dogovor" back="sr_facvip" title="Договор">
                  <link name="kod_dog_dop" as="kod_dog_dop" table="kr_dogovor_dop" child="kr_dogovor" field="kod_dog_dop" parent="kr_dogovor_dop" back="kr_dogovor">
                    <link name="kod_group_cust" as="kod_group_cust" table="ks_group_cust" child="kr_dogovor_dop" field="kod_group_cust" parent="ks_group_cust" back="kr_dogovor_dop" />
                  </link>
                </link>
              </link>
            </link>
          </elink>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <query>
              <select>
                <column table="a" column="kod_group_cust" as="kod_group_cust" />
              </select>
              <from>
                <query name="ks_group_cust" as="a" />
              </from>
              <start>
                <call function="=">
                  <column table="a" column="kod_group_cust" />
                  <column table="kod_group_cust" column="kod_group_cust" />
                </call>
              </start>
              <connect>
                <call function="=">
                  <column table="a" column="kod_gr_parent" prior="1" />
                  <column table="a" column="kod_group_cust" />
                </call>
              </connect>
              <where>
                <call function="is null">
                  <column table="a" column="kod_gr_parent" />
                </call>
              </where>
            </query>
            <useparam name="kod_group_cust_parent" />
          </call>
          <call function="in" optional="1">
            <column table="kod_group_cust" column="kod_group_cust" />
            <useparam name="kod_group_cust" />
          </call>
        </call>
      </where>
    </query>
    <query name="54503-params" timestamp="07.11.2022 13:50:00" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml">
      <params>
        <param name="dep" type="array" />
        <param name="kod_emp_isp_pio" type="array" />
        <param name="kod_group_cust_parent" type="array" />
        <param name="kod_group_cust" type="array" />
        <param name="dat_isk_s" type="date" />
        <param name="dat_isk_po" type="date" />
        <param name="is_isk_before_dat" type="number" />
        <param name="kod_emp_isp" type="number" />
        <param name="kod_emp_podp" type="number" />
      </params>
      <select>
        <call function="()" as="isp_fio" title="Фио исполнителя" type="string" key="0">
          <query>
            <select>
              <column table="e_i_n" column="fio" as="fio" />
            </select>
            <from>
              <query name="kr_employee" as="e_i_n" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="=" optional="1">
                  <column table="e_i_n" column="kod_emp" />
                  <useparam name="kod_emp_isp" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="isp_phone" title="Телефон исполнителя" type="string" key="0">
          <query>
            <select>
              <column table="e_i_p" column="tel" as="tel" />
            </select>
            <from>
              <query name="kr_employee" as="e_i_p" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="=" optional="1">
                  <column table="e_i_p" column="kod_emp" />
                  <useparam name="kod_emp_isp" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="podp_fio" title="Фио подписанта" type="string" key="0">
          <query>
            <select>
              <column table="e_p_n" column="fio" as="fio" />
            </select>
            <from>
              <query name="kr_employee" as="e_p_n" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="=" optional="1">
                  <column table="e_p_n" column="kod_emp" />
                  <useparam name="kod_emp_podp" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="podp_dolg" title="Должность подписанта" type="string" key="0">
          <query>
            <select>
              <column table="e_p_d_n" column="name" as="name" />
            </select>
            <from>
              <query name="kr_employee" as="e_p_d">
                <link name="kod_namedolzh" as="e_p_d_n" table="ks_namedolzh" child="kr_employee" field="kod_namedolzh" parent="ks_namedolzh" back="kr_employee" />
              </query>
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="=" optional="1">
                  <column table="e_p_d" column="kod_emp" />
                  <useparam name="kod_emp_podp" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="date to char" as="dat_isk_s" key="0">
          <call function="nvlu" type="date">
            <useparam name="dat_isk_s" />
            <call function="null" />
          </call>
        </call>
        <call function="date to char" as="dat_isk_po" key="0">
          <call function="nvlu" type="date">
            <useparam name="dat_isk_po" />
            <call function="null" />
          </call>
        </call>
        <call function="()" as="dep_arr" title="Подразделения" type="string" key="0">
          <query>
            <select>
              <column table="e_k_o" column="sname" group="stragg_dist" as="sname" />
            </select>
            <from>
              <query name="kr_org" as="e_k_o" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="in" optional="1">
                  <column table="e_k_o" column="kodp" />
                  <useparam name="dep" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="isp_pio_arr" title="Исполнители ПИО" type="string" key="0">
          <query>
            <select>
              <column table="e_k_e" column="fio" group="stragg_dist" as="fio" />
            </select>
            <from>
              <query name="kr_employee" as="e_k_e" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="in" optional="1">
                  <column table="e_k_e" column="kod_emp" />
                  <useparam name="kod_emp_isp_pio" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="cust_name_arr" type="string" title="Группы потребления" key="0">
          <query>
            <select>
              <column table="e_k_g_c" column="name" as="cust_name" group="stragg_dist" />
            </select>
            <from>
              <query name="ks_group_cust" as="e_k_g_c" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="in" optional="1">
                  <column table="e_k_g_c" column="kod_group_cust" />
                  <useparam name="kod_group_cust_parent" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" as="cust_pg_name_arr" type="string" title="Подруппы потребления" key="0">
          <query>
            <select>
              <column table="e_k_g_c" column="name" as="cust_name" group="stragg_dist" />
            </select>
            <from>
              <query name="ks_group_cust" as="e_k_g_c" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="in" optional="1">
                  <column table="e_k_g_c" column="kod_group_cust" />
                  <useparam name="kod_group_cust" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="if" as="view_old_isks" title="Включены данные по искам, поданным до отчетного периода" type="string" key="0">
          <call function="or">
            <call function="false" />
            <call function="=1" optional="1">
              <useparam name="is_isk_before_dat" />
            </call>
          </call>
          <const>'да'</const>
          <const>'нет'</const>
        </call>
        <call function="sysdate" as="dat" key="0" />
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="54503-default_dat_kv_beg" timestamp="13.11.2019 19:11:54" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml">
      <select>
        <call function="add_months" as="prev_kv_begin" key="0">
          <call function="trunc">
            <call function="sysdate" />
            <const>'Q'</const>
          </call>
          <const>-3</const>
        </call>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="54503-default_dat_kv_end" timestamp="13.11.2019 19:14:17" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml">
      <select>
        <call function="-" as="prev_kv_end" type="date" key="0">
          <call function="trunc">
            <call function="sysdate" />
            <const>'Q'</const>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="54503-ur_hist_mat_last_resh" materialize="1" timestamp="07.11.2022 13:40:00" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml" haskeys="1">
      <select>
        <column table="ur_hist_mat" column="kod_hist_mat" as="kod_hist_mat" key="1" fixed="1" />
        <column table="ur_hist_mat" column="kod_mat" as="kod_mat" key="0" />
        <column table="ur_hist_mat" column="decision" as="decision" key="0" />
        <column table="ur_hist_mat" column="dat_rassm" as="dat_rassm" key="0" />
        <call function="over" as="max_date_over_mat_dec" key="0">
          <call function="max">
            <column table="ur_hist_mat" column="dat_rassm" />
          </call>
          <call function="partition by">
            <column table="ur_hist_mat" column="kod_mat" />
            <column table="ur_hist_mat" column="decision" />
          </call>
        </call>
        <call function="over" as="mat_has_decision" key="0">
          <call function="max">
            <column table="ur_hist_mat" column="decision" />
          </call>
          <call function="partition by">
            <column table="ur_hist_mat" column="kod_mat" />
          </call>
        </call>
        <column table="ur_hist_mat" column="kod_result" as="kod_result" key="0" />
        <column table="ur_hist_mat" column="dat_post" as="dat_post" key="0" />
        <column table="ur_hist_mat" column="ogr" as="ogr" key="0" />
        <column table="ur_hist_mat" column="gp_otv" as="gp_otv" key="0" />
        <column table="ur_hist_mat" column="gp_ret" as="gp_ret" key="0" />
        <column table="ur_hist_mat" column="dat_entry" as="dat_entry" key="0" />
        <column table="ur_hist_mat" column="opl_ogr_dat" as="opl_ogr_dat" key="0" />
        <column table="ur_hist_mat" column="opl_ogr" as="opl_ogr" key="0" />
      </select>
      <from>
        <query name="ur_hist_mat" as="ur_hist_mat" title="История рассмотрения" />
      </from>
    </query>
    <query name="54503-main_before" timestamp="14.04.2025 02:39:05" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param name="kod_emp_isp_pio" type="array" />
        <param name="kod_group_cust_parent" type="array" />
        <param name="kod_group_cust" type="array" />
        <param name="dat_isk_s" type="date" />
        <param name="dat_isk_po" type="date" />
        <param name="is_isk_before_dat" type="number" />
        <param name="kod_emp_isp" type="number" />
        <param name="kod_emp_podp" type="number" />
      </params>
      <select>
        <column table="ur_mat" column="kod_mat" as="kod_mat" key="1" fixed="1" />
        <call function="row_num" as="row_num" group="max" comment="с группировкой тут что-то не срослось" key="0">
          <column table="ur_mat" column="dat_doc" />
          <column table="kod_podr" column="sname" />
          <column table="kodp" column="name" />
          <column table="ur_mat" column="num_delo" />
        </call>
        <column table="kod_folders" column="kodp" as="kodp" key="0" />
        <column table="kod_folders" column="kod_podr" as="kod_podr" key="0" />
        <column table="ur_hist_mat" column="kod_hist_mat" as="kod_hist_mat" key="0" />
        <column table="ur_mat_add_info" column="ur_pretenz_last_pio_kod_emp" as="pio_kod_emp" key="0" is-fact-use="1" />
        <column table="kodp" column="name" comment="-----общий блок 2." as="kodp_name" title="Наименование     абонента" key="0" />
        <column table="ur_mat" column="num_delo" comment="3." title="Номер дела" as="num_delo" key="0" />
        <column table="ur_mat" column="dat_doc" comment="4." as="dat_pod" title="Дата подачи иска/заявления" key="0" />
        <column table="ur_hist_mat" column="dat_post" comment="5." as="dat_prin" title="Дата принятия судебного акта" key="0" />
        <call function="||" comment="6." as="predmet_isk" title="Предмет иска/заявления " key="0">
          <column table="ur_mat_add_info" column="kr_dog_name" is-fact-use="1" />
          <call function="case">
            <call function="when">
              <call function="gt">
                <call function="nvl0">
                  <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
                </call>
                <const>0</const>
              </call>
              <call function="||">
                <const>' '</const>
                <column table="ur_mat_add_info" column="ur_dogplat_ym_str" is-fact-use="1" />
              </call>
            </call>
            <call function="when">
              <call function="and">
                <call function="le">
                  <call function="nvl0">
                    <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
                  </call>
                  <const>0</const>
                </call>
                <call function="gt">
                  <call function="nvl0">
                    <column table="ur_mat_add_info" column="ur_dp_sum_peni" is-fact-use="1" />
                  </call>
                  <const>0</const>
                </call>
              </call>
              <call function="||">
                <const>' '</const>
                <column table="ur_mat_add_info" column="peni_period_str" is-fact-use="1" />
              </call>
            </call>
          </call>
        </call>
        <column table="kod_podr" column="sname" comment="7." as="podr_name" title="Филиал" key="0" />
        <call function="+nvl" comment="-----первый белый блок 8." as="pred_osn" title="Предъявлено - долг, расходы на ограничение" group="sum" key="0">
          <column table="ur_mat_add_info" column="ur_dp_sum_osn" is-fact-use="1" />
          <column table="ur_hist_mat" column="ogr" />
        </call>
        <column table="ur_mat_add_info" column="ur_dp_sum_peni" comment="9." as="pred_peni" title="Предъявлено - проценты/ пени, неустойка" group="sum" key="0" is-fact-use="1" />
        <column table="ur_mat_add_info" column="ur_mat_sum_gp" comment="10." as="pred_gp" title="Предъявлено - госпошлина/ третейскмй сбор" group="sum" key="0" is-fact-use="1" />
        <call function="+" title="Предъявлено - общая сумма" as="pred_sum" comment="11." group="sum" key="0">
          <column table="this" column="pred_osn" />
          <column table="this" column="pred_peni" />
          <column table="this" column="pred_gp" />
        </call>
        <call function="()" as="pred_count" title="Предъявлено - кол-во" comment="12." group="sum" type="number" key="0">
          <const>1</const>
        </call>
        <call function="if" comment="-----зеленый блок 13." as="udv_osn" title="Удовлетворено - долг, расходы на ограничение" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <call function="+">
            <column table="ur_mat_add_info" column="ur_dp_priz_osn" is-fact-use="1" />
            <column table="ur_hist_mat" column="ogr" />
          </call>
        </call>
        <call function="if" comment="14." as="udv_peni" title="Удовлетворено - проценты/ неустойка" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_mat_add_info" column="ur_dp_priz_peni" is-fact-use="1" />
        </call>
        <call function="if" comment="15." as="udv_gp" title="Удовлетворено - госпошлина/ третейскмй сбор" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_hist_mat" column="gp_otv" />
        </call>
        <call function="if" comment="16." as="udv_gp_ret" title="Удовлетворено - справка на возврат" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>42</const>
              <const>43</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>91</const>
            </call>
          </call>
          <column table="ur_hist_mat" column="gp_ret" />
        </call>
        <call function="if" comment="17." as="udv_count" title="Удовлетворено - кол-во" group="sum" type="number" key="0">
          <call function="and">
            <call function="or">
              <call function="!=">
                <call function="nvl">
                  <column table="this" column="udv_osn" />
                  <const>0</const>
                </call>
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="this" column="otkaz_osn" />
                    <const>0</const>
                  </call>
                  <const>0</const>
                </call>
                <call function="!=0">
                  <call function="+nvl">
                    <column table="this" column="udv_peni" />
                    <column table="this" column="udv_gp" />
                  </call>
                </call>
              </call>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="this" column="otkaz_osn" />
                    <const>0</const>
                  </call>
                  <const>0</const>
                </call>
                <call function="=0">
                  <call function="+nvl">
                    <column table="this" column="otkaz_peni" />
                    <column table="this" column="otkaz_gp" />
                  </call>
                </call>
              </call>
            </call>
            <call function="in">
              <column table="ur_hist_mat" column="kod_result" />
              <call function="array">
                <const>42</const>
                <const>43</const>
                <const>7</const>
                <const>10</const>
                <const>45</const>
                <const>97</const>
                <const>8</const>
                <const>91</const>
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="-----оранжевый блок 18." title="Отказано - долг, расходы на ограничение" as="otkaz_osn" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_osn" />
            <column table="this" column="udv_osn" />
          </call>
        </call>
        <call function="if" comment="19." title="Отказано - проценты/ неустойка" as="otkaz_peni" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_peni" />
            <column table="this" column="udv_peni" />
          </call>
        </call>
        <call function="if" comment="20." title="Отказано - госпошлина/ третейскмй сбор" as="otkaz_gp" group="sum" key="0">
          <call function="in">
            <column table="ur_hist_mat" column="kod_result" />
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
            </call>
          </call>
          <call function="-nvl">
            <column table="this" column="pred_gp" />
            <call function="+nvl">
              <column table="this" column="udv_gp_ret" />
              <column table="this" column="udv_gp" />
            </call>
          </call>
        </call>
        <call function="if" comment="21." title="Отказано - кол-во" as="otkaz_count" group="sum" type="number" key="0">
          <call function="and">
            <call function="in">
              <column table="ur_hist_mat" column="kod_result" />
              <call function="array">
                <const>44</const>
                <const>5</const>
                <const>6</const>
                <const>43</const>
                <const>41</const>
                <const>91</const>
                <const>42</const>
                <const>7</const>
                <const>10</const>
                <const>45</const>
                <const>97</const>
                <const>8</const>
              </call>
            </call>
            <call function="=0">
              <call function="nvl0">
                <column table="this" column="udv_count" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="-----желтый блок 22." as="rassm_osn" title="На рассмотрении - долг, расходы на ограничение" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_osn" />
        </call>
        <call function="if" comment="23." as="rassm_peni" title="На рассмотрении - проценты/ неустойка" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_peni" />
        </call>
        <call function="if" comment="24." as="rassm_gp" title="На рассмотрении - госпошлина/ третейскмй сбор" group="sum" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <column table="this" column="pred_gp" />
        </call>
        <call function="if" comment="25." as="rassm_count" title="На рассмотрении - кол-во" group="sum" type="number" key="0">
          <call function="not in">
            <call function="nvl0">
              <column table="ur_hist_mat" column="kod_result" />
            </call>
            <call function="array">
              <const>44</const>
              <const>5</const>
              <const>6</const>
              <const>43</const>
              <const>41</const>
              <const>91</const>
              <const>42</const>
              <const>7</const>
              <const>10</const>
              <const>45</const>
              <const>97</const>
              <const>8</const>
              <const>99</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="least" as="opl_osn" title="Оплата - долг, расходы на ограничение" comment="-----второй белый блок 26." group="sum" key="0">
          <column table="this" column="otkaz_osn" />
          <call function="+nvl">
            <column table="ur_mat_add_info" column="ur_opl_do_resh_osn" is-fact-use="1" />
            <column table="ur_mat_add_info" column="ur_opl_do_il_osn" is-fact-use="1" />
          </call>
        </call>
        <call function="least" as="opl_peni" title="Оплата - проценты/ неустойка" comment="27." group="sum" key="0">
          <column table="this" column="otkaz_peni" />
          <call function="+nvl">
            <column table="ur_mat_add_info" column="ur_opl_do_resh_peni" is-fact-use="1" />
            <column table="ur_mat_add_info" column="ur_opl_do_il_peni" is-fact-use="1" />
          </call>
        </call>
        <call function="least" as="opl_gp" title="Оплата - госпошлина/ третейскмй сбор" comment="28." group="sum" key="0">
          <column table="this" column="otkaz_gp" />
          <column table="ur_mat_add_info" column="ur_opl_do_il_gp" is-fact-use="1" />
        </call>
        <call function="if" comment="29." title="Оплата - кол-во" as="opl_count" group="sum" type="number" key="0">
          <call function="gt">
            <call function="+nvl">
              <column table="this" column="opl_osn" />
              <column table="this" column="opl_peni" />
              <column table="this" column="opl_gp" />
            </call>
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" comment="По заявке 64628" as="otmena_osn" title="Отменено судебных приказов - долг, расходы на ограничение" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_osn" />
        </call>
        <call function="if" comment="По заявке 64628" as="otmena_peni" title="Отменено судебных приказов - проценты/ неустойка" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_peni" />
        </call>
        <call function="if" comment="По заявке 64628" as="otmena_gp" title="Отменено судебных приказов - госпошлина/ третейскмй сбор" group="sum" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <column table="this" column="pred_gp" />
        </call>
        <call function="if" comment="По заявке 64628" as="otmena_count" title="Отменено судебных приказов - кол-во" group="sum" type="number" key="0">
          <call function="=">
            <column table="ur_hist_mat" column="kod_result" />
            <const>99</const>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="ur_mat" as="ur_mat" title="Материалы переданные в суд">
          <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка">
            <link name="kodp" as="kodp" table="kr_payer" child="ur_folders" field="kodp" parent="kr_payer" back="ur_folders" title="Абонент" />
            <link name="kod_podr" as="kod_podr" table="kr_org" child="ur_folders" field="kod_podr" parent="kr_org" back="ur_folders" />
          </link>
        </query>
        <query name="54503-ur_mat_info" join="left outer" as="ur_mat_add_info" dname="54503-main_before">
          <call function="=">
            <column table="ur_mat" column="kod_mat" />
            <column table="ur_mat_add_info" column="kod_mat" />
          </call>
        </query>
        <query name="54503-ur_mat_gr_p_filter" join="inner" as="ur_mat_gr_p" dname="54503-main_before">
          <call function="=">
            <column table="ur_mat" column="kod_mat" />
            <column table="ur_mat_gr_p" column="kod_mat" />
          </call>
          <withparams>
            <useparam name="kod_group_cust_parent" />
            <useparam name="kod_group_cust" />
          </withparams>
        </query>
        <query name="54503-ur_hist_mat_last_resh" join="left outer" as="ur_hist_mat" dname="54503-main_before">
          <call function="and">
            <call function="=">
              <column table="ur_mat" column="kod_mat" />
              <column table="ur_hist_mat" column="kod_mat" />
            </call>
            <call function="=">
              <column table="ur_hist_mat" column="max_date_over_mat_dec" />
              <column table="ur_hist_mat" column="dat_rassm" />
            </call>
            <call function="=">
              <column table="ur_hist_mat" column="mat_has_decision" />
              <column table="ur_hist_mat" column="decision" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="this" column="kod_podr" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="this" column="pio_kod_emp" />
            <useparam name="kod_emp_isp_pio" />
          </call>
          <call function="le" optional="1">
            <column table="this" column="dat_prin" />
            <useparam name="dat_isk_po" />
          </call>
          <call function="ge" optional="1">
            <column table="this" column="dat_prin" />
            <useparam name="dat_isk_s" />
          </call>
          <call function="or">
            <call function="false" />
            <call function="=1" optional="1">
              <useparam name="is_isk_before_dat" />
            </call>
          </call>
          <call function="lt" optional="1">
            <column table="this" column="dat_pod" />
            <useparam name="dat_isk_s" />
          </call>
          <call function="=">
            <column table="kod_folders" column="kod_sdp" />
            <const>1</const>
          </call>
        </call>
      </where>
      <grouping>
        <grset as="itog">
          <grset as="isk" order="dat_pod,podr_name,kodp_name,num_delo">
            <group>
              <column table="this" column="kod_mat" />
              <column table="this" column="kodp" />
              <column table="this" column="kod_podr" />
              <column table="this" column="kod_hist_mat" />
              <column table="this" column="pio_kod_emp" />
              <column table="this" column="kodp_name" />
              <column table="this" column="num_delo" />
              <column table="this" column="dat_pod" />
              <column table="this" column="dat_prin" />
              <column table="this" column="predmet_isk" />
              <column table="this" column="podr_name" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="form:54503" haskeys="1">
      <select>
        <column table="u" column="title" title="Параметр" as="title" />
        <column table="u" column="name" key="1" as="name" />
        <column table="u" column="text" title="Значение" as="text" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const type="string" as="title">'Отделение'</const>
                <const type="string" as="name">'dep'</const>
                <const type="string" as="text">NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Исполнитель ПИО'</const>
                <const>'kod_emp_isp_pio'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Группа потребителей'</const>
                <const>'kod_group_cust_parent'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Подгруппа потребления'</const>
                <const>'kod_group_cust'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'c'</const>
                <const>'dat_isk_s'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'по'</const>
                <const>'dat_isk_po'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Выводить данные по искам, поданным до отчетного периода'</const>
                <const>'is_isk_before_dat'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Исполнитель'</const>
                <const>'kod_emp_isp'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Подписант'</const>
                <const>'kod_emp_podp'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id" />
  <views child-name="view" key-name="id" />
  <reports child-name="report" key-name="name">
    <report name="54503" form="54503" datareader="1" nogrid="1" title="Отчет по судебной работе по юридическим лицам" timestamp="07.11.2022 13:50:00" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml">
      <params>
        <param name="dep" type="array" />
        <param name="kod_emp_isp_pio" type="array" />
        <param name="kod_group_cust_parent" type="array" />
        <param name="kod_group_cust" type="array" />
        <param name="dat_isk_s" type="date" />
        <param name="dat_isk_po" type="date" />
        <param name="is_isk_before_dat" type="number" />
        <param name="kod_emp_isp" type="number" />
        <param name="kod_emp_podp" type="number" />
      </params>
      <customers>
        <customer id="10" />
      </customers>
      <print-templates>
        <excel>
          <template name="54503.xlsx" title="Отчёт по судебной работе по юридическим лицам" print-xlsx="1" print-proc="2" del-cols="1" />
        </excel>
      </print-templates>
      <queries>
        <query name="54503-main" as="a" title="data">
          <withparams>
            <useparam name="dep" />
            <useparam name="kod_emp_isp_pio" />
            <useparam name="kod_group_cust_parent" />
            <useparam name="kod_group_cust" />
            <useparam name="dat_isk_s" />
            <useparam name="dat_isk_po" />
            <useparam name="is_isk_before_dat" />
            <useparam name="kod_emp_isp" />
            <useparam name="kod_emp_podp" />
          </withparams>
        </query>
        <query name="54503-main_before" as="b" title="data before dat">
          <withparams>
            <useparam name="dep" />
            <useparam name="kod_emp_isp_pio" />
            <useparam name="kod_group_cust_parent" />
            <useparam name="kod_group_cust" />
            <useparam name="dat_isk_s" />
            <useparam name="dat_isk_po" />
            <useparam name="is_isk_before_dat" />
            <useparam name="kod_emp_isp" />
            <useparam name="kod_emp_podp" />
          </withparams>
        </query>
        <query name="54503-params" as="param" title="params">
          <withparams>
            <useparam name="dep" />
            <useparam name="kod_emp_isp_pio" />
            <useparam name="kod_group_cust_parent" />
            <useparam name="kod_group_cust" />
            <useparam name="dat_isk_s" />
            <useparam name="dat_isk_po" />
            <useparam name="is_isk_before_dat" />
            <useparam name="kod_emp_isp" />
            <useparam name="kod_emp_podp" />
          </withparams>
        </query>
      </queries>
    </report>
  </reports>
  <forms child-name="form" key-name="name">
    <form name="54503" timestamp="14.04.2025 03:53:11" file="sql.builder.templates\sql.builder\projects\54503\all\all.xml">
      <content>
        <field name="dep" controlType="UIList" title="Отделение" type="number" timestamp="13.05.2019 13:13:44" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml">
          <listquery>
            <query name="kr_dep" />
          </listquery>
          <defaultquery>
            <query name="kr_dep_current" />
          </defaultquery>
        </field>
        <field name="kod_emp_isp_pio" type="number" controlType="UIList" title="Исполнитель ПИО">
          <listquery>
            <query name="kr_employee_urists">
              <withparams>
                <useparam name="dep" />
              </withparams>
            </query>
          </listquery>
        </field>
        <field type="number" name="kod_group_cust_parent" controlType="UIList" name-field-name="name" title="Группа потребителей" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml">
          <listquery>
            <query name="ks_group_cust_parent_list" />
          </listquery>
        </field>
        <field type="number" name="kod_group_cust" controlType="UIList" name-field-name="name" title="Подгруппа потребления" timestamp="11.03.2019 21:55:11" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml">
          <listquery>
            <query name="ks_group_cust_list_recursive" />
          </listquery>
        </field>
        <fieldgroup title="Дата подачи иска/заявления в суд">
          <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat_isk_s" title="c" halign="left" width-perc="50">
            <defaultquery>
              <query name="54503-default_dat_kv_beg" />
            </defaultquery>
          </field>
          <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat_isk_po" title="по" halign="right" width-perc="50">
            <defaultquery>
              <query name="54503-default_dat_kv_end" />
            </defaultquery>
          </field>
        </fieldgroup>
        <field controlType="UICheck" checked="0" type="number" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="is_isk_before_dat" title="Выводить данные по искам, поданным до отчетного периода">
          <defaultquery>
            <query name="true" />
          </defaultquery>
        </field>
        <field controlType="UICombo" type="number" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="kod_emp_isp" title="Исполнитель">
          <listquery>
            <query name="kr_employee_urists" />
          </listquery>
        </field>
        <field controlType="UICombo" type="number" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="kod_emp_podp" title="Подписант">
          <listquery>
            <query name="kr_employee_podpisant_52834" />
          </listquery>
        </field>
      </content>
    </form>
  </forms>
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name" />
  <dimension-packages child-name="dimension-package" key-name="name" />
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id" />
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>