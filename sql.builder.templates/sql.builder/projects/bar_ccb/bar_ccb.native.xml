<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-06-29T03:13:43.3801687+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="vcf_kr_org_dep_x" class="1" timestamp="30.01.2019 16:55:56" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\kr_org_dep_x.xml">
      <select>
        <column table="a" column="kodp" as="dep" key="1" />
        <column table="a" column="name" />
        <column table="vcs_dep" column="name" as="name_ccb" column-width="207" />
        <column table="vcs_dep" column="kod_vdog" />
        <column table="vcs_dep" column="id" as="vcs_dep_id" />
        <column table="vcs_dep" column="dep" as="vcs_dep" />
      </select>
      <from>
        <query name="kr_dep" as="a" />
        <query name="vcs_dep" as="vcs_dep" join="left outer" title="Отделение" dname="kr_dog_dep" updateable="1">
          <call function="=">
            <column table="this" column="dep" />
            <column table="vcs_dep" column="dep" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcf_ist_x" class="1" timestamp="30.01.2019 17:28:34" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\kr_org_dep_x.xml">
      <select>
        <column table="a" column="kod_ist" key="1" />
        <column table="a" column="name" title="Источник финансирования" />
        <column table="vcs_ist_fin" column="name" as="name_ccb" column-width="207" />
        <column table="vcs_ist_fin" column="id" as="vcs_ist_fin_id" />
        <column table="vcs_ist_fin" column="kod_ist" as="kod_ist_x" />
      </select>
      <from>
        <query name="ks_istfin" as="a" />
        <query name="vcs_ist_fin" join="left outer" dname="kr_dog_dep" updateable="1" as="vcs_ist_fin">
          <call function="=">
            <column table="this" column="kod_ist" />
            <column table="vcs_ist_fin" column="kod_ist" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcf_eobj_list" class="1" timestamp="02.02.2019 14:54:47" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\kr_org_dep_x.xml">
      <select>
        <column table="a" column="eobj_id" key="1" />
        <column table="a" column="name" />
      </select>
      <from>
        <query name="hr_eobject" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="kod_separator" />
          <const>40</const>
        </call>
      </where>
    </query>
    <query name="vci_kr_payer" timestamp="21.02.2019 17:58:41" title="kr_payer" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="kr_payer_id" title="kr_payer_id" group="1" />
        <column table="a" column="kodp" title="kodp" group="max" />
        <column table="a" column="nump" title="nump" group="max" />
        <call function="substr" group="max" title="name" as="name">
          <column table="a" column="payer_name" />
          <const>0</const>
          <const>200</const>
        </call>
        <column table="a" column="payer_allname" as="allname" title="allname" group="max" />
        <column table="a" column="kod_d" title="kod_d" group="max" />
        <column table="a" column="kod_d_ur" title="kod_d_ur" group="max" />
        <column table="a" column="kod_d_p" title="kod_d_p" group="max" />
        <column table="a" column="kod_m" title="kod_m" group="max" />
        <column table="a" column="kod_otrasl" title="kod_otrasl" group="max" />
        <column table="a" column="kod_fs" title="kod_fs" group="max" />
      </select>
      <from>
        <query name="vccb_dog" as="a">
          <link name="vcr_dog_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_dog_err" column="do_load_dog" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_dog_kod" timestamp="05.02.2019 04:31:36" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="acct_id" group="1" />
        <column table="kr_dogovor" column="kod_dog" group="max" />
        <column table="kr_dogovor" column="kod_dog" group="count" as="cnt" />
        <column table="k_dog" column="key_inner" group="max" as="k_dog" />
      </select>
      <from>
        <query name="vccb_dog" as="a" />
        <query join="left outer" name="kr_dogovor">
          <call type="" function="and">
            <call function="!=">
              <column table="kr_dogovor" column="pr_active" />
              <const>1</const>
            </call>
            <call function="=" as="" type="">
              <column table="a" column="account_number" />
              <call type="" function="nvl">
                <column table="kr_dogovor" column="rassh2" as="" type="" />
                <column table="kr_dogovor" column="ndog" as="" type="" />
              </call>
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_dog">
          <call function="and">
            <call function="=">
              <column table="k_dog" column="key_name_inner" />
              <const>'KOD_DOG'</const>
            </call>
            <call function="=">
              <column table="k_dog" column="key_outer" />
              <column table="a" column="acct_id" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vci_kr_dogovor" timestamp="23.05.2019 20:51:55" is-report="1" title="kr_dogovor" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="acct_id" as="kr_dogovor_id" title="kr_dogovor_id" />
        <column table="a" column="kr_payer_id" title="kr_payer_id" />
        <column table="a" column="kod_dog" title="kod_dog" format="F0" />
        <column table="a" column="account_number" as="ndog" title="ndog" />
        <call function="nvl" type="number" as="dep" title="dep" format="F0">
          <column table="kod_dog" column="dep" />
          <column table="a" column="dep" />
        </call>
        <call function="nvl" type="number" as="podr" title="podr" format="F0">
          <column table="kod_dog" column="podr" />
          <column table="a" column="dep" />
        </call>
        <column table="a" column="kod_vdog" title="kod_vdog" format="F0" />
        <column table="a" column="pr_active" title="pr_active" format="F0" />
        <column table="a" column="cust_account" as="rassh1" title="rassh1" />
        <call function="()" type="number" as="tep_el" title="tep_el" format="F0">
          <const>1</const>
        </call>
        <column table="a" column="dat_dog" title="dat_dog" />
        <column table="a" column="kod_ist" title="kod_ist" />
        <column table="vcs_glob" column="vid_pl" title="vid_pl" />
        <column table="vcs_glob" column="kod_bzad" title="kod_bzad" />
        <column table="a" column="kodbpol" title="kodbpol" />
        <column table="vcx_kodp_uch" column="kodp" as="kodp_uch" />
        <column table="a" column="acct_id" title="acct_id" />
      </select>
      <from>
        <query name="vccb_dog" as="a">
          <link name="vcr_dog_err" />
          <link name="kod_dog" />
          <link name="vcs_glob" />
        </query>
        <query name="vcx_kodp_uch" join="left outer">
          <call function="and">
            <call function="=">
              <call function="lower">
                <column table="a" column="u4astok_name" />
              </call>
              <call function="lower">
                <column table="vcx_kodp_uch" column="sname" />
              </call>
            </call>
            <call function="=">
              <call function="nvl">
                <column table="kod_dog" column="dep" />
                <column table="a" column="dep" />
              </call>
              <column table="vcx_kodp_uch" column="dep" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_dog_err" column="do_load_dog" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_dog_err" timestamp="11.09.2019 17:07:02" title="Договоры" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <content>
        <usefield field="cmn_check" name="pr_error" title="Только с ошибками" />
        <usefield field="cmn_check" name="pr_need_create" title="Только где требуется создание" />
      </content>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="a" column="acct_id" title="acct_id" />
        <call type="number" as="is_new_stat" function="if" halign="center" title="Статус: Новый" format="F0">
          <call function="=">
            <column table="this" column="pr_active" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call type="number" as="is_no_obj" function="if" halign="center" title="Нет объектов" format="F0">
          <call function="=0">
            <column table="a" column="eo_cnt_n" />
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="is_actual_dog" title="Актуальный (активный и есть объекты или есть в АСУСЭ)" format="F0">
          <call type="" function="or">
            <call function="is null" as="" type="">
              <column table="this" column="is_new_stat" />
              <column table="this" column="is_no_obj" />
            </call>
            <call function="is not null">
              <column table="a" column="kod_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="neet_load_dog" format="F0" title="Тебуется создание или обновление">
          <call type="" function="and">
            <call function="is not null all" as="" type="">
              <column table="this" column="has_ch_dog" />
              <column table="this" column="is_actual_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="need_create_dog" format="F0" title="Тебуется создание">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="is_actual_dog" />
            </call>
            <call function="is null" as="" type="">
              <column table="a" column="kod_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="do_load_dog" title="Будет выполнена загрузка" format="F0">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="neet_load_dog" />
            </call>
            <call function="is null">
              <column table="this" column="has_error_dog" />
            </call>
            <call function="is null" exclude="1">
              <column table="this" column="ld_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="this" column="do_load_dog" as="do_load" title="-" />
        <call type="number" function="if" halign="center" as="do_create_dog" title="Будет создан" format="F0">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="need_create_dog" />
            </call>
            <call function="is null">
              <column table="this" column="has_error_dog" />
            </call>
            <call function="is null">
              <column table="this" column="ld_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="is_exists_dog" format="F0" title="Существует или будет создан">
          <call type="" function="or">
            <call function="is not null" as="" type="">
              <column table="this" column="kod_dog" />
              <column table="this" column="do_create_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="wrong_avans" format="F0" title="Невалидные данные по авансам">
          <call function="not">
            <call function="or" comment="либо какой-то один, либо оба">
              <call function="and" comment="первый из двух">
                <call function="is not null">
                  <column table="a" column="prc_avn1" />
                </call>
                <call function="is not null">
                  <column table="a" column="d_zt_av1" />
                </call>
                <call function="is null">
                  <column table="a" column="prc_avn2" />
                </call>
                <call function="is null">
                  <column table="a" column="d_zt_av2" />
                </call>
              </call>
              <call function="and" comment="второй из двух">
                <call function="is null">
                  <column table="a" column="prc_avn1" />
                </call>
                <call function="is null">
                  <column table="a" column="d_zt_av1" />
                </call>
                <call function="is not null">
                  <column table="a" column="prc_avn2" />
                </call>
                <call function="is not null">
                  <column table="a" column="d_zt_av2" />
                </call>
              </call>
              <call function="and" comment="оба">
                <call function="is not null">
                  <column table="a" column="prc_avn1" />
                </call>
                <call function="is not null">
                  <column table="a" column="d_zt_av1" />
                </call>
                <call function="is not null">
                  <column table="a" column="prc_avn2" />
                </call>
                <call function="is not null">
                  <column table="a" column="d_zt_av2" />
                </call>
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="do_load_vist_day" title="Будет выполнена загрузка процентов и дат авансов" format="F0">
          <call type="" function="and">
            <call function="is not null">
              <column table="this" column="is_actual_dog" />
            </call>
            <call function="is null">
              <column table="this" column="has_error_dog" />
            </call>
            <call function="is null">
              <column table="this" column="wrong_avans" />
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="dat_dog" />
        <band title="Изменения">
          <call type="number" as="has_ch_dog" function="if" halign="center" title="Есть изменения" format="F0">
            <call function="is not null">
              <column table="this" column="ch_kod_ist" />
              <column table="this" column="ch_kodbpol" />
              <column table="this" column="ch_rs" />
            </call>
            <const>1</const>
          </call>
          <band title="Договор">
            <call type="number" title="Новый договор (нет в АСУСЭ)" as="is_new_dog" function="if" halign="center" format="F0">
              <call type="" function="and">
                <call function="is null" as="" type="">
                  <column table="this" column="kod_dog" />
                </call>
                <call function="!=">
                  <column table="this" column="pr_active" />
                  <const>2</const>
                </call>
                <call function="!=0">
                  <column table="a" column="eo_cnt_n" />
                </call>
              </call>
              <const>1</const>
            </call>
            <call function="compare_1" as="ch_kod_ist" type="number" title="Источник финансирования" format="F0" halign="center">
              <column table="kod_dog" column="kod_ist" />
              <column table="a" column="kod_ist" />
            </call>
            <call function="compare_1" as="ch_kodbpol" type="number" title="Р/с получателя" format="F0" halign="center">
              <column table="kod_dog" column="kodbpol" />
              <column table="a" column="kodbpol" />
            </call>
            <call function="compare_1" as="ch_rs" type="number" title="Р/с плательщика" format="F0" halign="center">
              <column table="kod_dog" column="rassh1" />
              <column table="a" column="cust_account" />
            </call>
          </band>
        </band>
        <band title="Ошибки">
          <call type="number" as="has_error_dog" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="is_bad_dep" />
              <column table="this" column="is_other_dep" />
              <column table="this" column="cnt_dub_dog" />
              <column table="this" column="is_no_vid_dog" />
              <column table="this" column="is_no_ist" />
              <column table="this" column="dub_kod" />
              <column table="this" column="is_no_bank" />
              <column table="this" column="is_lost_dog" />
              <column table="this" column="is_deleted" />
            </call>
            <const>1</const>
          </call>
          <call function="if" title="Несколько договоров с одним кодом" as="dub_kod" type="number" format="F0" halign="center">
            <call function="gt">
              <call function="over">
                <call function="sum">
                  <const>1</const>
                </call>
                <call function="partition by">
                  <column table="a" column="acct_id" />
                </call>
              </call>
              <const>1</const>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_bad_dep" function="if" title="Отделение не определено" halign="center" format="F0">
            <call function="is null">
              <column table="this" column="dep" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_other_dep" function="if" halign="center" title="Отделение не соответствует" format="F0">
            <call function="!=nvl">
              <column table="this" column="dep" />
              <call function="nvl">
                <column table="kod_dog" column="dep" />
                <column table="this" column="dep" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="cnt_dub_dog" function="if" halign="center" title="Количество дублей в АСУСЭ" format="F0">
            <call function="gt">
              <column table="this" column="cnt_dog" />
              <const>1</const>
            </call>
            <call function="-nvl">
              <column table="this" column="cnt_dog" />
              <const>1</const>
            </call>
          </call>
          <call type="number" as="is_no_vid_dog" function="if" halign="center" title="Не задан вид договора" format="F0">
            <call function="is null">
              <column table="a" column="kod_vdog" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_no_ist" function="if" halign="center" title="Не найден источник финансирования" format="F0">
            <call function="is null">
              <column table="a" column="kod_ist" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_no_bank" function="if" halign="center" title="Не найден р/с получателя" format="F0">
            <call type="" function="and">
              <call function="is null" as="" type="">
                <column table="a" column="kodbpol" />
              </call>
              <call function="is not null">
                <column table="a" column="paye_account" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_lost_dog" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
            <call type="" function="and">
              <call function="is null" as="" type="">
                <column table="a" column="kod_dog" />
              </call>
              <call function="is not null">
                <column table="a" column="k_dog" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="if" as="is_deleted" title="Удален из CCnB" type="number">
            <call function="=1">
              <column table="a" column="deleted" />
            </call>
            <const>1</const>
          </call>
        </band>
        <band title="Загружено">
          <call type="number" function="if" halign="center" title="Договор" as="ld_dog" format="F0">
            <call function="is not null">
              <column table="a" column="k_dog" />
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="account_number" />
        <column table="kod_dog" column="ndog" title="Номер договора в АСУСЭ" />
        <column table="a" column="acctstat" />
        <column table="a" column="eo_cnt" />
        <column table="a" column="potr_short_name" />
        <column table="a" column="potr_address" />
        <column table="a" column="setup_date" />
        <column table="a" column="finansir" />
        <column table="a" column="dog_form" />
        <column table="a" column="kls_oesk" />
        <column table="a" column="dogpogr_short_name" />
        <column table="a" column="insp_short_name" />
        <column table="a" column="calcpodr_short_name" />
        <column table="a" column="estim_short_name" />
        <column table="a" column="wrt1_short_name" />
        <column table="a" column="wrt2_short_name" />
        <column table="a" column="paye_bank" />
        <column table="a" column="paye_account" />
        <column table="a" column="cust_bank" />
        <column table="a" column="cust_account" />
        <column table="a" column="access_group" />
        <column table="a" column="mkt_subj" />
        <column table="a" column="pr_min" />
        <column table="a" column="region" />
        <column table="a" column="dog_net" />
        <column table="a" column="denzadol" />
        <column table="a" column="prc_avn1" />
        <column table="a" column="d_zt_av1" />
        <column table="a" column="prc_avn2" />
        <column table="a" column="d_zt_av2" />
        <column table="a" column="dy_peni" />
        <column table="a" column="fineallf" />
        <column table="a" column="finans_lim" />
        <column table="a" column="rel_side" />
        <column table="a" column="grpol_short_name" />
        <column table="a" column="plat_short_name" />
        <column table="a" column="plat_address" />
        <column table="a" column="payr_bank" />
        <column table="a" column="payr_account" />
        <column table="a" column="stv_peni" />
        <column table="a" column="st_flag" />
        <column table="a" column="kod_dog" />
        <column table="a" column="dep" />
        <column table="a" column="cnt_dog" />
        <column table="a" column="kod_vdog" />
        <column table="a" column="pr_active" />
        <column table="a" column="kodbpol" />
      </select>
      <from>
        <query name="vccb_dog" as="a">
          <link name="kod_dog" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_error" />
            </call>
            <call function="is not null">
              <column table="this" column="has_error_dog" />
            </call>
          </call>
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_need_create" />
            </call>
            <call function="is not null">
              <column table="this" column="need_create_dog" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_numobj_kod" timestamp="13.02.2019 17:40:39" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="eo_id" group="1" />
        <column table="kr_numobj" column="kod_numobj" group="max" />
        <column table="a" column="account_number" group="max" exclude="1" />
        <column table="acct_id" column="account_number" group="max" as="account_number_d" exclude="1" />
        <column table="a" column="kod_dog" group="max" exclude="1" />
        <column table="kr_numobj" column="kod_numobj" group="count" as="cnt" />
        <column table="k" column="key_inner" group="max" />
      </select>
      <from>
        <query name="vccb_obj" as="a">
          <link name="acct_id" />
        </query>
        <query join="left outer" name="kr_numobj">
          <call function="and">
            <call function="=">
              <column table="a" column="num_obj_x" />
              <column table="kr_numobj" column="num_obj" />
            </call>
            <call function="=">
              <column table="kr_numobj" column="kod_dog" />
              <column table="acct_id" column="kod_dog" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k">
          <call function="and">
            <call function="=">
              <column table="k" column="key_name_inner" />
              <const>'KOD_NUMOBJ'</const>
            </call>
            <call function="=">
              <column table="k" column="key_outer" />
              <column table="a" column="eo_id" />
            </call>
          </call>
        </query>
      </from>
      <where exclude="1">
        <call type="" function="and">
          <call function="=" as="" type="">
            <column table="a" column="account_number" />
            <const>22090760020257</const>
          </call>
          <call function="=">
            <column table="a" column="num_obj_x" />
            <const>177</const>
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_obj_err" timestamp="06.09.2019 17:15:18" title="Энергоснабжаемые объекты" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <content>
        <usefield field="cmn_check" name="pr_error" title="Только с ошибками" />
      </content>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="a" column="eo_id" title="eo_id" />
        <column table="a" column="acct_id" title="acct_id" />
        <band title="Договор">
          <column table="vcr_dog_err" column="is_actual_dog" />
          <column table="vcr_dog_err" column="is_exists_dog" />
        </band>
        <call type="number" function="if" halign="center" as="is_actual_obj" title="Актуальный (без даты прекращщения или есть в АСУСЭ)" format="F0">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="vcr_dog_err" column="is_actual_dog" />
            </call>
            <call type="" function="or" as="">
              <call function="is not null" as="" type="">
                <column table="this" column="kod_numobj" />
              </call>
              <call function="is null" as="" type="">
                <column table="a" column="dat_fin" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="neet_load_obj" format="F0" title="Тебуется создание или обновление">
          <call type="" function="and">
            <call function="is not null all" as="" type="">
              <column table="this" column="has_ch_obj" />
              <column table="this" column="is_actual_obj" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="need_create_obj" format="F0" title="Тебуется создание">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="is_actual_obj" />
            </call>
            <call function="is null" as="" type="">
              <column table="a" column="kod_numobj" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="do_load_obj" title="Будет выполнена загрузка" format="F0">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="neet_load_obj" />
            </call>
            <call function="is null">
              <column table="this" column="has_error_obj" />
            </call>
            <call function="is not null">
              <column table="this" column="is_exists_dog" />
            </call>
            <call function="is null">
              <column table="this" column="ld_obj" />
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="this" column="do_load_obj" as="do_load" title="-" />
        <call type="number" function="if" halign="center" as="do_create_obj" title="Будет создан" format="F0">
          <call type="" function="and">
            <call function="is not null" as="" type="">
              <column table="this" column="need_create_obj" />
            </call>
            <call function="is null">
              <column table="this" column="has_error_obj" />
            </call>
            <call function="is null">
              <column table="this" column="ld_obj" />
            </call>
            <call function="is not null">
              <column table="this" column="is_exists_dog" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" function="if" halign="center" as="is_exists_obj" format="F0" title="Существует или будет создан">
          <call type="" function="or">
            <call function="is not null" as="" type="">
              <column table="this" column="kod_numobj" />
              <column table="this" column="do_create_obj" />
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="start_date_d" />
        <band title="Изменения">
          <call type="number" as="has_ch_obj" function="if" halign="center" title="Есть изменения" format="F0">
            <call function="is not null">
              <column table="this" column="ch_name" />
              <column table="this" column="ch_dat_fin" />
            </call>
            <const>1</const>
          </call>
          <call function="compare_1" as="ch_name" type="number" title="Наименование" halign="center" format="F0">
            <column table="kr_numobj" column="name" />
            <column table="a" column="name" />
          </call>
          <call function="compare_1" as="ch_dat_fin" type="number" title="Дата прекращеня" halign="center" format="F0">
            <column table="kr_numobj" column="dat_fin" />
            <column table="a" column="dat_fin" />
          </call>
        </band>
        <band title="Ошибки">
          <call type="number" as="has_error_obj" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="cnt_dub" />
              <column table="this" column="dub_kod" />
              <column table="this" column="is_obj_arh" />
              <column table="this" column="is_lost_obj" />
              <column table="this" column="is_deleted" />
            </call>
            <const>1</const>
          </call>
          <call function="if" title="Несколько объектов с одним кодом" as="dub_kod" type="number" halign="center" format="F0">
            <call function="gt">
              <call function="over">
                <call function="sum">
                  <const>1</const>
                </call>
                <call function="partition by">
                  <column table="a" column="eo_code" />
                </call>
              </call>
              <const>1</const>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_no_dog" function="if" halign="center" title="Ссылка на несуществующий код договора" format="F0">
            <call function="is null">
              <column table="acct_id" column="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="cnt_dub" function="if" halign="center" title="Количество дублей в АСУСЭ" format="F0">
            <call function="gt">
              <column table="this" column="cnt_numobj" />
              <const>1</const>
            </call>
            <call function="-nvl">
              <column table="this" column="cnt_numobj" />
              <const>1</const>
            </call>
          </call>
          <call type="number" function="if" halign="center" as="is_obj_arh" format="F0" title="Объект архивный в АСУСЭ">
            <call type="" function="and">
              <call function="=1" as="" type="">
                <column table="kr_numobj" column="pr_active" />
              </call>
              <call function="is not null">
                <column table="this" column="is_actual_obj" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_lost_obj" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
            <call type="" function="and">
              <call function="is null" as="" type="">
                <column table="a" column="kod_numobj" />
              </call>
              <call function="is not null">
                <column table="a" column="key_inner" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="if" as="is_deleted" title="Удален из CCnB" type="number">
            <call function="=1">
              <column table="a" column="deleted" />
            </call>
            <const>1</const>
          </call>
        </band>
        <band title="Загружен">
          <call type="number" function="if" halign="center" title="Объект" as="ld_obj" format="F0">
            <call function="is not null">
              <column table="a" column="key_inner" />
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="dog_podr_name" />
        <column table="a" column="account_number" />
        <column table="kod_dog" column="ndog" title="Номер договора (АСУСЭ)" />
        <column table="a" column="eo_code" />
        <column table="a" column="num_obj_x" title="Номер объекта (вырезан из кода)" />
        <column table="a" column="eo_name" />
        <column table="a" column="address" />
        <column table="a" column="creation_date" />
        <column table="a" column="pr_outag" />
        <column table="a" column="no_print" />
        <column table="a" column="billable" />
        <column table="a" column="tp_cnt" />
        <column table="a" column="trans_in_cnt" />
        <column table="a" column="trans_out_cnt" />
        <column table="a" column="seti" />
        <column table="a" column="pril6" />
        <column table="a" column="in_ogr_chain" />
        <column table="a" column="in_break_chain" />
        <column table="a" column="kch_ext" />
        <column table="a" column="kch_int" />
        <column table="a" column="lim_turn" />
        <column table="a" column="limit_eo" />
        <column table="a" column="close_date" />
        <column table="a" column="is_mkd" />
        <column table="a" column="cp_max_p" />
        <column table="a" column="pris_p" />
        <column table="a" column="st_flag" />
        <column table="a" column="kod_numobj" />
        <column table="a" column="cnt_numobj" />
      </select>
      <from>
        <query name="vccb_obj" as="a">
          <link name="vci_kr_object" exclude="1" />
          <link name="vci_kr_numobj" exclude="1" />
          <link name="kr_numobj">
            <link name="kod_obj" />
          </link>
          <link name="acct_id">
            <link name="vcr_dog_err" />
            <link name="kod_dog" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" exclude="1">
            <column table="a" column="eo_id" />
            <const>'0000415404'</const>
          </call>
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_error" />
            </call>
            <call function="is not null">
              <column table="this" column="has_error" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vci_kr_numobj" timestamp="13.02.2019 17:56:58" is-report="1" title="kr_numobj" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="eo_id" as="kr_numobj_id" title="kr_numobj_id" />
        <column table="a" column="acct_id" as="kr_dogovor_id" title="kr_dogovor_id" />
        <column table="a" column="kr_object_id" title="kr_object_id" />
        <column table="a" column="kod_numobj" title="kod_numobj" />
        <column table="a" column="kod_obj" title="kod_obj" />
        <column table="a" column="pr_active" title="pr_active" />
        <call function="()" type="number" as="tep_el" title="tep_el" format="F0">
          <const>1</const>
        </call>
        <column table="a" column="kod_dog" title="kod_dog" />
        <call as="num_obj" type="string" title="num_obj" function="nvl">
          <column table="kr_numobj" column="num_obj" as="" type="" />
          <column table="a" column="num_obj_x" />
        </call>
        <call as="tarif" type="number" title="tarif" function="nvl">
          <column table="kr_numobj" column="tarif" as="" type="" />
          <column table="vcs_glob" column="tarif" />
        </call>
        <column table="a" column="name" />
        <column table="a" column="dat_create" title="dat_create" />
        <column table="a" column="dat_fin" title="dat_fin" />
        <column table="a" column="eo_id" />
      </select>
      <from>
        <query name="vccb_obj" as="a">
          <link name="kr_numobj" />
          <link name="vcs_glob" />
          <link name="vcr_obj_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_obj_err" column="do_load_obj" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_kr_object" timestamp="05.02.2019 23:24:23" is-report="1" title="kr_object" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="kr_object_id" as="kr_object_id" title="kr_object_id" group="1" />
        <column table="a" column="kod_obj" title="kod_obj" group="max" />
        <column table="a" column="kodd" title="kodd" group="max" />
      </select>
      <from>
        <query name="vccb_obj" as="a">
          <link name="vcr_obj_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_obj_err" column="do_load_obj" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_point_kod" timestamp="28.06.2019 14:25:53" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="ik_id" group="1" />
        <column table="hr_point" column="kod_point" group="max" />
        <column table="hr_point_har" column="kod_point_har" group="max" />
        <column table="hr_point_tar" column="kod_point_tar" group="max" />
        <column table="hr_point" column="kod_point" group="count" as="cnt" />
        <column table="k_point" column="key_inner" group="max" as="k_point" />
        <column table="k_tar" column="key_inner" group="max" as="k_tar" />
        <column table="k_har" column="key_inner" group="max" as="k_har" />
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id" />
        </query>
        <query join="left outer" name="hr_point">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="nomer" />
              <column table="a" column="tu_num" />
            </call>
            <call function="=">
              <column table="eo_id" column="kod_obj" />
              <column table="hr_point" column="kod_obj" />
            </call>
            <call function="in">
              <column table="hr_point" column="pr_active" />
              <array>0,2</array>
            </call>
            <call function="ge" exclude="1">
              <call type="" function="nvl">
                <column table="hr_point" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_tar">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_tar" column="kod_point" />
            </call>
            <call function="=">
              <column table="a" column="voltage" />
              <column table="hr_point_tar" column="voltage" />
            </call>
            <call function="in">
              <column table="hr_point_tar" column="pr_active" />
              <array>0,2</array>
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_har">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_har" column="kod_point" />
            </call>
            <call function="=">
              <column column="method_ccb" table="a" />
              <column column="method_ccb" table="hr_point_har" />
            </call>
            <call exclude="1" function="ge">
              <call function="nvl" type="">
                <column as="" column="dat_po" table="hr_point_har" type="" />
                <call function="doomsday" />
              </call>
              <column column="dat" table="a" />
            </call>
            <call function="in">
              <column table="hr_point_har" column="pr_active" />
              <array>0,2</array>
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_point">
          <call function="and">
            <call function="=">
              <column table="k_point" column="key_name_inner" />
              <const>'KOD_POINT'</const>
            </call>
            <call function="=">
              <column table="k_point" column="key_outer" />
              <column table="a" column="ik_id" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_tar">
          <call function="and">
            <call function="=">
              <column table="k_tar" column="key_name_inner" />
              <const>'KOD_POINT_TAR'</const>
            </call>
            <call function="=">
              <column table="k_tar" column="key_outer" />
              <column table="a" column="ik_id" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_har">
          <call function="and">
            <call function="=">
              <column table="k_har" column="key_name_inner" />
              <const>'KOD_POINT_HAR'</const>
            </call>
            <call function="=">
              <column table="k_har" column="key_outer" />
              <column table="a" column="ik_id" />
            </call>
          </call>
        </query>
      </from>
      <where exclude="1">
        <call function="=">
          <column table="a" column="ik_id" />
          <const>'7584971902'</const>
        </call>
      </where>
    </query>
    <query name="vcr_tp_err" timestamp="03.02.2019 20:36:44" title="Точки поставки" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <content>
        <usefield field="cmn_check" name="pr_error" title="Только с ошибками" />
      </content>
      <select>
        <column table="vcr_obj_err" column="is_new_dog" />
        <column table="vcr_obj_err" column="is_new_obj" />
        <call type="string" title="Новый (нет в АСУСЭ)" as="is_new_item" function="if" halign="center">
          <call function="is null">
            <column table="this" column="kod_point" />
          </call>
          <const>'V'</const>
        </call>
        <call type="string" as="is_new_stat" function="if" halign="center" title="Статус: Новый" exclude="1">
          <call function="=">
            <column table="this" column="pr_active" />
            <const>2</const>
          </call>
          <const>'V'</const>
        </call>
        <call type="string" function="if" halign="center" as="dont_load" title="Не загружать">
          <call function="is not null">
            <column table="this" column="has_error" />
          </call>
          <const>'V'</const>
        </call>
        <band title="Изменения">
          <call type="string" as="has_ch" function="if" halign="center" title="Есть изменения">
            <call function="is not null">
              <column table="this" column="ch_name" />
              <column table="this" column="ch_dat_fin" />
            </call>
            <const>'V'</const>
          </call>
          <band title="Объект">
            <call type="string" title="Новый объект" as="is_new_obj" function="if" halign="center">
              <call function="is null">
                <column table="this" column="kod_numobj" />
                <column table="a" column="dat_fin" />
              </call>
              <const>'V'</const>
            </call>
            <call function="compare_v" as="ch_name" type="string" title="Наименование">
              <column table="kr_numobj" column="name" />
              <column table="a" column="name" />
            </call>
            <call function="compare_v" as="ch_dat_fin" type="string" title="Дата прекращеня">
              <column table="kr_numobj" column="dat_fin" />
              <column table="a" column="dat_fin" />
            </call>
          </band>
        </band>
        <band title="Ошибки">
          <call type="string" as="has_error" function="if" halign="center" title="Есть ошибки">
            <call function="is not null">
              <column table="this" column="cnt_dub" />
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="is_bad_dep" function="if" title="Отделение не определено" halign="center" exclude="1">
            <call function="is null">
              <column table="this" column="dep" />
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="is_other_dep" function="if" halign="center" title="Отделение не соответствует" exclude="1">
            <call function="!=nvl">
              <column table="this" column="dep" />
              <call function="nvl">
                <column table="kod_dog" column="dep" />
                <column table="this" column="dep" />
              </call>
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="cnt_dub" function="if" halign="center" title="Количество дублей" format="N0">
            <call function="gt">
              <column table="this" column="cnt_point" />
              <const>1</const>
            </call>
            <call function="-nvl">
              <column table="this" column="cnt_point" />
              <const>1</const>
            </call>
          </call>
          <call type="string" as="is_no_vid_dog" function="if" halign="center" title="Не задан вид договора" exclude="1">
            <call function="is null">
              <column table="a" column="kod_vdog" />
            </call>
            <const>'V'</const>
          </call>
        </band>
        <column table="a" column="cp_id" />
        <column table="a" column="acct_id" />
        <column table="a" column="eo_id" />
        <column table="a" column="dog_podr_name" />
        <column table="a" column="account_number" />
        <column table="a" column="eo_code" />
        <column table="a" column="cp_num" />
        <column table="a" column="cp_name" />
        <column table="a" column="cp_type" />
        <column table="a" column="bal_border" />
        <column table="a" column="ik_cnt" />
        <column table="a" column="trans_out_cnt" />
        <column table="a" column="is_reserv" />
        <column table="a" column="pris_p" />
        <column table="a" column="cp_max_p" />
        <column table="a" column="seti" />
        <column table="a" column="way_pris" />
        <column table="a" column="billable" />
        <column table="a" column="scm_el" />
        <column table="a" column="agree_val_exists" />
        <column table="a" column="campaing_name" />
        <column table="a" column="urov_nap" />
        <column table="a" column="pric_cat" />
        <column table="a" column="region" />
        <column table="a" column="pwgrid" />
        <column table="a" column="dog_type" />
        <column table="a" column="tax_type" />
        <column table="a" column="tou_grp" />
        <column table="a" column="cons_grp" />
        <column table="a" column="gr_potrs_46" />
        <column table="a" column="monouser" />
        <column table="a" column="conn_spec" />
        <column table="a" column="cp_zaj_p" />
        <column table="a" column="st_flag" />
        <column table="a" column="kod_point" />
        <column table="a" column="cnt_point" />
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="eo_id">
            <link name="vcr_obj_err" />
            <link name="acct_id" exclude="1">
              <link name="vcr_dog_err" />
            </link>
          </link>
          <link name="hr_point" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_error" />
            </call>
            <call function="is not null">
              <column table="this" column="has_error" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vci_hr_point" timestamp="05.02.2019 23:25:15" is-report="1" title="hr_point" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="ik_id" as="hr_point_id" title="hr_point_id" />
        <column table="eo_id" column="kr_object_id" title="kr_object_id" />
        <column table="a" column="kod_point" title="kod_point" />
        <column table="eo_id" column="kod_obj" title="kod_obj" />
        <column table="a" column="nomer" title="nomer" />
        <column table="a" column="dat_s" title="dat_s" />
        <call function="nvl" as="dat_po" type="date" title="dat_po">
          <column table="hr_point" column="dat_po" />
          <const>null</const>
        </call>
        <call function="nvl" as="prizn_sa" type="number" title="prizn_sa">
          <column table="hr_point" column="prizn_sa" />
          <const>0</const>
        </call>
        <call function="nvl" as="tpoint" type="number" title="tpoint">
          <column table="hr_point" column="tpoint" />
          <const>0</const>
        </call>
        <call function="nvl" as="pr_active" type="number" title="pr_active">
          <column table="hr_point" column="pr_active" />
          <const>0</const>
        </call>
        <call function="nvl" as="kod_pointmain" type="number" title="kod_pointmain">
          <column table="hr_point" column="kod_pointmain" />
          <const>null</const>
        </call>
        <column table="a" column="tu_name_s" as="name" title="name" />
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id" />
          <link name="hr_point" />
          <link name="vcr_ik_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_ik_err" column="do_load_tu" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_ik_err" timestamp="06.09.2019 18:09:13" title="Измерительные комплексы" is-report="1" datareader="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <content>
        <usefield field="cmn_check" name="pr_error" title="Только с ошибками" />
      </content>
      <select>
        <call function="rownum" as="id" key="1" />
        <column column="ik_id" table="a" title="ik_id" />
        <column column="acct_id" table="a" title="acct_id" />
        <column column="eo_id" table="a" title="eo_id" />
        <column column="cp_id" table="a" title="cp_id" />
        <band title="Договор">
          <column column="is_actual_dog" table="vcr_dog_err" />
          <column column="is_exists_dog" table="vcr_dog_err" />
        </band>
        <band title="Объект">
          <column table="vcr_obj_err" column="is_actual_obj" />
          <column table="vcr_obj_err" column="is_exists_obj" />
        </band>
        <call format="F0" function="if" halign="center" title="Актуальный (Метод учета по приборам или есть в АСУСЭ)" type="number" as="is_actual_ik">
          <call function="and" type="">
            <call as="" function="is not null" type="">
              <column table="vcr_obj_err" column="is_actual_obj" />
            </call>
            <call type="" function="or">
              <call function="=1" as="" type="">
                <column table="this" column="method" />
              </call>
              <call function="is not null">
                <column table="this" column="kod_point" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call format="F0" function="if" halign="center" title="-" type="number" as="is_actual_har">
          <call function="and" type="">
            <call as="" function="is not null" type="">
              <column table="vcr_obj_err" column="is_actual_obj" />
            </call>
            <call type="" function="or">
              <call function="=1" as="" type="">
                <column table="this" column="method" />
              </call>
              <call function="is not null">
                <column table="this" column="kod_point_har" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <call format="F0" function="if" halign="center" title="-" type="number" as="is_actual_tar">
          <call function="and" type="">
            <call as="" function="is not null" type="">
              <column table="vcr_obj_err" column="is_actual_obj" />
            </call>
            <call type="" function="or">
              <call function="=1" as="" type="">
                <column table="this" column="method" />
              </call>
              <call function="is not null">
                <column table="a" column="kod_point_tar" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <band title="ТУ">
          <call format="F0" function="if" halign="center" title="Тебуется создание или обновление" type="number" as="neet_load_tu">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_tu" />
                <column table="this" column="is_actual_ik" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Тебуется создание" type="number" as="need_create_tu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_ik" />
              </call>
              <call as="" function="is null" type="">
                <column column="kod_point" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет выполнена загрузка" type="number" as="do_load_tu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_tu" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_ik" />
              </call>
              <call function="is not null">
                <column column="is_exists_obj" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_tu" />
                <column table="this" column="ld_tar" />
                <column table="this" column="ld_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет создан" type="number" as="do_create_tu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_tu" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_ik" />
              </call>
              <call function="is not null">
                <column column="is_exists_obj" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_tu" />
                <column table="this" column="ld_tar" />
                <column table="this" column="ld_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Существует или будет создан" type="number" as="is_exists_tu">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column column="kod_point" table="this" />
                <column table="this" column="do_create_tu" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band title="Изменения">
            <call function="compare_1" type="number" title="Наименование" as="has_ch_tu" format="F0" halign="center">
              <column table="hr_point" column="name" />
              <column table="a" column="tu_name_s" />
            </call>
          </band>
          <band title="Ошибки">
            <call type="number" function="if" halign="center" title="Есть ошибки" format="F0" as="has_error_ik">
              <call function="is not null">
                <column table="this" column="cnt_dub" />
                <column table="this" column="is_bad_mthd" />
                <column table="this" column="is_lost_tu" />
                <column table="this" column="is_deleted" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_bad_mthd" function="if" halign="center" title="Метод учета не определен" format="F0">
              <call function="is null">
                <column table="this" column="method" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="cnt_dub" function="if" halign="center" title="Количество дублей в АСУСЭ" format="F0">
              <call function="gt">
                <column table="this" column="cnt_point" />
                <const>1</const>
              </call>
              <call function="-nvl">
                <column table="this" column="cnt_point" />
                <const>1</const>
              </call>
            </call>
            <call type="number" as="is_lost_tu" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
              <call type="" function="and">
                <call function="is null" as="" type="">
                  <column table="a" column="kod_point" />
                </call>
                <call function="is not null">
                  <column table="a" column="k_point" />
                </call>
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <band title="Хар. ТУ">
          <call format="F0" function="if" halign="center" title="Тебуется создание или обновление" type="number" as="neet_load_har">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_har" />
                <column table="this" column="is_actual_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Тебуется создание" type="number" as="need_create_har">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_har" />
              </call>
              <call as="" function="is null" type="">
                <column column="kod_point_har" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет выполнена загрузка" type="number" as="do_load_har">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_har" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_ik" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет создан" type="number" as="do_create_har">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_har" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_ik" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Существует или будет создан" type="number" as="is_exists_har">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column column="kod_point_har" table="a" />
                <column table="this" column="do_create_har" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band title="Изменения">
            <call function="compare_1" type="number" title="Наименование" as="has_ch_har" format="F0" halign="center">
              <column table="hr_point_har" column="kod_polbalans" />
              <column table="a" column="kod_polbalans" />
            </call>
          </band>
          <band title="Ошибки">
            <call type="number" as="is_lost_har" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
              <call type="" function="and">
                <call function="is null" as="" type="">
                  <column table="a" column="kod_point_har" />
                </call>
                <call function="is not null">
                  <column table="a" column="k_har" />
                </call>
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <band title="Тариф в ТУ">
          <call format="F0" function="if" halign="center" title="Тебуется создание или обновление" type="number" as="neet_load_tar" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_tar" />
                <column table="this" column="is_actual_ik" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Тебуется создание" type="number" as="need_create_tar">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_tar" />
              </call>
              <call as="" function="is null" type="">
                <column column="kod_point_tar" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет выполнена загрузка" type="number" as="do_load_tar" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_tar" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_ik" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_tar" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет создан" type="number" as="do_create_tar">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_tar" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_tar" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_tar" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Существует или будет создан" type="number" as="is_exists_tar">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column column="kod_point_tar" table="a" />
                <column table="this" column="do_create_tar" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band title="Изменения" exclude="1">
            <call format="F0" function="if" halign="center" type="number" title="-" as="has_ch_tar">
              <call as="" function="is null" type="">
                <column table="a" column="kod_point_tar" />
              </call>
              <const>1</const>
            </call>
          </band>
          <band title="Ошибки">
            <call type="number" function="if" halign="center" title="Есть ошибки" format="F0" as="has_error_tar">
              <call function="is not null">
                <column table="this" column="is_bad_volt" />
                <column table="this" column="is_lost_tar" />
                <column table="this" column="is_deleted" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_bad_volt" function="if" halign="center" title="Ур. напр. не определен" format="F0">
              <call function="is null">
                <column table="a" column="voltage" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_lost_tar" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
              <call type="" function="and">
                <call function="is null" as="" type="">
                  <column table="a" column="kod_point_tar" />
                </call>
                <call function="is not null">
                  <column table="a" column="k_tar" />
                </call>
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <column table="a" column="creation_date_d" />
        <band title="Загружено">
          <call type="number" function="if" halign="center" title="ТУ" as="ld_tu" format="F0">
            <call function="is not null">
              <column table="a" column="k_point" />
            </call>
            <const>1</const>
          </call>
          <call type="number" function="if" halign="center" title="Тариф" as="ld_tar" format="F0">
            <call function="is not null">
              <column table="a" column="k_tar" />
            </call>
            <const>1</const>
          </call>
          <call type="number" function="if" halign="center" title="Характеристика" as="ld_har" format="F0">
            <call function="is not null">
              <column table="a" column="k_har" />
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="tu_name" />
        <column table="hr_point" column="name" title="Наименование (АСУСЭ)" />
        <column table="a" column="dog_podr_name" />
        <column table="a" column="account_number" />
        <column table="a" column="eo_code" />
        <column table="a" column="cp_num" />
        <column table="a" column="tu_num" />
        <column table="a" column="tu_type" />
        <column table="a" column="creation_date" />
        <column table="a" column="trans_out_cnt" />
        <column table="a" column="im_name" />
        <column table="a" column="im_start_date" />
        <column table="a" column="tarif_date" />
        <column table="a" column="price_type" />
        <column table="a" column="mtr_present" />
        <column table="a" column="bezdisp" />
        <column table="a" column="ppb" />
        <column table="a" column="urov_nap" />
        <column table="a" column="k_hr_den" />
        <column table="a" column="k_free" />
        <column table="a" column="note" />
        <column table="a" column="contr_tu_num" />
        <column table="a" column="perem_rs" />
        <column table="a" column="watt_tu" />
        <column table="a" column="optmark" />
        <column table="a" column="fix_ptr" />
        <column table="a" column="st_flag" />
        <column table="a" column="kod_point" />
        <column table="a" column="kod_point_har" />
        <column table="a" column="cnt_point" />
        <column table="a" column="method" />
        <call function="if" as="is_deleted" title="Удален из CCnB" type="number">
          <call function="=1">
            <column table="a" column="deleted" />
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id">
            <link name="acct_id">
              <link name="vcr_dog_err" />
            </link>
            <link name="vcr_obj_err" />
          </link>
          <link name="hr_point" />
          <link name="hr_point_har" />
          <link name="hr_point_tar" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_error" />
            </call>
            <call function="is not null">
              <column table="this" column="has_error" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_bpol_kod" timestamp="30.01.2019 17:53:20" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="rs" group="1" />
        <column table="a" column="kodbpol" group="max" />
      </select>
      <from>
        <query name="ks_bankpol" as="a" />
      </from>
    </query>
    <query name="vci_hr_point_har" timestamp="26.09.2019 19:56:36" is-report="1" title="hr_point_har" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="ik_id" as="hr_point_har_id" title="hr_point_har_id" key="1" />
        <column table="a" column="ik_id" as="hr_point_id" title="hr_point_id" />
        <column table="a" column="kod_point_har" title="kod_point_har" />
        <call function="nvl" as="eobj_id" type="number" title="eobj_id">
          <column table="hr_point_har" column="eobj_id" />
          <column table="vcs_glob" column="eobj_id" />
        </call>
        <column table="a" column="kod_polbalans" title="kod_polbalans" />
        <call function="nvl" as="kod_v" type="number" title="kod_v">
          <column table="hr_point_har" column="kod_v" />
          <column table="eobj_id" column="kod_v" />
        </call>
        <call function="nvl" as="dat_s" type="date" title="dat_s">
          <column table="hr_point_har" column="dat_s" />
          <column table="a" column="im_start_date_d_lt" />
        </call>
        <call function="nvl" as="dat_po" type="date" title="dat_po">
          <column table="hr_point_har" column="dat_po" />
          <const>null</const>
        </call>
        <column table="a" column="kod_point" title="kod_point" />
        <column table="a" column="method" title="method" />
        <column table="a" column="ik_id" title="ik_id" />
        <call function="if" as="kod_gtp" type="number" title="kod_gtp">
          <call function="=">
            <column table="kod_dog" column="dep" />
            <const comment="филиал Горноалтайский">15235</const>
          </call>
          <const>2</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id">
            <link name="kr_numobj">
              <link name="kod_dog" />
            </link>
          </link>
          <link name="hr_point_har" />
          <link name="vcs_glob">
            <link name="eobj_id" />
          </link>
          <link name="vcr_ik_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_ik_err" column="do_load_har" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_pu_err" timestamp="06.09.2019 17:15:38" is-report="1" title="Приборы учета" datareader="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <content>
        <usefield field="cmn_check" name="pr_error" title="Только с ошибками" />
        <usefield field="cmn_check" name="pr_need_create" title="Только где требуется создание" />
        <usefield field="cmn_string" name="reg_id" title="reg_id" />
      </content>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="a" column="acct_id" title="acct_id" />
        <column table="a" column="eo_id" title="eo_id" />
        <column table="a" column="cp_id" title="cp_id" />
        <column table="a" column="ik_id" title="ik_id" />
        <column table="a" column="mtr_id" title="mtr_id" />
        <column table="a" column="reg_id" title="reg_id" />
        <call function="||" as="err_info" title="Ошибки в">
          <const>''</const>
          <call function="if">
            <call function="=1">
              <column table="this" column="has_error_dog" />
            </call>
            <const>'Договор'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="has_error_obj" />
            </call>
            <const>'Объект'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="has_error_ik" />
            </call>
            <const>'ТУ'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="has_error_tar" />
            </call>
            <const>'Тариф'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="has_error_pp" />
            </call>
            <const>'ПУ'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="is_lost_en" />
            </call>
            <const>'Виды. эн.'</const>
          </call>
          <call function="if">
            <call function="=1">
              <column table="this" column="is_lost_ini" />
            </call>
            <const>'Ком. ТУ'</const>
          </call>
        </call>
        <band title="Договор">
          <column table="vcr_dog_err" column="is_new_stat" />
          <column table="vcr_dog_err" column="is_no_obj" />
          <column column="is_actual_dog" table="vcr_dog_err" />
          <column column="is_exists_dog" table="vcr_dog_err" />
          <column column="has_error_dog" table="vcr_dog_err" />
          <band title="Ошибки">
            <column column="dub_kod" table="vcr_dog_err" />
            <column column="is_bad_dep" table="vcr_dog_err" />
            <column column="is_other_dep" table="vcr_dog_err" />
            <column column="cnt_dub_dog" table="vcr_dog_err" />
            <column column="is_no_vid_dog" table="vcr_dog_err" exclude="1" />
            <column column="is_no_ist" table="vcr_dog_err" />
            <column column="is_no_bank" table="vcr_dog_err" />
            <column column="is_lost_dog" table="vcr_dog_err" />
          </band>
        </band>
        <band title="Объект">
          <column table="eo_id" column="close_date_d" />
          <column table="vcr_obj_err" column="is_actual_obj" />
          <column table="vcr_obj_err" column="is_exists_obj" />
          <column table="vcr_obj_err" column="has_error_obj" />
          <band title="Ошибки">
            <column table="vcr_obj_err" column="dub_kod" as="dub_kod_obj" />
            <column table="vcr_obj_err" column="is_no_dog" />
            <column table="vcr_obj_err" column="cnt_dub" as="cnt_dub_obj" />
            <column table="vcr_obj_err" column="is_obj_arh" />
            <column table="vcr_obj_err" column="is_lost_obj" />
          </band>
        </band>
        <band title="ТУ">
          <column table="ik_id" column="im_name" />
          <column table="vcr_ik_err" column="is_actual_ik" />
          <column table="vcr_ik_err" column="is_exists_tu" />
          <column table="vcr_ik_err" column="has_error_ik" />
          <band title="Ошибки">
            <column table="vcr_ik_err" column="is_bad_mthd" />
            <column table="vcr_ik_err" column="cnt_dub" as="cnt_dub_ik" />
            <column table="vcr_ik_err" column="is_lost_tu" />
          </band>
        </band>
        <band title="Тариф">
          <column table="vcr_ik_err" column="is_exists_tar" />
          <column table="vcr_ik_err" column="has_error_tar" />
          <band title="Ошибки">
            <column table="vcr_ik_err" column="is_bad_volt" />
            <column table="vcr_ik_err" column="is_lost_tar" />
          </band>
        </band>
        <call format="F0" function="if" halign="center" title="-" type="number" as="is_actual_pp" comment="для единообразия">
          <call function="and" type="">
            <call as="" function="is not null" type="">
              <column table="vcr_ik_err" column="is_actual_ik" />
            </call>
          </call>
          <const>1</const>
        </call>
        <band title="ПУ">
          <call format="F0" function="if" halign="center" title="Тебуется создание или обновление" type="number" as="neet_load_pu">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_pu" />
                <column table="this" column="is_actual_pp" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Тебуется создание" type="number" as="need_create_pu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_pp" />
              </call>
              <call as="" function="is null" type="">
                <column column="kod_point_pu" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет выполнена загрузка" type="number" as="do_load_pu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_pu" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_pu" />
                <column table="this" column="ld_en" />
                <column table="this" column="ld_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет создан" type="number" as="do_create_pu">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_pu" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null">
                <column column="is_exists_tu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_pu" />
                <column table="this" column="ld_en" />
                <column table="this" column="ld_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Существует или будет создан" type="number" as="is_exists_pu">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column column="kod_point_pu" table="this" />
                <column table="this" column="do_create_pu" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band title="Изменения">
            <call type="number" as="has_ch_pu" function="if" halign="center" title="Есть изменения" format="F0">
              <call function="is not null">
                <column table="this" column="ch_bal" />
                <column table="this" column="ch_exp" />
                <column table="this" column="ch_god_pp" />
                <column table="this" column="ch_kvartal_pp" />
                <column table="this" column="ch_rkoeff" />
                <column table="this" column="ch_tip_pu" />
              </call>
              <const>1</const>
            </call>
            <call function="compare_1" as="ch_bal" type="number" title="Бал. принадл." format="F0" halign="center">
              <column table="hr_point_pu" column="kod_bal" />
              <column table="a" column="kod_bal" />
            </call>
            <call function="compare_1" as="ch_exp" type="number" title="Экспл. отв" format="F0" halign="center">
              <column table="hr_point_pu" column="kod_expl" />
              <column table="a" column="kod_expl" />
            </call>
            <call as="ch_god_pp" type="number" title="Год ПП" function="compare_1" format="F0" halign="center">
              <column table="a" column="pp_god_n" as="" type="" />
              <column table="hr_pu_u" column="god_pp" />
            </call>
            <call as="ch_kvartal_pp" type="number" function="compare_1" title="Квартал ПП" format="F0" halign="center">
              <column table="a" column="pp_kvart_n" as="" type="" />
              <column table="hr_pu_u" column="kvartal_pp" />
            </call>
            <call function="compare_1" as="ch_rkoeff" type="number" title="Расчетный коэфициент" format="F0" halign="center">
              <column table="a" column="reg_const_n" />
              <column table="hr_point_ini" column="rkoeff" title="rkoeff" />
            </call>
            <call function="compare_1" as="ch_tip_pu" type="number" format="F0" halign="center" title="Тип ПУ">
              <column table="a" column="kod_tippu" />
              <column table="hr_pu_u" column="kod_tippu" title="rkoeff" />
            </call>
          </band>
          <call type="number" as="has_error_pp" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="cnt_dub" />
              <column table="this" column="is_bad_bal" />
              <column table="this" column="is_bad_exp" />
              <column table="this" column="is_bad_en" />
              <column table="this" column="null_num" />
              <column table="this" column="is_deleted" />
            </call>
            <const>1</const>
          </call>
          <band title="Ошибки">
            <call type="number" as="is_bad_bal" function="if" halign="center" title="Бал. прин. не определена" format="F0">
              <call function="is null">
                <column table="a" column="kod_bal" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_bad_exp" function="if" halign="center" title="Эксп. отв. не определена" format="F0">
              <call function="is null">
                <column table="a" column="kod_expl" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_bad_en" function="if" halign="center" title="Вид энергии не определен" format="F0">
              <call function="is null">
                <column table="a" column="kod_directen_ccb" />
                <column table="a" column="energy_ccb" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="cnt_dub" function="if" halign="center" title="Количество дублей" format="F0">
              <call function="gt">
                <column table="a" column="cnt_pu" />
                <const>1</const>
              </call>
              <call function="-nvl">
                <column table="a" column="cnt_pu" />
                <const>1</const>
              </call>
            </call>
            <call type="number" as="null_num" function="if" halign="center" title="Пустой номер" format="F0">
              <call function="is null">
                <column table="a" column="serial_nbr" />
              </call>
              <const>1</const>
            </call>
            <call type="number" as="is_lost_pu" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
              <call type="" function="and">
                <call function="is null" as="" type="">
                  <column table="a" column="kod_point_pu" />
                </call>
                <call function="is not null">
                  <column table="a" column="k_pu" />
                </call>
              </call>
              <const>1</const>
            </call>
            <call function="if" as="is_deleted" title="Удален из CCnB" type="number">
              <call function="=1">
                <column table="a" column="deleted" />
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <band title="Вид эн.">
          <call format="F0" function="if" halign="center" title="Тебуется создание или обновление" type="number" as="neet_load_en" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_en" />
                <column table="this" column="is_actual_pp" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Тебуется создание" type="number" as="need_create_en">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_pp" />
              </call>
              <call as="" function="is null" type="">
                <column column="kod_point_en" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет выполнена загрузка" type="number" as="do_load_en" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_en" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null">
                <column column="is_exists_pu" table="this" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Будет создан" type="number" as="do_create_en">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_en" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null">
                <column column="is_exists_pu" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_en" />
                <column table="this" column="ld_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" title="Существует или будет создан" type="number" as="is_exists_en">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column column="kod_point_en" table="a" />
                <column table="this" column="do_create_en" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_lost_en" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
            <call type="" function="and">
              <call function="is null" as="" type="">
                <column table="a" column="kod_point_en" />
              </call>
              <call function="is not null">
                <column table="a" column="k_en" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band title="Изменения" comment="для единообразия" exclude="1">
            <call format="F0" function="if" halign="center" type="number" title="-" as="has_ch_en">
              <call as="" function="is null" type="">
                <column table="a" column="kod_point_en" />
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <band title="Ком. ТУ">
          <call format="F0" function="if" halign="center" type="number" title="Тебуется создание или обновление" as="neet_load_ini" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null all" type="">
                <column table="this" column="has_ch_ini" />
                <column table="this" column="is_actual_pp" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" type="number" title="Тебуется создание" as="need_create_ini">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="is_actual_pp" />
              </call>
              <call as="" function="is null" type="">
                <column table="a" column="kod_point_ini" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" type="number" title="Будет выполнена загрузка" as="do_load_ini" exclude="1">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="neet_load_ini" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null all">
                <column column="is_exists_pu" table="this" />
                <column column="is_exists_en" table="this" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" type="number" title="Будет создан" as="do_create_ini">
            <call function="and" type="">
              <call as="" function="is not null" type="">
                <column table="this" column="need_create_ini" />
              </call>
              <call function="is null">
                <column table="this" column="has_error_pp" />
              </call>
              <call function="is not null all">
                <column column="is_exists_pu" table="this" />
                <column column="is_exists_en" table="this" />
                <column column="is_exists_tar" table="this" />
              </call>
              <call function="is null" as="" type="">
                <column table="this" column="ld_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call format="F0" function="if" halign="center" type="number" title="Существует или будет создан" as="is_exists_ini">
            <call function="or" type="">
              <call as="" function="is not null" type="">
                <column table="a" column="kod_point_ini" />
                <column table="this" column="do_create_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="is_lost_ini" function="if" halign="center" format="F0" title="Изменение идентификационной информации">
            <call type="" function="and">
              <call function="is null" as="" type="">
                <column table="a" column="kod_point_ini" />
              </call>
              <call function="is not null">
                <column table="a" column="k_ini" />
              </call>
            </call>
            <const>1</const>
          </call>
          <band comment="для единообразия" title="Изменения" exclude="1">
            <call format="F0" function="if" halign="center" type="number" title="-" as="has_ch_ini">
              <call as="" function="is null" type="">
                <column table="a" column="kod_point_ini" />
              </call>
              <const>1</const>
            </call>
          </band>
        </band>
        <column table="a" column="setup_date_d" />
        <band title="Загружено">
          <call type="number" function="if" halign="center" title="ПУ" as="ld_pu" format="F0">
            <call function="is not null">
              <column table="a" column="k_pu" />
            </call>
            <const>1</const>
          </call>
          <call type="number" function="if" halign="center" title="Вид. эн." as="ld_en" format="F0">
            <call function="is not null">
              <column table="a" column="k_en" />
            </call>
            <const>1</const>
          </call>
          <call type="number" function="if" halign="center" as="ld_ini" title="Ком. ТУ" format="F0">
            <call function="is not null">
              <column table="a" column="k_ini" />
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="dog_podr_name" />
        <column table="a" column="account_number" />
        <column table="a" column="eo_code" />
        <column table="a" column="cp_num" />
        <column table="a" column="tu_num" />
        <column table="a" column="mfg_name" />
        <column table="a" column="model_name" />
        <column table="a" column="config_type" />
        <column table="a" column="serial_nbr" />
        <column table="a" column="badge_nbr" />
        <column table="a" column="i_nommak" />
        <column table="a" column="u_nommak" />
        <column table="a" column="receive_date" />
        <column table="a" column="config_date" />
        <column table="a" column="setup_date" />
        <column table="a" column="bal_prin" />
        <column table="a" column="exp_otv" />
        <column table="a" column="vid_rash" />
        <column table="a" column="mpi_let" />
        <column table="a" column="kod_point_ini" />
        <column table="a" column="god_vpsk" />
        <column table="a" column="pp_god" />
        <column table="a" column="pp_kvart" />
        <column table="a" column="primechn" />
        <column table="a" column="uom_cd" />
        <column table="a" column="reg_const" />
        <column table="a" column="mr_date" />
        <column table="a" column="read_type_flg" />
        <column table="a" column="reg_reading" />
        <column table="a" column="tou_cd" />
        <column table="a" column="st_flag" />
        <column table="a" column="dat" />
        <column table="a" column="kod_point_pu" />
        <column table="a" column="cnt_pu" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id">
            <link name="vcr_ik_err" />
            <link name="eo_id">
              <link name="vcr_obj_err" />
              <link name="acct_id">
                <link name="vcr_dog_err" />
              </link>
            </link>
          </link>
          <link name="hr_point_en" />
          <link name="hr_point_pu" />
          <link name="hr_point_ini" />
          <link name="hr_pu_u" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="reg_id" />
            <useparam name="reg_id" />
          </call>
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_error" />
            </call>
            <call function="is not null">
              <column table="this" column="has_error" />
            </call>
          </call>
          <call function="and" optional="1">
            <call function="=1">
              <useparam name="pr_need_create" />
            </call>
            <call function="is not null">
              <column table="this" column="need_create_pu" />
              <column table="this" column="need_create_en" />
              <column table="this" column="need_create_ini" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_pu_kod" timestamp="13.02.2019 17:40:09" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="reg_id" group="1" />
        <column table="hr_point_pu" column="kod_point_pu" group="max" />
        <column table="hr_point_pu" column="kod_pu_u" group="max" />
        <column table="hr_point_en" column="kod_point_en" group="max" />
        <column table="hr_point_pu" column="kod_point_pu" group="count" as="cnt" />
        <column table="k_pu" column="key_inner" group="max" as="k_pu" />
        <column table="k_en" column="key_inner" group="max" as="k_en" />
        <column table="vcs_glob" column="kod_tippu" group="max" exclude="1" />
        <column table="a" column="serial_nbr" group="max" exclude="1" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="vcs_glob" />
          <link name="ik_id">
            <link name="hr_point" />
            <link name="hr_point_tar" />
            <link name="eo_id" />
          </link>
        </query>
        <query join="left outer" name="hr_point_pu">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_pu" column="kod_point" />
            </call>
            <call function="ge" exclude="1">
              <call type="" function="nvl">
                <column table="hr_point_pu" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
            <call function="=">
              <column table="hr_point_pu" column="nom_pu" />
              <column table="a" column="serial_nbr" />
            </call>
            <call function="in">
              <column table="hr_point_pu" column="pr_active" />
              <array>0,2</array>
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_en">
          <call function="and">
            <call function="=">
              <column table="hr_point_en" column="kod_point_pu" />
              <column table="hr_point_pu" column="kod_point_pu" />
            </call>
            <call function="ge">
              <call type="" function="nvl">
                <column table="hr_point_en" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
            <call function="=">
              <column table="hr_point_en" column="energy" />
              <column table="a" column="energy_ccb" />
            </call>
            <call function="=">
              <column table="hr_point_en" column="kod_directen" />
              <column table="a" column="kod_directen_ccb" />
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_pu_u" exclude="1">
          <call function="=">
            <column table="hr_point_pu" column="kod_pu_u" />
            <column table="hr_pu_u" column="kod_pu_u" />
          </call>
          <call function="or" exclude="1">
            <call function="=">
              <column table="hr_point_pu" column="kod_pu_u" />
              <column table="hr_pu_u" column="kod_pu_u" />
            </call>
            <call function="and">
              <call function="=">
                <column table="vcs_glob" column="kod_tippu" />
                <column table="hr_pu_u" column="kod_tippu" />
              </call>
              <call function="=">
                <column table="a" column="serial_nbr" />
                <column table="hr_pu_u" column="nom_pu" />
              </call>
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_pu">
          <call function="and">
            <call function="=">
              <column table="k_pu" column="key_name_inner" />
              <const>'KOD_POINT_PU'</const>
            </call>
            <call function="=">
              <column table="k_pu" column="key_outer" />
              <column table="a" column="mtr_id" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_en">
          <call function="and">
            <call function="=">
              <column table="k_en" column="key_name_inner" />
              <const>'KOD_POINT_EN'</const>
            </call>
            <call function="=">
              <column table="k_en" column="key_outer" />
              <column table="a" column="reg_id" />
            </call>
          </call>
        </query>
      </from>
      <where exclude="1">
        <call function="=">
          <column table="a" column="reg_id" />
          <const>'7993975280'</const>
        </call>
      </where>
    </query>
    <query name="vci_hr_point_pu" timestamp="11.02.2019 14:56:47" is-report="1" title="hr_point_pu" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="mtr_id" as="hr_point_pu_id" title="hr_point_pu_id" group="1" />
        <column table="a" column="ik_id" as="hr_point_id" title="hr_point_id" group="max" />
        <column table="a" column="hr_pu_u_id" as="hr_pu_u_id" title="hr_pu_u_id" group="1" />
        <column table="a" column="kod_point_pu" title="kod_point_pu" group="max" />
        <call function="nvl" as="kod_tippu" type="number" title="kod_tippu" group="max">
          <column table="hr_point_pu" column="kod_tippu" />
          <column table="vcs_glob" column="kod_tippu" />
        </call>
        <column table="ik_id" column="kod_point" title="kod_point" group="max" />
        <call function="nvl" as="nom_pu" type="string" title="nom_pu" group="max">
          <column table="hr_point_pu" column="nom_pu" />
          <column table="a" column="serial_nbr" />
        </call>
        <column table="a" column="kod_bal" title="kod_bal" group="max" />
        <column table="a" column="kod_pu_u" title="kod_bal" group="max" />
        <column table="a" column="kod_expl" title="kod_expl" group="max" />
        <call function="nvl" as="dat_s" type="date" title="dat_s" group="max">
          <column table="hr_point_pu" column="dat_s" />
          <column table="a" column="setup_date_d" />
        </call>
        <call function="nvl" as="dat_po" type="date" title="dat_po" group="max">
          <column table="hr_point_pu" column="dat_po" />
          <const>null</const>
        </call>
        <call function="nvl" as="razr" type="number" title="razr" group="max">
          <column table="hr_point_pu" column="razr" />
          <column table="vcs_glob" column="razr" />
        </call>
        <call function="nvl" as="razr2" type="number" title="razr" group="max">
          <column table="hr_point_pu" column="razr2" />
          <column table="vcs_glob" column="razr2" />
        </call>
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id" />
          <link name="hr_point_pu" />
          <link name="vcs_glob" />
          <link name="vcs_bal_pr" />
          <link name="vcr_pu_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_pu_err" column="do_load_pu" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_hr_pu_u" timestamp="13.02.2019 17:58:25" is-report="1" title="hr_pu_u" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="hr_pu_u_id" group="1" title="hr_pu_u_id" />
        <column table="a" column="kod_pu_u" group="max" title="kod_pu_u" />
        <column table="a" column="kod_tippu" group="max" />
        <call function="nvl" as="nom_pu" type="string" title="nom_pu" group="1" exclude="1">
          <column table="hr_pu_u" column="nom_pu" />
          <column table="a" column="serial_nbr" />
        </call>
        <column table="a" column="nom_pu" group="max" />
        <column table="a" column="god_pp" group="max" type="number" />
        <column table="a" column="kvartal_pp" group="max" type="number" />
        <column table="a" column="kod_bal" type="number" title="kod_bal" group="max" />
        <call as="god_pp" type="" title="god_pp" group="max" function="nvl" exclude="1">
          <column table="a" column="pp_god_n" as="" type="" />
          <column table="hr_pu_u" column="god_pp" />
        </call>
        <call as="kvartal_pp" type="" title="kvartal_pp" group="max" function="nvl" exclude="1">
          <column table="a" column="pp_kvart_n" as="" type="" />
          <column table="hr_pu_u" column="kvartal_pp" />
        </call>
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="hr_pu_u" />
          <link name="vcs_glob" />
          <link name="vcs_bal_pr" />
          <link name="vcr_pu_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_pu_err" column="do_load_pu" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_hr_point_en" timestamp="05.02.2019 23:28:18" is-report="1" title="hr_point_en" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="reg_id" as="hr_point_en_id" title="hr_point_en_id" />
        <column table="a" column="mtr_id" as="hr_point_pu_id" title="hr_point_pu_id" />
        <column table="a" column="kod_point_en" />
        <column table="a" column="kod_point_pu" />
        <column table="a" column="energy_ccb" as="energy" title="energy" />
        <column table="a" column="kod_directen_ccb" as="kod_directen" title="kod_directen" />
        <call function="coalesce" as="dat_s" type="date" title="dat_s">
          <column table="hr_point_en" column="dat_s" />
          <column table="hr_point_pu" column="dat_s" />
          <column table="a" column="setup_date_d" />
        </call>
        <call function="nvl" as="dat_po" type="date" title="dat_po">
          <column table="hr_point_en" column="dat_po" />
          <const>null</const>
        </call>
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="hr_point_pu" />
          <link name="hr_point_en" />
          <link name="vcs_glob" />
          <link name="vcs_bal_pr" />
          <link name="vcr_pu_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_pu_err" column="do_create_en" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_hr_point_tar" timestamp="24.05.2019 17:50:12" is-report="1" title="hr_point_tar" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="ik_id" as="hr_point_tar_id" title="hr_point_tar_id" />
        <column table="a" column="ik_id" as="hr_point_id" title="hr_point_id" />
        <column table="eo_id" column="eo_id" as="kr_numobj_id" title="kr_numobj_id" />
        <column table="a" column="kod_point_tar" title="kod_point_tar" />
        <column table="eo_id" column="kod_numobj" title="kod_numobj" />
        <column table="a" column="kod_point" title="kod_point" />
        <call function="nvl" as="voltage" type="number" title="voltage">
          <column table="hr_point_tar" column="voltage" />
          <column table="a" column="voltage" />
        </call>
        <call function="nvl" as="tarif" type="number" title="tarif">
          <column table="hr_point_tar" column="tarif" />
          <call function="nvl">
            <column table="vcs_hr_point_tar_tar" column="tarif" />
            <column table="vcs_glob" column="tarif" />
          </call>
        </call>
        <call function="coalesce" as="dat_s" type="date" title="dat_s">
          <column table="hr_point_tar" column="dat_s" />
          <call function="latest">
            <column table="a" column="tarif_date_d" />
            <call function="ym begin time">
              <column table="kr_calc_dep_max" column="ym" />
            </call>
          </call>
        </call>
        <call function="nvl" as="dat_po" type="date" title="dat_po">
          <column table="hr_point_tar" column="dat_po" />
          <call function="nvl">
            <column table="hr_point" column="dat_po" />
            <const>null</const>
          </call>
        </call>
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id">
            <link name="acct_id">
              <link name="vcs_dep">
                <link name="kr_calc_dep_max" />
              </link>
            </link>
          </link>
          <link name="hr_point_tar" />
          <link name="vcs_glob" />
          <link name="vcr_ik_err" />
          <link name="hr_point" />
        </query>
        <query join="left outer" name="vcs_hr_point_tar_tar">
          <call function="and">
            <call function="=">
              <column table="vcs_dep" column="dep" />
              <column table="vcs_hr_point_tar_tar" column="dep" />
            </call>
            <call function="=">
              <call function="nvl" type="number">
                <column table="hr_point_tar" column="voltage" />
                <column table="a" column="voltage" />
              </call>
              <column table="vcs_hr_point_tar_tar" column="voltage" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_ik_err" column="do_create_tar" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_hr_point_ini" timestamp="05.02.2019 23:29:27" is-report="1" title="hr_point_ini" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="reg_id" as="hr_point_ini_id" title="hr_point_ini_id" />
        <column table="a" column="reg_id" as="hr_point_en_id" title="hr_point_en_id" />
        <column table="a" column="ik_id" as="hr_point_tar_id" title="hr_point_tar_id" />
        <column table="a" column="kod_point_ini" title="kod_point_ini" />
        <column table="a" column="kod_point_en" title="kod_point_en" />
        <column table="ik_id" column="kod_point_tar" title="kod_point_tar" />
        <call function="nvl" type="number" title="pu_ini" as="pu_ini">
          <column table="hr_point_ini" column="pu_ini" />
          <column table="a" column="reg_reading_n" />
        </call>
        <call function="nvl" as="dat_s" type="date" title="dat_s">
          <column table="hr_point_ini" column="dat_s" />
          <call function="latest" as="dat_po" title="Дата закрытия">
            <call function="ym begin time">
              <column table="kr_calc_dep_max" column="ym" />
            </call>
            <column table="a" column="setup_date_d" as="" type="" />
          </call>
        </call>
        <call function="nvl" as="dat_po" type="date" title="dat_po">
          <column table="hr_point_ini" column="dat_po" />
          <const>null</const>
        </call>
        <call function="nvl" as="rkoeff" type="number" title="rkoeff">
          <column table="a" column="reg_const_n" />
          <column table="hr_point_ini" column="rkoeff" title="rkoeff" />
        </call>
        <call function="if" as="kodinterval" type="number" title="kodinterval">
          <call function="is not null">
            <column table="a" column="kod_point_ini" />
          </call>
          <column table="hr_point_ini" column="kodinterval" title="rkoeff" />
          <column table="a" column="kodinterval" />
        </call>
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id">
            <link name="eo_id">
              <link name="acct_id">
                <link name="vcs_dep">
                  <link name="kr_calc_dep_max" />
                </link>
              </link>
            </link>
          </link>
          <link name="hr_point_ini" />
          <link name="hr_point_pu" />
          <link name="vcs_glob" />
          <link name="vcs_bal_pr" />
          <link name="vcr_pu_err" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_pu_err" column="do_create_ini" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_ik_err_test" timestamp="03.02.2019 21:26:14" title="Измерительные комплексы" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="kod_point" />
        <column table="hr_point" column="kod_point" as="v5" />
        <column table="vcr_obj_err" column="is_new_dog" />
        <column table="vcr_obj_err" column="is_new_obj" />
        <call type="string" function="if" halign="center" as="do_load" title="Будет выполнена загрузка">
          <call type="" function="and">
            <call function="is null" as="" type="">
              <column table="this" column="has_error" />
            </call>
            <call function="is not null" as="" type="">
              <column table="this" column="has_ch" />
            </call>
          </call>
          <const>'V'</const>
        </call>
        <band title="Изменения">
          <call type="string" as="has_ch" function="if" halign="center" title="Есть изменения">
            <call function="is not null">
              <column table="this" column="ch_name" />
              <column table="this" column="ch_bal" />
            </call>
            <const>'V'</const>
          </call>
          <band title="ТУ">
            <call type="string" title="Новая ТУ" as="is_new_item" function="if" halign="center">
              <call function="is null">
                <column table="this" column="kod_point" />
              </call>
              <const>'V'</const>
            </call>
            <call function="compare_v" as="ch_name" type="string" title="Наименование">
              <column table="hr_point" column="name" />
              <column table="a" column="tu_name_s" />
            </call>
            <column table="hr_point" column="kod_point" as="v1" />
            <column table="a" column="tu_name_s" as="v2" />
          </band>
          <band title="Хар">
            <call type="string" title="Новая хар. ТУ" as="is_new_har" function="if" halign="center">
              <call function="is null">
                <column table="a" column="kod_point_har" />
              </call>
              <const>'V'</const>
            </call>
            <call function="compare_v" as="ch_bal" type="string" title="Пол. по балансу">
              <column table="hr_point_har" column="kod_polbalans" />
              <column table="a" column="kod_polbalans" />
            </call>
          </band>
          <band title="Тариф">
            <call type="string" title="Новый тариф в ТУ" as="is_new_tar" function="if" halign="center">
              <call function="is null">
                <column table="a" column="kod_point_tar" />
              </call>
              <const>'V'</const>
            </call>
          </band>
        </band>
        <band title="Ошибки">
          <call type="string" as="has_error" function="if" halign="center" title="Есть ошибки">
            <call function="is not null">
              <column table="this" column="cnt_dub" />
              <column table="this" column="is_bad_mthd" />
              <column table="this" column="is_bad_volt" />
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="is_bad_mthd" function="if" halign="center" title="Метод учета не определен">
            <call function="is null">
              <column table="a" column="method" />
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="is_bad_volt" function="if" halign="center" title="Ур. напр. не определен">
            <call function="is null">
              <column table="a" column="voltage" />
            </call>
            <const>'V'</const>
          </call>
          <call type="string" as="cnt_dub" function="if" halign="center" title="Количество дублей" format="N0">
            <call function="gt">
              <column table="a" column="cnt_point" />
              <const>1</const>
            </call>
            <call function="-nvl">
              <column table="a" column="cnt_point" />
              <const>1</const>
            </call>
          </call>
        </band>
      </select>
      <from>
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id">
            <link name="acct_id" />
            <link name="vcr_obj_err" />
          </link>
          <link name="hr_point" />
          <link name="hr_point_har" />
          <link name="hr_point_tar" />
        </query>
      </from>
    </query>
    <query name="vcr_hr_point_ini_close" timestamp="13.02.2019 23:11:29" is-report="1" title="Закрытие ком. ТУ" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="hr_point_ini" column="kod_point_ini" group="1" />
        <column table="dep" column="name" group="max" />
        <column table="kod_dog" column="ndog" group="max" />
        <column table="kr_numobj_mn" column="num_obj" group="max" />
        <column table="hr_point" column="nomer" group="max" />
        <column table="kodinterval" column="abbr" group="max" />
        <column table="vcr_pu_err" group="max" column="do_create_pu" title="Новый ПУ" />
        <column table="vcr_pu_err" column="do_create_en" group="max" title="Новый Вид. эн." />
        <column table="vcr_ik_err" column="do_create_tar" group="max" title="Новый Тариф" />
        <column table="vcr_pu_err" column="do_create_ini" group="max" title="Новая ком. ТУ" />
        <column table="vcr_pu_err" group="max" column="ld_pu" title="Загружен ПУ" />
        <column table="vcr_pu_err" column="ld_en" group="max" title="Загружен Вид. эн." />
        <column table="vcr_ik_err" column="ld_tar" group="max" title="Загружен Тариф" />
        <call function="latest" as="dat_po" title="Дата закрытия" group="max">
          <call type="" function="date add days">
            <column table="a" column="setup_date_d" as="" type="" />
            <const>-1</const>
          </call>
          <call type="" function="date add days">
            <call function="ym begin time">
              <column table="kr_calc_dep_max" column="ym" />
            </call>
            <const>-1</const>
          </call>
        </call>
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="vcj_pu_err_simple" as="vcr_pu_err" />
          <link name="ik_id">
            <link name="vcr_ik_err" />
            <link name="hr_point">
              <link name="kod_obj">
                <elink name="kr_numobj_mn">
                  <link name="kod_dog">
                    <link name="dep">
                      <link name="kr_calc_dep_max" />
                    </link>
                  </link>
                </elink>
              </link>
              <elink name="hr_point_pu">
                <elink name="hr_point_en">
                  <elink name="hr_point_ini">
                    <link name="kodinterval" />
                    <elink name="vcj_hr_point_ini_valid" />
                  </elink>
                </elink>
              </elink>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="hr_point_ini" column="kodinterval" />
          </call>
          <call function="is not null">
            <column table="vcr_pu_err" column="do_create_ini" />
          </call>
          <call function="is null">
            <column table="a" column="kod_point_ini" />
          </call>
          <call function="is null">
            <column table="hr_point_ini" column="dat_po" />
          </call>
          <call function="is not null">
            <column table="hr_point_ini" column="kod_point_ini" />
          </call>
          <call function="is null">
            <column table="vcj_hr_point_ini_valid" column="kod_point_ini" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcx_ini_kod" timestamp="13.02.2019 17:40:19" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="reg_id" group="1" />
        <column table="hr_point_ini" column="kod_point_ini" group="max" />
        <column table="hr_point_pu" column="kod_point_pu" group="count" as="cnt" />
        <column table="k_har" column="key_outer" group="max" as="k_ini" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id">
            <link name="hr_point" />
            <link name="eo_id" />
          </link>
        </query>
        <query join="left outer" name="hr_point_pu">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_pu" column="kod_point" />
            </call>
            <call function="ge" exclude="1">
              <call type="" function="nvl">
                <column table="hr_point_pu" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
            <call function="=">
              <column table="hr_point_pu" column="nom_pu" />
              <column table="a" column="serial_nbr" />
            </call>
            <call function="in">
              <column table="hr_point_pu" column="pr_active" />
              <array>0,2</array>
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_en">
          <call function="and">
            <call function="=">
              <column table="hr_point_en" column="kod_point_pu" />
              <column table="hr_point_pu" column="kod_point_pu" />
            </call>
            <call function="ge">
              <call type="" function="nvl">
                <column table="hr_point_en" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
            <call function="=">
              <column table="hr_point_en" column="energy" />
              <column table="a" column="energy_ccb" />
            </call>
            <call function="=">
              <column table="hr_point_en" column="kod_directen" />
              <column table="a" column="kod_directen_ccb" />
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_tar">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_tar" column="kod_point" />
            </call>
            <call function="=">
              <column table="ik_id" column="voltage" />
              <column table="hr_point_tar" column="voltage" />
            </call>
            <call function="in">
              <column table="hr_point_tar" column="pr_active" />
              <array>0,2</array>
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_ini">
          <call function="and">
            <call function="=">
              <column table="hr_point_en" column="kod_point_en" />
              <column table="hr_point_ini" column="kod_point_en" />
            </call>
            <call function="=">
              <column table="hr_point_tar" column="kod_point_tar" />
              <column table="hr_point_ini" column="kod_point_tar" />
            </call>
            <call function="in">
              <column table="hr_point_ini" column="pr_active" />
              <array>0,2</array>
            </call>
            <call function="=">
              <column table="hr_point_ini" column="kodinterval_nz" />
              <column table="a" column="kodinterval" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_har">
          <call function="and">
            <call function="=">
              <column table="k_har" column="key_name_inner" />
              <const>'KOD_POINT_INI'</const>
            </call>
            <call function="=">
              <column table="k_har" column="key_outer" />
              <column table="a" column="reg_id" />
            </call>
          </call>
        </query>
      </from>
      <where exclude="1">
        <call function="=">
          <column table="a" column="reg_id" />
          <const>9610496008</const>
        </call>
      </where>
      <select exclude="1">
        <column table="a" column="ik_id" group="1" />
        <column table="hr_point" column="kod_point" group="max" />
        <column table="hr_point_har" column="kod_point_har" group="max" />
        <column table="hr_point_tar" column="kod_point_tar" group="1" />
        <column table="hr_point" column="kod_point" group="count" as="cnt" />
      </select>
      <from exclude="1">
        <query name="vccb_izm_compl" as="a">
          <link name="eo_id" />
        </query>
        <query join="left outer" name="hr_point">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="nomer" />
              <column table="a" column="tu_num" />
            </call>
            <call function="=">
              <column table="eo_id" column="kod_obj" />
              <column table="hr_point" column="kod_obj" />
            </call>
            <call function="=">
              <const>0</const>
              <column table="hr_point" column="pr_active" />
            </call>
            <call function="ge" exclude="1">
              <call type="" function="nvl">
                <column table="hr_point" column="dat_po" as="" type="" />
                <call function="doomsday" />
              </call>
              <column table="a" column="dat" />
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_tar">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_tar" column="kod_point" />
            </call>
            <call function="=">
              <column table="a" column="voltage" />
              <column table="hr_point_tar" column="voltage" />
            </call>
            <call function="=">
              <const>0</const>
              <column table="hr_point_tar" column="pr_active" />
            </call>
          </call>
        </query>
        <query join="left outer" name="hr_point_har">
          <call function="and">
            <call function="=">
              <column table="hr_point" column="kod_point" />
              <column table="hr_point_har" column="kod_point" />
            </call>
            <call function="=">
              <column column="method_ccb" table="a" />
              <column column="method_ccb" table="hr_point_har" />
            </call>
            <call exclude="1" function="ge">
              <call function="nvl" type="">
                <column as="" column="dat_po" table="hr_point_har" type="" />
                <call function="doomsday" />
              </call>
              <column column="dat" table="a" />
            </call>
            <call function="=">
              <const>0</const>
              <column table="hr_point_har" column="pr_active" />
            </call>
          </call>
        </query>
        <query name="vccb_izm_compl" join="left outer" as="ik_id">
          <call function="=">
            <column table="this" column="ik_id" />
            <column table="ik_id" column="ik_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vci_hr_point_ini_close" timestamp="05.02.2019 04:21:51" is-report="1" title="hr_point_ini(Закрытие)" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="kod_point_ini" />
        <column table="a" column="dat_po" />
      </select>
      <from>
        <query name="vcr_hr_point_ini_close" as="a" />
      </from>
    </query>
    <query name="vcx_tip_pu_kod" timestamp="11.02.2019 19:43:25" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="reg_id" group="1" />
        <column table="b" column="kod_tippu" group="max" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a" />
        <query join="left outer" name="hv_typepu" as="b">
          <call function="and">
            <call function="=">
              <column table="a" column="model_name" />
              <column table="b" column="name_pk" />
            </call>
            <call function="=">
              <call type="" function="to_char">
                <column table="a" column="mpi_let" as="" type="" />
              </call>
              <call type="" function="to_char">
                <column table="b" column="mpi" as="" type="" />
              </call>
            </call>
            <call function="=">
              <column table="a" column="i_nommak" />
              <column table="b" column="i" />
            </call>
            <call function="=">
              <column table="a" column="u_nommak" />
              <column table="b" column="u" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vcj_pu_err_simple" timestamp="13.02.2019 23:08:33" is-report="1" title="Закрытие ком. ТУ" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="vcr_pu_err" column="reg_id" />
        <column table="vcr_pu_err" column="do_create_pu" title="Новый ПУ" />
        <column table="vcr_pu_err" column="do_create_en" title="Новый Вид. эн." />
        <column table="vcr_pu_err" column="do_create_ini" title="Новая ком. ТУ" />
        <column table="vcr_pu_err" column="ld_pu" title="Загружен ПУ" />
        <column table="vcr_pu_err" column="ld_en" title="Загружен Вид. эн." />
      </select>
      <from>
        <query name="vcr_pu_err" />
      </from>
    </query>
    <query name="vcr_fee_err" timestamp="11.10.2019 20:51:32" is-report="1" title="Документы начисления" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <call function="rownum" as="id" key="1" />
        <call type="number" function="if" halign="center" as="do_load_sf" title="Будет выполнена загрузка" format="F0">
          <call type="" function="and">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>2</const>
            </call>
            <call function="is null" as="" type="">
              <column table="this" column="has_error_fee" />
            </call>
            <call function="not">
              <call function="and">
                <call function="=1">
                  <column table="a" column="deleted" />
                </call>
                <call function="is null">
                  <column table="vcp_keys" column="key_inner" />
                </call>
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <band title="Ошибки">
          <call type="number" as="has_error_fee" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="is_no_dog_x" />
              <column table="this" column="is_no_vn" />
              <column table="this" column="is_no_volt" />
              <column table="this" column="is_no_int" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_dog" format="F0" function="if" halign="center" type="number" title="Договор не найден">
            <call function="is null" type="">
              <column column="acct_id" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_dog_x" format="F0" function="if" halign="center" type="number" title="Договор в АСУСЭ не найден">
            <call function="is null" type="">
              <column column="kod_dog" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_vn" format="F0" function="if" halign="center" type="number" title="Вид начисления не найден">
            <call function="is null" type="">
              <column column="vid_real" table="a" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_volt" format="F0" function="if" halign="center" type="number" title="Уровень напряжения не найден">
            <call type="" function="and">
              <call function="is null" type="" as="">
                <column column="voltage" table="a" />
              </call>
              <call function="is not null" type="" as="">
                <column column="voltage_level_descr" table="a" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call as="is_no_int" format="F0" function="if" halign="center" type="number" title="Зона суток не найдена">
            <call function="is null" type="">
              <column column="kodinterval" table="a" />
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="vid_real" title="Вид реализации" />
        <column table="a" column="sr_facvip_id" />
        <column table="vcp_keys" column="key_inner" as="kod_ras" />
        <band title="Данные из CC&amp;B">
          <column table="a" column="dog_num" />
          <column table="a" column="person_name" />
          <column table="a" column="cm_eo_code" />
          <column table="a" column="eo_name" />
          <column table="a" column="cm_address_descr" />
          <column table="a" column="cm_consumption_period_id" />
          <column table="a" column="accounting_period_id" />
          <column table="a" column="cm_quantity" />
          <column table="a" column="cm_price_amount" />
          <column table="a" column="cur_amt" />
          <column table="a" column="vid_nach_descr" />
          <column table="a" column="cm_price_category_flg" />
          <column table="a" column="voltage_level_descr" />
          <column table="a" column="tou_descr" />
          <column table="a" column="acct_id" />
          <column table="a" column="ft_id" />
          <column table="a" column="cm_vid_nach" />
        </band>
      </select>
      <from>
        <query name="vccb_fee" as="a">
          <link name="acct_id" />
        </query>
        <query name="vcp_keys" join="left outer">
          <call function="and">
            <call function="=">
              <column table="vcp_keys" column="key_name_outer" />
              <const>'SR_FACRAS_ID'</const>
            </call>
            <call function="=">
              <column table="vcp_keys" column="key_name_inner" />
              <const>'KOD_RAS'</const>
            </call>
            <call function="=">
              <column table="a" column="sr_facras_id" />
              <column table="vcp_keys" column="key_outer" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vci_sr_facvip" timestamp="21.02.2019 20:49:56" title="sr_facvip" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="sr_facvip_id" title="sr_facvip_id" group="1" />
        <column table="acct_id" column="kod_dog" title="kod_dog" group="max" />
        <column table="a" column="vid_real" title="vid_real" group="max" />
        <column table="a" column="ym" title="ym" group="max" />
      </select>
      <from>
        <query name="vccb_fee" as="a">
          <link name="acct_id" />
          <link name="vcr_fee_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_fee_err" column="do_load_sf" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vci_sr_facras" timestamp="06.09.2019 14:40:42" title="sr_facras" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="sr_facras_id" />
        <column table="a" column="sr_facvip_id" title="sr_facvip_id" />
        <column table="a" column="vid_t" title="vid_t" />
        <column table="a" column="rym" title="rym" />
        <column table="a" column="cust" />
        <column table="a" column="price" />
        <column table="a" column="nachisl" />
        <column table="a" column="deleted" />
        <column table="vcp_keys" column="key_inner" as="kod_ras" />
      </select>
      <from>
        <query name="vccb_fee" as="a">
          <link name="acct_id" />
          <link name="vcr_fee_err" />
        </query>
        <query name="vcp_keys" join="left outer">
          <call function="and">
            <call function="=">
              <column table="vcp_keys" column="key_name_outer" />
              <const>'SR_FACRAS_ID'</const>
            </call>
            <call function="=">
              <column table="vcp_keys" column="key_name_inner" />
              <const>'KOD_RAS'</const>
            </call>
            <call function="=">
              <column table="a" column="sr_facras_id" />
              <column table="vcp_keys" column="key_outer" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_fee_err" column="do_load_sf" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vcr_pay_err" timestamp="06.03.2019 11:38:14" is-report="1" title="Оплаты" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <call function="rownum" as="id" key="1" />
        <call type="number" function="if" halign="center" as="do_load_pay" title="Будет выполнена загрузка" format="F0">
          <call type="" function="and">
            <call function="is null" as="" type="">
              <column table="this" column="has_error_pay" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call type="number" as="has_error_pay" function="if" halign="center" title="Есть ошибки" format="F0">
          <call function="is not null">
            <column table="this" column="is_no_dog" />
            <column table="this" column="is_no_dog_x" />
            <column table="this" column="is_no_kod_dest" />
            <column table="this" column="is_no_kod_vidopl" />
            <column table="this" column="is_no_kodbpol" />
            <column table="this" column="is_no_vid_real" />
            <column table="this" column="is_no_kod_type_opl" />
            <column table="this" column="is_multiple_tax" />
            <column table="this" column="is_dog_conflict" />
          </call>
          <const>1</const>
        </call>
        <band title="Ошибки">
          <call as="is_no_dog" format="F0" function="if" halign="center" type="number" title="Договор не найден">
            <call function="is null" type="">
              <column column="acct_id" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_dog_x" format="F0" function="if" halign="center" type="number" title="Договор в АСУСЭ не найден">
            <call function="is null" type="">
              <column column="kod_dog" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_kod_dest" format="F0" function="if" halign="center" type="number" title="Не найдено назначение платежа">
            <call function="is null" type="">
              <column column="kod_dest" table="a" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_kod_vidopl" format="F0" function="if" halign="center" type="number" title="Не найден вид платежа">
            <call function="is null" type="">
              <column column="kod_vidopl" table="a" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_kodbpol" format="F0" function="if" halign="center" type="number" title="Не найден банк получателя">
            <call function="is null" type="">
              <column column="kodbpol" table="a" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_vid_real" format="F0" function="if" halign="center" type="number" title="Не найден вид реализации">
            <call function="is null" type="">
              <column column="vid_real" table="a" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_kod_type_opl" format="F0" function="if" halign="center" type="number" title="Не найден тип платежа">
            <call function="is null" type="">
              <column column="kod_type_opl" table="a" />
            </call>
            <const>1</const>
          </call>
          <call function="if" type="number" as="is_multiple_tax" title="Найден НДС и 18% и 20%" format="F0">
            <call function="and">
              <call function="!=">
                <column table="a" column="cm_nds_amt_18" />
                <const>'0'</const>
              </call>
              <call function="!=">
                <column table="a" column="cm_nds_amt_20" />
                <const>'0'</const>
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="if" type="number" as="is_dog_conflict" title="Номер договора не совпадает в acct_id и dog_num" format="F0">
            <call function="!=nvl">
              <column table="a" column="dog_num" />
              <column table="kod_dog" column="ndog" />
            </call>
            <const>1</const>
          </call>
        </band>
        <band title="Некритичные ошибки.">
          <call function="-" as="nal_diff" title="НДС рассчетный - фактический">
            <call function="/">
              <call function="*">
                <column table="a" column="tax" />
                <column table="a" column="cur_amt" />
              </call>
              <call function="+">
                <const>100</const>
                <column table="a" column="tax" />
              </call>
            </call>
            <column table="a" column="nal" />
          </call>
          <call function="if" type="number" as="is_no_tax" title="Не найден НДС" format="F0">
            <call function="and">
              <call function="=">
                <column table="a" column="tax" />
                <const>'0'</const>
              </call>
              <call function="!=">
                <column table="a" column="vid_real" />
                <const>7</const>
              </call>
              <call function="gt">
                <column table="a" column="cur_amt" />
                <const>0.1</const>
              </call>
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="dep" column="name" as="dep_name" />
        <column table="kodp" column="nump" />
        <column table="kodp" column="name" />
        <band title="Данные из CC&amp;B">
          <column table="a" column="person_name" />
          <column table="a" column="pay_doc_num" />
          <column table="a" column="cm_send_date" />
          <column table="a" column="draft_prep_period" />
          <column table="a" column="dog_num" />
          <column table="a" column="invsum_20" />
          <column table="a" column="freezed_by" />
          <column table="a" column="pay_item_descr" />
          <column table="a" column="pay_type_descr" />
          <column table="a" column="inv_num" />
          <column table="a" column="payment_ability" />
          <column table="a" column="draft_date" />
          <column table="a" column="cm_nds_amt_18" />
          <column table="a" column="tender_type_descr" />
          <column table="a" column="accounting_dt" />
          <column table="a" column="pay_mode_descr" />
          <column table="a" column="cm_freezed_dttm" />
          <column table="a" column="pay_dt" />
          <column table="a" column="acct_id" />
          <column table="a" column="invsum_18" />
          <column table="a" column="cm_retail_type" />
          <column table="a" column="draft_num" />
          <column table="a" column="cm_nds_amt_20" />
          <column table="a" column="inv_date" />
          <column table="a" column="per_id" />
          <column table="a" column="evt_dt" />
          <column table="a" column="payment_type" />
          <column table="a" column="cm_pay_purpose" />
          <column table="a" column="pay_id" />
          <column table="a" column="cur_amt" />
          <column table="a" column="inv_period" />
          <column table="a" column="cm_bank_acct_stat_det_payer" />
          <column table="a" column="draft_state_descr" />
          <column table="a" column="cm_consumption_period_id" />
          <column table="a" column="agrement_dep_name" />
          <column table="a" column="bank_name" />
        </band>
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="acct_id">
            <link name="kod_dog">
              <link name="dep" />
              <link name="kodp" />
            </link>
          </link>
        </query>
      </from>
    </query>
    <query name="vci_sr_opl" timestamp="05.09.2019 14:30:08" title="sr_opl" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="pay_id" title="sr_opl_id" as="sr_opl_id" />
        <column table="acct_id" column="kod_dog" title="kod_dog" />
        <column table="a" column="vid_real" title="vid_real" />
        <column table="a" column="ym" title="ym" />
        <column table="a" column="dat_opl" title="dat_opl" />
        <column table="a" column="cm_pay_purpose" as="remark" title="remark" />
        <column table="a" column="opl" />
        <column table="a" column="opls" />
        <column table="a" column="pay_doc_num" title="num_opl" as="num_opl" />
        <column table="a" column="kod_vidopl" />
        <column table="a" column="kod_type_opl" />
        <column table="a" column="sr_opl_bank_id" />
        <column table="a" column="kod_dest" />
        <column table="a" column="deleted" />
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="acct_id" />
          <link name="vcr_pay_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_pay_err" column="do_load_pay" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vct_sr_opl_bank" timestamp="25.02.2019 20:23:08" title="sr_opl_bank" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="sr_opl_bank_id" title="sr_opl_bank_id" as="sr_opl_bank_id" exclude="1" />
        <column table="kod_dog" column="kodp" title="kod_dog" as="kodp" exclude="1" />
        <column table="a" column="dat_opl" title="dat_opl" exclude="1" />
        <column table="a" column="kod_dest" title="kod_dest" exclude="1" />
        <column table="a" column="kod_vidopl" title="kod_vidopl" exclude="1" />
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="acct_id">
            <link name="kod_dog" />
          </link>
          <link name="vcr_pay_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_pay_err" column="do_load_pay" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vcx_opl_bank_kod" timestamp="25.02.2019 18:10:52" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="pay_id" group="1" />
        <column table="sr_opl_bank" column="kod_link" group="max" />
        <column table="sr_opl_bank" column="kod_link" group="count" as="cnt" />
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="acct_id">
            <link name="kod_dog" />
          </link>
        </query>
        <query join="left outer" name="sr_opl_bank">
          <call type="" function="and">
            <call function="=">
              <column table="sr_opl_bank" column="kodp" />
              <column table="kod_dog" column="kodp" />
            </call>
            <call function="=">
              <column table="sr_opl_bank" column="dat_opl" />
              <column table="a" column="dat_opl" />
            </call>
            <call function="=">
              <column table="sr_opl_bank" column="num_opl" />
              <column table="a" column="num_opl" />
            </call>
          </call>
        </query>
        <query join="left outer" name="vcp_keys" as="k_dog" exclude="1">
          <call function="and">
            <call function="=">
              <column table="k_dog" column="key_name_inner" />
              <const>'KOD_DOG'</const>
            </call>
            <call function="=">
              <column table="k_dog" column="key_outer" />
              <column table="a" column="acct_id" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vci_sr_opl_bank" timestamp="05.09.2019 14:30:08" title="sr_opl_bank" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="sr_opl_bank_id" title="sr_opl_id" />
        <column table="acct_id" column="kodp" title="kod_dog" />
        <column table="a" column="dat_opl" title="dat_opl" />
        <column table="a" column="pay_doc_num" as="num_opl" title="num_opl" />
        <column table="a" column="kodbpol" title="kodbpol" />
        <column table="a" column="cm_pay_purpose" as="remark" title="remark" />
        <column table="a" column="cm_bank_acct_stat_det_payer" as="pname" title="pname" />
        <column table="a" column="cur_amt" as="opl" title="opl" />
        <column table="a" column="kod_dest" as="kod_dest" title="kod_dest" />
        <column table="a" column="kod_vidopl" as="kod_vidopl" title="kod_vidopl" />
        <column table="a" column="dog_num" as="ndog" title="ndog" />
        <column table="a" column="deleted" />
        <column table="acct_id" column="account_number" title="ndog" as="ndog" exclude="1" />
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="acct_id" />
          <link name="vcr_pay_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_pay_err" column="do_load_pay" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vci_sr_opl_nal" timestamp="05.09.2019 14:30:08" title="sr_opl_nal" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="pay_id" title="sr_opl_id" as="sr_opl_id" />
        <column table="a" column="tax" />
        <column table="a" column="nal" />
        <column table="a" column="deleted" />
      </select>
      <from>
        <query name="vccb_pay" as="a">
          <link name="vcr_pay_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_pay_err" column="do_load_pay" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vcx_kodp_uch" timestamp="23.05.2019 18:44:39" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="kodp" />
        <column table="a" column="sname" />
        <column table="kodp_dep" column="kodp" as="dep" />
      </select>
      <from>
        <query name="kr_org" as="a">
          <link name="kodp_dep" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_separator" />
            <const>5</const>
          </call>
          <call function="not like">
            <call function="lower">
              <column table="kodp_dep" column="name" />
            </call>
            <const>'ук %'</const>
          </call>
          <call function="not like">
            <call function="lower">
              <column table="kodp_dep" column="name" />
            </call>
            <const>'архив %'</const>
          </call>
        </call>
      </where>
    </query>
    <query name="vci_avans_nachisl" timestamp="10.09.2019 19:10:54" title="начисления авансов" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="avans_nachisl_id" />
        <column table="acct_id" column="kod_dog" title="kod_dog" as="fv_kod_dog" />
        <call function="to_number" as="fv_vid_real">
          <column table="a" column="vid_real_str" />
        </call>
        <column table="a" column="ym" title="ym" as="fv_ym" />
        <column table="a" column="draft_num" as="fv_nom_sf" />
        <column table="a" column="draft_amt" as="fr_nachisl" />
        <column table="a" column="potreb" title="name_potr" as="frt_name_potr" />
        <column table="a" column="prc_avan" />
        <query as="vist_day" title="vist_day">
          <select>
            <call function="max">
              <column table="kr_vist_day" column="day" />
            </call>
          </select>
          <from>
            <query name="kr_vist_day" />
          </from>
          <where>
            <call function="and">
              <call function="=">
                <column table="acct_id" column="kod_dog" />
                <column table="kr_vist_day" column="kod_dog" />
              </call>
              <call function="=">
                <call function="to_number">
                  <column table="a" column="prc_avan" />
                </call>
                <column table="kr_vist_day" column="perc" />
              </call>
            </call>
          </where>
          <having>
            <call function="=1">
              <call function="count">
                <column table="kr_vist_day" column="day" />
              </call>
            </call>
          </having>
        </query>
        <column table="a" column="deleted" />
        <column table="vcp_keys" column="key_inner" as="kod_sf" />
      </select>
      <from>
        <query name="vccb_dft" as="a">
          <link name="acct_id" />
          <link name="vcr_dft_err" />
        </query>
        <query name="vcp_keys" join="left outer">
          <call function="and">
            <call function="=">
              <column table="vcp_keys" column="key_name_outer" />
              <const>'avans_nachisl_id'</const>
            </call>
            <call function="=">
              <column table="vcp_keys" column="key_name_inner" />
              <const>'KOD_SF'</const>
            </call>
            <call function="=">
              <column table="a" column="avans_nachisl_id" />
              <column table="vcp_keys" column="key_outer" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="vcr_dft_err" column="do_load_sf" />
            <const>1</const>
          </call>
          <call function="=">
            <column table="a" column="vid_real_str" />
            <const>'0'</const>
          </call>
        </call>
      </where>
    </query>
    <query name="vcr_dft_err" timestamp="16.07.2019 18:06:17" is-report="1" title="Авансы и еще что-то" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <call function="rownum" as="id" key="1" />
        <call type="number" function="if" halign="center" as="do_load_sf" title="Будет выполнена загрузка" format="F0">
          <call type="" function="and">
            <call function="true" />
            <call function="is null" as="" type="">
              <column table="this" column="has_error_fee" />
            </call>
          </call>
          <const>1</const>
        </call>
        <band title="Ошибки">
          <call type="number" as="has_error_fee" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="is_no_dog_x" />
              <column table="this" column="is_no_vr" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_dog" format="F0" function="if" halign="center" type="number" title="Договор не найден">
            <call function="is null" type="">
              <column column="acct_id" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_dog_x" format="F0" function="if" halign="center" type="number" title="Договор в АСУСЭ не найден">
            <call function="is null" type="">
              <column column="kod_dog" table="acct_id" />
            </call>
            <const>1</const>
          </call>
          <call as="is_no_vr" format="F0" function="if" halign="center" type="number" title="Вид реализации не найден">
            <call function="not in" type="">
              <column column="vid_real_str" table="a" />
              <query>
                <select>
                  <call function="to_char">
                    <column table="sk_vid_real" column="vid_real" />
                  </call>
                </select>
                <from>
                  <query name="sk_vid_real" />
                </from>
              </query>
            </call>
            <const>1</const>
          </call>
        </band>
        <column table="a" column="vid_real_str" title="Вид реализации" />
        <column table="a" column="sr_facvip_id" />
        <column table="a" column="acct_id" title="acct_id" as="acct_id_s" />
        <band title="Данные из CC&amp;B">
          <column table="a" column="dog_num" type="string" data-size="256" title="" />
          <column table="a" column="draft_outgoing_date" type="string" data-size="256" title="" />
          <column table="a" column="draft_num" type="string" data-size="256" title="" />
          <column table="a" column="draft_amt" type="string" data-size="256" title="" />
          <column table="a" column="debet" type="string" data-size="256" title="" />
          <column table="a" column="payed_amt" type="string" data-size="256" title="" />
          <column table="a" column="prepayed_amt" type="string" data-size="256" title="" />
          <column table="a" column="credit" type="string" data-size="256" title="" />
          <column table="a" column="balance" type="string" data-size="256" title="" />
          <column table="a" column="draft_state_status_descr" type="string" data-size="256" title="" />
          <column table="a" column="retail_type_descr" type="string" data-size="256" title="" />
          <column table="a" column="prc_avan" type="string" data-size="256" title="" />
          <column table="a" column="debt_transfer_amt" type="string" data-size="256" title="" />
          <column table="a" column="acknowledgement_amt" type="string" data-size="256" title="" />
          <column table="a" column="sinh_cur_amt" type="string" data-size="256" title="" />
          <column table="a" column="clear_cur_amt" type="string" data-size="256" title="" />
          <column table="a" column="acct_id" type="string" data-size="256" title="" />
          <column table="a" column="draft_id" type="string" data-size="256" column-mandatory="1" title="" />
          <column table="a" column="match_evt_id" type="string" data-size="256" title="" />
          <column table="a" column="style" type="string" data-size="256" title="" />
          <column table="a" column="has_acknowledgement" type="string" data-size="256" title="" />
          <column table="a" column="draft_status_cd" type="string" data-size="256" title="" />
          <column table="a" column="refound_amt" type="string" data-size="256" title="" />
          <column table="a" column="potreb" type="string" data-size="256" title="" />
          <column table="a" column="accounting_period_id" type="string" data-size="256" title="" />
          <column table="a" column="prep_dec_cur_amt" type="string" data-size="256" title="" />
          <column table="a" column="st_flag" type="number" title="" />
          <column table="a" column="ld_time" type="date" title="" />
        </band>
      </select>
      <from>
        <query name="vccb_dft" as="a">
          <link name="acct_id" />
        </query>
      </from>
    </query>
    <query name="vci_sr_facras_text" timestamp="06.09.2019 14:41:06" title="sr_facras_text" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="sr_facras_id" />
        <column table="a" column="eo_name" title="name_potr" as="name_potr" />
        <column table="a" column="cm_address_descr" title="obj_adr" as="obj_adr" />
        <column table="a" column="voltage" title="voltage" />
        <column table="a" column="kodinterval" title="kodinterval" />
        <column table="a" column="deleted" />
        <column table="vcp_keys" column="key_inner" as="kod_ras" />
      </select>
      <from>
        <query name="vccb_fee" as="a">
          <link name="acct_id" />
          <link name="vcr_fee_err" />
        </query>
        <query name="vcp_keys" join="left outer">
          <call function="and">
            <call function="=">
              <column table="vcp_keys" column="key_name_outer" />
              <const>'SR_FACRAS_ID'</const>
            </call>
            <call function="=">
              <column table="vcp_keys" column="key_name_inner" />
              <const>'KOD_RAS'</const>
            </call>
            <call function="=">
              <column table="a" column="sr_facras_id" />
              <column table="vcp_keys" column="key_outer" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_fee_err" column="do_load_sf" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vci_kr_plan" timestamp="23.07.2019 19:57:52" title="kr_plan" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="cp_id" as="kr_plan_id" title="kr_plan_id" />
        <column table="a" column="kod_numobj" title="kod_numobj" />
        <const as="status" type="number">0</const>
        <call function="case" as="kod_type_plan">
          <call function="when">
            <call function="=">
              <column table="a" column="dog_type" />
              <const>'Без услуг по передаче'</const>
            </call>
            <const comment="KK_TYPE_TARIF_PLAN">2</const>
          </call>
          <call function="else">
            <const comment="KK_TYPE_TARIF_PLAN">1</const>
          </call>
        </call>
        <call function="case" as="kod_type_pes" title="kod_type_pes">
          <call function="when">
            <call function="like">
              <column table="a" column="pwgrid" />
              <const>'РСК%'</const>
            </call>
            <const comment="KK_TYPE_PES">1</const>
          </call>
          <call function="when">
            <call function="like">
              <column table="a" column="pwgrid" />
              <const>'ФСК%'</const>
            </call>
            <const comment="KK_TYPE_PES">2</const>
          </call>
          <call function="else">
            <call comment="KK_TYPE_PES" function="null" />
          </call>
        </call>
        <call function="date to ym" as="ym_s">
          <column table="eo_id" column="creation_date_d" />
        </call>
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="eo_id" />
          <link name="vcr_tochk_post_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_tochk_post_err" column="do_load_tarif" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vcr_tochk_post_err" timestamp="04.10.2019 21:03:16" is-report="1" title="Точки поставки" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="cp_id" type="string" data-size="256" as="id" key="1" />
        <column table="eo_id" column="kod_numobj" title="kod_numobj" />
        <band title="Тарифы">
          <call type="number" function="if" halign="center" as="do_load_tarif" title="Будет выполнена загрузка тарифв" format="F0">
            <call type="" function="and">
              <call function="true" />
              <call function="is null" as="" type="">
                <column table="this" column="has_error_tarif" />
              </call>
              <call function="=">
                <column table="this" column="cnt_tarif_exists" />
                <const>0</const>
              </call>
            </call>
            <const>1</const>
          </call>
          <column table="this" column="cnt_tarif_exists" as="cnt_tarif_exists_a" />
          <call type="number" as="has_error_tarif" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="has_error" />
              <column table="this" column="no_region" />
              <column table="this" column="wrong_region" />
              <column table="this" column="wrong_urov_nap" />
              <column table="this" column="tarif_disappeared" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="no_region" function="if" halign="center" title="Нет региона" format="F0">
            <call function="is null">
              <column table="a" column="region" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="wrong_region" function="if" halign="center" title="Неизвестный регион" format="F0">
            <call function="not in">
              <column table="a" column="region" />
              <array>'Республика Алтай','Алтайский край'</array>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="wrong_urov_nap" function="if" halign="center" format="F0" title="Неординарный уровень напряжения">
            <call function="not in">
              <call function="nvl0">
                <column table="vcs_voltage" column="voltage" />
              </call>
              <array>1,2,3,4</array>
            </call>
            <const>1</const>
          </call>
          <call function="if" as="tarif_disappeared" title="Тариф исчез из базы АСУСЭ" type="number">
            <call function="and">
              <call function="is not null">
                <column table="tarif_key" column="key_outer" />
              </call>
              <call function="=">
                <column table="this" column="cnt_tarif_exists" />
                <const>0</const>
              </call>
            </call>
            <const>1</const>
          </call>
        </band>
        <band title="Регламенты">
          <column table="this" column="cnt_dog_regl_active" as="cnt_dog_regl_active_a" />
          <column table="this" column="cnt_dog_regl_active_obj" as="cnt_dog_regl_active_obj_a" />
          <call type="number" function="if" halign="center" as="do_create_reglament_parent" title="Будет создан регламент в договоре" format="F0">
            <call type="" function="and">
              <call function="true" />
              <call function="is null" as="" type="">
                <column table="this" column="has_error_reglament" />
              </call>
              <call function="=">
                <column table="this" column="cnt_dog_regl_active" />
                <const>0</const>
              </call>
            </call>
            <const>1</const>
          </call>
          <column table="this" column="cnt_obj_regl" as="cnt_obj_regl_a" />
          <call type="number" function="if" halign="center" as="do_load_reglament" title="Будет выполнена загрузка регламента" format="F0">
            <call type="" function="and">
              <call function="true" />
              <call function="is null" as="" type="">
                <column table="this" column="has_error_reglament" />
              </call>
              <call function="=">
                <column table="this" column="cnt_obj_regl" />
                <const>0</const>
              </call>
              <call function="=">
                <column table="this" column="cnt_dog_regl_active" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="this" column="cnt_dog_regl_active_obj" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="eo_id" column="kod_numobj" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="has_error_reglament" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="has_error" />
              <column table="this" column="multiple_dog_reglament" />
              <column table="this" column="reglament_disappeared" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="multiple_dog_reglament" function="if" halign="center" title="Много активных регламентов в договоре" format="F0">
            <call function="gt">
              <column table="this" column="cnt_dog_regl_active" />
              <const>1</const>
            </call>
            <const>1</const>
          </call>
          <call function="if" as="reglament_disappeared" title="Регламент исчез из базы АСУСЭ" type="number">
            <call function="and">
              <call function="is not null">
                <column table="reglament_key" column="key_outer" />
              </call>
              <call function="=">
                <column table="this" column="cnt_obj_regl" />
                <const>0</const>
              </call>
            </call>
            <const>1</const>
          </call>
        </band>
        <band title="Ошибки">
          <call type="number" as="has_error" function="if" halign="center" title="Есть ошибки" format="F0">
            <call function="is not null">
              <column table="this" column="dub_eo" />
              <column table="this" column="wrong_pric_cat" />
              <column table="this" column="no_pric_cat" />
              <column table="this" column="no_numobject" />
              <column table="this" column="dub_numobj" exclude="1" />
              <column table="this" column="is_deleted" />
            </call>
            <const>1</const>
          </call>
          <call function="if" title="Много точек CCnB на 1 энергообъект" as="dub_eo" type="number" format="F0" halign="center">
            <call function="gt">
              <call function="over">
                <call function="sum">
                  <const>1</const>
                </call>
                <call function="partition by">
                  <column table="a" column="eo_id" />
                </call>
              </call>
              <const>1</const>
            </call>
            <const>1</const>
          </call>
          <call function="if" title="Много точек numobj на 1 энергообъект" as="dub_numobj" type="number" format="F0" halign="center" exclude="1">
            <call function="gt">
              <call function="over">
                <call function="sum">
                  <const>1</const>
                </call>
                <call function="partition by">
                  <column table="eo_id" column="kod_numobj" />
                </call>
              </call>
              <const>1</const>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="wrong_pric_cat" function="if" halign="center" title="Неизвестная категория" format="F0">
            <call function="not in">
              <column table="a" column="pric_cat_nvl" />
              <array>'I','II','III','IV','V','VI'</array>
            </call>
            <const>1</const>
          </call>
          <call type="number" as="no_pric_cat" function="if" halign="center" title="Нет категории" format="F0">
            <call function="is null">
              <column table="a" column="pric_cat_nvl" />
            </call>
            <const>1</const>
          </call>
          <call type="number" as="no_numobject" function="if" halign="center" title="Нет объекта" format="F0">
            <call function="is null">
              <column table="eo_id" column="kod_numobj" />
            </call>
            <const>1</const>
          </call>
          <call function="if" as="is_deleted" title="Удален из CCnB" type="number">
            <call function="=1">
              <column table="a" column="deleted" />
            </call>
            <const>1</const>
          </call>
        </band>
        <call function="()" type="number" as="cnt_tarif_exists" title="Количество сущиствубщих тарифов">
          <query name="cnt_tarif_exists">
            <select>
              <call function="count">
                <column table="kr_plan" column="kod_plan" />
              </call>
            </select>
            <from>
              <query name="kr_plan" />
            </from>
            <where>
              <call function="=">
                <column table="kr_plan" column="kod_numobj" />
                <column table="eo_id" column="kod_numobj" />
              </call>
            </where>
          </query>
        </call>
        <call function="()" type="number" as="cnt_dog_regl_active" title="Количество активных регламентов в договоре">
          <query name="cnt_dog_regl_active">
            <select>
              <call function="count">
                <column table="hr_reglament_pp" column="kod_reglament" />
              </call>
            </select>
            <from>
              <query name="hr_reglament_pp" />
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="hr_reglament_pp" column="kod_dog" />
                  <column table="kod_dog" column="kod_dog" />
                </call>
                <call function="=">
                  <column table="hr_reglament_pp" column="kod_sost" />
                  <const>1</const>
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" type="number" as="cnt_dog_regl_active_obj" title="Количество активных регламентов в договоре c типом &quot;по объектам&quot;">
          <query name="cnt_dog_regl_active_obj">
            <select>
              <call function="count">
                <column table="hr_reglament_pp" column="kod_reglament" />
              </call>
            </select>
            <from>
              <query name="hr_reglament_pp" />
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="hr_reglament_pp" column="kod_dog" />
                  <column table="kod_dog" column="kod_dog" />
                </call>
                <call function="=">
                  <column table="hr_reglament_pp" column="kod_sost" />
                  <const>1</const>
                </call>
                <call function="=">
                  <column table="hr_reglament_pp" column="kod_level" />
                  <const>2</const>
                </call>
              </call>
            </where>
          </query>
        </call>
        <call function="()" type="number" as="cnt_obj_regl" title="Количество активных регламентов объекта">
          <query name="cnt_obj_regl">
            <select>
              <call function="count">
                <column table="hro" column="kod_reglament_obj" />
              </call>
            </select>
            <from>
              <query name="hr_reglament_obj" as="hro">
                <link name="kod_reglament" as="hrp" />
              </query>
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="hrp" column="kod_dog" />
                  <column table="kod_dog" column="kod_dog" />
                </call>
                <call function="=">
                  <column table="hrp" column="kod_sost" />
                  <const>1</const>
                </call>
                <call function="=">
                  <column table="hro" column="kod_numobj" />
                  <column table="eo_id" column="kod_numobj" />
                </call>
              </call>
            </where>
          </query>
        </call>
        <band title="Данные из CC&amp;B">
          <column table="a" column="acct_id" type="string" data-size="256" title="" />
          <column table="a" column="eo_id" type="string" data-size="256" title="eo_id" />
          <column table="a" column="cp_id" type="string" data-size="256" title="cp_id" />
          <column table="a" column="dog_podr_name" type="string" data-size="256" title="Договорное подразделение" />
          <column table="a" column="account_number" type="string" data-size="256" title="Номер договора" />
          <column table="a" column="eo_code" type="string" data-size="256" title="Код объекта" />
          <column table="a" column="cp_num" type="string" data-size="256" title="Номер ТП" />
          <column table="a" column="cp_name" type="string" data-size="256" title="Наименование ТП" />
          <column table="a" column="cp_type" type="string" data-size="256" title="Тип ТП" />
          <column table="a" column="bal_border" type="string" data-size="256" title="Место разграничения бал. принадлежности (?)" />
          <column table="a" column="ik_cnt" type="string" data-size="256" title="Кол-во точек учета" />
          <column table="a" column="trans_out_cnt" type="string" data-size="256" title="Кол-во исходящих транзитов" />
          <column table="a" column="is_reserv" type="string" data-size="256" title="Признак резервной ТП" />
          <column table="a" column="pris_p" type="string" data-size="256" title="" />
          <column table="a" column="cp_max_p" type="string" data-size="256" title="Величина макс. мощности энергопринимающего устройства, кВт" />
          <column table="a" column="seti" type="string" data-size="256" title="Сетевая организация" />
          <column table="a" column="way_pris" type="string" data-size="256" title="Способ присоединения" />
          <column table="a" column="billable" type="string" data-size="256" title="Участие в расчетах (?)" />
          <column table="a" column="scm_el" type="string" data-size="256" title="" />
          <column table="a" column="agree_val_exists" type="string" data-size="256" title="" />
          <column table="a" column="campaing_name" type="string" data-size="256" title="" />
          <column table="a" column="urov_nap" type="string" data-size="256" title="Уровень напряжения" />
          <column table="a" column="pric_cat" type="string" data-size="256" title="Ценовая категория" />
          <column table="a" column="pric_cat_nvl" type="string" data-size="256" title="Ценовая категория" />
          <column table="a" column="region" type="string" data-size="256" title="Регион" />
          <column table="a" column="pwgrid" type="string" data-size="256" title="" />
          <column table="a" column="dog_type" type="string" data-size="256" title="Вид договора" />
          <column table="a" column="tax_type" type="string" data-size="256" title="Налогообложение" />
          <column table="a" column="tou_grp" type="string" data-size="256" title="Группа ТЗ (Группа тарифной зоны)" />
          <column table="a" column="cons_grp" type="string" data-size="256" title="Диапазон мощности" />
          <column table="a" column="gr_potrs_46" type="string" data-size="256" title="" />
          <column table="a" column="monouser" type="string" data-size="256" title="" />
          <column table="a" column="conn_spec" type="string" data-size="256" title="" />
          <column table="a" column="cp_zaj_p" type="string" data-size="256" title="Признак наличия на ТП договорных величин (?)" />
          <column table="a" column="st_flag" type="number" title="" />
        </band>
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="vcs_voltage" />
          <link name="eo_id">
            <link name="kr_numobj">
              <link name="kod_dog" />
            </link>
          </link>
          <link name="acct_id" exclude="1">
            <link name="kod_dog" />
          </link>
          <link name="reglament_key" />
          <link name="tarif_key" />
        </query>
      </from>
    </query>
    <query name="vci_kr_plan_sost" timestamp="04.10.2019 17:53:44" title="kr_plan_sost" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <call function="||-" as="kr_plan_sost_id" title="kr_plan_sost_id" key="1">
          <column table="a" column="cp_id" />
          <column table="this" column="tip_tarif_sost" />
        </call>
        <column table="a" column="cp_id" as="kr_plan_id" title="kr_plan_id" />
        <call function="nvl" as="tip_tarif_sost" title="tip_tarif_sost">
          <column table="sost" column="tip_tarif_sost" />
          <const>5</const>
        </call>
        <call function="()" type="number" as="tarif" title="tarif">
          <query name="tarif">
            <select>
              <column table="ks_tarif" column="tarif" />
            </select>
            <from>
              <query name="ks_tarif" />
            </from>
            <where>
              <call function="or">
                <call function="and">
                  <call function="ge">
                    <column table="a" column="pris_p_nvl_num" />
                    <call function="nvl0">
                      <column table="ks_tarif" column="val_from" />
                    </call>
                  </call>
                  <call function="or">
                    <call function="lt">
                      <column table="a" column="pris_p_nvl_num" />
                      <column table="ks_tarif" column="val_to" />
                    </call>
                    <call function="is null">
                      <column table="ks_tarif" column="val_to" />
                    </call>
                  </call>
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>5</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Алтайский край'</const>
                  </call>
                  <call function="in">
                    <column table="ks_tarif" column="tarif" />
                    <array comment="коды из KS_TARIF">502,503,504,505</array>
                  </call>
                </call>
                <call function="and">
                  <call function="ge">
                    <column table="a" column="pris_p_nvl_num" />
                    <call function="nvl0">
                      <column table="ks_tarif" column="val_from" />
                    </call>
                  </call>
                  <call function="or">
                    <call function="lt">
                      <column table="a" column="pris_p_nvl_num" />
                      <column table="ks_tarif" column="val_to" />
                    </call>
                    <call function="is null">
                      <column table="ks_tarif" column="val_to" />
                    </call>
                  </call>
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>5</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Республика Алтай'</const>
                  </call>
                  <call function="in">
                    <column table="ks_tarif" column="tarif" />
                    <array comment="коды из KS_TARIF">507,508,509,510</array>
                  </call>
                </call>
                <call function="and">
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>2</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Алтайский край'</const>
                  </call>
                  <call function="in">
                    <column table="a" column="pric_cat_nvl" />
                    <array comment="одноставочный">'I','II','III','V'</array>
                  </call>
                  <call function="=">
                    <column table="ks_tarif" column="tarif_parent" />
                    <const comment="коды из KS_TARIF">93053</const>
                  </call>
                  <call function="=">
                    <column table="vcs_voltage" column="voltage" />
                    <column table="ks_tarif" column="voltage" />
                  </call>
                </call>
                <call function="and">
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>2</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Алтайский край'</const>
                  </call>
                  <call function="in">
                    <column table="a" column="pric_cat_nvl" />
                    <array comment="двухставочный">'IV','VI'</array>
                  </call>
                  <call function="=">
                    <column table="ks_tarif" column="tarif_parent" />
                    <const comment="коды из KS_TARIF">93114</const>
                  </call>
                  <call function="=">
                    <column table="vcs_voltage" column="voltage" />
                    <column table="ks_tarif" column="voltage" />
                  </call>
                </call>
                <call function="and">
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>2</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Республика Алтай'</const>
                  </call>
                  <call function="in">
                    <column table="a" column="pric_cat_nvl" />
                    <array comment="одноставочный">'I','II','III','V'</array>
                  </call>
                  <call function="=">
                    <column table="ks_tarif" column="tarif_parent" />
                    <const comment="коды из KS_TARIF">80024</const>
                  </call>
                  <call function="=">
                    <column table="vcs_voltage" column="voltage" />
                    <column table="ks_tarif" column="voltage" />
                  </call>
                </call>
                <call function="and">
                  <call function="=">
                    <call function="nvl">
                      <column table="sost" column="tip_tarif_sost" />
                      <const>5</const>
                    </call>
                    <const>2</const>
                  </call>
                  <call function="=">
                    <column table="a" column="region" />
                    <const>'Республика Алтай'</const>
                  </call>
                  <call function="in">
                    <column table="a" column="pric_cat_nvl" />
                    <array comment="двухставочный">'IV','VI'</array>
                  </call>
                  <call function="=">
                    <column table="ks_tarif" column="tarif_parent" />
                    <const comment="коды из KS_TARIF">80030</const>
                  </call>
                  <call function="=">
                    <column table="vcs_voltage" column="voltage" />
                    <column table="ks_tarif" column="voltage" />
                  </call>
                </call>
              </call>
            </where>
          </query>
        </call>
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="eo_id" />
          <link name="vcr_tochk_post_err" />
          <link name="vcs_voltage" />
        </query>
        <query name="vcx_kr_plan_sost_add" as="sost" join="left outer">
          <call function="!=">
            <column table="a" column="dog_type" />
            <const>'Без услуг по передаче'</const>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_tochk_post_err" column="do_load_tarif" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vcx_kr_plan_sost_add" timestamp="23.07.2019 19:25:34" title="kr_plan_sost_add" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <call function="case" as="tip_tarif_sost" type="number">
          <call function="when">
            <call function="=">
              <call function="level" />
              <const>1</const>
            </call>
            <const comment="KK_TARIF_SOST">5</const>
          </call>
          <call function="when">
            <call function="=">
              <call function="level" />
              <const>2</const>
            </call>
            <const comment="KK_TARIF_SOST">2</const>
          </call>
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
      <connect>
        <call function="lt">
          <call function="level" />
          <const>3</const>
        </call>
      </connect>
    </query>
    <query name="vci_hr_reglament_pp" timestamp="04.10.2019 19:58:52" title="hr_reglament_pp" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="kod_dog" column="kod_dog" group="1" title="hr_reglament_pp_id" as="hr_reglament_pp_id" />
        <column table="kod_dog" column="kod_dog" group="1" title="kod_dog" />
        <call function="date to ym" as="ym_s" group="1">
          <column table="kod_dog" column="dat_dog" />
        </call>
        <const as="kod_level" type="number">2</const>
        <const as="kod_data" type="number">2</const>
        <const as="pr_ppp" type="number">2</const>
        <const as="edizm" type="number">4</const>
        <const as="kod_sost" type="number">1</const>
        <const as="kod_gr_power" comment="не важно при регламентах на точках" type="number">0</const>
        <call function="if" as="kod_gtp" group="1" type="number" title="kod_gtp">
          <call function="=">
            <column table="kod_dog" column="dep" />
            <const comment="филиал Горноалтайский">15235</const>
          </call>
          <const>2</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="acct_id" exclude="1">
            <link name="kod_dog" />
          </link>
          <link name="eo_id">
            <link name="kr_numobj">
              <link name="kod_dog" />
            </link>
          </link>
          <link name="vcr_tochk_post_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_tochk_post_err" column="do_create_reglament_parent" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vci_hr_reglament_obj" timestamp="11.10.2019 20:53:29" title="hr_reglament_obj" is-report="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="cp_id" as="hr_reglament_obj_id" title="hr_reglament_obj_id" />
        <column table="eo_id" column="kod_numobj" title="kod_numobj" />
        <call function="case" as="kod_kpotreb" title="kod_kpotreb" type="number">
          <call function="when">
            <call function="in">
              <column table="a" column="pric_cat_nvl" />
              <array>'I'</array>
            </call>
            <const comment="HK_KONTROL_POTREB">5</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="pric_cat_nvl" />
              <array>'II'</array>
            </call>
            <const comment="HK_KONTROL_POTREB">2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="pric_cat_nvl" />
              <array>'III','IV'</array>
            </call>
            <const comment="HK_KONTROL_POTREB">7</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="pric_cat_nvl" />
              <array>'V','VI'</array>
            </call>
            <const comment="HK_KONTROL_POTREB">3</const>
          </call>
        </call>
        <query as="kod_reglament" name="kod_reglament" title="kod_reglament">
          <select>
            <column table="hr_reglament_pp" column="kod_reglament" />
          </select>
          <from>
            <query name="hr_reglament_pp" />
          </from>
          <where>
            <call function="and">
              <call function="=">
                <column table="hr_reglament_pp" column="kod_dog" />
                <column table="kod_dog" column="kod_dog" />
              </call>
              <call function="=">
                <column table="hr_reglament_pp" column="kod_sost" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="hr_reglament_pp" column="kod_level" />
                <const>2</const>
              </call>
            </call>
          </where>
        </query>
        <const as="kod_market" type="number">2</const>
        <const as="kod_data" type="number">2</const>
        <const as="dolya" type="number">100</const>
        <const as="edizm" type="number">4</const>
        <const as="kod_sost" type="number">1</const>
        <call function="if" as="kod_gr_power" type="number" title="kod_gr_power">
          <call function="gt">
            <column table="a" column="pris_p" />
            <const>670</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="kod_gtp" type="number" title="kod_gtp">
          <call function="=">
            <column table="kod_dog" column="dep" />
            <const comment="филиал Горноалтайский">15235</const>
          </call>
          <const>2</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vccb_tochk_post" as="a">
          <link name="eo_id">
            <link name="kr_numobj">
              <link name="kod_dog" />
            </link>
          </link>
          <link name="acct_id" exclude="1">
            <link name="kod_dog" />
          </link>
          <link name="vcr_tochk_post_err" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="vcr_tochk_post_err" column="do_load_reglament" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="vci_kr_vist_day" timestamp="11.09.2019 17:30:31" is-report="1" title="kr_vist_day" file="sql.builder.templates\sql.builder\projects\bar_ccb\query\query.xml">
      <select>
        <column table="a" column="acct_id" as="kr_vist_day_id_pref" title="kr_vist_day_id_pref" />
        <column table="a" column="acct_id" as="kr_dorovor_id" title="kr_dorovor_id" />
        <column table="a" column="kod_dog" title="kod_dog" format="F0" />
        <call function="()" type="number" as="tep_el" title="tep_el" format="F0">
          <const>1</const>
        </call>
        <call function="()" type="number" as="vid_avans" title="vid_avans" format="F0">
          <const>52</const>
        </call>
        <call function="()" type="number" as="pr_vist_av" title="pr_vist_av" format="F0">
          <const>0</const>
        </call>
        <call function="()" type="number" as="pr_rasch_av" title="pr_rasch_av" format="F0">
          <const>2</const>
        </call>
        <call function="to_number" as="perc1">
          <column table="a" column="prc_avn1" />
        </call>
        <call function="to_number" as="perc2">
          <column table="a" column="prc_avn2" />
        </call>
        <call function="to_number" as="day1">
          <column table="a" column="d_zt_av1" />
        </call>
        <call function="to_number" as="day2">
          <column table="a" column="d_zt_av2" />
        </call>
        <column table="a" column="acct_id" title="acct_id" />
      </select>
      <from>
        <query name="vccb_dog" as="a">
          <link name="vcr_dog_err" />
          <link name="kod_dog" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="vcr_dog_err" column="do_load_vist_day" />
          </call>
        </call>
      </where>
    </query>
    <query name="vcj_hr_point_ini_valid" timestamp="05.02.2019 03:59:47" class="1" materialize="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\extension\vcj_hr_point_ini_valid.xml">
      <select>
        <column table="ik_id" column="kod_point" />
        <column table="a" column="kod_point_ini" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id" />
        </query>
        <query name="hr_point" as="kod_point" join="left outer">
          <call function="=">
            <column table="this" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hr_point_ini" as="kod_point_ini" join="left outer">
          <call function="=">
            <column table="this" column="kod_point_ini" />
            <column table="kod_point_ini" column="kod_point_ini" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_point_ini" />
          </call>
        </call>
      </where>
    </query>
    <query name="vci_decode" timestamp="12.02.2019 14:48:21" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\extension\vcj_hr_point_ini_valid.xml">
      <select>
        <column table="a" column="reg_id" />
        <column table="a" column="mtr_id" />
        <column table="a" column="eo_id" />
        <column table="a" column="acct_id" />
        <column table="a" column="kod_point_ini" />
        <column table="a" column="kod_point_en" />
        <column table="a" column="kod_point_pu" />
        <column table="ik_id" column="kod_point_tar" />
        <column table="ik_id" column="kod_point" />
        <column table="eo_id" column="kod_numobj" />
        <column table="eo_id" column="kod_obj" />
        <column table="acct_id" column="kod_dog" />
      </select>
      <from>
        <query name="vccb_pr_uch" as="a">
          <link name="ik_id">
            <link name="eo_id">
              <link name="acct_id" />
            </link>
          </link>
        </query>
      </from>
    </query>
    <query name="vccb_dft" class="1" title="Авансы sr_fac*" timestamp="05.09.2019 14:16:09" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_dft.xml">
      <select>
        <column table="a" column="dog_num" type="string" data-size="256" title="" />
        <column table="a" column="draft_outgoing_date" type="string" data-size="256" title="" />
        <column table="a" column="draft_num" type="string" data-size="256" title="" />
        <column table="a" column="draft_amt" type="string" data-size="256" title="" />
        <column table="a" column="debet" type="string" data-size="256" title="" />
        <column table="a" column="payed_amt" type="string" data-size="256" title="" />
        <column table="a" column="prepayed_amt" type="string" data-size="256" title="" />
        <column table="a" column="credit" type="string" data-size="256" title="" />
        <column table="a" column="balance" type="string" data-size="256" title="" />
        <column table="a" column="draft_state_status_descr" type="string" data-size="256" title="" />
        <column table="a" column="retail_type_descr" type="string" data-size="256" title="" />
        <column table="a" column="prc_avan" type="string" data-size="256" title="" />
        <column table="a" column="debt_transfer_amt" type="string" data-size="256" title="" />
        <column table="a" column="acknowledgement_amt" type="string" data-size="256" title="" />
        <column table="a" column="sinh_cur_amt" type="string" data-size="256" title="" />
        <column table="a" column="clear_cur_amt" type="string" data-size="256" title="" />
        <column table="a" column="acct_id" type="string" data-size="256" title="" />
        <column table="a" column="draft_id" type="string" data-size="256" column-mandatory="1" title="" />
        <column table="a" column="match_evt_id" type="string" data-size="256" title="" />
        <column table="a" column="style" type="string" data-size="256" title="" />
        <column table="a" column="has_acknowledgement" type="string" data-size="256" title="" />
        <column table="a" column="draft_status_cd" type="string" data-size="256" title="" />
        <column table="a" column="refound_amt" type="string" data-size="256" title="" />
        <column table="a" column="potreb" type="string" data-size="256" title="" />
        <column table="a" column="accounting_period_id" type="string" data-size="256" title="" />
        <column table="a" column="prep_dec_cur_amt" type="string" data-size="256" title="" />
        <column table="a" column="st_flag" type="number" title="" />
        <column table="a" column="ld_time" type="date" title="" />
        <call function="/" as="ym">
          <call function="cut_num">
            <call function="||">
              <call function="substr">
                <column table="a" column="accounting_period_id" type="string" data-size="256" title="" />
                <const>4</const>
                <const>4</const>
              </call>
              <call function="substr">
                <column table="a" column="accounting_period_id" type="string" data-size="256" title="" />
                <const>1</const>
                <const>2</const>
              </call>
            </call>
          </call>
          <const>100</const>
        </call>
        <call function="substr" as="vid_real_str">
          <column table="a" column="retail_type_descr" />
          <const>1</const>
          <call function="-">
            <call function="instr">
              <column table="a" column="retail_type_descr" />
              <const>' '</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="draft_id" as="avans_nachisl_id" />
        <call function="||-" as="sr_facvip_id">
          <column table="this" column="acct_id" />
          <column table="this" column="accounting_period_id" />
          <column table="this" column="vid_real_str" />
        </call>
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_dft" as="a" />
        <query name="vccb_dog" join="left outer" as="acct_id">
          <call function="=">
            <column table="a" column="acct_id" />
            <column table="acct_id" column="acct_id" />
          </call>
        </query>
        <query name="vcr_dft_err" join="left outer">
          <call function="=">
            <column table="this" column="draft_id" />
            <column table="vcr_dft_err" column="draft_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_dog" class="1" timestamp="05.09.2019 15:43:26" title="Договор" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_dog.xml">
      <select>
        <column table="a" column="acct_id" type="string" data-size="256" title="" comment="key" />
        <column table="a" column="account_number" type="string" data-size="256" column-mandatory="1" title="Номер договора" />
        <column table="a" column="acctstat" type="string" data-size="256" title="Статус договора" />
        <column table="a" column="eo_cnt" type="string" data-size="256" title="Кол-во ЭО" />
        <call function="to_number_dot" as="eo_cnt_n">
          <column table="this" column="eo_cnt" />
        </call>
        <column table="a" column="potr_short_name" type="string" data-size="256" title="Потребитель(наименование)" />
        <column table="a" column="potr_address" type="string" data-size="256" title="Индекс почтовый адрес потребителя" />
        <column table="a" column="setup_date" type="string" data-size="256" title="Дата оформления" />
        <call function="to_date" as="dat_dog">
          <call function="substr">
            <column table="this" column="setup_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'YYYY-MM-DD'</const>
        </call>
        <column table="a" column="finansir" type="string" data-size="256" title="Источник финансирования" />
        <column table="a" column="dog_form" type="string" data-size="256" title="Форма договора" />
        <column table="a" column="kls_oesk" type="string" data-size="256" title="Классификатор потребителей" />
        <column table="a" column="dogpogr_short_name" type="string" data-size="256" title="Договорное подразделение" />
        <column table="a" column="insp_short_name" type="string" data-size="256" title="Специалист по договору(?)" />
        <column table="a" column="calcpodr_short_name" type="string" data-size="256" title="Расчетное подразделение" />
        <column table="a" column="estim_short_name" type="string" data-size="256" title="Специалист по расчету(?)" />
        <column table="a" column="wrt1_short_name" type="string" data-size="256" title="Подписант" />
        <column table="a" column="wrt2_short_name" type="string" data-size="256" title="Подписант от потребителя" />
        <column table="a" column="paye_bank" type="string" data-size="256" title="Банк получателя" />
        <column table="a" column="paye_account" type="string" data-size="256" title="Счет получателя" />
        <column table="a" column="cust_bank" type="string" data-size="256" title="Банк потребителя" />
        <column table="a" column="cust_account" type="string" data-size="256" title="Счет потребителя" />
        <column table="a" column="access_group" type="string" data-size="256" title="" />
        <column table="a" column="mkt_subj" type="string" data-size="256" title="Субъект розничного рынка" />
        <column table="a" column="pr_min" type="string" data-size="256" title="Министерство" />
        <column table="a" column="region" type="string" data-size="256" title="Регион" />
        <column table="a" column="dog_net" type="string" data-size="256" title="" />
        <column table="a" column="denzadol" type="string" data-size="256" title="День наступления задолженности" />
        <column table="a" column="prc_avn1" type="string" data-size="256" title="Процент для аванса 1" />
        <column table="a" column="d_zt_av1" type="string" data-size="256" title="Аванс 1. Дата задолженности" />
        <column table="a" column="prc_avn2" type="string" data-size="256" title="Процент для аванса 2" />
        <column table="a" column="d_zt_av2" type="string" data-size="256" title="Аванс 2. Дата задолженности" />
        <column table="a" column="dy_peni" type="string" data-size="256" title="Кол-во дней для расчета ПЕНИ" />
        <column table="a" column="fineallf" type="string" data-size="256" title="Метод расчета ПЕНИ" />
        <column table="a" column="finans_lim" type="string" data-size="256" title="Размер бизнеса (?)" />
        <column table="a" column="rel_side" type="string" data-size="256" title="Связанные стороны" />
        <column table="a" column="grpol_short_name" type="string" data-size="256" title="Грузополучатель" />
        <column table="a" column="plat_short_name" type="string" data-size="256" title="Плательщик" />
        <column table="a" column="plat_address" type="string" data-size="256" title="Индекс Почтовый адрес плательщика" />
        <column table="a" column="payr_bank" type="string" data-size="256" title="Банк плательщика" />
        <column table="a" column="payr_account" type="string" data-size="256" title="Счет плательщика" />
        <column table="a" column="stv_peni" type="string" data-size="256" title="" />
        <column table="a" column="st_flag" type="number" title="" />
        <column table="a" column="u4astok" />
        <column table="a" column="u4astok_name" />
        <column table="vcx_dog_kod" column="kod_dog" />
        <column table="vcs_dep" column="dep" />
        <column table="vcx_dog_kod" column="cnt" as="cnt_dog" />
        <column table="vcs_dep" column="kod_vdog" />
        <column table="vcx_dog_kod" column="k_dog" />
        <call function="decode" as="pr_active" type="number">
          <column table="this" column="acctstat" />
          <const>'Активный'</const>
          <const>0</const>
          <const>'Удаленный'</const>
          <const>1</const>
          <const>'Новый'</const>
          <const>2</const>
          <const>'Переоформление на новое юр.лицо (старый номер договора)'</const>
          <const>3</const>
          <const>-1</const>
        </call>
        <column table="kod_dog" column="kodp" />
        <call function="nvl" type="string" as="nump">
          <column table="kodp" column="nump" />
          <column table="this" column="account_number" />
        </call>
        <call function="nvl" type="string" as="payer_name">
          <column table="kodp" column="name" />
          <column table="this" column="potr_short_name" />
        </call>
        <call function="nvl" type="string" as="payer_allname">
          <column table="kodp" column="allname" />
          <column table="this" column="potr_short_name" />
        </call>
        <call function="nvl" type="number" as="kod_d">
          <column table="kodp" column="kod_d" />
          <column table="vcs_glob" column="kodd" />
        </call>
        <call function="nvl" type="number" as="kod_d_ur">
          <column table="kodp" column="kod_d_ur" />
          <column table="vcs_glob" column="kodd" />
        </call>
        <call function="nvl" type="number" as="kod_d_p">
          <column table="kodp" column="kod_d_p" />
          <column table="vcs_glob" column="kodd" />
        </call>
        <call function="nvl" type="number" as="kod_fs">
          <column table="kodp" column="kod_fs" />
          <column table="vcs_glob" column="kod_fs" />
        </call>
        <call function="nvl" type="number" as="kod_m">
          <column table="kodp" column="kod_m" />
          <column table="vcs_glob" column="kod_m" />
        </call>
        <call function="nvl" type="number" as="kod_otrasl">
          <column table="kodp" column="kod_otrasl" />
          <column table="vcs_glob" column="kod_otrasl" />
        </call>
        <call as="kr_payer_id" type="string" function="if">
          <call function="is not null">
            <column table="this" column="kodp" />
          </call>
          <call function="||">
            <const>'A'</const>
            <column table="this" column="kodp" />
          </call>
          <call function="||">
            <const>'B'</const>
            <column table="this" column="acct_id" />
          </call>
        </call>
        <column table="vcr_dog_err" column="do_load" />
        <column table="vcs_ist_fin" column="kod_ist" />
        <column table="vcx_bpol_kod" column="kodbpol" />
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_dog" as="a" />
        <query join="left outer" name="vcx_dog_kod">
          <call function="=">
            <column table="this" column="acct_id" />
            <column table="vcx_dog_kod" column="acct_id" />
          </call>
        </query>
        <query join="left outer" name="vcs_dep">
          <call function="=">
            <column table="this" column="dogpogr_short_name" />
            <column table="vcs_dep" column="name" />
          </call>
        </query>
        <query join="left outer" name="kr_org" as="dep">
          <call function="=">
            <column table="this" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query join="left outer" name="kr_dogovor" as="kod_dog">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query join="left outer" name="kr_payer" as="kodp">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="vcs_glob" as="vcs_glob" join="left outer">
          <call function="true" />
        </query>
        <query name="vcr_dog_err" as="vcr_dog_err" join="left outer">
          <call function="=">
            <column table="this" column="acct_id" />
            <column table="vcr_dog_err" column="acct_id" />
          </call>
        </query>
        <query name="vcs_ist_fin" join="left outer">
          <call function="=">
            <column table="this" column="finansir" />
            <column table="vcs_ist_fin" column="name" />
          </call>
        </query>
        <query name="vcx_bpol_kod" join="left outer">
          <call function="=nvl">
            <column table="vcx_bpol_kod" column="rs" />
            <column table="this" column="paye_account" />
          </call>
        </query>
        <query join="left outer" name="vci_kr_payer" exclude="1">
          <call function="=">
            <column table="this" column="kr_payer_id" />
            <column table="vci_kr_payer" column="kr_payer_id" />
          </call>
        </query>
        <query join="left outer" name="vci_kr_dogovor" exclude="1">
          <call function="=">
            <column table="this" column="acct_id" />
            <column table="vci_kr_dogovor" column="kr_dogovor_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_fee" class="1" timestamp="26.09.2019 22:11:13" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_fee.xml">
      <select>
        <column table="a" column="dog_num" type="string" data-size="256" title="Номер договора" comment="v+" />
        <column table="a" column="person_name" type="string" data-size="256" title="Абонент" comment="vt" />
        <column table="a" column="cm_eo_code" type="string" data-size="256" title="Код объекта" comment="?" />
        <column table="a" column="eo_name" type="string" data-size="256" title="Объект" comment="rt" />
        <column table="a" column="cm_address_descr" type="string" data-size="256" title="Адрес" comment="rt" />
        <column table="a" column="cm_consumption_period_id" type="string" data-size="256" title="Период потребления" comment="r+" />
        <column table="a" column="accounting_period_id" type="string" data-size="256" title="Период выставления" comment="v+" />
        <column table="a" column="cm_quantity" type="string" data-size="256" title="Количество" comment="r+" />
        <column table="a" column="cm_price_amount" type="string" data-size="256" title="Цена" comment="r+" />
        <column table="a" column="cur_amt" type="string" data-size="256" title="Сумма" comment="r+" />
        <column table="a" column="vid_nach_descr" type="string" data-size="256" title="Вид начисления" comment="r+" />
        <column table="a" column="cm_price_category_flg" type="string" data-size="256" title="Ценовая категория" comment="-" />
        <column table="a" column="voltage_level_descr" type="string" data-size="256" title="Уровень напряжения" comment="rt" />
        <column table="a" column="tou_descr" type="string" data-size="256" title="Зона суток" comment="rt" />
        <column table="a" column="acct_id" type="string" data-size="256" title="acct_id" comment="+" />
        <column table="a" column="ft_id" type="string" data-size="256" column-mandatory="1" title="ft_id" comment="+" key="1" />
        <column table="a" column="cm_vid_nach" type="string" data-size="256" title="Код вида начисления" comment="+" />
        <column table="a" column="st_flag" type="number" title="st_flag" comment="1=новый;2=не новый;3=удален" />
        <column table="a" column="ld_time" type="date" title="" />
        <call function="||-" as="sr_facvip_id">
          <column table="this" column="acct_id" />
          <column table="this" column="accounting_period_id" />
          <column table="sk_nachisl" column="vid_real" />
        </call>
        <column table="sk_nachisl" column="vid_real" comment="v" />
        <column table="sk_nachisl" column="vid_t" comment="r+" />
        <column table="vcs_voltage" column="voltage" />
        <column table="vcs_interval" column="kodinterval" />
        <call function="/" as="rym">
          <call function="cut_num">
            <column table="this" column="cm_consumption_period_id" />
          </call>
          <const>100</const>
        </call>
        <call function="/" as="ym">
          <call function="cut_num">
            <column table="this" column="accounting_period_id" />
          </call>
          <const>100</const>
        </call>
        <column table="this" column="ft_id" as="sr_facras_id" title="sr_facras_id" />
        <call function="to_number_sep" as="cust" title="cust">
          <column table="this" column="cm_quantity" />
        </call>
        <call function="to_number_sep" as="price" title="price">
          <column table="this" column="cm_price_amount" />
        </call>
        <call function="to_number_sep" as="nachisl" title="nachisl">
          <column table="this" column="cur_amt" />
        </call>
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="cm_vid_nach_fixed" title="Код вида начисления">
          <call function="=">
            <column table="a" column="cm_vid_nach" />
            <const>'92'</const>
          </call>
          <const>'22'</const>
          <column table="a" column="cm_vid_nach" />
        </call>
      </select>
      <from>
        <table name="vccb_fee" as="a" />
        <query name="vccb_dog" join="left outer" as="acct_id">
          <call function="=">
            <column table="a" column="acct_id" />
            <column table="acct_id" column="acct_id" />
          </call>
        </query>
        <query name="sk_nachisl" join="left outer">
          <call function="=">
            <column table="sk_nachisl" column="num_t" />
            <column table="this" column="cm_vid_nach_fixed" />
          </call>
        </query>
        <query name="vcs_voltage" join="left outer">
          <call function="=">
            <column table="this" column="voltage_level_descr" />
            <column table="vcs_voltage" column="name" />
          </call>
        </query>
        <query join="left outer" name="vcs_interval">
          <call function="=">
            <call type="" function="nvl">
              <column table="this" column="tou_descr" as="" type="" />
              <const>'-'</const>
            </call>
            <call type="" function="nvl">
              <column table="vcs_interval" column="name" as="" type="" />
              <const>'-'</const>
            </call>
          </call>
        </query>
        <query name="vcr_fee_err" join="left outer">
          <call function="=">
            <column table="this" column="ft_id" />
            <column table="vcr_fee_err" column="ft_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_izm_compl" class="1" title="Измерительный комплекс" timestamp="05.09.2019 15:53:14" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_izm_compl.xml">
      <select>
        <column table="a" column="acct_id" type="string" data-size="256" title="" />
        <column table="a" column="eo_id" type="string" data-size="256" title="" />
        <column table="a" column="cp_id" type="string" data-size="256" title="" />
        <column table="a" column="ik_id" type="string" data-size="256" column-mandatory="1" title="" comment="key" key="1" />
        <column table="a" column="dog_podr_name" type="string" data-size="256" title="Договорное подразделение" />
        <column table="a" column="account_number" type="string" data-size="256" title="Номер договора" />
        <column table="a" column="eo_code" type="string" data-size="256" title="Код объекта" />
        <column table="a" column="cp_num" type="string" data-size="256" title="Номер ТП" />
        <column table="a" column="tu_num" type="string" data-size="256" title="Номер ИК" />
        <column table="a" column="tu_name" type="string" data-size="256" title="Наименование ИК" />
        <call as="tu_name_s" function="substr" title="name">
          <column table="this" column="tu_name" as="" type="" />
          <const>0</const>
          <const>210</const>
        </call>
        <column table="a" column="tu_type" type="string" data-size="256" title="Тип ИК" />
        <column table="a" column="creation_date" type="string" data-size="256" title="Дата создания" />
        <call function="to_date" as="creation_date_d">
          <call function="substr">
            <column table="this" column="creation_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'DD.MM.YYYY'</const>
        </call>
        <column table="a" column="trans_out_cnt" type="string" data-size="256" title="Кол-во исходящих транзитов" />
        <column table="a" column="im_name" type="string" data-size="256" title="Метод измерения" />
        <column table="a" column="im_start_date" type="string" data-size="256" title="Дата начала действия метода" />
        <call function="to_date" as="im_start_date_d">
          <call function="substr">
            <column table="this" column="im_start_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'YYYY-MM-DD'</const>
        </call>
        <call function="latest" as="im_start_date_d_lt">
          <column table="this" column="im_start_date_d" />
          <call function="ym begin time">
            <column table="kr_calc_dep_max" column="ym" />
          </call>
        </call>
        <column table="a" column="tarif_date" type="string" data-size="256" title="Дата назначения тарифа" />
        <call function="to_date" as="tarif_date_d">
          <call function="substr">
            <column table="this" column="tarif_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'YYYY-MM-DD'</const>
        </call>
        <column table="a" column="price_type" type="string" data-size="256" title="Тип цены" />
        <column table="a" column="mtr_present" type="string" data-size="256" title="Наличие приборов учета" />
        <column table="a" column="bezdisp" type="string" data-size="256" title="Бездоговорное использование (?)" />
        <column table="a" column="ppb" type="string" data-size="256" title="Положение по балансу (?)" />
        <column table="a" column="urov_nap" type="string" data-size="256" title="Уровень напряжения" />
        <column table="vcs_voltage" column="voltage" />
        <column table="a" column="k_hr_den" type="string" data-size="256" title="Кол-во часов работы в день" />
        <column table="a" column="k_free" type="string" data-size="256" title="Кол-во выходных" />
        <column table="a" column="note" type="string" data-size="256" title="Комментарий" />
        <column table="a" column="contr_tu_num" type="string" data-size="256" title="Номер ТУ сетевой организации (?)" />
        <column table="a" column="perem_rs" type="string" data-size="256" title="" />
        <column table="a" column="watt_tu" type="string" data-size="256" title="Мощность ТУ (кВт)" />
        <column table="a" column="optmark" type="string" data-size="256" title="Принадлежность к оптовому рынку" />
        <column table="a" column="fix_ptr" type="string" data-size="256" title="Потери (фикс. а,кВт)" />
        <column table="a" column="st_flag" type="number" title="" />
        <column table="vcx_point_kod" column="kod_point" />
        <column table="vcx_point_kod" column="cnt" as="cnt_point" />
        <column table="vcx_point_kod" column="kod_point_har" />
        <column table="vcx_point_kod" column="kod_point_tar" />
        <column table="this" column="tu_num" as="nomer" />
        <call function="nvl" type="date" as="dat_s">
          <column table="hr_point" column="dat_s" />
          <column table="this" column="creation_date_d" />
        </call>
        <column table="vcr_ik_err" column="do_load" />
        <call function="sysdate" as="dat" />
        <call function="decode" type="number" as="method_ccb">
          <column table="this" column="im_name" />
          <const>'По приборам учета'</const>
          <const>1</const>
          <const>'Фиксированный расход'</const>
          <const>2</const>
          <const>'Процент от старшей'</const>
          <const>2</const>
          <const>'Транзит без связи'</const>
          <const>2</const>
          <const>'По сообщению'</const>
          <const>3</const>
        </call>
        <call function="decode" type="number" as="kod_polbalans_ccb">
          <column table="this" column="ppb" />
          <const>'ПОСЛЕ'</const>
          <const>3</const>
          <const>'ДО'</const>
          <const>2</const>
          <const>1</const>
        </call>
        <call function="nvl" type="number" as="method">
          <column table="hr_point_har" column="method" />
          <column table="this" column="method_ccb" />
        </call>
        <call function="nvl" type="number" as="kod_polbalans">
          <column table="this" column="kod_polbalans_ccb" />
          <column table="hr_point_har" column="kod_polbalans" />
        </call>
        <column table="vcx_point_kod" column="k_point" />
        <column table="vcx_point_kod" column="k_tar" />
        <column table="vcx_point_kod" column="k_har" />
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_izm_compl" as="a" />
        <query name="vccb_obj" join="left outer" as="eo_id">
          <link name="acct_id">
            <link name="vcs_dep">
              <link name="kr_calc_dep_max" />
            </link>
          </link>
          <call function="=">
            <column table="a" column="eo_id" />
            <column table="eo_id" column="eo_id" />
          </call>
        </query>
        <query join="left outer" name="vcx_point_kod">
          <call function="=">
            <column table="this" column="ik_id" />
            <column table="vcx_point_kod" column="ik_id" />
          </call>
        </query>
        <query join="left outer" name="hr_point">
          <call function="=">
            <column table="this" column="kod_point" />
            <column table="hr_point" column="kod_point" />
          </call>
        </query>
        <query join="left outer" name="hr_point_har">
          <call function="=">
            <column table="this" column="kod_point_har" />
            <column table="hr_point_har" column="kod_point_har" />
          </call>
        </query>
        <query join="left outer" name="hr_point_tar">
          <call function="=">
            <column table="this" column="kod_point_tar" />
            <column table="hr_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="vcs_voltage" join="left outer">
          <call function="=">
            <column table="this" column="urov_nap" />
            <column table="vcs_voltage" column="name" />
          </call>
        </query>
        <query name="vcr_ik_err" join="left outer">
          <call function="=">
            <column table="this" column="ik_id" />
            <column table="vcr_ik_err" column="ik_id" />
          </call>
        </query>
        <query name="vcs_glob" as="vcs_glob" join="left outer">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="vccb_obj" class="1" timestamp="05.09.2019 16:06:40" title="Энергообъект" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_obj.xml">
      <select>
        <column table="a" column="eo_id" type="string" data-size="256" column-mandatory="1" title="" comment="key" key="1" />
        <column table="a" column="acct_id" type="string" data-size="256" title="" />
        <column table="a" column="dog_podr_name" type="string" data-size="256" title="Договорное подразделение" comment="-" />
        <column table="a" column="account_number" type="string" data-size="256" title="Номер договора" comment="-" />
        <column table="a" column="eo_code" type="string" data-size="256" title="Код объекта" comment="s" />
        <call function="cut_num" as="num_obj_x">
          <call function="substr">
            <column table="this" column="eo_code" />
            <call type="" function="-nvl">
              <call function="length" as="" type="">
                <column table="this" column="eo_code" />
              </call>
              <const>3</const>
            </call>
            <const>4</const>
          </call>
        </call>
        <call function="cut_num" as="num_obj_x" exclude="1">
          <call function="substr">
            <column table="this" column="eo_code" />
            <const>15</const>
            <const>4</const>
          </call>
        </call>
        <column table="a" column="eo_name" type="string" data-size="256" title="Наименование объекта" comment="v+" />
        <call function="substr" as="eo_name_s">
          <column table="this" column="eo_name" />
          <const>1</const>
          <const>150</const>
        </call>
        <column table="a" column="address" type="string" data-size="256" title="Адрес объекта" comment="v" />
        <column table="a" column="creation_date" type="string" data-size="256" title="Дата создания" comment="v+" />
        <call function="to_date" as="creation_date_d">
          <call function="substr">
            <column table="this" column="creation_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'DD.MM.YYYY'</const>
        </call>
        <column table="a" column="start_date" type="string" data-size="256" title="Дата включения в договор" comment="v" />
        <call function="to_date" as="start_date_d">
          <call function="substr">
            <column table="this" column="start_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'DD.MM.YYYY'</const>
        </call>
        <column table="a" column="pr_outag" type="string" data-size="256" title="" comment="-" />
        <column table="a" column="no_print" type="string" data-size="256" title="Печатать в приложениях" comment="-" />
        <column table="a" column="billable" type="string" data-size="256" title="Участие в расчетах (?)" comment="?" />
        <column table="a" column="tp_cnt" type="string" data-size="256" title="Количество точек поставки" comment="-" />
        <column table="a" column="trans_in_cnt" type="string" data-size="256" title="Количество входящих транзитов" comment="-" />
        <column table="a" column="trans_out_cnt" type="string" data-size="256" title="Количество исходящих транзитов" comment="-" />
        <column table="a" column="seti" type="string" data-size="256" title="Сетевая организация" comment="?" />
        <column table="a" column="pril6" type="string" data-size="256" title="Приложение 6" />
        <column table="a" column="in_ogr_chain" type="string" data-size="256" title="" />
        <column table="a" column="in_break_chain" type="string" data-size="256" title="" />
        <column table="a" column="kch_ext" type="string" data-size="256" title="Категория внешней схемы (?)" />
        <column table="a" column="kch_int" type="string" data-size="256" title="Категория внутренней схемы (?)" />
        <column table="a" column="lim_turn" type="string" data-size="256" title="" />
        <column table="a" column="limit_eo" type="string" data-size="256" />
        <column table="a" column="close_date" type="string" data-size="256" title="Дата прекращения обслуживания" comment="v+" />
        <call function="to_date" as="close_date_d">
          <call function="substr">
            <column table="this" column="close_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'DD.MM.YYYY'</const>
        </call>
        <column table="a" column="is_mkd" type="string" data-size="256" title="Объект является МКД (?)" comment="?" />
        <column table="a" column="cp_max_p" type="string" data-size="256" title="Величина макс. мощности, кВт" comment="?" />
        <column table="a" column="pris_p" type="string" data-size="256" title="" />
        <column table="a" column="st_flag" type="number" title="" />
        <call function="nvl" type="string" as="name">
          <column table="kr_numobj" column="name" />
          <column table="this" column="eo_name_s" />
        </call>
        <call function="nvl" type="date" as="dat_create">
          <column table="kr_numobj" column="dat_create" />
          <column table="this" column="creation_date_d" />
        </call>
        <column table="this" column="close_date_d" as="dat_fin" />
        <column table="acct_id" column="kod_dog" />
        <call function="if" as="pr_active" type="number">
          <call function="le">
            <column table="this" column="close_date_d" />
            <call function="sysdate" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="vcx_numobj_kod" column="kod_numobj" />
        <column table="kr_numobj" column="kod_obj" />
        <column table="vcx_numobj_kod" column="cnt" as="cnt_numobj" />
        <column table="vcr_obj_err" column="do_load" />
        <call function="nvl" type="number" as="kodd">
          <column table="kod_obj" column="kodd" />
          <column table="vcs_glob" column="kodd" />
        </call>
        <call as="kr_object_id" type="string" function="if">
          <call function="is not null">
            <column table="this" column="kod_obj" />
          </call>
          <call function="||">
            <const>'A'</const>
            <column table="this" column="kod_obj" />
          </call>
          <call function="||">
            <const>'B'</const>
            <column table="this" column="eo_id" />
          </call>
        </call>
        <column table="vcx_numobj_kod" column="key_inner" />
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_obj" as="a" />
        <query name="vccb_dog" join="left outer" as="acct_id">
          <call function="=">
            <column table="a" column="acct_id" />
            <column table="acct_id" column="acct_id" />
          </call>
        </query>
        <query join="left outer" name="vcx_numobj_kod">
          <call function="=">
            <column table="this" column="eo_id" />
            <column table="vcx_numobj_kod" column="eo_id" />
          </call>
        </query>
        <query join="left outer" name="kr_numobj">
          <link name="kod_obj" />
          <call function="=">
            <column table="this" column="kod_numobj" />
            <column table="kr_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="vcr_obj_err" join="left outer">
          <call function="=">
            <column table="this" column="eo_id" />
            <column table="vcr_obj_err" column="eo_id" />
          </call>
        </query>
        <query name="vcs_glob" as="vcs_glob" join="left outer">
          <call function="true" />
        </query>
        <query join="left outer" name="vci_kr_numobj" exclude="1">
          <call function="=">
            <column table="this" column="eo_id" />
            <column table="vci_kr_numobj" column="kr_numobj_id" />
          </call>
        </query>
        <query join="left outer" name="vci_kr_object" exclude="1">
          <call function="=">
            <column table="this" column="eo_id" />
            <column table="vci_kr_numobj" column="kr_numobj_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_pay" class="1" timestamp="05.09.2019 14:29:27" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_pay.xml">
      <select>
        <column table="a" column="person_name" type="string" data-size="256" title="Абонент" comment="-" />
        <column table="a" column="pay_doc_num" type="string" data-size="256" title="Номер документа оплаты" comment="+" />
        <column table="a" column="cm_send_date" type="string" data-size="256" title="cm_send_date" comment="(+)Дата, пустых нет" />
        <call function="to_date" as="dat_opl" comment="+">
          <call function="substr">
            <column table="this" column="cm_send_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'YYYY-MM-DD'</const>
        </call>
        <call function="date to ym" as="ym" comment="+">
          <column table="this" column="dat_opl" />
        </call>
        <column table="a" column="draft_prep_period" type="string" data-size="256" title="draft_prep_period (пусто)" comment="- (null)" />
        <column table="a" column="dog_num" type="string" data-size="256" title="Номер договора" comment="+" />
        <column table="a" column="invsum_20" type="string" data-size="256" title="invsum_20" comment="- (null)" />
        <column table="a" column="freezed_by" type="string" data-size="256" title="freezed_by" comment="- ФИО/Тестовый Алтай/Миграция Финансовая" />
        <column table="a" column="pay_item_descr" type="string" data-size="256" title="pay_item_descr" comment="(+)1 Оплата за электроэнергию" />
        <column table="a" column="pay_type_descr" type="string" data-size="256" title="Форма оплаты" comment="(-) (через pay_mode_descr) 0 Денежные средства, Не определено" />
        <column table="a" column="inv_num" type="string" data-size="256" title="inv_num" comment="- num/num" />
        <column table="a" column="payment_ability" type="string" data-size="256" title="payment_ability" comment="- (null)" />
        <column table="a" column="draft_date" type="string" data-size="256" title="draft_date Дата счета (?)" comment="- Есть пустые" />
        <column table="a" column="cm_nds_amt_18" type="string" data-size="256" title="НДС по ставке 18%" comment="(+)" />
        <column table="a" column="tender_type_descr" type="string" data-size="256" title="tender_type_descr" comment="(-) (через pay_mode_descr) 002 Платежное поручение/Взаимозачет/Не определено/Наличные" />
        <column table="a" column="accounting_dt" type="string" data-size="256" title="accounting_dt" comment="- дата" />
        <column table="a" column="pay_mode_descr" type="string" data-size="256" title="Вид оплаты" comment="(+)002 Платежное поручение/Взаимозачет/Не определено/Наличные" />
        <column table="a" column="cm_freezed_dttm" type="string" data-size="256" title="cm_freezed_dttm" comment="- дата" />
        <column table="a" column="pay_dt" type="string" data-size="256" title="pay_dt" comment="- Есть пустые, дата" />
        <column table="a" column="acct_id" type="string" data-size="256" title="acct_id" comment="+" />
        <column table="a" column="invsum_18" type="string" data-size="256" title="invsum_18" comment=" - похоже на сумму банковской оплаты" />
        <column table="a" column="cm_retail_type" type="string" data-size="256" title="Вид реализации " comment="(+) 0 7 9 2" />
        <column table="a" column="draft_num" type="string" data-size="256" title="draft_num" comment="- номер, есть пустые" />
        <column table="a" column="cm_nds_amt_20" type="string" data-size="256" title="НДС по ставке 20%" comment="(+)" />
        <column table="a" column="inv_date" type="string" data-size="256" title="inv_date" comment="- Есть пустые" />
        <column table="a" column="per_id" type="string" data-size="256" title="per_id" comment="-" />
        <column table="a" column="evt_dt" type="string" data-size="256" title="evt_dt" comment="- Дата, пустых нет" />
        <column table="a" column="payment_type" type="string" data-size="256" title="Тип оплаты" comment="(+) Погашение авансом Погашение переплатой Сторно переплат Отмена оплаты Оплата Сторно аванса" />
        <column table="a" column="cm_pay_purpose" type="string" data-size="256" title="cm_pay_purpose" comment="+ Назначение платежа текстом" />
        <column table="a" column="pay_id" type="string" data-size="256" column-mandatory="1" title="pay_id" key="1" comment="+" />
        <column table="a" column="cur_amt" type="string" data-size="256" title="Сумма оплаты (?)" comment="+ сумма" />
        <column table="a" column="inv_period" type="string" data-size="256" title="inv_period" comment="- Год месяц, есть пустые" />
        <column table="a" column="cm_bank_acct_stat_det_payer" type="string" data-size="256" title="cm_bank_acct_stat_det_payer" comment="+ Похоже на наименование абонента" />
        <column table="a" column="draft_state_descr" type="string" data-size="256" title="draft_state_descr" comment="(null)/клиентский зал(25)/Не задано" />
        <column table="a" column="cm_consumption_period_id" type="string" data-size="256" title="cm_consumption_period_id" comment="- Год месяц, есть пустые" />
        <column table="a" column="agrement_dep_name" type="string" data-size="256" title="Наименование отделения" comment="- отделение" />
        <column table="a" column="bank_name" type="string" data-size="256" title="Банк" comment="(+)6 вариантов (банк, в который пришла оплата)" />
        <column table="a" column="st_flag" type="number" title="" comment="- 1" />
        <column table="a" column="ld_time" type="date" title="" comment="- дата выгрузки" />
        <column table="a" column="pay_id" type="string" data-size="256" column-mandatory="1" title="sr_opl_bank_id" as="sr_opl_bank_id" comment="+" />
        <column table="vcs_dest_opl" column="kod_dest" comment="+" />
        <column table="vcs_vidopl" column="kod_vidopl" comment="+" />
        <column table="vcs_bpol" column="kodbpol" comment="+" />
        <column table="vcs_vid_real" column="vid_real" comment="+" />
        <column table="vcs_type_opl" column="kod_type_opl" comment="+" />
        <call function="if" as="opls" title="Сторно аванса" comment="+" type="string" exclude="1">
          <call function="=">
            <column table="this" column="kod_type_opl" />
            <const>6</const>
          </call>
          <column table="a" column="cur_amt" />
          <call function="null" />
        </call>
        <call function="if" as="opl" title="Сумма оплаты" comment="+" type="string" exclude="1">
          <call function="!=">
            <column table="this" column="kod_type_opl" />
            <const>6</const>
          </call>
          <column table="a" column="cur_amt" />
          <const>'0'</const>
        </call>
        <call function="null" type="number" as="opls" />
        <column table="a" column="cur_amt" as="opl" />
        <call function="case" as="tax" title="tax (sr_opl_nal)" comment="+" type="string">
          <call function="when">
            <call function="!=">
              <column table="a" column="cm_nds_amt_18" />
              <const>'0'</const>
            </call>
            <const>'18'</const>
          </call>
          <call function="when">
            <call function="!=">
              <column table="a" column="cm_nds_amt_20" />
              <const>'0'</const>
            </call>
            <const>'20'</const>
          </call>
          <call function="else">
            <const>'0'</const>
          </call>
        </call>
        <call function="case" as="nal" title="nal (sr_opl_nal)" comment="+" type="string">
          <call function="when">
            <call function="!=">
              <column table="a" column="cm_nds_amt_18" />
              <const>'0'</const>
            </call>
            <column table="a" column="cm_nds_amt_18" />
          </call>
          <call function="when">
            <call function="!=">
              <column table="a" column="cm_nds_amt_20" />
              <const>'0'</const>
            </call>
            <column table="a" column="cm_nds_amt_20" />
          </call>
          <call function="else">
            <const>'0'</const>
          </call>
        </call>
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_pay" as="a" />
        <query name="vccb_dog" join="left outer" as="acct_id">
          <call function="=">
            <column table="a" column="acct_id" />
            <column table="acct_id" column="acct_id" />
          </call>
        </query>
        <query name="vcr_pay_err" join="left outer">
          <call function="=">
            <column table="this" column="pay_id" />
            <column table="vcr_pay_err" column="pay_id" />
          </call>
        </query>
        <query name="vcs_dest_opl" join="left outer">
          <call function="=">
            <column table="this" column="pay_item_descr" />
            <column table="vcs_dest_opl" column="name" />
          </call>
        </query>
        <query name="vcs_vidopl" join="left outer">
          <call function="=">
            <column table="this" column="pay_mode_descr" />
            <column table="vcs_vidopl" column="name" />
          </call>
        </query>
        <query name="vcs_bpol" join="left outer">
          <call function="=">
            <column table="a" column="bank_name" />
            <column table="vcs_bpol" column="name" />
          </call>
        </query>
        <query name="vcs_vid_real" join="left outer">
          <call function="=">
            <column table="a" column="cm_retail_type" />
            <column table="vcs_vid_real" column="name" />
          </call>
        </query>
        <query join="left outer" name="vcs_type_opl">
          <call function="=">
            <column table="a" column="payment_type" />
            <column table="vcs_type_opl" column="name" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_pr_uch" class="1" timestamp="05.09.2019 16:14:56" title="Прибор учета" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_pr_uch.xml">
      <select>
        <column table="a" column="acct_id" type="string" data-size="256" title="" />
        <column table="a" column="eo_id" type="string" data-size="256" title="" />
        <column table="a" column="cp_id" type="string" data-size="256" title="" />
        <column table="a" column="ik_id" type="string" data-size="256" title="" />
        <column table="a" column="mtr_id" type="string" data-size="256" title="" comment="key" />
        <column table="a" column="reg_id" type="string" data-size="256" column-mandatory="1" title="" key="1" />
        <column table="a" column="dog_podr_name" type="string" data-size="256" title="Договорное подразделение" />
        <column table="a" column="account_number" type="string" data-size="256" title="Номер договора" />
        <column table="a" column="eo_code" type="string" data-size="256" title="Код объекта" />
        <column table="a" column="cp_num" type="string" data-size="256" title="Номер ТП" />
        <column table="a" column="tu_num" type="string" data-size="256" title="Номер ИК" />
        <column table="a" column="mfg_name" type="string" data-size="256" title="Производитель ПУ (?)" />
        <column table="a" column="model_name" type="string" data-size="256" title="Модель" />
        <column table="a" column="config_type" type="string" data-size="256" title="Тип конфигурации" />
        <column table="a" column="serial_nbr" type="string" data-size="256" title="Серийный номер" />
        <column table="a" column="badge_nbr" type="string" data-size="256" title="Инвентаризационный номер" />
        <column table="a" column="i_nommak" type="string" data-size="256" title="Ток номинальный\максимальный" />
        <column table="a" column="u_nommak" type="string" data-size="256" title="Напряжение номинальное\максимальное" />
        <column table="a" column="receive_date" type="string" data-size="256" title="Дата получения" />
        <column table="a" column="config_date" type="string" data-size="256" title="Дата конфигурации" />
        <column table="a" column="setup_date" type="string" data-size="256" title="Дата установки" />
        <call function="to_date" as="setup_date_d">
          <call function="substr">
            <column table="this" column="setup_date" />
            <const>0</const>
            <const>10</const>
          </call>
          <const>'YYYY-MM-DD'</const>
        </call>
        <column table="a" column="bal_prin" type="string" data-size="256" title="Балансовая принадлежность" />
        <column table="a" column="exp_otv" type="string" data-size="256" title="Эксплуатационная ответственность" />
        <column table="a" column="vid_rash" type="string" data-size="256" title="vid_rash" />
        <column table="a" column="mpi_let" type="string" data-size="256" title="" />
        <column table="a" column="god_vpsk" type="string" data-size="256" title="Год выпуска" />
        <column table="a" column="pp_god" type="string" data-size="256" title="Год ПП" />
        <call as="pp_god_n" type="string" title="Год ПП" function="cut_num">
          <column table="a" column="pp_god" type="" data-size="256" as="" />
        </call>
        <column table="a" column="pp_kvart" type="string" data-size="256" title="Квартал ПП" />
        <call as="pp_kvart_n" type="string" title="Квартал ПП" function="cut_num">
          <column table="a" column="pp_kvart" type="" data-size="256" as="" />
        </call>
        <column table="a" column="primechn" type="string" data-size="256" title="Примечание" />
        <column table="a" column="uom_cd" type="string" data-size="256" title="uom_cd" />
        <call function="decode" as="energy_ccb" type="number">
          <column table="this" column="uom_cd" />
          <const>'A+'</const>
          <const>1</const>
          <const>'A-'</const>
          <const>1</const>
          <const>'R+'</const>
          <const>2</const>
          <const>'R-'</const>
          <const>2</const>
        </call>
        <call function="decode" as="kod_directen_ccb" type="number">
          <column table="this" column="uom_cd" />
          <const>'A+'</const>
          <const>1</const>
          <const>'A-'</const>
          <const>2</const>
          <const>'R+'</const>
          <const>1</const>
          <const>'R-'</const>
          <const>2</const>
        </call>
        <column table="a" column="reg_const" type="string" data-size="256" title="Расчетный коэфициент(?)" />
        <call function="to_number_dot" as="reg_const_n">
          <column table="this" column="reg_const" />
        </call>
        <column table="a" column="mr_date" type="string" data-size="256" title="Дата снятия установочных показаний (?)" />
        <column table="a" column="read_type_flg" type="string" data-size="256" title="Вид показаний (?)" />
        <column table="a" column="reg_reading" type="string" data-size="256" title="Значение показания (?)" />
        <call function="to_number_dot" as="reg_reading_n">
          <column table="this" column="reg_reading" />
        </call>
        <column table="a" column="tou_cd" type="string" data-size="256" title="Тарифная зона" />
        <column table="vcs_interval" column="kodinterval" />
        <column table="a" column="st_flag" type="number" title="" />
        <call function="ym begin time" as="dat">
          <column table="kr_calc_dep_max" column="ym" />
        </call>
        <column table="vcx_pu_kod" column="kod_point_pu" />
        <column table="vcx_pu_kod" column="kod_pu_u" />
        <column table="vcx_pu_kod" column="kod_point_en" />
        <column table="vcx_ini_kod" column="kod_point_ini" />
        <column table="vcx_pu_kod" column="cnt" as="cnt_pu" />
        <column table="vcx_pu_kod" column="k_pu" />
        <column table="vcx_pu_kod" column="k_en" />
        <column table="vcx_ini_kod" column="k_ini" />
        <call function="nvl" as="kod_bal" type="number">
          <column table="hr_point_pu" column="kod_bal" />
          <column table="vcs_bal_pr" column="kod_bal" />
        </call>
        <call function="nvl" as="kod_expl" type="number">
          <column table="hr_point_pu" column="kod_expl" />
          <column table="vcs_bal_pr_e" column="kod_bal" />
        </call>
        <column table="vcr_pu_err" column="do_load" />
        <call as="kod_tippu" type="number" title="kod_tippu" function="if">
          <call function="is not null">
            <column table="vcx_pu_kod" column="k_pu" />
          </call>
          <call function="coalesce" as="" type="">
            <column table="vcx_tip_pu_kod" column="kod_tippu" />
            <column table="hr_pu_u" column="kod_tippu" />
            <column table="vcs_glob" column="kod_tippu" />
          </call>
          <call function="coalesce" as="" type="">
            <column table="hr_pu_u" column="kod_tippu" />
            <column table="vcx_tip_pu_kod" column="kod_tippu" />
            <column table="vcs_glob" column="kod_tippu" />
          </call>
        </call>
        <call function="||-" as="hr_pu_u_id" exclude="1">
          <column table="this" column="kod_pu_u" title="kod_pu_u" />
          <column table="a" column="serial_nbr" as="hr_pu_u_id" title="hr_pu_u_id" />
          <column table="this" column="kod_tippu" />
        </call>
        <call as="hr_pu_u_id" type="string" function="if">
          <call function="is not null">
            <column table="this" column="kod_pu_u" />
          </call>
          <call function="||">
            <const>'A'</const>
            <column table="this" column="kod_pu_u" />
          </call>
          <call function="||">
            <const>'B'</const>
            <column table="this" column="mtr_id" />
          </call>
        </call>
        <call function="nvl" as="nom_pu" type="string" title="nom_pu">
          <column table="hr_pu_u" column="nom_pu" />
          <column table="this" column="serial_nbr" />
        </call>
        <call as="god_pp" type="number" title="god_pp" function="nvl">
          <column table="this" column="pp_god_n" as="" type="" />
          <column table="hr_pu_u" column="god_pp" />
        </call>
        <call as="kvartal_pp" type="number" title="kvartal_pp" function="nvl">
          <column table="this" column="pp_kvart_n" as="" type="" />
          <column table="hr_pu_u" column="kvartal_pp" />
        </call>
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="vccb_pr_uch" as="a" />
        <query name="vccb_izm_compl" join="left outer" as="ik_id">
          <link name="eo_id">
            <link name="acct_id">
              <link name="vcs_dep">
                <link name="kr_calc_dep_max" />
              </link>
            </link>
          </link>
          <call function="=">
            <column table="a" column="ik_id" />
            <column table="ik_id" column="ik_id" />
          </call>
        </query>
        <query join="left outer" name="vcx_pu_kod">
          <call function="=">
            <column table="this" column="reg_id" />
            <column table="vcx_pu_kod" column="reg_id" />
          </call>
        </query>
        <query join="left outer" name="vcx_ini_kod">
          <call function="=">
            <column table="this" column="reg_id" />
            <column table="vcx_ini_kod" column="reg_id" />
          </call>
        </query>
        <query join="left outer" name="vcx_tip_pu_kod">
          <call function="=">
            <column table="this" column="reg_id" />
            <column table="vcx_tip_pu_kod" column="reg_id" />
          </call>
        </query>
        <query join="left outer" name="hr_point_pu">
          <call function="=">
            <column table="this" column="kod_point_pu" />
            <column table="hr_point_pu" column="kod_point_pu" />
          </call>
        </query>
        <query join="left outer" name="hr_point_en">
          <call function="=">
            <column table="this" column="kod_point_en" />
            <column table="hr_point_en" column="kod_point_en" />
          </call>
        </query>
        <query join="left outer" name="hr_point_ini">
          <call function="=">
            <column table="this" column="kod_point_ini" />
            <column table="hr_point_ini" column="kod_point_ini" />
          </call>
        </query>
        <query join="left outer" name="hr_pu_u">
          <call function="=">
            <column table="this" column="kod_pu_u" />
            <column table="hr_pu_u" column="kod_pu_u" />
          </call>
        </query>
        <query join="left outer" name="vcs_interval">
          <call function="=">
            <call type="" function="nvl">
              <column table="this" column="tou_cd" as="" type="" />
              <const>'-'</const>
            </call>
            <call type="" function="nvl">
              <column table="vcs_interval" column="name" as="" type="" />
              <const>'-'</const>
            </call>
          </call>
        </query>
        <query join="left outer" name="vcs_bal_pr">
          <call function="=">
            <column table="this" column="bal_prin" />
            <column table="vcs_bal_pr" column="name" />
          </call>
        </query>
        <query join="left outer" name="vcs_bal_pr" as="vcs_bal_pr_e">
          <call function="=">
            <column table="this" column="exp_otv" />
            <column table="vcs_bal_pr_e" column="name" />
          </call>
        </query>
        <query name="vcs_glob" as="vcs_glob" join="left outer">
          <call function="true" />
        </query>
        <query name="vcr_pu_err" join="left outer">
          <call function="=">
            <column table="this" column="reg_id" />
            <column table="vcr_pu_err" column="reg_id" />
          </call>
        </query>
        <query name="vcj_pu_err_simple" join="left outer">
          <call function="=">
            <column table="this" column="reg_id" />
            <column table="vcj_pu_err_simple" column="reg_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vccb_tochk_post" class="1" title="Точка поставки" timestamp="04.10.2019 18:12:50" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vccb_tochk_post.xml">
      <select>
        <column table="a" column="acct_id" type="string" data-size="256" title="" />
        <column table="a" column="eo_id" type="string" data-size="256" title="" />
        <column table="a" column="cp_id" type="string" data-size="256" column-mandatory="1" title="" comment="key" key="1" />
        <column table="a" column="dog_podr_name" type="string" data-size="256" title="Договорное подразделение" />
        <column table="a" column="account_number" type="string" data-size="256" title="Номер договора" />
        <column table="a" column="eo_code" type="string" data-size="256" title="Код объекта" />
        <column table="a" column="cp_num" type="string" data-size="256" title="Номер ТП" />
        <column table="a" column="cp_name" type="string" data-size="256" title="Наименование ТП" />
        <column table="a" column="cp_type" type="string" data-size="256" title="Тип ТП" />
        <column table="a" column="bal_border" type="string" data-size="256" title="Место разграничения бал. принадлежности (?)" />
        <column table="a" column="ik_cnt" type="string" data-size="256" title="Кол-во точек учета" />
        <column table="a" column="trans_out_cnt" type="string" data-size="256" title="Кол-во исходящих транзитов" />
        <column table="a" column="is_reserv" type="string" data-size="256" title="Признак резервной ТП" />
        <column table="a" column="pris_p" type="string" data-size="256" title="" />
        <column table="a" column="cp_max_p" type="string" data-size="256" title="Величина макс. мощности энергопринимающего устройства, кВт" />
        <column table="a" column="seti" type="string" data-size="256" title="Сетевая организация" />
        <column table="a" column="way_pris" type="string" data-size="256" title="Способ присоединения" />
        <column table="a" column="billable" type="string" data-size="256" title="Участие в расчетах (?)" />
        <column table="a" column="scm_el" type="string" data-size="256" title="" />
        <column table="a" column="agree_val_exists" type="string" data-size="256" title="" />
        <column table="a" column="campaing_name" type="string" data-size="256" title="" />
        <column table="a" column="urov_nap" type="string" data-size="256" title="Уровень напряжения" />
        <column table="a" column="pric_cat" type="string" data-size="256" title="Ценовая категория" />
        <column table="a" column="region" type="string" data-size="256" title="Регион" />
        <column table="a" column="pwgrid" type="string" data-size="256" title="" />
        <column table="a" column="dog_type" type="string" data-size="256" title="Вид договора" />
        <column table="a" column="tax_type" type="string" data-size="256" title="Налогообложение" />
        <column table="a" column="tou_grp" type="string" data-size="256" title="Группа ТЗ (Группа тарифной зоны)" />
        <column table="a" column="cons_grp" type="string" data-size="256" title="Диапазон мощности" />
        <column table="a" column="gr_potrs_46" type="string" data-size="256" title="" />
        <column table="a" column="monouser" type="string" data-size="256" title="" />
        <column table="a" column="conn_spec" type="string" data-size="256" title="" />
        <column table="a" column="cp_zaj_p" type="string" data-size="256" title="Признак наличия на ТП договорных величин (?)" />
        <column table="a" column="st_flag" type="number" title="" />
        <column table="vcx_point_kod" column="kod_point" />
        <column table="vcx_point_kod" column="cnt" as="cnt_point" />
        <column table="eo_id" column="kod_numobj" />
        <call function="to_number" as="pris_p_nvl_num">
          <call function="nvl">
            <column table="a" column="pris_p" />
            <const>'0'</const>
          </call>
        </call>
        <call function="if" as="deleted">
          <call function="=">
            <column table="a" column="st_flag" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="nvl" as="pric_cat_nvl">
          <column table="a" column="pric_cat" />
          <const>'I'</const>
        </call>
      </select>
      <from>
        <table name="vccb_tochk_post" as="a" />
        <query name="vccb_obj" join="left outer" as="eo_id">
          <call function="=">
            <column table="a" column="eo_id" />
            <column table="eo_id" column="eo_id" />
          </call>
        </query>
        <query name="vccb_dog" join="left outer" as="acct_id">
          <call function="=">
            <column table="a" column="acct_id" />
            <column table="acct_id" column="acct_id" />
          </call>
        </query>
        <query name="vcr_tochk_post_err" join="left outer">
          <call function="=">
            <column table="this" column="cp_id" />
            <column table="vcr_tochk_post_err" column="cp_id" />
          </call>
        </query>
        <query name="vcs_voltage" join="left outer">
          <call function="=">
            <column table="a" column="urov_nap" />
            <column table="vcs_voltage" column="name" />
          </call>
        </query>
        <query name="vcp_keys" join="left outer" as="tarif_key">
          <call function="and">
            <call function="=">
              <column table="tarif_key" column="key_outer" />
              <column table="a" column="cp_id" />
            </call>
            <call function="=">
              <column table="tarif_key" column="key_name_inner" />
              <const>'KOD_PLAN'</const>
            </call>
          </call>
        </query>
        <query name="vcp_keys" join="left outer" as="reglament_key">
          <call function="and">
            <call function="=">
              <column table="tarif_key" column="key_outer" />
              <column table="a" column="cp_id" />
            </call>
            <call function="=">
              <column table="tarif_key" column="key_name_inner" />
              <const>'KOD_REGLAMENT_OBJ'</const>
            </call>
          </call>
        </query>
        <query join="left outer" name="vcx_point_kod">
          <call function="=">
            <column table="this" column="cp_id" />
            <column table="vcx_point_kod" column="cp_id" />
          </call>
        </query>
        <query join="left outer" name="hr_point">
          <call function="=">
            <column table="this" column="kod_point" />
            <column table="hr_point" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcp_keys" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcp_keys.xml">
      <select>
        <call function="||-" as="vcp_keys_id" type="string" key="1">
          <column table="a" column="key_name_outer" />
          <column table="a" column="key_name_inner" />
          <column table="a" column="key_outer" />
        </call>
        <column table="a" column="key_name_outer" type="string" data-size="256" column-mandatory="1" title="" />
        <column table="a" column="key_name_inner" type="string" data-size="256" column-mandatory="1" title="" />
        <column table="a" column="key_outer" type="string" data-size="256" column-mandatory="1" title="" />
        <column table="a" column="key_inner" type="number" title="" />
      </select>
      <from>
        <table name="vcp_keys" as="a" />
      </from>
    </query>
    <query name="vcs_bal_pr" timestamp="01.02.2019 03:16:45" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_bal_pr.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kod_bal" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_bal_pr" as="a" />
        <query name="kk_bal" as="kod_bal" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_bal" />
            <column table="kod_bal" column="kod_bal" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_bpol" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_bpol.xml">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" title="" />
        <column table="a" column="kodbpol" type="number" title="" />
        <column table="a" column="name" type="string" data-size="300" title="Наименование" comment="Идентификатор в CCnB" />
      </select>
      <from>
        <table name="vcs_bpol" as="a" />
        <query name="ks_bankpol" as="kodbpol" join="left outer">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_dep" timestamp="04.02.2019 20:13:19" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_dep.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="dep" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
        <column table="a" column="kod_vdog" type="number" comment="код вида договора" />
      </select>
      <from>
        <table name="vcs_dep" as="a" />
        <query name="kr_dep" as="dep" join="left outer" title="Отделение" dname="kr_dog_dep" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" title="Отделение" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
        <query name="ks_vdog" as="kod_vdog" join="left outer">
          <call function="=">
            <column table="a" column="kod_vdog" />
            <column table="kod_vdog" column="kod_vdog" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_dest_opl" timestamp="25.02.2019 17:29:46" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_dest_opl.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kod_dest" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_dest_opl" as="a" />
        <query name="ss_dest_opl" as="kod_dest" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Назначение платежа">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_glob" timestamp="05.02.2019 23:00:19" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_glob.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kod_fs" type="number" />
        <column table="a" column="kodd" type="number" title="Адрес">
          <listquery>
            <query name="k_house-list3" />
          </listquery>
        </column>
        <column table="a" column="kod_m" type="number" title="Министерство" />
        <column table="a" column="kod_otrasl" type="number" title="Отрасль" />
        <column table="a" column="vid_pl" type="number" title="Вид платежного документа" />
        <column table="a" column="kod_bzad" type="number" title="День наступления задолженности" />
        <column table="a" column="eobj_id" type="number" title="Энергообъект">
          <listquery>
            <query name="vcf_eobj_list" />
          </listquery>
        </column>
        <column table="a" column="kod_tippu" type="number" title="Код типа ПУ" format="F0" />
        <column table="a" type="number" format="F0" title="Разрядность целой части" column="razr" />
        <column table="a" type="number" format="F0" title="Разрядность дробной части" column="razr2" />
        <column table="a" type="number" format="F0" column="tarif" title="Тариф" />
        <column table="a" type="number" format="F0" column="kodbpol" title="Банк получателя (если пусто)" exclude="1" />
      </select>
      <from>
        <table name="vcs_glob" as="a" />
        <query name="ks_fs" as="kod_fs" join="left outer" dname="kr_dog_dep" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="kod_fs" />
            <column table="kod_fs" column="kod_fs" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_dog_dep" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="ks_ministry" as="kod_m" join="left outer" dname="kr_dog_dep" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="ks_otrasl" as="kod_otrasl" join="left outer" dname="kr_dog_dep" ConstrDelOption="set null">
          <call function="=">
            <column table="a" column="kod_otrasl" />
            <column table="kod_otrasl" column="kod_otrasl" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="hr_eobject" as="eobj_id" join="left outer">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" exclude="1">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_hr_point_tar_tar" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_hr_point_tar_tar.xml">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" title="" />
        <column table="a" column="voltage" type="number" title="" />
        <column table="a" column="dep" type="number" title="" />
        <column table="a" column="tarif" type="number" title="" />
      </select>
      <from>
        <table name="vcs_hr_point_tar_tar" as="a" />
        <query name="ks_tarif" as="tarif" join="left outer">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_interval" timestamp="03.02.2019 02:37:15" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_interval.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kodinterval" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_interval" as="a" />
        <query name="kk_interval" as="kodinterval" join="left outer">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_ist_fin" timestamp="30.01.2019 17:35:05" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_ist_fin.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kod_ist" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_ist_fin" as="a" />
        <query name="ks_istfin" as="kod_ist" join="left outer" title="Источник финансировния" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_type_opl" class="1" timestamp="05.03.2019 15:31:15" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_type_opl.xml">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" title="" />
        <column table="a" column="kod_type_opl" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Наименование" comment="Идентификатор в CCnB" />
      </select>
      <from>
        <table name="vcs_type_opl" as="a" />
        <query name="sk_type_opl" as="kod_type_opl" join="left outer">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_vidopl" timestamp="25.02.2019 17:46:22" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_vidopl.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="kod_vidopl" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_vidopl" as="a" />
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Вид оплаты">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_vid_real" class="1" timestamp="05.03.2019 15:31:15" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_vid_real.xml">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" title="" />
        <column table="a" column="vid_real" type="number" title="" />
        <column table="a" column="name" type="string" data-size="300" title="Наименование" comment="Идентификатор в CCnB" />
      </select>
      <from>
        <table name="vcs_vid_real" as="a" />
        <query name="sk_vid_real" as="vid_real" join="left outer">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
      </from>
    </query>
    <query name="vcs_voltage" timestamp="03.02.2019 01:49:41" class="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\scheme\original\vcs_voltage.xml">
      <select>
        <column table="a" column="id" type="number" key="1" />
        <column table="a" column="voltage" type="number" />
        <column table="a" column="name" type="string" data-size="300" title="Идентификатор в CC&amp;B" index="1" />
      </select>
      <from>
        <table name="vcs_voltage" as="a" />
        <query name="hk_voltage" as="voltage" join="left outer">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id" />
  <views child-name="view" key-name="id" />
  <reports child-name="report" key-name="name" />
  <forms child-name="form" key-name="name">
    <form name="vcf_dep" timestamp="30.01.2019 17:02:13" title="Отделения" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <toolbar>
            <uicommand button-type="grid-add" />
            <uicommand button-type="grid-delete" />
          </toolbar>
          <columns>
            <column table="a" column="name" column-width="475" />
            <column table="a" column="name_ccb" column-width="233" />
            <column table="a" column="kod_vdog" title="Вид договора" column-width="182" />
            <column table="a" column="vcs_dep" column-visible="0" />
            <column table="a" column="vcs_dep_id" column-visible="0" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcf_kr_org_dep_x" as="a" />
      </from>
    </form>
    <form name="vcf_glob" timestamp="04.02.2019 18:35:12" title="Голобальные" show-toolbar="1" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <column table="a" column="kod_fs" column-width="475" />
        <column table="a" column="kodd" column-width="475" />
        <column table="a" column="kod_m" column-width="475" />
        <column table="a" column="kod_otrasl" column-width="475" />
        <column table="a" column="vid_pl" column-width="475" />
        <column table="a" column="kod_bzad" column-width="475" />
        <column table="a" column="eobj_id" column-width="475" />
        <column table="a" column="kod_tippu" column-width="475" format="F0" />
        <column table="a" column="razr" column-width="475" format="F0" />
        <column table="a" column="razr2" column-width="475" format="F0" />
        <column table="a" column="tarif" column-width="475" format="F0" />
      </content>
      <from>
        <query name="vcs_glob" as="a" />
      </from>
    </form>
    <form name="vcf_ist_fin" timestamp="30.01.2019 17:35:05" title="Источники финансирования" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <toolbar>
            <uicommand button-type="grid-add" />
            <uicommand button-type="grid-delete" />
          </toolbar>
          <columns>
            <column table="a" column="name" column-width="475" />
            <column table="a" column="name_ccb" column-width="233" />
            <column table="a" column="vcs_ist_fin_id" column-visible="0" />
            <column table="a" column="kod_ist_x" column-visible="0" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcf_ist_x" as="a" />
      </from>
    </form>
    <form name="vcf_ist_fin2" timestamp="30.01.2019 17:35:05" title="Источники финансирования" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" />
            <column table="a" column="kod_ist" column-width="475" title="Источник финансирования" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_ist_fin" as="a" />
      </from>
    </form>
    <form name="vcf_bal_pr" timestamp="01.02.2019 03:58:08" title="Балансовая принадлежность" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="176" />
            <column table="a" column="kod_bal" column-width="242" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_bal_pr" as="a" />
      </from>
    </form>
    <form name="vcf_voltage" timestamp="21.02.2019 18:58:01" title="Уровень напряжения" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="176" />
            <column table="a" column="voltage" column-width="242" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_voltage" as="a" />
      </from>
    </form>
    <form name="vcf_interval" timestamp="03.02.2019 02:43:30" title="Зона суток" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="176" />
            <column table="a" column="kodinterval" column-width="242" title="Зона суток" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_interval" as="a" />
      </from>
    </form>
    <form name="vcf_dest_opl" timestamp="25.02.2019 17:27:44" title="Назначение платежа" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" />
            <column table="a" column="kod_dest" column-width="475" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_dest_opl" as="a" />
      </from>
    </form>
    <form name="vcf_vidopl" timestamp="25.02.2019 17:45:22" title="Вид оплаты" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" />
            <column table="a" column="kod_vidopl" column-width="475" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_vidopl" as="a" />
      </from>
    </form>
    <form name="vcf_bpol" timestamp="05.04.2019 16:17:47" title="Банк получателя" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" title="Идентификатор в CC&amp;B" />
            <column table="a" column="kodbpol" column-width="475" title="Код банка получателя" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_bpol" as="a" />
      </from>
    </form>
    <form name="vcf_vid_real" timestamp="05.04.2019 16:18:18" title="Вид реализации" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" title="Идентификатор в CC&amp;B" />
            <column table="a" column="vid_real" column-width="475" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_vid_real" as="a" />
      </from>
    </form>
    <form name="vcf_type_opl" timestamp="05.04.2019 16:18:27" title="Тип оплаты" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="name" column-width="475" title="Идентификатор в CC&amp;B" />
            <column table="a" column="kod_type_opl" column-width="475" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_type_opl" as="a" />
      </from>
    </form>
    <form name="vcf_hr_point_tar_tar" timestamp="22.05.2019 19:05:54" title="Тариф точки" file="sql.builder.templates\sql.builder\projects\bar_ccb\form\form.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <columns>
            <column table="a" column="voltage" column-width="475" />
            <column table="a" column="dep" column-width="475" title="Код подразделения">
              <listquery>
                <query name="kr_dep" />
              </listquery>
            </column>
            <column table="a" column="tarif" column-width="475" title="Код тарифа" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vcs_hr_point_tar_tar" as="a" />
      </from>
    </form>
  </forms>
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name" />
  <dimension-packages child-name="dimension-package" key-name="name" />
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id" />
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>