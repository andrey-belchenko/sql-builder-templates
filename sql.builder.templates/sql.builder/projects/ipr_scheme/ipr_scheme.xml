<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-06-29T01:41:07.3599405+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="as_sert_power_dop_contract" timestamp="28.02.2019 16:40:36" class="1" comment="альтернатива is_ad_read.f_get_sert_power включает старые и новые атп" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\as_sert_power.xml" haskeys="1">
      <select>
        <column table="a" column="kn_sert_power" type="number" key="1" as="kn_sert_power" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" />
        <column table="a" column="kn_service" type="number" title="" as="kn_service" />
        <column table="a" column="dt_reg" type="date" title="Дата регистрации" as="dt_reg" />
        <column table="a" column="act_perform" type="number" title="" as="act_perform" />
        <column table="a" column="regnum_ks" type="string" title="" as="regnum_ks" />
        <column table="a" column="dt_reg_ks" type="date" title="" as="dt_reg_ks" />
        <column table="a" column="dt_delivery" type="date" title="Дата выдачи АТП" is-fact="1" agg="max" as="dt_delivery" fact="as_sert_power_dop_contract_dt_delivery" />
        <column table="a" column="m_user" type="string" title="" as="m_user" />
        <column table="a" column="m_time" type="date" title="" as="m_time" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="dt_expire" type="date" title="" as="dt_expire" />
        <column table="a" column="power" type="number" title="" as="power" />
        <column table="a" column="power_units" type="string" title="" as="power_units" />
        <column table="a" column="kn_atp_period" type="number" title="" as="kn_atp_period" />
        <column table="a" column="kn_atp_state" type="number" title="" as="kn_atp_state" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="kodd" type="number" title="" as="kodd" />
        <column table="a" column="num_ask" type="string" title="" as="num_ask" />
        <column table="a" column="dt_ask" type="date" title="" as="dt_ask" />
        <column table="a" column="atp_load1" type="number" title="" as="atp_load1" />
        <column table="a" column="atp_load2" type="number" title="" as="atp_load2" />
        <column table="a" column="atp_load3" type="number" title="" as="atp_load3" />
        <column table="a" column="fl_feature" type="number" title="" as="fl_feature" />
        <column table="a" column="feature" type="string" title="" as="feature" />
        <column table="a" column="load_point" type="string" title="" as="load_point" />
        <column table="a" column="buh_check_prizn" type="number" title="" as="buh_check_prizn" />
        <column table="a" column="kod_dop_contract" type="number" title="" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="vid_atp" type="string" title="Вид АТП" is-fact="1" agg="max" as="vid_atp" fact="as_sert_power_dop_contract_vid_atp" />
      </select>
      <from>
        <query as="a">
          <union>
            <query>
              <select>
                <column table="a" column="*" as="*" />
                <column table="kod_atp_dop_info" column="kod_dop_contract" as="kod_dop_contract" />
              </select>
              <from>
                <query as="a" name="as_sert_power">
                  <link name="kod_atp_dop_info" join="inner" as="kod_atp_dop_info" table="is_atp_dop_info" child="as_sert_power" field="kod_atp_dop_info" parent="is_atp_dop_info" back="as_sert_power" />
                </query>
              </from>
              <where>
                <call function="and">
                  <call function="is not null">
                    <column table="kod_atp_dop_info" column="kod_dop_contract" />
                  </call>
                </call>
              </where>
            </query>
            <query>
              <select>
                <column table="a" column="*" as="*" />
                <column table="kod_dop_contract" column="kod_dop_contract" as="kod_dop_contract" />
              </select>
              <from>
                <query as="a" name="as_sert_power">
                  <link name="kod_atp_dop_info" as="kod_atp_dop_info" table="is_atp_dop_info" child="as_sert_power" field="kod_atp_dop_info" parent="is_atp_dop_info" back="as_sert_power" />
                </query>
                <query name="is_dop_contract" as="kod_dop_contract" join="left outer" title="Абонентские договоры">
                  <call function="=">
                    <column table="kod_dop_contract" column="kn_req" />
                    <column table="a" column="kn_request" />
                  </call>
                </query>
              </from>
              <where>
                <call function="and">
                  <call function="is null">
                    <column table="kod_atp_dop_info" column="kod_dop_contract" />
                  </call>
                  <call function="is not null">
                    <column table="kod_dop_contract" column="kod_dop_contract" />
                  </call>
                </call>
              </where>
            </query>
          </union>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="as_sert_power_dop_contract" title="Абонентские договоры">
          <call function="=">
            <column table="kod_dop_contract" column="kod_dop_contract" />
            <column table="a" column="kod_dop_contract" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_dop_contract" dimension="1" />
      </links>
    </query>
    <query name="buh_akts_atp" inherit="buh_akts" timestamp="02.08.2016 13:00:54" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\buh_akts.xml" haskeys="1">
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="dat_buh" />
          </call>
          <call function="=1">
            <column table="this" column="pr_contr" />
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod" type="number" title="" comment="идентификатор строки" as="kod" key="1" fixed="1" />
        <column table="a" column="pr_contr" type="number" title="" comment="признак дог присоед(1-прис,0-подряд)" as="pr_contr" key="0" />
        <column table="a" column="kod_kr" type="number" comment="уникальный код контрагента" as="kod_kr" key="0" />
        <column table="a" column="kod_dog" type="number" comment="уникальный код договора" as="kod_dog" key="0" />
        <column table="a" column="kod_vip_dog" type="number" comment="уникальный код документа" as="kod_vip_dog" key="0" />
        <column table="a" column="kod_direct" type="number" comment="структурное подразд(организация)" as="kod_direct" key="0" />
        <column table="a" column="kod_budget" type="number" comment="статья пдфс(код из спр.бюджета)" as="kod_budget" key="0" />
        <column table="a" column="kod_smet" type="number" comment="статья сметы(код из справ затрат)" as="kod_smet" key="0" />
        <column table="a" column="num_doc" type="string" title="" comment="№ плат документа(вх.номер)" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата документа(вх.номер)" as="dat_doc" key="0" />
        <column table="a" column="vid_rab" type="string" title="" comment="вид работы" as="vid_rab" key="0" />
        <column table="a" column="prizn_zakr" type="number" title="" comment="признак закрытия аванса" as="prizn_zakr" key="0" />
        <column table="a" column="sum_akt" type="number" title="" comment="сумма акта" as="sum_akt" key="0" />
        <column table="a" column="nds" type="number" title="" comment="сумма ндс" as="nds" key="0" />
        <column table="a" column="bez_nds" type="number" title="" comment="сумма без ндс" as="bez_nds" key="0" />
        <column table="a" column="proc" type="number" title="" comment="% ндс" as="proc" key="0" />
        <column table="a" column="dat_copy_kido" type="date" title="" comment="дата копирования в кидо" as="dat_copy_kido" key="0" />
        <column table="a" column="dat_m_copy" type="date" title="" comment="дата принятия корректировки в кидо" as="dat_m_copy" key="0" />
        <column table="a" column="dat_buh" type="date" title="Дата принятия акта бухгалтерией" comment="дата принятия акта бухгалтерией" as="dat_buh" key="0" />
        <column table="a" column="buh_id" type="string" title="" comment="уникальный номер 1-с акта" as="buh_id" key="0" />
        <column table="a" column="dat_sys" type="date" title="" comment="дата появления записи в хранилище" as="dat_sys" key="0" />
        <column table="a" column="polzov" type="string" title="" comment="кем создана запись" as="polzov" key="0" />
        <column table="a" column="dat_m" type="date" title="Дата корректировки акта в 1С" comment="дата корректировки в 1С" as="dat_m" key="0" />
        <column table="a" column="num_ip" type="string" title="" comment="номер инвестпрограммы" as="num_ip" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="полное наименованеи" as="full_name" key="0" />
        <column table="a" column="inn" type="string" title="" comment="инн" as="inn" key="0" />
        <column table="a" column="kpp" type="string" title="" comment="кпп" as="kpp" key="0" />
        <column table="a" column="num_dog" type="string" title="" comment="уник номера договора например,10-1325" as="num_dog" key="0" />
        <column table="a" column="num_dog_zayav" type="string" title="" comment="номере договора контрагента (например, о/104/2р/3302)" as="num_dog_zayav" key="0" />
        <column table="a" column="deb_sch" type="string" title="" comment="дебет счет" as="deb_sch" key="0" />
        <column table="a" column="deb_sub_sch" type="string" title="" comment="дебет суб счет" as="deb_sub_sch" key="0" />
        <column table="a" column="kr_sch" type="string" title="" comment="кредит счет" as="kr_sch" key="0" />
        <column table="a" column="kr_sub_sch" type="string" title="" comment="кредит суб счет" as="kr_sub_sch" key="0" />
        <column table="a" column="deb_sch_nds" type="string" title="" comment="ндс дебет счет" as="deb_sch_nds" key="0" />
        <column table="a" column="deb_sub_sch_nds" type="string" title="" comment="ндс дебет суб счет" as="deb_sub_sch_nds" key="0" />
        <column table="a" column="kr_sch_nds" type="string" title="" comment="ндс кредит счет" as="kr_sch_nds" key="0" />
        <column table="a" column="kr_sub_sch_nds" type="string" title="" comment="ндс кредит суб счет" as="kr_sub_sch_nds" key="0" />
        <column table="a" column="buh_id_kr" type="string" title="" comment="уникальный номер контр" as="buh_id_kr" key="0" />
        <column table="a" column="buh_id_dog" type="string" title="" comment="уникальный номер дог-ра" as="buh_id_dog" key="0" />
        <column table="a" column="kod_spr_doc" type="number" comment="код док-та из справочника док-тов" as="kod_spr_doc" key="0" />
        <column table="a" column="kod_vid_zatrat" type="string" comment="код вида затрат (субконто дебет)" as="kod_vid_zatrat" key="0" />
        <column table="a" column="name_vid_zatrat" type="string" title="" comment="наименование вида затрат" as="name_vid_zatrat" key="0" />
        <column table="a" column="pr_rash" type="number" title="" comment="1-расход,0 -доход" as="pr_rash" key="0" />
        <column table="a" column="name_direct" type="string" title="" comment="наим структурного подразделения" as="name_direct" key="0" />
        <column table="a" column="dat_del" type="date" title="Дата удаления акта в 1С" comment="дата удаления акта в 1-с" as="dat_del" key="0" />
        <column table="a" column="num_doc_buh" type="string" title="" comment="номер акта сформ.автом.в 1-с" as="num_doc_buh" key="0" />
        <column table="a" column="vid_oper" type="string" title="" comment="вид операции" as="vid_oper" key="0" />
        <column table="a" column="str_buh_id" type="string" title="" comment="уникальный номер 1-с табличной разбивки акта" as="str_buh_id" key="0" />
        <column table="a" column="kod_period" type="number" comment="уникальный код этапа работ" as="kod_period" key="0" />
        <column table="a" column="kod_tip_dog" type="string" comment="код типа договора (для актов по ад)" as="kod_tip_dog" key="0" />
        <column table="a" column="tip_dog" type="string" title="" comment="тип  договора (для актов по ад)" as="tip_dog" key="0" />
        <column table="a" column="kod_vid_dog" type="string" comment="код вида договора (для актов по ад)" as="kod_vid_dog" key="0" />
        <column table="a" column="vid_dog" type="string" title="" comment="вид договора(для актов по ад)" as="vid_dog" key="0" />
        <column table="a" column="date_copy_ipro" type="date" title="" comment="дата копирования в инвестпро" as="date_copy_ipro" key="0" />
        <column table="a" column="date_korrect_ipro" type="date" title="" comment="дата учета корректировки в инвестпро" as="date_korrect_ipro" key="0" />
        <column table="a" column="date_del_ipro" type="date" title="" comment="дата учета удаления в инвестпро" as="date_del_ipro" key="0" />
        <column table="a" column="num_doc_sf" type="string" title="" comment="номер счет/фактуры" as="num_doc_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="" comment="дата счет/фактуры" as="dat_sf" key="0" />
        <column table="a" column="kodtitul_ip" type="string" title="" comment="редактируемое поле для записи титула ип в инвестпро" as="kodtitul_ip" key="0" />
        <column table="a" column="deb_sum_akt" type="number" title="" comment="сумма деб оборотв дт 08,07,10.14,10.15(поступление)" as="deb_sum_akt" key="0" />
        <column table="a" column="kr_sum_akt" type="number" title="" comment="сумма кред оборотв кт 08,07,10.14,10.15(выбытие)" as="kr_sum_akt" key="0" />
        <column table="a" column="num_ip_out" type="string" title="" comment="титул с которого перенесли в другой титул" as="num_ip_out" key="0" />
        <column table="a" column="vid_rab_out" type="string" title="" comment="вид работ с которой перенесли в другой титул" as="vid_rab_out" key="0" />
        <column table="a" column="kod_vid_zatrat_out" type="string" comment="код статьи затрат с которой перенесли в другой титул" as="kod_vid_zatrat_out" key="0" />
        <column table="a" column="name_vid_zatrat_out" type="string" title="" comment="наименование статьи затрат с которой перенесли в другой титул" as="name_vid_zatrat_out" key="0" />
        <column table="a" column="deb_subconto" type="string" title="" comment="тип справочника: основные средства, номенклатура,подразделения" as="deb_subconto" key="0" />
        <column table="a" column="deb_subconto_name" type="string" title="" comment="название аналитики" as="deb_subconto_name" key="0" />
        <column table="a" column="deb_subconto_cod" type="string" title="" comment="код аналитики" as="deb_subconto_cod" key="0" />
        <column table="a" column="deb_subconto_id" type="string" title="" comment="id аналитики" as="deb_subconto_id" key="0" />
        <column table="a" column="kr_subconto" type="string" title="" comment="тип справочника: основные средства, номенклатура,подразделения" as="kr_subconto" key="0" />
        <column table="a" column="kr_subconto_name" type="string" title="" comment="название аналитики" as="kr_subconto_name" key="0" />
        <column table="a" column="kr_subconto_cod" type="string" title="" comment="код аналитики" as="kr_subconto_cod" key="0" />
        <column table="a" column="kr_subconto_id" type="string" title="" comment="id аналитики" as="kr_subconto_id" key="0" />
        <column table="a" column="kod_dog_tmp" type="number" as="kod_dog_tmp" key="0" />
        <column table="a" column="kod_kr_tmp" type="number" as="kod_kr_tmp" key="0" />
        <column table="a" column="uid_cod" type="string" title="" comment="код уид" as="uid_cod" key="0" />
        <column table="a" column="pr_del_kido" type="number" title="" comment="если удалили атп в кидо" as="pr_del_kido" key="0" />
        <column table="a" column="name_direct_org" type="string" title="" comment="организации с проведенного документ" as="name_direct_org" key="0" />
        <column table="a" column="name_subject_federation" type="string" as="name_subject_federation" key="0" />
        <column table="kod_titul_ip" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <call as="num_ip_nvl" function="nvl" key="0">
          <column table="a" column="num_ip" />
          <column table="a" column="num_ip_out" />
        </call>
        <call function="replace" as="kr_sch_c" key="0">
          <column table="this" column="kr_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="deb_sch_c" key="0">
          <column table="this" column="deb_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="kr_sub_sch_c" key="0">
          <column table="this" column="kr_sub_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="deb_sub_sch_c" key="0">
          <column table="this" column="deb_sub_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="buh_akts" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="buh_akts_atp" title="Титулы">
          <call function="=">
            <column table="this" column="num_ip_nvl" />
            <column table="kod_titul_ip" column="tit_num_new" />
          </call>
        </query>
      </from>
    </query>
    <query name="buh_akt_move_to_8_3" class="1" timestamp="06.08.2017 18:10:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\buh_akts.xml">
      <select>
        <column table="a" column="num_ip" type="number" comment="код строки бух.акта" as="num_ip" key="0" />
        <column table="a" column="kr_sch_c" type="number" comment="код строки бух.акта" as="kr_sch_c" key="0" />
        <column table="a" column="sum_akt" type="number" comment="код акта кидо" as="sum_akt" key="0" />
        <column table="a" column="dat_buh" type="number" comment="код акта кидо" as="dat_buh" key="0" />
      </select>
      <from>
        <query name="buh_akts" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="buh_akt_move_to_8_3" title="Титулы">
          <call function="=">
            <column table="a" column="num_ip" />
            <column table="kod_titul_ip" column="tit_num_new" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="deb_sub_sch_c" />
            <call function="array">
              <const>'08.03'</const>
            </call>
          </call>
          <call function="is null">
            <column table="a" column="dat_del" />
          </call>
          <call function="or">
            <call function="is null">
              <column table="a" column="date_copy_ipro" />
            </call>
            <call function="is not null">
              <column table="a" column="date_del_ipro" />
            </call>
          </call>
          <call function="or">
            <call function="in">
              <column table="a" column="kr_sch_c" />
              <call function="array">
                <const>'07'</const>
              </call>
            </call>
            <call function="in">
              <column table="a" column="kr_sub_sch_c" />
              <call function="array">
                <const>'10.14'</const>
                <const>'10.15'</const>
              </call>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="buh_akt_vip_dog_1" class="1" timestamp="28.02.2017 20:05:57" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\buh_akt_vip_dog.xml">
      <select>
        <column table="a" column="kod_buh_akts" type="number" comment="код строки бух.акта" as="kod_buh_akts" key="0" />
        <column table="a" column="kod_vip_dog" type="number" comment="код акта кидо" as="kod_vip_dog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="summa" type="number" title="" comment="зачтенная сумма" as="summa" key="0" />
        <column table="a" column="summa_bez_nds" type="number" title="" comment="зачтенная сумма без ндс" as="summa_bez_nds" key="0" />
        <call function="row_number" type="number" as="gr" key="0">
          <call function="partition by">
            <column table="a" column="kod_vip_dog" />
          </call>
          <call function="order by 2">
            <call function="desc">
              <column table="a" column="kod_buh_akts" />
            </call>
          </call>
        </call>
        <call function="case" as="kod_schet" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_buh_akts" column="deb_sch_c" />
              <const>'07'</const>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="kod_buh_akts" column="deb_sub_sch_c" />
                <const>'10.14'</const>
              </call>
              <call function="=">
                <column table="kod_buh_akts" column="deb_sub_sch_c" />
                <const>'10.15'</const>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_buh_akts" column="deb_sub_sch_c" />
              <const>'08.05'</const>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_buh_akts" column="deb_sub_sch_c" />
              <const>'08.41'</const>
            </call>
            <const>4</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_buh_akts" column="deb_sub_sch_c" />
              <const>'08.03'</const>
            </call>
            <const>3</const>
          </call>
        </call>
        <column table="kod_buh_akts" column="kod_vid_zatrat" as="kod_vid_zatrat" key="0" />
        <column table="kod_buh_akts" column="name_vid_zatrat" as="name_vid_zatrat" key="0" />
      </select>
      <from>
        <query name="buh_akt_vip_dog" as="a">
          <link name="kod_buh_akts" as="kod_buh_akts" table="buh_akts" child="buh_akt_vip_dog" field="kod_buh_akts" parent="buh_akts" back="buh_akt_vip_dog" />
          <link name="kod_vip_dog" as="kod_vip_dog" table="is_vip_dog" child="buh_akt_vip_dog" field="kod_vip_dog" parent="is_vip_dog" back="buh_akt_vip_dog" title="Док-ты по выполнению" />
        </query>
        <query name="ips_vid_zatrat_schet" as="kod_schet" join="left outer" dimension="1" dname="buh_akt_vip_dog_1">
          <call function="=">
            <column table="this" column="kod_schet" />
            <column table="kod_schet" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="buh_akt_vip_dog_2" class="1" timestamp="28.02.2017 20:06:05" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\buh_akt_vip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog" type="number" comment="код акта кидо" group="1" as="kod_vip_dog" key="1" fixed="1" />
        <column table="kod_schet" column="name" group="max" as="name" key="0" />
        <column table="a" column="kod_schet" group="max" as="kod_schet" key="0" />
        <column table="a" column="kod_vid_zatrat" group="max" as="kod_vid_zatrat" key="0" />
        <column table="a" column="name_vid_zatrat" group="max" as="name_vid_zatrat" key="0" />
      </select>
      <from>
        <query name="buh_akt_vip_dog_1" as="a">
          <link name="kod_schet" as="kod_schet" table="ips_vid_zatrat_schet" child="buh_akt_vip_dog_1" field="kod_schet" parent="ips_vid_zatrat_schet" back="buh_akt_vip_dog_1" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="gr" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="cube_c_deb_dop" title="Оплаты" class="1" timestamp="20.10.2017 17:54:01" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\c_debet.xml" haskeys="1">
      <select>
        <column table="kido_kod_deb" column="kod_deb" group="1" as="kod_deb" key="1" fixed="1" />
        <column table="kido_kod_sf" column="dat_bzad_nvl" as="dat_dolg" group="min" key="0" />
        <column table="kido_kod_sf" column="vid_real" as="vid_real" group="min" key="0" />
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kido_kod_deb" all-rows="1" />
          <link name="kido_kod_sf" />
          <link name="kido_kod_opl" />
          <where>
            <call function="not in">
              <column table="kido_kod_sf" column="vid_sf" />
              <const>2</const>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="c_opl_in" title="Оплаты" class="1" timestamp="21.10.2017 01:21:54" inherit="c_opl" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\c_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" title="" as="kod_deb" reference="c_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" comment="спр.ист.оплат" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" comment="статьи оплат" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" comment="2" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="vid_opl" type="string" title="" comment="спр.вид оплат" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="Дата оплаты" dimension="kido_dat_opl" as="datao" key="0" />
        <column table="a" column="datao" type="date" title="Дата оплаты" dimension="ipr_dat" as="datao1" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="opl" type="number" title="Оплачено" fact="c_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" comment="пусто" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" comment="1" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" comment="user" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" comment="дата редакт" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" comment="1" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" comment="формируется по функции" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="c_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="c_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" comment="сумма налога" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="c_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" comment="% ндс из договора" as="tax" key="0" />
        <column table="a" column="dat_bank" type="date" title="" comment="дата выписки из банка" as="dat_bank" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="последняя корректировка - пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="последняя корректировка - дата" as="d_m" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_akt" type="number" comment="только на погашение и сторно по акту" as="kod_akt" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="код расч счета банка" as="kodb_p" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_opl_bank" type="number" as="kod_opl_bank" key="0" />
        <column table="a" column="kod_reestr_rsfr" type="number" comment="код расшифровки по реестру петроэлектросбыта" as="kod_reestr_rsfr" reference="c_reestr_rsfr_opl" refcol="kod_reestr_rsfr_opl" key="0" />
        <column table="a" column="kod_doc_ish" type="number" as="kod_doc_ish" reference="is_doc_ish" refcol="kod_doc_ish" key="0" />
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" key="0" />
        <column table="a" column="kod_dog_parent" type="number" comment="kod_dog договора,с которого списаны деньги" as="kod_dog_parent" key="0" />
        <column table="a" column="kod_dop_doc" type="number" comment="доп док по оплате" as="kod_dop_doc" key="0" />
        <column table="a" column="kod_opl_parent" type="number" comment="kod_opl переносимой  оплаты" as="kod_opl_parent" key="0" />
        <call function="if" as="opl_den" title="Оплата деньгами с НДС" fact="c_opl_opl_nds_den" agg="sum" ifaplyed="1" key="0">
          <call function="and">
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
            <call function="or">
              <call function="=">
                <column table="this" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <column table="this" column="vid_pl" />
                  <const>2</const>
                </call>
                <call function="=1">
                  <call function="nvl0">
                    <column table="this" column="kod_type_opl" />
                  </call>
                </call>
              </call>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_nds_den" title="Оплата деньгами без НДС" fact="c_opl_opl_den" agg="sum" ifaplyed="1" key="0">
          <call function="and">
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
            <call function="or">
              <call function="=">
                <column table="this" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <column table="this" column="vid_pl" />
                  <const>2</const>
                </call>
                <call function="=1">
                  <call function="nvl0">
                    <column table="this" column="kod_type_opl" />
                  </call>
                </call>
              </call>
            </call>
          </call>
          <column table="this" column="opl_not_nds" />
        </call>
        <call function="+nvl" as="oplf" is-fact="1" agg="sum" fact="c_opl_in_oplf" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="-nvl" is-fact="1" agg="sum" as="opl_not_nds" fact="c_opl_opl_bn" key="0">
          <column table="this" column="opl" />
          <column table="this" column="nal" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="opl_not_nds" agg="sum" is-fact="1" as="opl_bn" fact="c_opl_in_opl_bn" key="0" />
        <column table="this" column="datao" as="dat_dolg" dimension="kido_dat_dolg" is-final-dimension="1" is-private-dimension="1" key="0" />
      </select>
      <where>
        <call function="and">
          <call function="is null">
            <column table="this" column="kod_parent" />
          </call>
          <call function="=1">
            <column table="this" column="flag_raznos" />
          </call>
          <call function="is null">
            <call function="nullif">
              <column table="kod_akt" column="vid_akt" />
              <const>0</const>
            </call>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <link name="kod_akt" />
        </link>
        <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ipr_kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <from>
        <table name="c_opl" as="a" title="Оплаты">
          <link name="kod_dog" dimension="1" as="kod_dog" table="is_dop_contract" child="c_opl_in" field="kod_dog" parent="is_dop_contract" back="c_opl_in" title="Абонентские договоры">
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_deb" table="c_debet" child="c_opl_in" field="kod_deb" parent="c_debet" back="c_opl_in" title="График оплат">
            <dimlink name="kido_kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kido_sf_vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_deb" table="c_debet" child="c_opl_in" field="kod_deb" parent="c_debet" back="c_opl_in" title="График оплат">
            <link name="kod_akt" as="kod_akt" table="c_akt" child="c_debet" field="kod_akt" parent="c_akt" back="c_debet" title="Акты по выполнению" />
          </link>
          <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="is_dop_contract" child="c_opl_in" field="kod_dog" parent="is_dop_contract" back="c_opl_in" title="Абонентские договоры">
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="c_opl" as="kod_opl_prev" dname="c_opl_next" join="left outer" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="c_opl" as="kod_parent" dname="c_opl_child" join="left outer" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="c_facvip" as="kod_sf" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="c_debet" as="kod_deb" join="left outer" dname="c_opl_in" title="График оплат">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_opl_in" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="c_reestr_rsfr_opl" as="kod_reestr_rsfr" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="kod_reestr_rsfr" />
            <column table="kod_reestr_rsfr" column="kod_reestr_rsfr_opl" />
          </call>
        </query>
        <query name="is_doc_ish" as="kod_doc_ish" join="left outer" dname="c_opl_in">
          <call function="=">
            <column table="a" column="kod_doc_ish" />
            <column table="kod_doc_ish" column="kod_doc_ish" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="c_opl_in" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_contr_steps_val-test" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="ipr_contr_steps_val" as="a"></query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_contr_steps_val" />
          <const>43962</const>
        </call>
      </where>
    </query>
    <query name="ipr_contr_steps_val_ord" order="ord2,ord1" class="1" timestamp="27.04.2016 13:40:50" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" as="kod_contr_steps_val" key="1" fixed="1" />
        <column table="a" column="kod_parent" as="kod_parent" key="0" />
        <column table="kod_template_contr_steps_val" column="abbr" as="abbr" key="0" />
        <call function="to_number" as="ord1" fixed="1" key="0">
          <call function="replace">
            <column table="kod_template_contr_steps_val" column="abbr" />
            <const>'.'</const>
            <const>''</const>
          </call>
        </call>
        <call function="to_number" as="ord2" fixed="1" key="0">
          <call function="substr">
            <call function="replace">
              <column table="a" column="kod_num" />
              <const>'.'</const>
              <const>''</const>
            </call>
            <const>1</const>
            <const>1</const>
          </call>
        </call>
        <call function="rownum" as="step_ord" key="0" />
        <!--<call function="connect_by_isleaf" as="last_level" />-->
        <call function="if" as="last_level" type="number" key="0">
          <call function="=">
            <column table="kod_template_contr_steps_val" column="is_head_step" />
            <const>1</const>
          </call>
          <const>0</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="ipr_contr_steps_val" as="a">
          <link name="kod_template_contr_steps_val" as="kod_template_contr_steps_val" table="ipr_template_contr_steps_val" child="ipr_contr_steps_val" field="kod_template_contr_steps_val" parent="ipr_template_contr_steps_val" back="ipr_contr_steps_val" />
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_contr_steps_val" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>
      <order>
        <column column="ord2" />
        <column column="ord1" />
      </order>
    </query>
    <query name="ipr_contr_steps_val_dt_mat" class="1" timestamp="15.08.2017 17:24:59" inherit="ipr_contr_steps_val_dt" materialize="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" as="kod_contr_steps_val" key="1" fixed="1" />
        <call function="case" type="date" as="bp_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bp_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bp_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bp_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bp_date_max" />
          </call>
          <call function="else">
            <column table="a" column="bp_date" />
          </call>
        </call>
        <call function="case" type="date" as="ep_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ep_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ep_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ep_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ep_date_max" />
          </call>
          <call function="else">
            <column table="a" column="ep_date" />
          </call>
        </call>
        <call function="case" type="date" as="bf_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bf_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bf_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bf_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bf_date_max" />
          </call>
          <call function="else">
            <column table="a" column="bf_date" />
          </call>
        </call>
        <call function="case" type="date" as="ef_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ef_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ef_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ef_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ef_date_max" />
          </call>
          <call function="else">
            <column table="a" column="ef_date" />
          </call>
        </call>
        <call function="if" as="bp_date" title="Начало план" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="plan_date_beg" />
          <column table="this" column="bp_date_calc" />
        </call>
        <call function="if" as="ep_date" title="Окончание план" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="plan_date_end" />
          <column table="this" column="ep_date_calc" />
        </call>
        <call function="if" as="bf_date" title="Начало факт" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="fact_date_beg" />
          <column table="this" column="bf_date_calc" />
        </call>
        <call function="if" as="ef_date" title="Окончание факт" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="fact_date_end" />
          <column table="this" column="ef_date_calc" />
        </call>
        <call function="if" as="ef_date_uch" title="Окончание факт(учет)" ifaplyed="1" key="0">
          <call function="ge">
            <call function="year">
              <call function="nvl">
                <column table="this" column="ep_date" />
                <column table="this" column="ef_date" />
              </call>
            </call>
            <call function="year">
              <column table="this" column="ef_date" />
            </call>
          </call>
          <column table="this" column="ef_date" />
        </call>
      </select>
      <from>
        <query name="ipr_contr_steps_val_dt1" as="a">
          <slink name="ipr_contr_steps_val_dt3" as="b" table="ipr_contr_steps_val_dt3" />
        </query>
      </from>
    </query>
    <query name="ipr_contr_steps_val_dt" class="1" timestamp="15.08.2017 17:24:59" comment="m9.1" hint="materialize" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" as="kod_contr_steps_val" key="1" fixed="1" />
        <call function="case" type="date" as="bp_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bp_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bp_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bp_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bp_date_max" />
          </call>
          <call function="else">
            <column table="a" column="bp_date" />
          </call>
        </call>
        <call function="case" type="date" as="ep_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ep_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ep_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ep_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ep_date_max" />
          </call>
          <call function="else">
            <column table="a" column="ep_date" />
          </call>
        </call>
        <call function="case" type="date" as="bf_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bf_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bf_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_bf_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="bf_date_max" />
          </call>
          <call function="else">
            <column table="a" column="bf_date" />
          </call>
        </call>
        <call function="case" type="date" as="ef_date_calc" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ef_date" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ef_date_min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="temp_ef_date" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="b" column="ef_date_max" />
          </call>
          <call function="else">
            <column table="a" column="ef_date" />
          </call>
        </call>
        <call function="if" as="bp_date" title="Начало план" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="plan_date_beg" />
          <column table="this" column="bp_date_calc" />
        </call>
        <call function="if" as="ep_date" title="Окончание план" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="plan_date_end" />
          <column table="this" column="ep_date_calc" />
        </call>
        <call function="if" as="bf_date" title="Начало факт" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="fact_date_beg" />
          <column table="this" column="bf_date_calc" />
        </call>
        <call function="if" as="ef_date" title="Окончание факт" key="0">
          <call function="=">
            <column table="a" column="is_closed" />
            <const>1</const>
          </call>
          <column table="a" column="fact_date_end" />
          <column table="this" column="ef_date_calc" />
        </call>
        <call function="if" as="ef_date_uch" title="Окончание факт(учет)" ifaplyed="1" key="0">
          <call function="ge">
            <call function="year">
              <call function="nvl">
                <column table="this" column="ep_date" />
                <column table="this" column="ef_date" />
              </call>
            </call>
            <call function="year">
              <column table="this" column="ef_date" />
            </call>
          </call>
          <column table="this" column="ef_date" />
        </call>
      </select>
      <from>
        <query name="ipr_contr_steps_val_dt1" as="a">
          <slink name="ipr_contr_steps_val_dt3" as="b" table="ipr_contr_steps_val_dt3" />
        </query>
      </from>
    </query>
    <query name="ipr_contr_steps_val_dt2" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <call function="connect_by_root" as="kod_contr_steps_val" key="0">
          <column table="a" column="kod_contr_steps_val" />
        </call>
        <column table="a" column="kod_contr_steps_val" as="child" key="1" fixed="1" />
        <column table="a" column="bp_date" as="bp_date" key="0" />
        <column table="a" column="ep_date" as="ep_date" key="0" />
        <column table="a" column="bf_date" as="bf_date" key="0" />
        <column table="a" column="ef_date" as="ef_date" key="0" />
      </select>
      <from>
        <query name="ipr_contr_steps_val_dt1" as="a"></query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_contr_steps_val" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
    </query>
    <query name="ipr_contr_steps_val_dt3" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" group="1" as="kod_contr_steps_val" key="1" fixed="1" />
        <column table="a" column="bp_date" as="bp_date_max" group="max" key="0" />
        <column table="a" column="bp_date" as="bp_date_min" group="min" key="0" />
        <column table="a" column="ep_date" as="ep_date_max" group="max" key="0" />
        <column table="a" column="ep_date" as="ep_date_min" group="min" key="0" />
        <column table="a" column="bf_date" as="bf_date_max" group="max" key="0" />
        <column table="a" column="bf_date" as="bf_date_min" group="min" key="0" />
        <column table="a" column="ef_date" as="ef_date_max" group="max" key="0" />
        <column table="a" column="ef_date" as="ef_date_min" group="min" key="0" />
      </select>
      <from>
        <query name="ipr_contr_steps_val_dt2" as="a"></query>
      </from>
    </query>
    <query name="ipr_contr_steps_val_dt1" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" as="kod_contr_steps_val" key="1" fixed="1" />
        <column table="a" column="kod_parent" as="kod_parent" key="0" />
        <column table="kod_doc" column="is_closed" as="is_closed" key="0" />
        <column table="kod_template_contr_steps_val" column="is_head_step" as="is_head_step" key="0" />
        <column table="kod_template_contr_steps_val" column="plan_date_beg" as="temp_bp_date" key="0" />
        <column table="kod_template_contr_steps_val" column="plan_date_end" as="temp_ep_date" key="0" />
        <column table="kod_template_contr_steps_val" column="fact_date_beg" as="temp_bf_date" key="0" />
        <column table="kod_template_contr_steps_val" column="fact_date_end" as="temp_ef_date" key="0" />
        <column table="a" column="plan_date_beg" as="plan_date_beg" key="0" />
        <column table="a" column="plan_date_end" as="plan_date_end" key="0" />
        <column table="a" column="fact_date_beg" as="fact_date_beg" key="0" />
        <column table="a" column="fact_date_end" as="fact_date_end" key="0" />
        <column table="a" column="kod_doc_rel" as="kod_doc_rel" key="0" />
        <!--<call function="ipr_tituls_display.getdatecontrsteps" as="bp_date" >
          <column table="a" column="kod_ipr"/>
          <column table="a" column="kod_contr_steps_val"/>
          <const>0</const>
          <const>0</const>
        </call>
        <call function="ipr_tituls_display.getdatecontrsteps" as="ep_date">
          <column table="a" column="kod_ipr"/>
          <column table="a" column="kod_contr_steps_val"/>
          <const>0</const>
          <const>1</const>
        </call>
        <call function="ipr_tituls_display.getdatecontrsteps" as="bf_date">
          <column table="a" column="kod_ipr"/>
          <column table="a" column="kod_contr_steps_val"/>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="ipr_tituls_display.getdatecontrsteps" as="ef_date">
          <column table="a" column="kod_ipr"/>
          <column table="a" column="kod_contr_steps_val"/>
          <const>1</const>
          <const>1</const>
        </call>-->
        <call function="case" as="bp_date" key="0">
          <call function="when">
            <call function="in">
              <column table="kod_template_contr_steps_val" column="plan_date_beg" />
              <call function="array">
                <const>1</const>
                <const>3</const>
              </call>
            </call>
            <const>null</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_template_contr_steps_val" column="plan_date_beg" />
              <const>2</const>
            </call>
            <column table="a" column="plan_date_beg" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_beg" />
                <const>4</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
            </call>
            <column table="kod_doc_rel" column="doc_date" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_beg" />
                <const>5</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_beg" />
                <const>6</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="max" />
          </call>
        </call>
        <call function="case" as="ep_date" key="0">
          <call function="when">
            <call function="in">
              <column table="kod_template_contr_steps_val" column="plan_date_end" />
              <call function="array">
                <const>1</const>
                <const>3</const>
              </call>
            </call>
            <const>null</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_template_contr_steps_val" column="plan_date_end" />
              <const>2</const>
            </call>
            <column table="a" column="plan_date_end" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_end" />
                <const>4</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
            </call>
            <column table="kod_doc_rel" column="doc_date" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_end" />
                <const>5</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="plan_date_end" />
                <const>6</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="max" />
          </call>
        </call>
        <call function="case" as="bf_date" key="0">
          <call function="when">
            <call function="in">
              <column table="kod_template_contr_steps_val" column="fact_date_beg" />
              <call function="array">
                <const>1</const>
                <const>3</const>
              </call>
            </call>
            <const>null</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_template_contr_steps_val" column="fact_date_beg" />
              <const>2</const>
            </call>
            <column table="a" column="fact_date_beg" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_beg" />
                <const>4</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
            </call>
            <column table="kod_doc_rel" column="doc_date" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_beg" />
                <const>5</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_beg" />
                <const>6</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="max" />
          </call>
        </call>
        <call function="case" as="ef_date" key="0">
          <call function="when">
            <call function="in">
              <column table="kod_template_contr_steps_val" column="fact_date_end" />
              <call function="array">
                <const>1</const>
                <const>3</const>
              </call>
            </call>
            <const>null</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_template_contr_steps_val" column="fact_date_end" />
              <const>2</const>
            </call>
            <column table="a" column="fact_date_end" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_end" />
                <const>4</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
            </call>
            <column table="kod_doc_rel" column="doc_date" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_end" />
                <const>5</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="min" />
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_template_contr_steps_val" column="fact_date_end" />
                <const>6</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_doc_rel" />
              </call>
              <call function="!=nvl">
                <column table="kod_template_contr_steps_val" column="is_head_step" />
                <const>1</const>
              </call>
            </call>
            <column table="kod_ipr_doc" column="doc_date" dgroup="max" />
          </call>
        </call>
      </select>
      <from>
        <query name="ipr_contr_steps_val" as="a">
          <link name="kod_template_contr_steps_val" as="kod_template_contr_steps_val" table="ipr_template_contr_steps_val" child="ipr_contr_steps_val" field="kod_template_contr_steps_val" parent="ipr_template_contr_steps_val" back="ipr_contr_steps_val" />
          <link name="kod_doc_rel" as="kod_doc_rel" table="ipr_doc" child="ipr_contr_steps_val" field="kod_doc_rel" parent="ipr_doc" back="ipr_contr_steps_val" />
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_contr_steps_val" field="kod_doc" parent="ipr_doc" back="ipr_contr_steps_val" />
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_contr_steps_val" field="kod_ipr" parent="ipr_ipr_data" back="ipr_contr_steps_val">
            <dlink name="ipr_doc_by_ipr" pushpred="1" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_doc" as="kod_ipr_doc" table="ipr_doc" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr" />
              <where>
                <call function="=">
                  <column table="kod_ipr_doc" column="kod_doc_type" />
                  <column table="kod_doc_rel" column="kod_doc_type" />
                </call>
              </where>
            </dlink>
          </link>
        </query>
      </from>
    </query>
    <query name="ipr_contr_steps_prev_doc" timestamp="01.03.2017 15:00:04" class="1" stored="vv_ipr_contr_steps_prev_doc" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="kod_ipr" column="kod_ipr" group="1" as="kod_ipr" key="1" fixed="1" />
        <column table="kod_ipr" column="kod_titul_ip" group="1" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="kod_doc" group="1" as="kod_doc" key="1" fixed="1" />
        <call function="ipr_tituls_display.getprevcontrstepsdoc" as="prev_doc" type="number" key="0">
          <column table="this" column="kod_doc" />
          <column table="this" column="kod_ipr" />
          <column table="this" column="kod_titul_ip" />
        </call>
      </select>
      <from>
        <query name="ipr_contr_steps_val" as="a">
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_contr_steps_val" field="kod_ipr" parent="ipr_ipr_data" back="ipr_contr_steps_val" />
        </query>
      </from>
    </query>
    <query name="ipr_doc_main_list" order="doc_date desc" class="1" timestamp="22.09.2016 18:08:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
        <column table="a" column="doc_date" as="doc_date" key="0" />
      </select>
      <from>
        <query name="ipr_doc" as="a">
          <link name="kod_doc_type" as="kod_doc_type" table="ips_doc_type" child="ipr_doc" field="kod_doc_type" parent="ips_doc_type" back="ipr_doc" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_doc_type" column="pr_main" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_kontr_list" order="doc_date desc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" key="1" as="kod_doc" />
        <call function="||" as="doc_num" type="string" title="Документ">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="doc_date" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <column table="kod_doc_type" column="name" title="Тип документа" as="name" />
        <column table="a" column="doc_date" as="doc_date" />
      </select>
      <from>
        <query name="ipr_doc" as="a">
          <link name="kod_doc_type" as="kod_doc_type" table="ips_doc_type" child="ipr_doc" field="kod_doc_type" parent="ips_doc_type" back="ipr_doc">
            <elink name="ips_doc_type_target" as="ips_doc_type_target" table="ips_doc_type_target" child="ips_doc_type_target" field="kod_doc_type" parent="ips_doc_type" back="ips_doc_type_target" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ips_doc_type_target" column="kod_doc_target" />
            <const>281</const>
          </call>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_pz_list" order="doc_date desc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" key="1" as="kod_doc" />
        <call function="||" as="doc_num" type="string" title="Документ">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="doc_date" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <column table="kod_doc_type" column="name" title="Тип документа" as="name" />
        <column table="a" column="doc_date" as="doc_date" />
      </select>
      <from>
        <query name="ipr_doc" as="a">
          <link name="kod_doc_type" as="kod_doc_type" table="ips_doc_type" child="ipr_doc" field="kod_doc_type" parent="ips_doc_type" back="ipr_doc">
            <elink name="ips_doc_type_target" as="ips_doc_type_target" table="ips_doc_type_target" child="ips_doc_type_target" field="kod_doc_type" parent="ips_doc_type" back="ips_doc_type_target" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ips_doc_type_target" column="kod_doc_target" />
            <const>279</const>
          </call>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_vvod" inherit="ipr_doc" timestamp="04.03.2016 15:16:58" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const as="cnt" type="number" fact="ipr_doc_vvod_count" agg="sum" key="0">1</const>
      </select>
      <links>
        <dlink name="ipr_works_vvod">
          <link name="kod_fact_wcompl">
            <link name="kod_work_body">
              <link name="kod_tituls_object">
                <link name="kod_titul_ip" as="kod_ip" dimension="1" />
              </link>
            </link>
          </link>
        </dlink>
      </links>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
          <dlink name="ipr_works_vvod" as="ipr_works_vvod" table="ipr_works_vvod" child="ipr_works_vvod" field="kod_doc" parent="ipr_doc" back="ipr_works_vvod">
            <link name="kod_fact_wcompl" as="kod_fact_wcompl" table="ipr_fact_wcompl" child="ipr_works_vvod" field="kod_fact_wcompl" parent="ipr_fact_wcompl" back="ipr_works_vvod">
              <link name="kod_work_body" as="kod_work_body" table="ipr_works_body" child="ipr_fact_wcompl" field="kod_work_body" parent="ipr_works_body" back="ipr_fact_wcompl">
                <link name="kod_tituls_object" as="kod_tituls_object" table="ipr_tituls_objects" child="ipr_works_body" field="kod_tituls_object" parent="ipr_tituls_objects" back="ipr_works_body">
                  <link name="kod_titul_ip" as="kod_ip" dimension="1" table="ipr_titul_ip" child="ipr_tituls_objects" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_tituls_objects" title="Титулы" />
                </link>
              </link>
            </link>
          </dlink>
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc_vvod" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc_vvod" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_doc_vvod">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_steps" inherit="ipr_doc" timestamp="06.03.2016 22:30:03" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <const type="number" as="cnt" fact="ipr_doc_count" agg="sum" key="0">1</const>
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc_steps">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc_steps" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc_steps">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc_steps">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc_steps" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc_steps">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc_steps">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_main" order="doc_date desc" class="1" timestamp="15.03.2017 13:46:26" inherit="ipr_doc" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <const type="number" as="cnt" fact="ipr_doc_count" agg="sum" key="0">1</const>
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="over" as="prev_kod_doc" type="number" key="0">
          <call function="lag">
            <column table="this" column="kod_doc" />
          </call>
          <call function="order by 2">
            <column table="this" column="doc_date" />
          </call>
        </call>
        <call function="over" as="next_kod_doc" type="number" key="0">
          <call function="lead">
            <column table="this" column="kod_doc" />
          </call>
          <call function="order by 2">
            <column table="this" column="doc_date" />
          </call>
        </call>
      </select>
      <where>
        <call function="=">
          <column table="kod_doc_type" column="pr_main" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc_main">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc_main" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc_main">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc_main">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc_main" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc_main">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc_main">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_e_ef" order="doc_date desc" class="1" timestamp="16.12.2016 16:57:57" inherit="ipr_doc" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="kod_doc_type" column="pr_e_ef" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <const type="number" as="cnt" fact="ipr_doc_count" agg="sum" key="0">1</const>
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc_e_ef">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc_e_ef" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc_e_ef">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc_e_ef">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc_e_ef" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc_e_ef">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc_e_ef">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_e_ef_list" order="doc_date desc" class="1" timestamp="15.03.2017 19:05:09" comment="39463(1) фильтр по док-там энерг эфективности" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
        <column table="a" column="doc_date" as="doc_date" key="0" />
      </select>
      <from>
        <query name="ipr_doc_e_ef" as="a" />
      </from>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_smet" inherit="ipr_doc" timestamp="13.02.2017 15:05:44" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <const type="number" as="cnt" fact="ipr_doc_count" agg="sum" key="0">1</const>
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc_smet">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc_smet" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc_smet">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc_smet">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc_smet" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc_smet">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc_smet">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_main_prev" class="1" timestamp="15.03.2017 12:37:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml">
      <params>
        <param name="kod_doc" type="number" />
      </params>
      <select>
        <column table="a" column="prev_kod_doc" as="prev_kod_doc" key="0" />
      </select>
      <from>
        <query name="ipr_doc_main" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_doc" />
          <useparam name="kod_doc" />
        </call>
      </where>
    </query>
    <query name="ipr_doc_main_next" class="1" timestamp="15.03.2017 13:47:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml">
      <params>
        <param name="kod_doc" type="number" />
      </params>
      <select>
        <column table="a" column="next_kod_doc" as="next_kod_doc" key="0" />
      </select>
      <from>
        <query name="ipr_doc_main" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_doc" />
          <useparam name="kod_doc" />
        </call>
      </where>
    </query>
    <query name="ipr_doc_main_last" order="doc_date desc" class="1" timestamp="15.03.2017 17:46:11" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
      </select>
      <from>
        <query name="ipr_doc_main_list" as="a" />
      </from>
      <where>
        <call function="=">
          <call function="rownum" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_e_ef_last" order="doc_date desc" class="1" timestamp="15.03.2017 18:56:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
      </select>
      <from>
        <query name="ipr_doc_e_ef_list" as="a" />
      </from>
      <where>
        <call function="=">
          <call function="rownum" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="doc_date" />
      </order>
    </query>
    <query name="ipr_doc_by_ipr_by_t" class="1" timestamp="22.05.2017 12:18:09" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc_by_ipr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_by_ipr" key="1" as="kod_doc_by_ipr" />
        <column table="a" column="kod_ipr" as="kod_ipr" />
        <column table="a" column="kod_doc" as="kod_doc" />
        <column table="ips_doc_type_target" column="kod_doc_target" key="1" as="kod_doc_target" />
        <call function="if" as="pr_last" type="number">
          <call function="=">
            <column table="a" column="kod_doc_by_ipr" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_doc_by_ipr" />
              </call>
              <call function="partition by">
                <column table="kod_ipr" column="kod_titul_ip" />
                <column table="kod_doc_target" column="doc_target_str" />
              </call>
              <call function="order by rows * *">
                <column table="kod_doc" column="doc_date" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="pr_last_smet" type="number">
          <call function="=">
            <column table="a" column="kod_doc_by_ipr" />
            <call function="over">
              <call function="last_value">
                <column table="a" column="kod_doc_by_ipr" />
              </call>
              <call function="partition by">
                <column table="kod_ipr" column="kod_titul_ip" />
                <column table="kod_doc_target" column="doc_target_str" />
              </call>
              <call function="order by rows * *">
                <column table="kod_doc" column="has_smet" />
                <column table="kod_doc" column="doc_date" />
                <column table="a" column="kod_doc" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="ipr_doc_by_ipr" as="a">
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
            <link name="kod_doc_type" as="kod_doc_type" table="ips_doc_type" child="ipr_doc" field="kod_doc_type" parent="ips_doc_type" back="ipr_doc">
              <elink name="ips_doc_type_target" as="ips_doc_type_target" table="ips_doc_type_target" child="ips_doc_type_target" field="kod_doc_type" parent="ips_doc_type" back="ips_doc_type_target">
                <link name="kod_doc_target" as="kod_doc_target" table="ips_doc_targets" child="ips_doc_type_target" field="kod_doc_target" parent="ips_doc_targets" back="ips_doc_type_target" />
              </elink>
            </link>
          </link>
        </query>
        <query name="ipr_doc_by_ipr" as="kod_doc_by_ipr" join="left outer" dname="ipr_doc_by_ipr_by_t">
          <call function="and">
            <call function="=">
              <column table="kod_doc_by_ipr" column="kod_doc_by_ipr" />
              <column table="a" column="kod_doc_by_ipr" />
            </call>
          </call>
        </query>
        <query name="ipr_ipr_data" join="left outer" as="kod_ipr" dname="ipr_doc_by_ipr_by_t">
          <call function="and">
            <call function="=">
              <column table="kod_ipr" column="kod_ipr" />
              <column table="a" column="kod_ipr" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_by_ipr_by_t_last" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc_by_ipr.xml">
      <select>
        <column table="a" column="*" as="*" key="0"></column>
      </select>
      <from>
        <query name="ipr_doc_by_ipr_by_t" as="a" />
        <query name="ips_doc_targets" as="kod_doc_target" join="left outer" dname="ipr_doc_by_ipr_by_t_last">
          <call function="=">
            <column table="a" column="kod_doc_target"></column>
            <column table="kod_doc_target" column="kod_target"></column>
          </call>
        </query>
        <query name="ipr_doc_by_ipr" as="kod_doc_by_ipr" join="left outer" dname="ipr_doc_by_ipr_by_t_last">
          <call function="and">
            <call function="=">
              <column table="kod_doc_by_ipr" column="kod_doc_by_ipr" />
              <column table="a" column="kod_doc_by_ipr" />
            </call>
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_doc_by_ipr_by_t_last">
          <call function="and">
            <call function="=">
              <column table="kod_ipr" column="kod_ipr" />
              <column table="a" column="kod_ipr" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="pr_last"></column>
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ipr_tek_smet" class="1" timestamp="22.05.2017 12:51:05" stored="vv_ipr_tek_smet" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc_by_ipr.xml" haskeys="1">
      <select>
        <column table="kod_ipr" column="kod_titul_ip" group="1" index="1" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="kod_doc" as="kod_doc_smet" group="1" key="1" fixed="1" />
        <column table="kod_doc_target" column="doc_target_str" group="1" as="doc_target_str" key="1" fixed="1" />
        <column table="a" column="pr_last_smet" as="pr_last" group="1" key="1" fixed="1" />
      </select>
      <from>
        <query name="ipr_doc_by_ipr_by_t" as="a">
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr_by_t" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr_by_t" />
        </query>
        <query name="ipr_doc" as="kod_doc_smet" dname="ipr_tek_smet_doc" join="left outer">
          <call function="=">
            <column table="this" column="kod_doc_smet" />
            <column table="kod_doc_smet" column="kod_doc" />
          </call>
        </query>
        <query name="ips_doc_targets" as="kod_doc_target" join="left outer" dname="ipr_tek_smet">
          <call function="=">
            <column table="a" column="kod_doc_target" />
            <column table="kod_doc_target" column="kod_target" />
          </call>
        </query>
        <query name="ips_doc_target_str" as="doc_target_str" join="left outer" dname="ipr_tek_smet">
          <call function="=">
            <column table="this" column="doc_target_str" />
            <column table="doc_target_str" column="doc_target_str" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="kod_doc_target" column="doc_target_str" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_doc_files_all" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_doc_files.xml" haskeys="1">
      <select>
        <column table="a" column="kod_file" type="string" key="1" as="kod_file"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc"></column>
        <column table="a" column="file_name" type="string" as="file_name"></column>
        <column table="a" column="file_data" type="blob" as="file_data"></column>
      </select>
      <from>
        <query as="a">
          <union>
            <query>
              <select>
                <column table="kod_doc" column="kod_doc" as="kod_doc" />
                <call function="to_char" as="kod_file">
                  <column table="kod_doc" column="kod_doc" />
                </call>
                <column table="kod_doc" column="link_storage" as="file_name" />
                <column table="kod_doc" column="document" as="file_data" />
              </select>
              <from>
                <query name="ipr_doc" as="kod_doc" />
              </from>
            </query>
            <query>
              <select>
                <column table="kod_doc" column="kod_doc" as="kod_doc" />
                <call function="||" as="kod_file">
                  <call function="to_char">
                    <column table="kod_doc" column="kod_doc" />
                  </call>
                  <const>'|'</const>
                  <call function="to_char">
                    <column table="kod_doc_files" column="kod_doc_files" />
                  </call>
                </call>
                <column table="kod_doc_files" column="file_name" as="file_name" />
                <column table="kod_doc_files" column="file_data" as="file_data" />
              </select>
              <from>
                <query name="ipr_doc_files" as="kod_doc_files">
                  <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_doc_files" field="kod_doc" parent="ipr_doc" back="ipr_doc_files" />
                </query>
              </from>
            </query>
          </union>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_doc_files_all">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_dogs_i" class="1" timestamp="15.08.2016 15:36:25" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog_i" group="1" key="1" as="kod_dog_i" />
        <column table="a" column="name_i" group="max" as="name_i" />
        <column table="a" column="date_i" group="max" as="date_i" />
        <column table="a" column="date_end_i" group="max" as="date_end_i" />
        <column table="a" column="tip_i" group="max" as="tip_i" />
        <column table="a" column="status_i" group="max" as="status_i" />
        <column table="a" column="num_i" group="max" as="num_i" />
        <column table="a" column="kod_dog" group="max" as="kod_dog" reference="is_dogovor" refcol="kod_dog" />
        <column table="a" column="pr_kido" group="max" as="pr_kido" />
        <column table="kod_dog" column="predm_dog" group="max" title="Предмет договора" as="predm_dog" />
      </select>
      <from>
        <query name="ipr_dogs" as="a" />
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="ipr_dogs_i" title="Подрядные договоры">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_dogs_pr" class="1" timestamp="15.08.2016 18:15:44" inherit="ipr_dogs" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="name" type="string" title="Договор" as="name" key="0" />
        <column table="a" column="kod_dog_type" type="number" as="kod_dog_type" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" key="0" />
        <column table="a" column="dat_podpis" type="date" title="" as="dat_podpis" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0" />
        <column table="a" column="is_old" type="number" title="" comment="договор не должен отображаться, хранится отлько чтобы правильно отображать планы предыдущих версий" as="is_old" key="0" />
        <column table="a" column="kod_parent_ipr_dog" type="number" comment="договор, с которым данный был слит" as="kod_parent_ipr_dog" key="0" />
        <column table="a" column="date_set_fact_dog" type="date" title="" comment="дата, когда плановому дог-ру проставили фактический" as="date_set_fact_dog" key="0" />
        <call function="||" as="full_name" type="sting" key="0">
          <column table="this" column="name_x" />
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_podpis" />
            </call>
            <const>' от '</const>
          </call>
          <call function="date to char">
            <column table="a" column="dat_podpis" />
          </call>
        </call>
        <call function="nvl" as="name_x" key="0">
          <column table="a" column="name" />
          <call function="if">
            <call function="=">
              <column table="a" column="kod_dog_type" />
              <const>52</const>
            </call>
            <const>'затраты заказчика'</const>
            <const>'б/н'</const>
          </call>
        </call>
        <call function="if" as="kod_dog_i" type="string" key="0">
          <call function="is not null">
            <call function="nullif">
              <call function="to_char">
                <column table="this" column="kod_dog" group="" />
              </call>
              <const>'-1'</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <call function="if" as="name_i" type="string" title="Договор" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="name" />
          <column table="this" column="full_name" />
        </call>
        <call function="if" as="num_i" type="string" title="Номер договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="name_unig_dog" />
          <column table="this" column="name_x" />
        </call>
        <call function="if" as="date_i" type="date" title="Дата договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="dat_dog" />
          <column table="a" column="dat_podpis" />
        </call>
        <call function="if" as="date_end_i" type="date" title="Дата окончания договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="dat_udal" />
          <column table="a" column="dat_udal" />
        </call>
        <call function="if" as="tip_i" type="string" title="Тип договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_tip_dog" column="name" />
          <column table="kod_dog_type" column="name" />
        </call>
        <call function="nvl" as="status_i" title="Статус договора" key="0">
          <column table="status" column="name" />
          <!--<const>'-'</const>-->
          <call function="if">
            <call function="=">
              <column table="a" column="kod_dog_type" />
              <const>52</const>
            </call>
            <const>'-'</const>
            <const>'Плановый'</const>
          </call>
        </call>
        <call function="if" as="pr_kido" type="number" key="0">
          <call function="is null or -1">
            <column table="a" column="kod_dog" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_ipr_dog" as="kod_dog_pr" agg="max" fact="ipr_dogs_pr_kod_dog" dimension="ipr_kod_ipr_dog" key="0" />
      </select>
      <where>
        <call function="and">
          <call function="=">
            <call function="nvl">
              <column table="this" column="kod_dog" />
              <const>-1</const>
            </call>
            <const>-1</const>
          </call>
          <call function="in">
            <column table="this" column="kod_dog_type" />
            <call function="array">
              <const>52</const>
              <const>56</const>
            </call>
          </call>
        </call>
      </where>
      <from>
        <table name="ipr_dogs" as="a">
          <link name="kod_dog" as="kod_dog1" table="is_dogovor" child="ipr_dogs_pr" field="kod_dog" parent="is_dogovor" back="ipr_dogs_pr" title="Подрядные договоры">
            <link name="kod_tip_dog" as="kod_tip_dog" table="is_spr_tip_dog" child="is_dogovor" field="kod_tip_dog" parent="is_spr_tip_dog" back="is_dogovor" />
            <link name="e_code" as="e_code" table="is_creditors" child="is_dogovor" field="e_code" parent="is_creditors" back="is_dogovor" title="Контрагенты" />
            <link name="status" as="status" table="is_status" child="is_dogovor" field="status" parent="is_status" back="is_dogovor" title="Статус" />
          </link>
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_dogs_pr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_dogs_pr">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_dop_contract" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
          </link>
          <dlink name="ipr_vid_zatrat_titul" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ipr_vid_zatrat_titul" table="ipr_vid_zatrat_titul" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul">
            <dimlink name="ipr_kod_zatrat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_smet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dimension="1" dname="ipr_dogs_pr">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dimension="1" dname="ipr_dogs_pr" title="Подрядные договоры">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kod_dog_type" join="left outer" dname="ipr_dogs_pr">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_dog_type" />
            <column table="kod_dog_type" column="kodzatrat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_rights_all" class="1" timestamp="04.04.2018 16:17:10" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dop_rights.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" group="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="puser" type="string" title="" group="1" as="puser" key="1" fixed="1" />
      </select>
      <from>
        <query as="a">
          <union all="0">
            <query>
              <select>
                <column table="a" column="puser" as="puser" />
                <column table="a" column="kod_sec" as="kod_direct" />
              </select>
              <from>
                <query name="ipr_rights" as="a" />
              </from>
            </query>
            <query>
              <select>
                <column table="a" column="puser" as="puser" />
                <column table="a" column="kod_direct" as="kod_direct" />
              </select>
              <from>
                <query name="ipr_dop_rights" as="a" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ipr_fin_period" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <params>
        <param name="year" />
      </params>
      <select>
        <call function="year" as="year" group="1" key="1" fixed="1">
          <column table="a" column="dat_day" />
        </call>
        <call function="month" as="period" group="1" key="1" fixed="1">
          <column table="a" column="dat_day" />
        </call>
        <call function="date to ym2" as="ym" group="1" key="1" fixed="1">
          <column table="a" column="dat_day" />
        </call>
      </select>
      <from>
        <query name="vv_day" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="between">
            <column table="a" column="dat_day" />
            <const>sysdate-365*3</const>
            <const>sysdate+365*7</const>
          </call>
          <call function="between" optional="1">
            <call function="year" as="year">
              <column table="a" column="dat_day" />
            </call>
            <call function="-">
              <useparam name="year" />
              <const>1</const>
            </call>
            <useparam name="year" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_period_data" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr" key="1" />
        <column table="ips_vid_zatrat" column="kodzatrat" as="kodzatrat" key="0" />
        <const as="kod_ipr_dog" key="0">null</const>
        <column table="period" column="year" as="year" key="0" />
        <column table="period" column="period" as="period" key="0" />
        <column table="period" column="ym" as="ym" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="ipr_ipr_data" />
        <query as="ips_vid_zatrat" join="cross">
          <select>
            <column table="ips_vid_zatrat" column="kodzatrat" as="kodzatrat" />
          </select>
          <from>
            <query name="ips_vid_zatrat" as="ips_vid_zatrat" />
          </from>
          <where>
            <call function="=">
              <column table="ips_vid_zatrat" column="kod_smet" />
              <const>4</const>
            </call>
          </where>
        </query>
        <query name="ipr_fin_period" as="period" join="cross" />
      </from>
    </query>
    <query name="ipr_fin_period_dog" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="year" />
      </params>
      <select>
        <column table="ipr_vid_zatrat_titul" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_vid_zatrat" column="kod_smet" as="kod_smet" key="0" />
        <column table="ipr_vid_zatrat_titul" column="kod_vid_zatrat" as="kodzatrat" key="0" />
        <column table="ipr_vid_zatrat_titul" column="kod_ipr_dog" as="kod_ipr_dog" key="0" />
        <column table="kod_ipr_dog" column="kod_dog" as="kod_dog" key="0" />
        <column table="period" column="year" as="year" key="0" />
        <column table="period" column="period" as="period" key="0" />
        <column table="period" column="ym" as="ym" key="0" />
      </select>
      <from>
        <query name="ipr_vid_zatrat_titul" as="ipr_vid_zatrat_titul">
          <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul" />
          <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
        </query>
        <query name="ipr_fin_period" as="period" join="cross">
          <withparams>
            <useparam name="year" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="ipr_fin_body_united_test2" class="1" timestamp="04.04.2018 23:38:18" is-report="1" use-repository="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <!--<column table="a" column="kod_ipr" group="1" />
        <column table="a" column="kod_schet_y" group="1" />
        <column table="a" column="ym_vozn" group="1" />
        <column table="a" column="kap_sum_fact_per" group="sum" />
        <column table="a" column="kap_sum_fact_pri" group="sum" />
        <call function="-nvl" as="kap_sum_fact_a" group="sum">
          <column table="a" column="kap_sum_nds_fact_a" />
          <column table="a" column="kap_nds_fact_a" />
        </call>-->
        <column table="a" column="kap_sum_fact_n" group="sum" as="kap_sum_fact_n" key="0" />
        <!--<column table="a" column="kap_sum_fact_c" group="sum" />
        <column table="a" column="kap_sum_fact_d" group="sum" />
        <column table="a" column="kap_sum_fact" group="sum" />
        <column table="a" column="kap_sum_fact_m83" group="sum" />-->
      </select>
      <from>
        <query name="ipr_fin_body_united" as="a" title="Ведение инвестиционных проектов">
          <extendwhere>
            <call function="and">
              <call function="=">
                <column table="*" column="ym" />
                <const>201801</const>
              </call>
              <call function="=">
                <column table="*" column="year" />
                <const>2018</const>
              </call>
              <!--<call function="=">
            <column table="a" column="kod_doc_osn" />
            <const>242796</const>
          </call>-->
              <!--<call function="in">
                <column table="kod_dog" column="kod_dog" />
                <const>3208503</const>
              </call>-->
              <call function="in">
                <column table="kod_ipr_ext" column="kod_doc_osn" />
                <const>143403</const>
              </call>
              <call function="=">
                <column table="kod_titul_ip" column="tit_num_new" />
                <const>'10110268000'</const>
              </call>
              <!--<call function="=nvl">
            <column table="a" column="kod_ipr" />
            <column table="a" column="kod_ipr_ext" />
          </call>-->
            </call>
          </extendwhere>
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_fin_body_united" field="kod_ipr" parent="ipr_ipr_data" back="ipr_fin_body_united" />
          <link name="kod_doc_osn" as="kod_doc_osn" table="ipr_doc" child="ipr_fin_body_united" field="kod_doc_osn" parent="ipr_doc" back="ipr_fin_body_united" />
          <link name="kod_dog_i" as="kod_dog_i" table="ipr_dogs_i" child="ipr_fin_body_united" field="kod_dog_i" parent="ipr_dogs_i" back="ipr_fin_body_united" />
        </query>
      </from>
    </query>
    <query name="ipr_fin_body_united_test3" class="1" use-repository="0" timestamp="01.09.2016 12:24:04" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <!--<column table="a" column="kod_ipr" group="1" />
        <column table="a" column="kod_schet_y" group="1" />
        <column table="a" column="ym_vozn" group="1" />
        <column table="a" column="kap_sum_fact_per" group="sum" />
        <column table="a" column="kap_sum_fact_pri" group="sum" />
        <call function="-nvl" as="kap_sum_fact_a" group="sum">
          <column table="a" column="kap_sum_nds_fact_a" />
          <column table="a" column="kap_nds_fact_a" />
        </call>-->
        <column table="a" column="fp_sum_nds_fact_a" group="sum" as="fp_sum_nds_fact_a" key="0" />
        <column table="a" column="fp_sum_nds_fact_b" group="sum" as="fp_sum_nds_fact_b" key="0" />
        <!--<column table="a" column="kap_sum_fact_c" group="sum" />
        <column table="a" column="kap_sum_fact_d" group="sum" />
        <column table="a" column="kap_sum_fact" group="sum" />
        <column table="a" column="kap_sum_fact_m83" group="sum" />-->
      </select>
      <from>
        <query name="ipr_fin_body_united" as="a" title="Ведение инвестиционных проектов">
          <extendwhere>
            <call function="=">
              <column table="*" column="year" />
              <const>2016</const>
            </call>
            <call function="=">
              <column table="kod_ipr" column="kod_doc_osn" />
              <const>143403</const>
            </call>
            <call function="in">
              <column table="kod_titul_ip1" column="kod_ispolnit" />
              <const>21</const>
            </call>
          </extendwhere>
        </query>
      </from>
      <!--<where>
        <call function="=">
          <column table="a" column="phis_typel" group="sum" />сщь
        </call>
      </where>-->
    </query>
    <query name="ipr_fin_body_united_test4_gr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" order="gr_rn">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="a" haskeys="1" order="kod_ipr nulls first,ym,ym nulls first,ym_nxt_dog nulls first,ym,ym nulls first,ym_nxt_smet nulls first,kod_dog_i nulls first,ym,ym nulls first,ym_nxt_dog nulls first,ym,ym nulls first,ym_nxt_smet nulls first,kod_smet nulls first,ym,ym nulls first,ym_nxt_dog nulls first,ym,ym nulls first,ym_nxt_smet nulls first">
          <select>
            <call function="decode" as="oncolsgrsetid" type="string" title="" key="0">
              <column table="this" column="groupingid" />
              <const>'3'</const>
              <const>'ym1'</const>
              <const>'68'</const>
              <const>'ym'</const>
              <const>'199'</const>
              <const>''</const>
              <const>'35'</const>
              <const>'ym1'</const>
              <const>'100'</const>
              <const>'ym'</const>
              <const>'231'</const>
              <const>''</const>
              <const>'51'</const>
              <const>'ym1'</const>
              <const>'116'</const>
              <const>'ym'</const>
              <const>'247'</const>
              <const>''</const>
            </call>
            <call function="decode" as="onrowsgrsetid" type="string" title="" key="0">
              <column table="this" column="groupingid" />
              <const>'3'</const>
              <const>'smet'</const>
              <const>'68'</const>
              <const>'smet'</const>
              <const>'199'</const>
              <const>'smet'</const>
              <const>'35'</const>
              <const>'dog'</const>
              <const>'100'</const>
              <const>'dog'</const>
              <const>'231'</const>
              <const>'dog'</const>
              <const>'51'</const>
              <const>'tit'</const>
              <const>'116'</const>
              <const>'tit'</const>
              <const>'247'</const>
              <const>'tit'</const>
            </call>
            <call function="decode" as="grsetname" type="string" title="Уровень группировки" key="0">
              <column table="this" column="groupingid" />
              <const>'3'</const>
              <const>'Период'</const>
              <const>'68'</const>
              <const>'Период'</const>
              <const>'199'</const>
              <const>'Смета'</const>
              <const>'35'</const>
              <const>'Период'</const>
              <const>'100'</const>
              <const>'Период'</const>
              <const>'231'</const>
              <const>'Договор'</const>
              <const>'51'</const>
              <const>'Период'</const>
              <const>'116'</const>
              <const>'Период'</const>
              <const>'247'</const>
              <const>'Титул'</const>
            </call>
            <column table="p2" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" key="0" />
            <column table="p2" column="tit_num_new" as="tit_num_new" c-master="kod_ipr" key="0" />
            <column table="p2" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" key="0" />
            <column table="p2" column="name_i" as="name_i" c-master="kod_dog_i" key="0" />
            <column table="p2" column="ym" as="ym" c-master-key="ym" key="0" />
            <column table="p2" column="kod_smet" as="kod_smet" c-master-key="kod_smet" key="0" />
            <column table="p2" column="name" as="name" c-master="kod_smet" key="0" />
            <column table="p2" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" key="0" />
            <column table="p2" column="sld_fact_dog" as="sld_fact_dog" key="0" />
            <column table="p2" column="deb_fact_dog" as="deb_fact_dog" key="0" />
            <column table="p2" column="kred_fact_dog" as="kred_fact_dog" key="0" />
            <column table="p2" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" key="0" />
            <column table="p2" column="sld_fact_smet" as="sld_fact_smet" key="0" />
            <column table="p2" column="deb_fact_smet" as="deb_fact_smet" key="0" />
            <column table="p2" column="kred_fact_smet" as="kred_fact_smet" key="0" />
            <column table="p2" column="visym" as="visym" key="0" />
            <column table="p2" column="visym1" as="visym1" key="0" />
            <call function="row_number" as="gr_rn" key="0">
              <call function="order by simple">
                <const>null</const>
              </call>
            </call>
            <column table="p2" column="growid" as="growid" type="string" title="" key="1" />
            <column table="p2" column="parent_growid" as="parent_growid" type="string" title="" key="0" />
            <column table="p2" column="groupingid" as="groupingid" key="0" />
            <column table="p2" column="grsetid" as="grsetid" type="string" title="" key="0" />
            <call function="decode" as="origgrsetid" type="string" title="" key="0">
              <column table="this" column="groupingid" />
              <const>'3'</const>
              <const>'smet_ym1'</const>
              <const>'68'</const>
              <const>'smet_ym'</const>
              <const>'199'</const>
              <const>'smet'</const>
              <const>'35'</const>
              <const>'dog_ym1'</const>
              <const>'100'</const>
              <const>'dog_ym'</const>
              <const>'231'</const>
              <const>'dog'</const>
              <const>'51'</const>
              <const>'tit_ym1'</const>
              <const>'116'</const>
              <const>'tit_ym'</const>
              <const>'247'</const>
              <const>'tit'</const>
            </call>
            <call function="decode" as="parent_grsetid" type="string" title="" key="0">
              <column table="this" column="groupingid" />
              <const>'3'</const>
              <const>'smet'</const>
              <const>'68'</const>
              <const>'smet'</const>
              <const>'199'</const>
              <const>'dog'</const>
              <const>'35'</const>
              <const>'dog'</const>
              <const>'100'</const>
              <const>'dog'</const>
              <const>'231'</const>
              <const>'tit'</const>
              <const>'51'</const>
              <const>'tit'</const>
              <const>'116'</const>
              <const>'tit'</const>
            </call>
            <column table="p2" column="par_groupingid" as="par_groupingid" type="number" title="" key="0" />
            <call function="if" as="onrowsgrowid" type="string" key="0">
              <call function="in">
                <column table="this" column="groupingid" />
                <call function="array">
                  <const>100</const>
                  <const>35</const>
                  <const>68</const>
                  <const>3</const>
                  <const>116</const>
                  <const>51</const>
                </call>
              </call>
              <column table="this" column="parent_growid" />
              <column table="this" column="growid" />
            </call>
            <call function="decode" as="oncolscolid" type="string" title="" key="0">
              <column table="this" column="grsetid" />
              <const>'tit_ym'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
              <const>'tit_ym1'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
              <const>'dog_ym'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
              <const>'dog_ym1'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
              <const>'smet_ym'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
              <const>'smet_ym1'</const>
              <call function="||">
                <const>''</const>
                <const>'#'</const>
                <call function="to_char">
                  <column table="this" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                </call>
              </call>
            </call>
          </select>
          <from>
            <query as="p2" haskeys="1">
              <select>
                <column table="p1" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" />
                <column table="p1" column="tit_num_new" as="tit_num_new" c-master="kod_ipr" />
                <column table="p1" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" />
                <column table="p1" column="name_i" as="name_i" c-master="kod_dog_i" />
                <column table="p1" column="ym" as="ym" c-master-key="ym" />
                <column table="p1" column="kod_smet" as="kod_smet" c-master-key="kod_smet" />
                <column table="p1" column="name" as="name" c-master="kod_smet" />
                <column table="p1" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" />
                <column table="p1" column="sld_fact_dog" as="sld_fact_dog" />
                <column table="p1" column="deb_fact_dog" as="deb_fact_dog" />
                <column table="p1" column="kred_fact_dog" as="kred_fact_dog" />
                <column table="p1" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" />
                <column table="p1" column="sld_fact_smet" as="sld_fact_smet" />
                <column table="p1" column="deb_fact_smet" as="deb_fact_smet" />
                <column table="p1" column="kred_fact_smet" as="kred_fact_smet" />
                <column table="p1" column="visym" as="visym" />
                <column table="p1" column="visym1" as="visym1" />
                <call function="||" as="growid" type="string" key="1" title="">
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>1</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="visym" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>2</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="ym_nxt_dog" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>4</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="visym1" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>8</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="kod_ipr" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>16</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="kod_dog_i" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>32</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="kod_smet" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>64</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="ym_nxt_smet" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                  <call function="if">
                    <call function="=">
                      <const>0</const>
                      <call function="bitand">
                        <const>128</const>
                        <column table="this" column="groupingid" />
                      </call>
                    </call>
                    <call function="coalesce">
                      <call function="to_char">
                        <column table="this" column="ym" />
                      </call>
                      <const>' '</const>
                    </call>
                  </call>
                  <const>'#'</const>
                </call>
                <call function="if" as="parent_growid" type="string" title="">
                  <call function="is null">
                    <column table="this" column="par_groupingid" />
                  </call>
                  <const>null</const>
                  <call function="||">
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>1</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="visym" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>2</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="ym_nxt_dog" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>4</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="visym1" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>8</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="kod_ipr" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>16</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="kod_dog_i" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>32</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="kod_smet" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>64</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="ym_nxt_smet" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                    <call function="if">
                      <call function="=">
                        <const>0</const>
                        <call function="bitand">
                          <const>128</const>
                          <column table="this" column="par_groupingid" />
                        </call>
                      </call>
                      <call function="coalesce">
                        <call function="to_char">
                          <column table="this" column="ym" />
                        </call>
                        <const>' '</const>
                      </call>
                    </call>
                    <const>'#'</const>
                  </call>
                </call>
                <column table="p1" column="groupingid" as="groupingid" />
                <call function="decode" as="grsetid" type="string" title="">
                  <column table="this" column="groupingid" />
                  <const>'3'</const>
                  <const>'smet_ym1'</const>
                  <const>'68'</const>
                  <const>'smet_ym'</const>
                  <const>'199'</const>
                  <const>'smet'</const>
                  <const>'35'</const>
                  <const>'dog_ym1'</const>
                  <const>'100'</const>
                  <const>'dog_ym'</const>
                  <const>'231'</const>
                  <const>'dog'</const>
                  <const>'51'</const>
                  <const>'tit_ym1'</const>
                  <const>'116'</const>
                  <const>'tit_ym'</const>
                  <const>'247'</const>
                  <const>'tit'</const>
                </call>
                <column table="p1" column="par_groupingid" as="par_groupingid" type="number" title="" />
              </select>
              <from>
                <query as="p1">
                  <select>
                    <column table="grsets_query" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" />
                    <column table="grsets_query" column="tit_num_new" as="tit_num_new" c-master="kod_ipr" />
                    <column table="grsets_query" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" />
                    <column table="grsets_query" column="name_i" as="name_i" c-master="kod_dog_i" />
                    <column table="grsets_query" column="ym" as="ym" c-master-key="ym" />
                    <column table="grsets_query" column="kod_smet" as="kod_smet" c-master-key="kod_smet" />
                    <column table="grsets_query" column="name" as="name" c-master="kod_smet" />
                    <column table="grsets_query" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" />
                    <column table="grsets_query" column="sld_fact_dog" as="sld_fact_dog" />
                    <column table="grsets_query" column="deb_fact_dog" as="deb_fact_dog" />
                    <column table="grsets_query" column="kred_fact_dog" as="kred_fact_dog" />
                    <column table="grsets_query" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" />
                    <column table="grsets_query" column="sld_fact_smet" as="sld_fact_smet" />
                    <column table="grsets_query" column="deb_fact_smet" as="deb_fact_smet" />
                    <column table="grsets_query" column="kred_fact_smet" as="kred_fact_smet" />
                    <column table="grsets_query" column="visym" as="visym" />
                    <column table="grsets_query" column="visym1" as="visym1" />
                    <column table="grsets_query" column="groupingid" as="groupingid" />
                    <call function="decode" as="par_groupingid" type="number" title="">
                      <column table="this" column="groupingid" />
                      <const>'3'</const>
                      <const>'199'</const>
                      <const>'68'</const>
                      <const>'199'</const>
                      <const>'199'</const>
                      <const>'231'</const>
                      <const>'35'</const>
                      <const>'231'</const>
                      <const>'100'</const>
                      <const>'231'</const>
                      <const>'231'</const>
                      <const>'247'</const>
                      <const>'51'</const>
                      <const>'247'</const>
                      <const>'116'</const>
                      <const>'247'</const>
                    </call>
                  </select>
                  <from>
                    <query as="grsets_query">
                      <group id="smet_ym1" name="smet_ym1" parid="smet" on-rows-grset-id="smet" on-cols-grset-id="ym1" title="Период" groupingid="3" parent-groupingid="199">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" removeable="1" on-columns="1" />
                        <column table="a" column="kod_smet" as="kod_smet" c-master-key="kod_smet" removeable="1" />
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym1" />
                      </group>
                      <group id="smet_ym" name="smet_ym" parid="smet" on-rows-grset-id="smet" on-cols-grset-id="ym" title="Период" groupingid="68" parent-groupingid="199">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" removeable="1" on-columns="1" />
                        <column table="a" column="kod_smet" as="kod_smet" c-master-key="kod_smet" removeable="1" />
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym" />
                      </group>
                      <group id="smet" name="smet" parid="dog" on-rows-grset-id="smet" on-cols-grset-id="" title="Смета" groupingid="199" parent-groupingid="231">
                        <column table="a" column="kod_smet" as="kod_smet" c-master-key="kod_smet" removeable="1" />
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                      </group>
                      <group id="dog_ym1" name="dog_ym1" parid="dog" on-rows-grset-id="dog" on-cols-grset-id="ym1" title="Период" groupingid="35" parent-groupingid="231">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" removeable="1" on-columns="1" />
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym1" />
                      </group>
                      <group id="dog_ym" name="dog_ym" parid="dog" on-rows-grset-id="dog" on-cols-grset-id="ym" title="Период" groupingid="100" parent-groupingid="231">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" removeable="1" on-columns="1" />
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym" />
                      </group>
                      <group id="dog" name="dog" parid="tit" on-rows-grset-id="dog" on-cols-grset-id="" title="Договор" groupingid="231" parent-groupingid="247">
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                      </group>
                      <group id="tit_ym1" name="tit_ym1" parid="tit" on-rows-grset-id="tit" on-cols-grset-id="ym1" title="Период" groupingid="51" parent-groupingid="247">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" removeable="1" on-columns="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym1" />
                      </group>
                      <group id="tit_ym" name="tit_ym" parid="tit" on-rows-grset-id="tit" on-cols-grset-id="ym" title="Период" groupingid="116" parent-groupingid="247">
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" removeable="1" on-columns="1" />
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <column table="a" column="visym" />
                      </group>
                      <group id="tit" name="tit" parid="" on-rows-grset-id="tit" on-cols-grset-id="" title="Титул" groupingid="247">
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                      </group>
                      <select>
                        <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                        <call function="if" as="tit_num_new" c-master="kod_ipr">
                          <call function="=">
                            <call function="grouping">
                              <column table="a" column="kod_ipr" as="kod_ipr" c-master-key="kod_ipr" removeable="1" />
                            </call>
                            <const>0</const>
                          </call>
                          <column table="a" column="tit_num_new" group="max" c-master="kod_ipr" removeable="1" />
                        </call>
                        <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                        <call function="if" as="name_i" c-master="kod_dog_i">
                          <call function="=">
                            <call function="grouping">
                              <column table="a" column="kod_dog_i" as="kod_dog_i" c-master-key="kod_dog_i" removeable="1" />
                            </call>
                            <const>0</const>
                          </call>
                          <column table="a" column="name_i" group="max" c-master="kod_dog_i" removeable="1" />
                        </call>
                        <column table="a" column="ym" as="ym" c-master-key="ym" removeable="1" on-columns="1" />
                        <column table="a" column="kod_smet" as="kod_smet" c-master-key="kod_smet" removeable="1" />
                        <call function="if" as="name" c-master="kod_smet">
                          <call function="=">
                            <call function="grouping">
                              <column table="a" column="kod_smet" as="kod_smet" c-master-key="kod_smet" removeable="1" />
                            </call>
                            <const>0</const>
                          </call>
                          <column table="a" column="name" group="max" c-master="kod_smet" removeable="1" />
                        </call>
                        <column table="a" column="ym_nxt_dog" as="ym_nxt_dog" c-master-key="ym_nxt_dog" removeable="1" on-columns="1" />
                        <column table="a" column="sld_fact_dog" as="sld_fact_dog" group="sum" removeable="1" />
                        <column table="a" column="deb_fact_dog" as="deb_fact_dog" group="sum" removeable="1" />
                        <column table="a" column="kred_fact_dog" as="kred_fact_dog" group="sum" removeable="1" />
                        <column table="a" column="ym_nxt_smet" as="ym_nxt_smet" c-master-key="ym_nxt_smet" removeable="1" on-columns="1" />
                        <column table="a" column="sld_fact_smet" as="sld_fact_smet" group="sum" removeable="1" />
                        <column table="a" column="deb_fact_smet" as="deb_fact_smet" group="sum" removeable="1" />
                        <column table="a" column="kred_fact_smet" as="kred_fact_smet" group="sum" removeable="1" />
                        <column table="a" column="visym" as="visym" />
                        <column table="a" column="visym1" as="visym1" />
                        <call function="grouping_id" as="groupingid">
                          <column table="a" column="ym" />
                          <column table="a" column="ym_nxt_smet" />
                          <column table="a" column="kod_smet" />
                          <column table="a" column="kod_dog_i" />
                          <column table="a" column="kod_ipr" />
                          <column table="a" column="visym1" />
                          <column table="a" column="ym_nxt_dog" />
                          <column table="a" column="visym" />
                        </call>
                      </select>
                      <from>
                        <query as="a" hint="materialize">
                          <select>
                            <column table="a" column="*" as="*" />
                            <call function="if" as="visym" type="number">
                              <call function="and">
                                <call function="is not null">
                                  <const>2</const>
                                </call>
                                <call function="and">
                                  <call function="=1">
                                    <column table="a" column="rn_dog" />
                                  </call>
                                  <call function="is not null">
                                    <column table="a" column="ym" />
                                  </call>
                                </call>
                              </call>
                              <const>1</const>
                              <const>0</const>
                            </call>
                            <call function="if" as="visym1" type="number">
                              <call function="and">
                                <call function="is not null">
                                  <const>3</const>
                                </call>
                                <call function="and">
                                  <call function="=1">
                                    <column table="a" column="rn_smet" />
                                  </call>
                                  <call function="is not null">
                                    <column table="a" column="ym" />
                                  </call>
                                </call>
                              </call>
                              <const>1</const>
                              <const>0</const>
                            </call>
                          </select>
                          <from>
                            <query name="ipr_fin_body_united_test4" as="a" />
                          </from>
                        </query>
                      </from>
                      <having>
                        <call function="and">
                          <call function="=">
                            <call function="coalesce">
                              <column table="a" column="visym" />
                              <const>1</const>
                            </call>
                            <const>1</const>
                          </call>
                          <call function="=">
                            <call function="coalesce">
                              <column table="a" column="visym1" />
                              <const>1</const>
                            </call>
                            <const>1</const>
                          </call>
                        </call>
                      </having>
                    </query>
                  </from>
                </query>
              </from>
            </query>
          </from>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="parent_growid" />
          <column table="a" column="growid" prior="1" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="parent_grsetid" />
        </call>
      </start>
    </query>
    <query name="ipr_fin_body_united_test4" grouplevel="no" timestamp="01.09.2016 12:24:04" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="a" column="kod_ipr" group="1" as="kod_ipr" removeable="1" c-master-key="kod_ipr" key="0" />
        <column table="kod_titul_ip" column="tit_num_new" group="max" as="tit_num_new" removeable="1" master="kod_ipr" c-master="kod_ipr" key="0" />
        <column table="a" column="kod_dog_i" group="2" as="kod_dog_i" removeable="1" c-master-key="kod_dog_i" key="0" />
        <column table="kod_dog_i" column="name_i" group="max" as="name_i" removeable="1" master="kod_dog_i" c-master="kod_dog_i" key="0" />
        <column table="a" column="ym" group="3" as="ym" removeable="1" c-master-key="ym" key="0" />
        <column table="a" column="kod_smet" group="5" as="kod_smet" removeable="1" c-master-key="kod_smet" key="0" />
        <column table="kod_smet" column="name" group="max" as="name" removeable="1" master="kod_smet" c-master="kod_smet" key="0" />
        <column table="a" column="ym_nxt_dog" group="4" as="ym_nxt_dog" removeable="1" c-master-key="ym_nxt_dog" key="0" />
        <column table="a" column="rn_dog" as="rn_dog" removeable="1" key="0" />
        <column table="a" column="sld_fact_dog" group="sum" as="sld_fact_dog" removeable="1" key="0" />
        <column table="a" column="deb_fact_dog" group="sum" as="deb_fact_dog" removeable="1" key="0" />
        <column table="a" column="kred_fact_dog" group="sum" as="kred_fact_dog" removeable="1" key="0" />
        <column table="a" column="ym_nxt_smet" group="6" as="ym_nxt_smet" removeable="1" c-master-key="ym_nxt_smet" key="0" />
        <column table="a" column="rn_smet" as="rn_smet" removeable="1" key="0" />
        <column table="a" column="sld_fact_smet" group="sum" as="sld_fact_smet" removeable="1" key="0" />
        <column table="a" column="deb_fact_smet" group="sum" as="deb_fact_smet" removeable="1" key="0" />
        <column table="a" column="kred_fact_smet" group="sum" as="kred_fact_smet" removeable="1" key="0" />
      </select>
      <from>
        <query name="ipr_fin_body_united" as="a" title="Ведение инвестиционных проектов">
          <extendwhere>
            <call function="=">
              <column table="*" column="kod_doc_osn" />
              <const>143404</const>
            </call>
            <call function="=">
              <column table="*" column="kod_ipr" />
              <const>29567</const>
            </call>
          </extendwhere>
          <link name="kod_ipr_ext" as="kod_ipr_ext" table="ipr_ipr_data" child="ipr_fin_body_united" field="kod_ipr_ext" parent="ipr_ipr_data" back="ipr_fin_body_united">
            <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
          </link>
          <link name="kod_dog_i" as="kod_dog_i" table="ipr_dogs_i" child="ipr_fin_body_united" field="kod_dog_i" parent="ipr_dogs_i" back="ipr_fin_body_united" />
          <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ipr_fin_body_united" field="kod_smet" parent="ips_smet_structure" back="ipr_fin_body_united" title="Виды затрат" />
        </query>
      </from>
    </query>
    <query name="ipr_fin_body_united" cstyle="union" stored="vr_ipr_a" changes="kod_titul_ip_changed" title="Ведение инвестиционных проектов" class="1" timestamp="05.02.2018 21:14:54" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" qcaplied="1" haskeys="1">
      <params>
        <param name="kod_titul_ip" />
        <param name="year" />
      </params>
      <select>
        <column table="*" column="kod_razdel" group="1" stored="0" as="kod_razdel" key="1" />
        <column table="*" column="kod_doc_osn" group="1" stored="1" as="kod_doc_osn" key="1" />
        <column table="*" column="kod_ipr" group="1" as="kod_ipr" key="1" />
        <column table="*" column="kod_ipr_ext" group="1" as="kod_ipr_ext" key="1" />
        <column table="*" column="year" group="1" timeline="time1" as="year" key="1" />
        <column table="*" column="period" group="1" timeline="time1" as="period" key="1" />
        <column table="*" column="ym" group="1" timeline="time1" as="ym" key="1" />
        <column table="*" column="ym_vozn" group="1" as="ym_vozn" key="1" />
        <column table="*" column="ym" group="max" as="max_ym" agg="max" key="0" />
        <column table="*" column="ym" group="max" as="min_ym" agg="max" key="0" />
        <column table="*" column="kodzatrat" group="1" as="kodzatrat" key="1" />
        <!--<column table="kod_ipr" column="kod_titul_ip" group="1" />
        <column table="kod_ipr" column="kod_main_titul" group="1" />-->
        <column table="*" column="kod_titul_ip" group="1" as="kod_titul_ip" key="1" />
        <column table="*" column="kod_main_titul" group="1" as="kod_main_titul" key="1" />
        <column table="kod_sbor_titul1" column="kod_titul_ip" as="kod_titul_ip_sb" group="1" key="1" />
        <!--<column table="*" column="kodzatrat" as="kodzatrat_for_part" group="max" />-->
        <column table="*" column="kod_ipr_dog" group="1" as="kod_ipr_dog" key="1" />
        <column table="*" column="kod_dog" group="1" as="kod_dog" key="1" />
        <call function="if" as="kod_dog_i" type="string" group="1" key="1">
          <call function="is not null">
            <call function="nullif">
              <call function="to_char">
                <column table="this" column="kod_dog" group="" />
              </call>
              <const>'-1'</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="*" column="kod_smet" group="1" type="number" as="kod_smet" key="1" />
        <column table="*" column="kod_smet_sub" group="1" stored="0" type="number" as="kod_smet_sub" key="1" />
        <column table="*" column="dat" group="1" stored="0" timeline="time1" as="dat" key="1" />
        <column table="*" column="dat_doc_steps" group="1" stored="0" timeline="time_steps" as="dat_doc_steps" key="1" />
        <column table="*" column="kvart" group="1" stored="0" timeline="time1" as="kvart" key="1" />
        <column table="*" column="kod_contr_steps_val" group="1" stored="0" as="kod_contr_steps_val" key="1" />
        <column table="*" column="kod_doc" group="1" stored="0" as="kod_doc" key="1" />
        <column table="*" column="pr_last_smet" group="1" as="pr_last_smet" key="1" />
        <column table="*" column="kod_doc_smet" group="1" stored="0" as="kod_doc_smet" key="1" />
        <column table="*" column="doc_target_str" group="1" stored="0" as="doc_target_str" key="1" />
        <column table="*" column="kod_vip_dog" group="1" stored="0" as="kod_vip_dog" key="1" />
        <column table="*" column="kod_opl_period" group="1" stored="0" as="kod_opl_period" key="1" />
        <column table="*" column="is_avans" group="1" stored="0" as="is_avans" key="1" />
        <column table="*" column="kod_schet" group="1" as="kod_schet" key="1" />
        <column table="*" column="kod_schet_it" group="1" as="kod_schet_it" key="1" />
        <column table="*" column="pr_opl_spis" group="1" as="pr_opl_spis" key="1" />
        <call function="if" as="kod_schet_y" group="1" type="number" key="1">
          <call function="ge">
            <call function="smallest">
              <call function="ym2 god">
                <column table="this" column="ym_vozn" group="" />
              </call>
              <column table="this" column="year" group="" />
            </call>
            <const>2016</const>
          </call>
          <column table="this" column="kod_schet" group="" />
        </call>
        <column table="ipr_fin_kap" column="plan_summ" as="kap_sum" group="sum" agg="sum" class-title="Освоение капиталовложений" key="0" />
        <column table="ipr_fin_kap" column="plan_summ_nds" as="kap_sum_nds" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap" column="wfact_summ" as="kap_sum_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap" column="wfact_summ_nds" as="kap_sum_nds_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan" column="plan_summ" as="fp_sum" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan" column="plan_summ_nds" as="fp_sum_nds" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan" column="wfact_summ" as="fp_sum_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan" column="wfact_summ_nds" as="fp_sum_nds_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_vvod" column="god_vvod" group="max" as="god_vvod" title="Год ввода в эксплуатацию" agg="max" key="0" />
        <column table="ipr_fin_vvod" column="plan_summ" as="vvod_sum" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_vvod" column="plan_summ_nds" as="vvod_sum_nds" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_vvod" column="wfact_summ" as="vvod_sum_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_vvod" column="wfact_summ_nds" as="vvod_sum_nds_wait" group="sum" agg="sum" key="0" />
        <call function="-nvl" as="kap_nds" title="Плановый объем освоения НДС" agg="sum" key="0">
          <column table="this" column="kap_sum_nds" />
          <column table="this" column="kap_sum" />
        </call>
        <call function="-nvl" as="kap_nds_wait" title="Плановый объем освоения НДС (ожидаемый)" agg="sum" key="0">
          <column table="this" column="kap_sum_nds_wait" />
          <column table="this" column="kap_sum_wait" />
        </call>
        <call function="-nvl" as="fp_nds" title="Плановый объем финансирования НДС" agg="sum" key="0">
          <column table="this" column="fp_sum_nds" />
          <column table="this" column="fp_sum" />
        </call>
        <call function="-nvl" as="fp_nds_wait" title="Плановый объем финансирования НДС (ожидаемый)" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_wait" />
          <column table="this" column="fp_sum_wait" />
        </call>
        <column table="ipr_fin_power" column="km" as="pow_km" group="sum" agg="sum" title="Ввод КМ ВЛ план" key="0" />
        <column table="ipr_fin_power" column="mba" as="pow_mba" group="sum" agg="sum" title="Ввод МВА план" key="0" />
        <column table="ipr_fin_power" column="cnt" as="pow_cnt" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_del" as="pow_km_del" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="mba_del" as="pow_mba_del" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_pr" as="pow_km_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="mba_pr" as="pow_mba_pr" group="sum" agg="sum" title="Прирост МВА план" key="0" />
        <column table="ipr_fin_power" column="cnt_pr" as="pow_cnt_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="mba_fact" as="pow_mba_fact" group="sum" agg="sum" title="Ввод МВА факт" key="0" />
        <column table="ipr_fin_power" column="km_fact" as="pow_km_fact" group="sum" agg="sum" title="Ввод КМ ВЛ факт" key="0" />
        <column table="ipr_fin_power" column="cnt_fact" as="pow_cnt_fact" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_fact_pr" as="pow_km_fact_pr" group="sum" agg="sum" title="Прирост КМ ВЛ факт" key="0" />
        <column table="ipr_fin_power" column="mba_fact_pr" as="pow_mba_fact_pr" group="sum" agg="sum" title="Прирост МВА факт" key="0" />
        <column table="ipr_fin_power" column="cnt_fact_pr" as="pow_cnt_fact_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="mba_wfact" as="pow_mba_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_wfact" as="pow_km_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_wfact" as="pow_cnt_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch_wfact" as="pow_cnt_proch_wait" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_wfact_pr" as="pow_km_wait_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="mba_wfact_pr" as="pow_mba_wait_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_wfact_pr" as="pow_cnt_wait_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch_wfact_pr" as="pow_cnt_proch_wait_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch" as="pow_cnt_proch" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch_pr" as="pow_cnt_proch_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch_fact" as="pow_cnt_proch_fact" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="cnt_proch_fact_pr" as="pow_cnt_proch_fact_pr" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl" as="pow_km_kl" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_del" as="pow_km_kl_del" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_fact" as="pow_km_kl_fact" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_ekspl" as="pow_km_kl_ekspl" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_pr" as="pow_km_kl_pr" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_fact_pr" as="pow_km_kl_fact_pr" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_wfact" as="pow_km_kl_wait" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="km_kl_wfact_pr" as="pow_km_kl_wait_pr" agg="sum" group="sum" key="0" />
        <column table="ipr_fin_power" column="pow_any" as="pow_any" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_power" column="pow_any_fact" as="pow_any_fact" group="sum" agg="sum" key="0" />
        <column table="this" column="pow_km" as="pow_km_itog" group="sum" agg="sum" title="Ввод КМ ВЛ план" cumulate="ym" key="0" />
        <column table="this" column="pow_mba" as="pow_mba_itog" group="sum" agg="sum" title="Ввод МВА план" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt" as="pow_cnt_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_del" as="pow_km_del_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_del" as="pow_mba_del_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_pr" as="pow_km_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_pr" as="pow_mba_pr_itog" group="sum" agg="sum" title="Прирост МВА план" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_pr" as="pow_cnt_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_fact" as="pow_mba_fact_itog" group="sum" agg="sum" title="Ввод МВА факт" cumulate="ym" key="0" />
        <column table="this" column="pow_km_fact" as="pow_km_fact_itog" group="sum" agg="sum" title="Ввод КМ ВЛ факт" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_fact" as="pow_cnt_fact_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_fact_pr" as="pow_km_fact_pr_itog" group="sum" agg="sum" title="Прирост КМ ВЛ факт" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_fact_pr" as="pow_mba_fact_pr_itog" group="sum" agg="sum" title="Прирост МВА факт" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_fact_pr" as="pow_cnt_fact_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_wait" as="pow_mba_wait_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_wait" as="pow_km_wait_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_wait" as="pow_cnt_wait_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_proch_wait" as="pow_cnt_proch_wait_itog" group="sum" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="pow_km_wait_pr" as="pow_km_wait_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_mba_wait_pr" as="pow_mba_wait_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_wait_pr" as="pow_cnt_wait_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_proch_wait_pr" as="pow_cnt_proch_wait_pr_itog" group="sum" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="pow_cnt_proch" as="pow_cnt_proch_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_proch_pr" as="pow_cnt_proch_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_proch_fact" as="pow_cnt_proch_fact_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_cnt_proch_fact_pr" as="pow_cnt_proch_fact_pr_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl" as="pow_km_kl_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_del" as="pow_km_kl_del_itog" group="sum" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_fact" as="pow_km_kl_fact_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_ekspl" as="pow_km_kl_ekspl_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_pr" as="pow_km_kl_pr_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_fact_pr" as="pow_km_kl_fact_pr_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_wait" as="pow_km_kl_wait_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_km_kl_wait_pr" as="pow_km_kl_wait_pr_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_any" as="pow_any_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <column table="this" column="pow_any_fact" as="pow_any_fact_itog" agg="sum" group="sum" cumulate="ym" key="0" />
        <!--для заявки 29611-->
        <call function="+nvl" as="pow_km_all" title="Ввод КМ план" agg="sum" key="0">
          <column table="this" column="pow_km" />
          <column table="this" column="pow_km_kl" />
        </call>
        <call function="+nvl" as="pow_other" title="Ввод другие ед. изм. план" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch" />
          <column table="this" column="pow_cnt" />
        </call>
        <call function="+nvl" as="pow_other_wait" title="Ввод другие ед. изм. ож. факт" stored="0" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch_wait" />
          <column table="this" column="pow_cnt_wait" />
        </call>
        <call function="+nvl" as="pow_other_wait_pr" title="Ввод другие ед. изм. ож. факт" stored="0" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch_wait_pr" />
          <column table="this" column="pow_cnt_wait_pr" />
        </call>
        <call function="+nvl" as="pow_km_all_pr" title="Прирост КМ план" agg="sum" key="0">
          <column table="this" column="pow_km_pr" />
          <column table="this" column="pow_km_kl_pr" />
        </call>
        <call function="+nvl" as="pow_other_pr" title="Прирост другие ед. изм. план" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch_pr" />
          <column table="this" column="pow_cnt_pr" />
        </call>
        <call function="+nvl" as="pow_km_all_fact" title="Ввод КМ факт" description="Фактический ввод физических параметров (МВА)" agg="sum" key="0">
          <column table="this" column="pow_km_fact" />
          <column table="this" column="pow_km_kl_fact" />
        </call>
        <call function="+nvl" as="pow_km_all_fact_date" title="Ввод КМ факт" description="Фактический ввод физических параметров (МВА)" stored="0" agg="sum" key="0">
          <column table="this" column="pow_km_fact_date" />
          <column table="this" column="pow_km_kl_fact_date" />
        </call>
        <call function="+nvl" as="pow_km_all_wait" title="Ввод КМ ожид. факт" description="Фактический ввод физических параметров (МВА)" stored="0" agg="sum" key="0">
          <column table="this" column="pow_km_wait" />
          <column table="this" column="pow_km_kl_wait" />
        </call>
        <call function="+nvl" as="pow_other_fact" title="Ввод другие ед. изм. факт" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch_fact" />
          <column table="this" column="pow_cnt_fact" />
        </call>
        <call function="+nvl" as="pow_km_all_fact_pr" title="Прирост КМ факт" agg="sum" key="0">
          <column table="this" column="pow_km_fact_pr" />
          <column table="this" column="pow_km_kl_fact_pr" />
        </call>
        <call function="+nvl" as="pow_km_all_wait_pr" title="Прирост КМ факт" stored="0" agg="sum" key="0">
          <column table="this" column="pow_km_wait_pr" />
          <column table="this" column="pow_km_kl_wait_pr" />
        </call>
        <call function="+nvl" as="pow_other_fact_pr" title="Прирост другие ед. изм. факт" agg="sum" key="0">
          <column table="this" column="pow_cnt_proch_fact" />
          <column table="this" column="pow_cnt_fact" />
        </call>
        <column table="ipr_fin_power_date" column="km_kl_fact_date" as="pow_km_kl_fact_date" agg="sum" group="sum" stored="0" key="0" />
        <column table="ipr_fin_power_date" column="km_fact_date" as="pow_km_fact_date" agg="sum" group="sum" stored="0" key="0" />
        <column table="ipr_fin_power_date" column="cnt_fact_date" as="pow_cnt_fact_date" agg="sum" group="sum" stored="0" key="0" />
        <column table="ipr_fin_power_date" column="cnt_proch_fact_date" as="pow_cnt_proch_fact_date" agg="sum" group="sum" stored="0" key="0" />
        <column table="ipr_fin_power_date" column="mba_fact_date" as="pow_mba_fact_date" agg="sum" group="sum" stored="0" key="0" />
        <column table="ipr_fin_kap_fact_dog" column="vsego" as="kap_sum_nds_fact_a" group="sum" title="Фактический объем освоения c НДС (без перебросок)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_dog" column="nds" as="kap_nds_fact_a" group="sum" title="Фактический объем освоения НДС(без перебросок)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="summ_per" as="kap_sum_fact_per" group="sum" title="Фактический объем освоения без НДС (передано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="nds_per" as="kap_nds_fact_per" group="sum" title="Фактический объем освоения НДС (передано)" agg="sum" key="0" />
        <call function="+nvl" as="kap_sum_nds_fact_per" title="Фактический объем освоения с НДС (передано)" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_per" />
          <column table="this" column="kap_nds_fact_per" />
        </call>
        <column table="ipr_fin_kap_fact_mfr" column="summ_per_pr" as="kap_sum_fact_per_pr" group="sum" title="Фактический объем освоения прочие без НДС (передано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="nds_per_pr" as="kap_nds_fact_per_pr" group="sum" title="Фактический объем освоения  прочие  НДС (передано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="summ_sp" as="kap_sum_fact_sp" group="sum" title="Фактический объем освоения без НДС (списано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="nds_sp" as="kap_nds_fact_sp" group="sum" title="Фактический объем освоения НДС (списано)" agg="sum" key="0" />
        <call function="+nvl" as="kap_sum_nds_fact_sp" title="Фактический объем освоения с НДС (списано)" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_sp" />
          <column table="this" column="kap_nds_fact_sp" />
        </call>
        <column table="ipr_fin_kap_fact_mfr" column="summ_sp_pr" as="kap_sum_fact_sp_pr" group="sum" title="Фактический объем освоения прочие без НДС (списано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mfr" column="nds_sp_pr" as="kap_nds_fact_sp_pr" group="sum" title="Фактический объем освоения  прочие  НДС (списано)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mto" column="summ" as="kap_sum_fact_pri" group="sum" title="Фактический объем освоения без НДС (принято)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mto" column="nds" as="kap_nds_fact_pri" group="sum" title="Фактический объем освоения НДС (принято)" agg="sum" key="0" />
        <call function="+nvl" as="kap_sum_nds_fact_pri" title="Фактический объем освоения с НДС (принято)" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_pri" />
          <column table="this" column="kap_nds_fact_pri" />
        </call>
        <column table="ipr_fin_kap_fact_mto" column="summ_pr" as="kap_sum_fact_pri_pr" group="sum" title="Фактический объем освоения прочие без НДС (принято)" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_mto" column="nds_pr" as="kap_nds_fact_pri_pr" group="sum" title="Фактический объем освоения прочие НДС (принято)" agg="sum" key="0" />
        <call function="-nvl" as="kap_sum_nds_fact" agg="sum" title="Фактический объем освоения c НДС" key="0">
          <call function="+nvl">
            <column table="this" column="kap_sum_nds_fact_a" />
            <column table="this" column="kap_sum_nds_fact_pri" />
          </call>
          <column table="this" column="kap_sum_nds_fact_per" />
        </call>
        <call function="-nvl" as="kap_nds_fact" agg="sum" title="Фактический объем освоения НДС" key="0">
          <call function="+nvl">
            <column table="this" column="kap_nds_fact_a" />
            <column table="this" column="kap_nds_fact_pri" />
          </call>
          <column table="this" column="kap_nds_fact_per" />
        </call>
        <column table="ipr_fin_finplan_fact_dog" column="sum_opl" as="fp_fact_sum" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_dog_pr" column="vsego" as="fp_fact_sum_pr" group="sum" agg="sum" key="0" />
        <call function="+nvl" as="fp_sum_nds_fact_a" title="Фактический объем финансирования c НДС (без перебросок)" agg="sum" key="0">
          <column table="this" column="fp_fact_sum" />
          <column table="this" column="fp_fact_sum_pr" />
        </call>
        <column table="ipr_fin_finplan_fact_dog" column="nds" as="fp_fact_nds" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_dog_pr" column="nds" as="fp_fact_nds_pr" group="sum" agg="sum" key="0" />
        <call function="+nvl" as="fp_nds_fact_a" title="Фактический объем финансирования НДС (без перебросок)" agg="sum" key="0">
          <column table="this" column="fp_fact_nds" />
          <column table="this" column="fp_fact_nds_pr" />
        </call>
        <column table="ipr_fin_finplan_fact_mfr" column="summ_per" as="fp_sum_fact_per1" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan_fact_mfr" column="nds_per" as="fp_nds_fact_per1" group="sum" agg="sum" key="0" />
        <call function="+nvl" as="fp_sum_fact_per" title="Фактический объем финансирования без НДС (передано)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_per1" />
          <column table="this" column="kap_sum_fact_per_pr" />
        </call>
        <call function="+nvl" as="fp_nds_fact_per" title="Фактический объем финансирования НДС (передано)" agg="sum" key="0">
          <column table="this" column="fp_nds_fact_per1" />
          <column table="this" column="kap_nds_fact_per_pr" />
        </call>
        <call function="+nvl" as="fp_sum_nds_fact_per" title="Фактический объем финансирования с НДС (передано)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_per" />
          <column table="this" column="fp_nds_fact_per" />
        </call>
        <column table="ipr_fin_finplan_fact_mfr" column="summ_sp" as="fp_sum_fact_sp1" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan_fact_mfr" column="nds_sp" as="fp_nds_fact_sp1" group="sum" agg="sum" key="0" />
        <call function="+nvl" as="fp_sum_fact_sp" title="Фактический объем финансирования без НДС (списано)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_sp1" />
          <column table="this" column="kap_sum_fact_sp_pr" />
        </call>
        <call function="+nvl" as="fp_nds_fact_sp" title="Фактический объем финансирования НДС (списано)" agg="sum" key="0">
          <column table="this" column="fp_nds_fact_sp1" />
          <column table="this" column="kap_nds_fact_sp_pr" />
        </call>
        <call function="+nvl" as="fp_sum_nds_fact_sp" title="Фактический объем финансирования с НДС (списано)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_sp" />
          <column table="this" column="fp_nds_fact_sp" />
        </call>
        <column table="ipr_fin_finplan_fact_mto" column="summ" as="fp_sum_fact_pri1" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_finplan_fact_mto" column="nds" as="fp_nds_fact_pri1" group="sum" agg="sum" key="0" />
        <call function="+nvl" as="fp_sum_fact_pri" title="Фактический объем финансирования без НДС (принято)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_pri1" />
          <column table="this" column="kap_sum_fact_pri_pr" />
        </call>
        <call function="+nvl" as="fp_nds_fact_pri" title="Фактический объем финансирования НДС (принято)" agg="sum" key="0">
          <column table="this" column="fp_nds_fact_pri1" />
          <column table="this" column="kap_nds_fact_pri_pr" />
        </call>
        <call function="+nvl" as="fp_sum_nds_fact_pri" title="Фактический объем финансирования с НДС (принято)" agg="sum" key="0">
          <column table="this" column="fp_sum_fact_pri" />
          <column table="this" column="fp_nds_fact_pri" />
        </call>
        <call function="-nvl" as="fp_sum_nds_fact" agg="sum" title="Фактический объем финансирования c НДС" key="0">
          <call function="+nvl">
            <column table="this" column="fp_sum_nds_fact_a" />
            <column table="this" column="fp_sum_nds_fact_pri" />
          </call>
          <column table="this" column="fp_sum_nds_fact_per" />
        </call>
        <call function="-nvl" as="fp_nds_fact" agg="sum" title="Фактический объем финансирования НДС" key="0">
          <call function="+nvl">
            <column table="this" column="fp_nds_fact_a" />
            <column table="this" column="fp_nds_fact_pri" />
          </call>
          <column table="this" column="fp_nds_fact_per" />
        </call>
        <!--<column table="ipr_fin_vvod_fact_dog" column="summ" as="vvod_sum_fact_a" group="sum" agg="sum" />
        <column table="ipr_fin_vvod_fact_dog_mto" column="summ" as="vvod_sum_fact_pri" group="sum" agg="sum" />
        <call function="+nvl" as="vvod_sum_fact" title="Фактический ввод в без НДС" agg="sum" description="Фактический ввод в основные фонды без НДС">
          <column table="this" column="vvod_sum_fact_a" />
          <column table="this" column="vvod_sum_fact_pri" />
        </call>-->
        <column table="ipr_fin_vvod_fact_dog" column="summ" as="vvod_sum_fact" group="sum" agg="sum" title="Фактический ввод в без НДС" key="0" />
        <call function="-nvl" as="kap_sum_fact" title="Фактический объем освоения без НДС" agg="sum" class-title="Освоение капиталовложений" key="0">
          <column table="this" column="kap_sum_nds_fact" />
          <column table="this" column="kap_nds_fact" />
        </call>
        <call function="-nvl" as="kap_sum_fact_a" title="Фактический объем освоения без НДС" agg="sum" class-title="Освоение капиталовложений" stored="0" key="0">
          <column table="this" column="kap_sum_nds_fact_a" />
          <column table="this" column="kap_nds_fact_a" />
        </call>
        <call function="-nvl" as="fp_sum_fact" title="Фактический объем финансирования без НДС" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_fact" />
          <column table="this" column="fp_nds_fact" />
        </call>
        <column table="ipr_fin_ipr200" column="km" group="sum" agg="sum" as="km" key="0" />
        <column table="ipr_fin_ipr250" column="km_kl" group="sum" agg="sum" as="km_kl" key="0" />
        <column table="ipr_fin_ipr100" column="pow" group="sum" agg="sum" as="pow" key="0" />
        <column table="ipr_fin_ipr300" column="other" group="sum" agg="sum" as="other" key="0" />
        <column table="ipr_fin_ipr" column="ipr_fin_ipr" group="sum" agg="sum" as="ipr_fin_ipr" key="0" />
        <column table="ipr_fin_smet" column="summ_s" group="sum" agg="sum" as="summ_s" key="0" />
        <!--!!! есть дубли. Почистить-->
        <column table="ipr_fin_smet" column="sum_psd" group="sum" agg="sum" as="sum_psd" key="0" />
        <column table="ipr_fin_smet" column="sum_utvpsd" group="sum" agg="sum" as="sum_utvpsd" key="0" />
        <column table="ipr_fin_smet" column="sum_usr" group="sum" agg="sum" as="sum_usr" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_smet" as="summ_smet_tek" group="sum" agg="sum" key="0" />
        <call function="over" as="summ_smet_tek_on_doc" key="0">
          <call function="sum">
            <column table="this" column="summ_smet_tek" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
            <column table="this" column="kod_doc_smet" group="1" />
          </call>
        </call>
        <column table="ipr_fin_smet" column="summ_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС с  НДС" as="summ_nds_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_10_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% с НДС" as="summ_10_nds_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_30_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% с НДС" as="summ_30_nds_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_usr" agg="sum" group="sum" title="Сметная стоимость по УРС без НДС" as="summ_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_10_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% без НДС" as="summ_10_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_30_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% без НДС" as="summ_30_usr" key="0" />
        <column table="ipr_fin_smet" column="summ_nds_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД с НДС" as="summ_nds_psd" key="0" />
        <column table="ipr_fin_smet" column="summ_nds_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% с НДС" as="summ_nds_psd_10" key="0" />
        <column table="ipr_fin_smet" column="summ_nds_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% с НДС" as="summ_nds_psd_30" key="0" />
        <column table="ipr_fin_smet" column="summ_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД без НДС" as="summ_psd" key="0" />
        <column table="ipr_fin_smet" column="summ_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% без НДС" as="summ_psd_10" key="0" />
        <column table="ipr_fin_smet" column="summ_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% без НДС" as="summ_psd_30" key="0" />
        <column table="ipr_fin_smet" column="summ_nds_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД с НДС" as="summ_nds_utvpsd" key="0" />
        <column table="ipr_fin_smet" column="summ_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД без НДС" as="summ_utvpsd" key="0" />
        <column table="ipr_fin_smet" column="all_psd" agg="sum" group="sum" title="Сметная величина по ПСД  без НДС" stored="0" as="all_psd" key="0" />
        <column table="ipr_fin_smet" column="all_psd_10" agg="sum" group="sum" title="Сметная величина по ПСД -10% без НДС" stored="0" as="all_psd_10" key="0" />
        <column table="ipr_fin_smet" column="all_psd_30" agg="sum" group="sum" title="Сметная величина по ПСД -30% без НДС" stored="0" as="all_psd_30" key="0" />
        <column table="ipr_fin_smet" column="all_usr" agg="sum" group="sum" title="Сметная величина по УРС  без НДС" stored="0" as="all_usr" key="0" />
        <column table="ipr_fin_smet" column="all_10_usr" agg="sum" group="sum" title="Сметная величина по УРС -10% без НДС" stored="0" as="all_10_usr" key="0" />
        <column table="ipr_fin_smet" column="all_30_usr" agg="sum" group="sum" title="Сметная величина по УРС -30% без НДС" stored="0" as="all_30_usr" key="0" />
        <column table="ipr_fin_smet" column="all_utvpsd" agg="sum" group="sum" title="Утвержденная величина по ПСД  без НДС" stored="0" as="all_utvpsd" key="0" />
        <column table="ipr_fin_smet" column="mva_psd_30" agg="sum" group="sum" as="mva_psd_30" key="0" />
        <column table="ipr_fin_smet" column="mva_30_usr" agg="sum" group="sum" as="mva_30_usr" key="0" />
        <column table="ipr_fin_smet" column="kl_km_psd_30" agg="sum" group="sum" as="kl_km_psd_30" key="0" />
        <column table="ipr_fin_smet" column="kl_km_30_usr" agg="sum" group="sum" as="kl_km_30_usr" key="0" />
        <column table="ipr_fin_smet" column="vl_km_psd_30" agg="sum" group="sum" as="vl_km_psd_30" key="0" />
        <column table="ipr_fin_smet" column="vl_km_30_usr" agg="sum" group="sum" as="vl_km_30_usr" key="0" />
        <column table="ipr_fin_smet" column="prch_psd_30" agg="sum" group="sum" as="prch_psd_30" key="0" />
        <column table="ipr_fin_smet" column="prch_30_usr" agg="sum" group="sum" as="prch_30_usr" key="0" />
        <call function="nvl" as="summ_30_mva" title="Полная стоимость строительства (-30%) МВА " type="number" agg="sum" key="0">
          <column table="this" column="mva_psd_30" />
          <column table="this" column="mva_30_usr" />
        </call>
        <call function="nvl" as="summ_30_kl_km" title="Полная стоимость строительства (-30%) КЛ, км " type="number" agg="sum" key="0">
          <column table="this" column="kl_km_psd_30" />
          <column table="this" column="kl_km_30_usr" />
        </call>
        <call function="nvl" as="summ_30_vl_km" title="Полная стоимость строительства (-30%) ВЛ, км " type="number" agg="sum" key="0">
          <column table="this" column="vl_km_psd_30" />
          <column table="this" column="vl_km_30_usr" />
        </call>
        <call function="nvl" as="summ_30_prch" title="Полная стоимость строительства (-30%) Прочее " type="number" agg="sum" key="0">
          <column table="this" column="prch_psd_30" />
          <column table="this" column="prch_30_usr" />
        </call>
        <call function="over" as="summ_utvpsd_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_utvpsd" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_psd" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_usr" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_10_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_psd_10" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_30_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_psd_30" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_10_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_10_usr" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_30_tit" key="0">
          <call function="sum">
            <column table="this" column="summ_30_usr" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="smallest not 0" as="summ_k_rasp_psd_tit" stored="0" agg="sum" key="0">
          <column table="this" column="summ_utvpsd_tit" />
          <column table="this" column="summ_psd_tit" />
          <column table="this" column="summ_psd_10_tit" />
          <column table="this" column="summ_psd_30_tit" />
        </call>
        <call function="smallest not 0" as="summ_k_rasp_usr_tit" stored="0" agg="sum" key="0">
          <column table="this" column="summ_usr_tit" />
          <column table="this" column="summ_usr_10_tit" />
          <column table="this" column="summ_usr_30_tit" />
        </call>
        <call function="nvl" as="summ_k_rasp_all" stored="0" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_psd_tit" />
          <column table="this" column="summ_k_rasp_usr_tit" />
        </call>
        <call function="decode" as="summ_k_rasp_psd" type="number" title="Сметная стоимость к распределению ПСД без НДС " agg="sum" key="0">
          <column table="this" column="summ_k_rasp_psd_tit" />
          <column table="this" column="summ_utvpsd_tit" />
          <column table="this" column="summ_utvpsd" />
          <column table="this" column="summ_psd_tit" />
          <column table="this" column="summ_psd" />
          <column table="this" column="summ_psd_10_tit" />
          <column table="this" column="summ_psd_10" />
          <column table="this" column="summ_psd_30_tit" />
          <column table="this" column="summ_psd_30" />
        </call>
        <call function="decode" as="summ_k_rasp_usr" type="number" title="Сметная стоимость к распределению УСР без НДС " agg="sum" key="0">
          <column table="this" column="summ_k_rasp_usr_tit" />
          <column table="this" column="summ_usr_tit" />
          <column table="this" column="summ_usr" />
          <column table="this" column="summ_usr_10_tit" />
          <column table="this" column="summ_10_usr" />
          <column table="this" column="summ_usr_30_tit" />
          <column table="this" column="summ_30_usr" />
        </call>
        <call function="decode" as="summ_k_rasp" type="number" title="Сметная стоимость к распределению без НДС " agg="sum" key="0">
          <column table="this" column="summ_k_rasp_all" />
          <column table="this" column="summ_utvpsd_tit" />
          <column table="this" column="summ_utvpsd" />
          <column table="this" column="summ_psd_tit" />
          <column table="this" column="summ_psd" />
          <column table="this" column="summ_usr_tit" />
          <column table="this" column="summ_usr" />
          <column table="this" column="summ_psd_10_tit" />
          <column table="this" column="summ_psd_10" />
          <column table="this" column="summ_psd_30_tit" />
          <column table="this" column="summ_psd_30" />
          <column table="this" column="summ_usr_10_tit" />
          <column table="this" column="summ_10_usr" />
          <column table="this" column="summ_usr_30_tit" />
          <column table="this" column="summ_30_usr" />
        </call>
        <call function="smallest" as="summ_k_rasp_tit" stored="0" agg="sum" key="0">
          <column table="this" column="summ_psd_tit" />
          <column table="this" column="summ_usr_tit" />
        </call>
        <call function="decode" as="summ_k_rasp_old" type="number" stored="0" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_tit" />
          <column table="this" column="summ_psd_tit" />
          <column table="this" column="summ_psd" />
          <column table="this" column="summ_usr_tit" />
          <column table="this" column="summ_usr" />
        </call>
        <column table="ipr_fin_smet_tek" column="summ_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС с  НДС (тек.)" as="summ_nds_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_10_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% с НДС (тек.)" as="summ_10_nds_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_30_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% с НДС (тек.)" as="summ_30_nds_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_usr" agg="sum" group="sum" title="Сметная стоимость по УРС без НДС (тек.)" as="summ_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_10_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% без НДС (тек.)" as="summ_10_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_30_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% без НДС (тек.)" as="summ_30_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_nds_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД с НДС (тек.)" as="summ_nds_psd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_nds_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% с НДС (тек.)" as="summ_nds_psd_10_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_nds_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% с НДС (тек.)" as="summ_nds_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД без НДС (тек.)" as="summ_psd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% без НДС (тек.)" as="summ_psd_10_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% без НДС (тек.)" as="summ_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_nds_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД с НДС (тек.)" as="summ_nds_utvpsd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="summ_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД без НДС (тек.)" as="summ_utvpsd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_psd" agg="sum" group="sum" title="Сметная величина по ПСД  без НДС (тек.)" stored="0" as="all_psd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_psd_10" agg="sum" group="sum" title="Сметная величина по ПСД -10% без НДС (тек.)" stored="0" as="all_psd_10_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_psd_30" agg="sum" group="sum" title="Сметная величина по ПСД -30% без НДС (тек.)" stored="0" as="all_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_usr" agg="sum" group="sum" title="Сметная величина по УРС  без НДС (тек.)" stored="0" as="all_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_10_usr" agg="sum" group="sum" title="Сметная величина по УРС -10% без НДС (тек.)" stored="0" as="all_10_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_30_usr" agg="sum" group="sum" title="Сметная величина по УРС -30% без НДС (тек.)" stored="0" as="all_30_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="all_utvpsd" agg="sum" group="sum" title="Утвержденная величина по ПСД  без НДС (тек.)" stored="0" as="all_utvpsd_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="mva_psd_30" agg="sum" group="sum" as="mva_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="mva_30_usr" agg="sum" group="sum" as="mva_30_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="kl_km_psd_30" agg="sum" group="sum" as="kl_km_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="kl_km_30_usr" agg="sum" group="sum" as="kl_km_30_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="vl_km_psd_30" agg="sum" group="sum" as="vl_km_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="vl_km_30_usr" agg="sum" group="sum" as="vl_km_30_usr_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="prch_psd_30" agg="sum" group="sum" as="prch_psd_30_tek" key="0" />
        <column table="ipr_fin_smet_tek" column="prch_30_usr" agg="sum" group="sum" as="prch_30_usr_tek" key="0" />
        <call function="nvl" as="summ_30_mva_tek" title="Полная стоимость строительства (-30%) МВА  (тек.)" type="number" agg="sum" key="0">
          <column table="this" column="mva_psd_30_tek" />
          <column table="this" column="mva_30_usr_tek" />
        </call>
        <call function="nvl" as="summ_30_kl_km_tek" title="Полная стоимость строительства (-30%) КЛ, км  (тек.)" type="number" agg="sum" key="0">
          <column table="this" column="kl_km_psd_30_tek" />
          <column table="this" column="kl_km_30_usr_tek" />
        </call>
        <call function="nvl" as="summ_30_vl_km_tek" title="Полная стоимость строительства (-30%) ВЛ, км  (тек.)" type="number" agg="sum" key="0">
          <column table="this" column="vl_km_psd_30_tek" />
          <column table="this" column="vl_km_30_usr_tek" />
        </call>
        <call function="nvl" as="summ_30_prch_tek" title="Полная стоимость строительства (-30%) Прочее  (тек.)" type="number" agg="sum" key="0">
          <column table="this" column="prch_psd_30_tek" />
          <column table="this" column="prch_30_usr_tek" />
        </call>
        <call function="over" as="summ_utvpsd_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_utvpsd_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_psd_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_usr_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_10_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_psd_10_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_psd_30_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_psd_30_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_10_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_10_usr_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="summ_usr_30_tit_tek" key="0">
          <call function="sum">
            <column table="this" column="summ_30_usr_tek" stored="0" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="smallest not 0" as="summ_k_rasp_psd_tit_tek" stored="0" agg="sum" key="0">
          <column table="this" column="summ_utvpsd_tit_tek" />
          <column table="this" column="summ_psd_tit_tek" />
          <column table="this" column="summ_psd_10_tit_tek" />
          <column table="this" column="summ_psd_30_tit_tek" />
        </call>
        <call function="smallest not 0" as="summ_k_rasp_usr_tit_tek" stored="0" agg="sum" key="0">
          <column table="this" column="summ_usr_tit_tek" />
          <column table="this" column="summ_usr_10_tit_tek" />
          <column table="this" column="summ_usr_30_tit_tek" />
        </call>
        <call function="nvl" as="summ_k_rasp_all_tek" stored="0" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_psd_tit_tek" />
          <column table="this" column="summ_k_rasp_usr_tit_tek" />
        </call>
        <call function="decode" as="summ_k_rasp_psd_tek" type="number" title="Сметная стоимость к распределению ПСД без НДС  (тек.)" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_psd_tit_tek" />
          <column table="this" column="summ_utvpsd_tit_tek" />
          <column table="this" column="summ_utvpsd_tek" />
          <column table="this" column="summ_psd_tit_tek" />
          <column table="this" column="summ_psd_tek" />
          <column table="this" column="summ_psd_10_tit_tek" />
          <column table="this" column="summ_psd_10_tek" />
          <column table="this" column="summ_psd_30_tit_tek" />
          <column table="this" column="summ_psd_30_tek" />
        </call>
        <call function="decode" as="summ_k_rasp_usr_tek" type="number" title="Сметная стоимость к распределению УСР без НДС  (тек.)" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_usr_tit_tek" />
          <column table="this" column="summ_usr_tit_tek" />
          <column table="this" column="summ_usr_tek" />
          <column table="this" column="summ_usr_10_tit_tek" />
          <column table="this" column="summ_10_usr_tek" />
          <column table="this" column="summ_usr_30_tit_tek" />
          <column table="this" column="summ_30_usr_tek" />
        </call>
        <call function="decode" as="summ_k_rasp_tek" type="number" title="Сметная стоимость к распределению без НДС  (тек.)" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_all_tek" />
          <column table="this" column="summ_utvpsd_tit_tek" />
          <column table="this" column="summ_utvpsd_tek" />
          <column table="this" column="summ_psd_tit_tek" />
          <column table="this" column="summ_psd_tek" />
          <column table="this" column="summ_usr_tit_tek" />
          <column table="this" column="summ_usr_tek" />
          <column table="this" column="summ_psd_10_tit_tek" />
          <column table="this" column="summ_psd_10_tek" />
          <column table="this" column="summ_psd_30_tit_tek" />
          <column table="this" column="summ_psd_30_tek" />
          <column table="this" column="summ_usr_10_tit_tek" />
          <column table="this" column="summ_10_usr_tek" />
          <column table="this" column="summ_usr_30_tit_tek" />
          <column table="this" column="summ_30_usr_tek" />
        </call>
        <call function="smallest" as="summ_k_rasp_tit_tek" stored="0" agg="sum" key="0">
          <column table="this" column="summ_psd_tit_tek" />
          <column table="this" column="summ_usr_tit_tek" />
        </call>
        <call function="decode" as="summ_k_rasp_old_tek" type="number" stored="0" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_tit_tek" />
          <column table="this" column="summ_psd_tit_tek" />
          <column table="this" column="summ_psd_tek" />
          <column table="this" column="summ_usr_tit_tek" />
          <column table="this" column="summ_usr_tek" />
        </call>
        <call function="coalesce" as="summ" title="Полная стоимость строительства" type="number" agg="sum" key="0">
          <column table="this" column="summ_nds_psd" />
          <column table="this" column="summ_nds_utvpsd" />
          <column table="this" column="summ_nds_usr" />
        </call>
        <call function="coalesce" as="summ_bn" title="Полная стоимость строительства без НДС" type="number" agg="sum" key="0">
          <column table="this" column="summ_psd" />
          <column table="this" column="summ_utvpsd" />
          <column table="this" column="summ_usr" />
        </call>
        <call function="nvl" as="summ_10" title="Полная стоимость строительства (-10%)" type="number" agg="sum" key="0">
          <column table="this" column="summ_nds_psd_10" />
          <column table="this" column="summ_10_nds_usr" />
        </call>
        <call function="nvl" as="summ_10_bn" title="Полная стоимость строительства (-10%) без НДС" type="number" agg="sum" key="0">
          <column table="this" column="summ_psd_10" />
          <column table="this" column="summ_10_usr" />
        </call>
        <call function="nvl" as="summ_30" title="Полная стоимость строительства (-30%)" type="number" agg="sum" key="0">
          <column table="this" column="summ_nds_psd_30" />
          <column table="this" column="summ_30_nds_usr" />
        </call>
        <call function="nvl" as="summ_30_bn" title="Полная стоимость строительства (-30%) без НДС" type="number" agg="sum" key="0">
          <column table="this" column="summ_psd_30" />
          <column table="this" column="summ_30_usr" />
        </call>
        <call function="over" as="kza" key="0">
          <call function="sum">
            <column table="this" column="kz" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="dza" key="0">
          <call function="sum">
            <column table="this" column="dz" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="over" as="znzs" key="0">
          <call function="sum">
            <column table="this" column="nzs_saldo" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <call function="if" as="zsaldo1" type="number" agg="sum" key="0">
          <call function="is null">
            <call function="nvl">
              <column table="this" column="dz" />
              <column table="this" column="kz" />
            </call>
          </call>
          <const>null</const>
          <call function="-nvl">
            <column table="this" column="dz" />
            <column table="this" column="kz" />
          </call>
        </call>
        <call function="over" as="zsaldo" key="0">
          <call function="sum">
            <column table="this" column="zsaldo1" agg="sum" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" group="1" />
            <column table="this" column="kod_ipr_ext" group="1" />
          </call>
        </call>
        <column table="ipr_fin_ipr" column="dz" group="sum" agg="sum" as="dz" key="0" />
        <column table="ipr_fin_ipr" column="kz" group="sum" agg="sum" as="kz" key="0" />
        <column table="ipr_fin_ipr" column="saldo" as="nzs_saldo" group="sum" agg="sum" key="0" />
        <column table="this" column="kap_sum" as="kap_sum_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_nds" as="kap_sum_nds_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds" as="kap_nds_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_sum_nds" as="fp_sum_nds_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_nds" as="fp_nds_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvod_sum" as="vvod_sum_itog" cumulate="ym" agg="sum" key="0" />
        <call function="-nvl" as="saldo" agg="sum" key="0">
          <column table="this" column="fp_sum_nds" />
          <column table="this" column="kap_sum_nds" />
        </call>
        <call function="if" as="debet" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="saldo" />
            <const>0</const>
          </call>
          <column table="this" column="saldo" />
        </call>
        <call function="if" as="kredit" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="saldo" />
            <const>0</const>
          </call>
          <call function="*">
            <column table="this" column="saldo" />
            <const>-1</const>
          </call>
        </call>
        <call function="-nvl" as="nzs" agg="sum" key="0">
          <column table="this" column="kap_sum" />
          <column table="this" column="vvod_sum" />
        </call>
        <column table="this" column="saldo" as="saldo_itog" cumulate="ym" agg="sum" key="0" />
        <call function="if" as="debet_itog" virtual="1" title="Дебиторская задолженность с НДС" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_itog" />
        </call>
        <call function="if" as="kredit_itog" virtual="1" title="Кредиторская задолженность с НДС" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_ipr" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_itog" />
          </call>
        </call>
        <call function="if" as="debet_itog_smet" virtual="1" title="Дебиторская задолженность с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_itog" />
        </call>
        <call function="if" as="kredit_itog_smet" virtual="1" title="Кредиторская задолженность с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_itog" />
          </call>
        </call>
        <call function="if" as="debet_itog_dog" virtual="1" title="Дебиторская задолженность с НДС(на уровне договора)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_itog" />
        </call>
        <call function="if" as="kredit_itog_dog" virtual="1" title="Кредиторская задолженность с НДС(на уровне договора)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_itog" />
          </call>
        </call>
        <column table="this" column="nzs" as="nzs_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_wait" as="kap_sum_wait_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_nds_wait" as="kap_sum_nds_wait_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds_wait" as="kap_nds_wait_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_sum_nds_wait" as="fp_sum_nds_wait_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_nds_wait" as="fp_nds_wait_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvod_sum_wait" as="vvod_sum_wait_itog" cumulate="ym" agg="sum" key="0" />
        <call function="-nvl" as="saldo_wait" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_wait" />
          <column table="this" column="kap_sum_nds_wait" />
        </call>
        <call function="if" as="debet_wait" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="saldo_wait" />
            <const>0</const>
          </call>
          <column table="this" column="saldo_wait" />
        </call>
        <call function="if" as="kredit_wait" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="saldo_wait" />
            <const>0</const>
          </call>
          <call function="*">
            <column table="this" column="saldo_wait" />
            <const>-1</const>
          </call>
        </call>
        <call function="-nvl" as="nzs_wait" agg="sum" key="0">
          <column table="this" column="kap_sum_wait" />
          <column table="this" column="vvod_sum_wait" />
        </call>
        <column table="this" column="saldo_wait" as="saldo_wait_itog" cumulate="ym" agg="sum" key="0" />
        <call function="if" as="debet_wait_itog" virtual="1" title="Дебиторская задолженность с НДС" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_wait_itog" />
        </call>
        <call function="if" as="kredit_wait_itog" virtual="1" title="Кредиторская задолженность с НДС" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_ipr" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_wait_itog" />
          </call>
        </call>
        <call function="if" as="debet_wait_itog_smet" virtual="1" title="Дебиторская задолженность с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_wait_itog" />
        </call>
        <call function="if" as="kredit_wait_itog_smet" virtual="1" title="Кредиторская задолженность с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_wait_itog" />
          </call>
        </call>
        <call function="if" as="debet_wait_itog_dog" virtual="1" title="Дебиторская задолженность с НДС(на уровне договора)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_wait_itog" />
        </call>
        <call function="if" as="kredit_wait_itog_dog" virtual="1" title="Кредиторская задолженность с НДС(на уровне договора)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_wait_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_wait_itog" />
          </call>
        </call>
        <column table="this" column="nzs_wait" as="nzs_wait_itog" cumulate="ym" agg="sum" key="0" />
        <call function="row_number" as="rn_dog" type="number" group="max" agg="max" key="0">
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="ym" />
          </call>
          <call function="order by 2">
            <const>null</const>
          </call>
        </call>
        <call function="over" as="ym_nxt_dog" type="number" group="max" agg="max" key="0">
          <call function="first_value">
            <column table="this" column="ym" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
          </call>
          <call function="order by range 1 *">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="row_number" as="rn_smet" type="number" group="max" agg="max" key="0">
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="kod_smet" />
            <column table="this" column="ym" />
          </call>
          <call function="order by 2">
            <const>null</const>
          </call>
        </call>
        <call function="over" as="ym_nxt_smet" type="number" group="max" agg="max" key="0">
          <call function="first_value">
            <column table="this" column="ym" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="kod_smet" />
          </call>
          <call function="order by range 1 *">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="over" as="sld_dog" type="number" title="Сальдо(договор)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_dog" function="if" title="Дебет (договор)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_dog" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_dog" group="" />
        </call>
        <call as="kred_dog" function="if" title="Кредит (договор)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_dog" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_dog" group="" />
          </call>
        </call>
        <call function="over" as="sld_smet" type="number" title="Сальдо(строка сметы)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="kod_smet" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_smet" function="if" title="Дебет (строка сметы)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_smet" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_smet" group="" />
        </call>
        <call as="kred_smet" function="if" title="Кредит (строка сметы)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_smet" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_smet" group="" />
          </call>
        </call>
        <call function="over" as="sld_wait_dog" type="number" title="Сальдо(договор)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo_wait" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_wait_dog" function="if" title="Дебет (договор)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_wait_dog" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_wait_dog" group="" />
        </call>
        <call as="kred_wait_dog" function="if" title="Кредит (договор)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_wait_dog" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_wait_dog" group="" />
          </call>
        </call>
        <call function="over" as="sld_wait_smet" type="number" title="Сальдо(строка сметы)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo_wait" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="kod_smet" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_wait_smet" function="if" title="Дебет (строка сметы)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_wait_smet" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_wait_smet" group="" />
        </call>
        <call as="kred_wait_smet" function="if" title="Кредит (строка сметы)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_wait_smet" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_wait_smet" group="" />
          </call>
        </call>
        <call function="over" as="sld_fact_dog" type="number" title="Сальдо(договор)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo_fact" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_fact_dog" function="if" title="Дебет (договор)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_fact_dog" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_fact_dog" group="" />
        </call>
        <call as="kred_fact_dog" function="if" title="Кредит (договор)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_fact_dog" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_fact_dog" group="" />
          </call>
        </call>
        <call function="over" as="sld_fact_smet" type="number" title="Сальдо(строка сметы)" group="sum" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="saldo_fact" group="" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
            <column table="this" column="kod_dog_i" />
            <column table="this" column="kod_smet" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call as="deb_fact_smet" function="if" title="Дебет (строка сметы)" group="sum" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="sld_fact_smet" group="" />
            <const>0</const>
          </call>
          <column table="this" column="sld_fact_smet" group="" />
        </call>
        <call as="kred_fact_smet" function="if" title="Кредит (строка сметы)" group="sum" agg="sum" key="0">
          <call function="lt">
            <column table="this" column="sld_fact_smet" group="" />
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="sld_fact_smet" group="" />
          </call>
        </call>
        <call function="over" as="has_plan" type="number" agg="sum" key="0">
          <call function="max">
            <call function="if">
              <call function="not 0">
                <column table="this" column="kap_sum" />
                <column table="this" column="vvod_sum" />
                <column table="this" column="fp_sum" />
                <column table="this" column="dz" />
                <column table="this" column="kz" />
                <column table="this" column="nzs_saldo" />
              </call>
              <const>1</const>
              <const>0</const>
            </call>
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
          </call>
        </call>
        <call function="over" as="summ_on_ipr" type="number" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="summ" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
          </call>
        </call>
        <call function="over" as="summ_10_on_ipr" type="number" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="summ_10" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
          </call>
        </call>
        <call function="over" as="summ_30_on_ipr" type="number" agg="sum" key="0">
          <call function="sum">
            <column table="this" column="summ_30" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
          </call>
        </call>
        <call function="smallest" as="summ_k_rasp_on_ipr" agg="sum" key="0">
          <column table="this" column="summ_on_ipr" />
          <column table="this" column="summ_10_on_ipr" />
          <column table="this" column="summ_30_on_ipr" />
        </call>
        <call function="decode" as="summ_k_rasp_id" type="number" agg="sum" key="0">
          <column table="this" column="summ_k_rasp_on_ipr" />
          <column table="this" column="summ_on_ipr" />
          <const>0</const>
          <column table="this" column="summ_10_on_ipr" />
          <const>1</const>
          <column table="this" column="summ_30_on_ipr" />
          <const>3</const>
        </call>
        <column table="this" column="kap_sum_fact" as="kap_sum_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_nds_fact" as="kap_sum_nds_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds_fact" as="kap_nds_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_sum_nds_fact" as="fp_sum_nds_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_nds_fact" as="fp_nds_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvod_sum_fact" as="vvod_sum_fact_itog" cumulate="ym" agg="sum" key="0" />
        <call function="-nvl" as="saldo_fact" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_fact" />
          <column table="this" column="kap_sum_nds_fact" />
        </call>
        <call function="-nvl" as="nzs_fact" agg="sum" key="0">
          <column table="this" column="kap_sum_fact" />
          <column table="this" column="vvod_sum_fact" />
          <column table="this" column="kap_sum_fact_sp" />
        </call>
        <call function="-nvl" as="nzs_fact_c" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_c" />
          <column table="this" column="vvod_sum_fact" />
          <column table="this" column="kap_sum_fact_sp" />
        </call>
        <column table="this" column="saldo_fact" as="saldo_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="nzs_fact" as="nzs_fact_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="nzs_fact_c" as="nzs_fact_c_itog" cumulate="ym" agg="sum" key="0" />
        <call function="if" as="debet_fact_itog" virtual="1" title="Дебиторская задолженность факт с НДС" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_fact_itog" />
        </call>
        <call function="if" as="kredit_fact_itog" virtual="1" title="Кредиторская задолженность факт с НДС" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_ipr" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_fact_itog" />
          </call>
        </call>
        <call function="if" as="debet_fact_itog_smet" virtual="1" title="Дебиторская задолженность факт с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_fact_itog" />
        </call>
        <call function="if" as="kredit_fact_itog_smet" virtual="1" title="Кредиторская задолженность факт с НДС(на уровне сметы)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
                <column table="this" column="kod_smet" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_fact_itog" />
          </call>
        </call>
        <call function="if" as="debet_fact_itog_dog" virtual="1" title="Дебиторская задолженность факт с НДС(на уровне договора)" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_fact_itog" />
        </call>
        <call function="if" as="kredit_fact_itog_dog" virtual="1" title="Кредиторская задолженность факт с НДС(на уровне договора)" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_fact_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
                <column table="this" column="kod_dog_i" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_fact_itog" />
          </call>
        </call>
        <call function="if" as="fp_sum_nds_pos" group="sum" agg="sum" key="0">
          <call function="or">
            <call function="is null">
              <column table="this" column="zsaldo" group="" />
            </call>
            <call function="ge">
              <column table="this" column="year" />
              <column table="kod_doc_osn1" column="god_ip" />
            </call>
          </call>
          <column table="this" column="fp_sum_nds" group="" />
        </call>
        <call function="if" as="kap_sum_nds_pos" group="sum" agg="sum" key="0">
          <call function="or">
            <call function="is null">
              <column table="this" column="zsaldo" group="" />
            </call>
            <call function="ge">
              <column table="this" column="year" />
              <column table="kod_doc_osn1" column="god_ip" />
            </call>
          </call>
          <column table="this" column="kap_sum_nds" group="" />
        </call>
        <call function="if" as="kap_sum_pos" group="sum" agg="sum" key="0">
          <call function="or">
            <call function="is null">
              <column table="this" column="znzs" group="" />
            </call>
            <call function="ge">
              <column table="this" column="year" />
              <column table="kod_doc_osn1" column="god_ip" />
            </call>
          </call>
          <column table="this" column="kap_sum" group="" />
        </call>
        <call function="if" as="vvod_sum_pos" group="sum" agg="sum" key="0">
          <call function="or">
            <call function="is null">
              <column table="this" column="znzs" group="" />
            </call>
            <call function="ge">
              <column table="this" column="year" />
              <column table="kod_doc_osn1" column="god_ip" />
            </call>
          </call>
          <column table="this" column="vvod_sum" group="" />
        </call>
        <column table="this" column="kap_sum_nds_pos" as="kap_sum_nds_pos_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_pos" as="kap_sum_pos_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="fp_sum_nds_pos" as="fp_sum_nds_pos_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvod_sum_pos" as="vvod_sum_pos_itog" cumulate="ym" agg="sum" key="0" />
        <call function="-nvl" as="saldo_pos" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_pos" />
          <column table="this" column="kap_sum_nds_pos" />
        </call>
        <call function="-nvl" as="nzs_pos" agg="sum" key="0">
          <column table="this" column="kap_sum_pos" />
          <column table="this" column="vvod_sum_pos" />
        </call>
        <column table="this" column="saldo_pos" as="saldo_pos_itog1" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="nzs_pos" as="nzs_pos_itog1" cumulate="ym" agg="sum" key="0" />
        <call function="if" as="debet2_itog" virtual="1" agg="sum" key="0">
          <call function="gt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_pos_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <column table="this" column="saldo_pos_itog" />
        </call>
        <call function="if" as="kredit2_itog" virtual="1" agg="sum" key="0">
          <call function="lt">
            <call function="over">
              <call function="sum">
                <column table="this" column="saldo_pos_itog" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_doc_osn" group="1" />
                <column table="this" column="kod_ipr_ext" group="1" />
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="0-">
            <column table="this" column="saldo_pos_itog" />
          </call>
        </call>
        <call function="+nvl" as="saldo_pos_itog" type="number" agg="sum" key="0">
          <column table="this" column="saldo_pos_itog1" />
          <column table="this" column="zsaldo1" />
        </call>
        <call function="+nvl" as="nzs2_itog" type="number" agg="sum" key="0">
          <column table="this" column="nzs_pos_itog1" />
          <column table="this" column="nzs_saldo" />
        </call>
        <column table="ipr_fin_zatrat" column="plan_cost" as="dog_plan_cost" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_zatrat" column="plan_cost_nds" as="dog_plan_cost_nds" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_zatrat_proch" column="proch_plan_cost" as="dog_proch_plan_cost" stored="0" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_zatrat_proch" column="proch_plan_cost_nds" as="dog_proch_plan_cost_nds" stored="0" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_pfa" column="kvl_prim" as="pfa_kvl_prim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="fin_prim" as="pfa_fin_prim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="vv_prim" as="pfa_vv_prim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="mba_prim" as="pfa_mba_prim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="km_prim" as="pfa_km_prim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="kvl_wprim" as="pfa_kvl_wprim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="fin_wprim" as="pfa_fin_wprim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="vv_wprim" as="pfa_vv_wprim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="mba_wprim" as="pfa_mba_wprim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="km_wprim" as="pfa_km_wprim" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="kvl_krit_name" as="pfa_kvl_krit_name" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="fin_krit_name" as="pfa_fin_krit_name" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="vv_krit_name" as="pfa_vv_krit_name" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="kvl_krit_name1" as="pfa_kvl_krit_name1" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="fin_krit_name1" as="pfa_fin_krit_name1" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_pfa" column="vv_krit_name1" as="pfa_vv_krit_name1" group="stragg_dist" agg="" stored="0" key="0" />
        <column table="ipr_fin_steps" column="ipr_fin_steps" group="max" stored="0" agg="max" as="ipr_fin_steps" key="0" />
        <call function="over" as="kod_doc_steps_last" stored="0" agg="sum" key="0">
          <call function="last_value">
            <column table="kod_contr_steps_val" column="kod_doc" group="max" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_doc_osn" />
            <column table="this" column="kod_ipr_ext" />
          </call>
          <call function="order by rows * *">
            <call function="asc nulls first">
              <column table="this" column="dat" />
            </call>
          </call>
        </call>
        <call function="case" as="pr_steps_last" type="number" stored="0" agg="sum" key="0">
          <call function="when">
            <call function="is null">
              <column table="kod_contr_steps_val" column="kod_doc" group="max" />
            </call>
            <const>null</const>
          </call>
          <call function="else">
            <call function="if">
              <call function="=">
                <column table="kod_contr_steps_val" column="kod_doc" group="max" />
                <column table="this" column="kod_doc_steps_last" />
              </call>
              <const>1</const>
              <const>0</const>
            </call>
          </call>
        </call>
        <column table="ipr_fin_doc" column="ipr_fin_doc" group="max" agg="max" as="ipr_fin_doc" key="0" />
        <!--Бельченко: при формировании пакета хранилища stragg_dist меняется на max  -это кривая заплатка, но пока ,вроде, сойдет,  иначе валится ORA-01467: sort key too long-->
        <column table="ipr_fin_tit_objects" column="eksp_norm_podst" title="Нормативный срок службы, лет" class-title="Подстанции" group="max" agg="max" as="eksp_norm_podst" key="0" />
        <column table="ipr_fin_tit_objects" column="eksp_norm_lin" title="Нормативный срок службы, лет" class-title="Линии электропередачи" group="max" agg="max" as="eksp_norm_lin" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val12" as="phis_coltr" group="sum" agg="sum" type="number" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val17" as="phis_numtr" group="stragg_dist" agg="stragg_dist" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val13" as="phis_mvatr" group="sum" agg="sum" type="number" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val1" as="phis_typel" group="stragg_dist" agg="stragg_dist" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val3" as="phis_numl" group="stragg_dist" agg="stragg_dist" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val14" as="phis_km_vl" group="sum" agg="sum" type="number" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val18" as="phis_km_kl" group="sum" agg="sum" type="number" key="0" />
        <column table="ipr_fin_phis_param" column="phis_val16" as="phis_other" group="sum" agg="sum" type="number" key="0" />
        <column table="this" column="phis_coltr" as="phis_coltr_itog" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="phis_numtr" as="phis_numtr_itog" agg="stragg_dist" cumulate="ym" key="0" />
        <column table="this" column="phis_mvatr" as="phis_mvatr_itog" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="phis_typel" as="phis_typel_itog" agg="stragg_dist" cumulate="ym" key="0" />
        <column table="this" column="phis_numl" as="phis_numl_itog" agg="stragg_dist" cumulate="ym" key="0" />
        <column table="this" column="phis_km_vl" as="phis_km_vl_itog" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="phis_km_kl" as="phis_km_kl_itog" agg="sum" cumulate="ym" key="0" />
        <column table="this" column="phis_other" as="phis_other_itog" agg="sum" cumulate="ym" key="0" />
        <!--лимиты-->
        <column table="ipr_fin_lim" column="value_osv" as="kap_lim_sum" group="sum" agg="sum" class-title="Освоение капиталовложений" title="Лимит освоения" key="0" />
        <column table="ipr_fin_lim" column="value_fin_nds" as="fp_lim_sum_nds" group="sum" agg="sum" title="Лимит финансирования" key="0" />
        <column table="ipr_fin_lim" column="value_vvod" as="vvod_lim_sum" group="sum" agg="sum" title="Лимит ввод в ОФ" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_plan" column="km_vl1" as="vvd_plan_km_vl1" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_plan" column="km_vl2" as="vvd_plan_km_vl2" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_plan" column="km_vl1_pr" as="vvd_plan_km_vl1_pr" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_plan" column="km_vl2_pr" as="vvd_plan_km_vl2_pr" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_fact" column="km_vl1" as="vvd_fact_km_vl1" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_fact" column="km_vl2" as="vvd_fact_km_vl2" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_fact" column="km_vl1_pr" as="vvd_fact_km_vl1_pr" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_fact" column="km_vl2_pr" as="vvd_fact_km_vl2_pr" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_wfact" column="km_vl1" as="vvd_wfact_km_vl1" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_wfact" column="km_vl2" as="vvd_wfact_km_vl2" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_wfact" column="km_vl1_pr" as="vvd_wfact_km_vl1_pr" group="sum" agg="sum" key="0" />
        <column table="vv_ipr_vvod_fiz_dop_wfact" column="km_vl2_pr" as="vvd_wfact_km_vl2_pr" group="sum" agg="sum" key="0" />
        <column table="this" column="vvd_plan_km_vl1" as="vvd_plan_km_vl1_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_plan_km_vl2" as="vvd_plan_km_vl2_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_plan_km_vl1_pr" as="vvd_plan_km_vl1_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_plan_km_vl2_pr" as="vvd_plan_km_vl2_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_fact_km_vl1" as="vvd_fact_km_vl1_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_fact_km_vl2" as="vvd_fact_km_vl2_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_fact_km_vl1_pr" as="vvd_fact_km_vl1_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_fact_km_vl2_pr" as="vvd_fact_km_vl2_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_wfact_km_vl1" as="vvd_wfact_km_vl1_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_wfact_km_vl2" as="vvd_wfact_km_vl2_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_wfact_km_vl1_pr" as="vvd_wfact_km_vl1_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="vvd_wfact_km_vl2_pr" as="vvd_wfact_km_vl2_pr_itog" cumulate="ym" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_move_to_8_3" column="sum_akt" as="kap_sum_fact_m83" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_move_to_8_3" column="nds_akt" as="kap_nds_fact_m83" group="sum" agg="sum" key="0" />
        <column table="ipr_fin_kap_fact_move_to_8_3" column="sum_nds_akt" as="kap_sum_nds_fact_m83" group="sum" agg="sum" key="0" />
        <column table="this" column="kap_sum_fact_m83" as="kap_sum_fact_m83_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds_fact_m83" as="kap_nds_fact_m83_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_sum_nds_fact_m83" as="kap_sum_nds_fact_m83_itog" cumulate="ym" agg="sum" key="0" />
        <call function="-nvl" as="kap_sum_fact_pp" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_pri" />
          <column table="this" column="kap_sum_fact_per" />
        </call>
        <call function="-nvl" as="kap_nds_fact_pp" agg="sum" key="0">
          <column table="this" column="kap_nds_fact_pri" />
          <column table="this" column="kap_nds_fact_per" />
        </call>
        <call function="-nvl" as="fp_sum_nds_fact_pp" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_fact_pri" />
          <column table="this" column="fp_sum_nds_fact_per" />
        </call>
        <call function="-nvl" as="fp_nds_fact_pp" agg="sum" key="0">
          <column table="this" column="fp_nds_fact_pri" />
          <column table="this" column="fp_nds_fact_per" />
        </call>
        <call function="if" as="kap_sum_fact_pp_pg" agg="sum" key="0">
          <call function="lt">
            <call function="ym2 god">
              <column table="this" column="ym_vozn" group="" />
            </call>
            <call function="ym2 god">
              <column table="this" column="ym" group="" />
            </call>
          </call>
          <column table="this" column="kap_sum_fact_pp" />
        </call>
        <call function="if" as="kap_nds_fact_pp_pg" agg="sum" key="0">
          <call function="lt">
            <call function="ym2 god">
              <column table="this" column="ym_vozn" group="" />
            </call>
            <call function="ym2 god">
              <column table="this" column="ym" group="" />
            </call>
          </call>
          <column table="this" column="kap_nds_fact_pp" />
        </call>
        <call function="if" as="fp_sum_nds_fact_pp_pg" agg="sum" key="0">
          <call function="lt">
            <call function="ym2 god">
              <column table="this" column="ym_vozn" group="" />
            </call>
            <call function="ym2 god">
              <column table="this" column="ym" group="" />
            </call>
          </call>
          <column table="this" column="fp_sum_nds_fact_pp" />
        </call>
        <call function="if" as="fp_nds_fact_pp_pg" agg="sum" key="0">
          <call function="lt">
            <call function="ym2 god">
              <column table="this" column="ym_vozn" group="" />
            </call>
            <call function="ym2 god">
              <column table="this" column="ym" group="" />
            </call>
          </call>
          <column table="this" column="fp_nds_fact_pp" />
        </call>
        <!--добавлены перенос посчетам-->
        <call function="+nvl" as="kap_sum_fact_b" agg="sum" key="0">
          <column table="this" column="kap_sum_fact" />
          <call function="if">
            <call function="is not null">
              <column table="this" column="kod_schet_y" group="" />
            </call>
            <column table="this" column="kap_sum_fact_m83" />
          </call>
        </call>
        <call function="+nvl" as="kap_nds_fact_b" agg="sum" key="0">
          <column table="this" column="kap_nds_fact" />
          <call function="if">
            <call function="is not null">
              <column table="this" column="kod_schet_y" group="" />
            </call>
            <column table="this" column="kap_nds_fact_m83" />
          </call>
        </call>
        <column table="this" column="kap_sum_fact_b" as="kap_sum_fact_b_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds_fact_b" as="kap_nds_fact_b_itog" cumulate="ym" agg="sum" key="0" />
        <!--исключены 7 1014 1015-->
        <call function="if" as="kap_sum_fact_c" agg="sum" key="0">
          <call function="not in">
            <call function="nvl">
              <column table="this" column="kod_schet_y" group="" />
              <const>0</const>
            </call>
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="kap_sum_fact_b" />
        </call>
        <call function="if" as="kap_nds_fact_c" agg="sum" key="0">
          <call function="not in">
            <call function="nvl">
              <column table="this" column="kod_schet_y" group="" />
              <const>0</const>
            </call>
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="kap_nds_fact_b" />
        </call>
        <column table="this" column="kap_sum_fact_c" as="kap_sum_fact_c_itog" cumulate="ym" agg="sum" key="0" />
        <column table="this" column="kap_nds_fact_c" as="kap_nds_fact_c_itog" cumulate="ym" agg="sum" key="0" />
        <!--исключены 7 1014 1015  по переброскам-->
        <call function="if" as="kap_sum_fact_pp_pg_c" agg="sum" key="0">
          <call function="not in">
            <call function="nvl">
              <column table="this" column="kod_schet_y" group="" />
              <const>0</const>
            </call>
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="kap_sum_fact_pp_pg" />
        </call>
        <call function="if" as="kap_nds_fact_pp_pg_c" agg="sum" key="0">
          <call function="not in">
            <call function="nvl">
              <column table="this" column="kod_schet_y" group="" />
              <const>0</const>
            </call>
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="kap_nds_fact_pp_pg" />
        </call>
        <!--исключены переброски прошлых периодов-->
        <call function="-nvl" as="kap_sum_fact_d" agg="sum" key="0">
          <column table="this" column="kap_sum_fact_c" />
          <column table="this" column="kap_sum_fact_pp_pg_c" />
        </call>
        <call function="-nvl" as="kap_nds_fact_d" agg="sum" key="0">
          <column table="this" column="kap_nds_fact_c" />
          <column table="this" column="kap_nds_fact_pp_pg_c" />
        </call>
        <call function="-nvl" as="kap_sum_fact_n" agg="sum" key="0">
          <column table="this" column="kap_sum_fact" />
          <column table="this" column="kap_sum_fact_pp_pg" />
        </call>
        <call function="-nvl" as="kap_nds_fact_n" agg="sum" key="0">
          <column table="this" column="kap_nds_fact" />
          <column table="this" column="kap_nds_fact_pp_pg" />
        </call>
        <call function="-nvl" as="fp_sum_nds_fact_b" agg="sum" key="0">
          <column table="this" column="fp_sum_nds_fact" />
          <column table="this" column="fp_sum_nds_fact_pp_pg" />
        </call>
        <call function="-nvl" as="fp_nds_fact_b" agg="sum" key="0">
          <column table="this" column="fp_nds_fact" />
          <column table="this" column="fp_nds_fact_pp_pg" />
        </call>
        <column table="kod_ipr_q_c" column="kod_ipr_q_c" group="sum" stored="0" agg="sum" as="kod_ipr_q_c" key="0" />
        <column table="kod_ipr_ext_q_c" column="kod_ipr_ext_q_c" group="sum" stored="0" agg="sum" as="kod_ipr_ext_q_c" key="0" />
        <column table="ym_q_c" column="ym_q_c" group="sum" stored="0" agg="sum" as="ym_q_c" key="0" />
        <column table="kodzatrat_q_c" column="kodzatrat_q_c" group="sum" stored="0" agg="sum" as="kodzatrat_q_c" key="0" />
        <column table="kod_ipr_dog_q_c" column="kod_ipr_dog_q_c" group="sum" stored="0" agg="sum" as="kod_ipr_dog_q_c" key="0" />
        <column table="kod_dog_i_q_c" column="kod_dog_i_q_c" group="sum" stored="0" agg="sum" as="kod_dog_i_q_c" key="0" />
        <column table="kod_dog_q_c" column="kod_dog_q_c" group="sum" stored="0" agg="sum" as="kod_dog_q_c" key="0" />
        <column table="kod_smet_q_c" column="kod_smet_q_c" group="sum" stored="0" agg="sum" as="kod_smet_q_c" key="0" />
        <column table="kod_smet_ext_q_c" column="kod_smet_ext_q_c" group="sum" stored="0" agg="sum" as="kod_smet_ext_q_c" key="0" />
        <column table="kod_smet_sub_q_c" column="kod_smet_sub_q_c" group="sum" stored="0" agg="sum" as="kod_smet_sub_q_c" key="0" />
        <column table="kod_titul_ip_q_c" column="kod_titul_ip_q_c" group="sum" stored="0" agg="sum" as="kod_titul_ip_q_c" key="0" />
        <column table="kod_contr_steps_val_q_c" column="kod_contr_steps_val_q_c" group="sum" stored="0" agg="sum" as="kod_contr_steps_val_q_c" key="0" />
        <column table="kod_doc_q_c" column="kod_doc_q_c" group="sum" stored="0" agg="sum" as="kod_doc_q_c" key="0" />
        <column table="kod_doc_smet_q_c" column="kod_doc_smet_q_c" group="sum" stored="0" agg="sum" as="kod_doc_smet_q_c" key="0" />
        <column table="doc_target_str_q_c" column="doc_target_str_q_c" group="sum" stored="0" agg="sum" as="doc_target_str_q_c" key="0" />
        <column table="kod_vip_dog_q_c" column="kod_vip_dog_q_c" group="sum" stored="0" agg="sum" as="kod_vip_dog_q_c" key="0" />
        <column table="kod_opl_period_q_c" column="kod_opl_period_q_c" group="sum" stored="0" agg="sum" as="kod_opl_period_q_c" key="0" />
        <column table="kod_main_titul_q_c" column="kod_main_titul_q_c" group="sum" stored="0" agg="sum" as="kod_main_titul_q_c" key="0" />
        <column table="kod_razdel_q_c" column="kod_razdel_q_c" group="sum" stored="0" agg="sum" as="kod_razdel_q_c" key="0" />
        <column table="kod_doc_osn_q_c" column="kod_doc_osn_q_c" group="sum" stored="0" agg="sum" as="kod_doc_osn_q_c" key="0" />
      </select>
      <from>
        <query name="ipr_fin_kap" as="ipr_fin_kap" />
        <query name="ipr_fin_finplan" as="ipr_fin_finplan" />
        <query name="ipr_fin_vvod" as="ipr_fin_vvod" />
        <query name="ipr_fin_power" as="ipr_fin_power" />
        <query name="ipr_fin_power_date" as="ipr_fin_power_date" />
        <query name="ipr_fin_kap_fact_dog" as="ipr_fin_kap_fact_dog" />
        <query name="ipr_fin_kap_fact_move_to_8_3" as="ipr_fin_kap_fact_move_to_8_3" />
        <query name="ipr_fin_kap_fact_mfr" as="ipr_fin_kap_fact_mfr" />
        <query name="ipr_fin_kap_fact_mto" as="ipr_fin_kap_fact_mto" />
        <query name="ipr_fin_finplan_fact_dog" as="ipr_fin_finplan_fact_dog" />
        <query name="ipr_fin_kap_fact_dog_pr" as="ipr_fin_kap_fact_dog_pr" />
        <query name="ipr_fin_finplan_fact_mfr" as="ipr_fin_finplan_fact_mfr" />
        <query name="ipr_fin_finplan_fact_mto" as="ipr_fin_finplan_fact_mto" />
        <query name="ipr_fin_vvod_fact_dog" as="ipr_fin_vvod_fact_dog" />
        <!--<query name="ipr_fin_vvod_fact_dog_mto" />-->
        <!--<query name="ipr_fin_period_dog" fixed="1">
          <withparams>
            <useparam name="year"/>
          </withparams>
        </query>-->
        <query name="ipr_fin_ipr" as="ipr_fin_ipr" />
        <query name="ipr_fin_ipr100" as="ipr_fin_ipr100" />
        <query name="ipr_fin_ipr200" as="ipr_fin_ipr200" />
        <query name="ipr_fin_ipr250" as="ipr_fin_ipr250" />
        <query name="ipr_fin_ipr300" as="ipr_fin_ipr300" />
        <query name="ipr_fin_zatrat" as="ipr_fin_zatrat" />
        <query name="ipr_fin_zatrat_proch" as="ipr_fin_zatrat_proch" />
        <query name="ipr_fin_smet" as="ipr_fin_smet" />
        <query name="ipr_fin_smet_tek" as="ipr_fin_smet_tek" />
        <query name="ipr_fin_pfa" as="ipr_fin_pfa" />
        <query name="ipr_fin_steps" as="ipr_fin_steps" />
        <!--<query name="ipr_fin_steps_plan"/>
        <query name="ipr_fin_steps_fact"/>-->
        <query name="ipr_fin_doc" as="ipr_fin_doc" />
        <query name="ipr_fin_tit_objects" as="ipr_fin_tit_objects" />
        <query name="ipr_fin_phis_param" as="ipr_fin_phis_param" />
        <query name="ipr_fin_lim" as="ipr_fin_lim" />
        <query name="vv_ipr_vvod_fiz_dop_plan" as="vv_ipr_vvod_fiz_dop_plan" />
        <query name="vv_ipr_vvod_fiz_dop_wfact" as="vv_ipr_vvod_fiz_dop_wfact" />
        <query name="vv_ipr_vvod_fiz_dop_fact" as="vv_ipr_vvod_fiz_dop_fact" />
        <query as="kod_ipr_q_c">
          <select>
            <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr" />
            <const type="number" as="kod_ipr_q_c">1</const>
          </select>
          <from>
            <query name="ipr_ipr_data" as="ipr_ipr_data" />
          </from>
        </query>
        <query as="kod_ipr_ext_q_c">
          <select>
            <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" />
            <const type="number" as="kod_ipr_ext_q_c">1</const>
          </select>
          <from>
            <query name="ipr_ipr_data" as="ipr_ipr_data" />
          </from>
        </query>
        <query as="ym_q_c">
          <select>
            <column table="spr_time_ym" column="ym2" as="ym" />
            <const type="number" as="ym_q_c">1</const>
          </select>
          <from>
            <query name="spr_time_ym" as="spr_time_ym" />
          </from>
        </query>
        <query as="kodzatrat_q_c">
          <select>
            <column table="ips_vid_zatrat" column="kodzatrat" as="kodzatrat" />
            <const type="number" as="kodzatrat_q_c">1</const>
          </select>
          <from>
            <query name="ips_vid_zatrat" as="ips_vid_zatrat" />
          </from>
        </query>
        <query as="kod_ipr_dog_q_c">
          <select>
            <column table="ipr_dogs" column="kod_ipr_dog" as="kod_ipr_dog" />
            <const type="number" as="kod_ipr_dog_q_c">1</const>
          </select>
          <from>
            <query name="ipr_dogs" as="ipr_dogs" />
          </from>
        </query>
        <query as="kod_dog_i_q_c">
          <select>
            <column table="ipr_dogs_i" column="kod_dog_i" as="kod_dog_i" />
            <const type="number" as="kod_dog_i_q_c">1</const>
          </select>
          <from>
            <query name="ipr_dogs_i" as="ipr_dogs_i" />
          </from>
        </query>
        <query as="kod_dog_q_c">
          <select>
            <column table="is_dogovor" column="kod_dog" as="kod_dog" />
            <const type="number" as="kod_dog_q_c">1</const>
          </select>
          <from>
            <query name="is_dogovor" as="is_dogovor" title="Подрядные договоры" />
          </from>
        </query>
        <query as="kod_smet_q_c">
          <select>
            <column table="ips_smet_structure" column="kod_smet" as="kod_smet" />
            <const type="number" as="kod_smet_q_c">1</const>
          </select>
          <from>
            <query name="ips_smet_structure" as="ips_smet_structure" title="Виды затрат" />
          </from>
        </query>
        <query as="kod_smet_ext_q_c">
          <select>
            <column table="ips_smet_structure_ext" column="kod_smet" as="kod_smet" />
            <const type="number" as="kod_smet_ext_q_c">1</const>
          </select>
          <from>
            <query name="ips_smet_structure_ext" as="ips_smet_structure_ext" />
          </from>
        </query>
        <query as="kod_smet_sub_q_c">
          <select>
            <column table="ips_smet_structure" column="kod_smet" as="kod_smet_sub" />
            <const type="number" as="kod_smet_sub_q_c">1</const>
          </select>
          <from>
            <query name="ips_smet_structure" as="ips_smet_structure" title="Виды затрат" />
          </from>
        </query>
        <query as="kod_titul_ip_q_c">
          <select>
            <column table="ipr_titul_ip" column="kod_titul_ip" as="kod_titul_ip" />
            <const type="number" as="kod_titul_ip_q_c">1</const>
          </select>
          <from>
            <query name="ipr_titul_ip" as="ipr_titul_ip" title="Титулы" />
          </from>
        </query>
        <query as="kod_contr_steps_val_q_c">
          <select>
            <column table="ipr_contr_steps_val" column="kod_contr_steps_val" as="kod_contr_steps_val" />
            <const type="number" as="kod_contr_steps_val_q_c">1</const>
          </select>
          <from>
            <query name="ipr_contr_steps_val" as="ipr_contr_steps_val" />
          </from>
        </query>
        <query as="kod_doc_q_c">
          <select>
            <column table="ipr_doc" column="kod_doc" as="kod_doc" />
            <const type="number" as="kod_doc_q_c">1</const>
          </select>
          <from>
            <query name="ipr_doc" as="ipr_doc" />
          </from>
        </query>
        <query as="kod_doc_smet_q_c">
          <select>
            <column table="ipr_doc" column="kod_doc" as="kod_doc_smet" />
            <const type="number" as="kod_doc_smet_q_c">1</const>
          </select>
          <from>
            <query name="ipr_doc" as="ipr_doc" />
          </from>
        </query>
        <query as="doc_target_str_q_c">
          <select>
            <column table="ips_doc_target_str" column="doc_target_str" as="doc_target_str" />
            <const type="number" as="doc_target_str_q_c">1</const>
          </select>
          <from>
            <query name="ips_doc_target_str" as="ips_doc_target_str" />
          </from>
        </query>
        <query as="kod_vip_dog_q_c">
          <select>
            <column table="isv_ip_vip_dog" column="kod_vip_dog" as="kod_vip_dog" />
            <const type="number" as="kod_vip_dog_q_c">1</const>
          </select>
          <from>
            <query name="isv_ip_vip_dog" as="isv_ip_vip_dog" />
          </from>
        </query>
        <query as="kod_opl_period_q_c">
          <select>
            <column table="isv_ip_opl" column="kod_opl_period" as="kod_opl_period" />
            <const type="number" as="kod_opl_period_q_c">1</const>
          </select>
          <from>
            <query name="isv_ip_opl" as="isv_ip_opl" />
          </from>
        </query>
        <query as="kod_main_titul_q_c">
          <select>
            <column table="ipr_titul_ip" column="kod_titul_ip" as="kod_main_titul" />
            <const type="number" as="kod_main_titul_q_c">1</const>
          </select>
          <from>
            <query name="ipr_titul_ip" as="ipr_titul_ip" title="Титулы" />
          </from>
        </query>
        <query as="kod_razdel_q_c">
          <select>
            <column table="ips_razdel_ip" column="kod_razdel" as="kod_razdel" />
            <const type="number" as="kod_razdel_q_c">1</const>
          </select>
          <from>
            <query name="ips_razdel_ip" as="ips_razdel_ip" title="Раздел ИПР" />
          </from>
        </query>
        <query as="kod_doc_osn_q_c">
          <select>
            <column table="ipr_doc" column="kod_doc" as="kod_doc_osn" />
            <const type="number" as="kod_doc_osn_q_c">1</const>
          </select>
          <from>
            <query name="ipr_doc" as="ipr_doc" />
          </from>
        </query>
      </from>
      <push>
        <from>
          <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_ipr" column="kod_ipr" />
                <column table="*" column="kod_ipr" />
              </call>
            </call>
            <link name="kod_doc_osn" as="kod_doc_osn1" table="ipr_doc" child="ipr_ipr_data" field="kod_doc_osn" parent="ipr_doc" back="ipr_ipr_data" />
            <dlink name="ipr_closed_plans" as="ipr_closed_plans" table="ipr_closed_plans" child="ipr_closed_plans" field="kod_ipr" parent="ipr_ipr_data" back="ipr_closed_plans" />
            <link name="kod_main_titul" as="kod_main_titul1" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_main_titul" parent="ipr_titul_ip" back="ipr_ipr_data_main" title="Титулы" />
            <link name="kod_main_ipr_ipr_data" as="kod_main_ipr_ipr_data1" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_main_ipr_ipr_data" parent="ipr_ipr_data" back="ipr_ipr_data" />
            <!--link kod_titul_ip1 добавлен для подключения условия extendwhere kod_titul_ip1.kod_ispolnit в запросе 29611; через kod_titul_ip не работает, какие то нестыковки-->
            <link name="kod_titul_ip" as="kod_titul_ip1" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
          </query>
          <query name="ipr_ipr_data" as="kod_ipr_ext" join="left outer" dname="ipr_fin_body_united">
            <call function="=">
              <column table="*" column="kod_ipr_ext" />
              <column table="kod_ipr_ext" column="kod_ipr" />
            </call>
          </query>
          <query name="vv_ipr_ipr_data_check_pl_ft" as="check_pl_ft" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="*" column="kod_ipr_ext" />
                <column table="check_pl_ft" column="kod_ipr_ext" />
              </call>
              <call function="=">
                <column table="*" column="kod_doc_osn" />
                <column table="check_pl_ft" column="kod_doc_osn" />
              </call>
            </call>
          </query>
          <query name="spr_time_ym" as="ym" join="left outer" dname="ipr_fin_body_united">
            <call function="=">
              <column table="*" column="ym" />
              <column table="ym" column="ym2" />
            </call>
          </query>
          <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kodzatrat" column="kodzatrat" />
                <column table="*" column="kodzatrat" />
              </call>
            </call>
            <!--<link name="kod_smet" as="kod_smet1"/>-->
          </query>
          <query name="ipr_dogs" as="kod_ipr_dog" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_ipr_dog" column="kod_ipr_dog" />
                <column table="*" column="kod_ipr_dog" />
              </call>
            </call>
          </query>
          <query name="ipr_dogs_i" as="kod_dog_i" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_dog_i" column="kod_dog_i" />
                <column table="*" column="kod_dog_i" />
              </call>
            </call>
          </query>
          <query name="is_dogovor" as="kod_dog" join="left outer" dname="ipr_fin_body_united" title="Подрядные договоры">
            <call function="and">
              <call function="=">
                <column table="kod_dog" column="kod_dog" />
                <column table="*" column="kod_dog" />
              </call>
            </call>
          </query>
          <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="ipr_fin_body_united" title="Виды затрат">
            <call function="and">
              <call function="=">
                <column table="kod_smet" column="kod_smet" />
                <column table="*" column="kod_smet" />
              </call>
            </call>
          </query>
          <query name="ips_smet_structure_ext" as="kod_smet_ext" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_smet_ext" column="kod_smet" />
                <column table="*" column="kod_smet" />
              </call>
            </call>
          </query>
          <query name="ips_smet_structure" as="kod_smet_sub" join="left outer" dname="ipr_fin_body_united" title="Виды затрат">
            <call function="=">
              <column table="kod_smet_sub" column="kod_smet" />
              <column table="*" column="kod_smet_sub" />
            </call>
          </query>
          <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_fin_body_united" title="Титулы">
            <call function="and">
              <call function="=">
                <column table="kod_titul_ip" column="kod_titul_ip" />
                <column table="*" column="kod_titul_ip" />
              </call>
            </call>
          </query>
          <query name="ipr_contr_steps_val" as="kod_contr_steps_val" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_contr_steps_val" column="kod_contr_steps_val" />
                <column table="*" column="kod_contr_steps_val" />
              </call>
            </call>
            <!--<link name="kod_doc" as="kod_doc_steps1"/>-->
          </query>
          <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_doc" column="kod_doc" />
                <column table="*" column="kod_doc" />
              </call>
            </call>
          </query>
          <query name="ipr_doc" as="kod_doc_smet" join="left outer" dname="ipr_fin_body_united">
            <call function="=">
              <column table="*" column="kod_doc_smet" />
              <column table="kod_doc_smet" column="kod_doc" />
            </call>
          </query>
          <query name="ips_doc_target_str" as="doc_target_str" join="left outer" dname="ipr_fin_body_united">
            <call function="=">
              <column table="*" column="doc_target_str" />
              <column table="doc_target_str" column="doc_target_str" />
            </call>
          </query>
          <query name="isv_ip_vip_dog" as="kod_vip_dog" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_vip_dog" column="kod_vip_dog" />
                <column table="*" column="kod_vip_dog" />
              </call>
            </call>
          </query>
          <query name="isv_ip_opl" as="kod_opl_period" join="left outer" dname="ipr_fin_body_united">
            <call function="and">
              <call function="=">
                <column table="kod_opl_period" column="kod_opl_period" />
                <column table="*" column="kod_opl_period" />
              </call>
            </call>
          </query>
          <query name="ipr_titul_ip" as="kod_main_titul" join="left outer" dname="ipr_fin_body_united" title="Титулы">
            <link name="kod_sbor_titul" as="kod_sbor_titul1" table="ipr_titul_ip_sbor" child="ipr_titul_ip" field="kod_sbor_titul" parent="ipr_titul_ip_sbor" back="ipr_titul_ip" />
            <call function="=">
              <column table="kod_main_titul" column="kod_titul_ip" />
              <column table="*" column="kod_main_titul" />
            </call>
          </query>
          <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_fin_body_united" title="Раздел ИПР">
            <call function="=">
              <column table="kod_razdel" column="kod_razdel" />
              <column table="*" column="kod_razdel" />
            </call>
          </query>
          <query name="ipr_doc" as="kod_doc_osn" join="left outer" dname="ipr_fin_body_united">
            <call function="=">
              <column table="*" column="kod_doc_osn" />
              <column table="kod_doc_osn" column="kod_doc" />
            </call>
          </query>
          <!--<query as="changes" join="inner">
            <call function="and">
              <call function="=">
                <column table="kod_ipr" column="kod_titul_ip"/>
                <column table="changes" column="kod_titul_ip"/>
              </call>
            </call>
            <select>
              <column table="a" column="kod_titul_ip"/>
            </select>
            <from>
              <table name="vr_ipr_test_dims" as="a"/>
            </from>
          </query>-->
        </from>
      </push>
      <!--<where>
        <call function="and">
          <call function="=">
            <column table="kod_ipr" column="kod_doc_osn"/>
            <const>43383</const>
          </call>
        </call>
      </where>-->
    </query>
    <query name="ipr_fin_tit_objects" class="1" timestamp="17.08.2016 03:47:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="ipr_ipr_data" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr" key="0" />
        <call function="if" as="eksp_norm_podst" key="0">
          <call function="=">
            <column table="a" column="kod_vid_object" />
            <const>1</const>
          </call>
          <column table="a" column="ekspluat_normativ" />
        </call>
        <call function="if" as="eksp_norm_lin" key="0">
          <call function="=">
            <column table="a" column="kod_vid_object" />
            <const>7</const>
          </call>
          <column table="a" column="ekspluat_normativ" />
        </call>
      </select>
      <from>
        <query name="ipr_tituls_objects" as="a">
          <!--<slink name="ipr_tituls_objects" as="b" />-->
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_tituls_objects" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_tituls_objects" title="Титулы">
            <elink name="ipr_ipr_data" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </link>
        </query>
      </from>
    </query>
    <query name="ipr_fin_ipr" class="1" timestamp="17.08.2016 03:44:22" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="1" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="a" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <!--колонка, для того чтобы выводились все титулы при отсутствии фин данных-->
        <const as="ipr_fin_ipr" type="number" key="0">1</const>
        <!--<column table="a" column="km" />
        <column table="a" column="km_kl" />
        <column table="a" column="pow"/>-->
        <column table="ipr_closed_plans" column="dz" dgroup="sum" title="Заданная начальная дебиторская задолженность" as="dz" key="0" />
        <column table="ipr_closed_plans" column="kz" dgroup="sum" title="Заданная начальная кредиторская задолженность" as="kz" key="0" />
        <column table="ipr_closed_plans" column="saldo" dgroup="sum" title="Заданное НЗС" as="saldo" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="a">
          <link name="kod_main_titul" as="kod_main_titul" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_main_titul" parent="ipr_titul_ip" back="ipr_ipr_data_main" title="Титулы">
            <link name="kod_razdel" as="kod_razdel" table="ips_razdel_ip" child="ipr_titul_ip" field="kod_razdel" parent="ips_razdel_ip" back="ipr_titul_ip" title="Раздел ИПР" />
          </link>
          <link name="kod_kriteria" as="kod_kriteria" table="ips_kriteria" child="ipr_ipr_data" field="kod_kriteria" parent="ips_kriteria" back="ipr_ipr_data" />
          <link name="kod_priority_insert_ip" as="kod_priority_insert_ip" table="ips_kriteria" child="ipr_ipr_data" field="kod_priority_insert_ip" parent="ips_kriteria" back="ipr_ipr_data_prior_ins_ip" />
          <link name="kod_klass" as="kod_klass" table="ips_klass_titul" child="ipr_ipr_data" field="kod_klass" parent="ips_klass_titul" back="ipr_ipr_data" title="Принадлежность к важн. объекта, программам" />
          <dlink name="ipr_closed_plans" as="ipr_closed_plans" table="ipr_closed_plans" child="ipr_closed_plans" field="kod_ipr" parent="ipr_ipr_data" back="ipr_closed_plans" />
        </query>
      </from>
    </query>
    <query name="ipr_fin_ipr100" class="1" timestamp="17.08.2016 03:44:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="1" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="a" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <const as="kod_smet" key="0">100</const>
        <column table="a" column="pow" as="pow" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="a" />
      </from>
    </query>
    <query name="ipr_fin_ipr200" class="1" timestamp="17.08.2016 03:44:54" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="1" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="a" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <const as="kod_smet" key="0">200</const>
        <column table="a" column="km" as="km" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="a" />
      </from>
    </query>
    <query name="ipr_fin_ipr250" class="1" timestamp="17.08.2016 03:45:09" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="1" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="a" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <const as="kod_smet" key="0">250</const>
        <column table="a" column="km_kl" as="km_kl" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="a" />
      </from>
    </query>
    <query name="ipr_fin_ipr300" class="1" timestamp="17.08.2016 03:45:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="1" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="a" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <const as="kod_smet" key="0">300</const>
        <const as="other" type="number" key="0">null</const>
      </select>
      <from>
        <query name="ipr_ipr_data" as="a" />
      </from>
    </query>
    <query name="ipr_fin_pfa" class="1" timestamp="17.08.2016 03:46:50" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="year" as="year" key="0" />
        <call function="kv end mes" as="period" key="0">
          <column table="a" column="kvart" />
        </call>
        <call function="num to ym2" as="ym" key="0">
          <column table="this" column="year" />
          <column table="this" column="period" />
        </call>
        <column table="a" column="kvart" as="kvart" key="0" />
        <column table="a" column="kvl_prim" as="kvl_prim" key="0" />
        <column table="a" column="fin_prim" as="fin_prim" key="0" />
        <column table="a" column="vv_prim" as="vv_prim" key="0" />
        <column table="a" column="mba_prim" title="" as="mba_prim" key="0" />
        <column table="a" column="km_prim" as="km_prim" key="0" />
        <column table="a" column="kvl_wprim" as="kvl_wprim" key="0" />
        <column table="a" column="fin_wprim" as="fin_wprim" key="0" />
        <column table="a" column="vv_wprim" as="vv_wprim" key="0" />
        <column table="a" column="mba_wprim" title="" as="mba_wprim" key="0" />
        <column table="a" column="km_wprim" as="km_wprim" key="0" />
        <column table="kvl_krit" column="full_name" as="kvl_krit_name" title="+ по освоению" key="0" />
        <column table="vv_krit" column="full_name" as="vv_krit_name" title="+ по вводу" key="0" />
        <column table="fin_krit" column="full_name" as="fin_krit_name" title="+ по финансированию" key="0" />
        <column table="kvl_krit" column="full_name1" as="kvl_krit_name1" title="+ по освоению" key="0" />
        <column table="vv_krit" column="full_name1" as="vv_krit_name1" title="+ по вводу" key="0" />
        <column table="fin_krit" column="full_name1" as="fin_krit_name1" title="+ по финансированию" key="0" />
      </select>
      <from>
        <query name="ipr_planfactanaliz" as="a">
          <link name="kvl_krit" as="kvl_krit" table="ips_kriteria_otklon" child="ipr_planfactanaliz" field="kvl_krit" parent="ips_kriteria_otklon" back="ipr_planfactanaliz" />
          <link name="vv_krit" as="vv_krit" table="ips_kriteria_otklon" child="ipr_planfactanaliz" field="vv_krit" parent="ips_kriteria_otklon" back="ipr_planfactanaliz" />
          <link name="fin_krit" as="fin_krit" table="ips_kriteria_otklon" child="ipr_planfactanaliz" field="fin_krit" parent="ips_kriteria_otklon" back="ipr_planfactanaliz" />
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_planfactanaliz" field="kod_ipr" parent="ipr_ipr_data" back="ipr_planfactanaliz" />
        </query>
      </from>
    </query>
    <query name="ipr_fin_smet" class="1" timestamp="21.03.2017 13:12:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="ipr_ipr_data" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" key="0" />
        <column table="ipr_ipr_data" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <!--<column table="ipr_ipr_data" column="kod_doc_osn"/>-->
        <!--<column table="ipr_smet_struct_titul" column="kod_smet_titul"/>-->
        <call function="decode" as="kod_smet" dimension="ipr_kod_smet" key="0">
          <column table="a" column="kod_smet" />
          <const>5</const>
          <const>4</const>
          <const>6</const>
          <const>4</const>
          <const>7</const>
          <const>4</const>
          <column table="a" column="kod_smet" />
        </call>
        <call function="decode" as="kod_smet_sub" dimension="ipr_kod_smet_sub" key="0">
          <column table="a" column="kod_smet" />
          <const>5</const>
          <column table="a" column="kod_smet" />
          <const>6</const>
          <column table="a" column="kod_smet" />
          <const>7</const>
          <column table="a" column="kod_smet" />
          <const>null</const>
        </call>
        <column table="kod_doc" column="kod_doc" as="kod_doc_smet" dimension="ipr_kod_doc_smet" key="0" />
        <call function="()" type="number" as="pr_last_smet" dimension="ipr_pr_last_smet" key="0">
          <const>1</const>
        </call>
        <!--<column table="ipr_fix_smet_doc" column="kod_fix_smet"/>-->
        <const as="kod_vid_zatrat_titul" key="0">null</const>
        <const as="kod_ipr_dog" key="0">null</const>
        <const as="kod_dog" key="0">null</const>
        <const as="kodzatrat" key="0">null</const>
        <const as="year" key="0">null</const>
        <const as="period" key="0">null</const>
        <const as="ym" key="0">null</const>
        <call function="if" as="summ_usr" fact="ipr_smet_summ_usr" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_usr" agg="sum" fact="ipr_smet_summ_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_usr" agg="sum" fact="ipr_smet_summ_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_usr" fact="ipr_smet_summ_nds_usr" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd" fact="ipr_smet_summ_psd" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd" agg="sum" fact="ipr_smet_summ_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd" agg="sum" fact="ipr_smet_summ_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd" fact="ipr_smet_summ_nds_psd" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd_10" fact="ipr_smet_summ_psd_10" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd_10" agg="sum" fact="ipr_smet_summ_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd_10" agg="sum" fact="ipr_smet_summ_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd_10" fact="ipr_smet_summ_nds_psd_10" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd_30" fact="ipr_smet_summ_psd_30" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd_30" agg="sum" fact="ipr_smet_summ_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd_30" agg="sum" fact="ipr_smet_summ_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd_30" fact="ipr_smet_summ_nds_psd_30" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_utvpsd" fact="ipr_smet_summ_utvpsd" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_utvpsd" agg="sum" fact="ipr_smet_summ_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_utvpsd" agg="sum" fact="ipr_smet_summ_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_utvpsd" fact="ipr_smet_summ_nds_utvpsd" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <column table="this" column="summ_nds_utvpsd" as="summ_s" title="Утверждённая сметная стоимость строительства объекта" type="number" key="0" />
        <column table="this" column="summ_nds_psd" as="sum_psd" type="number" key="0" />
        <column table="this" column="summ_nds_utvpsd" as="sum_utvpsd" type="number" key="0" />
        <column table="this" column="summ_nds_usr" as="sum_usr" type="number" key="0" />
      </select>
      <from>
        <query name="ipr_smet_struct_titul" as="a">
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_smet_struct_titul" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_smet_struct_titul" title="Титулы">
            <elink name="ipr_ipr_data" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </link>
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul">
            <elink name="ipr_fix_smet_doc" as="smet_doc" table="ipr_fix_smet" child="ipr_fix_smet" field="kod_doc_smet" parent="ipr_doc" back="ipr_fix_smet_doc" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ipr_ipr_data" column="kod_titul_ip" />
            <column table="smet_doc" column="kod_titul_ip" />
          </call>
          <call function="=">
            <column table="ipr_ipr_data" column="kod_doc_osn" />
            <column table="smet_doc" column="kod_doc_osn" />
          </call>
          <!--<call function="=">
            <column table="ipr_ipr_data" column="kod_doc_osn"/>
            <column table="a" column="kod_doc_osn"/>
          </call>-->
          <call function="!=">
            <column table="a" column="kod_smet" />
            <const>4</const>
          </call>
          <!--<call function="=">
            <column table="kod_titul_ip" column="tit_num_new"/>
            <const>10120180000</const>
          </call>-->
        </call>
      </where>
    </query>
    <query name="ipr_fin_smet_tek" class="1" timestamp="20.03.2017 12:44:28" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="ipr_ipr_data" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="ipr_ipr_data" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="smet_doc" column="pr_last" as="pr_last_smet" dimension="ipr_pr_last_smet" key="0" />
        <column table="smet_doc" column="kod_doc_smet" dimension="ipr_kod_doc" as="kod_doc_smet" key="0" />
        <column table="smet_doc" column="kod_doc_smet" as="kod_doc_smet_s" dimension="ipr_kod_doc_smet" key="0" />
        <column table="smet_doc" column="doc_target_str" as="doc_target_str" key="0" />
        <call function="decode" as="kod_smet" dimension="ipr_kod_smet" key="0">
          <column table="a" column="kod_smet" />
          <const>5</const>
          <const>4</const>
          <const>6</const>
          <const>4</const>
          <column table="a" column="kod_smet" />
        </call>
        <call function="decode" as="kod_smet_sub" dimension="ipr_kod_smet_sub" key="0">
          <column table="a" column="kod_smet" />
          <const>5</const>
          <column table="a" column="kod_smet" />
          <const>6</const>
          <column table="a" column="kod_smet" />
          <const>null</const>
        </call>
        <column table="a" column="summ1" as="summ_smet" key="0" />
        <call function="if" as="summ_usr" fact="ipr_smet_summ_usr_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_usr" agg="sum" fact="ipr_smet_summ_10_usr_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_usr" agg="sum" fact="ipr_smet_summ_30_usr_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_usr" fact="ipr_smet_summ_nds_usr_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_usr" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'usr'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd" fact="ipr_smet_summ_psd_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd" agg="sum" fact="ipr_smet_summ_10_psd_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd" agg="sum" fact="ipr_smet_summ_30_psd_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd" fact="ipr_smet_summ_nds_psd_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd_10" fact="ipr_smet_summ_psd_10_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd_10" agg="sum" fact="ipr_smet_summ_10_psd_10_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd_10" agg="sum" fact="ipr_smet_summ_30_psd_10_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd_10" fact="ipr_smet_summ_nds_psd_10_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd_10" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_10'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_psd_30" fact="ipr_smet_summ_psd_30_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_psd_30" agg="sum" fact="ipr_smet_summ_10_psd_30_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_psd_30" agg="sum" fact="ipr_smet_summ_30_psd_30_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_psd_30" fact="ipr_smet_summ_nds_psd_30_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_psd_30" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'psd_30'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
        <call function="if" as="summ_utvpsd" fact="ipr_smet_summ_utvpsd_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1" />
        </call>
        <call function="if" as="summ_10_utvpsd" agg="sum" fact="ipr_smet_summ_10_utvpsd_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10" />
        </call>
        <call function="if" as="summ_30_utvpsd" agg="sum" fact="ipr_smet_summ_30_utvpsd_tek" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30" />
        </call>
        <call function="if" as="summ2_nds_utvpsd" fact="ipr_smet_summ_nds_utvpsd_tek" agg="sum" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ2_nds" />
        </call>
        <call function="if" as="summ_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_nds" />
        </call>
        <call function="if" as="summ_10_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_10_nds" />
        </call>
        <call function="if" as="summ_30_nds_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ1_30_nds" />
        </call>
        <call function="if" as="vl_km_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km" />
        </call>
        <call function="if" as="vl_km_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_10" />
        </call>
        <call function="if" as="vl_km_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="vl_km_30" />
        </call>
        <call function="if" as="kl_km_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km" />
        </call>
        <call function="if" as="kl_km_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_10" />
        </call>
        <call function="if" as="kl_km_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="kl_km_30" />
        </call>
        <call function="if" as="prch_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch" />
        </call>
        <call function="if" as="prch_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch_10" />
        </call>
        <call function="if" as="prch_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="prch_30" />
        </call>
        <call function="if" as="mva_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva" />
        </call>
        <call function="if" as="mva_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva_10" />
        </call>
        <call function="if" as="mva_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="mva_30" />
        </call>
        <call function="if" as="all_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ" />
        </call>
        <call function="if" as="all_10_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ_10" />
        </call>
        <call function="if" as="all_30_utvpsd" ifaplyed="1" key="0">
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <const>'utvpsd'</const>
            </call>
          </call>
          <column table="a" column="summ_30" />
        </call>
      </select>
      <from>
        <query name="ipr_smet_struct_titul" as="a">
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_smet_struct_titul" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_smet_struct_titul" title="Титулы">
            <elink name="ipr_ipr_data" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </link>
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul">
            <elink name="ipr_tek_smet_doc" as="smet_doc" table="ipr_tek_smet" child="ipr_tek_smet" field="kod_doc_smet" parent="ipr_doc" back="ipr_tek_smet_doc" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="smet_doc" column="kod_titul_ip" />
          </call>
          <call function="!=">
            <column table="a" column="kod_smet" />
            <const>4</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_zatrat" class="1" timestamp="02.08.2018 16:39:16" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="a" column="kod_vid_zatrat_titul" as="kod_vid_zatrat_titul" key="1" fixed="1" />
        <column table="a" column="kod_ipr_dog" dimension="ipr_kod_ipr_dog" as="kod_ipr_dog" key="0" />
        <column table="kod_ipr_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" key="0" />
        <column table="a" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_smet" column="kod_smet" dimension="ipr_kod_smet" as="kod_smet" key="0" />
        <column table="kod_vid_zatrat" column="kodzatrat" as="kodzatrat" key="0" />
        <const as="year" key="0">null</const>
        <const as="period" key="0">null</const>
        <const as="ym" key="0">null</const>
        <column table="a" column="plan_cost" agg="sum" fact="ipr_vid_zatr_plan_cost" as="plan_cost" key="0" />
        <column table="a" column="plan_cost_nds" agg="sum" fact="ipr_vid_zatr_plan_cost_nds" as="plan_cost_nds" key="0" />
      </select>
      <from>
        <query name="ipr_vid_zatrat_titul" as="a">
          <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
            <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
          </link>
          <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_vid_zatrat_titul" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vid_zatrat_titul" />
        </query>
      </from>
      <where>
        <call function="and">
          <!--<call function="=">
            <column table="b" column="pr_last"/>
            <const>1</const>
          </call>-->
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
          <call function="!=nvl">
            <column table="kod_ipr_dog" column="is_old" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_zatrat_proch" class="1" timestamp="28.11.2016 10:33:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" as="kod_ipr_ext" column="kod_ipr" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_vid_zatrat_titul" as="kod_vid_zatrat_titul" key="1" fixed="1" />
        <column table="a" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_smet" column="kod_smet" dimension="ipr_kod_smet" as="kod_smet" key="0" />
        <column table="kod_vid_zatrat" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" key="0" />
        <const as="year" key="0">null</const>
        <const as="period" key="0">null</const>
        <const as="ym" key="0">null</const>
        <column table="a" column="plan_cost" as="proch_plan_cost" agg="sum" fact="ipr_fin_dog_cost_pr_sum" key="0" />
        <column table="a" column="plan_cost_nds" as="proch_plan_cost_nds" agg="sum" fact="ipr_fin_dog_cost_pr_sum_nds" key="0" />
      </select>
      <from>
        <query name="ipr_vid_zatrat_titul" as="a">
          <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
            <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
          </link>
          <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_vid_zatrat_titul" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vid_zatrat_titul" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <call function="nvl">
              <column table="kod_ipr_dog" column="kod_dog" />
              <const>-1</const>
            </call>
            <const>-1</const>
          </call>
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_finplan" class="1" timestamp="30.05.2017 15:34:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" dimension="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" key="0" />
        <column table="b" column="kod_vid_zatrat_titul" as="kod_vid_zatrat_titul" key="0" />
        <column table="c" column="kod_ipr_dog" dimension="ipr_kod_ipr_dog" as="kod_ipr_dog" key="0" />
        <column table="kod_ipr_dog" column="kod_dog" as="kod_dog" key="0" />
        <column table="c" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_smet" column="kod_smet" as="kod_smet" key="0" />
        <column table="kod_vid_zatrat" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" key="0" />
        <column table="b" column="year" as="year" key="0" />
        <column table="a" column="period" as="period" key="0" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" key="0" />
        <call function="ym2 end day" as="dat" dimension="ipr_dat" key="0">
          <column table="a" column="ym" />
        </call>
        <column table="a" column="plan_summ" agg="sum" fact="ipr_fin_sum" as="plan_summ" key="0" />
        <column table="a" column="plan_summ_nds" agg="sum" fact="ipr_fin_sum_nds" as="plan_summ_nds" key="0" />
        <column table="a" column="wfact_summ" agg="sum" fact="ipr_fin_wf_sum" as="wfact_summ" key="0" />
        <column table="a" column="wfact_summ_nds" agg="sum" fact="ipr_fin_wf_sum_nds" as="wfact_summ_nds" key="0" />
      </select>
      <from>
        <query name="ipr_finplan_body" as="a">
          <link name="kod_finplan_head" as="b" table="ipr_finplan_head" child="ipr_finplan_body" field="kod_finplan_head" parent="ipr_finplan_head" back="ipr_finplan_body">
            <link name="kod_vid_zatrat_titul" as="c" table="ipr_vid_zatrat_titul" child="ipr_finplan_head" field="kod_vid_zatrat_titul" parent="ipr_vid_zatrat_titul" back="ipr_finplan_head">
              <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
                <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
              </link>
              <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
              <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_vid_zatrat_titul" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vid_zatrat_titul" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="b" column="pr_last" />
            <const>1</const>
          </call>
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap" class="1" timestamp="30.05.2017 15:35:45" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kapitalvloz_body" key="1" as="kod_ipr_fin_kap" />
        <column table="kod_ipr" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" />
        <column table="kod_ipr" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <column table="b" column="kod_vid_zatrat_titul" as="kod_vid_zatrat_titul" />
        <column table="c" column="kod_ipr_dog" dimension="ipr_kod_ipr_dog" as="kod_ipr_dog" />
        <column table="kod_ipr_dog" column="kod_dog" as="kod_dog" />
        <column table="kod_smet" column="kod_smet" dimension="ipr_kod_smet" as="kod_smet" />
        <column table="kod_vid_zatrat" column="kodzatrat" as="kodzatrat" />
        <column table="b" column="year" as="year" />
        <column table="a" column="period" as="period" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" />
        <call function="ym2 end day" as="dat" dimension="ipr_dat">
          <column table="a" column="ym" />
        </call>
        <column table="a" column="plan_summ" fact="ipr_kap_sum" agg="sum" as="plan_summ" />
        <column table="a" column="plan_summ_nds" fact="ipr_kap_sum_nds" agg="sum" as="plan_summ_nds" />
        <column table="a" column="wfact_summ" agg="sum" fact="ipr_kap_wf_sum" as="wfact_summ" />
        <column table="a" column="wfact_summ_nds" agg="sum" fact="ipr_kap_wf_sum_nds" as="wfact_summ_nds" />
      </select>
      <from>
        <query name="ipr_kapitalvloz_body" as="a">
          <link name="kod_kapitalvloz_head" as="b" table="ipr_kapitalvloz_head" child="ipr_kapitalvloz_body" field="kod_kapitalvloz_head" parent="ipr_kapitalvloz_head" back="ipr_kapitalvloz_body">
            <link name="kod_vid_zatrat_titul" as="c" table="ipr_vid_zatrat_titul" child="ipr_kapitalvloz_head" field="kod_vid_zatrat_titul" parent="ipr_vid_zatrat_titul" back="ipr_kapitalvloz_head">
              <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
                <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
              </link>
              <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
              <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_vid_zatrat_titul" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vid_zatrat_titul" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="b" column="pr_last" />
            <const>1</const>
          </call>
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_vvod" class="1" timestamp="17.08.2016 03:40:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="b" column="kod_vid_zatrat_titul" as="kod_vid_zatrat_titul" key="0" />
        <column table="c" column="kod_ipr_dog" dimension="ipr_kod_ipr_dog" as="kod_ipr_dog" key="0" />
        <column table="kod_ipr_dog" column="kod_dog" as="kod_dog" key="0" />
        <column table="c" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_smet" column="kod_smet" as="kod_smet" key="0" />
        <column table="kod_vid_zatrat" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" key="0" />
        <column table="b" column="year" as="year" key="0" />
        <column table="b" column="year" as="god_vvod" key="0" />
        <column table="a" column="period" as="period" key="0" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" key="0" />
        <column table="a" column="plan_summ" agg="sum" fact="ipr_vvd_sum" as="plan_summ" key="0" />
        <column table="a" column="plan_summ_nds" agg="sum" fact="ipr_vvd_sum_nds" as="plan_summ_nds" key="0" />
        <column table="a" column="wfact_summ" agg="sum" fact="ipr_vvd_wf_sum" as="wfact_summ" key="0" />
        <column table="a" column="wfact_summ_nds" agg="sum" fact="ipr_vvd_wf_sum_nds" as="wfact_summ_nds" key="0" />
      </select>
      <from>
        <query name="ipr_vvod_body" as="a">
          <link name="kod_vvod_head" as="b" table="ipr_vvod_head" child="ipr_vvod_body" field="kod_vvod_head" parent="ipr_vvod_head" back="ipr_vvod_body">
            <link name="kod_vid_zatrat_titul" as="c" table="ipr_vid_zatrat_titul" child="ipr_vvod_head" field="kod_vid_zatrat_titul" parent="ipr_vid_zatrat_titul" back="ipr_vvod_head">
              <link name="kod_vid_zatrat" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
                <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
              </link>
              <link name="kod_ipr_dog" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul" />
              <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_vid_zatrat_titul" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vid_zatrat_titul" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="b" column="pr_last" />
            <const>1</const>
          </call>
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_power_date" class="1" timestamp="28.11.2016 10:33:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="ipr_ipr_data" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="ipr_ipr_data" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <const as="kod_vid_zatrat_titul" key="0">null</const>
        <const as="kod_smet" key="0">null</const>
        <const as="kodzatrat" key="0">null</const>
        <const as="kod_ipr_dog" key="0">null</const>
        <const as="kod_dog" key="0">null</const>
        <column table="ipr_ipr_data" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="ipr_doc" column="doc_date" as="dat" key="0" />
        <call function="year" as="year" key="0">
          <column table="ipr_doc" column="doc_date" />
        </call>
        <call function="date to ym2" as="ym" key="0">
          <column table="ipr_doc" column="doc_date" />
        </call>
        <call function="month" as="period" key="0">
          <column table="ipr_doc" column="doc_date" />
        </call>
        <call function="ipr_tituls_characters.getSummCharValuesByKS14" as="km_fact_date" type="number" key="0">
          <const>14</const>
          <column table="ipr_tituls_objects" column="kod_tituls_object" />
          <column table="ipr_doc" column="kod_doc" />
        </call>
        <call function="ipr_tituls_characters.getSummCharValuesByKS14" as="mba_fact_date" mp="-6" type="number" fact="ipr_fin_pow_mba_ft_dt" agg="sum" key="0">
          <const>13</const>
          <column table="ipr_tituls_objects" column="kod_tituls_object" />
          <column table="ipr_doc" column="kod_doc" />
        </call>
        <call function="ipr_tituls_characters.getSummCharValuesByKS14" as="cnt_fact_date" type="number" key="0">
          <const>15</const>
          <column table="ipr_tituls_objects" column="kod_tituls_object" />
          <column table="ipr_doc" column="kod_doc" />
        </call>
        <call function="ipr_tituls_characters.getSummCharValuesByKS14" as="cnt_proch_fact_date" type="number" key="0">
          <const>16</const>
          <column table="ipr_tituls_objects" column="kod_tituls_object" />
          <column table="ipr_doc" column="kod_doc" />
        </call>
        <call function="ipr_tituls_characters.getSummCharValuesByKS14" as="km_kl_fact_date" type="number" key="0">
          <const>18</const>
          <column table="ipr_tituls_objects" column="kod_tituls_object" />
          <column table="ipr_doc" column="kod_doc" />
        </call>
      </select>
      <from>
        <query name="ipr_titul_ip" as="a" title="Титулы">
          <elink name="ipr_ipr_data" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data">
            <elink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_doc" as="ipr_doc" table="ipr_doc" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr" />
            </elink>
          </elink>
          <elink name="ipr_tituls_objects" as="ipr_tituls_objects" table="ipr_tituls_objects" child="ipr_tituls_objects" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_tituls_objects" />
        </query>
      </from>
      <where>
        <call function="in">
          <column table="ipr_doc" column="kod_doc_type" />
          <call function="array">
            <const>38</const>
            <const>39</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_power" class="1" timestamp="17.08.2016 03:40:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <const as="kod_vid_zatrat_titul" key="0">null</const>
        <const as="kod_smet" key="0">null</const>
        <const as="kodzatrat" key="0">null</const>
        <const as="kod_ipr_dog" key="0">null</const>
        <const as="kod_dog" key="0">null</const>
        <column table="b" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="b" column="year" as="year" key="0" />
        <column table="a" column="period" as="period" key="0" />
        <column table="a" column="ym" as="ym" key="0" />
        <column table="a" column="mba" description="Плановый ввод физических параметров (МВА)" as="mba" key="0" />
        <column table="a" column="km" description="Плановый ввод физических параметров ВЛ (км)" as="km" key="0" />
        <column table="a" column="cnt" description="Плановый ввод физических параметров (прочие)" as="cnt" key="0" />
        <column table="a" column="km_pr" description="Плановый прирост физических параметров ВЛ (км)" as="km_pr" key="0" />
        <column table="a" column="mba_pr" description="Плановый прирост физических параметров (МВА)" as="mba_pr" key="0" />
        <column table="a" column="cnt_pr" description="Плановый прирост физических параметров (прочие)" as="cnt_pr" key="0" />
        <column table="a" column="mba_del" as="mba_del" key="0" />
        <column table="a" column="km_del" as="km_del" key="0" />
        <column table="a" column="mba_fact" description="Фактический ввод физических параметров (МВА)" as="mba_fact" key="0" />
        <column table="a" column="km_fact" description="Фактический ввод физических параметров ВЛ (км)" as="km_fact" key="0" />
        <column table="a" column="cnt_fact" description="Фактический ввод физических параметров (прочие)" as="cnt_fact" key="0" />
        <column table="a" column="km_fact_pr" description="Фактический прирост физических параметров ВЛ (км)" as="km_fact_pr" key="0" />
        <column table="a" column="mba_fact_pr" description="Фактический прирост физических параметров (МВА)" as="mba_fact_pr" key="0" />
        <column table="a" column="cnt_fact_pr" description="Фактический прирост физических параметров (прочие)" as="cnt_fact_pr" key="0" />
        <column table="a" column="mba_wfact" as="mba_wfact" key="0" />
        <column table="a" column="km_wfact" as="km_wfact" key="0" />
        <column table="a" column="cnt_wfact" as="cnt_wfact" key="0" />
        <column table="a" column="cnt_proch_wfact" as="cnt_proch_wfact" key="0" />
        <column table="a" column="km_wfact_pr" as="km_wfact_pr" key="0" />
        <column table="a" column="mba_wfact_pr" as="mba_wfact_pr" key="0" />
        <column table="a" column="cnt_wfact_pr" as="cnt_wfact_pr" key="0" />
        <column table="a" column="cnt_proch_wfact_pr" as="cnt_proch_wfact_pr" key="0" />
        <column table="a" column="cnt_proch" as="cnt_proch" key="0" />
        <column table="a" column="cnt_proch_pr" as="cnt_proch_pr" key="0" />
        <column table="a" column="cnt_proch_fact" as="cnt_proch_fact" key="0" />
        <column table="a" column="cnt_proch_fact_pr" as="cnt_proch_fact_pr" key="0" />
        <column table="a" column="cnt_proch_wfact_pr" as="cnt_proch_wfact_pr" key="0" />
        <column table="a" column="km_kl" description="Плановый ввод физических параметров КЛ (км)" as="km_kl" key="0" />
        <column table="a" column="km_kl_del" as="km_kl_del" key="0" />
        <column table="a" column="km_kl_fact" description="Фактический ввод физических параметров КЛ (км)" as="km_kl_fact" key="0" />
        <column table="a" column="km_kl_ekspl" as="km_kl_ekspl" key="0" />
        <column table="a" column="km_kl_pr" description="Плановый прирост физических параметров КЛ (км)" as="km_kl_pr" key="0" />
        <column table="a" column="km_kl_fact_pr" description="Фактичекий прирост физических параметров КЛ (км)" as="km_kl_fact_pr" key="0" />
        <column table="a" column="km_kl_wfact" as="km_kl_wfact" key="0" />
        <column table="a" column="km_kl_wfact_pr" as="km_kl_wfact_pr" key="0" />
        <call function="coalesce nullif 0" as="pow_any" type="number" key="0">
          <column table="a" column="mba" />
          <column table="a" column="km" />
          <column table="a" column="km_kl" />
          <column table="a" column="cnt" />
          <column table="a" column="cnt_proch" />
          <column table="a" column="mba_pr" />
          <column table="a" column="km_pr" />
          <column table="a" column="km_pr" />
          <column table="a" column="cnt_pr" />
          <column table="a" column="cnt_pr" />
        </call>
        <call function="coalesce nullif 0" as="pow_any_fact" key="0">
          <column table="a" column="mba_fact" />
          <column table="a" column="km_fact" />
          <column table="a" column="km_kl_fact" />
          <column table="a" column="cnt_fact" />
          <column table="a" column="cnt_proch_fact" />
          <column table="a" column="mba_fact_pr" />
          <column table="a" column="km_fact_pr" />
          <column table="a" column="km_fact_pr" />
          <column table="a" column="cnt_fact_pr" />
          <column table="a" column="cnt_fact_pr" />
        </call>
      </select>
      <from>
        <query name="ipr_power_body" as="a">
          <link name="kod_power_head" as="b" table="ipr_power_head" child="ipr_power_body" field="kod_power_head" parent="ipr_power_head" back="ipr_power_body">
            <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_power_head" field="kod_ipr" parent="ipr_ipr_data" back="ipr_power_head" />
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="b" column="pr_last" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap_fact_dog" class="1" timestamp="15.08.2017 18:15:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_schet_it" as="kod_schet_it" />
        <column table="a" column="kod_schet" dimension="ipr_kod_schet" as="kod_schet" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="a" column="kod_vip_dog" dimension="ipr_kod_vip_dog" key="1" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="a" column="kod_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <column table="a" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="a" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="a" column="year" as="year" />
        <column table="a" column="period" as="period" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" />
        <column table="a" column="nds" fact="ipr_kap_fact_nds_a" agg="sum" as="nds" />
        <column table="a" column="vsego" fact="ipr_kap_fact_sum_nds_a" agg="sum" as="vsego" />
        <column table="a" column="dat_doc" as="dat" dimension="ipr_dat" />
      </select>
      <from>
        <query name="isv_ip_vip_dog_for_plan" as="a">
          <link name="kod_ip" as="kod_ip" table="ipr_titul_ip" child="isv_ip_vip_dog_for_plan" field="kod_ip" parent="ipr_titul_ip" back="isv_ip_vip_dog_for_plan" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
          <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap_fact_mfr" class="1" timestamp="03.04.2018 17:50:07" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="mv" column="kod_move_wsumm" key="1" as="kod_move_wsumm" />
        <column table="kod_vip_dog" column="kod_schet_it" as="kod_schet_it" />
        <column table="kod_vip_dog" column="kod_schet" dimension="ipr_kod_schet" as="kod_schet" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="mv" column="kod_titul_ip_fr" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <column table="kod_vip_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <column table="kod_vip_dog" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="kod_vip_dog" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="kod_vip_dog" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="kod_doc" column="doc_date" as="dat" dimension="ipr_dat" />
        <call function="year" as="year">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="num to ym2" as="ym" dimension="ipr_ym">
          <column table="this" column="year" />
          <column table="this" column="period" />
        </call>
        <column table="kod_vip_dog" column="ym" as="ym_vozn" is-private-dimension="ipr_ym_vozn" is-final-dimension="ipr_ym_vozn" dimension="ipr_ym_vozn" />
        <column table="mv" column="summ" as="summ" />
        <call function="*" as="nds">
          <column table="mv" column="summ" />
          <call function="/">
            <column table="kod_vip_dog" column="proc_nds" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="summ_per" fact="ipr_kap_fact_sum_per" agg="sum" ifaplyed="1">
          <call function="is not null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_per" fact="ipr_kap_fact_nds_per" agg="sum" ifaplyed="1">
          <call function="is not null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="nds" />
        </call>
        <call function="if" as="summ_sp" fact="ipr_kap_fact_sum_sp" agg="sum" ifaplyed="1">
          <call function="is null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_sp" fact="ipr_kap_fact_nds_sp" agg="sum" ifaplyed="1">
          <call function="is null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="nds" />
        </call>
        <call function="if" as="summ_per_pr" fact="ipr_kap_fact_sum_per_pr" agg="sum" ifaplyed="1">
          <call function="and">
            <call function="is not null">
              <column table="mv" column="kod_fact_wcompl_to" />
            </call>
            <call function="=">
              <call function="nvl">
                <column table="kod_vip_dog" column="kod_dog" />
                <const>-1</const>
              </call>
              <const>-1</const>
            </call>
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_per_pr" fact="ipr_kap_fact_nds_per_pr" agg="sum" ifaplyed="1">
          <call function="and">
            <call function="is not null">
              <column table="mv" column="kod_fact_wcompl_to" />
            </call>
            <call function="=">
              <call function="nvl">
                <column table="kod_vip_dog" column="kod_dog" />
                <const>-1</const>
              </call>
              <const>-1</const>
            </call>
          </call>
          <column table="this" column="nds" />
        </call>
        <call function="if" as="summ_sp_pr" fact="ipr_kap_fact_sum_sp_pr" agg="sum" ifaplyed="1">
          <call function="and">
            <call function="is null">
              <column table="mv" column="kod_fact_wcompl_to" />
            </call>
            <call function="=">
              <call function="nvl">
                <column table="kod_vip_dog" column="kod_dog" />
                <const>-1</const>
              </call>
              <const>-1</const>
            </call>
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_sp_pr" fact="ipr_kap_fact_nds_sp_pr" agg="sum" ifaplyed="1">
          <call function="and">
            <call function="is null">
              <column table="mv" column="kod_fact_wcompl_to" />
            </call>
            <call function="=">
              <call function="nvl">
                <column table="kod_vip_dog" column="kod_dog" />
                <const>-1</const>
              </call>
              <const>-1</const>
            </call>
          </call>
          <column table="this" column="nds" />
        </call>
      </select>
      <from>
        <query name="ipr_move_wsumm" as="mv">
          <link name="kod_titul_ip_fr" as="kod_titul_ip_fr" table="ipr_titul_ip" child="ipr_move_wsumm" field="kod_titul_ip_fr" parent="ipr_titul_ip" back="ipr_move_wsumm" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
          <link name="kod_fact_wcompl_fr" as="kod_fact_wcompl_fr" table="ipr_fact_wcompl" child="ipr_move_wsumm" field="kod_fact_wcompl_fr" parent="ipr_fact_wcompl" back="ipr_move_wsumm_fr">
            <link name="kod_vip_dog_for_plan" as="kod_vip_dog" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl">
              <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
            </link>
          </link>
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_move_wsumm" field="kod_doc" parent="ipr_doc" back="ipr_move_wsumm" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap_fact_mto" class="1" timestamp="03.04.2018 17:49:00" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="mv" column="kod_move_wsumm" key="1" as="kod_move_wsumm" />
        <column table="kod_vip_dog" column="kod_schet_it" as="kod_schet_it" />
        <column table="kod_vip_dog" column="kod_schet" dimension="ipr_kod_schet" as="kod_schet" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="mv" column="kod_titul_ip_to" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="kod_vip_dog" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="kod_vip_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <column table="kod_vip_dog" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="kod_vip_dog" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="kod_doc" column="doc_date" as="dat" dimension="ipr_dat" />
        <call function="year" as="year">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="num to ym2" as="ym" dimension="ipr_ym">
          <column table="this" column="year" />
          <column table="this" column="period" />
        </call>
        <column table="kod_vip_dog_fr" column="ym" as="ym_vozn" is-private-dimension="ipr_ym_vozn" is-final-dimension="ipr_ym_vozn" dimension="ipr_ym_vozn" />
        <column table="mv" column="summ" fact="ipr_kap_fact_sum_pri" agg="sum" as="summ" />
        <call function="*" as="nds" fact="ipr_kap_fact_nds_pri" agg="sum">
          <column table="mv" column="summ" />
          <call function="/">
            <column table="kod_vip_dog" column="proc_nds" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="summ_pr" fact="ipr_kap_fact_sum_pri_pr" agg="sum" ifaplyed="1">
          <call function="=">
            <call function="nvl">
              <column table="kod_vip_dog" column="kod_dog" />
              <const>-1</const>
            </call>
            <const>-1</const>
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_pr" fact="ipr_kap_fact_nds_pri_pr" agg="sum" ifaplyed="1">
          <call function="=">
            <call function="nvl">
              <column table="kod_vip_dog" column="kod_dog" />
              <const>-1</const>
            </call>
            <const>-1</const>
          </call>
          <column table="this" column="nds" />
        </call>
      </select>
      <from>
        <query name="ipr_move_wsumm" as="mv">
          <link name="kod_fact_wcompl_to" as="kod_fact_wcompl_to" table="ipr_fact_wcompl" child="ipr_move_wsumm" field="kod_fact_wcompl_to" parent="ipr_fact_wcompl" back="ipr_move_wsumm_to">
            <link name="kod_vip_dog_for_plan" as="kod_vip_dog" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl">
              <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
            </link>
          </link>
          <link name="kod_fact_wcompl_fr" as="kod_fact_wcompl_fr" table="ipr_fact_wcompl" child="ipr_move_wsumm" field="kod_fact_wcompl_fr" parent="ipr_fact_wcompl" back="ipr_move_wsumm_fr">
            <link name="kod_vip_dog_for_plan" as="kod_vip_dog_fr" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl" />
          </link>
          <link name="kod_titul_ip_to" as="kod_titul_ip_to" table="ipr_titul_ip" child="ipr_move_wsumm" field="kod_titul_ip_to" parent="ipr_titul_ip" back="ipr_move_wsumm" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_move_wsumm" field="kod_doc" parent="ipr_doc" back="ipr_move_wsumm" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
          <call function="is not null">
            <column table="mv" column="kod_titul_ip_to" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_finplan_fact_dog" class="1" timestamp="17.10.2017 20:13:17" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="kod_vip_dog" column="kod_schet_it" as="kod_schet_it" />
        <call function="coalesce" as="kod_schet" dimension="ipr_kod_schet">
          <column table="kod_vip_dog" column="kod_schet_it" />
          <column table="kodzatrat" column="kod_schet" />
          <const>3</const>
        </call>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="a" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="a" column="kod_opl_period" dimension="ipr_kod_opl_period" key="1" as="kod_opl_period" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="a" column="kod_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="a" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="a" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="a" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="a" column="year" as="year" />
        <column table="a" column="period" as="period" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" />
        <column table="a" column="dat_opl" as="dat" dimension="ipr_dat" />
        <column table="a" column="nds" fact="ipr_fin_fact_nds_b" agg="sum" as="nds" />
        <column table="a" column="sum_opl" fact="ipr_fin_fact_sum_nds_b" agg="sum" as="sum_opl" />
        <column table="a" column="is_avans" as="is_avans" />
        <call function="if" type="number" as="pr_opl_spis">
          <call function="=">
            <column table="kod_ro" column="kod_spr_doc" />
            <const>212</const>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="isv_ip_opl_for_plan" as="a">
          <link name="kod_vip_dog" as="kod_vip_dog" table="isv_ip_vip_dog" child="isv_ip_opl_for_plan" field="kod_vip_dog" parent="isv_ip_vip_dog" back="isv_ip_opl_for_plan" />
          <link name="kod_ip" as="kod_ip" table="ipr_titul_ip" child="isv_ip_opl_for_plan" field="kod_ip" parent="ipr_titul_ip" back="isv_ip_opl_for_plan" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
          <link name="kodzatrat" as="kodzatrat" table="ips_vid_zatrat" child="isv_ip_opl_for_plan" field="kodzatrat" parent="ips_vid_zatrat" back="isv_ip_opl_for_plan">
            <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="ips_vid_zatrat" field="kod_smet" parent="ips_smet_structure" back="ips_vid_zatrat" title="Виды затрат" />
          </link>
          <link name="kod_ro" as="kod_ro" table="is_ro" child="isv_ip_opl_for_plan" field="kod_ro" parent="is_ro" back="isv_ip_opl_for_plan" />
        </query>
      </from>
      <where>
        <call function="and">
          <!--<call function="is not null">
            <column table="kod_ipr_dog" column="kod_ipr_dog"/>
          </call>-->
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_finplan_fact_mfr" class="1" timestamp="17.10.2017 20:15:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="mvf" column="kod_move_wsumm_fin" key="1" as="kod_move_wsumm_fin" />
        <column table="kod_vip_dog" column="kod_schet_it" as="kod_schet_it" />
        <call function="coalesce" as="kod_schet" dimension="ipr_kod_schet">
          <column table="kod_vip_dog" column="kod_schet_it" />
          <column table="kodzatrat" column="kod_schet" />
          <const>3</const>
        </call>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="kod_vip_dog" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="mvf" column="kod_opl_period" dimension="ipr_kod_opl_period" as="kod_opl_period" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="mv" column="kod_titul_ip_fr" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="kod_vip_dog" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="kod_vip_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="kod_vip_dog" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <call function="year" as="year">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="num to ym2" as="ym" dimension="ipr_ym">
          <column table="this" column="year" />
          <column table="this" column="period" />
        </call>
        <column table="kod_doc" column="doc_date" as="dat" dimension="ipr_dat" />
        <column table="kod_opl_period" column="ym" as="ym_vozn" />
        <column table="mvf" column="summ" as="summ" />
        <column table="mvf" column="summ_nds" as="summ_nds" />
        <call function="-nvl" as="nds">
          <column table="this" column="summ_nds" />
          <column table="this" column="summ" />
        </call>
        <call function="if" as="summ_per" fact="ipr_fin_fact_sum_per_b" agg="sum" ifaplyed="1">
          <call function="is not null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_per" fact="ipr_fin_fact_nds_per_b" agg="sum" ifaplyed="1">
          <call function="is not null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="nds" />
        </call>
        <call function="if" as="summ_nds_per" fact="ipr_fin_fact_sum_nds_per_b" agg="sum" ifaplyed="1">
          <call function="is not null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ_nds" />
        </call>
        <call function="if" as="summ_sp" fact="ipr_fin_fact_sum_sp_b" agg="sum" ifaplyed="1">
          <call function="is null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ" />
        </call>
        <call function="if" as="nds_sp" fact="ipr_fin_fact_nds_sp_b" agg="sum" ifaplyed="1">
          <call function="is null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="nds" />
        </call>
        <call function="if" as="summ_nds_sp" fact="ipr_fin_fact_sum_nds_sp_b" agg="sum" ifaplyed="1">
          <call function="is null">
            <column table="mv" column="kod_fact_wcompl_to" />
          </call>
          <column table="this" column="summ_nds" />
        </call>
        <column table="kod_opl_period" column="is_avans" as="is_avans" />
      </select>
      <from>
        <query name="ipr_move_wsumm_fin" as="mvf">
          <link name="kod_opl_period" as="kod_opl_period" table="isv_ip_opl" child="ipr_move_wsumm_fin" field="kod_opl_period" parent="isv_ip_opl" back="ipr_move_wsumm_fin" />
          <link name="kod_move_wsumm" as="mv" table="ipr_move_wsumm" child="ipr_move_wsumm_fin" field="kod_move_wsumm" parent="ipr_move_wsumm" back="ipr_move_wsumm_fin">
            <link name="kod_titul_ip_fr" as="kod_titul_ip_fr" table="ipr_titul_ip" child="ipr_move_wsumm" field="kod_titul_ip_fr" parent="ipr_titul_ip" back="ipr_move_wsumm" title="Титулы">
              <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
                <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
              </elink>
            </link>
            <link name="kod_fact_wcompl_fr" as="kod_fact_wcompl_fr" table="ipr_fact_wcompl" child="ipr_move_wsumm" field="kod_fact_wcompl_fr" parent="ipr_fact_wcompl" back="ipr_move_wsumm_fr">
              <link name="kod_vip_dog_for_plan" as="kod_vip_dog" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl">
                <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
                <link name="kodzatrat" as="kodzatrat" table="ips_vid_zatrat" child="isv_ip_vip_dog_for_plan" field="kodzatrat" parent="ips_vid_zatrat" back="isv_ip_vip_dog_for_plan" />
              </link>
            </link>
            <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_move_wsumm" field="kod_doc" parent="ipr_doc" back="ipr_move_wsumm" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_finplan_fact_mto" class="1" timestamp="17.10.2017 20:16:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="mvf" column="kod_move_wsumm_fin" key="1" as="kod_move_wsumm_fin" />
        <column table="kod_vip_dog" column="kod_schet_it" as="kod_schet_it" />
        <call function="coalesce" as="kod_schet" dimension="ipr_kod_schet">
          <column table="kod_vip_dog" column="kod_schet_it" />
          <column table="kodzatrat" column="kod_schet" />
          <const>3</const>
        </call>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="kod_vip_dog" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="mvf" column="kod_opl_period" dimension="ipr_kod_opl_period" as="kod_opl_period" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="mv" column="kod_titul_ip_to" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="kod_vip_dog" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="kod_vip_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="kod_vip_dog" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <call function="year" as="year">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="num to ym2" as="ym" dimension="ipr_ym">
          <column table="this" column="year" />
          <column table="this" column="period" />
        </call>
        <column table="kod_opl_period" column="ym" as="ym_vozn" />
        <column table="kod_doc" column="doc_date" as="dat" dimension="ipr_dat" />
        <column table="mvf" column="summ" fact="ipr_fin_fact_sum_pri_b" agg="sum" as="summ" />
        <column table="mvf" column="summ_nds" fact="ipr_fin_fact_sum_nds_pri_b" agg="sum" as="summ_nds" />
        <call function="-nvl" as="nds" fact="ipr_fin_fact_nds_pri_b" agg="sum">
          <column table="this" column="summ_nds" />
          <column table="this" column="summ" />
        </call>
        <column table="kod_opl_period" column="is_avans" as="is_avans" />
      </select>
      <from>
        <query name="ipr_move_wsumm_fin" as="mvf">
          <link name="kod_opl_period" as="kod_opl_period" table="isv_ip_opl" child="ipr_move_wsumm_fin" field="kod_opl_period" parent="isv_ip_opl" back="ipr_move_wsumm_fin" />
          <link name="kod_move_wsumm" as="mv" table="ipr_move_wsumm" child="ipr_move_wsumm_fin" field="kod_move_wsumm" parent="ipr_move_wsumm" back="ipr_move_wsumm_fin">
            <link name="kod_fact_wcompl_to" as="kod_fact_wcompl_to" table="ipr_fact_wcompl" child="ipr_move_wsumm" field="kod_fact_wcompl_to" parent="ipr_fact_wcompl" back="ipr_move_wsumm_to">
              <link name="kod_vip_dog_for_plan" as="kod_vip_dog" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl">
                <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
                <link name="kodzatrat" as="kodzatrat" table="ips_vid_zatrat" child="isv_ip_vip_dog_for_plan" field="kodzatrat" parent="ips_vid_zatrat" back="isv_ip_vip_dog_for_plan" />
              </link>
            </link>
            <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_move_wsumm" field="kod_doc" parent="ipr_doc" back="ipr_move_wsumm" />
            <link name="kod_titul_ip_to" as="kod_titul_ip_to" table="ipr_titul_ip" child="ipr_move_wsumm" field="kod_titul_ip_to" parent="ipr_titul_ip" back="ipr_move_wsumm" title="Титулы">
              <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
                <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
              </elink>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap_fact_dog_pr" class="1" timestamp="17.10.2017 20:29:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_schet_it" as="kod_schet_it" />
        <column table="a" column="kod_schet" dimension="ipr_kod_schet" as="kod_schet" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="a" column="kod_vip_dog" dimension="ipr_kod_vip_dog" key="1" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <!--<const as="kod_ipr" type="number">null</const>
        <const as="kod_ipr_dog" type="number">null</const>-->
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="a" column="kod_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="a" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="a" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="a" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="a" column="year" as="year" />
        <column table="a" column="period" as="period" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" />
        <column table="a" column="dat_doc" as="dat" dimension="ipr_dat" />
        <column table="a" column="nds" fact="ipr_kap_fact_nds_pr" agg="sum" as="nds" />
        <column table="a" column="vsego" fact="ipr_kap_fact_sum_nds_pr" agg="sum" as="vsego" />
      </select>
      <from>
        <query name="isv_ip_vip_dog_for_plan" as="a">
          <link name="kod_ip" as="kod_ip" table="ipr_titul_ip" child="isv_ip_vip_dog_for_plan" field="kod_ip" parent="ipr_titul_ip" back="isv_ip_vip_dog_for_plan" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
          <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <call function="nvl">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
            <const>-1</const>
          </call>
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_vvod_fact_dog" class="1" timestamp="16.08.2017 17:26:30" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="ipr_works_vvod" column="kod_work_vvod" key="1" as="kod_work_vvod" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" as="kod_doc_osn" />
        <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
          <call function="is not null">
            <call function="nullif">
              <column table="this" column="kod_dog" group="" />
              <const>-1</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <column table="kod_vip_dog" column="kod_vip_dog" dimension="ipr_kod_vip_dog" as="kod_vip_dog" />
        <const as="kod_vid_zatrat_titul">null</const>
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="kod_tituls_object" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <!--<call function="nvl" as="kod_ipr_dog">
          <column table="kod_vip_dog" column="kod_ipr_dog"/>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr"/>
        </call>-->
        <column table="kod_vip_dog" column="kod_dog" dimension="ipr_kod_dog" as="kod_dog" />
        <call function="if" as="kod_ipr_dog" ifaplyed="1">
          <call function="is null or -1">
            <column table="this" column="kod_dog" />
          </call>
          <column table="ipr_ipr_data" column="kod_ipr_dog_pr" />
        </call>
        <column table="kod_smet" column="kod_smet" as="kod_smet" />
        <column table="kod_vip_dog" column="kodzatrat" dimension="ipr_kod_zatrat" as="kodzatrat" />
        <column table="ipr_works_vvod" column="kod_doc" dimension="ipr_kod_doc_vvod" as="kod_doc" />
        <column table="ipr_works_vvod" column="year" as="year" />
        <column table="ipr_works_vvod" column="period" as="period" />
        <column table="ipr_works_vvod" column="ym" dimension="ipr_ym" as="ym" />
        <column table="ipr_works_vvod" column="dat" dimension="ipr_dat" as="dat" />
        <column table="ipr_works_vvod" column="summ" fact="ipr_vvd_fact_sum" agg="sum" as="summ" />
      </select>
      <from>
        <query name="ipr_works_vvod" as="ipr_works_vvod">
          <link name="kod_fact_wcompl" as="kod_fact_wcompl" table="ipr_fact_wcompl" child="ipr_works_vvod" field="kod_fact_wcompl" parent="ipr_fact_wcompl" back="ipr_works_vvod">
            <link name="kod_work_body" as="kod_work_body" table="ipr_works_body" child="ipr_fact_wcompl" field="kod_work_body" parent="ipr_works_body" back="ipr_fact_wcompl">
              <link name="kod_tituls_object" as="kod_tituls_object" table="ipr_tituls_objects" child="ipr_works_body" field="kod_tituls_object" parent="ipr_tituls_objects" back="ipr_works_body">
                <link name="kod_titul_ip" as="kod_ip" table="ipr_titul_ip" child="ipr_tituls_objects" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_tituls_objects" title="Титулы">
                  <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
                    <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
                  </elink>
                </link>
              </link>
            </link>
            <link name="kod_vip_dog_for_plan" as="kod_vip_dog" table="isv_ip_vip_dog_for_plan" child="ipr_fact_wcompl" field="kod_vip_dog_for_plan" parent="isv_ip_vip_dog_for_plan" back="ipr_fact_wcompl">
              <link name="kod_smet" as="kod_smet" table="ips_smet_structure" child="isv_ip_vip_dog_for_plan" field="kod_smet" parent="ips_smet_structure" back="isv_ip_vip_dog_for_plan" title="Виды затрат" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <!--<call function="is not null">
            <column table="kod_ipr_dog" column="kod_ipr_dog"/>
          </call>-->
          <call function="is null">
            <column table="kod_smet" column="kod_parent" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_steps" class="1" timestamp="05.02.2018 21:13:52" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="ipr_doc_by_ipr" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="ipr_doc_by_ipr" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="kod_contr_steps_val" as="kod_contr_steps_val" key="1" fixed="1" />
        <column table="kod_doc" column="doc_date" as="dat_doc_steps" key="0" />
        <const type="number" as="ipr_fin_steps" key="0">1</const>
      </select>
      <from>
        <query name="ipr_contr_steps_val" as="a">
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_contr_steps_val" field="kod_doc" parent="ipr_doc" back="ipr_contr_steps_val">
            <elink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
              <link name="kod_ipr" as="kod_ipr1" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr" />
            </elink>
          </link>
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_contr_steps_val" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_contr_steps_val" title="Титулы">
            <elink name="ipr_ipr_data" as="kod_ipr" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_ipr1" column="kod_ipr" />
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </where>
    </query>
    <query name="ipr_fin_lim" class="1" timestamp="17.08.2016 03:48:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="year" as="year" key="0" />
        <call function="kv end mes" as="period" key="0">
          <column table="a" column="kvartal" />
        </call>
        <column table="a" column="value_osv" as="value_osv" key="0" />
        <column table="a" column="value_fin_nds" as="value_fin_nds" key="0" />
        <column table="a" column="value_vvod" as="value_vvod" key="0" />
      </select>
      <from>
        <query name="ipr_finsrc_lim" as="a">
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_finsrc_lim" field="kod_ipr" parent="ipr_ipr_data" back="ipr_finsrc_lim" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="in_titul" nvl="0" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_doc" class="1" timestamp="17.08.2016 03:47:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <column table="a" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="kod_doc" dimension="ipr_kod_doc" as="kod_doc" key="0" />
        <column table="kod_doc" column="doc_date" as="doc_date" key="0" />
        <const type="number" as="ipr_fin_doc" key="0">1</const>
      </select>
      <from>
        <query name="ipr_doc_by_ipr" as="a">
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr" />
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr" />
        </query>
      </from>
    </query>
    <query name="ipr_fin_phis_param" class="1" timestamp="17.08.2016 03:48:19" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml" haskeys="1">
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="ipr_ipr_data" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="phis_param" column="kod_doc" as="kod_doc" key="0" />
        <column table="phis_param" column="kod_titul_ip" as="kod_titul_ip" key="1" fixed="1" />
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr" key="0" />
        <call function="year" as="year" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="date to ym2" as="ym" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="cut_num" as="phis_val12" title="Количествосиловых трансформаторов, шт" key="0">
          <call function="if">
            <call function="in">
              <column table="phis_param" column="kod_phis_param" />
              <const>12</const>
            </call>
            <column table="phis_param" column="value" />
          </call>
        </call>
        <call function="if" as="phis_val17" title="Марка силовых трансформаторов" key="0">
          <call function="in">
            <column table="phis_param" column="kod_phis_param" />
            <const>17</const>
          </call>
          <column table="phis_param" column="value" />
        </call>
        <call function="cut_num" as="phis_val13" title="Мощность, МВА" key="0">
          <call function="if">
            <call function="in">
              <column table="phis_param" column="kod_phis_param" />
              <const>13</const>
            </call>
            <column table="phis_param" column="value" />
          </call>
        </call>
        <call function="if" as="phis_val1" title="Тип опор" key="0">
          <call function="in">
            <column table="phis_param" column="kod_phis_param" />
            <const>1</const>
          </call>
          <column table="phis_param" column="value" />
        </call>
        <call function="if" as="phis_val3" title="Марка кабеля" key="0">
          <call function="in">
            <column table="phis_param" column="kod_phis_param" />
            <const>3</const>
          </call>
          <column table="phis_param" column="value" />
        </call>
        <call function="cut_num" as="phis_val14" title="ВЛ,км" key="0">
          <call function="if">
            <call function="in">
              <column table="phis_param" column="kod_phis_param" />
              <const>14</const>
            </call>
            <column table="phis_param" column="value" />
          </call>
        </call>
        <call function="cut_num" as="phis_val18" title="КЛ,км" key="0">
          <call function="if">
            <call function="in">
              <column table="phis_param" column="kod_phis_param" />
              <const>18</const>
            </call>
            <column table="phis_param" column="value" />
          </call>
        </call>
        <call function="cut_num" as="phis_val16" title="Иные объекты (др. единицы измерений)" key="0">
          <call function="if">
            <call function="in">
              <column table="phis_param" column="kod_phis_param" />
              <const>16</const>
            </call>
            <column table="phis_param" column="value" />
          </call>
        </call>
      </select>
      <from>
        <query name="ipv_phys_param_values" as="phis_param">
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipv_phys_param_values" field="kod_titul_ip" parent="ipr_titul_ip" back="ipv_phys_param_values" title="Титулы">
            <elink name="ipr_ipr_data" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </link>
          <link name="kod_doc" as="kod_doc" table="ipr_doc" child="ipv_phys_param_values" field="kod_doc" parent="ipr_doc" back="ipv_phys_param_values" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="phis_param" column="kod_doc" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_fin_kap_fact_move_to_8_3" class="1" timestamp="03.04.2018 19:58:40" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <select>
        <call function="decode" type="number" as="kod_schet_it" key="0">
          <column table="a" column="kr_sch_c" />
          <const>'07'</const>
          <const>6</const>
          <const>'10'</const>
          <const>7</const>
        </call>
        <column table="this" column="kod_schet_it" as="kod_schet" key="0" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr_ext" as="kod_ipr_ext" key="0" />
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="ipr_ipr_data" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="vv_ipr_ipr_data_extra" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="vv_ipr_ipr_data_extra" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" key="0" />
        <column table="kod_ip" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" key="0">
          <item />
        </column>
        <call function="()" type="number" as="kod_smet" is-private-dimension="ipr_kod_smet" is-final-dimension="ipr_kod_smet" dimension="ipr_kod_smet" key="0">
          <const>3</const>
        </call>
        <call function="()" type="number" as="kod_schet_l" is-private-dimension="ipr_kod_schet" is-final-dimension="ipr_kod_schet" dimension="ipr_kod_schet" key="0">
          <const>3</const>
        </call>
        <call function="()" type="number" as="kod_zatrat" is-private-dimension="ipr_kod_zatrat" is-final-dimension="ipr_kod_zatrat" dimension="ipr_kod_zatrat" key="0">
          <const>null</const>
        </call>
        <column table="a" column="sum_akt" fact="ipr_kap_fact_sum_m83" agg="sum" as="sum_akt" key="0" />
        <call function="*" as="nds_akt" key="0">
          <column table="this" column="sum_akt" />
          <const>0.18</const>
        </call>
        <call function="+nvl" as="sum_nds_akt" key="0">
          <column table="this" column="sum_akt" />
          <column table="this" column="nds_akt" />
        </call>
        <column table="a" column="dat_buh" as="dat" dimension="ipr_dat" key="0" />
        <call function="month" as="period" key="0">
          <column table="this" column="dat" />
        </call>
        <call function="year" as="year" key="0">
          <column table="this" column="dat" />
        </call>
        <call function="date to ym2" as="ym" is-private-dimension="ipr_ym" is-final-dimension="ipr_ym" dimension="ipr_ym" key="0">
          <column table="this" column="dat" />
        </call>
      </select>
      <from>
        <query name="buh_akt_move_to_8_3" as="a">
          <link name="kod_titul_ip" as="kod_ip" table="ipr_titul_ip" child="buh_akt_move_to_8_3" field="kod_titul_ip" parent="ipr_titul_ip" back="buh_akt_move_to_8_3" title="Титулы">
            <elink name="vv_ipr_ipr_data_extra" as="vv_ipr_ipr_data_extra" table="vv_ipr_ipr_data_extra" child="vv_ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="vv_ipr_ipr_data_extra">
              <link name="kod_ipr_ext" as="ipr_ipr_data" table="ipr_ipr_data" child="vv_ipr_ipr_data_extra" field="kod_ipr_ext" parent="ipr_ipr_data" back="vv_ipr_ipr_data_extra" />
            </elink>
          </link>
        </query>
      </from>
    </query>
    <query name="ipr_fin_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_head.xml">
      <select>
        <column table="a" column="kodzatrat" as="kodzatrat" key="0" />
        <column table="a" column="kod_ipr" as="kod_ipr" key="0" />
        <column table="a" column="kod_ipr_dog" as="kod_ipr_dog" key="0" />
        <!--<column table="a" column="year"/>-->
        <column table="a" column="year" as="ym" key="0" />
        <column table="a" column="year" as="year" key="0" />
        <column table="a" column="period" as="period" key="0" />
      </select>
      <from>
        <!--<query name="ipr_fin_body_un" as="a" grouplevel="2"/>-->
        <query name="ipr_fin_body_united" as="a" title="Ведение инвестиционных проектов" />
        <query name="ipr_vid_zatrat_titul" as="kod_vid_zatrat_titul" join="left outer" dname="ipr_fin_head">
          <call function="and">
            <call function="=">
              <column table="kod_vid_zatrat_titul" column="kod_vid_zatrat_titul" />
              <column table="a" column="kod_vid_zatrat_titul" />
            </call>
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_fin_head">
          <call function="and">
            <call function="=">
              <column table="kod_ipr" column="kod_ipr" />
              <column table="a" column="kod_ipr" />
            </call>
          </call>
          <link name="kod_doc_osn" as="kod_doc_osn" table="ipr_doc" child="ipr_ipr_data" field="kod_doc_osn" parent="ipr_doc" back="ipr_ipr_data" />
          <dlink name="ipr_closed_plans" as="ipr_closed_plans" table="ipr_closed_plans" child="ipr_closed_plans" field="kod_ipr" parent="ipr_ipr_data" back="ipr_closed_plans" />
        </query>
      </from>
    </query>
    <query name="ipr_pr_data-test" class="1" timestamp="17.10.2017 01:04:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_ipr_data.xml">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="a" />
      </from>
      <!--<where>
        <call function="=">
          <column table="this" column="pr_last"/>
          <const>1</const>
        </call>
      </where>-->
    </query>
    <query name="ipr_ipr_data_simple_list" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_ipr_data.xml" haskeys="1">
      <params>
        <param name="doc_osn" type="array" />
        <param type="array" name="kod_titul_ip_sbor" />
        <param type="array" name="kod_titul_ip_head" />
      </params>
      <select>
        <column table="ipr_ipr_data" column="kod_ipr" as="kod_ipr" key="1" />
        <column table="kod_titul_ip" column="tit_num_new" as="tit_num_new" key="0" />
        <column table="kod_titul_ip" column="full_name" title="Наименование титула" as="full_name" key="0" />
        <column table="kod_doc_osn" column="full_name" title="Документ" as="doc_name" key="0" />
        <column table="ipr_ipr_data" column="itip" as="itip" key="0" />
        <column table="kod_parent_sbor" column="tit_num_new" as="sbor_tit_num_new" title="Код сборного титула" key="0" />
        <column table="kod_parent" column="tit_num_new" as="head_tit_num_new" title="Код головного титула" key="0" />
      </select>
      <from>
        <query name="ipr_ipr_data" as="ipr_ipr_data">
          <link name="kod_doc_osn" as="kod_doc_osn" table="ipr_doc" child="ipr_ipr_data" field="kod_doc_osn" parent="ipr_doc" back="ipr_ipr_data" />
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
          <link name="kod_parent" as="kod_parent" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_parent" parent="ipr_titul_ip" back="ipr_ipr_data_child" title="Титулы" />
          <link name="kod_main_titul" as="kod_main_titul" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_main_titul" parent="ipr_titul_ip" back="ipr_ipr_data_main" title="Титулы">
            <link name="kod_parent_sbor" as="kod_parent_sbor" table="ipr_titul_ip" child="ipr_titul_ip" field="kod_parent_sbor" parent="ipr_titul_ip" back="ipr_titul_ip" title="Титулы" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_titul_ip" column="is_simple" />
            <const>1</const>
          </call>
          <call function="in" optional="1">
            <column table="ipr_ipr_data" column="kod_doc_osn" />
            <useparam name="doc_osn" />
          </call>
          <call function="in" optional="1">
            <column table="kod_main_titul" column="kod_parent_sbor" />
            <useparam name="kod_titul_ip_sbor" />
          </call>
          <call function="in" optional="1">
            <column table="ipr_ipr_data" column="kod_parent" />
            <useparam name="kod_titul_ip_head" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_ipr_data_extra" timestamp="29.05.2017 17:29:13" inherit="ipr_ipr_data" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_ipr_data.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" type="number" key="1" as="kod_ipr" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" />
        <column table="a" column="kod_status" type="number" as="kod_status" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="date_add" type="date" title="" as="date_add" />
        <column table="a" column="kod_klass" type="number" as="kod_klass" />
        <column table="a" column="kod_razdel" type="number" as="kod_razdel" reference="ips_razdel_ip" refcol="kod_razdel" />
        <column table="a" column="kod_priority_insert_ip" type="number" as="kod_priority_insert_ip" />
        <column table="a" column="kod_kriteria" type="number" as="kod_kriteria" />
        <column table="a" column="kod_priority" type="number" as="kod_priority" reference="ips_priority" refcol="kod_priority" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="beg_period" type="number" title="" as="beg_period" />
        <column table="a" column="end_period" type="number" title="" as="end_period" />
        <column table="a" column="beg_year" type="number" title="" as="beg_year" />
        <column table="a" column="end_year" type="number" title="" as="end_year" />
        <column table="a" column="kod_prin_soc_val" type="number" as="kod_prin_soc_val" reference="ips_type_titul" refcol="kod_type" />
        <column table="a" column="kod_type" type="number" as="kod_type" />
        <column table="a" column="kod_vid_zajavki" type="number" as="kod_vid_zajavki" />
        <column table="a" column="prin_sogl" type="number" title="" as="prin_sogl" />
        <column table="a" column="kod_krit_minenergo" type="number" as="kod_krit_minenergo" />
        <column table="a" column="in_ozp" type="number" title="" as="in_ozp" />
        <column table="a" column="mode_balance_req" type="number" title="" as="mode_balance_req" />
        <column table="a" column="solution_task" type="string" title="" as="solution_task" />
        <column table="a" column="proj_target" type="string" title="" as="proj_target" />
        <column table="a" column="num_lev_1" type="number" title="" as="num_lev_1" />
        <column table="a" column="num_lev_2" type="number" title="" as="num_lev_2" />
        <column table="a" column="comments" type="string" title="" as="comments" />
        <column table="a" column="kod_progpartner" type="number" as="kod_progpartner" />
        <column table="a" column="address" type="string" title="" as="address" />
        <column table="a" column="nz" type="number" title="" comment="Аварийный запас" as="nz" />
        <column table="a" column="kod_subrazdel" type="number" as="kod_subrazdel" />
        <call function="||" as="kod_minenergo">
          <const>'2-'</const>
          <column table="this" column="kod_razdel" />
          <const>'-'</const>
          <call function="nvl" nvl="999">
            <column table="kod_main_ipr_ipr_data" column="kod_krit_minenergo" />
            <column table="this" column="kod_krit_minenergo" />
          </call>
        </call>
        <call function="if" as="kod_razdel_rs">
          <call function="is null">
            <column table="this" column="kod_razdel" />
          </call>
          <call function="to_char">
            <call function="nvl" nvl="999">
              <column table="kod_main_klass" column="kod_parent" dgroup="max" />
              <column table="kod_main_klass" column="kod_klass" dgroup="max" />
            </call>
          </call>
          <call function="||">
            <call function="to_char">
              <column table="this" column="kod_razdel" />
            </call>
            <const>'-'</const>
            <call function="to_char">
              <call function="nvl" nvl="999">
                <column table="kod_main_klass" column="kod_parent" dgroup="max" />
                <column table="kod_main_klass" column="kod_klass" dgroup="max" />
              </call>
            </call>
          </call>
        </call>
        <call function="if" as="pr_last" type="number">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_ipr" />
              </call>
              <call function="partition by">
                <column table="a" column="kod_titul_ip" />
                <column table="a" column="kod_doc_osn" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="pr_last_for_tit" type="number">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_ipr" />
              </call>
              <call function="partition by">
                <column table="a" column="kod_titul_ip" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="ipr_energy_eff" column="energ_eff_kvt" as="energ_eff_kvt" />
        <column table="ipr_energy_eff" column="energ_eff_proc" as="energ_eff_proc" />
        <column table="val14" column="nvalue" dgroup="max" as="km" title="Протяженность ВЛ, км" type="number" />
        <column table="val18" column="nvalue" dgroup="max" as="km_kl" title="Протяженность КЛ, км" type="number" />
        <column table="val13" column="nvalue" dgroup="max" as="pow" type="number" title="Мощность, МВА" />
        <column table="val12" column="nvalue" dgroup="max" as="kvo_tr" type="number" title="Кол-во трансформаторов (шт)" />
        <column table="val17" column="value" dgroup="max" as="mark_tr" type="string" title="Марка силовых трансформаторов" />
        <column table="val16" column="nvalue" dgroup="max" as="other" type="number" title="Прочие, шт" />
        <column table="val3" column="value" dgroup="max" as="mark_kb" type="string" title="Марка кабеля" />
        <column table="val1" column="value" dgroup="max" as="tip_op" type="string" title="Тип опор" />
        <column table="val15" column="nvalue" dgroup="max" as="h_ps_tp" type="number" title="ПС ТП, шт" />
        <column table="val4" column="value" dgroup="max" as="h_ru_110" type="string" title="Тип РУ 110 кВ" />
        <column table="val5" column="value" dgroup="max" as="h_ru_35" type="string" title="Тип РУ 35 кВ" />
        <column table="val6" column="value" dgroup="max" as="h_ru_10" type="string" title="Тип РУ 10 кВ" />
        <column table="val7" column="value" dgroup="max" as="h_ru_6" type="string" title="Тип РУ 6 кВ" />
        <column table="val8" column="nvalue" dgroup="max" as="h_cnt_110" type="number" title="Количество ячеек 110 кВ" />
        <column table="val9" column="nvalue" dgroup="max" as="h_cnt_35" type="number" title="Количество ячеек 35 кВ" />
        <column table="val10" column="nvalue" dgroup="max" as="h_cnt_10" type="number" title="Количество ячеек 10 кВ" />
        <column table="val11" column="nvalue" dgroup="max" as="h_cnt_6" type="number" title="Количество ячеек 6 кВ" />
        <column table="val14" column="old_value" dgroup="max" as="km_do" title="Протяженность ВЛ,  км" type="number" />
        <column table="val18" column="old_value" dgroup="max" as="km_kl_do" title="Протяженность КЛ,  км" type="number" />
        <column table="val13" column="old_value" dgroup="max" as="pow_do" type="number" title="Мощность, МВА" />
        <column table="val12" column="old_value" dgroup="max" as="kvo_tr_do" type="number" title="Кол-во трансформаторов (шт)" />
        <column table="val17" column="old_value" dgroup="max" as="mark_tr_do" type="string" title="Марка силовых трансформаторов" />
        <column table="val16" column="old_value" dgroup="max" as="other_do" type="number" title="Прочие, шт" />
        <column table="val3" column="old_value" dgroup="max" as="mark_kb_do" type="string" title="Марка кабеля" />
        <column table="val1" column="old_value" dgroup="max" as="tip_op_do" type="string" title="Тип опор" />
        <column table="val14" column="value_dem" dgroup="max" as="km_del" title="Протяженность ВЛ, км" type="number" />
        <column table="val18" column="value_dem" dgroup="max" as="km_kl_del" title="Протяженность КЛ, км" type="number" />
        <column table="val13" column="value_dem" dgroup="max" as="pow_del" type="number" title="Мощность, МВА" />
        <column table="val16" column="value_dem" dgroup="max" as="other_del" type="number" title="Прочие, шт" />
        <call function="-nvl" as="km_change" title="Протяженность ВЛ, км">
          <column table="this" column="km" />
          <column table="this" column="km_del" />
        </call>
        <call function="-nvl" as="km_kl_change" title="Протяженность КЛ, км">
          <column table="this" column="km_kl" />
          <column table="this" column="km_kl_del" />
        </call>
        <call function="-nvl" as="pow_change" title="Мощность, МВА">
          <column table="this" column="pow" />
          <column table="this" column="pow_del" />
        </call>
        <call function="-nvl" as="other_change" title="Прочие, шт">
          <column table="this" column="other" />
          <column table="this" column="other_del" />
        </call>
        <call function="nvl" as="kod_main_titul" type="number">
          <call function="nullif">
            <column table="a" column="kod_parent" />
            <const>-1</const>
          </call>
          <column table="a" column="kod_titul_ip" />
        </call>
        <call function="if" as="kod_child_titul" type="number">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_parent" />
              <const>-1</const>
            </call>
          </call>
          <column table="a" column="kod_titul_ip" />
        </call>
        <column table="ipr_dogs_pr" column="kod_ipr_dog" as="kod_ipr_dog_pr" dgroup="max" />
        <call function="if" as="itip" type="string" title="Тип титула">
          <call function="=">
            <column table="kod_titul_ip" column="itip" />
            <const>'Одиночный/Дочерний'</const>
          </call>
          <call function="if">
            <call function="gt">
              <column table="this" column="kod_parent" />
              <const>0</const>
            </call>
            <const>'Дочерний'</const>
            <const>'Одиночный'</const>
          </call>
          <column table="kod_titul_ip" column="itip" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
        <!--<fact column="byt_col_chel"/>-->
      </select>
      <!--<where>
        <call function="=">
          <column table="a" column="kod_obj" />
          <const>500215809</const>
        </call>
      </where>-->
      <from>
        <table name="ipr_ipr_data" as="a">
          <dlink name="ipv_phys_param_values" as="val14" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val14" column="kod_phis_param" />
                <const>14</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val18" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val18" column="kod_phis_param" />
                <const>18</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val13" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val13" column="kod_phis_param" />
                <const>13</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val12" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val12" column="kod_phis_param" />
                <const>12</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val17" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val17" column="kod_phis_param" />
                <const>17</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val16" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val16" column="kod_phis_param" />
                <const>16</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val3" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val3" column="kod_phis_param" />
                <const>3</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val1" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val1" column="kod_phis_param" />
                <const>1</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val15" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val15" column="kod_phis_param" />
                <const>15</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val4" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val4" column="kod_phis_param" />
                <const>4</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val5" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val5" column="kod_phis_param" />
                <const>5</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val6" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val6" column="kod_phis_param" />
                <const>6</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val7" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val7" column="kod_phis_param" />
                <const>7</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val8" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val8" column="kod_phis_param" />
                <const>8</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val9" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val9" column="kod_phis_param" />
                <const>9</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val10" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val10" column="kod_phis_param" />
                <const>10</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val11" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val11" column="kod_phis_param" />
                <const>11</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipr_dogs" as="ipr_dogs_pr" table="ipr_dogs" child="ipr_dogs" field="kod_ipr" parent="ipr_ipr_data" back="ipr_dogs">
            <where>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="ipr_dogs_pr" column="kod_dog" />
                    <const>-1</const>
                  </call>
                  <const>-1</const>
                </call>
                <call function="in">
                  <column table="ipr_dogs_pr" column="kod_dog_type" />
                  <call function="array">
                    <const>52</const>
                    <const>56</const>
                  </call>
                </call>
              </call>
            </where>
          </dlink>
          <dlink name="vr_tree_ipr" as="vr_tree_ipr" table="vr_tree_ipr" child="vr_tree_ipr" field="kod_ipr" parent="ipr_ipr_data" back="vr_tree_ipr">
            <link name="kod_tree" dimension="1" as="kod_tree" table="vr_tree" child="vr_tree_ipr" field="kod_tree" parent="vr_tree" back="vr_tree_ipr" />
          </dlink>
          <dlink name="ipr_report_dop" dimension="1" as="ipr_report_dop" table="ipr_report_dop" child="ipr_report_dop" field="kod_ipr" parent="ipr_ipr_data" back="ipr_report_dop" />
          <dlink name="ipr_sost_del" as="ipr_sost_del" table="ipr_sost_del" child="ipr_sost_del" field="kod_ipr" parent="ipr_ipr_data" back="ipr_sost_del" />
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data_extra" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data_extra" title="Титулы">
            <dimlink name="kod_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dimension="1" dname="ipr_ipr_data_extra" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_parent" dname="ipr_ipr_data_child" join="left outer" title="Титулы">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_osn" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_doc_osn" />
            <column table="kod_doc_osn" column="kod_doc" />
          </call>
        </query>
        <query name="is_status" as="kod_status" join="left outer" dname="ipr_ipr_data_extra" title="Статус">
          <call function="=">
            <column table="a" column="kod_status" />
            <column table="kod_status" column="status" />
          </call>
        </query>
        <query name="ips_priority" as="kod_priority" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_priority" />
            <column table="kod_priority" column="kod_priority" />
          </call>
        </query>
        <query name="ips_type_titul" as="kod_prin_soc_val" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_prin_soc_val" />
            <column table="kod_prin_soc_val" column="kod_type" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_ipr_data_extra" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel" column="kod_razdel" />
            <column table="a" column="kod_razdel" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_doc_osn" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="is_status" as="status" join="left outer" dname="ipr_ipr_data_extra" title="Статус">
          <call function="=">
            <column table="a" column="kod_status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="ipr_energy_eff" as="ipr_energy_eff" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="ipr_energy_eff" column="kod_ipr" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_kriteria" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="this" column="kod_kriteria" />
            <column table="kod_kriteria" column="kod_kriteria" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_priority_insert_ip" dname="ipr_ipr_data_prior_ins_ip" join="left outer">
          <call function="=">
            <column table="this" column="kod_priority_insert_ip" />
            <column table="kod_priority_insert_ip" column="kod_kriteria" />
          </call>
        </query>
        <query name="ips_klass_titul" as="kod_klass" join="left outer" dname="ipr_ipr_data_extra" title="Принадлежность к важн. объекта, программам">
          <call function="=">
            <column table="this" column="kod_klass" />
            <column table="kod_klass" column="kod_klass" />
          </call>
        </query>
        <query name="ips_vid_zajavki" as="kod_vid_zajavki" join="left outer" title="Направление инвестиций" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="this" column="kod_vid_zajavki" />
            <column table="kod_vid_zajavki" column="kod_vid_z" />
          </call>
        </query>
        <query name="ipv_razdel_rs" as="kod_razdel_rs" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="kod_razdel_rs" column="kod_klass" />
            <column table="this" column="kod_razdel_rs" />
          </call>
        </query>
        <query name="ipv_razdel_mn" as="kod_minenergo" join="left outer" dname="ipr_ipr_data_extra">
          <call function="=">
            <column table="kod_minenergo" column="kod_minenergo" />
            <column table="this" column="kod_minenergo" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_main_titul" dname="ipr_ipr_data_main" join="left outer" title="Титулы">
          <call function="=">
            <column table="this" column="kod_main_titul" />
            <column table="kod_main_titul" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_main_ipr_ipr_data" join="left outer" dname="ipr_ipr_data_extra">
          <call function="and">
            <call function="=">
              <column table="kod_main_ipr_ipr_data" column="kod_titul_ip" />
              <column table="this" column="kod_main_titul" />
            </call>
            <call function="=">
              <column table="kod_main_ipr_ipr_data" column="kod_doc_osn" />
              <column table="a" column="kod_doc_osn" />
            </call>
          </call>
          <link name="kod_klass" as="kod_main_klass" table="ips_klass_titul" child="ipr_ipr_data" field="kod_klass" parent="ips_klass_titul" back="ipr_ipr_data" title="Принадлежность к важн. объекта, программам" />
        </query>
        <query name="ipr_titul_ip" as="kod_child_titul" dname="ipr_ipr_data_main" join="left outer" title="Титулы">
          <call function="=">
            <column table="this" column="kod_child_titul" />
            <column table="kod_child_titul" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_ipr_data_y" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_ipr_data_y.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" key="1" group="1" as="kod_ipr" />
        <column table="a" column="year" key="1" group="1" as="year" />
        <column table="a" column="kap_sum" group="sum" as="kap_sum" />
        <column table="a" column="finplan_sum" group="sum" as="finplan_sum" />
        <column table="a" column="vvod_sum" group="sum" as="vvod_sum" />
        <column table="a" column="kap_sum_nds" group="sum" as="kap_sum_nds" />
        <column table="a" column="finplan_sum_nds" group="sum" as="finplan_sum_nds" />
        <column table="a" column="vvod_sum_nds" group="sum" as="vvod_sum_nds" />
        <column table="a" column="pow_mba" group="sum" as="pow_mba" />
        <column table="a" column="pow_km" group="sum" as="pow_km" />
        <!--<column table="a" column="kod_ipr" group="sum" />
        <column table="a" column="year" group="sum" />-->
        <column table="a" column="kap_sum_itog" group="sum" as="kap_sum_itog" />
        <column table="a" column="kap_sum_nds_itog" group="sum" as="kap_sum_nds_itog" />
        <column table="a" column="finplan_sum_nds_itog" group="sum" as="finplan_sum_nds_itog" />
        <column table="a" column="vvod_sum_itog" group="sum" as="vvod_sum_itog" />
        <column table="a" column="saldo" group="sum" as="saldo" />
        <column table="a" column="debet" group="sum" as="debet" />
        <column table="a" column="kredit" group="sum" as="kredit" />
        <column table="a" column="nzs" group="sum" as="nzs" />
        <column table="a" column="saldo_itog" group="sum" as="saldo_itog" />
        <column table="a" column="debet_itog" group="sum" as="debet_itog" />
        <column table="a" column="kredit_itog" group="sum" as="kredit_itog" />
        <column table="a" column="nzs_itog" group="sum" as="nzs_itog" />
        <column table="ipr_closed_plans" column="dz" dgroup="max" group="max" as="dz" />
        <column table="a" column="debet_pos_itog" group="sum" as="debet_pos_itog" />
        <call function="+nvl" as="debet2_itog">
          <column table="a" column="debet_pos_itog" group="sum" />
          <column table="ipr_closed_plans" column="dz" dgroup="max" group="max" />
        </call>
        <column table="a" column="kredit_pos_itog" group="sum" as="kredit_pos_itog" />
        <column table="ipr_closed_plans" column="kz" dgroup="max" group="max" as="kz" />
        <call function="+nvl" as="kredit2_itog">
          <column table="a" column="kredit_pos_itog" group="sum" />
          <column table="ipr_closed_plans" column="kz" dgroup="max" group="max" />
        </call>
      </select>
      <from>
        <query name="ipr_fin_head" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_ipr_data_y">
          <call function="and">
            <call function="=">
              <column table="kod_ipr" column="kod_ipr" />
              <column table="a" column="kod_ipr" />
            </call>
          </call>
          <dlink name="ipr_closed_plans" as="ipr_closed_plans" table="ipr_closed_plans" child="ipr_closed_plans" field="kod_ipr" parent="ipr_ipr_data" back="ipr_closed_plans" />
        </query>
      </from>
    </query>
    <query name="kod_titul_ip_changed" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_izmen.xml">
      <select>
        <column table="a" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="izm_date" as="date_change" key="0" />
      </select>
      <from>
        <query name="ipr_izmen" as="a" />
      </from>
      <!--<where>
        <call function="and">
          <call function="ge">
            <column table="a" column="izm_date"/>
            <query>
              <select>
                <column table="a" column="date_last_upd"/>
              </select>
              <from>
                <query name="vr_repinfo_date" as="a">
                  <withparams>
                    <const>'VR_IPR'</const>
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>-->
    </query>
    <query name="kod_titul_ip_changed_test" class="1" timestamp="14.03.2017 21:55:07" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_izmen.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <const as="date_change" type="date" key="0">sysdat</const>
      </select>
      <from>
        <table name="kod_titul_ip_changed_test_view" as="a" view="1" />
      </from>
    </query>
    <query name="ipr_izmen_last" class="1" timestamp="14.03.2017 22:27:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_izmen.xml" haskeys="1">
      <select>
        <column table="a" column="izm_date" group="max" controlType="UIDateTime" fact="ipr_izmen_last_date" agg="max" as="izm_date" key="0" />
        <column table="vr_tree_struct" column="kod_tree_struct" dimension="ipr_kod_tree_struct" group="1" as="kod_tree_struct" key="1" fixed="1" />
      </select>
      <from>
        <query name="ipr_izmen" as="a" />
        <query name="vr_tree_struct" join="cross" as="vr_tree_struct" />
      </from>
    </query>
    <query name="ipr_pr_last_smet" timestamp="26.02.2016 02:26:21" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_pr_last_smet.xml" haskeys="1">
      <select>
        <column table="a" column="pr_last" as="pr_last" key="1" fixed="1" />
      </select>
      <from>
        <table view="1" name="ipr_pr_last_smet" as="a" />
      </from>
    </query>
    <query name="is_spr_name_template" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_template_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_name_template" type="number" as="kod_spr_name_template" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_name_template" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_name_template_1" inherit="is_spr_name_template" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_template_contr_steps_val.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod_spr_name_template" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_spr_name_template" type="number" as="kod_spr_name_template" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_name_template" as="a" view="1" />
      </from>
    </query>
    <query name="ipr_titul_ip_sbor" class="1" timestamp="23.01.2017 17:03:37" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sbor_titul" group="1" as="kod_sbor_titul" key="1" fixed="1" />
        <column table="a" column="kod_parent_sbor_ext" group="max" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_razdel" group="max" as="kod_razdel" key="0" />
        <column table="a" column="kod_klass" group="max" as="kod_klass" key="0" />
        <column table="a" column="kod_minenergo" group="max" as="kod_minenergo" key="0" />
      </select>
      <from>
        <query name="ipr_titul_ip" as="a" title="Титулы">
          <!--<link name="kod_parent_sbor"/>-->
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_titul_ip_sbor" title="Титулы">
          <call function="=">
            <column table="this" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_titul_ip_sbor" title="Раздел ИПР">
          <call function="=">
            <column table="this" column="kod_razdel" />
            <column table="kod_razdel" column="kod_razdel" />
          </call>
        </query>
        <query name="ipv_razdel_rs" as="kod_klass" join="left outer" dname="ipr_titul_ip_sbor">
          <call function="=">
            <column table="this" column="kod_klass" />
            <column table="kod_klass" column="kod_klass" />
          </call>
        </query>
        <query name="ipv_razdel_mn" as="kod_minenergo" join="left outer" dname="ipr_titul_ip_sbor">
          <call function="=">
            <column table="this" column="kod_minenergo" />
            <column table="kod_minenergo" column="kod_minenergo" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_titul_gr_aip" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_aip" type="number" as="kod_aip" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="ipr_titul_gr_aip" as="a" view="1" />
      </from>
    </query>
    <query name="ipr_titul_ip_sbor_list" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="ipr_titul_ip" column="kod_titul_ip" as="kod_titul_ip" key="1" fixed="1" />
        <column table="ipr_titul_ip" column="tit_num_new" as="tit_num_new" key="0" />
        <column table="ipr_titul_ip" column="full_name" as="full_name" key="0" />
      </select>
      <from>
        <query name="ipr_titul_ip" as="ipr_titul_ip" title="Титулы" />
      </from>
      <where>
        <call function="=">
          <column column="is_sbor" table="ipr_titul_ip" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ipr_titul_ip_head_list" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <params>
        <param type="array" name="kod_titul_ip_sbor" />
      </params>
      <select>
        <column table="ipr_titul_ip" column="kod_titul_ip" as="kod_titul_ip" key="1" fixed="1" />
        <column table="ipr_titul_ip" column="tit_num_new" as="tit_num_new" key="0" />
        <column table="ipr_titul_ip" column="full_name" as="full_name" key="0" />
        <column table="kod_parent_sbor" column="tit_num_new" as="sbor_tit_num_new" title="Код сборного титула" key="0" />
      </select>
      <from>
        <query name="ipr_titul_ip" as="ipr_titul_ip" title="Титулы">
          <link name="kod_parent_sbor" as="kod_parent_sbor" table="ipr_titul_ip" child="ipr_titul_ip" field="kod_parent_sbor" parent="ipr_titul_ip" back="ipr_titul_ip" title="Титулы" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column column="is_head_tit" table="ipr_titul_ip" />
            <const>1</const>
          </call>
          <call function="in" optional="1">
            <column table="ipr_titul_ip" column="kod_parent_sbor" />
            <useparam name="kod_titul_ip_sbor" />
          </call>
        </call>
      </where>
    </query>
    <query name="ipr_titul_ip_prior_simple_list" class="1" timestamp="14.11.2017 18:13:34" order="tit_num_new" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="ipr_kod_titul_ip" column="kod_titul_ip" key="1" as="kod_titul_ip" />
        <column table="ipr_kod_titul_ip" column="tit_num_new" as="tit_num_new" />
        <column table="ipr_kod_titul_ip" column="full_name" title="Наименование титула" as="full_name" />
      </select>
      <from>
        <qube single-way="1">
          <link name="ipr_kod_titul_ip" all-rows="1" />
          <link name="kod_ipr" only-for-cond="1" />
          <link name="kod_dop_contract" only-for-cond="1" />
          <where>
            <call function="and">
              <call function="=">
                <column table="ipr_kod_titul_ip" column="is_simple" />
                <const>1</const>
              </call>
            </call>
            <call function="is not null">
              <column table="kod_ipr" column="kod_prin_soc_val" />
            </call>
            <call function="!=">
              <column table="kod_ipr" column="kod_prin_soc_val" />
              <const>81</const>
            </call>
            <call function="is not null">
              <column table="kod_dop_contract" column="kod_dop_contract" />
            </call>
          </where>
        </qube>
      </from>
      <order>
        <column column="tit_num_new" />
      </order>
    </query>
    <query name="ipr_titul_ip_hoz_simple_list" class="1" timestamp="02.10.2017 19:08:25" order="tit_num_new" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" key="1" as="kod_titul_ip" />
        <column table="a" column="tit_num_new" as="tit_num_new" />
        <column table="a" column="full_name" title="Наименование титула" as="full_name" />
      </select>
      <from>
        <query name="ipr_titul_ip" as="a" title="Титулы" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="is_simple" />
            <const>1</const>
          </call>
        </call>
        <call function="=">
          <column table="a" column="hoz_sposob" />
          <const>1</const>
        </call>
        <call function="=">
          <column table="a" column="pr_41656" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="tit_num_new" />
      </order>
    </query>
    <query name="ipr_vvod_fiz" class="1" timestamp="10.08.2017 13:57:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_vvod_fiz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vvod_fiz" key="1" as="kod_vvod_fiz" />
        <column table="a" column="kod_ipr" as="kod_ipr_ext" dimension="kod_ipr_ext" />
        <column table="a" column="kod_ipr" dimension="kod_ipr" as="kod_ipr" />
        <column table="a" column="kod_doc_osn" dimension="ipr_kod_doc_main" as="kod_doc_osn" />
        <column table="a" column="ym" dimension="ipr_ym" as="ym" />
        <column table="a" column="dat" dimension="ipr_dat" as="dat" />
        <column table="a" column="mba_fact" description="Фактический ввод физических параметров (МВА)" is-fact="1" agg="sum" as="mba_fact" fact="ipr_vvod_fiz_mba_fact" />
        <column table="a" column="km_vl_fact" description="Фактический ввод физических параметров ВЛ (км)" as="km_vl_fact" is-fact="1" agg="sum" fact="ipr_vvod_fiz_km_vl_fact" />
        <column table="a" column="km_kl_fact" description="Фактический ввод физических параметров КЛ (км)" is-fact="1" agg="sum" as="km_kl_fact" fact="ipr_vvod_fiz_km_kl_fact" />
        <call function="+nvl" as="km_fact" is-fact="1" agg="sum" fact="ipr_vvod_fiz_km_fact">
          <column table="this" column="km_kl_fact" />
          <column table="this" column="km_vl_fact" />
        </call>
        <column table="a" column="cnt_fact" description="Фактический ввод физических параметров (прочие)" is-fact="1" agg="sum" as="cnt_fact" fact="ipr_vvod_fiz_cnt_fact" />
        <column table="a" column="cnt_proch_fact" is-fact="1" agg="sum" as="cnt_proch_fact" fact="ipr_vvod_fiz_cnt_proch_fact" />
        <column table="a" column="km_vl_1c" is-fact="1" agg="sum" as="km_vl_1c" fact="ipr_vvod_fiz_km_vl_1c" />
        <column table="a" column="km_vl_2c" is-fact="1" agg="sum" as="km_vl_2c" fact="ipr_vvod_fiz_km_vl_2c" />
        <column table="a" column="km_kl" is-fact="1" agg="sum" as="km_kl" fact="ipr_vvod_fiz_km_kl" />
        <column table="a" column="mba" is-fact="1" agg="sum" as="mba" fact="ipr_vvod_fiz_mba" />
        <column table="a" column="cnt" is-fact="1" agg="sum" as="cnt" fact="ipr_vvod_fiz_cnt" />
        <column table="a" column="cnt_proch" is-fact="1" agg="sum" as="cnt_proch" fact="ipr_vvod_fiz_cnt_proch" />
        <column table="a" column="km_vl_1c_wfact" is-fact="1" agg="sum" as="km_vl_1c_wfact" fact="ipr_vvod_fiz_km_vl_1c_wfact" />
        <column table="a" column="km_vl_2c_wfact" is-fact="1" agg="sum" as="km_vl_2c_wfact" fact="ipr_vvod_fiz_km_vl_2c_wfact" />
        <column table="a" column="km_kl_wfact" is-fact="1" agg="sum" as="km_kl_wfact" fact="ipr_vvod_fiz_km_kl_wfact" />
        <column table="a" column="mba_wfact" is-fact="1" agg="sum" as="mba_wfact" fact="ipr_vvod_fiz_mba_wfact" />
        <column table="a" column="cnt_wfact" is-fact="1" agg="sum" as="cnt_wfact" fact="ipr_vvod_fiz_cnt_wfact" />
        <column table="a" column="cnt_wfact_pr" is-fact="1" agg="sum" as="cnt_wfact_pr" fact="ipr_vvod_fiz_cnt_wfact_pr" />
      </select>
      <from>
        <query name="ipr_vvod_fiz_pre" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_vvod_fiz">
          <call function="=">
            <column table="this" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_ipr" as="kod_ipr1">
          <link name="kod_razdel">
            <dlink name="vr_rep_34397_col_r_all">
              <link name="kod_rep_34397_col" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </link>
        </link>
      </links>
    </query>
    <query name="ipr_vvod_fiz_pre" class="1" timestamp="10.08.2017 13:57:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_vvod_fiz.xml" haskeys="1">
      <select>
        <call function="||" as="kod_vvod_fiz" key="1" group="1">
          <column table="this" column="kod_ipr" group="" />
          <const>'-'</const>
          <column table="this" column="kod_doc_osn" group="" />
          <const>'-'</const>
          <column table="this" column="dat" group="" />
        </call>
        <column table="b" column="kod_ipr" group="1" as="kod_ipr" />
        <column table="kod_ipr" column="kod_doc_osn" group="1" as="kod_doc_osn" />
        <column table="a" column="ym" group="1" as="ym" />
        <call function="ym2 end day" as="dat" group="1">
          <column table="a" column="ym" />
        </call>
        <column table="a" column="mba_fact" description="Фактический ввод физических параметров (МВА)" group="sum" as="mba_fact" />
        <call function="+nvl" as="km_vl_fact" group="sum" title="Ввод км ВЛ (1 и 2 цепные) факт">
          <column table="a" column="km_fact" description="Фактический ввод физических параметров ВЛ (км)" />
          <column table="a" column="km_vl_2c_fact" description="Фактический ввод физических параметров ВЛ (км)" />
        </call>
        <column table="a" column="km_kl_fact" description="Фактический ввод физических параметров КЛ (км)" group="sum" as="km_kl_fact" />
        <column table="a" column="cnt_fact" description="Фактический ввод физических параметров (прочие)" group="sum" as="cnt_fact" />
        <column table="a" column="cnt_proch_fact" group="sum" as="cnt_proch_fact" />
        <column table="a" column="km" group="sum" title="План по вводу в ОФ, ВЛ 1-цепные км" as="km_vl_1c" />
        <column table="a" column="km_vl_2c" group="sum" title="План по вводу в ОФ, ВЛ 2-цепные км" as="km_vl_2c" />
        <column table="a" column="km_kl" group="sum" title="План по вводу в ОФ, КЛ км" as="km_kl" />
        <column table="a" column="mba" group="sum" title="План по вводу в ОФ, МВА" as="mba" />
        <column table="a" column="cnt" group="sum" title="План по вводу в ОФ, шт. (ПС, ТП)" as="cnt" />
        <column table="a" column="cnt_proch" group="sum" title="План по вводу в ОФ, шт. (прочие)" as="cnt_proch" />
        <column table="a" column="km_wfact" group="sum" title="Ожидаемый факт по вводу в ОФ, ВЛ 1-цепные км" as="km_vl_1c_wfact" />
        <column table="a" column="km_vl_2c_wfact" group="sum" title="Ожидаемый факт по вводу в ОФ, ВЛ 2-цепные км" as="km_vl_2c_wfact" />
        <column table="a" column="km_kl_wfact" group="sum" title="Ожидаемый факт по вводу в ОФ, КЛ км" as="km_kl_wfact" />
        <column table="a" column="mba_wfact" group="sum" title="Ожидаемый факт по вводу в ОФ, МВА" as="mba_wfact" />
        <column table="a" column="cnt_wfact" group="sum" title="Ожидаемый факт по вводу в ОФ, шт. (ПС, ТП)" as="cnt_wfact" />
        <column table="a" column="cnt_wfact_pr" group="sum" title="Ожидаемый факт по вводу в ОФ, шт. (прочие)" as="cnt_wfact_pr" />
      </select>
      <from>
        <query name="ipr_power_body" as="a">
          <link name="kod_power_head" as="b" table="ipr_power_head" child="ipr_power_body" field="kod_power_head" parent="ipr_power_head" back="ipr_power_body">
            <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_power_head" field="kod_ipr" parent="ipr_ipr_data" back="ipr_power_head" />
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="b" column="pr_last" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ips_doc_target_str" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_doc_targets.xml" haskeys="1">
      <select>
        <column table="a" column="doc_target_str" type="string" as="doc_target_str" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="ips_doc_target_str" view="1" as="a" />
      </from>
    </query>
    <query name="ips_doc_type_list" order="name" class="1" timestamp="12.07.2017 16:22:27" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_doc_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_type" as="kod_doc_type" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="abbr" title="Аббревиатура" as="abbr" key="0" />
      </select>
      <from>
        <query name="ips_doc_type" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ips_klass_titul_tree" class="1" timestamp="07.05.2018 15:07:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_klass_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_klass" key="1" type="number" vid="1" as="kod_klass" />
        <column table="a" column="name" vid="1" as="name" />
        <column table="a" column="kod_parent" type="number" vid="1" as="kod_parent" />
      </select>
      <from>
        <query name="ips_klass_titul" as="a" title="Принадлежность к важн. объекта, программам" />
      </from>
      <!--<connect>
        <call function="=">
          <column table="a" column="kod_klass"  prior="1"/>
          <column table="a" column="kod_parent"/>
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>-->
    </query>
    <query name="ips_kriteria_otklon_autor" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_kriteria_otklon.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="number" key="1" fixed="1">0</const>
                <const as="name" type="string" key="0">'ОАО «Россети»'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'Минэнерго'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ips_kriteria_otklon_autor_def" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_kriteria_otklon.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="number" key="1" fixed="1">1</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ips_razdel_ip_tree" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_razdel_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_razdel" as="kod_razdel" key="1" fixed="1" />
        <column table="a" column="kod_razdel" as="kod_node" reference="ips_razdel_ip" refcol="kod_razdel" key="0" />
        <column table="a" column="kod_parent" as="kod_parent_node" key="0" />
        <call function="rownum" as="rwn" key="0" />
        <call function="level" as="lvl" key="0" />
        <call function="ltrim" as="path" title="Раздел(путь)" key="0">
          <call function="replace">
            <call function="sys_connect_by_path">
              <call function="nvl">
                <column table="a" column="abbr" />
                <column table="a" column="name" />
              </call>
              <const>'-&gt;@%'</const>
            </call>
            <const>'-&gt;@%'</const>
            <const>'/'</const>
          </call>
          <const>'/'</const>
        </call>
      </select>
      <from>
        <query name="ips_razdel_ip" as="a" title="Раздел ИПР" />
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ips_razdel_ip_tree" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel" column="kod_razdel" />
            <column table="a" column="kod_razdel" />
          </call>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_razdel" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>
    </query>
    <query name="ipr_tree" class="1" timestamp="13.07.2017 14:13:19" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_razdel_ip.xml">
      <params>
        <param name="kod_doc">
          <const>43383</const>
        </param>
        <param name="pr_sbor">
          <const>1</const>
        </param>
        <param name="pr_child">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="a">
          <union>
            <query as="a" haskeys="1">
              <select>
                <call function="||" as="kod_node" key="0">
                  <const>'1_'</const>
                  <column table="a" column="kod_razdel" />
                </call>
                <call function="if" as="kod_parent_node" type="string" key="0">
                  <call function="is not null">
                    <column table="a" column="kod_parent" />
                  </call>
                  <call function="||">
                    <const>'1_'</const>
                    <column table="a" column="kod_parent" />
                  </call>
                  <const>'0'</const>
                </call>
                <column table="a" column="kod_razdel" as="kod_razdel" key="1" fixed="1" />
                <const as="kod_titul_ip" type="number" key="0">null</const>
                <const as="kod_ipr" type="number" key="0">null</const>
              </select>
              <from>
                <query name="ips_razdel_ip" as="a" title="Раздел ИПР" />
              </from>
            </query>
            <!--сборные-->
            <query as="a">
              <select>
                <call function="||" as="kod_node">
                  <const>'3_'</const>
                  <column table="a" column="kod_titul_ip" />
                  <const>'_'</const>
                  <column table="a" column="kod_razdel" />
                </call>
                <call function="||" as="kod_parent_node">
                  <const>'1_'</const>
                  <column table="a" column="kod_razdel" />
                </call>
                <column table="a" column="kod_razdel" as="kod_razdel" />
                <column table="a" column="kod_titul_ip" as="kod_titul_ip" />
                <const as="kod_ipr" type="number">null</const>
              </select>
              <from>
                <query name="ipr_titul_ip_sbor" as="a" />
              </from>
              <where>
                <call function="and">
                  <call function="or">
                    <call function="false" />
                    <call function="=1" optional="1">
                      <useparam name="pr_sbor" />
                    </call>
                  </call>
                  <call function="is not null">
                    <call function="nullif">
                      <column table="a" column="kod_titul_ip" />
                      <const>-1</const>
                    </call>
                  </call>
                </call>
              </where>
            </query>
            <!--головные-->
            <query as="a">
              <select>
                <call function="||" as="kod_node">
                  <const>'2_'</const>
                  <column table="a" column="kod_titul_ip" />
                </call>
                <call function="if" as="kod_parent_node">
                  <call function="and">
                    <call function="is not null">
                      <column table="a" column="kod_parent_sbor" />
                    </call>
                    <call function="or">
                      <call function="false" />
                      <call function="=1" optional="1">
                        <useparam name="pr_sbor" />
                      </call>
                    </call>
                  </call>
                  <call function="||">
                    <const>'3_'</const>
                    <column table="a" column="kod_parent_sbor" />
                    <const>'_'</const>
                    <column table="a" column="kod_razdel" />
                  </call>
                  <call function="if">
                    <call function="is not null">
                      <column table="a" column="kod_razdel" />
                    </call>
                    <call function="||">
                      <const>'1_'</const>
                      <column table="a" column="kod_razdel" />
                    </call>
                    <const>'0'</const>
                  </call>
                </call>
                <column table="a" column="kod_razdel" as="kod_razdel" />
                <column table="a" column="kod_titul_ip" as="kod_titul_ip" />
                <const as="kod_ipr" type="number">null</const>
              </select>
              <from>
                <query name="ipr_titul_ip" as="a" title="Титулы" />
              </from>
              <where>
                <call function="and">
                  <call function="=">
                    <column table="a" column="is_head_tit" />
                    <const>1</const>
                  </call>
                  <call function="!=nvl">
                    <column table="a" column="is_sbor" />
                    <const>1</const>
                  </call>
                </call>
              </where>
            </query>
            <!--одиночные, дочерние-->
            <query as="a">
              <select>
                <call function="||" as="kod_node">
                  <const>'2_'</const>
                  <column table="a" column="kod_titul_ip" />
                </call>
                <call function="if" as="kod_parent_node">
                  <call function="gt">
                    <column table="a" column="kod_parent" />
                    <const>0</const>
                  </call>
                  <call function="||">
                    <const>'2_'</const>
                    <column table="a" column="kod_parent" />
                  </call>
                  <call function="if">
                    <call function="is not null">
                      <column table="kod_titul_ip" column="kod_razdel" />
                    </call>
                    <call function="||">
                      <const>'1_'</const>
                      <column table="kod_titul_ip" column="kod_razdel" />
                    </call>
                    <const>'0'</const>
                  </call>
                </call>
                <column table="a" column="kod_razdel" as="kod_razdel" />
                <column table="a" column="kod_titul_ip" as="kod_titul_ip" />
                <column table="a" column="kod_ipr" as="kod_ipr" />
              </select>
              <from>
                <query name="ipr_ipr_data" as="a">
                  <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
                  <link name="kod_main_titul" as="kod_main_titul" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_main_titul" parent="ipr_titul_ip" back="ipr_ipr_data_main" title="Титулы" />
                </query>
              </from>
              <where>
                <call function="and">
                  <call function="=">
                    <column table="a" column="kod_doc_osn" />
                    <useparam name="kod_doc" />
                  </call>
                  <call function="=">
                    <call function="nvl">
                      <column table="kod_titul_ip" column="is_head_tit" />
                      <const>0</const>
                    </call>
                    <const>0</const>
                  </call>
                  <call function="or">
                    <call function="or">
                      <call function="is null">
                        <column table="a" column="kod_parent" />
                      </call>
                      <call function="=">
                        <column table="a" column="kod_parent" />
                        <const>-1</const>
                      </call>
                    </call>
                    <call function="=1" optional="1">
                      <useparam name="pr_child" />
                    </call>
                  </call>
                </call>
              </where>
            </query>
            <query as="a">
              <select>
                <const>'0'</const>
                <const>null</const>
                <const>null</const>
                <const>null</const>
                <const>null</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
          </union>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_tree" title="Раздел ИПР">
          <call function="and">
            <call function="=">
              <column table="kod_razdel" column="kod_razdel" />
              <column table="a" column="kod_razdel" />
            </call>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_tree" title="Титулы">
          <call function="and">
            <call function="=">
              <column table="kod_titul_ip" column="kod_titul_ip" />
              <column table="a" column="kod_titul_ip" />
            </call>
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_tree">
          <call function="and">
            <call function="=">
              <column table="kod_ipr" column="kod_ipr" />
              <column table="a" column="kod_ipr" />
            </call>
          </call>
        </query>
        <!--<query name="ipr_ipr_data" as="kod_ipr" join="left outer">
          <using>
            <column column="kod_ipr"/>
          </using>
        </query>-->
        <query name="ipr_tree" as="kod_parent_node" dname="ipr_tree_childs" join="left outer">
          <call function="=">
            <column table="a" column="kod_parent_node" />
            <column table="kod_parent_node" column="kod_node" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_razdel_ip_stored" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_razdel_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_razdel" as="kod_razdel" key="1" fixed="1" />
        <column table="ips_razdel_ip_tree" column="path" as="path" key="0" />
        <!--<column table="ips_razdel_tree" column="kod_root"/>-->
        <query as="kod_root" key="0">
          <select>
            <call function="keep last" as="kod_root">
              <column table="parents" column="kod_razdel" group="max" />
              <call function="level" />
            </call>
          </select>
          <from>
            <query name="ips_razdel_ip" as="parents" title="Раздел ИПР" />
          </from>
          <connect>
            <call function="=">
              <column table="parents" column="kod_razdel" />
              <column table="parents" column="kod_parent" prior="1" />
            </call>
          </connect>
          <start>
            <call function="=">
              <column table="parents" column="kod_razdel" />
              <column table="a" column="kod_razdel" />
            </call>
          </start>
        </query>
        <query as="tip_obj" key="0">
          <select>
            <column table="parents" column="prizn" group="max" as="prizn" />
          </select>
          <from>
            <query name="ips_razdel_ip" as="parents" title="Раздел ИПР" />
          </from>
          <connect>
            <call function="=">
              <column table="parents" column="kod_razdel" />
              <column table="parents" column="kod_parent" prior="1" />
            </call>
          </connect>
          <start>
            <call function="=">
              <column table="parents" column="kod_razdel" />
              <column table="a" column="kod_razdel" />
            </call>
          </start>
        </query>
      </select>
      <!--<links>
        <slink name="ips_razdel_tree"/>
      </links>-->
      <from>
        <query name="ips_razdel_ip" as="a" title="Раздел ИПР" />
        <query name="ips_razdel_ip_tree" join="left outer" as="ips_razdel_ip_tree" dname="ips_razdel_ip_stored">
          <call function="=">
            <column table="a" column="kod_razdel" />
            <column table="ips_razdel_ip_tree" column="kod_razdel" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_razdel_ip_ext_tree" class="1" timestamp="30.05.2017 01:53:04" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_razdel_ip.xml" haskeys="1">
      <select>
        <call function="connect_by_root" type="number" as="kod_razdel_parent" key="0">
          <column table="a" column="kod_razdel" />
        </call>
        <column table="a" column="kod_razdel" as="kod_razdel_child" key="1" fixed="1" />
      </select>
      <from>
        <query name="ips_razdel_ip" as="a" title="Раздел ИПР" />
        <query name="ips_razdel_ip" as="kod_razdel_parent" join="left outer" dname="ips_razdel_ip_ext_tree_p" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel_parent" column="kod_razdel" />
            <column table="this" column="kod_razdel_parent" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel_child" join="left outer" dname="ips_razdel_ip_ext_tree_c" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel_child" column="kod_razdel" />
            <column table="this" column="kod_razdel_child" />
          </call>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_razdel" prior="1" />
        </call>
      </connect>
      <start>
        <call function="true" />
      </start>
    </query>
    <query name="ips_smet_struc_root" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_smet_structure.xml">
      <select>
        <column table="a" column="*" as="*" key="0"></column>
      </select>
      <from>
        <query name="ips_smet_structure" as="a" title="Виды затрат" />
      </from>
      <where>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </where>
    </query>
    <query name="ips_smet_structure_dop" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_smet_structure.xml" haskeys="1">
      <select>
        <column table="a" column="kod_smet" key="1" type="number" as="kod_smet" />
        <column table="a" column="name" type="string" as="name" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" />
      </select>
      <from>
        <table name="ips_smet_structure_dop" as="a" view="1" />
      </from>
    </query>
    <query name="ips_smet_structure_ext" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_smet_structure.xml">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="a">
          <union>
            <query haskeys="1">
              <select>
                <column table="a" column="kod_smet" type="number" as="kod_smet" key="1" />
                <column table="a" column="name" type="string" as="name" key="0" />
                <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
              </select>
              <from>
                <query name="ips_smet_structure_dop" as="a" />
              </from>
            </query>
            <query>
              <select>
                <column table="a" column="kod_smet" as="kod_smet" />
                <column table="a" column="name" as="name" />
                <column table="a" column="kod_parent" as="kod_parent" />
              </select>
              <from>
                <query name="ips_smet_structure" as="a" title="Виды затрат" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ips_smet_struct_sub" inherit="ips_smet_structure" timestamp="15.04.2016 14:10:22" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_smet_structure.xml" haskeys="1">
      <where>
        <call function="is not null">
          <column table="this" column="kod_parent" />
        </call>
      </where>
      <select>
        <column table="a" column="kod_smet" type="number" as="kod_smet" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вид затрат" as="name" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0"></column>
        <column table="a" column="name_cognos" type="string" title="" as="name_cognos" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_smet_structure" as="a" title="Виды затрат"></table>
        <query name="ipr_fin_body_united" as="kod_smet" join="left outer" dname="ips_smet_struct_sub" title="Ведение инвестиционных проектов">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <column table="kod_smet" column="kod_smet"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ips_vid_zatrat_schet" class="1" timestamp="03.04.2018 20:34:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_vid_zatrat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" dimension="ipr_sub_sch" as="name" key="0" />
        <column table="a" column="ordr" type="number" as="ordr" key="0" />
      </select>
      <from>
        <table name="ips_vid_zatrat_schet" view="1" as="a" />
      </from>
    </query>
    <query name="ipv_razdel_mn_tree" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipv_razdel_mn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_minenergo" as="kod_minenergo" key="1" fixed="1" />
        <column table="a" column="kod_minenergo" as="kod_node" key="0" />
        <column table="a" column="kod_parent" as="kod_parent_node" key="0" />
        <call function="rownum" as="rwn" key="0" />
        <call function="level" as="lvl" key="0" />
        <call function="ltrim" as="path" title="Раздел(путь)" key="0">
          <call function="replace">
            <call function="sys_connect_by_path">
              <call function="nvl">
                <column table="a" column="abbr" />
                <column table="a" column="name" />
              </call>
              <const>'-&gt;@%'</const>
            </call>
            <const>'-&gt;@%'</const>
            <const>'/'</const>
          </call>
          <const>'/'</const>
        </call>
      </select>
      <from>
        <query name="ipv_razdel_mn" as="a" />
        <query name="ipv_razdel_mn" as="kod_minenergo" join="left outer" dname="ipv_razdel_mn_tree">
          <call function="=">
            <column table="kod_minenergo" column="kod_minenergo" />
            <column table="this" column="kod_minenergo" />
          </call>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_minenergo" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>
    </query>
    <query name="ipv_razdel_rs_tree" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipv_razdel_rs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_klass" as="kod_klass" key="1" fixed="1" />
        <column table="a" column="kod_klass" as="kod_node" reference="ipv_razdel_rs" refcol="kod_klass" key="0" />
        <column table="a" column="kod_parent" as="kod_parent_node" key="0" />
        <call function="rownum" as="rwn" key="0" />
        <call function="level" as="lvl" key="0" />
        <call function="ltrim" as="path" title="Раздел(путь)" key="0">
          <call function="replace">
            <call function="sys_connect_by_path">
              <call function="nvl">
                <column table="a" column="abbr_num" />
                <column table="a" column="name" />
              </call>
              <const>'-&gt;@%'</const>
            </call>
            <const>'-&gt;@%'</const>
            <const>'/'</const>
          </call>
          <const>'/'</const>
        </call>
      </select>
      <from>
        <query name="ipv_razdel_rs" as="a" />
        <query name="ipv_razdel_rs" as="kod_klass" join="left outer" dname="ipv_razdel_rs_tree">
          <call function="=">
            <column table="kod_klass" column="kod_klass" />
            <column table="a" column="kod_klass" />
          </call>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_klass" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>
    </query>
    <query name="isv_ip_opl_for_plan" inherit="isv_ip_opl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\isv_ip_opl.xml" haskeys="1">
      <where>
        <call function="or">
          <call function="is null or -1">
            <column table="a" column="kod_dog" />
          </call>
          <call function="exists">
            <query>
              <select>
                <const as="a1">1</const>
              </select>
              <from>
                <query name="ipr_dogs" as="ipr_dogs" />
              </from>
              <where>
                <call function="and">
                  <call function="=">
                    <column table="a" column="kod_dog" />
                    <column table="ipr_dogs" column="kod_dog" />
                  </call>
                  <call function="=">
                    <column table="a" column="kod_ip" />
                    <column table="ipr_dogs" column="kod_titul_ip" />
                  </call>
                </call>
              </where>
            </query>
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" key="1" fixed="1" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_ip" type="number" as="kod_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="regnom" type="string" title="" as="regnom" key="0" />
        <column table="a" column="vid_zatr" type="string" title="" as="vid_zatr" key="0" />
        <column table="a" column="num_doc" type="string" title="" as="num_doc" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата РНО" as="dat_opl" key="0" />
        <column table="a" column="sum_opl" type="number" title="" as="sum_opl" key="0" />
        <column table="a" column="bez_nds" type="number" title="" as="bez_nds" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" reference="isv_ip_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="year_vip" type="number" title="" as="year_vip" key="0" />
        <column table="a" column="prizn_r" type="number" title="" as="prizn_r" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" key="0" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" key="0" />
        <column table="a" column="num_rno" type="string" title="Номер РНО" as="num_rno" key="0" />
        <column table="a" column="kazn_num" type="number" title="" as="kazn_num" key="0" />
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="vozv" type="number" title="" as="vozv" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="0" />
        <column table="a" column="vsego_osv_akt" type="number" title="" as="vsego_osv_akt" key="0" />
        <column table="a" column="summa_osv_akt" type="number" title="" as="summa_osv_akt" key="0" />
        <column table="a" column="is_avans" type="number" title="" as="is_avans" key="0" />
        <column table="a" column="status" type="string" title="" as="status" key="0" />
        <column table="a" column="kod_sum_akts" type="number" title="" as="kod_sum_akts" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" key="0" />
        <call function="date to ym2" as="ym" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="year" as="year" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="month" as="period" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="coalesce" as="kod_schet" key="0">
          <column table="kod_vip_dog" column="kod_schet" />
          <column table="kodzatrat" column="kod_schet" />
          <const>3</const>
        </call>
        <column table="kod_ro" column="kod_predpr" as="kod_predpr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ip_opl" as="a">
          <link name="kod_ro" as="kod_ro" table="is_ro" child="isv_ip_opl_for_plan" field="kod_ro" parent="is_ro" back="isv_ip_opl_for_plan" />
        </table>
        <query name="ipr_titul_ip" as="kod_ip" join="left outer" dname="isv_ip_opl_for_plan" title="Титулы">
          <call function="=">
            <column table="a" column="kod_ip" />
            <column table="kod_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="isv_ip_opl_for_plan" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="isv_ip_opl_for_plan">
          <call function="=">
            <column table="a" column="kodzatrat" />
            <column table="kodzatrat" column="kodzatrat" />
          </call>
        </query>
        <query name="isv_ip_vip_dog" as="kod_vip_dog" join="left outer" dname="isv_ip_opl_for_plan">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_opl_period" as="kod_opl_period" join="left outer" dname="isv_ip_opl_for_plan">
          <call function="=">
            <column table="a" column="kod_opl_period" />
            <column table="kod_opl_period" column="kod_opl_period" />
          </call>
        </query>
        <query name="is_ro" as="kod_ro" join="left outer" dname="isv_ip_opl_for_plan">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro" column="kod_ro" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ip_vip_dog_for_plan" inherit="isv_ip_vip_dog" class="1" timestamp="05.04.2016 16:50:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\isv_ip_vip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_ip" type="number" as="kod_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="regnom" type="string" title="" as="regnom" key="0" />
        <column table="a" column="vid_zatr" type="string" title="" as="vid_zatr" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" key="0" />
        <column table="a" column="num_doc" type="string" title="Номер акта" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата акта" as="dat_doc" key="0" />
        <column table="a" column="vsego" type="number" title="Сумма с НДС" is-fact="1" agg="sum" as="vsego" fact="isv_ip_vip_dog_vsego" key="0" />
        <column table="a" column="nds" type="number" title="НДС" as="nds" key="0" />
        <column table="a" column="opl_close_avans_nds" type="number" title="" as="opl_close_avans_nds" key="0" />
        <column table="a" column="opl_close_avans" type="number" title="" as="opl_close_avans" key="0" />
        <column table="a" column="opl_vip_nds" type="number" title="" as="opl_vip_nds" key="0" />
        <column table="a" column="opl_vip" type="number" title="" as="opl_vip" key="0" />
        <column table="a" column="vozv_nds" type="number" title="" as="vozv_nds" key="0" />
        <column table="a" column="vozv" type="number" title="" as="vozv" key="0" />
        <column table="a" column="prizn_r" type="number" title="" as="prizn_r" key="0" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="prizn_doc_vip" type="number" title="" as="prizn_doc_vip" key="0" />
        <column table="a" column="dat_buh" type="date" title="" as="dat_buh" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="0" />
        <column table="a" column="num_dog" type="string" title="" as="num_dog" key="0" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" reference="ips_smet_structure" refcol="kod_smet" key="0" />
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" key="0" />
        <column table="a" column="pr_ofz" type="number" title="Признак ОФЗ" as="pr_ofz" key="0" />
        <call function="date to ym2" as="ym" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <call function="year" as="year" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <call function="month" as="period" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <column table="buh_akt_vip_dog_2" column="kod_schet" as="kod_schet_it" key="0" />
        <column table="kodzatrat" column="kod_schet" as="kod_schet_zt" key="0" />
        <call function="coalesce" as="kod_schet" key="0">
          <column table="this" column="kod_schet_it" />
          <column table="this" column="kod_schet_zt" />
          <const>3</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ip_vip_dog" as="a" />
        <query name="ipr_titul_ip" as="kod_ip" join="left outer" dname="isv_ip_vip_dog_for_plan" title="Титулы">
          <call function="=">
            <column table="a" column="kod_ip" />
            <column table="kod_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="isv_ip_vip_dog_for_plan" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="isv_ip_vip_dog_for_plan" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet" />
            <column table="kod_smet" column="kod_smet" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="isv_ip_vip_dog_for_plan">
          <call function="=">
            <column table="a" column="kodzatrat" />
            <column table="kodzatrat" column="kodzatrat" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" dname="isv_ip_vip_dog_for_plan" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="ipr_vip_dog_proch" as="kod_vip_dog_proch" join="left outer" dname="isv_ip_vip_dog_for_plan">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog_proch" column="kod_vip_dog_pr" />
          </call>
        </query>
        <query name="vv_buh_akt_vip_dog_2" as="buh_akt_vip_dog_2" join="left outer" dname="isv_ip_vip_dog_for_plan">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="buh_akt_vip_dog_2" column="kod_vip_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat_schet" as="kod_schet" join="left outer" dname="isv_ip_vip_dog_for_plan">
          <call function="=">
            <column table="this" column="kod_schet" />
            <column table="kod_schet" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_ad_all_slice_q_dates" class="1" timestamp="20.04.2017 12:41:53" order="pr, dat_copy desc" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ad_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" key="1" fixed="1" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" key="0" />
        <column table="a" column="name" type="string" title="Срез" as="name" key="0" />
        <column table="a" column="pr" type="number" title="" as="pr" key="0" />
      </select>
      <from>
        <query as="a">
          <union>
            <query haskeys="1">
              <select>
                <const as="id_slice" type="number" key="1" fixed="1">0</const>
                <const as="dat_copy" type="date" key="0">null</const>
                <const as="name" type="string" key="0">'Текущая дата'</const>
                <const as="qn" type="string" key="0">null</const>
                <const as="dn" type="string" key="0">null</const>
                <const as="pr" type="number" key="0">0</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
            <query>
              <select>
                <column table="a" column="id_slice" type="number" title="" as="id_slice" />
                <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
                <call function="||" as="name" type="string" title="Квартал">
                  <call function="to_char">
                    <column table="a" column="dat_copy" />
                    <const>'yyyy'</const>
                  </call>
                  <const>' год '</const>
                  <call function="case">
                    <call function="when">
                      <call function="=">
                        <column table="this" column="qn" />
                        <call function="||">
                          <column table="this" column="dn" />
                          <const>'04'</const>
                        </call>
                      </call>
                      <const>'I'</const>
                    </call>
                    <call function="when">
                      <call function="=">
                        <column table="this" column="qn" />
                        <call function="||">
                          <column table="this" column="dn" />
                          <const>'07'</const>
                        </call>
                      </call>
                      <const>'II'</const>
                    </call>
                    <call function="when">
                      <call function="=">
                        <column table="this" column="qn" />
                        <call function="||">
                          <column table="this" column="dn" />
                          <const>'10'</const>
                        </call>
                      </call>
                      <const>'III'</const>
                    </call>
                    <call function="when">
                      <call function="=">
                        <column table="this" column="qn" />
                        <call function="||">
                          <column table="this" column="dn" />
                          <const>'01'</const>
                        </call>
                      </call>
                      <const>'IV'</const>
                    </call>
                  </call>
                  <const>' квартал'</const>
                </call>
                <call function="to_char" as="qn">
                  <column table="a" column="dat_copy" />
                  <const>'ddmm'</const>
                </call>
                <const as="dn" type="string">'01'</const>
                <const as="pr" type="number">1</const>
              </select>
              <from>
                <query name="is_ad_all_slice" as="a" />
              </from>
              <where>
                <call function="and">
                  <call function="in">
                    <column table="this" column="qn" />
                    <call function="array">
                      <call function="||">
                        <column table="this" column="dn" />
                        <const>'04'</const>
                      </call>
                      <call function="||">
                        <column table="this" column="dn" />
                        <const>'07'</const>
                      </call>
                      <call function="||">
                        <column table="this" column="dn" />
                        <const>'10'</const>
                      </call>
                      <call function="||">
                        <column table="this" column="dn" />
                        <const>'01'</const>
                      </call>
                    </call>
                  </call>
                  <call function="=">
                    <column table="a" column="id_slice" />
                    <column table="a" column="id_slice_day" />
                  </call>
                </call>
              </where>
            </query>
          </union>
        </query>
      </from>
      <order>
        <column column="pr" />
        <column column="dat_copy" />
      </order>
    </query>
    <query name="is_ad_all_slice_list" class="1" order="dat_copy_time desc" timestamp="18.04.2017 15:43:48" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ad_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice" as="id_slice" key="1" fixed="1" />
        <call function="to_char" as="name" key="0">
          <column table="a" column="dat_copy_time" />
          <const>'dd.mm.yyyy hh24:mi:ss'</const>
        </call>
        <column table="a" column="dat_copy_time" as="dat_copy_time" key="0" />
      </select>
      <from>
        <query name="is_ad_all_slice" as="a" />
      </from>
      <order>
        <column column="dat_copy_time" />
      </order>
    </query>
    <query name="is_ad_all_slice_current" class="1" order="dat_copy_time desc" timestamp="27.04.2017 13:18:37" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ad_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" key="1" fixed="1" />
        <call function="to_char" as="name" key="0">
          <column table="a" column="dat_copy_time" type="date" title="" />
          <const>'dd.mm.yyyy hh24:mi:ss'</const>
        </call>
      </select>
      <from>
        <query name="is_ad_all_slice" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="id_slice" />
          <call function="is_job.set_id_slice_current" />
        </call>
      </where>
      <order>
        <column column="dat_copy_time" />
      </order>
    </query>
    <query name="is_ad_all_slice_list_d" class="1" order="dat_copy_time desc" timestamp="21.10.2017 16:13:25" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ad_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice" as="id_slice" key="1" fixed="1" />
        <call function="date to char" as="name" key="0">
          <column table="a" column="dat_copy_time" />
        </call>
      </select>
      <from>
        <query name="is_ad_all_slice" as="a" />
      </from>
      <order>
        <column column="dat_copy_time" />
      </order>
    </query>
    <query name="is_akt_all_slice_list" class="1" order="dat_copy_time desc" timestamp="10.01.2019 20:12:49" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_akt_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice_akt" as="id_slice_akt" key="1" fixed="1" />
        <call function="to_char" as="name" key="0">
          <column table="a" column="dat_copy_time" />
          <const>'dd.mm.yyyy hh24:mi:ss'</const>
        </call>
        <column table="a" column="dat_copy_time" as="dat_copy_time" key="0" />
      </select>
      <from>
        <query name="is_akt_all_slice" as="a" />
      </from>
      <order>
        <column column="dat_copy_time" />
      </order>
    </query>
    <query name="is_dogovor_list" class="1" timestamp="22.03.2017 13:33:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" key="1" as="kod_dog" />
        <!--<column table="a" column="name_unig_dog"/>-->
        <column table="a" column="name" title="Договор" as="name" />
        <column table="e_code" column="name" as="name_payer" title="Контрагент" />
        <column table="kod_spr_doc" column="dr" as="kod_tip_dog" />
        <call function="decode" as="name_tip_dog" title="Тип договора" type="string">
          <column table="kod_spr_doc" column="dr" />
          <const>1</const>
          <const>'Расходный договор'</const>
          <const>'Доходный договор'</const>
        </call>
        <column table="a" column="kod_dog" as="kod" />
      </select>
      <from>
        <query name="is_dogovor" as="a" title="Подрядные договоры">
          <link name="e_code" as="e_code" table="is_creditors" child="is_dogovor" field="e_code" parent="is_creditors" back="is_dogovor" title="Контрагенты" />
          <link name="kod_spr_doc" as="kod_spr_doc" table="is_spr_doc" child="is_dogovor" field="kod_spr_doc" parent="is_spr_doc" back="is_dogovor" />
        </query>
      </from>
    </query>
    <query name="is_dogovor_num_list" class="1" timestamp="11.11.2021 23:27:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" key="1" as="kod_dog" />
        <call as="unig" function="||-" title="Договор">
          <call function="substr">
            <call function="to_char">
              <column table="a" column="year" />
            </call>
            <const>3</const>
            <const>2</const>
          </call>
          <call function="to_char">
            <column table="a" column="kod_unig_dog" />
          </call>
        </call>
        <!--<column table="a" column="name_unig_dog"/>-->
      </select>
      <from>
        <query name="is_dogovor" as="a" title="Подрядные договоры" />
      </from>
      <where>
        <call function="not in">
          <column table="a" column="status" />
          <const>(0, 6)</const>
        </call>
      </where>
    </query>
    <query name="is_dop_contract_dop" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dop_contract.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="1" fixed="1" />
        <column table="a" column="load123_kvt" as="power" type="number" key="0" />
        <column table="a" column="kateg" as="category" type="string" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ad_all" as="a" />
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_dop_contract_dop" title="Абонентские договоры">
          <call function="=">
            <column table="kod_dop_contract" column="kod_dop_contract" />
            <column table="a" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_build" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dop_contract.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="number" key="1" fixed="1">0</const>
                <const as="name" type="string" title="1" key="0">'без работ'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'с работами'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'имущественные'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="is_spr_load" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dop_contract.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="number" key="1" fixed="1">1</const>
                <const as="name" type="string" title="1" key="0">'до 15 кВт'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'15-150 кВт'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>3</const>
                <const>'свыше 150 кВт'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="is_dop_contract_num_list" class="1" timestamp="11.11.2021 23:32:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_dop_contract.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" key="1" as="kod_dop_contract" />
        <column table="a" column="num_ouco" title="Договор" as="num_ouco" />
        <!--<call function="if" as="kod_region" title="Регион" type="number">
          <call function="and">
            <call function="=">
              <call function="nvl0">
                <column table="a" column="kn_zone" />
              </call>
              <const>0</const>
            </call>
            <call function="is not null">
              <column table="a" column="kn_zone" />
            </call>
          </call>
          <const>0</const>
          <const>1</const>
        </call>-->
      </select>
      <from>
        <query name="is_dop_contract" as="a" title="Абонентские договоры" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="kn_contract_p" />
          </call>
          <call function="!=">
            <column table="a" column="status" />
            <const>0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="is_fin_doc_dog_titul_uniq" title="Источники финансирования" class="1" timestamp="28.08.2017 16:52:33" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_fin_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" group="1" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="kod_titul_ip" type="number" group="1" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="1" fixed="1" />
      </select>
      <from>
        <query name="is_fin_doc" as="a" title="Источники финансирования" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="is_fin_doc_dog_titul_uniq" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_fin_doc_dog_titul_uniq" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_person_list" inherit="is_person" class="1" timestamp="18.09.2017 16:20:53" order="fio" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_person.xml" haskeys="1">
      <select>
        <column table="a" column="prizn" type="number" title="" as="prizn" />
        <column table="a" column="kod_spr_dolg" type="number" column-mandatory="1" as="kod_spr_dolg" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" />
        <column table="a" column="kod_gv" type="number" as="kod_gv" reference="is_spr_gv" refcol="kod_gv" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="polzov" type="string" title="" data-size="30" as="polzov" />
        <column table="a" column="cp" type="string" title="" data-size="20" as="cp" />
        <column table="a" column="fio_r" type="string" title="" comment="фио в р.п." data-size="250" as="fio_r" />
        <column table="a" column="dolgn_r" type="string" title="" comment="должность в р.п." data-size="250" as="dolgn_r" />
        <column table="a" column="osnov" type="string" title="" data-size="250" as="osnov" />
        <column table="a" column="dolgn_full" type="string" data-size="1000" title="" comment="Должностная функция полная" as="dolgn_full" />
        <column table="a" column="dolgn_r_full" type="string" data-size="1000" title="" comment="Должностная функция полная в р.п." as="dolgn_r_full" />
        <column table="a" column="full_name" type="string" data-size="1000" title="" comment="ФИО полное в и.п." as="full_name" />
        <column table="a" column="full_name_r" type="string" data-size="1000" title="" comment="ФИО полное в р.п." as="full_name_r" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" />
        <column table="a" column="pr_route" type="number" title="" comment="признак наличия в согласовании по маршруту" as="pr_route" />
        <column table="a" column="phone_city" type="string" data-size="150" title="" comment="Телефон городской" as="phone_city" />
        <column table="a" column="fio_d" type="string" data-size="250" title="" comment="ФИО в д.п." as="fio_d" />
        <column table="a" column="dolgn_d" type="string" data-size="250" title="" comment="Должностная функция в д.п." as="dolgn_d" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
        <column table="a" column="kod_person" type="number" key="1" as="kod_person" />
        <column table="a" column="fio" type="string" title="ФИО" as="fio" />
        <column table="a" column="dolgn" type="string" title="Должность" as="dolgn" />
        <column table="a" column="tel" type="string" title="Телефон" as="tel" />
        <column table="a" column="e_mail" type="string" title="e-mail" as="e_mail" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" />
      </select>
      <from>
        <table name="is_person" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_person_list" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_gv" as="kod_gv" join="left outer" dname="is_person_list">
          <call function="=">
            <column table="a" column="kod_gv" />
            <column table="kod_gv" column="kod_gv" />
          </call>
        </query>
        <query name="is_spr_dolg" as="kod_spr_dolg" join="left outer" dname="is_person_list">
          <call function="=">
            <column table="a" column="kod_spr_dolg" />
            <column table="kod_spr_dolg" column="kod_spr_dolg" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_spr_dolg" join="left outer" dname="is_person_list">
          <call function="=">
            <column table="a" column="kod_spr_dolg" />
            <column table="kod_spr_dolg" column="kod_namedolzh" />
          </call>
        </query>
        <query name="is_person" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="dat_udal" />
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="is_person_43107_list" class="1" timestamp="12.12.2017 13:30:33" order="fio" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_person.xml" haskeys="1">
      <select>
        <column table="a" column="kod_person" type="number" key="1" group="1" as="kod_person" />
        <column table="a" column="fio" type="string" title="ФИО" group="max" as="fio" />
        <column table="kod_titul_ip" column="kod_titul_ip" type="string" title="Кол-во титулов" group="count_dist" as="kod_titul_ip" />
        <column table="a" column="dolgn" type="string" title="Должность" group="max" as="dolgn" />
        <column table="kod_direct" column="name_kr" group="max" title="Подразделение" as="name_kr" />
        <column table="a" column="tel" type="string" title="Телефон" group="max" as="tel" />
        <column table="a" column="e_mail" type="string" title="e-mail" group="max" as="e_mail" />
        <column table="a" column="dat_udal" type="string" title="Дата удаления" group="max" as="dat_udal" />
      </select>
      <from>
        <query name="is_person" as="a">
          <elink name="ipr_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_titul_ip" field="kod_kurator" parent="is_person" back="ipr_titul_ip" title="Титулы">
            <elink name="ipr_ipr_data" as="kod_ipr" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" />
          </elink>
          <link name="kod_direct" as="kod_direct" table="is_spr_direct" child="is_person" field="kod_direct" parent="is_spr_direct" back="is_person" title="Подразделения" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_titul_ip" column="kod_kurator" />
          </call>
          <call function="!=">
            <column table="kod_ipr" column="kod_prin_soc_val" />
            <const>81</const>
          </call>
          <call function="is not null">
            <column table="kod_ipr" column="kod_prin_soc_val" />
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="is_ro_1c" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ro.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ro" type="number" as="kod_ro" key="1" fixed="1" />
        <column table="a" column="dat_vigr_1c" type="date" as="dat_vigr_1c" key="0" />
      </select>
      <from>
        <table name="is_ro_1c" view="1" as="a" />
      </from>
    </query>
    <query name="is_spr_direct_list" order="name" class="1" timestamp="09.04.2018 14:25:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" group="1" key="1" as="kod_direct" />
        <column table="a" column="name" as="name_direct" fixed="1" group="1" />
        <column table="a" column="name_kr" as="name_kr_direct" group="1" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" title="Подразделения">
          <link name="puser_ext" as="ipr_rights" table="ipr_rights_all" child="is_spr_direct" field="puser_ext" parent="ipr_rights_all" back="is_spr_direct" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ipr_rights" column="puser" />
            <const>user</const>
          </call>
          <call function="is null">
            <column table="a" column="god" />
          </call>
          <call function="=">
            <column table="a" column="invest_pr" />
            <const>1</const>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="is_spr_direct-listchild" class="1" timestamp="23.10.2018 15:04:18" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <params>
        <param name="kod_direct">
          <const>857</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_direct" as="kod_direct" key="1" fixed="1" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" title="Подразделения" />
      </from>
      <start>
        <call function="=">
          <column table="a" column="kod_direct" />
          <useparam name="kod_direct" />
        </call>
      </start>
      <connect>
        <call function="=">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_direct" prior="1" />
        </call>
      </connect>
    </query>
    <query name="is_spr_dirisp" class="1" timestamp="23.03.2017 11:51:12" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dirisp" type="number" as="kod_dirisp" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_dirisp" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_dirisp_def" inherit="is_spr_dirisp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod_dirisp" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dirisp" type="number" as="kod_dirisp" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_dirisp" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_dirisp_isp" inherit="is_spr_dirisp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod_dirisp" />
          <const>3</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dirisp" type="number" as="kod_dirisp" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_dirisp" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_dirisp2" inherit="is_spr_dirisp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <where>
        <call function="!=">
          <column table="a" column="kod_dirisp" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dirisp" type="number" as="kod_dirisp" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_dirisp" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_direct_list_no_rights" order="name" class="1" timestamp="12.04.2017 13:26:33" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="name" as="name_direct" fixed="1" key="0" />
        <column table="a" column="name_kr" as="name_kr_direct" key="0" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" title="Подразделения" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="god" />
          </call>
          <call function="=">
            <column table="a" column="invest_pr" />
            <const>1</const>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="is_spr_direct_res" class="1" inherit="is_spr_direct" timestamp="06.09.2017 22:36:20" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" comment="уникальный код подразделения" column-mandatory="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="kod_predpr" type="string" as="kod_predpr" key="0" />
        <column table="a" column="name" type="string" title="Подразделение" comment="наименование подразделения" column-mandatory="1" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родителя" as="kod_parent" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="name_kr" type="string" comment="краткое наимен.подразделения" vid="1" description="Сокращенное наименование подразделения " title="Подразделение" as="name_kr" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" key="0" />
        <column table="a" column="kod_podr" type="number" as="kod_podr" key="0" />
        <column table="a" column="en_gor" type="number" title="" as="en_gor" key="0" />
        <column table="a" column="en_obl" type="number" title="" as="en_obl" key="0" />
        <column table="a" column="tep_gor" type="number" title="" as="tep_gor" key="0" />
        <column table="a" column="kod_plant" type="string" as="kod_plant" key="0" />
        <column table="a" column="tep_obl" type="number" title="" as="tep_obl" key="0" />
        <column table="a" column="prizn_isp" type="number" title="" as="prizn_isp" key="0" />
        <column table="a" column="crkp" type="number" title="" as="crkp" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_dir_old" type="number" as="kod_dir_old" key="0" />
        <column table="a" column="kod_gkpz" type="number" as="kod_gkpz" key="0" />
        <column table="a" column="path_doc" type="string" title="" comment="путь хранения док-тов дог-ра (только для верхнего уровня)" as="path_doc" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в бд" as="d_c" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата изменения строки" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="строку добавил/изменил" as="u_m" key="0" />
        <column table="a" column="kod_kazn" type="string" as="kod_kazn" key="0" />
        <column table="a" column="fl_branch" type="number" title="" comment="флаг филиала:  1- филиалы, 2- районы кс, 3- рэс" as="fl_branch" key="0" />
        <column table="a" column="kn_fblock" type="number" title="" as="kn_fblock" reference="is_spr_direct" refcol="" key="0" />
        <column table="a" column="kod_nemo" type="number" comment="для синхронизации справочников немо" as="kod_nemo" key="0" />
        <column table="a" column="kod_xml_plan" type="number" as="kod_xml_plan" key="0" />
        <column table="a" column="invest_pr" type="number" title="" as="invest_pr" key="0" />
        <column table="a" column="fl_ask_atp" type="number" title="" as="fl_ask_atp" key="0" />
        <call function="if" as="kod_parent_i" type="number" title="-" key="0">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <column table="a" column="kod_direct_code" type="string" comment="Шифр подразделения для использования в коде. Аналог PK, но user friendly." as="kod_direct_code" key="0" />
        <column table="a" column="kod_spr_pfm" type="number" as="kod_spr_pfm" reference="is_spr_pfm" refcol="kod_spr_pfm" key="0" />
        <column table="a" column="city_name" type="string" title="" as="city_name" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="Полное наим. подразд(без сокращений)" as="full_name" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="ссылка на KODP подразделения, добавленного из IS_SPR_DIRECT в KR_ORG схемы ASUSE" as="kodp" key="0" />
        <column table="a" column="pr_vks_ofz" type="number" title="" comment="ВКС/ОФЗ" as="pr_vks_ofz" key="0" />
        <column table="a" column="kod_spr_rosseti" type="string" comment="код по справочнику Россетей &quot;Оргструктура&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="zone" type="number" title="" comment="тарифная зона (для города)" as="zone" key="0" />
        <column table="a" column="mvp_code" type="string" comment="SAP код МВП" data-size="4" as="mvp_code" key="0" />
        <call function="decode" as="gor_obl_name" type="string" key="0">
          <column table="a" column="gor_obl" />
          <const>1</const>
          <const>'СПб'</const>
          <const>2</const>
          <const>'ЛО'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_direct" as="a" title="Подразделения" />
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_spr_direct_res">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_parent" join="left outer" dname="is_spr_direct_res" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kn_fblock" join="left outer" dname="is_spr_direct_res" title="Подразделения">
          <call function="=">
            <column table="a" column="kn_fblock" />
            <column table="kn_fblock" column="" />
          </call>
        </query>
        <query name="ipr_rights" as="puser" join="left outer" dname="is_spr_direct_res">
          <call function="or">
            <call function="=">
              <column table="puser" column="kod_sec" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser" column="kod_sec" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_spr_pfm" join="left outer" dname="is_spr_direct_res">
          <call function="=">
            <column table="a" column="kod_spr_pfm" />
            <column table="kod_spr_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="ipr_rights_all" as="puser_ext" join="left outer" dname="is_spr_direct_res">
          <call function="or">
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_direct_tit" class="1" inherit="is_spr_direct" timestamp="06.09.2017 22:36:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" comment="уникальный код подразделения" column-mandatory="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="kod_predpr" type="string" as="kod_predpr" key="0" />
        <column table="a" column="name" type="string" title="Подразделение" comment="наименование подразделения" column-mandatory="1" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родителя" as="kod_parent" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="name_kr" type="string" comment="краткое наимен.подразделения" vid="1" description="Сокращенное наименование подразделения " title="Подразделение" as="name_kr" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" key="0" />
        <column table="a" column="kod_podr" type="number" as="kod_podr" key="0" />
        <column table="a" column="en_gor" type="number" title="" as="en_gor" key="0" />
        <column table="a" column="en_obl" type="number" title="" as="en_obl" key="0" />
        <column table="a" column="tep_gor" type="number" title="" as="tep_gor" key="0" />
        <column table="a" column="kod_plant" type="string" as="kod_plant" key="0" />
        <column table="a" column="tep_obl" type="number" title="" as="tep_obl" key="0" />
        <column table="a" column="prizn_isp" type="number" title="" as="prizn_isp" key="0" />
        <column table="a" column="crkp" type="number" title="" as="crkp" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_dir_old" type="number" as="kod_dir_old" key="0" />
        <column table="a" column="kod_gkpz" type="number" as="kod_gkpz" key="0" />
        <column table="a" column="path_doc" type="string" title="" comment="путь хранения док-тов дог-ра (только для верхнего уровня)" as="path_doc" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в бд" as="d_c" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата изменения строки" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="строку добавил/изменил" as="u_m" key="0" />
        <column table="a" column="kod_kazn" type="string" as="kod_kazn" key="0" />
        <column table="a" column="fl_branch" type="number" title="" comment="флаг филиала:  1- филиалы, 2- районы кс, 3- рэс" as="fl_branch" key="0" />
        <column table="a" column="kn_fblock" type="number" title="" as="kn_fblock" reference="is_spr_direct" refcol="" key="0" />
        <column table="a" column="kod_nemo" type="number" comment="для синхронизации справочников немо" as="kod_nemo" key="0" />
        <column table="a" column="kod_xml_plan" type="number" as="kod_xml_plan" key="0" />
        <column table="a" column="invest_pr" type="number" title="" as="invest_pr" key="0" />
        <column table="a" column="fl_ask_atp" type="number" title="" as="fl_ask_atp" key="0" />
        <call function="if" as="kod_parent_i" type="number" title="-" key="0">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <column table="a" column="kod_direct_code" type="string" comment="Шифр подразделения для использования в коде. Аналог PK, но user friendly." as="kod_direct_code" key="0" />
        <column table="a" column="kod_spr_pfm" type="number" as="kod_spr_pfm" reference="is_spr_pfm" refcol="kod_spr_pfm" key="0" />
        <column table="a" column="city_name" type="string" title="" as="city_name" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="Полное наим. подразд(без сокращений)" as="full_name" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="ссылка на KODP подразделения, добавленного из IS_SPR_DIRECT в KR_ORG схемы ASUSE" as="kodp" key="0" />
        <column table="a" column="pr_vks_ofz" type="number" title="" comment="ВКС/ОФЗ" as="pr_vks_ofz" key="0" />
        <column table="a" column="kod_spr_rosseti" type="string" comment="код по справочнику Россетей &quot;Оргструктура&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="zone" type="number" title="" comment="тарифная зона (для города)" as="zone" key="0" />
        <column table="a" column="mvp_code" type="string" comment="SAP код МВП" data-size="4" as="mvp_code" key="0" />
        <call function="decode" as="gor_obl_name" type="string" key="0">
          <column table="a" column="gor_obl" />
          <const>1</const>
          <const>'СПб'</const>
          <const>2</const>
          <const>'ЛО'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_direct" as="a" title="Подразделения" />
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_spr_direct_tit">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_parent" join="left outer" dname="is_spr_direct_tit" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kn_fblock" join="left outer" dname="is_spr_direct_tit" title="Подразделения">
          <call function="=">
            <column table="a" column="kn_fblock" />
            <column table="kn_fblock" column="" />
          </call>
        </query>
        <query name="ipr_rights" as="puser" join="left outer" dname="is_spr_direct_tit">
          <call function="or">
            <call function="=">
              <column table="puser" column="kod_sec" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser" column="kod_sec" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_spr_pfm" join="left outer" dname="is_spr_direct_tit">
          <call function="=">
            <column table="a" column="kod_spr_pfm" />
            <column table="kod_spr_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="ipr_rights_all" as="puser_ext" join="left outer" dname="is_spr_direct_tit">
          <call function="or">
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_direct_ad_filial_tit" class="1" inherit="is_spr_direct" timestamp="11.10.2017 11:37:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" comment="уникальный код подразделения" column-mandatory="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="kod_predpr" type="string" as="kod_predpr" key="0" />
        <column table="a" column="name" type="string" title="Подразделение" comment="наименование подразделения" column-mandatory="1" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родителя" as="kod_parent" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="name_kr" type="string" comment="краткое наимен.подразделения" vid="1" description="Сокращенное наименование подразделения " title="Подразделение" as="name_kr" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" key="0" />
        <column table="a" column="kod_podr" type="number" as="kod_podr" key="0" />
        <column table="a" column="en_gor" type="number" title="" as="en_gor" key="0" />
        <column table="a" column="en_obl" type="number" title="" as="en_obl" key="0" />
        <column table="a" column="tep_gor" type="number" title="" as="tep_gor" key="0" />
        <column table="a" column="kod_plant" type="string" as="kod_plant" key="0" />
        <column table="a" column="tep_obl" type="number" title="" as="tep_obl" key="0" />
        <column table="a" column="prizn_isp" type="number" title="" as="prizn_isp" key="0" />
        <column table="a" column="crkp" type="number" title="" as="crkp" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_dir_old" type="number" as="kod_dir_old" key="0" />
        <column table="a" column="kod_gkpz" type="number" as="kod_gkpz" key="0" />
        <column table="a" column="path_doc" type="string" title="" comment="путь хранения док-тов дог-ра (только для верхнего уровня)" as="path_doc" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в бд" as="d_c" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата изменения строки" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="строку добавил/изменил" as="u_m" key="0" />
        <column table="a" column="kod_kazn" type="string" as="kod_kazn" key="0" />
        <column table="a" column="fl_branch" type="number" title="" comment="флаг филиала:  1- филиалы, 2- районы кс, 3- рэс" as="fl_branch" key="0" />
        <column table="a" column="kn_fblock" type="number" title="" as="kn_fblock" reference="is_spr_direct" refcol="" key="0" />
        <column table="a" column="kod_nemo" type="number" comment="для синхронизации справочников немо" as="kod_nemo" key="0" />
        <column table="a" column="kod_xml_plan" type="number" as="kod_xml_plan" key="0" />
        <column table="a" column="invest_pr" type="number" title="" as="invest_pr" key="0" />
        <column table="a" column="fl_ask_atp" type="number" title="" as="fl_ask_atp" key="0" />
        <call function="if" as="kod_parent_i" type="number" title="-" key="0">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <column table="a" column="kod_direct_code" type="string" comment="Шифр подразделения для использования в коде. Аналог PK, но user friendly." as="kod_direct_code" key="0" />
        <column table="a" column="kod_spr_pfm" type="number" as="kod_spr_pfm" reference="is_spr_pfm" refcol="kod_spr_pfm" key="0" />
        <column table="a" column="city_name" type="string" title="" as="city_name" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="Полное наим. подразд(без сокращений)" as="full_name" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="ссылка на KODP подразделения, добавленного из IS_SPR_DIRECT в KR_ORG схемы ASUSE" as="kodp" key="0" />
        <column table="a" column="pr_vks_ofz" type="number" title="" comment="ВКС/ОФЗ" as="pr_vks_ofz" key="0" />
        <column table="a" column="kod_spr_rosseti" type="string" comment="код по справочнику Россетей &quot;Оргструктура&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="zone" type="number" title="" comment="тарифная зона (для города)" as="zone" key="0" />
        <column table="a" column="mvp_code" type="string" comment="SAP код МВП" data-size="4" as="mvp_code" key="0" />
        <call function="decode" as="gor_obl_name" type="string" key="0">
          <column table="a" column="gor_obl" />
          <const>1</const>
          <const>'СПб'</const>
          <const>2</const>
          <const>'ЛО'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_direct" as="a" title="Подразделения" />
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_spr_direct_ad_filial_tit">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_parent" join="left outer" dname="is_spr_direct_ad_filial_tit" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kn_fblock" join="left outer" dname="is_spr_direct_ad_filial_tit" title="Подразделения">
          <call function="=">
            <column table="a" column="kn_fblock" />
            <column table="kn_fblock" column="" />
          </call>
        </query>
        <query name="ipr_rights" as="puser" join="left outer" dname="is_spr_direct_ad_filial_tit">
          <call function="or">
            <call function="=">
              <column table="puser" column="kod_sec" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser" column="kod_sec" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_spr_pfm" join="left outer" dname="is_spr_direct_ad_filial_tit">
          <call function="=">
            <column table="a" column="kod_spr_pfm" />
            <column table="kod_spr_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="ipr_rights_all" as="puser_ext" join="left outer" dname="is_spr_direct_ad_filial_tit">
          <call function="or">
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_direct_kido_deps" order="name" class="1" timestamp="01.06.2020 18:50:16" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="name" as="name_direct" fixed="1" key="0" />
        <column table="a" column="name_kr" as="name_kr_direct" key="0" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" title="Подразделения" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kod_direct" />
            <call function="array">
              <const>19</const>
              <const>20</const>
              <const>21</const>
              <const>22</const>
              <const>24</const>
              <const>26</const>
              <const>27</const>
              <const>609</const>
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="is_spr_dirisp_isp_1" inherit="is_spr_dirisp" class="1" timestamp="17.09.2018 17:19:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod_dirisp" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dirisp" type="number" as="kod_dirisp" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_spr_dirisp" as="a" view="1" />
      </from>
    </query>
    <query name="is_spr_direct-listchild_material" class="1" timestamp="23.10.2018 15:08:37" materialize="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml" haskeys="1">
      <params>
        <param name="kod_direct">
          <const>846</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_direct" as="kod_direct" key="1" fixed="1" />
      </select>
      <from>
        <query name="is_spr_direct-listchild" as="a">
          <withparams>
            <useparam name="kod_direct">846</useparam>
          </withparams>
        </query>
      </from>
    </query>
    <query name="is_spr_ofz_list" class="1" timestamp="29.12.2016 13:07:58" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_ofz.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Состояние ОФЗ" as="name" key="0" />
      </select>
      <from>
        <query name="is_spr_ofz" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="pr_ipr" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="is_status_qv" title="Статус" inherit="is_status" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="pr_ad" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="status" type="number" title="" as="status" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Статус договора" as="name" key="0"></column>
        <column table="a" column="color" type="string" title="" as="color" key="0"></column>
        <column table="a" column="n_color" type="number" title="" as="n_color" key="0"></column>
        <column table="a" column="color1" type="number" title="" as="color1" key="0"></column>
        <column table="a" column="color2" type="number" title="" as="color2" key="0"></column>
        <column table="a" column="color3" type="number" title="" as="color3" key="0"></column>
        <column table="a" column="color_r" type="number" title="" as="color_r" key="0"></column>
        <column table="a" column="color_g" type="number" title="" as="color_g" key="0"></column>
        <column table="a" column="color_b" type="number" title="" as="color_b" key="0"></column>
        <column table="a" column="color_col" type="string" title="" as="color_col" key="0"></column>
        <column table="a" column="abbr" type="string" title="" as="abbr" key="0"></column>
        <column table="a" column="pr_urist" type="number" title="" comment="1 - отн. к юр.блоку (претензия)" as="pr_urist" key="0"></column>
        <column table="a" column="color_tbl" type="string" title="" comment="подсветка строки в таблице" as="color_tbl" key="0"></column>
        <column table="a" column="pr_ad" type="number" title="" comment="признак статуса ад" as="pr_ad" key="0"></column>
        <column table="a" column="pr_doc" type="number" title="" as="pr_doc" key="0"></column>
        <column table="a" column="pr_pd" type="number" title="" as="pr_pd" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_status" as="a" title="Статус"></table>
      </from>
    </query>
    <query name="is_status_list" order="name" class="1" timestamp="11.10.2018 16:54:10" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <params>
        <param name="n_prizn" type="number" />
      </params>
      <select>
        <column table="is_status" column="status" as="status" key="1" fixed="1" />
        <column table="is_status" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="is_status" as="is_status" title="Статус" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="or" optional="1">
            <call function="and">
              <call function="in">
                <useparam name="n_prizn" />
                <call function="array">
                  <const>0</const>
                  <const>1</const>
                </call>
              </call>
              <call function="gt">
                <call function="nvl0">
                  <column table="is_status" column="pr_pd" />
                </call>
                <const>0</const>
              </call>
            </call>
            <call function="and">
              <call function="in">
                <useparam name="n_prizn" />
                <call function="array">
                  <const>2</const>
                  <const>3</const>
                </call>
              </call>
              <call function="gt">
                <call function="nvl0">
                  <column table="is_status" column="pr_ad" />
                </call>
                <const>0</const>
              </call>
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="is_dog_type_prizn" class="1" order="SUBSTR(NAME,1,8) DESC, id" timestamp="30.01.2020 15:19:41" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_dog_type_prizn" view="1" as="a" />
      </from>
      <order>
        <column column="SUBSTR(NAME" />
        <column column="1" />
        <column column="8)DESC" />
        <column column="id" />
      </order>
    </query>
    <query name="is_dog_type_prizn_ls" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_dog_type_prizn_ls" view="1" as="a" />
      </from>
    </query>
    <query name="is_status_list_insurance" order="name" class="1" timestamp="22.07.2019 11:29:05" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="is_status" column="status" as="status" key="1" fixed="1" />
        <column table="is_status" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="is_status" as="is_status" title="Статус" />
      </from>
      <where>
        <call function="in">
          <column table="is_status" column="status" />
          <const>(0,1,4,5,12,13)</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="is_dog_kind_prizn" class="1" order="id" timestamp="16.07.2021 09:21:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="is_dog_kind_prizn" view="1" as="a" />
      </from>
      <order>
        <column column="id" />
      </order>
    </query>
    <query name="is_dog_kind_prizn_default" class="1" order="id" timestamp="16.07.2021 09:30:02" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <query name="is_dog_kind_prizn" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="id" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="id" />
      </order>
    </query>
    <query name="is_dog_kind_prizn_insurance" class="1" order="id" timestamp="12.04.2023 10:53:36" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <query name="is_dog_kind_prizn" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="id" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="id" />
      </order>
    </query>
    <query name="is_status_list_insurance_147_rep" order="name" class="1" timestamp="28.10.2021 13:34:00" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml" haskeys="1">
      <select>
        <column table="is_status" column="status" as="status" key="1" fixed="1" />
        <column table="is_status" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="is_status" as="is_status" title="Статус" />
      </from>
      <where>
        <call function="in">
          <column table="is_status" column="status" />
          <const>(1,4,5,12,13,30)</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="vr_tree_active_tree" class="1" timestamp="22.03.2017 14:27:11" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree" as="kod_tree" key="1" fixed="1" />
        <call function="()" as="is_active" type="number" title="Строка выводится в отчет" controlType="UICheck" key="0">
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vr_tree" as="a" />
      </from>
      <connect>
        <call function="and">
          <call function="=0">
            <column table="a" column="exclude_row" />
          </call>
          <call function="=0">
            <column table="a" column="dont_show_child" prior="1" />
          </call>
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="a" column="kod_tree" prior="1" />
          </call>
        </call>
      </connect>
      <start>
        <call function="and">
          <call function="=0">
            <column table="a" column="exclude_row" />
          </call>
          <call function="is null">
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </start>
    </query>
    <query name="vr_tree_par_active_tree" class="1" timestamp="22.03.2017 14:11:20" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree" as="kod_tree" key="1" fixed="1" />
        <call function="()" as="is_par_active" type="number" key="0">
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vr_tree" as="a" />
      </from>
      <connect>
        <call function="and">
          <call function="=0">
            <column table="a" column="dont_show_child" prior="1" />
          </call>
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="a" column="kod_tree" prior="1" />
          </call>
        </call>
      </connect>
      <start>
        <call function="and">
          <call function="is null">
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </start>
    </query>
    <query name="vr_tree_back_tree" class="1" timestamp="23.03.2017 19:34:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree.xml" haskeys="1">
      <select>
        <call function="||" as="kod_tree_back_tree" key="1">
          <column table="this" column="kod_tree" />
          <const>'-'</const>
          <column table="this" column="kod_parent" />
        </call>
        <call function="connect_by_root" type="number" as="kod_tree">
          <column table="a" column="kod_tree" />
        </call>
        <column table="a" column="kod_tree" as="kod_parent" />
        <call function="level" as="lvl" />
      </select>
      <from>
        <query name="vr_tree" as="a" />
        <query name="vr_tree" as="kod_tree" join="left outer" dname="vr_tree_back_tree_parents">
          <call function="=">
            <column table="this" column="kod_tree" />
            <column table="kod_tree" column="kod_tree" />
          </call>
        </query>
        <query name="vr_tree" as="kod_parent" join="left outer" dname="vr_tree_back_tree_childs">
          <call function="=">
            <column table="this" column="kod_parent" />
            <column table="kod_parent" column="kod_tree" />
          </call>
        </query>
      </from>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_parent" prior="1" />
            <column table="a" column="kod_tree" />
          </call>
        </call>
      </connect>
    </query>
    <query name="vr_tree_pl_sprav1" timestamp="01.04.2017 01:06:18" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree.xml" haskeys="1">
      <select>
        <column table="kod_tree" column="kod_tree" as="kod_tree" key="0" />
        <column table="kod_parent" column="kod_tree" as="kod_parent" key="0" />
        <column table="vr_tree_back_tree_childs" column="lvl" as="lvl" key="0" />
        <call function="over" as="min_level" type="string" key="0">
          <call function="min">
            <column table="vr_tree_back_tree_childs" column="lvl" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_tree" />
            <column table="kod_sprav_data" column="kod_sprav" />
          </call>
        </call>
        <column table="a" column="kod_tree_sprav" as="kod_tree_sprav" key="1" />
      </select>
      <from>
        <query name="vr_tree_sprav" as="a">
          <link name="kod_sprav_data" as="kod_sprav_data" table="vr_sprav_data" child="vr_tree_sprav" field="kod_sprav_data" parent="vr_sprav_data" back="vr_tree_sprav" />
          <link name="kod_tree" as="kod_parent" table="vr_tree" child="vr_tree_sprav" field="kod_tree" parent="vr_tree" back="vr_tree_sprav">
            <elink name="vr_tree_back_tree_childs" as="vr_tree_back_tree_childs" table="vr_tree_back_tree" child="vr_tree_back_tree" field="kod_parent" parent="vr_tree" back="vr_tree_back_tree_childs">
              <link name="kod_tree" as="kod_tree" table="vr_tree" child="vr_tree_back_tree" field="kod_tree" parent="vr_tree" back="vr_tree_back_tree_parents" />
            </elink>
          </link>
        </query>
      </from>
    </query>
    <query name="vr_tree_pl_sprav" timestamp="01.04.2017 00:34:51" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree" dimension="ipr_kod_tree" as="kod_tree" key="0" />
        <column table="a" column="kod_tree_sprav" as="kod_tree_sprav" key="1" />
        <column table="kod_sprav_data" column="kod_sprav" dimension="ipr_kod_sprav" as="kod_sprav" key="0" />
        <column table="kod_tree_sprav" column="vid" fact="vr_tree_pl_sprav_vid" agg="list" as="vid" key="0" />
      </select>
      <from>
        <query name="vr_tree_pl_sprav1" as="a" />
        <query name="vr_tree_sprav" as="kod_tree_sprav" join="left outer" dname="vr_tree_pl_sprav">
          <link name="kod_sprav_data" as="kod_sprav_data" table="vr_sprav_data" child="vr_tree_sprav" field="kod_sprav_data" parent="vr_sprav_data" back="vr_tree_sprav" />
          <call function="=">
            <column table="this" column="kod_tree_sprav" />
            <column table="kod_tree_sprav" column="kod_tree_sprav" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="min_level" />
          <column table="a" column="lvl" />
        </call>
      </where>
    </query>
    <query name="vr_tree_struct_1" timestamp="14.09.2016 15:32:06" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree_struct.xml">
      <select>
        <const type="number" as="kod_tree_struct" key="0">1</const>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="vr_tree_struct_2" timestamp="14.09.2016 15:32:06" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\vr_tree_struct.xml">
      <select>
        <const type="number" as="kod_tree_struct" key="0">2</const>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="isv_dog_predpr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\alphin.isv_dog_predpr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" column-mandatory="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="153" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_dog_predpr" as="a" />
      </from>
    </query>
    <query name="asv_spr_supply" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\asv_spr_supply.xml" haskeys="1">
      <select>
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" key="1" fixed="1"></column>
        <column table="a" column="supply" type="string" title="Источник питания" as="supply" key="0"></column>
        <column table="a" column="kod_srckind" type="number" as="kod_srckind" key="0"></column>
        <column table="a" column="deleted" type="number" title="" as="deleted" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="asv_spr_supply" as="a"></table>
      </from>
    </query>
    <query name="as_atp_case" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_atp_case.xml" haskeys="1">
      <select>
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_atp_case" as="a" />
      </from>
    </query>
    <query name="as_atp_period" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_atp_period.xml" haskeys="1">
      <select>
        <column table="a" column="kn_atp_period" type="number" title="" as="kn_atp_period" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_atp_period" as="a"></table>
      </from>
    </query>
    <query name="as_atp_state" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_atp_state.xml" haskeys="1">
      <select>
        <column table="a" column="kn_atp_state" type="number" title="" as="kn_atp_state" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="m_user" type="string" title="" as="m_user" key="0"></column>
        <column table="a" column="m_time" type="date" title="" as="m_time" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_atp_state" as="a"></table>
      </from>
    </query>
    <query name="as_contract" class="1" timestamp="11.10.2016 18:24:45" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_contract.xml" haskeys="1">
      <select>
        <column table="a" column="kn_contract" type="number" title="" key="1" as="kn_contract" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" reference="as_request" refcol="kn_request" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" reference="as_contr_kind" refcol="kn_contr_kind" />
        <column table="a" column="kn_user" type="number" title="" as="kn_user" reference="as_user" refcol="kn_user" />
        <column table="a" column="kn_account" type="number" title="" as="kn_account" reference="as_account" refcol="kn_account" />
        <column table="a" column="contr_year" type="number" title="" as="contr_year" />
        <column table="a" column="contr_num" type="number" title="" as="contr_num" />
        <column table="a" column="arc_num" type="number" title="" as="arc_num" />
        <column table="a" column="kn_st_contr" type="number" title="" as="kn_st_contr" reference="as_st_contr" refcol="kn_st_contr" />
        <column table="a" column="contr_sumf" type="number" title="" as="contr_sumf" />
        <column table="a" column="dt_opz_from" type="date" title="" as="dt_opz_from" />
        <column table="a" column="dt_boss_to" type="date" title="" as="dt_boss_to" />
        <column table="a" column="dt_boss_from" type="date" title="" as="dt_boss_from" />
        <column table="a" column="dt_client_proj" type="date" title="" as="dt_client_proj" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="dt_client_to" type="date" title="" as="dt_client_to" />
        <column table="a" column="m_user" type="string" title="" as="m_user" />
        <column table="a" column="m_time" type="date" title="" as="m_time" />
        <column table="a" column="contr_note" type="string" title="" as="contr_note" />
        <column table="a" column="instalment" type="number" title="" as="instalment" />
        <column table="a" column="pays_num" type="number" title="" as="pays_num" />
        <column table="a" column="folder_num" type="string" title="" as="folder_num" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="dts_prior" type="string" title="" as="dts_prior" />
        <column table="a" column="dts_final" type="string" title="" as="dts_final" />
        <column table="a" column="sum1" type="number" title="" as="sum1" />
        <column table="a" column="sum2" type="number" title="" as="sum2" />
        <column table="a" column="sum3" type="number" title="" as="sum3" />
        <column table="a" column="sum4" type="number" title="" as="sum4" />
        <column table="a" column="dts_st1" type="string" title="" as="dts_st1" />
        <column table="a" column="dts_st2" type="string" title="" as="dts_st2" />
        <column table="a" column="dts_st3" type="string" title="" as="dts_st3" />
        <column table="a" column="dts_st4" type="string" title="" as="dts_st4" />
        <column table="a" column="proxy_gen" type="string" title="" as="proxy_gen" />
        <column table="a" column="proxy_fio" type="string" title="" as="proxy_fio" />
        <column table="a" column="file_name" type="string" title="" as="file_name" />
        <column table="a" column="proxy_phone" type="string" title="" as="proxy_phone" />
        <column table="a" column="kd_nds" type="date" title="" as="kd_nds" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="ground" type="string" title="" as="ground" />
        <column table="a" column="dt_cancel" type="date" title="" as="dt_cancel" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" reference="as_off_reason" refcol="kn_off_reason" />
        <column table="a" column="dt_activate" type="date" title="" as="dt_activate" />
        <column table="a" column="note_man" type="string" title="" as="note_man" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" reference="as_contract" refcol="kn_contract" />
        <column table="a" column="fl_old" type="number" title="" as="fl_old" />
        <column table="a" column="dt_client_sign" type="date" title="" as="dt_client_sign" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="kn_creator" type="number" title="" as="kn_creator" reference="as_user" refcol="kn_user" />
        <column table="a" column="dt_confirm" type="date" title="" as="dt_confirm" />
        <column table="a" column="dt_stop_offer" type="date" title="" as="dt_stop_offer" />
        <column table="a" column="dt_into_kido" type="date" title="" as="dt_into_kido" />
        <column table="a" column="dt_to_seal" type="date" title="" as="dt_to_seal" />
        <column table="a" column="dt_sealed" type="date" title="" as="dt_sealed" />
        <column table="a" column="dt_reject_od" type="date" title="" as="dt_reject_od" />
        <column table="a" column="dt_to_perform" type="date" title="" as="dt_to_perform" />
        <column table="a" column="dt_deal" type="date" title="" as="dt_deal" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="as_contract" as="a" />
        <query name="as_account" as="kn_account" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_account" />
            <column table="kn_account" column="kn_account" />
          </call>
        </query>
        <query name="as_contract" as="kn_contract_p" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_contract_p" />
            <column table="kn_contract_p" column="kn_contract" />
          </call>
        </query>
        <query name="as_contr_kind" as="kn_contr_kind" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_contr_kind" />
            <column table="kn_contr_kind" column="kn_contr_kind" />
          </call>
        </query>
        <query name="as_off_reason" as="kn_off_reason" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_off_reason" />
            <column table="kn_off_reason" column="kn_off_reason" />
          </call>
        </query>
        <query name="as_request" as="kn_request" join="left outer" dname="as_contract" title="Заявки">
          <call function="=">
            <column table="a" column="kn_request" />
            <column table="kn_request" column="kn_request" />
          </call>
        </query>
        <query name="as_st_contr" as="kn_st_contr" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_st_contr" />
            <column table="kn_st_contr" column="kn_st_contr" />
          </call>
        </query>
        <query name="as_user" as="kn_user" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_user" />
            <column table="kn_user" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_creator" join="left outer" dname="as_contract">
          <call function="=">
            <column table="a" column="kn_creator" />
            <column table="kn_creator" column="kn_user" />
          </call>
        </query>
      </from>
    </query>
    <query name="as_contr_kind" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_contr_kind.xml" haskeys="1">
      <select>
        <column table="a" column="kn_contr_kind" type="number" title="" comment="ключ типа договора" as="kn_contr_kind" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="тип договора" as="name" key="0"></column>
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" key="0"></column>
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" key="0"></column>
        <column table="a" column="sname" type="string" title="" comment="аббревиатура" as="sname" key="0"></column>
        <column table="a" column="prizn_1c_vid_dog" type="number" title="" comment="вид договора по 1с" as="prizn_1c_vid_dog" key="0"></column>
        <column table="a" column="prizn_1c_tip_dog" type="number" title="" comment="тип договора по 1с" as="prizn_1c_tip_dog" key="0"></column>
        <column table="a" column="kod_tip_dog_1c_abr" type="string" comment="аббревиатура типа договора 1с" as="kod_tip_dog_1c_abr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_contr_kind" as="a"></table>
      </from>
    </query>
    <query name="as_customer" class="1" timestamp="13.05.2020 23:55:41" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_customer.xml" haskeys="1">
      <select>
        <column table="a" column="kn_customer" type="number" title="" comment="ключ клиента" key="1" as="kn_customer" />
        <column table="a" column="name" type="string" title="Наименование" comment="название организации / фио" as="name" />
        <column table="a" column="inn" type="string" title="" comment="инн" as="inn" />
        <column table="a" column="kn_house" type="number" title="" comment="ключ дома или улицы" as="kn_house" />
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" />
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" />
        <column table="a" column="addr_type" type="number" title="" comment="тип юрид. адреса  - улица, дом" as="addr_type" />
        <column table="a" column="d_index" type="number" title="" comment="почтовый индекс - ввод дппр" as="d_index" />
        <column table="a" column="d_house" type="string" title="" comment="aps: дом, введённый дппр" as="d_house" />
        <column table="a" column="d_appart" type="string" title="" comment="квартира, литера и тп - ввод дппр" as="d_appart" />
        <column table="a" column="jurid" type="number" title="" comment="признак юридич лица" as="jurid" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" />
        <column table="a" column="kpp" type="number" title="" comment="кпп" as="kpp" />
        <column table="a" column="kn_hp" type="number" title="" comment="код дома или улицы адреса для переписки" as="kn_hp" />
        <column table="a" column="addr_tp" type="number" title="" comment="тип почт адреса - улица, дом" as="addr_tp" />
        <column table="a" column="d_hp" type="string" title="" comment="дом почт адреса &lt;не из спр&gt;" as="d_hp" />
        <column table="a" column="d_ap" type="string" title="" comment="квартира почт адреса &lt;не из спр&gt;" as="d_ap" />
        <column table="a" column="passw" type="number" title="" comment="пароль клиента" as="passw" />
        <column table="a" column="dt_passw" type="date" title="" comment="дата и время присвоения пароля" as="dt_passw" />
        <column table="a" column="inn_0" type="string" title="" comment="aps: не_исп-ся" as="inn_0" />
        <column table="a" column="id_infsys" type="number" title="" comment="еск: &lt;fk&gt; id информац системы" as="id_infsys" reference="ek_information_system" refcol="id_infsys" />
        <column table="a" column="kn_customer_parent" type="number" title="" comment="еск: &lt;fk&gt; id контрагента-родителя по связи  &quot;главный_офис - филиал&quot;   (у  главного_офиса в этом поле  null)" as="kn_customer_parent" />
        <column table="a" column="id_aperson_director" type="number" title="" comment="еск: &lt;fk&gt; id физ лица - руководителя юр. лица,  либо id владельца объекта, если контрагент - физ.лицо" as="id_aperson_director" reference="era_person" refcol="id_aperson" />
        <column table="a" column="ac_short_name" type="string" title="" comment="еск: аббревиатура наименования" as="ac_short_name" />
        <column table="a" column="ac_allname" type="string" title="" comment="еск: наименование полное" as="ac_allname" />
        <column table="a" column="ac_phone" type="string" title="" comment="еск: № телефона" as="ac_phone" />
        <column table="a" column="ac_mob_phone" type="string" title="" comment="еск: № мобильного телефона" as="ac_mob_phone" />
        <column table="a" column="ac_teletype" type="string" title="" comment="еск: № телетайпа" as="ac_teletype" />
        <column table="a" column="ac_telex" type="string" title="" comment="еск: № телекса" as="ac_telex" />
        <column table="a" column="ac_fax" type="string" title="" comment="еск: № факса" as="ac_fax" />
        <column table="a" column="ac_prizn_rf_phone" type="number" title="" comment="еск: признак: номера телеф-ов д быть в рф формате" as="ac_prizn_rf_phone" />
        <column table="a" column="ac_email" type="string" title="" comment="еск: адрес электр почты" as="ac_email" />
        <column table="a" column="ac_website" type="string" title="" comment="еск: url web-сайта" as="ac_website" />
        <column table="a" column="ac_login_lkk" type="string" title="" comment="еск: логин лкк" as="ac_login_lkk" />
        <column table="a" column="ac_lkk_id" type="string" title="" comment="еск: идентификатор лкк /guid/" as="ac_lkk_id" />
        <column table="a" column="ac_lkk_passw" type="string" title="" comment="еск: пароль лкк" as="ac_lkk_passw" />
        <column table="a" column="ac_egrul_cert_num" type="string" title="" comment="еск: свидетельство о регистрации в егрюл" as="ac_egrul_cert_num" />
        <column table="a" column="ac_egrul_organ" type="string" title="" comment="еск: наимен органа, выдавшего свид-во егрюл" as="ac_egrul_organ" />
        <column table="a" column="ac_egrul_cert_date" type="date" title="" comment="еск: дата выдачи св-ва о рег-ции в егрюл" as="ac_egrul_cert_date" />
        <column table="a" column="ac_okpo" type="string" title="" comment="еск: окпо" as="ac_okpo" />
        <column table="a" column="ac_ogrn" type="string" title="" comment="еск: огрн" as="ac_ogrn" />
        <column table="a" column="ac_snils" type="string" title="" comment="еск: номер снилс - желательно заполнить, если контрагент - физическое лицо" as="ac_snils" />
        <column table="a" column="ac_okfs" type="number" title="" comment="еск: вид собственности /из обще-рф классиф-ра ок 027-99/" as="ac_okfs" />
        <column table="a" column="ac_oktmo" type="number" title="" comment="еск: октмо /из обще-рф классиф-ра ок 033-2005/" as="ac_oktmo" />
        <column table="a" column="ac_kod_spr_okato" type="number" comment="еск: код окато /из plan ks_okato/" as="ac_kod_spr_okato" />
        <column table="a" column="ac_kod_okved" type="number" comment="еск: код оквэд  /из asuse ks_okved/" as="ac_kod_okved" />
        <column table="a" column="ac_kod_otrasl" type="number" comment="еск: код отрасли /из asuse ks_otrasl/" as="ac_kod_otrasl" />
        <column table="a" column="ac_kod_fs" type="number" comment="еск: код формы собственности  /из asuse ks_fs/" as="ac_kod_fs" />
        <column table="a" column="ac_kod_m" type="number" comment="еск: код министерства /из asuse ks_ministry/" as="ac_kod_m" />
        <column table="a" column="ac_uraddr_txt" type="string" title="" comment="еск: юр адрес строкой /форм-ся триггером по коду kn_house из k_house/" as="ac_uraddr_txt" />
        <column table="a" column="ac_kod_d" type="number" comment="еск: код адреса дома физического /из asuse k_house/" as="ac_kod_d" />
        <column table="a" column="ac_fizaddr_txt" type="string" title="" comment="еск: физ адрес строкой /форм-ся триггером по коду ac_kod_d из k_house/" as="ac_fizaddr_txt" />
        <column table="a" column="ac_pochtaddr_txt" type="string" title="" comment="еск: адрес-строкой для переписки /форм-ся триггером по коду kn_hp из k_house/" as="ac_pochtaddr_txt" />
        <column table="a" column="ac_platporaddr_txt" type="string" title="" comment="еск: еск: адрес-строкой в документах /заполняется пользователем/" as="ac_platporaddr_txt" />
        <column table="a" column="ac_prizn_active" type="number" title="" comment="еск: признак активности: 0-активна/1-удалена/2-новая" as="ac_prizn_active" />
        <column table="a" column="ac_prizn_rezident_rf" type="number" title="" comment="еск: признак: 1-резидент рф, 0-нерезидент рф" as="ac_prizn_rezident_rf" />
        <column table="a" column="ac_prizn_vip" type="number" title="" comment="еск: признак vip контрагента:  0 - нормальный, 1 - важный, 2 - vip" as="ac_prizn_vip" />
        <column table="a" column="ac_prizn_network_org" type="number" title="" comment="еск: признак: 1-сетевая организация, 0-несетевая организация" as="ac_prizn_network_org" />
        <column table="a" column="pr_contr_esk_admin" type="number" title="" comment="еск: признак 1/0: 1-проверено администратором ис еск" as="pr_contr_esk_admin" />
        <column table="a" column="u_c" type="string" title="" comment="еск: кто создал" as="u_c" />
        <column table="a" column="d_c" type="date" title="" comment="еск: дата создания" as="d_c" />
        <column table="a" column="d_d" type="date" title="" comment="еск: дата перевода контрагента в архив" as="d_d" />
        <column table="a" column="kn_customer_dbl_parent" type="number" title="" comment="еск:  id контрагента-родителя по связи    &quot;основная строка - дубль&quot;  (у &quot;основной строки&quot; в этом поле null)" as="kn_customer_dbl_parent" reference="as_customer" refcol="kn_customer" />
        <call function="rowid" as="as_customer_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="as_customer" as="a" />
        <query name="as_customer" as="kn_customer_dbl_parent" dname="as_customer_dbl" join="left outer">
          <call function="=">
            <column table="a" column="kn_customer_dbl_parent" />
            <column table="kn_customer_dbl_parent" column="kn_customer" />
          </call>
        </query>
        <query name="era_person" as="id_aperson_director" join="left outer" dname="as_customer">
          <call function="=">
            <column table="a" column="id_aperson_director" />
            <column table="id_aperson_director" column="id_aperson" />
          </call>
        </query>
        <query name="ek_information_system" as="id_infsys" join="left outer" dname="as_customer">
          <call function="=">
            <column table="a" column="id_infsys" />
            <column table="id_infsys" column="id_infsys" />
          </call>
        </query>
      </from>
    </query>
    <query name="as_dfile" class="1" timestamp="12.07.2017 14:45:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_dfile.xml" haskeys="1">
      <select>
        <column table="a" column="kn_dfile" type="number" title="" key="1" as="kn_dfile" />
        <column table="a" column="kn_dkind" type="number" title="" as="kn_dkind" reference="as_dkind" refcol="kn_dkind" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" reference="as_request" refcol="kn_request" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" reference="as_customer" refcol="kn_customer" />
        <column table="a" column="fname" type="string" title="" as="fname" />
        <column table="a" column="doc_id" type="string" title="" as="doc_id" />
        <column table="a" column="dt_put" type="date" title="" as="dt_put" />
        <column table="a" column="dfile" type="blob" title="" as="dfile" />
        <column table="a" column="note" type="string" title="" as="note" />
        <column table="a" column="m_user" type="string" title="" as="m_user" />
        <column table="a" column="m_time" type="date" title="" as="m_time" />
        <column table="a" column="prim" type="string" title="" comment="добавлено для кидо при редактировании доп. скан" as="prim" />
        <column table="a" column="m_user_create" type="string" title="" comment="пользователь,прикрепивший файл" as="m_user_create" />
        <column table="a" column="m_time_create" type="date" title="" comment="дата прикрепления файла" as="m_time_create" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="as_dfile" as="a" />
        <query name="as_customer" as="kn_customer" join="left outer" dname="as_dfile">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="kn_customer" />
          </call>
        </query>
        <query name="as_request" as="kn_request" join="left outer" dname="as_dfile" title="Заявки">
          <call function="=">
            <column table="a" column="kn_request" />
            <column table="kn_request" column="kn_request" />
          </call>
        </query>
        <query name="as_dkind" as="kn_dkind" join="left outer" dname="as_dfile">
          <call function="=">
            <column table="a" column="kn_dkind" />
            <column table="kn_dkind" column="kn_dkind" />
          </call>
        </query>
      </from>
    </query>
    <query name="as_load_kind" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_load_kind.xml" haskeys="1">
      <select>
        <column table="a" column="kn_load_kind" type="number" title="" comment="ключ вида нагрузки" as="kn_load_kind" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование вида нагрузки" as="name" key="0"></column>
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" key="0"></column>
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" key="0"></column>
        <column table="a" column="kn_cons_group" type="number" title="" comment="тип потребителя &lt;группа&gt;" as="kn_cons_group" key="0"></column>
        <column table="a" column="kod_obj_plan" type="number" as="kod_obj_plan" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_load_kind" as="a"></table>
      </from>
    </query>
    <query name="as_load_type" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_load_type.xml" haskeys="1">
      <select>
        <column table="a" column="kn_load_type" type="number" title="" comment="ключ типа заявки" as="kn_load_type" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование типа нагрузки" as="name" key="0" />
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" key="0" />
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" key="0" />
        <column table="a" column="num_sort" type="number" title="" comment="номер для сортировки" as="num_sort" key="0" />
        <column table="a" column="fl_no_ps" type="number" title="" comment="признак &lt;источник не треб&gt;" as="fl_no_ps" key="0" />
        <column table="a" column="fl_tm" type="number" title="" comment="признак мониторинга" as="fl_tm" key="0" />
        <column table="a" column="fl_asked" type="number" title="" comment="флаг &lt;заявленная не 0&gt;" as="fl_asked" key="0" />
        <column table="a" column="fl_existed" type="number" title="" comment="флаг &lt;существующя не 0&gt;" as="fl_existed" key="0" />
        <column table="a" column="fl_sum" type="number" title="" comment="флаг &lt;суммарная нагр не 0&gt;" as="fl_sum" key="0" />
        <column table="a" column="fl_cadnum" type="number" title="" comment="необх-сть кадастр-го номера" as="fl_cadnum" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_load_type" as="a" />
      </from>
    </query>
    <query name="as_region" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_region.xml" haskeys="1">
      <select>
        <column table="a" column="kn_region" type="number" title="" as="kn_region" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_region" as="a"></table>
      </from>
    </query>
    <query name="as_request" title="Заявки" class="1" timestamp="17.10.2018 19:25:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_request.xml" haskeys="1">
      <select>
        <column table="a" column="kn_request" type="number" title="" comment="ключ заявки" column-mandatory="1" as="kn_request" key="1" fixed="1" />
        <column table="a" column="kn_customer" type="number" title="" comment="ключ клиента" column-mandatory="1" as="kn_customer" reference="as_customer" refcol="kn_customer" key="0" />
        <column table="a" column="kn_load_type" type="number" title="" comment="ключ типа заявки" column-mandatory="1" as="kn_load_type" reference="as_load_type" refcol="kn_load_type" key="0" />
        <column table="a" column="kn_load_kind" type="number" title="" comment="ключ вида нагрузки" column-mandatory="1" as="kn_load_kind" reference="as_load_kind" refcol="kn_load_kind" key="0" />
        <column table="a" column="kn_user" type="number" title="" comment="ключ куратора опз" column-mandatory="1" as="kn_user" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="kn_coming_way" type="number" title="" comment="ключ пути поступления" column-mandatory="1" as="kn_coming_way" reference="as_coming_way" refcol="kn_coming_way" key="0" />
        <column table="a" column="kn_service_src" type="number" title="" comment="служба-источник" as="kn_service_src" reference="as_service" refcol="kn_service" key="0" />
        <column table="a" column="link_name" type="string" title="" comment="фио контактного лица" data-size="100" as="link_name" key="0" />
        <column table="a" column="link_phone" type="string" title="" comment="контактный телефон клиента" data-size="50" as="link_phone" key="0" />
        <column table="a" column="kn_house" type="number" title="" comment="ключ дома" column-mandatory="1" as="kn_house" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="addr_aux" type="string" title="" comment="доп данные по адресу" data-size="150" as="addr_aux" key="0" />
        <column table="a" column="num_coming" type="string" title="" comment="номер в службе-источнике" data-size="20" as="num_coming" key="0" />
        <column table="a" column="date_coming" type="date" title="Дата приема заявки" comment="дата регистрации" qv_split="1" column-mandatory="1" as="date_coming" key="0" />
        <column table="a" column="contr_sum" type="number" title="" comment="первонач сумма договора" as="contr_sum" key="0" />
        <column table="a" column="result" type="string" title="" comment="результат" data-size="30" as="result" key="0" />
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" data-size="20" as="m_user" key="0" />
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" key="0" />
        <column table="a" column="addr_type" type="number" title="" comment="вид адресного ключа - улица, дом, объект" as="addr_type" key="0" />
        <column table="a" column="d_house" type="string" title="" comment="дом, введённый дппр" data-size="30" as="d_house" key="0" />
        <column table="a" column="d_appart" type="string" title="" comment="квартира и пр - дппр" data-size="60" as="d_appart" key="0" />
        <column table="a" column="req_year" type="number" title="" comment="год подачи заявки" as="req_year" key="0" />
        <column table="a" column="req_num" type="number" title="Номер заявки" comment="номер заявки" as="req_num" key="0" />
        <column table="a" column="load_point" type="string" title="" comment="точка подключения" data-size="256" as="load_point" key="0" />
        <column table="a" column="kn_st_req" type="number" title="" comment="ключ статуса заявки" column-mandatory="1" as="kn_st_req" reference="as_st_req" refcol="kn_st_req" key="0" />
        <column table="a" column="date_off" type="date" title="" comment="дата аннулирования заявки" as="date_off" key="0" />
        <column table="a" column="fl_arc" type="number" title="" comment="флаг &lt;архив&gt;" column-mandatory="1" as="fl_arc" key="0" />
        <column table="a" column="fl_build" type="number" title="" comment="флаг наличия работ" column-mandatory="1" as="fl_build" key="0" />
        <column table="a" column="kn_off_reason" type="number" title="" comment="ключ причины аннулирования" as="kn_off_reason" reference="as_off_reason" refcol="kn_off_reason" key="0" />
        <column table="a" column="date_arc" type="date" title="" comment="дата архивирования" as="date_arc" key="0" />
        <column table="a" column="file_num" type="string" title="" comment="номер канцелярского дела" data-size="30" as="file_num" key="0" />
        <column table="a" column="dt_write_off" type="date" title="" comment="дата списания" as="dt_write_off" key="0" />
        <column table="a" column="note_arc" type="string" title="" comment="примечание архивариуса" data-size="100" as="note_arc" key="0" />
        <column table="a" column="fl_vip" type="number" title="" comment="флаг vip" column-mandatory="1" as="fl_vip" key="0" />
        <column table="a" column="kn_creator" type="number" title="" comment="ключ создателя" column-mandatory="1" as="kn_creator" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="load_units" type="string" title="" comment="ед изм мощности" data-size="5" as="load_units" key="0" />
        <column table="a" column="kn_region" type="number" title="" comment="ключ региона" column-mandatory="1" as="kn_region" reference="as_region" refcol="kn_region" key="0" />
        <column table="a" column="kn_zone" type="number" title="" comment="ключ - номер зоны" as="kn_zone" key="0" />
        <column table="a" column="kd_zone" type="date" title="" comment="дата принятия коэффициента" as="kd_zone" key="0" />
        <column table="a" column="load_cat1" type="number" title="" comment="нагрузка 1-й категории, ква" column-mandatory="1" as="load_cat1" key="0" />
        <column table="a" column="load_cat2" type="number" title="" comment="нагрузка 2-й категории, ква" column-mandatory="1" as="load_cat2" key="0" />
        <column table="a" column="load_cat3" type="number" title="" comment="нагрузка 3-й категории, ква" column-mandatory="1" as="load_cat3" key="0" />
        <column table="a" column="kd_nds" type="date" title="" comment="дата ввода nds" as="kd_nds" reference="as_nds" refcol="kd_nds" key="0" />
        <column table="a" column="load_ex1" type="number" title="" comment="существ мошность кат1" column-mandatory="1" as="load_ex1" key="0" />
        <column table="a" column="load_ex2" type="number" title="" comment="существ мошность кат2" column-mandatory="1" as="load_ex2" key="0" />
        <column table="a" column="dt_let_created" type="date" title="" comment="дата создания письма 1" as="dt_let_created" key="0" />
        <column table="a" column="load_ex3" type="number" title="" comment="существ мошность кат3" column-mandatory="1" as="load_ex3" key="0" />
        <column table="a" column="dt_let_delivered" type="date" title="" comment="передано клиенту письмо 1" as="dt_let_delivered" key="0" />
        <column table="a" column="doc_list" type="string" title="" comment="список документов" data-size="1000" as="doc_list" key="0" />
        <column table="a" column="dt_pass_up" type="date" title="" comment="дата передачи в уп" as="dt_pass_up" key="0" />
        <column table="a" column="dt_pass_ks" type="date" title="" comment="дата передачи в кс" as="dt_pass_ks" key="0" />
        <column table="a" column="dt_answer_ks" type="date" title="" comment="дата ответа кс" as="dt_answer_ks" key="0" />
        <column table="a" column="dt_pz" type="date" title="" comment="дата &lt;подготовлены ту&gt;" as="dt_pz" key="0" />
        <column table="a" column="dt_pass_od" type="date" title="" comment="дата передачи в од" as="dt_pass_od" key="0" />
        <column table="a" column="dt_ps_ask" type="date" title="" comment="дата запроса см" as="dt_ps_ask" key="0" />
        <column table="a" column="dt_getto_up" type="date" title="" comment="дата поступл к исполнит уп" as="dt_getto_up" key="0" />
        <column table="a" column="dt_query_vs" type="date" title="" comment="дата запроса в вс" as="dt_query_vs" key="0" />
        <column table="a" column="dt_answer_vs" type="date" title="" comment="дата ответа из вс" as="dt_answer_vs" key="0" />
        <column table="a" column="reply_to_custom" type="string" title="" comment="ответ потребителю" data-size="120" as="reply_to_custom" key="0" />
        <column table="a" column="note_el" type="string" title="" comment="комментарий электриков" data-size="500" as="note_el" key="0" />
        <column table="a" column="dt_denial" type="date" title="" comment="дата отказа" as="dt_denial" key="0" />
        <column table="a" column="dt_revision" type="date" title="" comment="дата возврата на доработку" as="dt_revision" key="0" />
        <column table="a" column="dt_to_price" type="date" title="" comment="на оценку принято в эу" as="dt_to_price" key="0" />
        <column table="a" column="dt_priced" type="date" title="" comment="с оценки получено в цок из эу" as="dt_priced" key="0" />
        <column table="a" column="kod_direct" type="number" comment="код района кс или эс" column-mandatory="1" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="guess_sum" type="number" title="" comment="сумма оценки" as="guess_sum" key="0" />
        <column table="a" column="dt_indtar_ask" type="date" title="" comment="послано на индивид тариф" as="dt_indtar_ask" key="0" />
        <column table="a" column="dt_indtar_got" type="date" title="" comment="получен индивид тариф" as="dt_indtar_got" key="0" />
        <column table="a" column="dt_atp_ready" type="date" title="" comment="атп готов &lt;дата&gt;" as="dt_atp_ready" key="0" />
        <column table="a" column="dt_pass_branch" type="date" title="" comment="дата отправки в филиал" as="dt_pass_branch" key="0" />
        <column table="a" column="atp_ask_num" type="string" title="" comment="номер запроса атп" data-size="100" as="atp_ask_num" key="0" />
        <column table="a" column="kn_psd1" type="number" title="" comment="источник питания 1" as="kn_psd1" key="0" />
        <column table="a" column="kn_psd2" type="number" title="" comment="источник питания 2" as="kn_psd2" key="0" />
        <column table="a" column="fl_loss" type="number" title="" comment="признак_убыточности" as="fl_loss" key="0" />
        <column table="a" column="kn_user_eb" type="number" title="" comment="ключ куратора эб" as="kn_user_eb" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="kn_user_tb" type="number" title="" comment="ключ куратора тб" as="kn_user_tb" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="kn_user_od" type="number" title="" comment="ключ куратора од" as="kn_user_od" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="dt_lack_req" type="date" title="" comment="дата отправки wish list клиенту" as="dt_lack_req" key="0" />
        <column table="a" column="dt_lack_put" type="date" title="" comment="сохранена дата отправки wish list" as="dt_lack_put" key="0" />
        <column table="a" column="dt_docs_got" type="date" title="" comment="получен полный пакет документов" as="dt_docs_got" key="0" />
        <column table="a" column="dt_reject_sent" type="date" title="" comment="дата отсылки уведомл об отказе" as="dt_reject_sent" key="0" />
        <column table="a" column="dt_assign_tb" type="date" title="" comment="назначен куратор в технич блоке" as="dt_assign_tb" key="0" />
        <column table="a" column="dt_reject_tb" type="date" title="" comment="дата служ записки об отказе в тб" as="dt_reject_tb" key="0" />
        <column table="a" column="dt_assign_eb" type="date" title="" comment="назначен куратор в экон блоке" as="dt_assign_eb" key="0" />
        <column table="a" column="dt_cost_put" type="date" title="" comment="дата завершения оценки" as="dt_cost_put" key="0" />
        <column table="a" column="dt_estate_contr" type="date" title="" comment="передано на имущест договор" as="dt_estate_contr" key="0" />
        <column table="a" column="dt_corr_tu" type="date" title="" comment="передан на корректировку ту" as="dt_corr_tu" key="0" />
        <column table="a" column="dt_pass_cc" type="date" title="" comment="передан из экон блока в клиент-центр &lt;кроме вынос сетей&gt;" as="dt_pass_cc" key="0" />
        <column table="a" column="dt_reject_eb" type="date" title="" comment="дата отказа в эконом блоке" as="dt_reject_eb" key="0" />
        <column table="a" column="dt_from_ks" type="date" title="" comment="принято в цок из кс &lt;тип  вынос сетей&gt;" as="dt_from_ks" key="0" />
        <column table="a" column="dt_assign_od" type="date" title="" comment="назначен куратор в договорном блоке" as="dt_assign_od" key="0" />
        <column table="a" column="dt_pass_eb" type="date" title="" comment="передано в экономический блок" as="dt_pass_eb" key="0" />
        <column table="a" column="let_num" type="string" title="" comment="номер письма" data-size="30" as="let_num" key="0" />
        <column table="a" column="dt_reply_to_client" type="date" title="" comment="дата ответа потребителю" as="dt_reply_to_client" key="0" />
        <column table="a" column="dt_back_tbcc" type="date" title="" comment="возвращено в цок из тех блока" as="dt_back_tbcc" key="0" />
        <column table="a" column="dt_pass_tbcc" type="date" title="" comment="передано в цок из тех блока" as="dt_pass_tbcc" key="0" />
        <column table="a" column="dt_from_tb" type="date" title="" comment="получено из тех блока" as="dt_from_tb" key="0" />
        <column table="a" column="fl_work_ps" type="number" title="" comment="работы на источнике" as="fl_work_ps" key="0" />
        <column table="a" column="fl_work_net" type="number" title="" comment="работы на распред сети" as="fl_work_net" key="0" />
        <column table="a" column="dt_query_fil" type="date" title="" comment="дата отсылки в филиал или прэс" as="dt_query_fil" key="0" />
        <column table="a" column="dt_answer_fil" type="date" title="" comment="возвращено из филиала или прэс" as="dt_answer_fil" key="0" />
        <column table="a" column="kn_voltage" type="number" title="" comment="ключ уровня напряжения" column-mandatory="1" as="kn_voltage" key="0" />
        <column table="a" column="kn_fin_src" type="number" title="" comment="ключ источника финансирования" column-mandatory="1" as="kn_fin_src" reference="as_fin_src" refcol="kn_fin_src" key="0" />
        <column table="a" column="kn_load_trait" type="number" title="" comment="ключ свойства нагрузки &lt;жилое-нежилое&gt;" column-mandatory="1" as="kn_load_trait" reference="as_load_trait" refcol="kn_load_trait" key="0" />
        <column table="a" column="dt_act_noncontr" type="date" title="" comment="дата акта о бездоговорном пользовании" as="dt_act_noncontr" key="0" />
        <column table="a" column="fl_amnesty" type="number" title="" comment="признак амнистиии" as="fl_amnesty" key="0" />
        <column table="a" column="act_nonc_num" type="string" title="" comment="номер акта о бездог пользовании" data-size="50" as="act_nonc_num" key="0" />
        <column table="a" column="kn_user_atp" type="number" title="" comment="ключ куратора атп в кс" as="kn_user_atp" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="dt_atp_ks" type="date" title="" comment="дата передачи атп из кс" as="dt_atp_ks" key="0" />
        <column table="a" column="reject_sent_num" type="string" title="" comment="номер письма с отказом клиенту" data-size="30" as="reject_sent_num" key="0" />
        <column table="a" column="kod_res" type="number" comment="код рэс филиала" as="kod_res" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kn_dtempl" type="number" title="" comment="код шаблона" as="kn_dtempl" reference="as_dtempl" refcol="kn_dtempl" key="0" />
        <column table="a" column="load_move2" type="number" title="" comment="часть мощности перводимая из кат2 в кат1" as="load_move2" key="0" />
        <column table="a" column="load_move3" type="number" title="" comment="часть мощности переводимая из кат3" as="load_move3" key="0" />
        <column table="a" column="cat_move" type="number" title="" comment="категория перевода мощности из кат3" as="cat_move" key="0" />
        <column table="a" column="kn_load_char" type="number" title="" comment="код характера нагрузки" as="kn_load_char" reference="as_load_char" refcol="kn_load_char" key="0" />
        <column table="a" column="fl_check" type="number" title="" comment="признак контроля" as="fl_check" key="0" />
        <column table="a" column="cad_num" type="string" title="" comment="кадастровый номер" data-size="40" as="cad_num" key="0" />
        <column table="a" column="ad_sum" type="number" title="" comment="стоимость ад с ндс" as="ad_sum" key="0" />
        <column table="a" column="kod_tb_unit" type="number" comment="код отдела тб куда передано" as="kod_tb_unit" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kn_user_cc" type="number" title="" comment="кл. куратора цок иа (&lt;= эб филиала)" as="kn_user_cc" reference="as_user" refcol="kn_user" key="0" />
        <column table="a" column="dt_assign_cc" type="date" title="" comment="назначен куратор в цоке (&lt;= эб филиала)" as="dt_assign_cc" key="0" />
        <column table="a" column="dt_psd1" type="date" title="" comment="дата выбра ип1" as="dt_psd1" key="0" />
        <column table="a" column="dt_pass_res" type="date" title="" comment="передано из тб в рэс &lt;филиал&gt;" as="dt_pass_res" key="0" />
        <column table="a" column="dt_answer_res" type="date" title="" comment="возвращено в тб из рэс &lt;филиал&gt;" as="dt_answer_res" key="0" />
        <column table="a" column="dt_agreed_srs" type="date" title="" comment="согласовано в службе развития сети" as="dt_agreed_srs" key="0" />
        <column table="a" column="fl_agreed_rdu" type="number" title="" comment="признак согласовано в рду &lt;0-1&gt;" as="fl_agreed_rdu" key="0" />
        <column table="a" column="dt_other_psd" type="date" title="" comment="на проверку возм-сти подкл к другому ип" as="dt_other_psd" key="0" />
        <column table="a" column="dt_pass_filcc" type="date" title="" comment="передано из филиала в цок иа" as="dt_pass_filcc" key="0" />
        <column table="a" column="dt_ip_check" type="date" title="" comment="проверено наличие в инвестпрограмме" as="dt_ip_check" key="0" />
        <column table="a" column="fl_ip_cover" type="number" title="" comment="флаг &lt;входит в инвестпрограмму&gt;" as="fl_ip_cover" key="0" />
        <column table="a" column="dt_cost_fil" type="date" title="" comment="выполнена оценка в филиале" as="dt_cost_fil" key="0" />
        <column table="a" column="dt_pass_filod" type="date" title="" comment="передано в од из филиала" as="dt_pass_filod" key="0" />
        <column table="a" column="dt_back_odcc" type="date" title="" comment="возврат из од в цок" as="dt_back_odcc" key="0" />
        <column table="a" column="dt_pass_cceb" type="date" title="" comment="передано в эк упр" as="dt_pass_cceb" key="0" />
        <column table="a" column="psk_ask_num" type="string" title="" comment="запрос в пск №" data-size="50" as="psk_ask_num" key="0" />
        <column table="a" column="dt_psk_ask" type="date" title="" comment="дата запроса в пск" as="dt_psk_ask" key="0" />
        <column table="a" column="psk_answer_num" type="string" title="" comment="ответ из пск №" data-size="50" as="psk_answer_num" key="0" />
        <column table="a" column="dt_psk_answer" type="date" title="" comment="дата ответа из пск" as="dt_psk_answer" key="0" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="fl_anp" type="number" title="" column-mandatory="1" as="fl_anp" key="0" />
        <column table="a" column="numtutz" type="number" title="" as="numtutz" key="0" />
        <column table="a" column="lkkid" type="string" title="" data-size="50" as="lkkid" key="0" />
        <column table="a" column="requestguid" type="string" title="" data-size="50" as="requestguid" key="0" />
        <column table="a" column="kod_vid_ad" type="number" title="" as="kod_vid_ad" reference="is_spr_vid_ad" refcol="kod_vid_ad" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="pr_db" type="number" title="" as="pr_db" key="0" />
        <column table="a" column="fl_rosseti" type="number" title="" comment="Флаг &lt;Исключен из отчета для Россетей&gt;" as="fl_rosseti" key="0" />
        <column table="a" column="addr_connect" type="string" data-size="250" title="" as="addr_connect" key="0" />
        <column table="a" column="num_req" type="string" data-size="50" title="" as="num_req" key="0" />
        <column table="a" column="pr_nonprofit" type="string" data-size="5" title="" as="pr_nonprofit" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="Дата создания" as="d_c" key="0" />
        <call function="||-" as="as_zone_id" type="string" key="0">
          <column table="a" column="kn_zone" />
          <column table="a" column="kd_zone" />
        </call>
        <column table="kn_st_req" column="name" as="name_st_req" title="Статус заявки" qlikview="1" key="0" />
        <column table="kn_region" column="name" as="name_region" title="Регион заявки" qlikview="1" key="0" />
        <column table="kn_customer" column="name" as="name_customer" title="Организация\ФИО клиента" qlikview="1" key="0" />
        <column table="kn_load_type" column="name" as="name_load_type" title="Тип заявки" qlikview="1" key="0" />
        <column table="kn_load_kind" column="name" as="name_load_kind" title="Вид объекта\нагрузки" qlikview="1" key="0" />
        <call function="AS_ADDR_LP_PRINT" as="addr_pris" title="Адрес присоединения" qlikview="1" key="0">
          <column table="a" column="addr_type" />
          <column table="a" column="kn_house" />
          <column table="a" column="d_house" />
          <column table="a" column="d_appart" />
          <column table="a" column="addr_aux" />
        </call>
        <column table="kod_vid_ad" column="name" as="name_vid_ad" title="Категория заявки" qlikview="1" key="0" />
        <column table="kod_vid_ad" column="name_fiz" qlikview="1" as="name_fiz" key="0" />
        <column table="kod_vid_ad" column="n_days" as="n_days" key="0" />
        <call function="date add days" as="date_close" title="Дата завершения заявки" qlikview="1" key="0">
          <column table="a" column="date_coming" />
          <column table="this" column="n_days" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_request" as="a" title="Заявки" />
        <query name="as_customer" as="kn_customer" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="kn_customer" />
          </call>
        </query>
        <query name="as_load_kind" as="kn_load_kind" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_load_kind" />
            <column table="kn_load_kind" column="kn_load_kind" />
          </call>
        </query>
        <query name="as_load_type" as="kn_load_type" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_load_type" />
            <column table="kn_load_type" column="kn_load_type" />
          </call>
        </query>
        <query name="as_st_req" as="kn_st_req" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_st_req" />
            <column table="kn_st_req" column="kn_st_req" />
          </call>
        </query>
        <query name="as_region" as="kn_region" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_region" />
            <column table="kn_region" column="kn_region" />
          </call>
        </query>
        <query name="is_spr_vid_ad" as="kod_vid_ad" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kod_vid_ad" />
            <column table="kod_vid_ad" column="kod_vid_ad" />
          </call>
        </query>
        <query name="c_zayav" join="left outer" as="kod_zayav" dname="as_request">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_tb_unit" join="left outer" dname="as_request" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_tb_unit" />
            <column table="kod_tb_unit" column="kod_direct" />
          </call>
        </query>
        <query name="k_house" as="kn_house" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_house" />
            <column table="kn_house" column="kodd" />
          </call>
        </query>
        <query name="as_user" as="kn_user_cc" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user_cc" />
            <column table="kn_user_cc" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_user" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user" />
            <column table="kn_user" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_user_tb" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user_tb" />
            <column table="kn_user_tb" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_user_eb" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user_eb" />
            <column table="kn_user_eb" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_user_od" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user_od" />
            <column table="kn_user_od" column="kn_user" />
          </call>
        </query>
        <query name="as_user" as="kn_creator" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_creator" />
            <column table="kn_creator" column="kn_user" />
          </call>
        </query>
        <query name="as_nds" as="kd_nds" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kd_nds" />
            <column table="kd_nds" column="kd_nds" />
          </call>
        </query>
        <query name="as_fin_src" as="kn_fin_src" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_fin_src" />
            <column table="kn_fin_src" column="kn_fin_src" />
          </call>
        </query>
        <query name="as_coming_way" as="kn_coming_way" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_coming_way" />
            <column table="kn_coming_way" column="kn_coming_way" />
          </call>
        </query>
        <query name="as_zone" as="as_zone_id" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="as_zone_id" />
            <column table="as_zone_id" column="as_zone_id" />
          </call>
        </query>
        <query name="as_user" as="kn_user_atp" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_user_atp" />
            <column table="kn_user_atp" column="kn_user" />
          </call>
        </query>
        <query name="as_service" as="kn_service_src" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_service_src" />
            <column table="kn_service_src" column="kn_service" />
          </call>
        </query>
        <query name="as_off_reason" as="kn_off_reason" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_off_reason" />
            <column table="kn_off_reason" column="kn_off_reason" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="as_request" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res" join="left outer" dname="as_request" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res" />
            <column table="kod_res" column="kod_direct" />
          </call>
        </query>
        <query name="as_load_trait" as="kn_load_trait" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_load_trait" />
            <column table="kn_load_trait" column="kn_load_trait" />
          </call>
        </query>
        <query name="as_dtempl" as="kn_dtempl" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_dtempl" />
            <column table="kn_dtempl" column="kn_dtempl" />
          </call>
        </query>
        <query name="as_load_char" as="kn_load_char" join="left outer" dname="as_request">
          <call function="=">
            <column table="a" column="kn_load_char" />
            <column table="kn_load_char" column="kn_load_char" />
          </call>
        </query>
      </from>
    </query>
    <query name="as_sert_power" class="1" timestamp="31.07.2019 15:37:16" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_sert_power.xml" haskeys="1">
      <select>
        <column table="a" column="kn_sert_power" type="number" title="" as="kn_sert_power" key="1" fixed="1" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" reference="as_request" refcol="kn_request" key="0" />
        <column table="a" column="kn_service" type="number" title="" as="kn_service" reference="as_service" refcol="kn_service" key="0" />
        <column table="a" column="dt_reg" type="date" title="Дата регистрации" as="dt_reg" key="0" />
        <column table="a" column="act_perform" type="number" title="" as="act_perform" key="0" />
        <column table="a" column="regnum_ks" type="string" title="" as="regnum_ks" key="0" />
        <column table="a" column="dt_reg_ks" type="date" title="" as="dt_reg_ks" key="0" />
        <column table="a" column="dt_delivery" type="date" title="Дата выдачи" as="dt_delivery" key="0" />
        <column table="a" column="m_user" type="string" title="" as="m_user" key="0" />
        <column table="a" column="m_time" type="date" title="" as="m_time" key="0" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" reference="as_atp_case" refcol="kn_atp_case" key="0" />
        <column table="a" column="dt_expire" type="date" title="" as="dt_expire" key="0" />
        <column table="a" column="power" type="number" title="" as="power" key="0" />
        <column table="a" column="power_units" type="string" title="" as="power_units" key="0" />
        <column table="a" column="kn_atp_period" type="number" title="" as="kn_atp_period" reference="as_atp_period" refcol="kn_atp_period" key="0" />
        <column table="a" column="kn_atp_state" type="number" title="" as="kn_atp_state" reference="as_atp_state" refcol="kn_atp_state" key="0" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" reference="as_customer" refcol="kn_customer" key="0" />
        <column table="a" column="kodd" type="number" title="" as="kodd" key="0" />
        <column table="a" column="num_ask" type="string" title="" as="num_ask" key="0" />
        <column table="a" column="dt_ask" type="date" title="" as="dt_ask" key="0" />
        <column table="a" column="atp_load1" type="number" title="" as="atp_load1" key="0" />
        <column table="a" column="atp_load2" type="number" title="" as="atp_load2" key="0" />
        <column table="a" column="atp_load3" type="number" title="" as="atp_load3" key="0" />
        <column table="a" column="fl_feature" type="number" title="" as="fl_feature" key="0" />
        <column table="a" column="feature" type="string" title="" as="feature" key="0" />
        <column table="a" column="load_point" type="string" title="" as="load_point" key="0" />
        <call function="if" as="vid_atp" type="string" comment="альтернатива is_ad_read.f_get_vid_atp" title="Вид АТП" key="0">
          <call function="and">
            <call function="=">
              <column table="kod_atp_dop_info" column="pr_part_akt" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="kn_atp_case" column="kn_atp_case" />
              <const>2</const>
            </call>
          </call>
          <call function="||">
            <column table="kn_atp_case" column="name" />
            <const>' на этап'</const>
          </call>
          <column table="kn_atp_case" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_sert_power" as="a" />
        <query name="as_customer" as="kn_customer" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="kn_customer" />
          </call>
        </query>
        <query name="as_request" as="kn_request" join="left outer" dname="as_sert_power" title="Заявки">
          <call function="=">
            <column table="a" column="kn_request" />
            <column table="kn_request" column="kn_request" />
          </call>
        </query>
        <query name="as_service" as="kn_service" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_service" />
            <column table="kn_service" column="kn_service" />
          </call>
        </query>
        <query name="as_atp_case" as="kn_atp_case" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_atp_case" />
            <column table="kn_atp_case" column="kn_atp_case" />
          </call>
        </query>
        <query name="as_atp_period" as="kn_atp_period" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_atp_period" />
            <column table="kn_atp_period" column="kn_atp_period" />
          </call>
        </query>
        <query name="as_atp_state" as="kn_atp_state" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_atp_state" />
            <column table="kn_atp_state" column="kn_atp_state" />
          </call>
        </query>
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="as_sert_power">
          <call function="=">
            <column table="a" column="kn_sert_power" />
            <column table="kod_atp_dop_info" column="kn_sert_power" />
          </call>
        </query>
      </from>
    </query>
    <query name="as_service" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_service.xml" haskeys="1">
      <select>
        <column table="a" column="kn_service" type="number" title="" comment="ключ службы лэ" as="kn_service" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="название службы лэ" as="name" key="0"></column>
        <column table="a" column="f_group" type="number" title="" comment="признак группировки" as="f_group" key="0"></column>
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" key="0"></column>
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи " as="m_time" key="0"></column>
        <column table="a" column="req_author" type="number" title="" comment="служба - заказчик справки на мощность" as="req_author" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_service" as="a"></table>
      </from>
    </query>
    <query name="as_spr_contract_sum" class="1" timestamp="28.03.2019 12:09:39" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_spr_contract_sum.xml" haskeys="1">
      <select>
        <column table="a" column="pr_sum" type="number" column-mandatory="1" title="" comment="Признак предварит. ст-сти договора" as="pr_sum" key="1" fixed="1" />
        <column table="a" column="name_pr" type="string" data-size="250" title="" comment="Наименование признака" as="name_pr" key="0" />
        <column table="a" column="prior_v" type="number" title="" comment="Порядок вывода" as="prior_v" key="0" />
        <column table="a" column="kod_spr_rosseti" type="number" comment="код по справочнику Россетей &quot;Тип применяемого тарифа&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="name_spr_rosseti" type="string" data-size="250" title="" comment="наименование по справочнику Россетей &quot;Тип применяемого тарифа&quot;" as="name_spr_rosseti" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_spr_contract_sum" as="a" />
      </from>
    </query>
    <query name="as_st_req" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_st_req.xml" haskeys="1">
      <select>
        <column table="a" column="kn_st_req" type="number" title="" comment="ключ статуса заявки" as="kn_st_req" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование статуса заявки" as="name" key="0"></column>
        <column table="a" column="sname" type="string" title="" comment="краткое наименвание статуса" as="sname" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_st_req" as="a"></table>
      </from>
    </query>
    <query name="as_voltage" class="1" timestamp="22.07.2016 00:55:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_voltage.xml" haskeys="1">
      <select>
        <column table="a" column="kn_voltage" type="number" title="" comment="ключ уровня напряжения" as="kn_voltage" key="1" fixed="1" />
        <column table="a" column="voltage" type="number" title="Значение" comment="уровень напряжения" as="voltage" key="0" />
        <column table="a" column="m_user" type="string" title="" comment="запись добавил/изменил" as="m_user" key="0" />
        <column table="a" column="m_time" type="date" title="" comment="дата создания/изменения записи" as="m_time" key="0" />
        <column table="a" column="name_kr" type="string" title="Наименование" as="name_kr" key="0" />
        <column table="a" column="kod_vol" type="number" as="kod_vol" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_voltage" as="a" />
      </from>
    </query>
    <query name="as_zone" class="1" timestamp="30.04.2019 19:11:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\as_zone.xml" haskeys="1">
      <select>
        <column table="a" column="kn_zone" type="number" column-mandatory="1" title="" as="kn_zone" key="1" fixed="1" />
        <column table="a" column="kd_zone" type="date" column-mandatory="1" title="" as="kd_zone" key="0" />
        <column table="a" column="factor" type="number" column-mandatory="1" title="" as="factor" key="0" />
        <column table="a" column="m_user" type="string" data-size="20" title="" as="m_user" key="0" />
        <column table="a" column="m_time" type="date" title="" as="m_time" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="as_zone" as="a" />
      </from>
    </query>
    <query name="buh_akts" class="1" timestamp="03.09.2018 12:34:53" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\buh_akts.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="идентификатор строки" as="kod" key="1" fixed="1" />
        <column table="a" column="pr_contr" type="number" title="" comment="признак дог присоед(1-прис,0-подряд)" as="pr_contr" key="0" />
        <column table="a" column="kod_kr" type="number" comment="уникальный код контрагента" as="kod_kr" key="0" />
        <column table="a" column="kod_dog" type="number" comment="уникальный код договора" as="kod_dog" key="0" />
        <column table="a" column="kod_vip_dog" type="number" comment="уникальный код документа" as="kod_vip_dog" key="0" />
        <column table="a" column="kod_direct" type="number" comment="структурное подразд(организация)" as="kod_direct" key="0" />
        <column table="a" column="kod_budget" type="number" comment="статья пдфс(код из спр.бюджета)" as="kod_budget" key="0" />
        <column table="a" column="kod_smet" type="number" comment="статья сметы(код из справ затрат)" as="kod_smet" key="0" />
        <column table="a" column="num_doc" type="string" title="" comment="№ плат документа(вх.номер)" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата документа(вх.номер)" as="dat_doc" key="0" />
        <column table="a" column="vid_rab" type="string" title="" comment="вид работы" as="vid_rab" key="0" />
        <column table="a" column="prizn_zakr" type="number" title="" comment="признак закрытия аванса" as="prizn_zakr" key="0" />
        <column table="a" column="sum_akt" type="number" title="" comment="сумма акта" as="sum_akt" key="0" />
        <column table="a" column="nds" type="number" title="" comment="сумма ндс" as="nds" key="0" />
        <column table="a" column="bez_nds" type="number" title="" comment="сумма без ндс" as="bez_nds" key="0" />
        <column table="a" column="proc" type="number" title="" comment="% ндс" as="proc" key="0" />
        <column table="a" column="dat_copy_kido" type="date" title="" comment="дата копирования в кидо" as="dat_copy_kido" key="0" />
        <column table="a" column="dat_m_copy" type="date" title="" comment="дата принятия корректировки в кидо" as="dat_m_copy" key="0" />
        <column table="a" column="dat_buh" type="date" title="Дата принятия акта бухгалтерией" comment="дата принятия акта бухгалтерией" as="dat_buh" key="0" />
        <column table="a" column="buh_id" type="string" title="" comment="уникальный номер 1-с акта" as="buh_id" key="0" />
        <column table="a" column="dat_sys" type="date" title="" comment="дата появления записи в хранилище" as="dat_sys" key="0" />
        <column table="a" column="polzov" type="string" title="" comment="кем создана запись" as="polzov" key="0" />
        <column table="a" column="dat_m" type="date" title="Дата корректировки акта в 1С" comment="дата корректировки в 1С" as="dat_m" key="0" />
        <column table="a" column="num_ip" type="string" title="" comment="номер инвестпрограммы" as="num_ip" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="полное наименованеи" as="full_name" key="0" />
        <column table="a" column="inn" type="string" title="" comment="инн" as="inn" key="0" />
        <column table="a" column="kpp" type="string" title="" comment="кпп" as="kpp" key="0" />
        <column table="a" column="num_dog" type="string" title="" comment="уник номера договора например,10-1325" as="num_dog" key="0" />
        <column table="a" column="num_dog_zayav" type="string" title="" comment="номере договора контрагента (например, о/104/2р/3302)" as="num_dog_zayav" key="0" />
        <column table="a" column="deb_sch" type="string" title="" comment="дебет счет" as="deb_sch" key="0" />
        <column table="a" column="deb_sub_sch" type="string" title="" comment="дебет суб счет" as="deb_sub_sch" key="0" />
        <column table="a" column="kr_sch" type="string" title="" comment="кредит счет" as="kr_sch" key="0" />
        <column table="a" column="kr_sub_sch" type="string" title="" comment="кредит суб счет" as="kr_sub_sch" key="0" />
        <column table="a" column="deb_sch_nds" type="string" title="" comment="ндс дебет счет" as="deb_sch_nds" key="0" />
        <column table="a" column="deb_sub_sch_nds" type="string" title="" comment="ндс дебет суб счет" as="deb_sub_sch_nds" key="0" />
        <column table="a" column="kr_sch_nds" type="string" title="" comment="ндс кредит счет" as="kr_sch_nds" key="0" />
        <column table="a" column="kr_sub_sch_nds" type="string" title="" comment="ндс кредит суб счет" as="kr_sub_sch_nds" key="0" />
        <column table="a" column="buh_id_kr" type="string" title="" comment="уникальный номер контр" as="buh_id_kr" key="0" />
        <column table="a" column="buh_id_dog" type="string" title="" comment="уникальный номер дог-ра" as="buh_id_dog" key="0" />
        <column table="a" column="kod_spr_doc" type="number" comment="код док-та из справочника док-тов" as="kod_spr_doc" key="0" />
        <column table="a" column="kod_vid_zatrat" type="string" comment="код вида затрат (субконто дебет)" as="kod_vid_zatrat" key="0" />
        <column table="a" column="name_vid_zatrat" type="string" title="" comment="наименование вида затрат" as="name_vid_zatrat" key="0" />
        <column table="a" column="pr_rash" type="number" title="" comment="1-расход,0 -доход" as="pr_rash" key="0" />
        <column table="a" column="name_direct" type="string" title="" comment="наим структурного подразделения" as="name_direct" key="0" />
        <column table="a" column="dat_del" type="date" title="Дата удаления акта в 1С" comment="дата удаления акта в 1-с" as="dat_del" key="0" />
        <column table="a" column="num_doc_buh" type="string" title="" comment="номер акта сформ.автом.в 1-с" as="num_doc_buh" key="0" />
        <column table="a" column="vid_oper" type="string" title="" comment="вид операции" as="vid_oper" key="0" />
        <column table="a" column="str_buh_id" type="string" title="" comment="уникальный номер 1-с табличной разбивки акта" as="str_buh_id" key="0" />
        <column table="a" column="kod_period" type="number" comment="уникальный код этапа работ" as="kod_period" key="0" />
        <column table="a" column="kod_tip_dog" type="string" comment="код типа договора (для актов по ад)" as="kod_tip_dog" key="0" />
        <column table="a" column="tip_dog" type="string" title="" comment="тип  договора (для актов по ад)" as="tip_dog" key="0" />
        <column table="a" column="kod_vid_dog" type="string" comment="код вида договора (для актов по ад)" as="kod_vid_dog" key="0" />
        <column table="a" column="vid_dog" type="string" title="" comment="вид договора(для актов по ад)" as="vid_dog" key="0" />
        <column table="a" column="date_copy_ipro" type="date" title="" comment="дата копирования в инвестпро" as="date_copy_ipro" key="0" />
        <column table="a" column="date_korrect_ipro" type="date" title="" comment="дата учета корректировки в инвестпро" as="date_korrect_ipro" key="0" />
        <column table="a" column="date_del_ipro" type="date" title="" comment="дата учета удаления в инвестпро" as="date_del_ipro" key="0" />
        <column table="a" column="num_doc_sf" type="string" title="" comment="номер счет/фактуры" as="num_doc_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="" comment="дата счет/фактуры" as="dat_sf" key="0" />
        <column table="a" column="kodtitul_ip" type="string" title="" comment="редактируемое поле для записи титула ип в инвестпро" as="kodtitul_ip" key="0" />
        <column table="a" column="deb_sum_akt" type="number" title="" comment="сумма деб оборотв дт 08,07,10.14,10.15(поступление)" as="deb_sum_akt" key="0" />
        <column table="a" column="kr_sum_akt" type="number" title="" comment="сумма кред оборотв кт 08,07,10.14,10.15(выбытие)" as="kr_sum_akt" key="0" />
        <column table="a" column="num_ip_out" type="string" title="" comment="титул с которого перенесли в другой титул" as="num_ip_out" key="0" />
        <column table="a" column="vid_rab_out" type="string" title="" comment="вид работ с которой перенесли в другой титул" as="vid_rab_out" key="0" />
        <column table="a" column="kod_vid_zatrat_out" type="string" comment="код статьи затрат с которой перенесли в другой титул" as="kod_vid_zatrat_out" key="0" />
        <column table="a" column="name_vid_zatrat_out" type="string" title="" comment="наименование статьи затрат с которой перенесли в другой титул" as="name_vid_zatrat_out" key="0" />
        <column table="a" column="deb_subconto" type="string" title="" comment="тип справочника: основные средства, номенклатура,подразделения" as="deb_subconto" key="0" />
        <column table="a" column="deb_subconto_name" type="string" title="" comment="название аналитики" as="deb_subconto_name" key="0" />
        <column table="a" column="deb_subconto_cod" type="string" title="" comment="код аналитики" as="deb_subconto_cod" key="0" />
        <column table="a" column="deb_subconto_id" type="string" title="" comment="id аналитики" as="deb_subconto_id" key="0" />
        <column table="a" column="kr_subconto" type="string" title="" comment="тип справочника: основные средства, номенклатура,подразделения" as="kr_subconto" key="0" />
        <column table="a" column="kr_subconto_name" type="string" title="" comment="название аналитики" as="kr_subconto_name" key="0" />
        <column table="a" column="kr_subconto_cod" type="string" title="" comment="код аналитики" as="kr_subconto_cod" key="0" />
        <column table="a" column="kr_subconto_id" type="string" title="" comment="id аналитики" as="kr_subconto_id" key="0" />
        <column table="a" column="kod_dog_tmp" type="number" as="kod_dog_tmp" key="0" />
        <column table="a" column="kod_kr_tmp" type="number" as="kod_kr_tmp" key="0" />
        <column table="a" column="uid_cod" type="string" title="" comment="код уид" as="uid_cod" key="0" />
        <column table="a" column="pr_del_kido" type="number" title="" comment="если удалили атп в кидо" as="pr_del_kido" key="0" />
        <column table="a" column="name_direct_org" type="string" title="" comment="организации с проведенного документ" as="name_direct_org" key="0" />
        <column table="a" column="name_subject_federation" type="string" as="name_subject_federation" key="0" />
        <column table="kod_titul_ip" column="kod_titul_ip" as="kod_titul_ip" key="0" />
        <call as="num_ip_nvl" function="nvl" key="0">
          <column table="a" column="num_ip" />
          <column table="a" column="num_ip_out" />
        </call>
        <call function="replace" as="kr_sch_c" key="0">
          <column table="this" column="kr_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="deb_sch_c" key="0">
          <column table="this" column="deb_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="kr_sub_sch_c" key="0">
          <column table="this" column="kr_sub_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <call function="replace" as="deb_sub_sch_c" key="0">
          <column table="this" column="deb_sub_sch" />
          <const>'.Ф'</const>
          <const>''</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="buh_akts" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="buh_akts" title="Титулы">
          <call function="=">
            <column table="this" column="num_ip_nvl" />
            <column table="kod_titul_ip" column="tit_num_new" />
          </call>
        </query>
      </from>
    </query>
    <query name="buh_akt_vip_dog" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\buh_akt_vip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_buh_akts" type="number" comment="код строки бух.акта" as="kod_buh_akts"></column>
        <column table="a" column="kod_vip_dog" type="number" comment="код акта кидо" as="kod_vip_dog" reference="is_vip_dog" refcol="kod_vip_dog"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m"></column>
        <column table="a" column="summa" type="number" title="" comment="зачтенная сумма" as="summa"></column>
        <column table="a" column="summa_bez_nds" type="number" title="" comment="зачтенная сумма без ндс" as="summa_bez_nds"></column>
        <call function="rowid" as="buh_akt_vip_dog_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="buh_akt_vip_dog" as="a"></table>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" dname="buh_akt_vip_dog" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog"></column>
            <column table="kod_vip_dog" column="kod_vip_dog"></column>
          </call>
        </query>
        <query name="buh_akts" as="kod_buh_akts" join="left outer" dname="buh_akt_vip_dog">
          <call function="=">
            <column table="a" column="kod_buh_akts"></column>
            <column table="kod_buh_akts" column="kod"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="buh_reestr_kz_ad_ofz" class="1" timestamp="09.06.2017 17:25:49" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\buh_reestr_kz_ad_ofz.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="string" title="" key="1" as="kod" />
        <column table="a" column="pr_str" type="number" title="" dimension="pr_str" as="pr_str" />
        <column table="a" column="col_1" type="string" title="" as="col_1" />
        <column table="a" column="col_2" type="string" title="" as="col_2" />
        <column table="a" column="period" type="number" title="" dimension="year" as="period" />
        <column table="a" column="opl_vsego" type="number" title="" is-fact="1" agg="sum" fact="br_kz_ad_ofz_opl_vsego" as="opl_vsego" />
        <column table="a" column="akts_vsego" type="number" title="" is-fact="1" agg="sum" fact="br_kz_ad_ofz_akts_vsego" as="akts_vsego" />
        <column table="a" column="kz_start" type="number" title="" agg="sum" is-fact="1" fact="br_kz_ad_ofz_kz_start" as="kz_start" />
        <column table="a" column="opl" type="number" title="" is-fact="1" agg="sum" fact="br_kz_ad_ofz_opl" as="opl" />
        <column table="a" column="storno" type="number" title="" agg="sum" is-fact="1" fact="br_kz_ad_ofz_storno" as="storno" />
        <column table="a" column="kz_end" type="number" title="" agg="sum" is-fact="1" fact="br_kz_ad_ofz_kz_end" as="kz_end" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="buh_reestr_kz_ad_ofz" as="a" />
      </from>
    </query>
    <query name="cspr_query" class="1" title="Тип заявки" timestamp="11.10.2018 00:26:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\cspr_query.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_query" type="number" column-mandatory="1" comment="ID" as="kod_spr_query" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Тип заявки" comment="наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Тип заявки" comment="абревиатура" as="abbr" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="?" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" key="0" />
        <column table="a" column="kod_spr_stage" type="number" comment="код этапа FK NAME, CSPR_STAGE, KOD_SPR_STAGE, KOD_SPR_STAGE" as="kod_spr_stage" reference="cspr_stage_zayav" refcol="kod_spr_stage" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код организации FK NAME, ASUSE.KR_ORG,  KODP, KODP" as="kodp" key="0" />
        <column table="a" column="kod_spr_zayav" type="number" comment="Вид заявки FK NAME, C_SPR_ZAYAV, KOD_SPR_ZAYAV, KOD_SPR_ZAYAV" as="kod_spr_zayav" key="0" />
        <column table="a" column="pr_mega" type="number" title="" comment="признак заявок на межевание" as="pr_mega" key="0" />
        <column table="a" column="pr_new_zpr" type="number" title="" comment="признак для нового паспорта" as="pr_new_zpr" key="0" />
        <column table="a" column="count_day" type="number" title="" comment="Кол-во дней на выполнение" as="count_day" key="0" />
        <column table="a" column="pr_not_connect" type="number" title="" comment="признак заявок вне присоединения" as="pr_not_connect" key="0" />
        <column table="a" column="dat_del" type="date" title="" comment="дата удаления заявки" as="dat_del" key="0" />
        <column table="a" column="pr_vvod_obj" type="number" title="" comment="признак 1-на данную заявку вводятся объекты" as="pr_vvod_obj" key="0" />
        <column table="a" column="kod_emp_def" type="number" comment="сотрудник-исполнитель по умолчанию (ФК???)" as="kod_emp_def" key="0" />
        <column table="a" column="pr_exists_limit" type="number" title="" comment="признак существующего лимита" as="pr_exists_limit" key="0" />
        <column table="a" column="kod_passp_type" type="number" comment="тип создаваемого паспорта FK NAME, QS_PASSP_TYPE, KOD, KOD_PASSP_TYPE" as="kod_passp_type" reference="qs_passp_type" refcol="kod" key="0" />
        <column table="a" column="has_projects_info" type="number" title="" comment="признак ввода информации по проектам в заяке" as="has_projects_info" key="0" />
        <column table="a" column="actual_only_with_ds" type="number" title="" comment="признак того что документ по заявке должен быть прикреплен к соответвующему д/с для учета в расчетах" as="actual_only_with_ds" key="0" />
        <column table="a" column="shab_rnum" type="string" title="" comment="префикс для входящих документов" as="shab_rnum" key="0" />
        <column table="a" column="name_control" type="string" title="" comment="Название контрола, для вставки в карточку завки" as="name_control" key="0" />
        <column table="a" column="pr_vvod_obj_s" type="number" title="" comment="Признак 1 - вводить существующую нагрузку" as="pr_vvod_obj_s" key="0" />
        <column table="a" column="pr_vvod_obj_d" type="number" title="" comment="Признак 1 - вводить доп. нагрузку" as="pr_vvod_obj_d" key="0" />
        <column table="a" column="pr_kc" type="number" title="" comment="Признак, что заявка для Клиентского центра" as="pr_kc" key="0" />
        <column table="a" column="kod_parent" type="number" comment="для дочерних заявок например доп.соглашения на договор" as="kod_parent" key="0" />
        <column table="a" column="kod_sap" type="string" comment="Код САП" as="kod_sap" key="0" />
        <column table="a" column="pr_vo" type="number" title="" as="pr_vo" key="0" />
        <column table="a" column="pr_deafault_vo" type="number" title="" as="pr_deafault_vo" key="0" />
        <column table="a" column="pr_show_c" type="number" title="" comment=" 1 - Показывать изменяемую мощность" as="pr_show_c" key="0" />
        <column table="a" column="pr_hide_d" type="number" title="" comment="1 - скрывать заявленную мощность" as="pr_hide_d" key="0" />
        <column table="a" column="pr_generation" type="number" title="" as="pr_generation" key="0" />
        <column table="a" column="pr_need_parent" type="number" title="" as="pr_need_parent" key="0" />
        <column table="a" column="pr_virtual" type="number" title="" as="pr_virtual" key="0" />
        <column table="a" column="chanhge_name_d" type="string" title="" as="chanhge_name_d" key="0" />
        <column table="a" column="pr_minus" type="number" title="" as="pr_minus" key="0" />
        <column table="a" column="pr_need_s" type="number" title="" as="pr_need_s" key="0" />
        <column table="a" column="pr_need_d" type="number" title="" as="pr_need_d" key="0" />
        <column table="a" column="pr_move_object" type="number" title="" as="pr_move_object" key="0" />
        <column table="a" column="pr_lgot" type="number" title="" as="pr_lgot" key="0" />
        <column table="a" column="pr_dat_epu" type="number" title="" as="pr_dat_epu" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="cspr_query" as="a" title="Тип заявки" />
        <query name="cspr_stage_zayav" as="kod_spr_stage" join="left outer" dname="cspr_query" title="Тип заявки">
          <call function="=">
            <column table="a" column="kod_spr_stage" />
            <column table="kod_spr_stage" column="kod_spr_stage" />
          </call>
        </query>
        <query name="qs_passp_type" as="kod_passp_type" join="left outer" dname="cspr_query">
          <call function="=">
            <column table="a" column="kod_passp_type" />
            <column table="kod_passp_type" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="cspr_stage_zayav" class="1" title="Тип заявки" timestamp="15.11.2018 15:26:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\cspr_stage_zayav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_stage" type="number" column-mandatory="1" comment="код этапа" key="1" as="kod_spr_stage" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="наименование" as="name" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" comment="абревиатура" as="abbr" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="pr_show" type="number" title="" comment="1-показывать для выбора,0-не показывать для данной ЭС" as="pr_show" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="cspr_stage_zayav" as="a" title="Тип заявки" />
      </from>
    </query>
    <query name="c_akt" title="Акты по выполнению" class="1" timestamp="19.10.2017 18:45:27" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_akt.xml" haskeys="1">
      <select>
        <column table="a" column="kod_akt" type="number" as="kod_akt" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="dat_akt" type="date" title="Дата акта" is-fact="1" agg="max" dimension="ipr_dat" is-final-dimension="1" is-private-dimension="1" as="dat_akt" fact="c_akt_dat_akt" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="sum_akt" type="number" title="Сумма акта" is-fact="1" agg="sum" as="sum_akt" fact="c_akt_sum_akt" key="0" />
        <column table="a" column="num_akt" type="string" title="" as="num_akt" key="0" />
        <column table="a" column="tax" type="number" title="" comment="% ндс" as="tax" key="0" />
        <column table="a" column="nal" type="number" title="" comment="сумма налога" as="nal" key="0" />
        <column table="a" column="vid_akt" type="number" title="" comment="0 -ден,1-имущ,2-дпп" as="vid_akt" key="0" />
        <call function="if" as="vid_akt_name" title="Вид акта" type="string" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="vid_akt" />
            <const>0</const>
          </call>
          <const>'Денежный'</const>
          <call function="if" as="vid_akt_name" title="Вид акта" type="string">
            <call function="=">
              <column table="a" column="vid_akt" />
              <const>1</const>
            </call>
            <const>'Имущественный'</const>
            <call function="if" as="vid_akt_name" title="Вид акта" type="string">
              <call function="=">
                <column table="a" column="vid_akt" />
                <const>3</const>
              </call>
              <const>'Без оплаты'</const>
              <const>'Неопределенено'</const>
            </call>
          </call>
        </call>
        <call function="date to char" as="dat_akt_str" is-fact="1" fact="c_akt_dat_akt_str" agg="stragg" key="0">
          <column table="a" column="dat_akt" />
        </call>
        <call function="-nvl" as="sum_akt_bn" is-fact="1" agg="sum" fact="c_akt_sum_akt_bn" key="0">
          <column table="this" column="sum_akt" />
          <column table="this" column="nal" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_akt" as="a" title="Акты по выполнению">
          <link name="kod_dog" dimension="1" as="kod_dog" table="is_dop_contract" child="c_akt" field="kod_dog" parent="is_dop_contract" back="c_akt" title="Абонентские договоры">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_ipr" dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
            <dimlink name="kod_atp_dop_info" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="c_akt" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_akt_opl" class="1" timestamp="21.10.2017 23:15:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_akt_opl.xml" haskeys="1">
      <select>
        <call function="rowid" as="kod_akt_opl" key="1" />
        <column table="a" column="kod_akt" type="number" as="kod_akt" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="c_opl" refcol="kod_opl" />
        <column table="a" column="opl" type="number" title="" comment="сумма по акту" is-fact="1" agg="sum" as="opl" fact="c_akt_opl_opl" />
        <column table="a" column="nal" type="number" title="" comment="в т.ч. ндс (% считать от  осн.оплаты)" as="nal" />
        <call function="-nvl" as="opl_bn" is-fact="1" agg="sum" fact="c_akt_opl_opl_bn">
          <column table="this" column="opl" />
          <column table="this" column="nal_akt" />
        </call>
        <column table="a" column="nal_akt" type="number" title="" comment="в т.ч. ндс" as="nal_akt" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="c_akt_opl" as="a">
          <link name="kod_akt" dimension="1" as="kod_akt" table="c_akt" child="c_akt_opl" field="kod_akt" parent="c_akt" back="c_akt_opl" title="Акты по выполнению">
            <dimlink name="kod_dop_contract" dimension="1" />
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_ipr" dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
            <dimlink name="kod_atp_dop_info" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_opl" is-final-dimension="1" is-private-dimension="1" dimension="1" as="kod_opl" table="c_opl" child="c_akt_opl" field="kod_opl" parent="c_opl" back="c_akt_opl" title="Оплаты">
            <dimlink name="ipr_dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="c_akt" as="kod_akt" join="left outer" dname="c_akt_opl" title="Акты по выполнению">
          <call function="=">
            <column table="a" column="kod_akt" />
            <column table="kod_akt" column="kod_akt" />
          </call>
        </query>
        <query name="c_opl" as="kod_opl" join="left outer" dname="c_akt_opl" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_debet" title="График оплат" class="1" timestamp="21.07.2020 19:11:08" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_debet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb" type="number" key="1" title="" as="kod_deb" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" />
        <column table="a" column="pr_obr" type="number" title="" as="pr_obr" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" />
        <column table="a" column="mes" type="number" title="" as="mes" />
        <column table="a" column="god" type="number" title="" as="god" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="is_creditors" refcol="e_code" />
        <column table="a" column="num_pl" type="string" title="" as="num_pl" />
        <column table="a" column="rs" type="string" title="" as="rs" />
        <column table="a" column="vist_pl" type="number" title="" as="vist_pl" />
        <column table="a" column="nachisl" type="number" title="Начислено" is-fact="1" agg="sum" as="nachisl" fact="c_debet_nachisl" />
        <column table="a" column="nds" type="number" title="Начислено НДС" is-fact="1" agg="sum" as="nds" fact="c_debet_nds" />
        <call function="+nvl" as="vsego" is-fact="1" agg="sum" fact="c_debet_vsego">
          <column table="this" column="nachisl" />
          <column table="this" column="nds" />
        </call>
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" />
        <column table="a" column="pr_perep" type="number" title="" as="pr_perep" />
        <column table="a" column="pr_mor" type="number" title="" as="pr_mor" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" />
        <column table="a" column="pinn" type="string" title="" as="pinn" />
        <column table="a" column="psch1" type="string" title="" as="psch1" />
        <column table="a" column="lic_sch" type="string" title="" as="lic_sch" />
        <column table="a" column="prich_perep" type="string" title="" as="prich_perep" />
        <column table="a" column="kodbpol_old" type="number" title="" as="kodbpol_old" />
        <column table="a" column="kodbpl_old" type="number" title="" as="kodbpl_old" />
        <column table="a" column="dcalc_peni" type="date" title="" as="dcalc_peni" />
        <column table="a" column="promezhut" type="number" title="" as="promezhut" />
        <column table="a" column="platel" type="number" title="" as="platel" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="kod_akt" type="number" as="kod_akt" reference="c_akt" refcol="kod_akt" />
        <column table="a" column="count_day" type="number" title="" comment="кол-во дней/месяцев" as="count_day" />
        <column table="a" column="prizn_day" type="number" title="" comment="1-дни,2-месяцы" as="prizn_day" />
        <column table="a" column="from_dat" type="number" title="" comment="0-даты договора,1-даты акта тп, 2-даты исполнения п.3.2.2.дог-ра,3-со дня подписания сторонами акта" as="from_dat" />
        <column table="a" column="kod_parent" type="number" comment="код доп. соглашения с кот.создана строка" as="kod_parent" />
        <column table="a" column="pr_work_days" type="number" title="" comment="1 - рабочие дни" as="pr_work_days" />
        <column table="a" column="np_mes" type="number" title="" comment="№ месяца по порядку в графике платежей" as="np_mes" />
        <column table="a" column="n_stage" type="number" title="" comment="№ этапа (арабский)" as="n_stage" />
        <column table="a" column="proc_shab" type="number" title="" comment="% оплаты из шаблона" as="proc_shab" />
        <column table="a" column="pr_restruct" type="number" title="" as="pr_restruct" />
        <column table="a" column="pr_shab" type="number" title="" as="pr_shab" />
        <column table="cube_c_deb_dop" column="dat_dolg" type="number" title="" dimension="kido_dat_dolg" as="dat_dolg" />
        <column table="cube_c_deb_dop" column="vid_real" type="number" title="" dimension="kido_sf_vid_real" is-final-dimension="1" is-private-dimension="1" as="vid_real" />
        <column table="a" column="num_account" type="string" title="" as="num_account" />
        <column table="a" column="dat_account" type="date" title="" as="dat_account" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="c_debet" as="a" title="График оплат">
          <dlink name="c_facvip" dimension="1" is-final-dimension="1" is-private-dimension="1" as="c_facvip" table="c_facvip" child="c_facvip" field="kod_deb" parent="c_debet" back="c_facvip" />
          <dlink name="c_opl" dimension="1" is-final-dimension="1" is-private-dimension="1" as="c_opl" table="c_opl" child="c_opl" field="kod_deb" parent="c_debet" back="c_opl" title="Оплаты" />
          <dlink name="c_opl" dimension="1" is-final-dimension="1" is-private-dimension="1" as="c_opl" table="c_opl" child="c_opl" field="kod_deb" parent="c_debet" back="c_opl" title="Оплаты" />
          <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="is_dop_contract" child="c_debet" field="kod_dog" parent="is_dop_contract" back="c_debet" title="Абонентские договоры">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_ipr" dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
            <dimlink name="kod_atp_dop_info" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="c_debet" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_debet" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="c_opl" as="kod_deb" join="left outer" dname="c_debet" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="c_akt" as="kod_akt" join="left outer" dname="c_debet" title="Акты по выполнению">
          <call function="=">
            <column table="a" column="kod_akt" />
            <column table="kod_akt" column="kod_akt" />
          </call>
        </query>
        <query name="cube_c_deb_dop" join="left outer" as="cube_c_deb_dop" dname="c_debet" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="cube_c_deb_dop" column="kod_deb" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_doc_zpr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_doc_zpr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" column-mandatory="1" comment="Код документа. Уник.Ключ" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="kod_zpr" type="number" comment="Код паспорта присоединения FK NUM_ZPR_STR, QR_ZPR, KOD_ZPR, KOD_ZPR" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" key="0" />
        <column table="a" column="kod_spr_doc" type="number" comment="?вид документа  ----  СТАРЫЙ ФК NAME, C_SPR_DOC, KOD_SPR_DOC, KOD_SPR_DOC" as="kod_spr_doc" key="0" />
        <column table="a" column="num_doc" type="string" data-size="250" title="" comment="исходящий номер" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата док-та" as="dat_doc" key="0" />
        <column table="a" column="prim" type="string" data-size="4000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="kod_shab_doc" type="number" comment="шаблон FK NAME, C_SHAB_DOC, KOD_SHAB_DOC, KOD_SHAB_DOC" as="kod_shab_doc" key="0" />
        <column table="a" column="path" type="string" data-size="250" title="" comment="путь к док-ту" as="path" key="0" />
        <column table="a" column="kod_person" type="number" comment="исполнитель FK FIO, ASUSE.KR_EMPLOYEE, KOD_EMP, KOD_PERSON" as="kod_person" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" comment="?" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код дог-ра/доп. согл FK NUM_DOG, C_DOGOVOR, KOD_DOG, KOD_DOG" as="kod_dog" key="0" />
        <column table="a" column="kod_f1ch1" type="number" comment="код ф.1 ч.1" as="kod_f1ch1" key="0" />
        <column table="a" column="kod_f1ch2" type="number" comment="код ф.1 ч.2" as="kod_f1ch2" key="0" />
        <column table="a" column="dat_srok" type="date" title="" comment="срок ответа Запрос на ТУ" as="dat_srok" key="0" />
        <column table="a" column="num_otv" type="string" data-size="250" title="" comment="номер ответа" as="num_otv" key="0" />
        <column table="a" column="dat_otv" type="date" title="" comment="дата ответа" as="dat_otv" key="0" />
        <column table="a" column="kod_tu" type="number" comment="Код ТУ FK NUM_TU, QR_TU, KOD_TU, KOD_TU" as="kod_tu" key="0" />
        <column table="a" column="pr_paid" type="number" title="" comment="Признак оплаты" as="pr_paid" key="0" />
        <column table="a" column="kod_spr_docum" type="number" column-mandatory="1" comment="Код типа документа FK ABBR, CSPR_DOC, KOD_SPR_DOCUM, KOD_SPR_DOCUM" as="kod_spr_docum" reference="cspr_doc" refcol="kod_spr_docum" key="0" />
        <column table="a" column="issue_dat" type="date" title="" comment="Дата выдачи" as="issue_dat" key="0" />
        <column table="a" column="issue_person" type="string" data-size="200" title="" comment="Кому выдан ( телефон )" as="issue_person" key="0" />
        <column table="a" column="id_landoc" type="number" title="" comment="Kod LanDoc" as="id_landoc" key="0" />
        <column table="a" column="kod_up" type="number" comment="Код УП FK NUM_UP, QR_UP, KOD_UP, KOD_UP" as="kod_up" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительского документа" as="kod_parent" reference="c_doc_zpr" refcol="kod_doc" key="0" />
        <column table="a" column="u_c" type="string" data-size="20" title="" comment="кто создал документ" as="u_c" key="0" />
        <column table="a" column="kod_project" type="number" comment="?код проекта для док-та Техническое заключение (согл.проектов) --- не используется ФК xxx, QR_PROJECT, KOD_PROJECT, KOD_PROJECT" as="kod_project" key="0" />
        <column table="a" column="kod_vizit" type="number" comment="?выход на объект  ( техн.надзор) ----- не используется" as="kod_vizit" key="0" />
        <column table="a" column="kod_zayav" type="number" comment="код заявки FK NUM_REG, C_ZAYAV, KOD_ZAYAV, KOD_ZAYAV" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания (сохраняется в тригере)" as="d_c" key="0" />
        <column table="a" column="kod_parent_doc" type="number" comment="код родительского документа (запрос =&gt; ответ)" as="kod_parent_doc" key="0" />
        <column table="a" column="dat_doc_agreement" type="date" title="" comment="дата согласования" as="dat_doc_agreement" key="0" />
        <column table="a" column="dat_anul" type="date" title="" comment="Дата анулирования" as="dat_anul" key="0" />
        <column table="a" column="pr_conrol" type="number" title="" comment="Признак , что документ проверен (в Москве для контроля)" as="pr_conrol" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="Заказчик FK NAME, ASUSE.KR_PAYER, KODP, KODP" as="kodp" key="0" />
        <column table="a" column="name_org_isp" type="string" data-size="250" title="" comment="Исполнительная организация" as="name_org_isp" key="0" />
        <column table="a" column="kod_doc_link" type="number" comment="Код связного документа (например, ТУ или УП)" as="kod_doc_link" key="0" />
        <column table="a" column="kod_sf" type="number" comment="код счет-фактуры для связи с таблицей sr_facvip FK NUM_SF, SR_FACVIP, KOD_SF, KOD_SF" as="kod_sf" key="0" />
        <column table="a" column="kod_sap" type="string" data-size="50" comment="Код САП" as="kod_sap" key="0" />
        <column table="a" column="tmp_date_sogl" type="date" title="" comment="Дата утверждения врем/пост" as="tmp_date_sogl" key="0" />
        <column table="a" column="tmp_num_tom" type="string" data-size="250" title="" comment="№ тома врем/пост" as="tmp_num_tom" key="0" />
        <column table="a" column="tmp_kod_person" type="number" comment="Ответсветнный врем/пост" as="tmp_kod_person" key="0" />
        <column table="a" column="tmp_date_do" type="date" title="" comment="Дата дейтсвия" as="tmp_date_do" key="0" />
        <column table="a" column="tmp_num_abon" type="string" data-size="250" title="" comment="Номер абонента" as="tmp_num_abon" key="0" />
        <column table="a" column="tmp_energ_obj" type="number" title="" comment="Энерго объект" as="tmp_energ_obj" key="0" />
        <column table="a" column="tmp_prim" type="string" data-size="1000" title="" comment="Примечание врем/пост" as="tmp_prim" key="0" />
        <column table="a" column="tmp_genp" type="number" title="" comment="Генподрядчик" as="tmp_genp" key="0" />
        <column table="a" column="sum_vsego" type="number" title="" comment="Сумма с НДС" as="sum_vsego" key="0" />
        <column table="a" column="sum_nds" type="number" title="" comment="Сумма НДС" as="sum_nds" key="0" />
        <column table="a" column="proc_nds" type="number" title="" comment="% НДС" as="proc_nds" key="0" />
        <column table="a" column="vid_act" type="number" title="" comment="Вид акта: 0 - денежный, 1 - имущественный" as="vid_act" key="0" />
        <column table="a" column="pr_import" type="number" title="" as="pr_import" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_doc_zpr" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_doc_zpr">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_parent" join="left outer" dname="c_doc_zpr">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_doc" />
          </call>
        </query>
        <query name="cspr_doc" as="kod_spr_docum" join="left outer" dname="c_doc_zpr">
          <call function="=">
            <column table="a" column="kod_spr_docum" />
            <column table="kod_spr_docum" column="kod_spr_docum" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="c_doc_zpr">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_dog_esn" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_dog_esn.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zayav" type="number" column-mandatory="1" comment="c_zayav.kod_zayav" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="20" title="" as="u_c" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="kod_type" type="number" comment="Тип : 1 - Договор, 2 - д/с" as="kod_type" reference="qs_type_doc_esn" refcol="kod" key="0" />
        <column table="a" column="num_esn" type="string" data-size="250" title="" comment="№" as="num_esn" key="0" />
        <column table="a" column="date_esn" type="date" title="" comment="Дата" as="date_esn" key="0" />
        <column table="a" column="kod_schema" type="number" comment="Схема работы: 1 - «Одно окно», 2 - «ПП РФ 557»" as="kod_schema" key="0" />
        <column table="a" column="d_send_query" type="date" title="" comment="Направлен запрос в сбыт. компанию" as="d_send_query" key="0" />
        <column table="a" column="d_get_customer" type="date" title="" comment="Выданы документы ЭСН заявителю" as="d_get_customer" key="0" />
        <column table="a" column="kod_place_dog" type="number" comment="Место выдачи документов: 0 - ЦОК, 1 - Филиал, 2 - Почта, 3 - ИА" as="kod_place_dog" key="0" />
        <column table="a" column="str_cause" type="string" data-size="4000" title="" comment="Причина невыдачи документов ЭСН заявителю" as="str_cause" key="0" />
        <column table="a" column="d_sign_esn" type="date" title="" comment="Договор ЭСН подписан заявителем" as="d_sign_esn" key="0" />
        <column table="a" column="d_return_esn" type="date" title="" comment="Возврат договора ЭСН в Сбыт. компанию" as="d_return_esn" key="0" />
        <column table="a" column="kod_cause_return" type="number" comment="Причина возврата" as="kod_cause_return" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="sbit_kodp" type="number" title="" as="sbit_kodp" key="0" />
        <column table="a" column="d_send_akt_sbit" type="date" title="" as="d_send_akt_sbit" key="0" />
        <column table="a" column="str_mail_dog" type="string" data-size="2000" title="" as="str_mail_dog" key="0" />
        <column table="a" column="d_send_ready_esn" type="date" title="" as="d_send_ready_esn" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_dog_esn" as="a" />
        <query name="qs_type_doc_esn" as="kod_type" join="left outer" dname="c_dog_esn">
          <call function="=">
            <column table="a" column="kod_type" />
            <column table="kod_type" column="kod" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_cause_return" join="left outer" dname="c_dog_esn">
          <call function="=">
            <column table="a" column="kod_cause_return" />
            <column table="kod_cause_return" column="kod_spr_doc" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_dog_esn">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_dop_doc" class="1" timestamp="15.12.2018 17:32:51" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_dop_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_doc" type="number" column-mandatory="1" comment="ID" as="kod_dop_doc" key="1" fixed="1" />
        <column table="a" column="num_doc" type="string" title="" data-size="250" comment="номер док-та" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" is-fact="1" agg="max" comment="дата док-та" as="dat_doc" fact="c_dop_doc_dat_doc" key="0" />
        <column table="a" column="kod_vid_uvedom" type="number" comment="сейчас не используется" as="kod_vid_uvedom" reference="is_spr_vid_uvedom" refcol="kod_vid_uvedom" key="0" />
        <column table="a" column="dat_otv" type="date" title="" comment="Срок оплаты на претензию" as="dat_otv" key="0" />
        <column table="a" column="kod_otv" type="number" comment="сейчас не используется" as="kod_otv" reference="is_spr_otvet" refcol="kod_otv" key="0" />
        <column table="a" column="kod_vid_doc" type="number" column-mandatory="1" comment="спр-к вид док-та" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="kod_dop_contract" type="number" comment="код договора присоединения" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="prim" type="string" title="" data-size="250" comment="примечание" as="prim" key="0" />
        <column table="a" column="dpk" type="date" title="" comment="дата посл. корр-ки" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" data-size="30" comment="пользователь, сделавший посл.корр-ку" as="polzov" key="0" />
        <column table="a" column="path" type="string" title="" comment="ссылка на документ" data-size="250" as="path" key="0" />
        <column table="a" column="doc_file" type="blob" title="" comment="файл в формате pdf" as="doc_file" key="0" />
        <column table="a" column="doc_file_name" type="string" title="" comment="имя файла без пути" data-size="250" as="doc_file_name" key="0" />
        <column table="a" column="num_upd" type="number" title="" comment="счетчик сохранения файлов" as="num_upd" key="0" />
        <column table="a" column="kod_pres" type="number" comment="связь с док-том Апсерва" as="kod_pres" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" comment="eia aoi ia oaae. is_atp_dop_info" as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="tema" type="string" title="" comment="обязательным является для письма, уведомления, обращения заявитедя, д/с (настройки по kod_vid_doc_tema)" data-size="250" as="tema" key="0" />
        <column table="a" column="kod_lkk_vip_tu" type="number" comment="код уведомления о выполнении ту" as="kod_lkk_vip_tu" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="doc_file_name_old" type="string" title="" comment="имя файла старое" data-size="250" as="doc_file_name_old" key="0" />
        <column table="a" column="pr_podpis" type="number" title="" comment="1- подпись лэ есть;  null,0-подписи лэ нет" as="pr_podpis" key="0" />
        <column table="a" column="el_podpis" type="blob" title="" comment="название файла с электронной подписью лэ" as="el_podpis" key="0" />
        <column table="a" column="dat_first_download_lkk" type="date" title="" comment="дата первого скачивания документа в лкк" as="dat_first_download_lkk" key="0" />
        <column table="a" column="dat_sign_lkk" type="date" title="" comment="дата и время подписания абонентом документа в лкк" as="dat_sign_lkk" key="0" />
        <column table="a" column="name_el_podpis" type="string" title="" comment="имя файла эл.подписи лэ" data-size="250" as="name_el_podpis" key="0" />
        <column table="a" column="dat_create" type="date" title="" comment="дата первичного прикрепления скана" as="dat_create" key="0" />
        <column table="a" column="polzov_create" type="string" title="" comment="подьзователь,прикрепивший скан" data-size="50" as="polzov_create" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_zayav_virtual" type="number" as="kod_zayav_virtual" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="kod_zpr_doc" type="number" as="kod_zpr_doc" reference="c_doc_zpr" refcol="kod_doc" key="0" />
        <column table="a" column="dat_scan" type="date" title="" comment="Дата прикрепления скана с расш PDF" as="dat_scan" key="0" />
        <column table="a" column="file_el_doc" type="blob" title="" comment="файл в формате doc - приходит из Эн.Сбыта как электронный док-т договора ЭнСнабжения" as="file_el_doc" key="0" />
        <column table="a" column="file_el_doc_name" type="string" data-size="250" title="" comment="имя файла в формте doc - приходит из Эн.сбыта" as="file_el_doc_name" key="0" />
        <column table="a" column="kod_compl" type="number" comment="Код обращения (жалоба)" as="kod_compl" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="Дата выставления признака НЕ активный (для док-т с типом PR_ONE_ACTIVE=1)" as="dat_end" key="0" />
        <column table="a" column="kod_ds" type="number" comment="Код д/с, к которому относится данный документ" as="kod_ds" key="0" />
        <column table="a" column="kod_claim" type="number" comment="Код претензионно-исковой работы" as="kod_claim" reference="is_claims" refcol="kod" key="0" />
        <column table="a" column="pr_flag" type="number" title="" comment="1- авт. ТУ льгот" as="pr_flag" key="0" />
        <column table="a" column="kod_shab_doc" type="number" comment="Код шаблона, без констрейна т.к. часто меняются и удаляются, но код нужен для проверки" as="kod_shab_doc" key="0" />
        <column table="a" column="kod_dog_esn" type="number" comment="SALES.C_DOG_ESN.KOD" as="kod_dog_esn" reference="c_dog_esn" refcol="kod" key="0" />
        <column table="a" column="kod_vid_ds" type="number" comment="Тип док-та (выбор из спр-ка Вид доп/согл и только для скана доп. соглашения)" as="kod_vid_ds" reference="is_spr_vid_ds" refcol="kod_vid_ds" key="0" />
        <column table="a" column="pr_lkk" type="number" title="" comment="Документ получен из ЛКК" as="pr_lkk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_dop_doc" as="a">
          <link name="kod_dop_contract" dimension="1" as="kod_dop_contract" table="is_dop_contract" child="c_dop_doc" field="kod_dop_contract" parent="is_dop_contract" back="c_dop_doc" title="Абонентские договоры" />
        </table>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="c_dop_doc" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
        <query name="is_spr_vid_uvedom" as="kod_vid_uvedom" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_vid_uvedom" />
            <column table="kod_vid_uvedom" column="kod_vid_uvedom" />
          </call>
        </query>
        <query name="is_spr_otvet" as="kod_otv" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_otv" />
            <column table="kod_otv" column="kod_otv" />
          </call>
        </query>
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_lkk_vip_tu" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_lkk_vip_tu" />
            <column table="kod_lkk_vip_tu" column="kod" />
          </call>
        </query>
        <query name="is_complaints" as="kod_compl" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_compl" />
            <column table="kod_compl" column="kod" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_zpr_doc" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_zpr_doc" />
            <column table="kod_zpr_doc" column="kod_doc" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_zayav_virtual" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_zayav_virtual" />
            <column table="kod_zayav_virtual" column="kod" />
          </call>
        </query>
        <query name="is_claims" as="kod_claim" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_claim" />
            <column table="kod_claim" column="kod" />
          </call>
        </query>
        <query name="c_dog_esn" as="kod_dog_esn" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_dog_esn" />
            <column table="kod_dog_esn" column="kod" />
          </call>
        </query>
        <query name="is_spr_vid_ds" as="kod_vid_ds" join="left outer" dname="c_dop_doc">
          <call function="=">
            <column table="a" column="kod_vid_ds" />
            <column table="kod_vid_ds" column="kod_vid_ds" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_dop_doc_sign" class="1" timestamp="15.05.2019 12:55:01" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_dop_doc_sign.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_doc_sign" type="number" comment="Уникальный номер" as="kod_dop_doc_sign" key="1" fixed="1" />
        <column table="a" column="kod_dop_doc" type="number" comment="Код документа" as="kod_dop_doc" reference="c_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="pr_sign" type="number" title="" comment="Кто подписал: 0-ЛЭ, 1-ЭнСбыт, 2-Клиент" as="pr_sign" key="0" />
        <column table="a" column="file_sign" type="blob" title="" comment="файл Эл.подпись" as="file_sign" key="0" />
        <column table="a" column="name_file_sign" type="string" data-size="250" title="" comment="Имя файла электронной подписи" as="name_file_sign" key="0" />
        <column table="a" column="dt_sign" type="date" title="" comment="Дата электронной подписи" as="dt_sign" key="0" />
        <column table="a" column="prim" type="string" data-size="2000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="polzov" type="string" data-size="50" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_dop_doc_sign" as="a" />
        <query name="c_dop_doc" as="kod_dop_doc" join="left outer" dname="c_dop_doc_sign">
          <call function="=">
            <column table="a" column="kod_dop_doc" />
            <column table="kod_dop_doc" column="kod_dop_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_facopl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fopl" type="number" column-mandatory="1" as="kod_fopl" key="1" fixed="1" />
        <column table="a" column="kod_ras" type="number" column-mandatory="1" as="kod_ras" reference="c_facras" refcol="kod_ras" key="0" />
        <column table="a" column="datao" type="date" column-mandatory="1" title="" as="datao" key="0" />
        <column table="a" column="god" type="number" column-mandatory="1" title="" as="god" key="0" />
        <column table="a" column="mes" type="number" column-mandatory="1" title="" as="mes" key="0" />
        <column table="a" column="opl" type="number" column-mandatory="1" title="" as="opl" key="0" />
        <column table="a" column="nal" type="number" column-mandatory="1" title="" comment="????" as="nal" key="0" />
        <column table="a" column="datao_vdoc" type="date" title="" as="datao_vdoc" key="0" />
        <column table="a" column="kod_opl" type="number" column-mandatory="1" as="kod_opl" reference="c_opl" refcol="kod_opl" key="0" />
        <column table="a" column="cust" type="number" title="" as="cust" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_facopl" as="a" />
        <query name="c_opl" as="kod_opl" join="left outer" dname="c_facopl" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="c_facras" as="kod_ras" join="left outer" dname="c_facopl">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_facras" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" column-mandatory="1" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" column-mandatory="1" as="kod_sf" reference="c_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodg" type="number" title="" as="kodg" key="0" />
        <column table="a" column="vid_t" type="number" column-mandatory="1" title="" as="vid_t" reference="k_nachisl" refcol="k_vid" key="0" />
        <column table="a" column="okdp" type="string" data-size="9" title="" as="okdp" key="0" />
        <column table="a" column="edizm" type="number" column-mandatory="1" title="" as="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" column-mandatory="1" title="" as="nachisl" key="0" />
        <column table="a" column="tax" type="number" column-mandatory="1" title="" as="tax" key="0" />
        <column table="a" column="nds" type="number" column-mandatory="1" title="" as="nds" key="0" />
        <column table="a" column="name" type="string" data-size="500" title="Наименование" as="name" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="tip_nds" type="number" column-mandatory="1" title="" as="tip_nds" reference="is_spr_nalog" refcol="kod_nalog" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="0" />
        <column table="a" column="ndog" type="string" data-size="30" title="" as="ndog" key="0" />
        <column table="a" column="datdog" type="date" title="" as="datdog" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_facras" as="a" />
        <query name="k_nachisl" as="vid_t" join="left outer" dname="c_facras">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="k_vid" />
          </call>
        </query>
        <query name="is_spr_nalog" as="tip_nds" join="left outer" dname="c_facras">
          <call function="=">
            <column table="a" column="tip_nds" />
            <column table="tip_nds" column="kod_nalog" />
          </call>
        </query>
        <query name="c_facvip" as="kod_sf" join="left outer" dname="c_facras">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_facvip" class="1" timestamp="20.10.2017 02:26:40" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_facvip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" column-mandatory="1" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="c_debet" refcol="kod_deb" key="0" />
        <column table="a" column="num_sf" type="string" title="" data-size="9" column-mandatory="1" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="" as="dat_sf" key="0" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" reference="k_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="pr_sv" type="number" title="" as="pr_sv" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="pr_plat" type="number" title="" as="pr_plat" key="0" />
        <column table="a" column="gru_pl" type="number" title="" as="gru_pl" key="0" />
        <column table="a" column="dcalc_peni" type="date" title="" as="dcalc_peni" key="0" />
        <column table="a" column="dat_bzad" type="date" title="Срок оплаты" as="dat_bzad" key="0" />
        <call as="dat_bzad_nvl" dimension="kido_dat_dolg" is-final-dimension="1" is-private-dimension="1" function="nvl" key="0">
          <column table="this" column="dat_bzad" />
          <column table="this" column="dat_sf" />
        </call>
        <column table="a" column="dat_uchet" type="date" title="" as="dat_uchet" key="0" />
        <column table="a" column="promezhut" type="number" title="" as="promezhut" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="stage" type="string" title="" data-size="10" as="stage" key="0" />
        <column table="a" column="prim" type="string" title="" data-size="250" as="prim" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_facvip" as="a" />
        <query name="c_debet" as="kod_deb" join="left outer" dname="c_facvip" title="График оплат">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="k_vid_sf" as="vid_sf" join="left outer" dname="c_facvip">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_real" join="left outer" dname="c_facvip">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="k_vid_pl" as="vid_pl" join="left outer" dname="c_facvip">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_facvip" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="!=nvl">
          <column table="this" column="vid_sf" />
          <const>2</const>
        </call>
      </where>
    </query>
    <query name="c_imuch" class="1" timestamp="17.02.2016 18:54:09" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_imuch.xml" haskeys="1">
      <select>
        <column table="a" column="kod_imuch" type="number" as="kod_imuch" key="1" fixed="1" />
        <column table="a" column="num_akt" type="string" title="" comment="№акта передачи" as="num_akt" key="0" />
        <column table="a" column="dat_akt" type="date" title="" comment="дата акта" dimension="kido_dat_opl" as="dat_akt" key="0" />
        <column table="a" column="sum_akt" type="number" title="Оплата имуществом с НДС" comment="сумма акта" agg="sum" fact="c_imuch_opl_nds" as="sum_akt" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" key="0" />
        <column table="a" column="kod_dop_contract" type="number" comment="код абонентского договора" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_titul_ip" type="number" comment="код титула ип" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_imuch" as="a" />
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dimension="1" dname="c_imuch" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="c_imuch" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_opl" title="Оплаты" class="1" timestamp="21.10.2017 22:37:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" title="" as="kod_deb" reference="c_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" comment="спр.ист.оплат" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" comment="статьи оплат" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" comment="2" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="vid_opl" type="string" title="" comment="спр.вид оплат" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="Дата оплаты" dimension="kido_dat_opl" as="datao" key="0" />
        <column table="a" column="datao" type="date" title="Дата оплаты" dimension="ipr_dat" as="datao1" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="opl" type="number" title="Оплачено" fact="c_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" comment="пусто" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" comment="1" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" comment="user" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" comment="дата редакт" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" comment="1" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" comment="формируется по функции" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="c_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="c_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" comment="сумма налога" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="c_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" comment="% ндс из договора" as="tax" key="0" />
        <column table="a" column="dat_bank" type="date" title="" comment="дата выписки из банка" as="dat_bank" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="последняя корректировка - пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="последняя корректировка - дата" as="d_m" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_akt" type="number" comment="только на погашение и сторно по акту" as="kod_akt" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="код расч счета банка" as="kodb_p" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_opl_bank" type="number" as="kod_opl_bank" key="0" />
        <column table="a" column="kod_reestr_rsfr" type="number" comment="код расшифровки по реестру петроэлектросбыта" as="kod_reestr_rsfr" reference="c_reestr_rsfr_opl" refcol="kod_reestr_rsfr_opl" key="0" />
        <column table="a" column="kod_doc_ish" type="number" as="kod_doc_ish" reference="is_doc_ish" refcol="kod_doc_ish" key="0" />
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" key="0" />
        <column table="a" column="kod_dog_parent" type="number" comment="kod_dog договора,с которого списаны деньги" as="kod_dog_parent" key="0" />
        <column table="a" column="kod_dop_doc" type="number" comment="доп док по оплате" as="kod_dop_doc" key="0" />
        <column table="a" column="kod_opl_parent" type="number" comment="kod_opl переносимой  оплаты" as="kod_opl_parent" key="0" />
        <call function="if" as="opl_den" title="Оплата деньгами с НДС" fact="c_opl_opl_nds_den" agg="sum" ifaplyed="1" key="0">
          <call function="and">
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
            <call function="or">
              <call function="=">
                <column table="this" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <column table="this" column="vid_pl" />
                  <const>2</const>
                </call>
                <call function="=1">
                  <call function="nvl0">
                    <column table="this" column="kod_type_opl" />
                  </call>
                </call>
              </call>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_nds_den" title="Оплата деньгами без НДС" fact="c_opl_opl_den" agg="sum" ifaplyed="1" key="0">
          <call function="and">
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
            <call function="or">
              <call function="=">
                <column table="this" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="and">
                <call function="=">
                  <column table="this" column="vid_pl" />
                  <const>2</const>
                </call>
                <call function="=1">
                  <call function="nvl0">
                    <column table="this" column="kod_type_opl" />
                  </call>
                </call>
              </call>
            </call>
          </call>
          <column table="this" column="opl_not_nds" />
        </call>
        <call function="+nvl" as="oplf" is-fact="1" agg="sum" fact="c_opl_oplf" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="-nvl" is-fact="1" agg="sum" as="opl_not_nds" fact="c_opl_opl_bn" key="0">
          <column table="this" column="opl" />
          <column table="this" column="nal" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_opl" as="a" title="Оплаты">
          <link name="kod_dog" dimension="1" as="kod_dog" table="is_dop_contract" child="c_opl" field="kod_dog" parent="is_dop_contract" back="c_opl" title="Абонентские договоры">
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_deb" table="c_debet" child="c_opl" field="kod_deb" parent="c_debet" back="c_opl" title="График оплат">
            <dimlink name="kido_kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kido_sf_vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="c_opl" as="kod_opl_prev" dname="c_opl_next" join="left outer" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="c_opl" as="kod_parent" dname="c_opl_child" join="left outer" title="Оплаты">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="c_facvip" as="kod_sf" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="c_debet" as="kod_deb" join="left outer" dname="c_opl" title="График оплат">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_opl" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="c_reestr_rsfr_opl" as="kod_reestr_rsfr" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="kod_reestr_rsfr" />
            <column table="kod_reestr_rsfr" column="kod_reestr_rsfr_opl" />
          </call>
        </query>
        <query name="is_doc_ish" as="kod_doc_ish" join="left outer" dname="c_opl">
          <call function="=">
            <column table="a" column="kod_doc_ish" />
            <column table="kod_doc_ish" column="kod_doc_ish" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="c_opl" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_opl_bank" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_bank" type="number" column-mandatory="1" comment="Уникальный код" as="kod_opl_bank" key="1" fixed="1" />
        <column table="a" column="kod_opl_budget" type="number" comment="kod_opl_budget из kr_opl_budget" as="kod_opl_budget" reference="kr_opl_budget" refcol="kod_opl_budget" key="0" />
        <column table="a" column="kod_link" type="number" comment="kod_link из kr_opl_bank" as="kod_link" key="0" />
        <column table="a" column="kod_extract" type="number" comment="kod_extract из kr_opl_bank" as="kod_extract" key="0" />
        <column table="a" column="num_bank" type="number" title="" comment="номер выписки из kr_extract" as="num_bank" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="Код расч/сч плательщика" as="kodb_p" key="0" />
        <column table="a" column="bank_rs" type="string" data-size="250" title="" comment="Аббревиатура счета и имя банка" as="bank_rs" key="0" />
        <column table="a" column="rs_pol" type="string" data-size="25" title="" comment="Расч/счет получ" as="rs_pol" key="0" />
        <column table="a" column="dat_bank" type="date" title="" comment="Дата выписки (прис понимают как дата опл" as="dat_bank" key="0" />
        <column table="a" column="dat_opl" type="date" title="" comment="Дата оплаты пп(из kr_opl_bank)" as="dat_opl" key="0" />
        <column table="a" column="dat_deb" type="date" title="" comment="Дата пп(из kr_opl_bank)" as="dat_deb" key="0" />
        <column table="a" column="num_opl" type="string" data-size="20" title="" comment="Номер пп" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" comment="Оплата из выписки банка" as="opl" key="0" />
        <column table="a" column="name_pl" type="string" data-size="250" title="" comment="Наименование плат" as="name_pl" key="0" />
        <column table="a" column="inn_pl" type="string" data-size="15" title="" comment="ИНН плат" as="inn_pl" key="0" />
        <column table="a" column="kpp_pl" type="string" data-size="9" title="" comment="КПП плат" as="kpp_pl" key="0" />
        <column table="a" column="osn_opl" type="string" data-size="1000" title="" comment="Основание для оплаты" as="osn_opl" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" comment="Признак разноса оплат" as="pr_raznos" key="0" />
        <column table="a" column="kod_spr_budget" type="number" comment="Код статьи  бюджета" as="kod_spr_budget" key="0" />
        <column table="a" column="st" type="string" data-size="20" title="" comment="Статья бюджета( из настроек)" as="st" key="0" />
        <column table="a" column="kod_dop_contract" type="number" comment="KOD_DOP_CONTRACT" as="kod_dop_contract" key="0" />
        <column table="a" column="num_req" type="string" data-size="50" title="" comment="Номер заявки (год+№)" as="num_req" key="0" />
        <column table="a" column="num_ouco" type="string" data-size="20" title="" comment="Уник номер КИДО(год+№)" as="num_ouco" key="0" />
        <column table="a" column="num_contr" type="string" data-size="50" title="" comment="Номер АД (год+№)" as="num_contr" key="0" />
        <column table="a" column="kod_reestr" type="number" comment="код реестра ПЕТРОЭЛ.СБЫТ" as="kod_reestr" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" comment="Пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата посл изменения" as="d_m" key="0" />
        <column table="a" column="gor_obl" type="string" data-size="10" title="" comment="Гор/Обл/Неопр" as="gor_obl" key="0" />
        <column table="a" column="vid_pl" type="number" title="" comment="вид реализации" as="vid_pl" key="0" />
        <column table="a" column="pr_scan" type="number" title="" comment="Признак Просмотрено" as="pr_scan" key="0" />
        <column table="a" column="kod_parent" type="number" comment="используется для связи возвратов и приходов при переносе (фискализация)" as="kod_parent" reference="c_opl_bank" refcol="kod_opl_bank" key="0" />
        <column table="a" column="u_mr" type="string" data-size="30" title="" comment="Пользователь, сформировавший и сохранивший реестр в бухгалтерию (фискализация)" as="u_mr" key="0" />
        <column table="a" column="d_mr" type="date" title="" comment="Дата формирования и сохранения реестра в бухгалтерию (фискализация)" as="d_mr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_opl_bank" as="a" />
        <query name="c_opl_bank" as="kod_parent" join="left outer" dname="c_opl_bank">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl_bank" />
          </call>
        </query>
        <query name="kr_opl_budget" as="kod_opl_budget" join="left outer" dname="c_opl_bank">
          <call function="=">
            <column table="a" column="kod_opl_budget" />
            <column table="kod_opl_budget" column="kod_opl_budget" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_zayav" class="1" timestamp="15.10.2020 20:49:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zayav" type="number" column-mandatory="1" comment="ID" as="kod_zayav" key="1" fixed="1" />
        <column table="a" column="kod_zpr" type="number" comment="Код договора/заявки FK  NUM_ZPR_STR, QR_ZPR, KOD_ZPR, KOD_ZPR" as="kod_zpr" key="0" />
        <column table="a" column="kod_spr_zayav" type="number" comment="?вид заявки (устаревший) С_SPR_ZAYAV, KOD_SPR_ZAYAV, KOD_SPR_ZAYAV" as="kod_spr_zayav" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата регистрации" comment="дата регистрации в канцелярии" as="dat_doc" key="0" />
        <column table="a" column="num_reg" type="string" title="Регистрационный номер" comment="регистрационный номер" as="num_reg" key="0" />
        <column table="a" column="dat_post" type="date" comment="дата пост. в работу" as="dat_post" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="срок выполнения" as="dat_end" key="0" />
        <column table="a" column="prim" type="string" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="?" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" key="0" />
        <column table="a" column="year" type="number" title="" comment="год заявки (расчет от даты док-та)" as="year" key="0" />
        <column table="a" column="kod_unig" type="number" comment="уник.№ в предлах года" as="kod_unig" key="0" />
        <column table="a" column="num_zayav" type="string" comment="номер заявки строкой" title="№ Заявки" as="num_zayav" key="0" />
        <column table="a" column="dat_zayav" type="date" column-mandatory="1" title="Дата предзаявки" comment="Дата предзаявки" as="dat_zayav" key="0" />
        <column table="a" column="kod_person" type="number" comment="ИСПОЛНИТЕЛЬ FK FIO, ASUSE.KR_EMPLOYEE, KOD_EMP, KOD_PERSON" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="dat_an" type="date" title="" comment="дата аннулирования" as="dat_an" key="0" />
        <column table="a" column="dat_close" type="date" title="" comment="дата закрытия заявки" as="dat_close" key="0" />
        <column table="a" column="status" type="number" title="" comment="Статус" as="status" key="0" />
        <column table="a" column="pr_vvod" type="number" title="" comment="1-признак ручного ввода суммы LV 1-ручной, 0-не ручной, неизвестно" as="pr_vvod" key="0" />
        <column table="a" column="kod_spr_query" type="number" column-mandatory="1" comment="вид заявки FK ABBR, CSPR_QUERY, KOD_SPR_QUERY, KOD_SPR_QUERY" as="kod_spr_query" reference="cspr_query" refcol="kod_spr_query" key="0" />
        <column table="a" column="str_adr" type="string" title="" comment="Адрес" as="str_adr" key="0" />
        <column table="a" column="obj" type="string" title="" comment="Объект" as="obj" key="0" />
        <column table="a" column="id_landoc" type="number" title="" comment="Kod LanDoc" as="id_landoc" key="0" />
        <column table="a" column="num_isx" type="string" title="" comment="Исходящий номер" as="num_isx" key="0" />
        <column table="a" column="dat_isx" type="date" title="" comment="Дата исходящего" as="dat_isx" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента(заполняется если заявка вне присоединения) FK NAME, ASUSE.KR_PAYER, KODP, KODP" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кто создал документ" as="u_c" key="0" />
        <column table="a" column="pr_first_zayav" type="number" title="" comment="1-признак что это заявка по которой был создан паспорт LV 0-не эта,1-эта, неизвестно" as="pr_first_zayav" key="0" />
        <column table="a" column="kod_web_zayav" type="number" comment="Код web-заявки, на основе которой создана заяявка" as="kod_web_zayav" key="0" />
        <column table="a" column="kod_dop_schema" type="number" comment="Код схемы (для Москвы когда заявка без паспорта) FK NAME, QR_DOP_SCHEMA, KOD_DOP_SCHEMA, KOD_DOP_SCHEMA" as="kod_dop_schema" key="0" />
        <column table="a" column="count_doc" type="number" title="" comment="Кол-во док-тов на выходе (нужно для определения закрытия заявки по сделанным док-там)" as="count_doc" key="0" />
        <column table="a" column="pr_conrol" type="number" title="" comment="Признак , что заявка проверена (в Москве для контроля)" as="pr_conrol" key="0" />
        <column table="a" column="pr_import" type="number" title="" comment="Признак, что заявка создана по импорту" as="pr_import" key="0" />
        <column table="a" column="type_mod_load" type="number" title="" comment="Тип корректировки нагрузки: -1 - уменьшение, 0 - без изменений, 1 - увеличение  LV &gt;0-'Увеличение',=0-'Без изменений',&lt;0-'Уменьшение','нет данных'" as="type_mod_load" key="0" />
        <column table="a" column="kod_har_pris" type="number" comment="Характеристика присоединения" as="kod_har_pris" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительской заявки //ФК NUM_REG, C_ZAYAV, KOD_ZAYAV ,KOD_PARENT" as="kod_parent" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код Договора на подключение FK NUM_DOG, C_DOGOVOR, KOD_DOG, KOD_DOG" as="kod_dog" key="0" />
        <column table="a" column="pr_vibor_jur" type="number" title="" comment="Признак для выбора в журнале заявок" as="pr_vibor_jur" key="0" />
        <column table="a" column="enter_year" type="date" title="" comment="Год ввода в эксплуатацию" as="enter_year" key="0" />
        <column table="a" column="pr_auto_create" type="number" title="" comment="Созданная для актов ТН" as="pr_auto_create" key="0" />
        <column table="a" column="megev_not_balans" type="number" title="" comment="Признак того, нагрузка по межеванию данной заявки не попадает в баланс" as="megev_not_balans" key="0" />
        <column table="a" column="persp_not_balans" type="number" title="" comment="Обоснование того, что персп.нагрузка данной заявки  не попадает в баланс" as="persp_not_balans" key="0" />
        <column table="a" column="kod_reason" type="number" comment="Код причины отклонения заявки" as="kod_reason" key="0" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" key="0" />
        <column table="a" column="pr_update_first" type="number" title="" comment="Ключ для определения, что C_ZAYAV первичный источник даных, после update скидываем на 0" as="pr_update_first" key="0" />
        <column table="a" column="pr_create_auto" type="number" title="" comment="признак автоматического создания заявки (из загрузочной формы)" as="pr_create_auto" key="0" />
        <column table="a" column="full_kod_child" type="string" as="full_kod_child" key="0" />
        <column table="a" column="kido_tp" type="number" title="" comment="Создано в КИДО ТП" as="kido_tp" key="0" />
        <column table="a" column="kod_kontact" type="number" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <call as="full_code_doc" function="nvl" key="0">
          <column table="a" column="full_kod_child" />
          <call function="||">
            <const>'ZYV_'</const>
            <column table="a" column="kod_zayav" />
          </call>
        </call>
        <column table="a" column="full_kod_child_dop" type="string" data-size="150" as="full_kod_child_dop" key="0" />
        <column table="a" column="status_rosseti" type="number" title="" as="status_rosseti" key="0" />
        <column table="a" column="request_id_rosseti" type="number" title="" as="request_id_rosseti" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_zayav" as="a">
          <link name="kod_kontact" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_kontact" table="is_kontact" child="c_zayav" field="kod_kontact" parent="is_kontact" back="c_zayav" title="Контакт">
            <dimlink name="vc_user_login_by_k" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kod_zpr" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_zpr" table="qr_zpr" child="c_zayav" field="kod_zpr" parent="qr_zpr" back="c_zayav">
            <dimlink name="qr_list_zpr_abons" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dlink name="vc_ul_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vc_ul_zayav">
            <dimlink name="vc_user_login_by_z" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="cspr_query" as="kod_spr_query" join="left outer" dname="c_zayav" title="Тип заявки">
          <call function="=">
            <column table="a" column="kod_spr_query" />
            <column table="kod_spr_query" column="kod_spr_query" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="qr_zpr_energo" as="qr_zpr_energo" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="qr_zpr_energo" column="kod_zpr" />
          </call>
        </query>
        <query name="c_zayav" as="kod_parent" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_zayav" />
          </call>
        </query>
        <query name="c_zayav_family" as="c_zayav_family" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="c_zayav_family" column="kod_zayav" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_zayav" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="isv_viza_agr_doc_state_sales" as="full_kod_doc" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="this" column="full_code_doc" />
            <column table="full_kod_doc" column="full_kod_doc" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="c_zayav_energo" as="c_zayav_energo" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="c_zayav_energo" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_links" as="qr_links" join="left outer" dname="c_zayav">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="qr_links" column="kod_zayav" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="c_zayav" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_zayav_num_z_id" class="1" timestamp="20.07.2019 14:14:12" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav.xml" haskeys="1">
      <select>
        <column table="a" column="num_zayav" key="1" group="1" as="num_zayav" />
        <column table="a" column="kod_spr_query" group="max" as="kod_spr_query" />
      </select>
      <from>
        <query name="c_zayav" as="a" />
      </from>
    </query>
    <query name="c_zayav_energo" class="1" timestamp="09.07.2020 16:24:05" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav_energo.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="kod_zayav" type="number" column-mandatory="1" comment="C_ZAYAV" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="kod_path" type="number" comment="Путь" as="kod_path" reference="is_spr_from_path" refcol="kod" />
        <column table="a" column="kod_important" type="number" comment="Важность" as="kod_important" reference="is_spr_vag" refcol="kod" />
        <column table="a" column="kod_kurator" type="number" comment="Куратор" as="kod_kurator" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" />
        <column table="a" column="sbit_kodp" type="number" title="" comment="Смытовая компания" as="sbit_kodp" />
        <column table="a" column="kod_place_dog" type="number" comment="Место выдача договора  0 - ЦОК, 1 - Филиал, 2 - Почта" as="kod_place_dog" reference="qr_place_dog" refcol="kod" />
        <column table="a" column="pr_db" type="number" title="" comment="Признак Doing Business" as="pr_db" />
        <column table="a" column="pr_lgot" type="number" title="" comment="Признак льготной заявки" as="pr_lgot" />
        <column table="a" column="kod_filial_dog" type="number" as="kod_filial_dog" />
        <column table="a" column="str_mail_dog" type="string" data-size="500" title="" as="str_mail_dog" />
        <column table="a" column="pr_vip" type="number" title="" comment="Признак VIP заявки" as="pr_vip" />
        <column table="a" column="kod_state_zayav" type="number" comment="определяем статус для as_st_req" as="kod_state_zayav" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" reference="as_request" refcol="kn_request" />
        <column table="a" column="pr_sign_tp" type="number" title="" comment="Согласие на подписание ЭП договора ТПр" as="pr_sign_tp" />
        <column table="a" column="pr_sign_esn" type="number" title="" comment="Согласие на подписание ЭП договора ЭСН" as="pr_sign_esn" />
        <column table="a" column="pr_sso" type="number" title="" comment="Смежная сетевая организация" as="pr_sso" />
        <column table="a" column="kod_rs" type="number" comment="Расчетный счет" as="kod_rs" reference="is_rs_cr" refcol="kod_rs_cr" />
        <column table="a" column="dat_lack" type="date" title="" comment="Заявка отложена, получение недостающих док-тов (дата)" as="dat_lack" />
        <column table="a" column="kod_zayav_source" type="number" comment="Код заявки с которой была снята копия" as="kod_zayav_source" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="kod_voltage" type="number" comment="Уровень напряжения" as="kod_voltage" reference="as_voltage" refcol="kn_voltage" />
        <column table="a" column="pr_have_zayav" type="number" title="" comment="Заявки в течении 3-х лет" as="pr_have_zayav" />
        <column table="a" column="pr_dog_more_year" type="number" title="" comment="Наличие договора аренды" as="pr_dog_more_year" />
        <column table="a" column="kod_spr_more_year" type="number" comment="0 - менее 1 года, 1 - более 1 года" as="kod_spr_more_year" />
        <column table="a" column="num_old_atp" type="string" data-size="250" title="" comment="номер старого АТП" as="num_old_atp" />
        <column table="a" column="pr_send_email" type="number" title="" as="pr_send_email" />
        <column table="a" column="kod_last_task" type="number" as="kod_last_task" reference="is_dop_contr_task" refcol="kod" />
        <column table="a" column="num_portal" type="string" data-size="250" title="" as="num_portal" />
        <column table="a" column="kod_state_lkk" type="number" as="kod_state_lkk" />
        <column table="a" column="pr_crash_armor" type="number" title="" as="pr_crash_armor" />
        <column table="a" column="pr_ls_esn" type="number" title="" as="pr_ls_esn" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="c_zayav_energo" as="a" />
        <query name="qs_state_lkk" as="kod_state_lkk" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_state_lkk" />
            <column table="kod_state_lkk" column="kod" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="is_spr_vag" as="kod_important" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_important" />
            <column table="kod_important" column="kod" />
          </call>
        </query>
        <query name="is_rs_cr" as="kod_rs" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_rs" />
            <column table="kod_rs" column="kod_rs_cr" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav_source" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_zayav_source" />
            <column table="kod_zayav_source" column="kod_zayav" />
          </call>
        </query>
        <query name="as_request" as="kn_request" join="left outer" dname="c_zayav_energo" title="Заявки">
          <call function="=">
            <column table="a" column="kn_request" />
            <column table="kn_request" column="kn_request" />
          </call>
        </query>
        <query name="as_voltage" as="kod_voltage" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_voltage" />
            <column table="kod_voltage" column="kn_voltage" />
          </call>
        </query>
        <query name="qr_place_dog" as="kod_place_dog" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_place_dog" />
            <column table="kod_place_dog" column="kod" />
          </call>
        </query>
        <query name="is_dop_contr_task" as="kod_last_task" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_last_task" />
            <column table="kod_last_task" column="kod" />
          </call>
        </query>
        <query name="qr_state_shabl" as="kod_state_lkk" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_state_lkk" />
            <column table="kod_state_lkk" column="kod_state" />
          </call>
        </query>
        <query name="is_spr_from_path" as="is_spr_from_path" join="left outer" dname="c_zayav_energo">
          <call function="=">
            <column table="a" column="kod_path" />
            <column table="is_spr_from_path" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_zayav_family" class="1" timestamp="11.10.2018 00:20:37" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav_family.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="num_parent" type="string" title="" as="num_parent" key="0" />
        <column table="a" column="num_child" type="string" title="" as="num_child" key="0" />
        <column table="a" column="kod_zpr" type="number" column-mandatory="1" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" key="0" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="name_path" type="string" title="" as="name_path" key="0" />
        <column table="a" column="person_otvet" type="string" title="" as="person_otvet" key="0" />
        <column table="a" column="str_place_dog" type="string" title="" as="str_place_dog" key="0" />
        <column table="a" column="qs" type="number" title="" as="qs" key="0" />
        <column table="a" column="qd" type="number" title="" as="qd" key="0" />
        <column table="a" column="qi" type="number" title="" as="qi" key="0" />
        <column table="a" column="name_filial" type="string" title="Филиал" as="name_filial" key="0" />
        <column table="a" column="kod_res" type="number" as="kod_res" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="dat_zayav" type="date" title="" as="dat_zayav" key="0" />
        <column table="a" column="zona" type="number" title="" as="zona" key="0" />
        <column table="a" column="str_adr" type="string" title="" as="str_adr" key="0" />
        <column table="a" column="pr_city" type="number" title="" as="pr_city" key="0" />
        <column table="a" column="dt_pz" type="date" title="" as="dt_pz" key="0" />
        <column table="a" column="dt_cost_put" type="date" title="" as="dt_cost_put" key="0" />
        <column table="a" column="dt_pass_od" type="date" title="" as="dt_pass_od" key="0" />
        <column table="a" column="dat_zayav_pred" type="date" title="" as="dat_zayav_pred" key="0" />
        <column table="a" column="str_obj" type="string" title="" as="str_obj" key="0" />
        <column table="a" column="fio_person_zayav" type="string" title="" as="fio_person_zayav" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_notif" type="number" as="kod_notif" key="0" />
        <column table="a" column="uved" type="string" title="" as="uved" key="0" />
        <column table="a" column="name_res" type="string" title="" as="name_res" key="0" />
        <column table="a" column="str_naznhouse" type="string" title="" as="str_naznhouse" key="0" />
        <column table="a" column="kod_naznhouse" type="number" as="kod_naznhouse" key="0" />
        <column table="a" column="name_mo" type="string" title="" as="name_mo" key="0" />
        <column table="a" column="id_oktmo" type="number" title="" as="id_oktmo" reference="is_spr_classifier_oktmo" refcol="id" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_zayav_family" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_zayav_family">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_zayav" as="kod_parent" join="left outer" dname="c_zayav_family">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="c_zayav_family">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="c_zayav_family" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial" />
            <column table="kod_filial" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res" join="left outer" dname="c_zayav_family" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res" />
            <column table="kod_res" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="c_zayav_family" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_classifier_oktmo" as="id_oktmo" join="left outer" dname="c_zayav_family">
          <call function="=">
            <column table="a" column="id_oktmo" />
            <column table="id_oktmo" column="id" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_zayav_gis" class="1" timestamp="03.06.2019 13:31:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav_gis.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zayav" type="number" column-mandatory="1" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="20" title="" as="u_c" key="0" />
        <column table="a" column="id_object_gis" type="number" title="" as="id_object_gis" key="0" />
        <column table="a" column="geometry_x" type="number" title="" as="geometry_x" key="0" />
        <column table="a" column="geometry_y" type="number" title="" as="geometry_y" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="c_zayav_gis" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_zayav_gis">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_zayav_virtual" class="1" timestamp="27.12.2018 23:23:36" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\c_zayav_virtual.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" key="1" as="kod" />
        <column table="a" column="type_zayav" type="number" title="" comment="Ф - 0, Ю -1" as="type_zayav" />
        <column table="a" column="name_org" type="string" data-size="500" title="" comment="Наименование огранизации/ФИО" as="name_org" />
        <column table="a" column="contact" type="string" data-size="500" title="" comment="Контактное лицо" as="contact" />
        <column table="a" column="phone" type="string" data-size="100" title="" comment="Телефон" as="phone" />
        <call function="cut_phone" as="phone_clear" title="Телефон">
          <column table="this" column="phone" />
        </call>
        <column table="a" column="e_mail" type="string" data-size="100" title="" comment="E-mail" as="e_mail" />
        <column table="a" column="prior_send" type="number" title="" comment="Приоритетный способ оповещения телефон SMS - 0, E-mail - 1 " as="prior_send" />
        <column table="a" column="type_path" type="number" title="" as="type_path" reference="is_spr_from_path" refcol="kod" />
        <column table="a" column="region" type="number" title="" comment="Область - 0, С-Пб - 1" as="region" />
        <column table="a" column="type_request" type="number" title="" comment="Тип обращения" as="type_request" reference="cspr_query" refcol="kod_spr_query" />
        <column table="a" column="kod_adr" type="number" comment="Код адреса" as="kod_adr" reference="k_house" refcol="kodd" />
        <column table="a" column="str_adr" type="string" data-size="2000" title="" comment="Адрес текстом" as="str_adr" />
        <column table="a" column="kod_har" type="number" comment="Характеристика объекта" as="kod_har" reference="as_load_kind" refcol="kn_load_kind" />
        <column table="a" column="str_har" type="string" data-size="2000" title="" comment="Наименование объекта" as="str_har" />
        <column table="a" column="load_s1" type="number" title="" comment="Мощность сущ. кат 1" as="load_s1" />
        <column table="a" column="load_s2" type="number" title="" comment="Мощность сущ. кат 2" as="load_s2" />
        <column table="a" column="load_s3" type="number" title="" comment="Мощность сущ. кат 3" as="load_s3" />
        <column table="a" column="load_d1" type="number" title="" comment="Мощность заяв. кат 1" as="load_d1" />
        <column table="a" column="load_d2" type="number" title="" comment="Мощность заяв. кат 2" as="load_d2" />
        <column table="a" column="load_d3" type="number" title="" comment="Мощность заяв. кат 3" as="load_d3" />
        <column table="a" column="prim" type="string" data-size="2000" title="" comment="Примечание" as="prim" />
        <column table="a" column="pr_without_work" type="number" title="" comment="Предварительно без работ" as="pr_without_work" />
        <column table="a" column="type_get_dog" type="number" title="" comment="Место выдачи договора 0 - ЦОК, 1 - Филиал, 2 - Почта" as="type_get_dog" reference="qr_place_dog" refcol="kod" />
        <column table="a" column="str_postal" type="string" data-size="2000" title="" comment="Почтовый адрес" as="str_postal" />
        <column table="a" column="d_c" type="date" title="Дата ВО" as="d_c" />
        <column table="a" column="u_c" type="string" data-size="50" title="" as="u_c" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" />
        <column table="a" column="kodp" type="number" title="" comment="Контрагент" as="kodp" reference="is_creditors" refcol="e_code" />
        <column table="a" column="date_end" type="date" title="" comment="Дата закрытия (принято в работу)" as="date_end" />
        <column table="a" column="date_an" type="date" title="" comment="Дата аннулирования" as="date_an" />
        <column table="a" column="kod_zayav" type="number" comment="Kod c_zayav" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="num_zayav_vo" type="string" data-size="100" title="" comment="№ ВО" as="num_zayav_vo" />
        <column table="a" column="guid" type="string" data-size="250" title="" comment="GUID для ВО" as="guid" />
        <column table="a" column="kod_type_connection" type="number" comment="код типа ТП (справочник qs_type_connection) (из ЛКК)" as="kod_type_connection" reference="qs_type_connection" refcol="kod" />
        <column table="a" column="cadastral_num" type="string" data-size="255" title="" comment="кадастровый номер (из ЛКК)" as="cadastral_num" />
        <column table="a" column="contract_type" type="string" data-size="255" title="" comment="вид договора (из ЛКК)" as="contract_type" />
        <column table="a" column="supply_company" type="string" data-size="255" title="" comment="Наименование организации, обеспечивающей продажу электроэнергии (из ЛКК)" as="supply_company" />
        <column table="a" column="lkkid" type="string" data-size="250" title="" comment="уникальный идентификатор ЛКК" as="lkkid" />
        <column table="a" column="dat_lack" type="date" title="" comment="ВО отложено, получение недостающих док-тов (дата)" as="dat_lack" />
        <column table="a" column="pr_work_zayavitel" type="number" title="" comment="Признак работ заявителя (ЛКК: я сам поставлю прибор учета)" as="pr_work_zayavitel" />
        <column table="a" column="reference_point" type="string" data-size="4000" title="" comment="Ориентир (ЛКК)" as="reference_point" />
        <column table="a" column="kod_load_nature" type="number" comment="Код по справочнику &quot;Характер нагрузки&quot; (ЛКК)" as="kod_load_nature" reference="qs_load_nature" refcol="kod" />
        <column table="a" column="pr_sign_tp" type="number" title="" comment="Согласие на подписание ЭП договора ТПр" as="pr_sign_tp" />
        <column table="a" column="pr_sign_esn" type="number" title="" comment="Согласие на подписание ЭП договора ЭСН" as="pr_sign_esn" />
        <column table="a" column="kod_vo_source" type="number" as="kod_vo_source" reference="c_zayav_virtual" refcol="kod" />
        <column table="a" column="kod_state_lkk" type="number" as="kod_state_lkk" reference="qs_state_lkk" refcol="kod" />
        <column table="a" column="pr_ls_esn" type="number" title="" as="pr_ls_esn" />
        <column table="a" column="kod_kontact" type="number" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" />
        <call as="f" function="extract_word">
          <column table="this" column="contact" />
          <const>1</const>
        </call>
        <call as="i" function="extract_word">
          <column table="this" column="contact" />
          <const>2</const>
        </call>
        <call as="o" function="extract_word">
          <column table="this" column="contact" />
          <const>3</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="c_zayav_virtual" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="cspr_query" as="type_request" join="left outer" dname="c_zayav_virtual" title="Тип заявки">
          <call function="=">
            <column table="a" column="type_request" />
            <column table="type_request" column="kod_spr_query" />
          </call>
        </query>
        <query name="qs_type_connection" as="kod_type_connection" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_type_connection" />
            <column table="kod_type_connection" column="kod" />
          </call>
        </query>
        <query name="qs_load_nature" as="kod_load_nature" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_load_nature" />
            <column table="kod_load_nature" column="kod" />
          </call>
        </query>
        <query name="qr_place_dog" as="type_get_dog" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="type_get_dog" />
            <column table="type_get_dog" column="kod" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_vo_source" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_vo_source" />
            <column table="kod_vo_source" column="kod" />
          </call>
        </query>
        <query name="is_spr_from_path" as="type_path" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="type_path" />
            <column table="type_path" column="kod" />
          </call>
        </query>
        <query name="k_house" as="kod_adr" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_adr" />
            <column table="kod_adr" column="kodd" />
          </call>
        </query>
        <query name="as_load_kind" as="kod_har" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_har" />
            <column table="kod_har" column="kn_load_kind" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="c_zayav_virtual" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="qs_state_lkk" as="kod_state_lkk" join="left outer" dname="c_zayav_virtual">
          <call function="=">
            <column table="a" column="kod_state_lkk" />
            <column table="kod_state_lkk" column="kod" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="c_zayav_virtual" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_character" class="1" timestamp="28.11.2018 16:13:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_character.xml" haskeys="1">
      <select>
        <column table="a" column="kod_character" type="number" as="kod_character" key="1" fixed="1" />
        <column table="a" column="type" type="number" title="" as="type" reference="ips_data_types" refcol="kod_type" key="0" />
        <column table="a" column="ips_id" type="number" title="" as="ips_id" key="0" />
        <column table="a" column="unit" type="number" title="" as="unit" reference="ips_units" refcol="kod_unit" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="ukr_har" type="number" title="" as="ukr_har" key="0" />
        <column table="a" column="har_me" type="number" title="" as="har_me" key="0" />
        <column table="a" column="kod_phis_param" type="number" as="kod_phis_param" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_character" as="a" />
        <query name="ips_data_types" as="kod_type" join="left inner" dname="ipr_character">
          <call function="=">
            <column table="a" column="type" />
            <column table="kod_type" column="kod_type" />
          </call>
        </query>
        <query name="ips_units" as="kod_unit" join="left outer" dname="ipr_character">
          <call function="=">
            <column table="a" column="unit" />
            <column table="kod_unit" column="kod_unit" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_character_set" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_character_set.xml" haskeys="1">
      <select>
        <column table="a" column="kod_character_set" type="number" as="kod_character_set" key="1" fixed="1"></column>
        <column table="a" column="kod_set" type="number" as="kod_set" reference="ipr_sets" refcol="kod_set" key="0"></column>
        <column table="a" column="kod_character" type="number" as="kod_character" reference="ipr_character" refcol="kod_character" key="0"></column>
        <column table="a" column="fill" type="number" title="" as="fill" key="0"></column>
        <column table="a" column="beg_year" type="number" title="" as="beg_year" key="0"></column>
        <column table="a" column="end_year" type="number" title="" as="end_year" key="0"></column>
        <column table="a" column="order_num" type="number" title="" as="order_num" key="0"></column>
        <column table="a" column="kn_eoclass" type="number" title="" as="kn_eoclass" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_ise_character" type="number" as="kod_ise_character" key="0"></column>
        <column table="a" column="oborud_prizn" type="number" title="" as="oborud_prizn" key="0"></column>
        <column table="a" column="load_in_ks14" type="number" title="" as="load_in_ks14" key="0"></column>
        <column table="a" column="may_copy" type="number" title="" as="may_copy" key="0"></column>
        <column table="a" column="pr_use_ue_rasch" type="number" title="" as="pr_use_ue_rasch" key="0"></column>
        <column table="a" column="pr_count" type="number" title="" as="pr_count" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_character_set" as="a"></table>
        <query name="ipr_character" as="kod_character" join="left outer" dname="ipr_character_set">
          <call function="=">
            <column table="a" column="kod_character"></column>
            <column table="kod_character" column="kod_character"></column>
          </call>
        </query>
        <query name="ipr_sets" as="kod_set" join="left outer" dname="ipr_character_set">
          <call function="=">
            <column table="a" column="kod_set"></column>
            <column table="kod_set" column="kod_set"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_character_values" class="1" timestamp="27.07.2016 16:18:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_character_values.xml" haskeys="1">
      <select>
        <column table="a" column="kod_character_value" type="number" as="kod_character_value" key="1" fixed="1" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="kod_set" type="number" as="kod_set" key="0" />
        <column table="a" column="kod_character_set" type="number" as="kod_character_set" reference="ipr_character_set" refcol="kod_character_set" key="0" />
        <column table="a" column="value" type="string" title="" comment="станет" as="value" key="0" />
        <column table="a" column="kod_type" type="number" as="kod_type" key="0" />
        <column table="a" column="old_value" type="string" title="" comment="было" as="old_value" key="0" />
        <column table="a" column="vv_value" type="string" title="" comment="вып объем работ по ип ввод" as="vv_value" key="0" />
        <column table="a" column="work_value" type="string" title="" comment="объем работ" as="work_value" reference="ips_character_spr_values" refcol="kod_character_spr_values" key="0" />
        <column table="a" column="work_value_dem" type="string" title="" comment="объем работ - вывод" as="work_value_dem" key="0" />
        <column table="a" column="vv_value_dem" type="string" title="" comment="вып объем работ по ип вывод" as="vv_value_dem" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="cnt" type="number" title="" as="cnt" key="0" />
        <column table="a" column="kod_num" type="number" as="kod_num" key="0" />
        <call function="()" title="Номинальная мощность ТП, план" as="tp_pow_plan" fact="pr_ch_val_tp_pow_plan" agg="sum" type="number" key="0">
          <call function="if">
            <call function="=">
              <column table="kod_character_set" column="kod_character_set" />
              <const>965</const>
            </call>
            <column table="work_value" column="num_value" />
          </call>
        </call>
        <call function="()" title="Номинальное напряжение ВН в ТП, план" as="tp_volt_plan" fact="pr_ch_val_tp_volt_plan" agg="sum" type="string" key="0">
          <call function="if">
            <call function="=">
              <column table="kod_character_set" column="kod_character_set" />
              <const>968</const>
            </call>
            <column table="work_value" column="name" />
          </call>
        </call>
        <call function="()" title="Номинальная мощность трансформатора в ТП, план" as="tr_pow_plan" fact="pr_ch_val_tr_pow_plan" agg="sum" type="number" key="0">
          <call function="if">
            <call function="=">
              <column table="kod_character_set" column="kod_character_set" />
              <const>2118</const>
            </call>
            <column table="work_value" column="num_value" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_character_values" as="a" />
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_character_values">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dimension="1" dname="ipr_character_values">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_character_set" as="kod_character_set" join="left outer" dname="ipr_character_values">
          <call function="=">
            <column table="a" column="kod_character_set" />
            <column table="kod_character_set" column="kod_character_set" />
          </call>
        </query>
        <query name="ips_character_spr_values" as="work_value" join="left outer" dname="ipr_character_values">
          <call function="=">
            <column table="a" column="work_value" />
            <call function="to_char">
              <column table="work_value" column="kod_character_spr_values" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_closed_plans" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_closed_plans.xml" haskeys="1">
      <select>
        <column table="a" column="kod_closed_plan" type="number" as="kod_closed_plan" key="1" fixed="1"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0"></column>
        <column table="a" column="dz" type="number" title="" as="dz" key="0"></column>
        <column table="a" column="kz" type="number" title="" as="kz" key="0"></column>
        <column table="a" column="saldo" type="number" title="" as="saldo" key="0"></column>
        <column table="a" column="plan_kvl" type="number" title="" as="plan_kvl" key="0"></column>
        <column table="a" column="plan_fin" type="number" title="" as="plan_fin" key="0"></column>
        <column table="a" column="plan_vvod" type="number" title="" as="plan_vvod" key="0"></column>
        <column table="a" column="fix_smet_cost" type="number" title="" as="fix_smet_cost" key="0"></column>
        <column table="a" column="characters" type="number" title="" as="characters" key="0"></column>
        <column table="a" column="power" type="number" title="" as="power" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="contr_steps" type="number" title="" as="contr_steps" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_closed_plans" as="a">
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_closed_plans" field="kod_ipr" parent="ipr_ipr_data" back="ipr_closed_plans">
            <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
          </link>
        </table>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_closed_plans">
          <call function="=">
            <column table="a" column="kod_ipr"></column>
            <column table="kod_ipr" column="kod_ipr"></column>
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_closed_plans">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
      </from>
      <where>
        <call function="!=">
          <call function="nvl">
            <column table="kod_titul_ip" column="is_head_tit" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ipr_contr_steps_val" class="1" timestamp="28.02.2016 02:19:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_contr_steps_val" type="number" as="kod_contr_steps_val" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="plan_date_beg" type="date" title="" as="plan_date_beg" key="0" />
        <column table="a" column="plan_date_end" type="date" title="" as="plan_date_end" key="0" />
        <column table="a" column="fact_date_beg" type="date" title="" as="fact_date_beg" key="0" />
        <column table="a" column="fact_date_end" type="date" title="" as="fact_date_end" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="plan_cost" type="number" title="" as="plan_cost" key="0" />
        <column table="a" column="fact_cost" type="number" title="" as="fact_cost" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ipr_contr_steps_val" refcol="kod_contr_steps_val" key="0" />
        <column table="a" column="kod_doc_rel" type="number" as="kod_doc_rel" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0" />
        <column table="a" column="kod_template_contr_steps_val" type="number" comment="ссылка на строку шаблона, чтоб смотреть правила заполнения" as="kod_template_contr_steps_val" key="0" />
        <column table="a" column="proc_vip" type="number" title="" as="proc_vip" key="0" />
        <column table="a" column="wfact_date_beg" type="date" title="" as="wfact_date_beg" key="0" />
        <column table="a" column="wfact_date_end" type="date" title="" as="wfact_date_end" key="0" />
        <column table="a" column="wfact_long" type="number" title="" as="wfact_long" key="0" />
        <column table="a" column="wfact_otklon" type="number" title="" as="wfact_otklon" key="0" />
        <column table="a" column="date_vip" type="date" title="" as="date_vip" key="0" />
        <column table="a" column="comments_fill" type="string" title="" as="comments_fill" key="0" />
        <column table="a" column="kod_num" type="string" as="kod_num" reference="ipr_contr_steps_val" refcol="kod_doc" key="0" />
        <column table="a" column="krit_otklon" type="number" title="" as="krit_otklon" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0"></column>
        <column table="ipr_contr_steps_val_dt" column="bp_date" as="bp_date" key="0" />
        <column table="ipr_contr_steps_val_dt" column="ep_date" fact="ipr_cstep_ep_date" agg="max" as="ep_date" key="0" />
        <column table="ipr_contr_steps_val_dt" column="bf_date" as="bf_date" key="0" />
        <column table="ipr_contr_steps_val_dt" column="ef_date" fact="ipr_cstep_ef_date" agg="max" as="ef_date" key="0" />
        <column table="ipr_contr_steps_val_dt_mat" column="ef_date" fact="ipr_cstep_ef_date_mat" agg="max" comment="для отчета по хоз способу 41656, другой способ материализации" as="ef_date_mat" key="0" />
        <call function="||" as="comments_all" fact="ipr_cstep_cmnt_all" agg="max" key="0">
          <column table="this" column="comments" />
          <column table="this" column="comments_fill" />
        </call>
        <call function="case" as="need" type="string" title="Событие/работа (требуется/ не требуется)" key="0">
          <call function="when">
            <call function="is not null">
              <column table="this" column="ef_date" />
            </call>
            <const>'Да'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="is null">
                <column table="this" column="ef_date" />
              </call>
              <call function="or">
                <call function="is not null">
                  <column table="this" column="bp_date" />
                </call>
                <call function="is not null">
                  <column table="this" column="ep_date" />
                </call>
              </call>
            </call>
            <const>'Нет'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="is null">
                <column table="this" column="ef_date" />
              </call>
              <call function="is null">
                <column table="this" column="bp_date" />
              </call>
              <call function="is null">
                <column table="this" column="ep_date" />
              </call>
              <call function="is null">
                <column table="this" column="bf_date" />
              </call>
            </call>
            <const>'Не требуется'</const>
          </call>
        </call>
        <column table="kod_doc_prev" column="prev_doc" as="prev_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_contr_steps_val" as="a">
          <link name="kod_doc_prev" as="kod_doc_prev" table="vv_ipr_contr_steps_prev_doc" child="ipr_contr_steps_val" field="kod_doc_prev" parent="vv_ipr_contr_steps_prev_doc" back="ipr_contr_steps_val" />
        </table>
        <query name="ipr_template_contr_steps_val" as="kod_template_contr_steps_val" join="left outer" dimension="1" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_template_contr_steps_val" />
            <column table="kod_template_contr_steps_val" column="kod_template_contr_steps_val" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_rel" join="left outer" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_doc_rel" />
            <column table="kod_doc_rel" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dimension="1" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_contr_steps_val" as="kod_parent" dname="child" join="left outer">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_contr_steps_val" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_contr_steps_val" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_contr_steps_val_dt" join="left outer" as="ipr_contr_steps_val_dt" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_contr_steps_val" />
            <column table="ipr_contr_steps_val_dt" column="kod_contr_steps_val" />
          </call>
        </query>
        <query name="ipr_contr_steps_val_dt_mat" join="left outer" as="ipr_contr_steps_val_dt_mat" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_contr_steps_val" />
            <column table="ipr_contr_steps_val_dt_mat" column="kod_contr_steps_val" />
          </call>
        </query>
        <query name="ipr_contr_steps_val_ord" as="ipr_contr_steps_val_ord" join="left outer" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_contr_steps_val" />
            <column table="ipr_contr_steps_val_ord" column="kod_contr_steps_val" />
          </call>
        </query>
        <query name="ipr_doc_steps" as="kod_doc_steps" join="left outer" dimension="1" dname="ipr_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_steps" column="kod_doc" />
          </call>
        </query>
        <query name="vv_ipr_contr_steps_prev_doc" as="kod_doc_prev" join="left outer" dname="ipr_contr_steps_val">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_ipr" />
              <column table="kod_doc_prev" column="kod_ipr" />
            </call>
            <call function="=">
              <column table="a" column="kod_titul_ip" />
              <column table="kod_doc_prev" column="kod_titul_ip" />
            </call>
            <call function="=">
              <column table="a" column="kod_doc" />
              <column table="kod_doc_prev" column="kod_doc" />
            </call>
          </call>
        </query>
        <query name="ipr_contr_steps_val" as="kod_contr_steps_val_prev" join="left outer" dname="ipr_contr_steps_val">
          <call function="and">
            <call function="=">
              <column table="this" column="prev_doc" />
              <column table="kod_contr_steps_val_prev" column="kod_doc" />
            </call>
            <!--<call function="=">
              <column table="a" column="kod_titul_ip" />
              <column table="kod_contr_steps_val_prev" column="kod_titul_ip" />
            </call>-->
            <call function="=">
              <column table="a" column="kod_ipr" />
              <column table="kod_contr_steps_val_prev" column="kod_ipr" />
            </call>
            <call function="=">
              <column table="a" column="kod_template_contr_steps_val" />
              <column table="kod_contr_steps_val_prev" column="kod_template_contr_steps_val" />
            </call>
            <call function="=">
              <column table="a" column="kod_num" />
              <column table="kod_contr_steps_val_prev" column="kod_num" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc" class="1" timestamp="15.11.2018 13:39:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" fact="ipr_kod_doc" agg="max" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_date" type="date" title="" is-fact="1" fact="ipr_doc_doc_date_max" agg="max" as="doc_date" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0" />
        <column table="a" column="order_num" type="string" title="" as="order_num" key="0" />
        <column table="a" column="plan_date" type="date" title="" as="plan_date" key="0" />
        <column table="a" column="doc_num" type="string" title="Номер документа" vid="1" as="doc_num" key="0" />
        <column table="a" column="doc_summ" type="number" title="" as="doc_summ" key="0" />
        <column table="a" column="doc_summ_nds" type="number" title="" as="doc_summ_nds" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="link_kido" type="number" title="" as="link_kido" key="0" />
        <column table="a" column="document" type="blob" title="" as="document" key="0" />
        <column table="a" column="doc_target" type="number" title="" as="doc_target" reference="ips_doc_targets" refcol="kod_target" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" key="0" />
        <column table="a" column="act_date" type="date" title="" as="act_date" key="0" />
        <column table="a" column="utvbuh" type="number" title="" as="utvbuh" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="doc_summ1" type="number" title="" as="doc_summ1" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="дата закрытия док-та" as="date_close" key="0" />
        <column table="a" column="is_tmp" type="number" title="" as="is_tmp" key="0" />
        <column table="a" column="doc_summ2" type="number" title="" as="doc_summ2" key="0" />
        <column table="a" column="kod_uid" type="number" title="" as="kod_uid" key="0" />
        <column table="a" type="number" column="kod_dop_contract" as="kod_dop_contract" reference="qr_links" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" key="0" />
        <const type="number" as="cnt" fact="ipr_doc_count" agg="sum" key="0">1</const>
        <call function="trunc" type="date" as="doc_date_c" title="Дата документа" key="0">
          <call function="nvl">
            <column table="a" column="doc_date" />
            <column table="a" column="plan_date" />
          </call>
        </call>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
          <const>' : '</const>
          <column table="a" column="description" />
        </call>
        <call function="||" as="name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="doc_date_c" />
          </call>
        </call>
        <call function="if" as="has_smet" key="0">
          <call function="is not null">
            <column table="ipr_smet_struct_titul" column="kod_smet_titul" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_doc" as="a">
          <dlink name="ipr_doc_by_ipr" as="ipr_doc_by_ipr" table="ipr_doc_by_ipr" child="ipr_doc_by_ipr" field="kod_doc" parent="ipr_doc" back="ipr_doc_by_ipr">
            <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_doc_by_ipr" field="kod_ipr" parent="ipr_ipr_data" back="ipr_doc_by_ipr">
              <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы" />
            </link>
          </dlink>
          <dlink name="ipr_smet_struct_titul" as="ipr_smet_struct_titul" table="ipr_smet_struct_titul" child="ipr_smet_struct_titul" field="kod_doc" parent="ipr_doc" back="ipr_smet_struct_titul" />
        </table>
        <query name="ips_doc_targets" as="doc_target" join="left outer" dname="ipr_doc">
          <call function="=">
            <column table="a" column="doc_target" />
            <column table="doc_target" column="kod_target" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_doc" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_doc">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ipr_doc">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_doc" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_doc_osnov" join="left outer" dname="ipr_doc">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc_osnov" column="kod_doc_osnov" />
          </call>
        </query>
        <query name="qr_links" as="kod_dog" join="left outer" dname="ipr_doc">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <call function="nvl">
              <column table="kod_dog" column="kod_dog" />
              <column table="kod_dog" column="pred_kod_dog" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_by_ipr" class="1" timestamp="24.02.2016 14:53:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_doc_by_ipr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_by_ipr" type="number" as="kod_doc_by_ipr" key="1" fixed="1" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_ip_by_year1" type="number" as="kod_ip_by_year1" reference="ipr_ip_by_year" refcol="kod_ip_by_year" key="0" />
        <column table="a" column="kod_status1" type="number" comment="показывает, в каком статусе была программа, когда унее появился этот док-т" as="kod_status1" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_doc_by_ipr" as="a" />
        <query name="ipr_ip_by_year" as="kod_ip_by_year1" join="left outer" dname="ipr_doc_by_ipr">
          <call function="=">
            <column table="a" column="kod_ip_by_year1" />
            <column table="kod_ip_by_year1" column="kod_ip_by_year" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_doc_by_ipr">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_doc_by_ipr">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_doc_files" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_doc_files.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_files" type="number" key="1" as="kod_doc_files"></column>
        <column table="a" column="file_name" type="string" title="" as="file_name"></column>
        <column table="a" column="file_data" type="blob" title="" as="file_data"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_doc_files" as="a"></table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_doc_files">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_dogs" class="1" timestamp="15.08.2016 18:11:32" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_dogs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="name" type="string" title="Договор" as="name" key="0" />
        <column table="a" column="kod_dog_type" type="number" as="kod_dog_type" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" key="0" />
        <column table="a" column="dat_podpis" type="date" title="" as="dat_podpis" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0" />
        <column table="a" column="is_old" type="number" title="" comment="договор не должен отображаться, хранится отлько чтобы правильно отображать планы предыдущих версий" as="is_old" key="0" />
        <column table="a" column="kod_parent_ipr_dog" type="number" comment="договор, с которым данный был слит" as="kod_parent_ipr_dog" key="0" />
        <column table="a" column="date_set_fact_dog" type="date" title="" comment="дата, когда плановому дог-ру проставили фактический" as="date_set_fact_dog" key="0" />
        <call function="||" as="full_name" type="sting" key="0">
          <column table="this" column="name_x" />
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_podpis" />
            </call>
            <const>' от '</const>
          </call>
          <call function="date to char">
            <column table="a" column="dat_podpis" />
          </call>
        </call>
        <call function="nvl" as="name_x" key="0">
          <column table="a" column="name" />
          <call function="if">
            <call function="=">
              <column table="a" column="kod_dog_type" />
              <const>52</const>
            </call>
            <const>'затраты заказчика'</const>
            <const>'б/н'</const>
          </call>
        </call>
        <call function="if" as="kod_dog_i" type="string" key="0">
          <call function="is not null">
            <call function="nullif">
              <call function="to_char">
                <column table="this" column="kod_dog" group="" />
              </call>
              <const>'-1'</const>
            </call>
          </call>
          <call function="||">
            <const>'1-'</const>
            <column table="this" column="kod_dog" group="" />
          </call>
          <call function="if" as="kod_dog_i" type="string">
            <call function="is not null">
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
            <call function="||">
              <const>'2-'</const>
              <column table="this" column="kod_ipr_dog" group="" />
            </call>
          </call>
        </call>
        <call function="if" as="name_i" type="string" title="Договор" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="name" />
          <column table="this" column="full_name" />
        </call>
        <call function="if" as="num_i" type="string" title="Номер договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="name_unig_dog" />
          <column table="this" column="name_x" />
        </call>
        <call function="if" as="date_i" type="date" title="Дата договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="dat_dog" />
          <column table="a" column="dat_podpis" />
        </call>
        <call function="if" as="date_end_i" type="date" title="Дата окончания договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_dog" column="dat_udal" />
          <column table="a" column="dat_udal" />
        </call>
        <call function="if" as="tip_i" type="string" title="Тип договора" key="0">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_dog" />
              <const>-1</const>
            </call>
          </call>
          <column table="kod_tip_dog" column="name" />
          <column table="kod_dog_type" column="name" />
        </call>
        <call function="nvl" as="status_i" title="Статус договора" key="0">
          <column table="status" column="name" />
          <!--<const>'-'</const>-->
          <call function="if">
            <call function="=">
              <column table="a" column="kod_dog_type" />
              <const>52</const>
            </call>
            <const>'-'</const>
            <const>'Плановый'</const>
          </call>
        </call>
        <call function="if" as="pr_kido" type="number" key="0">
          <call function="is null or -1">
            <column table="a" column="kod_dog" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_dogs" as="a">
          <link name="kod_dog" as="kod_dog1" table="is_dogovor" child="ipr_dogs" field="kod_dog" parent="is_dogovor" back="ipr_dogs" title="Подрядные договоры">
            <link name="kod_tip_dog" as="kod_tip_dog" table="is_spr_tip_dog" child="is_dogovor" field="kod_tip_dog" parent="is_spr_tip_dog" back="is_dogovor" />
            <link name="e_code" as="e_code" table="is_creditors" child="is_dogovor" field="e_code" parent="is_creditors" back="is_dogovor" title="Контрагенты" />
            <link name="status" as="status" table="is_status" child="is_dogovor" field="status" parent="is_status" back="is_dogovor" title="Статус" />
          </link>
          <link name="kod_ipr" as="kod_ipr" table="ipr_ipr_data" child="ipr_dogs" field="kod_ipr" parent="ipr_ipr_data" back="ipr_dogs">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_dop_contract" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
          </link>
          <dlink name="ipr_vid_zatrat_titul" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ipr_vid_zatrat_titul" table="ipr_vid_zatrat_titul" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul">
            <dimlink name="ipr_kod_zatrat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_smet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dimension="1" dname="ipr_dogs">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dimension="1" dname="ipr_dogs" title="Подрядные договоры">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kod_dog_type" join="left outer" dname="ipr_dogs">
          <!--добавил вручную фк нет-->
          <call function="=">
            <column table="a" column="kod_dog_type" />
            <column table="kod_dog_type" column="kodzatrat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_dop_rights" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_dop_rights.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_rights" type="number" as="kod_dop_rights" key="1" fixed="1"></column>
        <column table="a" column="kod_direct" type="number" as="kod_direct" key="0"></column>
        <column table="a" column="puser" type="string" title="" as="puser" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_dop_rights" as="a"></table>
      </from>
    </query>
    <query name="ipr_energy_eff" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_energy_eff.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" type="number" group="1" as="kod_ipr" key="1" fixed="1"></column>
        <column table="a" column="energ_eff_kvt" type="number" title="Показатель по энергетической эффективности реализации проектов, квтч" group="max" as="energ_eff_kvt" key="0"></column>
        <column table="a" column="energ_eff_proc" type="number" title="Показатель по энергетической эффективности реализации проектов, %" group="max" as="energ_eff_proc" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_energy_eff" as="a"></table>
      </from>
    </query>
    <query name="ipr_fact_wcompl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_fact_wcompl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fact_wcompl" type="number" as="kod_fact_wcompl" key="1" fixed="1"></column>
        <column table="a" column="kod_work_body" type="number" as="kod_work_body" reference="ipr_works_body" refcol="kod_work_body" key="0"></column>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="period" type="number" title="" as="period" reference="is_mes" refcol="mes" key="0"></column>
        <column table="a" column="summ" type="number" title="" as="summ" key="0"></column>
        <column table="a" column="summ_nds" type="number" title="" as="summ_nds" key="0"></column>
        <column table="a" column="comments" type="string" title="" as="comments" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_fact_wcompl" as="a"></table>
        <query name="isv_ip_vip_dog" as="kod_vip_dog" join="left outer" dname="ipr_fact_wcompl">
          <call function="=">
            <column table="a" column="kod_vip_dog"></column>
            <column table="kod_vip_dog" column="kod_vip_dog"></column>
          </call>
        </query>
        <query name="ipr_works_body" as="kod_work_body" join="left outer" dname="ipr_fact_wcompl">
          <call function="=">
            <column table="a" column="kod_work_body"></column>
            <column table="kod_work_body" column="kod_work_body"></column>
          </call>
        </query>
        <query name="is_mes" as="period" join="left outer" dname="ipr_fact_wcompl">
          <call function="=">
            <column table="a" column="period"></column>
            <column table="period" column="mes"></column>
          </call>
        </query>
        <query name="is_god" as="year" join="left outer" dname="ipr_fact_wcompl">
          <call function="=">
            <column table="a" column="year"></column>
            <column table="year" column="god"></column>
          </call>
        </query>
        <query name="isv_ip_vip_dog_for_plan" as="kod_vip_dog_for_plan" join="left outer" dname="ipr_fact_wcompl">
          <call function="=">
            <column table="a" column="kod_vip_dog"></column>
            <column table="kod_vip_dog_for_plan" column="kod_vip_dog"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_finplan_body" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_finplan_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_finplan_body" type="number" as="kod_finplan_body" key="1" fixed="1"></column>
        <column table="a" column="kod_finplan_head" type="number" as="kod_finplan_head" reference="ipr_finplan_head" refcol="kod_finplan_head" key="0"></column>
        <column table="a" column="period" type="number" title="" as="period" key="0"></column>
        <column table="a" column="plan_summ" type="number" title="Плановый объем финансирования без НДС" as="plan_summ" key="0"></column>
        <column table="a" column="plan_summ_nds" type="number" title="Плановый объем финансирования с НДС" as="plan_summ_nds" key="0"></column>
        <column table="a" column="fact_summ" type="number" title="" as="fact_summ" key="0"></column>
        <column table="a" column="fact_summ_nds" type="number" title="" as="fact_summ_nds" key="0"></column>
        <column table="a" column="wfact_summ" type="number" title="" as="wfact_summ" key="0"></column>
        <column table="a" column="wfact_summ_nds" type="number" title="" as="wfact_summ_nds" key="0"></column>
        <column table="a" column="closed" type="number" title="" as="closed" key="0"></column>
        <call function="+" as="ym" key="0">
          <call function="*">
            <column table="head" column="year" />
            <const>100</const>
          </call>
          <column table="a" column="period" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_finplan_body" as="a">
          <link name="kod_finplan_head" as="head" table="ipr_finplan_head" child="ipr_finplan_body" field="kod_finplan_head" parent="ipr_finplan_head" back="ipr_finplan_body" />
        </table>
        <query name="ipr_finplan_head" as="kod_finplan_head" join="left outer" dname="ipr_finplan_body">
          <call function="=">
            <column table="a" column="kod_finplan_head"></column>
            <column table="kod_finplan_head" column="kod_finplan_head"></column>
          </call>
        </query>
      </from>
      <where>
        <call function="!=0">
          <column table="a" column="plan_summ" />
          <column table="a" column="wfact_summ" />
        </call>
      </where>
    </query>
    <query name="ipr_finplan_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_finplan_head.xml" haskeys="1">
      <select>
        <column table="a" column="kod_finplan_head" type="number" as="kod_finplan_head" key="1" fixed="1"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="formdate" type="date" title="" as="formdate" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" reference="ipr_vid_zatrat_titul" refcol="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="comments" type="string" title="" as="comments" key="0"></column>
        <column table="a" column="is_last" type="number" title="" as="is_last" key="0"></column>
        <call function="if" as="pr_last" type="number" key="0">
          <call function="is null">
            <column table="ipr_v_docs_last" column="inc" dgroup="max" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_finplan_head" as="a">
          <dlink name="ipr_v_docs_last_finplan" as="ipr_v_docs_last" table="ipr_v_docs_last_finplan" child="ipr_v_docs_last_finplan" field="kod_finplan_head" parent="ipr_finplan_head" back="ipr_v_docs_last_finplan">
            <where>
              <call function="=">
                <column table="ipr_v_docs_last" column="inc" />
                <const>1</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_finplan_head">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_finplan_head" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="is_god" as="year" join="left outer" dname="ipr_finplan_head">
          <call function="=">
            <column table="a" column="year"></column>
            <column table="year" column="god"></column>
          </call>
        </query>
        <query name="ipr_vid_zatrat_titul" as="kod_vid_zatrat_titul" join="left outer" dname="ipr_finplan_head">
          <call function="=">
            <column table="a" column="kod_vid_zatrat_titul"></column>
            <column table="kod_vid_zatrat_titul" column="kod_vid_zatrat_titul"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_finsrc_lim" class="1" timestamp="17.08.2016 02:37:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_finsrc_lim.xml" haskeys="1">
      <select>
        <column table="a" column="kod_finsrc_lim" type="number" key="1" as="kod_finsrc_lim" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" />
        <column table="a" column="kvartal" type="number" title="" as="kvartal" />
        <column table="a" column="value_osv" type="number" title="" as="value_osv" />
        <column table="a" column="pf_pr" type="number" title="" as="pf_pr" />
        <column table="a" column="year" type="number" title="" as="year" />
        <column table="a" column="value_fin" type="number" title="" as="value_fin" />
        <column table="a" column="value_osv_nds" type="number" title="" as="value_osv_nds" />
        <column table="a" column="value_fin_nds" type="number" title="" as="value_fin_nds" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" />
        <column table="a" column="in_titul" type="number" title="" comment="строка для отображения в титуле, передается из этой же таблицы, копируется" as="in_titul" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" />
        <column table="a" column="value_vvod" type="number" title="" as="value_vvod" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_finsrc_lim" as="a" />
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_finsrc_lim">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query as="kod_ipr" join="left outer" name="ipr_ipr_data" dname="ipr_finsrc_lim">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_fix_smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_fix_smet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fix_smet" type="number" as="kod_fix_smet" key="1" fixed="1"></column>
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0"></column>
        <column table="a" column="kod_doc_smet" type="number" as="kod_doc_smet" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0"></column>
        <column table="a" column="doc_target_str" type="string" title="" as="doc_target_str" key="0"></column>
        <call function="if" as="pr_last" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_fix_smet" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_fix_smet" />
              </call>
              <call function="partition by">
                <column table="a" column="kod_titul_ip"></column>
                <column table="a" column="kod_doc_smet"></column>
                <column table="a" column="kod_doc_osn"></column>
                <column table="a" column="doc_target_str"></column>
              </call>
              <call function="order by rows * *">
                <column table="kod_doc_smet" column="doc_date"></column>
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_fix_smet" as="a">
          <link name="kod_doc_smet" as="kod_doc_smet" table="ipr_doc" child="ipr_fix_smet" field="kod_doc_smet" parent="ipr_doc" back="ipr_fix_smet_doc" />
        </table>
        <query name="ipr_doc" as="kod_doc_osn" dname="ipr_fix_smet_osn" join="left outer">
          <call function="=">
            <column table="a" column="kod_doc_osn"></column>
            <column table="kod_doc_osn" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_smet" dname="ipr_fix_smet_doc" join="left outer">
          <call function="=">
            <column table="a" column="kod_doc_smet"></column>
            <column table="kod_doc_smet" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_fix_smet" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_fix_smet">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_titul_ip"></column>
              <column table="kod_ipr" column="kod_titul_ip"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_doc_osn"></column>
              <column table="kod_ipr" column="kod_doc_osn"></column>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_hoz_sposob" class="1" timestamp="18.09.2017 12:27:43" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_hoz_sposob.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hoz_sposob" type="number" key="1" as="kod_hoz_sposob" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="year" type="number" title="" as="year" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="val" type="number" title="" agg="sum" is-fact="1" as="val" fact="ipr_hoz_sposob_val" />
        <column table="a" column="month" type="number" title="" comment="Номер месяца" as="month" />
        <column table="a" column="kod_character" type="number" comment="KOD_CHARACTER из IPR_CHARACTER" as="kod_character" />
        <column table="a" column="week" type="number" title="" comment="Номер недели" as="week" />
        <call function="num to ym2" as="ym" dimension="ipr_ym">
          <column table="a" column="year" type="number" format="N0" />
          <column table="a" column="month" type="number" format="N0" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_hoz_sposob" as="a">
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_hoz_sposob" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_hoz_sposob" title="Титулы">
            <dimlink name="evd_pr_vip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_pr_ostatok" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_year_srok" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_otch_list_3" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_fl_build" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_dt_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_kodres" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="evd_pr_hoz_sposob" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="id_slice" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_ispolnit" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="evd_kod_filial_tit" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dimension="1" dname="ipr_hoz_sposob" title="Титулы">
          <call function="=">
            <column table="kod_titul_ip" column="kod_titul_ip" />
            <column table="a" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_ipr_data" class="1" timestamp="07.12.2017 12:33:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_ipr_data.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" type="number" key="1" as="kod_ipr" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" />
        <column table="a" column="kod_status" type="number" as="kod_status" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="date_add" type="date" title="" as="date_add" />
        <column table="a" column="kod_klass" type="number" as="kod_klass" />
        <column table="a" column="kod_razdel" type="number" as="kod_razdel" reference="ips_razdel_ip" refcol="kod_razdel" />
        <column table="a" column="kod_priority_insert_ip" type="number" as="kod_priority_insert_ip" />
        <column table="a" column="kod_kriteria" type="number" as="kod_kriteria" />
        <column table="a" column="kod_priority" type="number" as="kod_priority" reference="ips_priority" refcol="kod_priority" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="beg_period" type="number" title="" as="beg_period" />
        <column table="a" column="end_period" type="number" title="" as="end_period" />
        <column table="a" column="beg_year" type="number" title="" as="beg_year" />
        <column table="a" column="end_year" type="number" title="" as="end_year" />
        <column table="a" column="kod_prin_soc_val" type="number" as="kod_prin_soc_val" reference="ips_type_titul" refcol="kod_type" />
        <column table="a" column="kod_type" type="number" as="kod_type" />
        <column table="a" column="kod_vid_zajavki" type="number" as="kod_vid_zajavki" />
        <column table="a" column="prin_sogl" type="number" title="" as="prin_sogl" />
        <column table="a" column="kod_krit_minenergo" type="number" as="kod_krit_minenergo" />
        <column table="a" column="in_ozp" type="number" title="" as="in_ozp" />
        <column table="a" column="mode_balance_req" type="number" title="" as="mode_balance_req" />
        <column table="a" column="solution_task" type="string" title="" as="solution_task" />
        <column table="a" column="proj_target" type="string" title="" as="proj_target" />
        <column table="a" column="num_lev_1" type="number" title="" as="num_lev_1" />
        <column table="a" column="num_lev_2" type="number" title="" as="num_lev_2" />
        <column table="a" column="comments" type="string" title="" as="comments" />
        <column table="a" column="kod_progpartner" type="number" as="kod_progpartner" />
        <column table="a" column="address" type="string" title="" as="address" />
        <column table="a" column="nz" type="number" title="" comment="Аварийный запас" as="nz" />
        <column table="a" column="kod_subrazdel" type="number" as="kod_subrazdel" />
        <call function="||" as="kod_minenergo">
          <const>'2-'</const>
          <column table="this" column="kod_razdel" />
          <const>'-'</const>
          <call function="nvl" nvl="999">
            <column table="kod_main_ipr_ipr_data" column="kod_krit_minenergo" />
            <column table="this" column="kod_krit_minenergo" />
          </call>
        </call>
        <call function="if" as="kod_razdel_rs">
          <call function="is null">
            <column table="this" column="kod_razdel" />
          </call>
          <call function="to_char">
            <call function="nvl" nvl="999">
              <column table="kod_main_klass" column="kod_parent" dgroup="max" />
              <column table="kod_main_klass" column="kod_klass" dgroup="max" />
            </call>
          </call>
          <call function="||">
            <call function="to_char">
              <column table="this" column="kod_razdel" />
            </call>
            <const>'-'</const>
            <call function="to_char">
              <call function="nvl" nvl="999">
                <column table="kod_main_klass" column="kod_parent" dgroup="max" />
                <column table="kod_main_klass" column="kod_klass" dgroup="max" />
              </call>
            </call>
          </call>
        </call>
        <call function="if" as="pr_last" type="number">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_ipr" />
              </call>
              <call function="partition by">
                <column table="a" column="kod_titul_ip" />
                <column table="a" column="kod_doc_osn" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="pr_last_for_tit" type="number">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <call function="over">
              <call function="max">
                <column table="a" column="kod_ipr" />
              </call>
              <call function="partition by">
                <column table="a" column="kod_titul_ip" />
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="ipr_energy_eff" column="energ_eff_kvt" as="energ_eff_kvt" />
        <column table="ipr_energy_eff" column="energ_eff_proc" as="energ_eff_proc" />
        <column table="val14" column="nvalue" dgroup="max" as="km" title="Протяженность ВЛ, км" type="number" />
        <column table="val18" column="nvalue" dgroup="max" as="km_kl" title="Протяженность КЛ, км" type="number" />
        <column table="val13" column="nvalue" dgroup="max" as="pow" type="number" title="Мощность, МВА" />
        <column table="val12" column="nvalue" dgroup="max" as="kvo_tr" type="number" title="Кол-во трансформаторов (шт)" />
        <column table="val17" column="value" dgroup="max" as="mark_tr" type="string" title="Марка силовых трансформаторов" />
        <column table="val16" column="nvalue" dgroup="max" as="other" type="number" title="Прочие, шт" />
        <column table="val3" column="value" dgroup="max" as="mark_kb" type="string" title="Марка кабеля" />
        <column table="val1" column="value" dgroup="max" as="tip_op" type="string" title="Тип опор" />
        <column table="val15" column="nvalue" dgroup="max" as="h_ps_tp" type="number" title="ПС ТП, шт" />
        <column table="val4" column="value" dgroup="max" as="h_ru_110" type="string" title="Тип РУ 110 кВ" />
        <column table="val5" column="value" dgroup="max" as="h_ru_35" type="string" title="Тип РУ 35 кВ" />
        <column table="val6" column="value" dgroup="max" as="h_ru_10" type="string" title="Тип РУ 10 кВ" />
        <column table="val7" column="value" dgroup="max" as="h_ru_6" type="string" title="Тип РУ 6 кВ" />
        <column table="val8" column="nvalue" dgroup="max" as="h_cnt_110" type="number" title="Количество ячеек 110 кВ" />
        <column table="val9" column="nvalue" dgroup="max" as="h_cnt_35" type="number" title="Количество ячеек 35 кВ" />
        <column table="val10" column="nvalue" dgroup="max" as="h_cnt_10" type="number" title="Количество ячеек 10 кВ" />
        <column table="val11" column="nvalue" dgroup="max" as="h_cnt_6" type="number" title="Количество ячеек 6 кВ" />
        <column table="val14" column="old_value" dgroup="max" as="km_do" title="Протяженность ВЛ,  км" type="number" />
        <column table="val18" column="old_value" dgroup="max" as="km_kl_do" title="Протяженность КЛ,  км" type="number" />
        <column table="val13" column="old_value" dgroup="max" as="pow_do" type="number" title="Мощность, МВА" />
        <column table="val12" column="old_value" dgroup="max" as="kvo_tr_do" type="number" title="Кол-во трансформаторов (шт)" />
        <column table="val17" column="old_value" dgroup="max" as="mark_tr_do" type="string" title="Марка силовых трансформаторов" />
        <column table="val16" column="old_value" dgroup="max" as="other_do" type="number" title="Прочие, шт" />
        <column table="val3" column="old_value" dgroup="max" as="mark_kb_do" type="string" title="Марка кабеля" />
        <column table="val1" column="old_value" dgroup="max" as="tip_op_do" type="string" title="Тип опор" />
        <column table="val14" column="value_dem" dgroup="max" as="km_del" title="Протяженность ВЛ, км" type="number" />
        <column table="val18" column="value_dem" dgroup="max" as="km_kl_del" title="Протяженность КЛ, км" type="number" />
        <column table="val13" column="value_dem" dgroup="max" as="pow_del" type="number" title="Мощность, МВА" />
        <column table="val16" column="value_dem" dgroup="max" as="other_del" type="number" title="Прочие, шт" />
        <call function="-nvl" as="km_change" title="Протяженность ВЛ, км">
          <column table="this" column="km" />
          <column table="this" column="km_del" />
        </call>
        <call function="-nvl" as="km_kl_change" title="Протяженность КЛ, км">
          <column table="this" column="km_kl" />
          <column table="this" column="km_kl_del" />
        </call>
        <call function="-nvl" as="pow_change" title="Мощность, МВА">
          <column table="this" column="pow" />
          <column table="this" column="pow_del" />
        </call>
        <call function="-nvl" as="other_change" title="Прочие, шт">
          <column table="this" column="other" />
          <column table="this" column="other_del" />
        </call>
        <call function="nvl" as="kod_main_titul" type="number">
          <call function="nullif">
            <column table="a" column="kod_parent" />
            <const>-1</const>
          </call>
          <column table="a" column="kod_titul_ip" />
        </call>
        <call function="if" as="kod_child_titul" type="number">
          <call function="is not null">
            <call function="nullif">
              <column table="a" column="kod_parent" />
              <const>-1</const>
            </call>
          </call>
          <column table="a" column="kod_titul_ip" />
        </call>
        <column table="ipr_dogs_pr" column="kod_ipr_dog" as="kod_ipr_dog_pr" dgroup="max" />
        <call function="if" as="itip" type="string" title="Тип титула">
          <call function="=">
            <column table="kod_titul_ip" column="itip" />
            <const>'Одиночный/Дочерний'</const>
          </call>
          <call function="if">
            <call function="gt">
              <column table="this" column="kod_parent" />
              <const>0</const>
            </call>
            <const>'Дочерний'</const>
            <const>'Одиночный'</const>
          </call>
          <column table="kod_titul_ip" column="itip" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_ipr_data" as="a">
          <dlink name="ipv_phys_param_values" as="val14" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val14" column="kod_phis_param" />
                <const>14</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val18" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val18" column="kod_phis_param" />
                <const>18</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val13" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val13" column="kod_phis_param" />
                <const>13</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val12" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val12" column="kod_phis_param" />
                <const>12</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val17" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val17" column="kod_phis_param" />
                <const>17</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val16" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val16" column="kod_phis_param" />
                <const>16</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val3" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val3" column="kod_phis_param" />
                <const>3</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val1" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val1" column="kod_phis_param" />
                <const>1</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val15" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val15" column="kod_phis_param" />
                <const>15</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val4" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val4" column="kod_phis_param" />
                <const>4</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val5" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val5" column="kod_phis_param" />
                <const>5</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val6" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val6" column="kod_phis_param" />
                <const>6</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val7" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val7" column="kod_phis_param" />
                <const>7</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val8" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val8" column="kod_phis_param" />
                <const>8</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val9" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val9" column="kod_phis_param" />
                <const>9</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val10" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val10" column="kod_phis_param" />
                <const>10</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipv_phys_param_values" as="val11" table="ipv_phys_param_values" child="ipv_phys_param_values" field="kod_ipr" parent="ipr_ipr_data" back="ipv_phys_param_values">
            <where>
              <call function="=">
                <column table="val11" column="kod_phis_param" />
                <const>11</const>
              </call>
            </where>
          </dlink>
          <dlink name="ipr_dogs" as="ipr_dogs_pr" table="ipr_dogs" child="ipr_dogs" field="kod_ipr" parent="ipr_ipr_data" back="ipr_dogs">
            <where>
              <call function="and">
                <call function="=">
                  <call function="nvl">
                    <column table="ipr_dogs_pr" column="kod_dog" />
                    <const>-1</const>
                  </call>
                  <const>-1</const>
                </call>
                <call function="in">
                  <column table="ipr_dogs_pr" column="kod_dog_type" />
                  <call function="array">
                    <const>52</const>
                    <const>56</const>
                  </call>
                </call>
              </call>
            </where>
          </dlink>
          <dlink name="vr_tree_ipr" as="vr_tree_ipr" table="vr_tree_ipr" child="vr_tree_ipr" field="kod_ipr" parent="ipr_ipr_data" back="vr_tree_ipr">
            <link name="kod_tree" dimension="1" as="kod_tree" table="vr_tree" child="vr_tree_ipr" field="kod_tree" parent="vr_tree" back="vr_tree_ipr" />
          </dlink>
          <dlink name="ipr_report_dop" dimension="1" as="ipr_report_dop" table="ipr_report_dop" child="ipr_report_dop" field="kod_ipr" parent="ipr_ipr_data" back="ipr_report_dop" />
          <dlink name="ipr_sost_del" as="ipr_sost_del" table="ipr_sost_del" child="ipr_sost_del" field="kod_ipr" parent="ipr_ipr_data" back="ipr_sost_del" />
          <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы">
            <dimlink name="kod_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dimension="1" dname="ipr_ipr_data" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_parent" dname="ipr_ipr_data_child" join="left outer" title="Титулы">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_osn" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="a" column="kod_doc_osn" />
            <column table="kod_doc_osn" column="kod_doc" />
          </call>
        </query>
        <query name="is_status" as="kod_status" join="left outer" dname="ipr_ipr_data" title="Статус">
          <call function="=">
            <column table="a" column="kod_status" />
            <column table="kod_status" column="status" />
          </call>
        </query>
        <query name="ips_priority" as="kod_priority" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="a" column="kod_priority" />
            <column table="kod_priority" column="kod_priority" />
          </call>
        </query>
        <query name="ips_type_titul" as="kod_prin_soc_val" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="a" column="kod_prin_soc_val" />
            <column table="kod_prin_soc_val" column="kod_type" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_ipr_data" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel" column="kod_razdel" />
            <column table="a" column="kod_razdel" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="a" column="kod_doc_osn" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="is_status" as="status" join="left outer" dname="ipr_ipr_data" title="Статус">
          <call function="=">
            <column table="a" column="kod_status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="ipr_energy_eff" as="ipr_energy_eff" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="ipr_energy_eff" column="kod_ipr" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_kriteria" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="this" column="kod_kriteria" />
            <column table="kod_kriteria" column="kod_kriteria" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_priority_insert_ip" dname="ipr_ipr_data_prior_ins_ip" join="left outer">
          <call function="=">
            <column table="this" column="kod_priority_insert_ip" />
            <column table="kod_priority_insert_ip" column="kod_kriteria" />
          </call>
        </query>
        <query name="ips_klass_titul" as="kod_klass" join="left outer" dname="ipr_ipr_data" title="Принадлежность к важн. объекта, программам">
          <call function="=">
            <column table="this" column="kod_klass" />
            <column table="kod_klass" column="kod_klass" />
          </call>
        </query>
        <query name="ips_vid_zajavki" as="kod_vid_zajavki" join="left outer" title="Направление инвестиций" dname="ipr_ipr_data">
          <call function="=">
            <column table="this" column="kod_vid_zajavki" />
            <column table="kod_vid_zajavki" column="kod_vid_z" />
          </call>
        </query>
        <query name="ipv_razdel_rs" as="kod_razdel_rs" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="kod_razdel_rs" column="kod_klass" />
            <column table="this" column="kod_razdel_rs" />
          </call>
        </query>
        <query name="ipv_razdel_mn" as="kod_minenergo" join="left outer" dname="ipr_ipr_data">
          <call function="=">
            <column table="kod_minenergo" column="kod_minenergo" />
            <column table="this" column="kod_minenergo" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_main_titul" dname="ipr_ipr_data_main" join="left outer" title="Титулы">
          <call function="=">
            <column table="this" column="kod_main_titul" />
            <column table="kod_main_titul" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_main_ipr_ipr_data" join="left outer" dname="ipr_ipr_data">
          <call function="and">
            <call function="=">
              <column table="kod_main_ipr_ipr_data" column="kod_titul_ip" />
              <column table="this" column="kod_main_titul" />
            </call>
            <call function="=">
              <column table="kod_main_ipr_ipr_data" column="kod_doc_osn" />
              <column table="a" column="kod_doc_osn" />
            </call>
          </call>
          <link name="kod_klass" as="kod_main_klass" table="ips_klass_titul" child="ipr_ipr_data" field="kod_klass" parent="ips_klass_titul" back="ipr_ipr_data" title="Принадлежность к важн. объекта, программам" />
        </query>
        <query name="ipr_titul_ip" as="kod_child_titul" dname="ipr_ipr_data_main" join="left outer" title="Титулы">
          <call function="=">
            <column table="this" column="kod_child_titul" />
            <column table="kod_child_titul" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_ip_by_year" class="1" description="Годы инвестпроектов" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_ip_by_year.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="1" fixed="1" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="summ_limit" type="number" title="" as="summ_limit" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="kod_kriteria" type="number" as="kod_kriteria" reference="ips_kriteria" refcol="kod_kriteria" key="0" />
        <column table="a" column="kod_priority" type="number" as="kod_priority" key="0" />
        <column table="a" column="kod_finance" type="number" as="kod_finance" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="kod_status" type="number" as="kod_status" reference="is_status" refcol="status" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_klass" type="number" as="kod_klass" reference="ips_klass_titul" refcol="kod_klass" key="0" />
        <column table="a" column="kod_razdel" type="number" as="kod_razdel" reference="ips_razdel_ip" refcol="kod_razdel" key="0" />
        <column table="a" column="kod_priority_insert_ip" type="number" as="kod_priority_insert_ip" reference="ips_kriteria" refcol="kod_kriteria" key="0" />
        <column table="a" column="kod_ipr" type="number" comment="код программы, объединяющий несколько лет сразу" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="year_add" type="number" title="" comment="год, когда добавили эту программа (корректировку)" as="year_add" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_ip_by_year" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_ip_by_year" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_priority_insert_ip" dname="ipr_ip_by_year_prior_ins_ip" join="left outer">
          <call function="=">
            <column table="a" column="kod_priority_insert_ip" />
            <column table="kod_priority_insert_ip" column="kod_kriteria" />
          </call>
        </query>
        <query name="is_status" as="kod_status" join="left outer" dname="ipr_ip_by_year" title="Статус">
          <call function="=">
            <column table="a" column="kod_status" />
            <column table="kod_status" column="status" />
          </call>
        </query>
        <query name="ips_klass_titul" as="kod_klass" join="left outer" dname="ipr_ip_by_year" title="Принадлежность к важн. объекта, программам">
          <call function="=">
            <column table="a" column="kod_klass" />
            <column table="kod_klass" column="kod_klass" />
          </call>
        </query>
        <query name="ips_kriteria" as="kod_kriteria" join="left outer" dname="ipr_ip_by_year">
          <call function="=">
            <column table="a" column="kod_kriteria" />
            <column table="kod_kriteria" column="kod_kriteria" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_ip_by_year">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_ip_by_year" title="Раздел ИПР">
          <call function="=">
            <column table="a" column="kod_razdel" />
            <column table="kod_razdel" column="kod_razdel" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_izmen" class="1" timestamp="14.03.2017 21:58:07" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_izmen.xml" haskeys="1">
      <select>
        <column table="a" column="kod_table" type="number" as="kod_table" key="1" fixed="1" />
        <column table="a" column="izm_date" type="date" title="Дата изменения данных" as="izm_date" key="0" />
        <column table="a" column="action" type="string" title="" as="action" key="0" />
        <column table="a" column="izmen" type="string" title="" as="izmen" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod" type="number" title="" as="kod" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_izmen" as="a" />
      </from>
    </query>
    <query name="ipr_kapitalvloz_body" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_kapitalvloz_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kapitalvloz_body" type="number" as="kod_kapitalvloz_body" key="1" fixed="1"></column>
        <column table="a" column="kod_kapitalvloz_head" type="number" as="kod_kapitalvloz_head" reference="ipr_kapitalvloz_head" refcol="kod_kapitalvloz_head" key="0"></column>
        <column table="a" column="plan_summ" type="number" title="Плановый объем освоения без НДС" as="plan_summ" key="0"></column>
        <column table="a" column="plan_summ_nds" type="number" title="Плановый объем освоения с НДС" as="plan_summ_nds" key="0"></column>
        <column table="a" column="period" type="number" title="" as="period" key="0"></column>
        <column table="a" column="fact_summ" type="number" title="" as="fact_summ" key="0"></column>
        <column table="a" column="fact_summ_nds" type="number" title="" as="fact_summ_nds" key="0"></column>
        <column table="a" column="wfact_summ" type="number" title="" as="wfact_summ" key="0"></column>
        <column table="a" column="wfact_summ_nds" type="number" title="" as="wfact_summ_nds" key="0"></column>
        <column table="a" column="closed" type="number" title="" as="closed" key="0"></column>
        <call function="+" as="ym" key="0">
          <call function="*">
            <column table="head" column="year" />
            <const>100</const>
          </call>
          <column table="a" column="period" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_kapitalvloz_body" as="a">
          <link name="kod_kapitalvloz_head" as="head" table="ipr_kapitalvloz_head" child="ipr_kapitalvloz_body" field="kod_kapitalvloz_head" parent="ipr_kapitalvloz_head" back="ipr_kapitalvloz_body" />
        </table>
        <query name="ipr_kapitalvloz_head" as="kod_kapitalvloz_head" join="left outer" dname="ipr_kapitalvloz_body">
          <call function="=">
            <column table="a" column="kod_kapitalvloz_head"></column>
            <column table="kod_kapitalvloz_head" column="kod_kapitalvloz_head"></column>
          </call>
        </query>
      </from>
      <where>
        <call function="!=0">
          <column table="a" column="plan_summ" />
          <column table="a" column="wfact_summ" />
        </call>
      </where>
    </query>
    <query name="ipr_kapitalvloz_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_kapitalvloz_head.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kapitalvloz_head" type="number" as="kod_kapitalvloz_head" key="1" fixed="1"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" reference="ipr_vid_zatrat_titul" refcol="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="comments" type="string" title="" as="comments" key="0"></column>
        <column table="a" column="formdate" type="date" title="" as="formdate" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="is_last" type="number" title="" as="is_last" key="0"></column>
        <call function="if" as="pr_last" type="number" key="0">
          <call function="is null">
            <column table="ipr_v_docs_last" column="inc" dgroup="max" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_kapitalvloz_head" as="a">
          <dlink name="ipr_v_docs_last_okv" as="ipr_v_docs_last" table="ipr_v_docs_last_okv" child="ipr_v_docs_last_okv" field="kod_kapitalvloz_head" parent="ipr_kapitalvloz_head" back="ipr_v_docs_last_okv">
            <where>
              <call function="=">
                <column table="ipr_v_docs_last" column="inc" />
                <const>1</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_kapitalvloz_head">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_kapitalvloz_head" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_vid_zatrat_titul" as="kod_vid_zatrat_titul" join="left outer" dname="ipr_kapitalvloz_head">
          <call function="=">
            <column table="a" column="kod_vid_zatrat_titul"></column>
            <column table="kod_vid_zatrat_titul" column="kod_vid_zatrat_titul"></column>
          </call>
        </query>
        <query name="is_god" as="year" join="left outer" dname="ipr_kapitalvloz_head">
          <call function="=">
            <column table="a" column="year"></column>
            <column table="year" column="god"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_move_wsumm" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_move_wsumm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_move_wsumm" type="number" as="kod_move_wsumm" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="kod_tituls_object_from" type="number" as="kod_tituls_object_from" key="0"></column>
        <column table="a" column="kod_tituls_object_to" type="number" as="kod_tituls_object_to" key="0"></column>
        <column table="a" column="old_summ" type="number" title="" as="old_summ" key="0"></column>
        <column table="a" column="new_summ" type="number" title="" as="new_summ" key="0"></column>
        <column table="a" column="summ" type="number" title="" as="summ" key="0"></column>
        <column table="a" column="kod_fact_wcompl_fr" type="number" as="kod_fact_wcompl_fr" reference="ipr_fact_wcompl" refcol="kod_fact_wcompl" key="0"></column>
        <column table="a" column="kod_fact_wcompl_to" type="number" as="kod_fact_wcompl_to" reference="ipr_fact_wcompl" refcol="kod_fact_wcompl" key="0"></column>
        <column table="a" column="old_summ_nds" type="number" title="" as="old_summ_nds" key="0"></column>
        <column table="a" column="new_summ_nds" type="number" title="" as="new_summ_nds" key="0"></column>
        <column table="a" column="summ_nds" type="number" title="" as="summ_nds" key="0"></column>
        <column table="a" column="kod_titul_ip_fr" type="number" as="kod_titul_ip_fr" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_titul_ip_to" type="number" as="kod_titul_ip_to" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_move_wsumm" as="a"></table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_move_wsumm">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_fact_wcompl" as="kod_fact_wcompl_fr" dname="ipr_move_wsumm_fr" join="left outer">
          <call function="=">
            <column table="a" column="kod_fact_wcompl_fr"></column>
            <column table="kod_fact_wcompl_fr" column="kod_fact_wcompl"></column>
          </call>
        </query>
        <query name="ipr_fact_wcompl" as="kod_fact_wcompl_to" dname="ipr_move_wsumm_to" join="left outer">
          <call function="=">
            <column table="a" column="kod_fact_wcompl_to"></column>
            <column table="kod_fact_wcompl_to" column="kod_fact_wcompl"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip_to" join="left outer" dname="ipr_move_wsumm" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip_to"></column>
            <column table="kod_titul_ip_to" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip_fr" join="left outer" dname="ipr_move_wsumm" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip_fr"></column>
            <column table="kod_titul_ip_fr" column="kod_titul_ip"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_move_wsumm_fin" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_move_wsumm_fin.xml" haskeys="1">
      <select>
        <column table="a" column="kod_move_wsumm_fin" type="number" as="kod_move_wsumm_fin" key="1" fixed="1" />
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="0" />
        <column table="a" column="kod_move_wsumm" type="number" as="kod_move_wsumm" reference="ipr_move_wsumm" refcol="kod_move_wsumm" key="0" />
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" reference="isv_ip_opl" refcol="kod_opl_period" key="0" />
        <column table="a" column="summ" type="number" title="" as="summ" key="0" />
        <column table="a" column="summ_nds" type="number" title="" as="summ_nds" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_move_wsumm_fin" as="a" />
        <query name="ipr_move_wsumm" as="kod_move_wsumm" join="left outer" dname="ipr_move_wsumm_fin">
          <call function="=">
            <column table="a" column="kod_move_wsumm" />
            <column table="kod_move_wsumm" column="kod_move_wsumm" />
          </call>
        </query>
        <query name="isv_ip_opl" as="kod_opl_period" join="left outer" dname="ipr_move_wsumm_fin">
          <call function="=">
            <column table="a" column="kod_opl_period" />
            <column table="kod_opl_period" column="kod_opl_period" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_planfactanaliz" class="1" timestamp="19.01.2017 23:38:13" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_planfactanaliz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_planfactanaliz" type="number" as="kod_planfactanaliz" key="1" fixed="1" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="kvl_krit" type="number" title="" as="kvl_krit" reference="ips_kriteria_otklon" refcol="kod_kriteria_otklon" key="0" />
        <column table="a" column="kvl_prim" type="string" title="Причина отклонения по освоению" as="kvl_prim" key="0" />
        <column table="a" column="fin_krit" type="number" title="" as="fin_krit" reference="ips_kriteria_otklon" refcol="kod_kriteria_otklon" key="0" />
        <column table="a" column="fin_prim" type="string" title="Причина отклонения по финансированию" as="fin_prim" key="0" />
        <column table="a" column="vv_krit" type="number" title="" as="vv_krit" reference="ips_kriteria_otklon" refcol="kod_kriteria_otklon" key="0" />
        <column table="a" column="vv_prim" type="string" title="Причина отклонения по вводу" as="vv_prim" key="0" />
        <column table="a" column="mba_prim" type="string" title="Причина отклонения по вводу МВА" description="Причина отклонения по вводу физических параметров МВА" as="mba_prim" key="0" />
        <column table="a" column="km_prim" type="string" title="" description="Причина отклонения по вводу физических параметров КМ" as="km_prim" key="0" />
        <column table="a" column="kvart" type="number" title="" as="kvart" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0" />
        <column table="a" column="year" type="number" title="" as="year" key="0" />
        <column table="a" column="kvl_wprim" type="string" title="" as="kvl_wprim" key="0" />
        <column table="a" column="fin_wprim" type="string" title="" as="fin_wprim" key="0" />
        <column table="a" column="vv_wprim" type="string" title="" as="vv_wprim" key="0" />
        <column table="a" column="mba_wprim" type="string" title="" as="mba_wprim" key="0" />
        <column table="a" column="km_wprim" type="string" title="" as="km_wprim" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_planfactanaliz" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_planfactanaliz">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ips_kriteria_otklon" as="kvl_krit" join="left outer" dname="ipr_planfactanaliz">
          <call function="=">
            <column table="a" column="kvl_krit" />
            <column table="kvl_krit" column="kod_kriteria_otklon" />
          </call>
        </query>
        <query name="ips_kriteria_otklon" as="fin_krit" join="left outer" dname="ipr_planfactanaliz">
          <call function="=">
            <column table="a" column="fin_krit" />
            <column table="fin_krit" column="kod_kriteria_otklon" />
          </call>
        </query>
        <query name="ips_kriteria_otklon" as="vv_krit" join="left outer" dname="ipr_planfactanaliz">
          <call function="=">
            <column table="a" column="vv_krit" />
            <column table="vv_krit" column="kod_kriteria_otklon" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_doc"></column>
          <column table="kod_ipr" column="kod_doc_osn"></column>
        </call>
      </where>
    </query>
    <query name="ipr_power_body" class="1" timestamp="01.08.2017 11:36:40" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_power_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_plan_power" type="number" as="kod_plan_power" key="1" fixed="1" />
        <column table="a" column="year" type="number" title="" as="year" key="0" />
        <column table="a" column="period" type="number" title="" as="period" key="0" />
        <column table="a" column="mba" type="number" title="Ввод мва план" as="mba" key="0" />
        <column table="a" column="km" type="number" title="Ввод км ВЛ план" as="km" key="0" />
        <column table="a" column="cnt" type="number" title="Ввод шт план" as="cnt" key="0" />
        <column table="a" column="kod_tituls_object" type="number" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="kod_power_head" type="number" as="kod_power_head" reference="ipr_power_head" refcol="kod_power_head" key="0" />
        <column table="a" column="mba_fact" type="number" title="Ввод мва факт" as="mba_fact" key="0" />
        <column table="a" column="km_fact" type="number" title="Ввод км ВЛ факт" as="km_fact" key="0" />
        <column table="a" column="cnt_fact" type="number" title="Ввод шт факт" as="cnt_fact" key="0" />
        <column table="a" column="cnt_proch" type="number" title="" as="cnt_proch" key="0" />
        <column table="a" column="cnt_proch_fact" type="number" title="" as="cnt_proch_fact" key="0" />
        <column table="a" column="mba_ekspl" type="number" title="" as="mba_ekspl" key="0" />
        <column table="a" column="km_ekspl" type="number" title="" as="km_ekspl" key="0" />
        <column table="a" column="cnt_ekspl" type="number" title="" as="cnt_ekspl" key="0" />
        <column table="a" column="cnt_proch_ekspl" type="number" title="" as="cnt_proch_ekspl" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0" />
        <column table="a" column="mba_wfact" type="number" title="" as="mba_wfact" key="0" />
        <column table="a" column="km_wfact" type="number" title="" as="km_wfact" key="0" />
        <column table="a" column="cnt_wfact" type="number" title="" as="cnt_wfact" key="0" />
        <column table="a" column="cnt_proch_wfact" type="number" title="" as="cnt_proch_wfact" key="0" />
        <column table="a" column="mba_wfact_pr" type="number" title="" comment="_pr - прирост" as="mba_wfact_pr" key="0" />
        <column table="a" column="km_wfact_pr" type="number" title="" as="km_wfact_pr" key="0" />
        <column table="a" column="cnt_wfact_pr" type="number" title="" as="cnt_wfact_pr" key="0" />
        <column table="a" column="cnt_proch_wfact_pr" type="number" title="" as="cnt_proch_wfact_pr" key="0" />
        <column table="a" column="mba_pr" type="number" title="Прирост мва план" as="mba_pr" key="0" />
        <column table="a" column="km_pr" type="number" title="Прирост км ВЛ план" as="km_pr" key="0" />
        <column table="a" column="cnt_pr" type="number" title="Прирост шт план" as="cnt_pr" key="0" />
        <column table="a" column="cnt_proch_pr" type="number" title="" as="cnt_proch_pr" key="0" />
        <column table="a" column="mba_fact_pr" type="number" title="Прирост мва факт" as="mba_fact_pr" key="0" />
        <column table="a" column="km_fact_pr" type="number" title="Прирост км ВЛ факт" as="km_fact_pr" key="0" />
        <column table="a" column="cnt_fact_pr" type="number" title="Прирост шт" as="cnt_fact_pr" key="0" />
        <column table="a" column="cnt_proch_fact_pr" type="number" title="" as="cnt_proch_fact_pr" key="0" />
        <column table="a" column="km_kl" type="number" title="Ввод КЛ км план" as="km_kl" key="0" />
        <column table="a" column="km_kl_fact" type="number" title="Ввод КЛ км факт" as="km_kl_fact" key="0" />
        <column table="a" column="km_kl_ekspl" type="number" title="" as="km_kl_ekspl" key="0" />
        <column table="a" column="km_kl_wfact" type="number" title="" as="km_kl_wfact" key="0" />
        <column table="a" column="km_kl_wfact_pr" type="number" title="" as="km_kl_wfact_pr" key="0" />
        <column table="a" column="km_kl_pr" type="number" title="Прирост КЛ км план" as="km_kl_pr" key="0" />
        <column table="a" column="km_kl_fact_pr" type="number" title="Прирост КЛ км факт" as="km_kl_fact_pr" key="0" />
        <column table="a" column="km_vl_2c" type="number" title="" as="km_vl_2c" key="0" />
        <column table="a" column="km_vl_2c_fact" type="number" title="" as="km_vl_2c_fact" key="0" />
        <column table="a" column="km_vl_2c_ekspl" type="number" title="" as="km_vl_2c_ekspl" key="0" />
        <column table="a" column="km_vl_2c_wfact" type="number" title="" as="km_vl_2c_wfact" key="0" />
        <column table="a" column="km_vl_2c_wfact_pr" type="number" title="" as="km_vl_2c_wfact_pr" key="0" />
        <column table="a" column="km_vl_2c_pr" type="number" title="" as="km_vl_2c_pr" key="0" />
        <column table="a" column="km_vl_2c_fact_pr" type="number" title="" as="km_vl_2c_fact_pr" key="0" />
        <call function="-nvl" as="km_del" key="0">
          <column table="a" column="km" />
          <column table="a" column="km_pr" />
        </call>
        <call function="-nvl" as="km_kl_del" key="0">
          <column table="a" column="km_kl" />
          <column table="a" column="km_kl_pr" />
        </call>
        <call function="-nvl" as="mba_del" key="0">
          <column table="a" column="mba" />
          <column table="a" column="mba_pr" />
        </call>
        <call function="+" as="ym" key="0">
          <call function="*">
            <column table="head" column="year" />
            <const>100</const>
          </call>
          <column table="a" column="period" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_power_body" as="a">
          <link name="kod_power_head" as="head" table="ipr_power_head" child="ipr_power_body" field="kod_power_head" parent="ipr_power_head" back="ipr_power_body" />
        </table>
        <query name="is_god" as="year" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="year" />
            <column table="year" column="god" />
          </call>
        </query>
        <query name="is_mes" as="period" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="period" />
            <column table="period" column="mes" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_power_head" as="kod_power_head" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="kod_power_head" />
            <column table="kod_power_head" column="kod_power_head" />
          </call>
        </query>
        <query name="is_mes" as="mes" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="period" />
            <column table="mes" column="mes" />
          </call>
        </query>
        <query name="is_god" as="god" join="left outer" dname="ipr_power_body">
          <call function="=">
            <column table="a" column="year" />
            <column table="god" column="god" />
          </call>
        </query>
      </from>
      <where>
        <call function="!=0">
          <column table="a" column="mba_fact" type="number" title="Ввод мва факт" />
          <column table="a" column="km_fact" type="number" title="Ввод км ВЛ факт" />
          <column table="a" column="cnt_fact" type="number" title="Ввод шт факт" />
          <column table="a" column="cnt_proch" type="number" title="" />
          <column table="a" column="cnt_proch_fact" type="number" title="" />
          <column table="a" column="mba_ekspl" type="number" title="" />
          <column table="a" column="km_ekspl" type="number" title="" />
          <column table="a" column="cnt_ekspl" type="number" title="" />
          <column table="a" column="cnt_proch_ekspl" type="number" title="" />
          <column table="a" column="kod_doc" type="number" />
          <column table="a" column="mba_wfact" type="number" title="" />
          <column table="a" column="km_wfact" type="number" title="" />
          <column table="a" column="cnt_wfact" type="number" title="" />
          <column table="a" column="cnt_proch_wfact" type="number" title="" />
          <column table="a" column="mba_wfact_pr" type="number" title="" comment="_pr - прирост" />
          <column table="a" column="km_wfact_pr" type="number" title="" />
          <column table="a" column="cnt_wfact_pr" type="number" title="" />
          <column table="a" column="cnt_proch_wfact_pr" type="number" title="" />
          <column table="a" column="mba_pr" type="number" title="Прирост мва план" />
          <column table="a" column="km_pr" type="number" title="Прирост км ВЛ план" />
          <column table="a" column="cnt_pr" type="number" title="Прирост шт план" />
          <column table="a" column="cnt_proch_pr" type="number" title="" />
          <column table="a" column="mba_fact_pr" type="number" title="Прирост мва факт" />
          <column table="a" column="km_fact_pr" type="number" title="Прирост км ВЛ факт" />
          <column table="a" column="cnt_fact_pr" type="number" title="Прирост шт" />
          <column table="a" column="cnt_proch_fact_pr" type="number" title="" />
          <column table="a" column="km_kl" type="number" title="Ввод КЛ км план" />
          <column table="a" column="km_kl_fact" type="number" title="Ввод КЛ км факт" />
          <column table="a" column="km_kl_ekspl" type="number" title="" />
          <column table="a" column="km_kl_wfact" type="number" title="" />
          <column table="a" column="km_kl_wfact_pr" type="number" title="" />
          <column table="a" column="km_kl_pr" type="number" title="Прирост КЛ км план" />
          <column table="a" column="km_kl_fact_pr" type="number" title="Прирост КЛ км факт" />
          <column table="a" column="cnt" type="number" title="Ввод шт план" />
          <column table="a" column="km" type="number" title="Ввод км ВЛ план" />
          <column table="a" column="mba" type="number" title="Ввод мва план" />
          <column table="a" column="km_vl_2c_fact" type="number" title="Ввод км ВЛ факт" />
        </call>
      </where>
    </query>
    <query name="ipr_power_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_power_head.xml" haskeys="1">
      <select>
        <column table="a" column="kod_power_head" type="number" as="kod_power_head" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <call function="if" as="pr_last" type="number" key="0">
          <call function="is null">
            <column table="ipr_v_docs_last" column="inc" dgroup="max" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="ipr_v_docs_last" column="kod_ipr" dgroup="max" as="kod_ipr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_power_head" as="a">
          <dlink name="ipr_v_docs_last_power" as="ipr_v_docs_last" table="ipr_v_docs_last_power" child="ipr_v_docs_last_power" field="kod_power_head" parent="ipr_power_head" back="ipr_v_docs_last_power">
            <where>
              <call function="=">
                <column table="ipr_v_docs_last" column="inc" />
                <const>1</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_power_head">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_power_head" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="is_god" as="year" join="left outer" dname="ipr_power_head">
          <call function="=">
            <column table="a" column="year"></column>
            <column table="year" column="god"></column>
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_power_head">
          <call function="=">
            <column table="this" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_report_dop" class="1" timestamp="20.12.2016 13:51:37" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_report_dop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_report_dop" type="number" as="kod_report_dop" key="1" fixed="1" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="description" type="string" title="" as="description" key="0" />
        <column table="a" column="val" type="number" title="" as="val" key="0" />
        <column table="a" column="year" type="number" title="" as="year" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_report_dop" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipr_report_dop">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_rights" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_rights.xml" haskeys="1">
      <select>
        <column table="a" column="puser" type="string" title="" as="puser" key="1" fixed="1"></column>
        <column table="a" column="kod_sec" type="number" comment="какой уровень он может видеть" as="kod_sec" key="0"></column>
        <column table="a" column="roles" type="string" title="" as="roles" key="0"></column>
        <column table="a" column="dat_vvod" type="date" title="" comment="дата ввода" as="dat_vvod" key="0"></column>
        <column table="a" column="last_enter" type="date" title="" as="last_enter" key="0"></column>
        <column table="a" column="dostup" type="number" title="" as="dostup" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_rights" as="a"></table>
      </from>
    </query>
    <query name="ipr_smet_struct_titul" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_smet_struct_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_smet_titul" type="number" as="kod_smet_titul" key="1" fixed="1"></column>
        <column table="a" column="kod_smet" type="number" as="kod_smet" reference="ips_smet_structure" refcol="kod_smet" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="summ" type="number" title="" as="summ" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="is_last" type="number" title="" as="is_last" key="0"></column>
        <column table="a" column="summ_10" type="number" title="" as="summ_10" key="0"></column>
        <column table="a" column="summ_nds" type="number" title="" as="summ_nds" key="0"></column>
        <column table="a" column="summ_10_nds" type="number" title="" as="summ_10_nds" key="0"></column>
        <column table="a" column="summ_30" type="number" title="" as="summ_30" key="0"></column>
        <column table="a" column="summ_30_nds" type="number" title="" as="summ_30_nds" key="0"></column>
        <call function="if" as="summ2_nds" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_nds" type="number" />
        </call>
        <call function="if" as="summ2_10_nds" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_10_nds" type="number" />
        </call>
        <call function="if" as="summ2_30_nds" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_30_nds" type="number" />
        </call>
        <call function="if" as="summ1" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ" type="number" />
        </call>
        <call function="if" as="summ1_10" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_10" type="number" />
        </call>
        <call function="if" as="summ1_30" type="number" ifaplyed="1" key="0">
          <call function="lt">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_30" type="number" />
        </call>
        <call function="if" as="summ1_nds" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <const>6</const>
          </call>
          <column table="this" column="summ1" />
          <column table="this" column="summ2_nds" />
        </call>
        <call function="if" as="summ1_10_nds" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <const>6</const>
          </call>
          <column table="this" column="summ1_10" />
          <column table="this" column="summ2_10_nds" />
        </call>
        <call function="if" as="summ1_30_nds" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <const>6</const>
          </call>
          <column table="this" column="summ1_30" />
          <column table="this" column="summ2_30_nds" />
        </call>
        <call function="if" as="mva" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ" type="number" />
        </call>
        <call function="if" as="mva_10" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_10" type="number" />
        </call>
        <call function="if" as="mva_30" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>100</const>
            </call>
          </call>
          <column table="a" column="summ_30" type="number" />
        </call>
        <call function="if" as="vl_km" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>200</const>
            </call>
          </call>
          <column table="a" column="summ" type="number" />
        </call>
        <call function="if" as="vl_km_10" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>200</const>
            </call>
          </call>
          <column table="a" column="summ_10" type="number" />
        </call>
        <call function="if" as="vl_km_30" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>200</const>
            </call>
          </call>
          <column table="a" column="summ_30" type="number" />
        </call>
        <call function="if" as="kl_km" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>250</const>
            </call>
          </call>
          <column table="a" column="summ" type="number" />
        </call>
        <call function="if" as="kl_km_10" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>250</const>
            </call>
          </call>
          <column table="a" column="summ_10" type="number" />
        </call>
        <call function="if" as="kl_km_30" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>250</const>
            </call>
          </call>
          <column table="a" column="summ_30" type="number" />
        </call>
        <call function="if" as="prch" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>300</const>
            </call>
          </call>
          <column table="a" column="summ" type="number" />
        </call>
        <call function="if" as="prch_10" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>300</const>
            </call>
          </call>
          <column table="a" column="summ_10" type="number" />
        </call>
        <call function="if" as="prch_30" type="number" ifaplyed="1" key="0">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <call function="array">
              <const>300</const>
            </call>
          </call>
          <column table="a" column="summ_30" type="number" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_smet_struct_titul" as="a"></table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_smet_struct_titul">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_smet_struct_titul" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="ipr_smet_struct_titul" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <column table="kod_smet" column="kod_smet"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_smet_struct_titul_comments" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_smet_struct_titul_comments.xml" haskeys="1">
      <select>
        <column table="a" column="kod_smet" type="number" as="kod_smet" key="1" fixed="1"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="comments" type="string" title="" as="comments" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_smet_struct_titul_comments" as="a"></table>
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="ipr_smet_struct_titul_comments" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <column table="kod_smet" column="kod_smet"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_smet_struct_titul_comments" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_sost_del" class="1" timestamp="11.10.2017 15:40:24" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_sost_del.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sost_del" type="number" comment="Первичный ключ" key="1" as="kod_sost_del" />
        <column table="a" column="kod_titul_ip" type="number" comment="Код титула" as="kod_titul_ip" />
        <column table="a" column="kod_ipr" type="number" comment="Код ИПР" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" />
        <column table="a" column="kod_doc_to" type="number" comment="Данные к документу" as="kod_doc_to" />
        <column table="a" column="column_rownum" type="string" title="" comment="п\п" as="column_rownum" />
        <column table="a" column="column_rab" type="number" title="" comment="Работа или оборудование (Первичный ключ KOD_WORK_KIND из IPS_VID_ZATRAT)" as="column_rab" />
        <column table="a" column="sost_del_text" type="string" title="" comment="Состояние дел" agg="max" as="sost_del_text" />
        <column table="a" column="u_m" type="string" title="" comment="Кто изменил" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменил" as="d_m" />
        <column table="a" column="column_info" type="string" title="" comment="Подробнее о виде работ" as="column_info" />
        <call function="over" agg="max" as="kod_ipr_last">
          <call function="first_value ignore nulls">
            <column table="kod_ipr" column="kod_ipr" dgroup="stragg" />
          </call>
          <call function="partition by">
            <column table="kod_ipr" column="kod_titul_ip" />
          </call>
          <call function="order by rows * *">
            <call function="desc">
              <column table="kod_doc_osn" column="doc_date" />
            </call>
          </call>
        </call>
        <call function="if" as="column_info_last_ipr" type="string" is-fact="1" agg="1" fact="ipr_sost_del_column_info_last_ipr">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="this" column="kod_ipr_last" />
          </call>
          <column table="a" column="column_info" />
        </call>
        <call function="if" as="sost_del_text_last_ipr" type="string" is-fact="1" agg="1" fact="ipr_sost_del_sost_del_text_last_ipr">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="this" column="kod_ipr_last" />
          </call>
          <column table="a" column="sost_del_text" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_sost_del" as="a">
          <link name="kod_ipr" dimension="1" as="kod_ipr" table="ipr_ipr_data" child="ipr_sost_del" field="kod_ipr" parent="ipr_ipr_data" back="ipr_sost_del">
            <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data" title="Титулы">
              <dlink name="ipr_titul_dop_contract" as="ipr_titul_dop_contract" table="ipr_titul_dop_contract" child="ipr_titul_dop_contract" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_titul_dop_contract">
                <link name="kod_dop_contract" dimension="1" as="kod_dop_contract" table="is_dop_contract" child="ipr_titul_dop_contract" field="kod_dop_contract" parent="is_dop_contract" back="ipr_titul_dop_contract" title="Абонентские договоры" />
              </dlink>
            </link>
            <link name="kod_doc_osn" as="kod_doc_osn" table="ipr_doc" child="ipr_ipr_data" field="kod_doc_osn" parent="ipr_doc" back="ipr_ipr_data" />
          </link>
        </table>
        <query name="ipr_ipr_data" join="left outer" as="kod_ipr" dname="ipr_sost_del">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_template_contr_steps_val" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_template_contr_steps_val.xml" haskeys="1">
      <select>
        <column table="a" column="kod_template_contr_steps_val" type="number" as="kod_template_contr_steps_val" key="1" fixed="1"></column>
        <column table="a" column="abbr" type="string" title="Номер контрольного этапа" as="abbr" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование контрольного этапа" as="name" key="0"></column>
        <column table="a" column="vid_step" type="number" title="" as="vid_step" key="0"></column>
        <column table="a" column="is_head_step" type="number" title="" as="is_head_step" key="0"></column>
        <column table="a" column="plan_date_beg" type="number" title="" as="plan_date_beg" key="0"></column>
        <column table="a" column="plan_date_end" type="number" title="" as="plan_date_end" key="0"></column>
        <column table="a" column="fact_date_beg" type="number" title="" as="fact_date_beg" key="0"></column>
        <column table="a" column="fact_date_end" type="number" title="" as="fact_date_end" key="0"></column>
        <column table="a" column="plan_cost" type="number" title="" as="plan_cost" key="0"></column>
        <column table="a" column="fact_cost" type="number" title="" as="fact_cost" key="0"></column>
        <column table="a" column="proc_vip" type="number" title="" as="proc_vip" key="0"></column>
        <column table="a" column="doc_rel" type="number" title="" as="doc_rel" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_template_contr_step" type="number" as="kod_template_contr_step" reference="ipr_template_contr_steps" refcol="kod_template_contr_step" key="0"></column>
        <column table="a" column="end_act_date" type="date" title="" as="end_act_date" key="0"></column>
        <column table="a" column="num_cognos" type="string" title="" as="num_cognos" key="0"></column>
        <column table="a" column="date_vip" type="number" title="" as="date_vip" key="0"></column>
        <column table="a" column="name_rosseti" type="string" title="" as="name_rosseti" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_template_contr_steps_val" as="a"></table>
        <query name="ipr_template_contr_steps" as="kod_template_contr_step" join="left outer" dname="ipr_template_contr_steps_val">
          <call function="=">
            <column table="a" column="kod_template_contr_step"></column>
            <column table="kod_template_contr_step" column="kod_template_contr_step"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_tituls_objects" class="1" timestamp="15.11.2018 17:24:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_tituls_objects.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tituls_object" type="number" column-mandatory="1" as="kod_tituls_object" key="1" fixed="1" />
        <column table="a" column="kod_vid_object" type="number" as="kod_vid_object" reference="ips_vid_object" refcol="kod_vid_object" key="0" />
        <column table="a" column="kod_object" type="number" as="kod_object" reference="ips_objects" refcol="kod_object" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_set" type="number" as="kod_set" key="0" />
        <column table="a" column="comments" type="string" title="" data-size="1000" as="comments" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_ise" type="number" as="kod_ise" key="0" />
        <column table="a" column="kod_podrazd_tmp" type="number" as="kod_podrazd_tmp" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="invis" type="number" title="" as="invis" key="0" />
        <column table="a" column="ekspluat_normativ" type="number" title="Нормативный срок службы, лет" as="ekspluat_normativ" key="0" />
        <column table="a" column="ekspluat_buhgalt" type="number" title="" as="ekspluat_buhgalt" key="0" />
        <column table="a" column="buhgalt_iznos" type="number" title="" as="buhgalt_iznos" key="0" />
        <column table="a" column="phys_iznoz" type="number" title="" as="phys_iznoz" key="0" />
        <column table="a" column="is_demontage" type="number" title="" as="is_demontage" key="0" />
        <column table="a" column="kod_doc_osnov" type="number" as="kod_doc_osnov" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="type_object" type="number" title="" comment="1 - НС, 2 - ТПиР" as="type_object" key="0" />
        <column table="a" column="kod_analog" type="number" as="kod_analog" key="0" />
        <column table="a" column="is_new" type="number" title="" as="is_new" key="0" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="0" />
        <column table="a" column="kod_object_source" type="number" as="kod_object_source" key="0" />
        <column table="a" column="kod_doc" type="number" comment="Код документа " as="kod_doc" key="0" />
        <column table="a" column="pr_otlag_usl" type="number" title="" as="pr_otlag_usl" key="0" />
        <column table="a" column="pr_work_abon" type="number" title="" as="pr_work_abon" key="0" />
        <column table="a" column="global_id_gis" type="string" data-size="250" title="" as="global_id_gis" key="0" />
        <column table="a" column="kod_supa" type="string" data-size="250" as="kod_supa" key="0" />
        <column table="a" column="str_info_analog" type="string" data-size="500" title="" as="str_info_analog" key="0" />
        <column table="a" column="order_num" type="number" title="" as="order_num" key="0" />
      </select>
      <from>
        <table name="ipr_tituls_objects" as="a" />
        <query name="ips_objects" as="kod_object" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_object" />
            <column table="kod_object" column="kod_object" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_tituls_objects" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ips_vid_object" as="kod_vid_object" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_vid_object" />
            <column table="kod_vid_object" column="kod_vid_object" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podrazd" join="left outer" dname="ipr_tituls_objects" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podrazd" />
            <column table="kod_podrazd" column="kod_direct" />
          </call>
        </query>
        <query name="ipr_works_body" as="kod_tituls_object" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="analog" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_analog" />
            <column table="analog" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_doc" as="ipr_doc_osnov" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="analog" column="kod_doc_osnov" />
            <column table="ipr_doc_osnov" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_tituls_objects" as="kod_analog" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_analog" />
            <column table="kod_analog" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_osnov" join="left outer" dname="ipr_tituls_objects">
          <call function="=">
            <column table="a" column="kod_doc_osnov" />
            <column table="kod_doc_osnov" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_titul_dop_contract" class="1" timestamp="17.10.2017 18:10:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_titul_dop_contract.xml" haskeys="1">
      <select>
        <call function="||-" key="1" as="kod_titul_dc">
          <column table="a" column="kod_titul_ip" type="number" qlikview="1" />
          <column table="a" column="kod_dop_contract" type="number" qlikview="1" />
        </call>
        <column table="a" column="kod_titul_ip" type="number" qlikview="1" as="kod_titul_ip" />
        <column table="a" column="kod_dop_contract" type="number" qlikview="1" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_titul_dop_contract" as="a">
          <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_titul_dop_contract" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_titul_dop_contract" title="Титулы">
            <dimlink name="kod_ipr" dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" />
          </link>
          <link name="kod_dop_contract" dimension="1" as="kod_dop_contract" table="is_dop_contract" child="ipr_titul_dop_contract" field="kod_dop_contract" parent="is_dop_contract" back="ipr_titul_dop_contract" title="Абонентские договоры">
            <dimlink name="kod_reestr_44164" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_titul_dop_contract" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="ipr_titul_dop_contract" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_titul_ip" title="Титулы" class="1" description="Инвестпроекты" timestamp="03.09.2018 12:55:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_titul_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="beg_period" type="number" title="" as="beg_period" key="0" />
        <column table="a" column="end_period" type="number" title="" as="end_period" reference="is_mes" refcol="mes" key="0" />
        <column table="a" column="end_date" type="date" title="" as="end_date" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="kod_type" type="number" as="kod_type" key="0" />
        <column table="a" column="tit_num_new" type="string" title="Код титула" qlikview="1" description="Номер инвестпроекта" vid="1" list-sep="+" list-order="beg_year" dimension="d_46432_num_ip" is-final-dimension="1" as="tit_num_new" key="0" />
        <column table="a" column="name" type="string" title="Наименование инвестиционного проекта" description="Наименование инвестиционного проекта" vid="1" as="name" key="0" />
        <column table="a" column="beg_year" type="number" title="Год начала" description="Год начала строительства" as="beg_year" key="0" />
        <column table="a" column="end_year" type="number" title="Год окончания" description="Год окончания строительства" as="end_year" key="0" />
        <column table="a" column="kod_vid_zajavki" type="number" as="kod_vid_zajavki" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="utv_god" type="number" title="" as="utv_god" key="0" />
        <column table="a" column="d_kor" type="date" title="" as="d_kor" key="0" />
        <column table="a" column="n_polz" type="string" title="" as="n_polz" key="0" />
        <column table="a" column="tit_num" type="string" title="" as="tit_num" key="0" />
        <column table="a" column="kod_subject" type="number" as="kod_subject" reference="ips_subjects" refcol="kod_subject" key="0" />
        <column table="a" column="prin_sogl" type="number" title="" as="prin_sogl" key="0" />
        <column table="a" column="kod_ispolnit" type="number" dimension="ipr_kod_ispolnit" as="kod_ispolnit" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_progpartner" type="number" as="kod_progpartner" reference="ips_progpartner" refcol="kod_progpartner" key="0" />
        <column table="a" column="num_lev_1" type="number" title="" as="num_lev_1" key="0" />
        <column table="a" column="num_lev_2" type="number" title="" as="num_lev_2" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="is_head_tit" type="number" title="" as="is_head_tit" key="0" />
        <column table="a" column="beg_period_pir" type="number" title="" as="beg_period_pir" key="0" />
        <column table="a" column="end_period_pir" type="number" title="" as="end_period_pir" key="0" />
        <column table="a" column="beg_year_pir" type="number" title="" as="beg_year_pir" key="0" />
        <column table="a" column="end_year_pir" type="number" title="" as="end_year_pir" key="0" />
        <column table="a" column="date_add" type="date" title="" comment="первая дата включения в головной титул" as="date_add" key="0" />
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" key="0" />
        <column table="a" column="kod_krit_minenergo" type="number" as="kod_krit_minenergo" key="0" />
        <column table="a" column="kod_prin_soc_val" type="number" comment="принадлеж с соц знач объекту" as="kod_prin_soc_val" key="0" />
        <column table="a" column="date_parent_del" type="date" title="" comment="последняя дата выхода из головного титула" as="date_parent_del" key="0" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="0" />
        <column table="a" column="with_details" type="number" title="" comment="1- детализировать в отчет когнас" as="with_details" key="0" />
        <column table="a" column="solution_task" type="string" title="" comment="решаемые задачи" as="solution_task" key="0" />
        <column table="a" column="mode_balance_req" type="number" title="" comment="режимно-балансовая необходимость" as="mode_balance_req" key="0" />
        <column table="a" column="gener_obj_name" type="string" title="" as="gener_obj_name" key="0" />
        <column table="a" column="gener_obj_owner" type="string" title="" as="gener_obj_owner" key="0" />
        <column table="a" column="gener_obj_power" type="number" title="" as="gener_obj_power" key="0" />
        <column table="a" column="gener_obj_vvod" type="date" title="" as="gener_obj_vvod" key="0" />
        <column table="a" column="address" type="string" title="" as="address" key="0" />
        <column table="a" column="export_cognos_num" type="string" title="" as="export_cognos_num" key="0" />
        <column table="a" column="to_export" type="number" title="" as="to_export" key="0" />
        <column table="a" column="export_cognos_name" type="string" title="" as="export_cognos_name" key="0" />
        <column table="a" column="show_nomen_cost" type="number" title="" as="show_nomen_cost" key="0" />
        <column table="a" column="in_ozp" type="number" title="" as="in_ozp" key="0" />
        <column table="a" column="proj_target" type="string" title="" as="proj_target" key="0" />
        <column table="a" column="is_sbor" type="number" title="" as="is_sbor" key="0" />
        <column table="a" column="kod_parent_sbor" type="number" as="kod_parent_sbor" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" reference="is_spr_ofz" refcol="kod" key="0" />
        <column table="a" column="date_vkl_ofz" type="number" title="Дата включения в ОФЗ" as="date_vkl_ofz" key="0" />
        <column table="a" column="date_ch_ofz" type="date" title="" as="date_ch_ofz" key="0" />
        <column table="a" column="date_iskl_ofz" type="date" title="" as="date_iskl_ofz" key="0" />
        <column table="a" column="pr_ofz_fin" type="number" title="" as="pr_ofz_fin" key="0" />
        <column table="a" column="pr_ofz_vip" type="number" title="" as="pr_ofz_vip" key="0" />
        <column table="a" column="num_porc" type="number" title="" comment="№ порции за день" as="num_porc" key="0" />
        <column table="a" column="dat_reestr" type="date" title="" comment="дата реестра" as="dat_reestr" key="0" />
        <column table="a" column="kod_titul_supd" type="string" comment="код проекта в СУПД" as="kod_titul_supd" key="0" />
        <column table="a" column="in_1c" type="number" title="" comment="титул есть в 1С (1 - есть, 0/null - не проверено, -1 - нет" as="in_1c" key="0" />
        <column table="a" column="otr_status_num" type="number" title="" comment="статус ОТР из СУПД - код" as="otr_status_num" key="0" />
        <column table="a" column="otr_status_str" type="string" title="" comment="статус ОТР из СУПД - строка" as="otr_status_str" key="0" />
        <column table="a" column="rd_status_num" type="number" title="" comment="статус РД из СУПД - код" as="rd_status_num" key="0" />
        <column table="a" column="rd_status_str" type="string" title="" comment="статус РД из СУПД - строка" as="rd_status_str" key="0" />
        <column table="a" column="pr_has_ks11_ks14" type="number" title="" comment="Наличие КС-11 или КС-14" as="pr_has_ks11_ks14" key="0" />
        <column table="a" column="is_innov" type="number" title="" comment="Инновация" as="is_innov" key="0" />
        <column table="a" column="passport_status" type="string" title="" as="passport_status" key="0" />
        <column table="a" column="hoz_sposob" type="number" title="" comment="Работы выполняются хоз.способом (в т.ч.)" as="hoz_sposob" key="0" />
        <column table="a" column="kod_kurator" type="number" comment="Код куратора" as="kod_kurator" reference="is_person" refcol="kod_person" key="0" />
        <const as="cnt" type="number" fact="ipr_titul_ip_count" agg="sum" key="0">1</const>
        <call function="" as="full_name" title="Наименование" type="string" description="Наименование инвестпроекта" key="0">
          <column table="a" column="name" />
        </call>
        <call function="||" as="num_name" type="string" description="Наименование инвестпроекта" title="Инвестиционный проект" key="0">
          <column table="a" column="tit_num_new" />
          <const>' '</const>
          <column table="a" column="name" />
        </call>
        <column table="ipr_ipr_data" column="kod_razdel" dgroup="max" as="kod_razdel" key="0" />
        <call function="if" as="kod_sbor_titul" type="string" key="0">
          <call function="is null">
            <column table="ipr_ipr_data" column="kod_child_titul" dgroup="max" />
          </call>
          <call function="||" as="kod_sbor_titul">
            <call function="nvl" group="1">
              <column table="a" column="kod_parent_sbor" />
              <column table="a" column="kod_titul_ip" />
            </call>
            <const>'-'</const>
            <column table="this" column="kod_razdel" />
          </call>
        </call>
        <column table="ipr_ipr_data" column="kod_main_titul" as="kod_main" dgroup="max" key="0" />
        <call function="if" as="itip" type="string" title="Тип титула" key="0">
          <call function="=">
            <column table="a" column="is_sbor" />
            <const>1</const>
          </call>
          <const>'Сборный'</const>
          <call function="if">
            <call function="=">
              <column table="a" column="is_head_tit" />
              <const>1</const>
            </call>
            <const>'Головной'</const>
            <const>'Одиночный/Дочерний'</const>
          </call>
        </call>
        <call function="if" as="is_simple" type="number" key="0">
          <call function="=">
            <column table="a" column="is_sbor" />
            <const>1</const>
          </call>
          <const>0</const>
          <call function="if">
            <call function="=">
              <column table="a" column="is_head_tit" />
              <const>1</const>
            </call>
            <const>0</const>
            <const>1</const>
          </call>
        </call>
        <call function="if" as="kod_aip" type="number" key="0">
          <call function="in">
            <call function="substr">
              <column table="a" column="tit_num_new" />
              <const>0</const>
              <const>2</const>
            </call>
            <call function="array">
              <const>'11'</const>
              <const>'61'</const>
              <const>'81'</const>
              <const>'71'</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="kod_aip" column="name" as="name_aip" key="0" />
        <call function="nvl" as="kod_parent_sbor_ext" key="0">
          <column table="this" column="kod_parent_sbor" />
          <call function="if">
            <call function="=">
              <column table="this" column="is_sbor" />
              <const>1</const>
            </call>
            <column table="this" column="kod_titul_ip" />
          </call>
        </call>
        <call function="cut_num" as="tit_num_new_n" title="Код титула" key="0">
          <column table="this" column="tit_num_new" />
        </call>
        <column table="kod_tit_ispoln" column="kod_filial" comment="для отчета 41050 прил 1.1 (не менять на ipr_kodispolnit даже если хочется!)" dimension="ipr_kod_ispolnit_tit" as="kod_filial" key="0" />
        <call function="if" as="pr_41656" type="number" key="0">
          <call function="=">
            <call function="substr">
              <column table="a" column="tit_num_new" />
              <const>2</const>
              <const>1</const>
            </call>
            <const>'1'</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="kod_tit_ispoln" column="kod_filial" as="kod_filial_tit" key="0" />
        <call function="decode" comment="ДСРСС считается КС" as="kod_filial_tit2" dimension="evd_kod_filial_tit" key="0">
          <column table="a" column="kod_ispolnit" dgroup="max" />
          <const>513</const>
          <const>19</const>
          <column table="a" column="kod_ispolnit" dgroup="max" />
        </call>
        <call function="if" as="is_teh_pris" type="number" key="0">
          <call function="in">
            <call function="substr">
              <column table="a" column="tit_num_new" />
              <const>0</const>
              <const>2</const>
            </call>
            <call function="array">
              <const>'11'</const>
              <const>'61'</const>
              <const>'81'</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="ipr_ofz_tit_order" column="npp" as="ofz_npp" dgroup="max" fact="ipr_tit_ip_ofz_npp" agg="min" key="0" />
        <column table="ipt_summ_1c" column="tit_num_new" as="pr_ipt_summ_1c" dgroup="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_titul_ip" as="a" title="Титулы">
          <dlink name="ipr_ipr_data" dimension="1" as="ipr_ipr_data" table="ipr_ipr_data" child="ipr_ipr_data" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ipr_data">
            <dlink name="ipr_vvod_fiz" dimension="1" is-final-dimension="1" as="ipr_vvod_fiz" table="ipr_vvod_fiz" child="ipr_vvod_fiz" field="kod_ipr" parent="ipr_ipr_data" back="ipr_vvod_fiz" />
            <!--<link name="kod_klass" />-->
            <!--<dlink name="ipr_ip_by_year">
          </dlink>-->
          </dlink>
          <dlink name="ipr_titul_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ipr_titul_dop_contract" table="ipr_titul_dop_contract" child="ipr_titul_dop_contract" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_titul_dop_contract">
            <dimlink name="kod_dop_contract" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
          </dlink>
          <dlink name="ipr_hoz_sposob" dimension="1" as="ipr_hoz_sposob" table="ipr_hoz_sposob" child="ipr_hoz_sposob" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_hoz_sposob" />
          <dlink name="ipr_contr_steps_val" dimension="1" is-final-dimension="1" as="ipr_contr_steps_val" table="ipr_contr_steps_val" child="ipr_contr_steps_val" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_contr_steps_val" />
          <dlink name="ipr_doc" dimension="1" is-final-dimension="1" as="ipr_doc" table="ipr_doc" child="ipr_doc" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_doc" />
          <dlink name="isv_ip_vip_dog" dimension="1" is-final-dimension="1" as="isv_ip_vip_dog" table="isv_ip_vip_dog" child="isv_ip_vip_dog" field="kod_ip" parent="ipr_titul_ip" back="isv_ip_vip_dog" />
          <dlink name="vdwh_isv_titul_res" dimension="1" as="vdwh_isv_titul_res" table="vdwh_isv_titul_res" child="vdwh_isv_titul_res" field="kod_titul_ip" parent="ipr_titul_ip" back="vdwh_isv_titul_res">
            <dimlink name="evd_kodres" dimension="1" is-final-dimension="1" />
            <dimlink name="isv_ad_everyday" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_vip" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_ostatok" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_year_srok" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_otch_list_3" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_fl_build" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_dt_contract" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_hoz_sposob" is-final-dimension="1" dimension="1" />
            <dimlink name="id_slice" is-final-dimension="1" dimension="1" />
            <link name="kod_res" as="kod_res" table="is_spr_direct" child="vdwh_isv_titul_res" field="kod_res" parent="is_spr_direct" back="vdwh_isv_titul_res" title="Подразделения" />
          </dlink>
          <dlink name="ipr_ofz_tit_order" pushpred="1" as="ipr_ofz_tit_order" table="ipr_ofz_tit_order" child="ipr_ofz_tit_order" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_ofz_tit_order" />
          <dlink name="ipt_summ_1c" pushpred="1" as="ipt_summ_1c" table="ipt_summ_1c" child="ipt_summ_1c" field="kod_titul_ip" parent="ipr_titul_ip" back="ipt_summ_1c" />
        </table>
        <query name="ips_subjects" as="kod_subject" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="ips_num_lev_1" as="num_lev_1" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="num_lev_1" />
            <column table="num_lev_1" column="kod_num_lev_1" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="ipr_titul_ip" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_ispolnit" join="left outer" dname="ipr_titul_ip" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_ispolnit" />
            <column table="kod_ispolnit" column="kod_direct" />
          </call>
        </query>
        <query name="is_mes" as="beg_period" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="beg_period" />
            <column table="beg_period" column="mes" />
          </call>
        </query>
        <query name="is_mes" as="end_period" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="end_period" />
            <column table="end_period" column="mes" />
          </call>
        </query>
        <query name="ips_vid_zajavki" as="kod_vid_zajavki" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="kod_vid_zajavki" />
            <column table="kod_vid_zajavki" column="kod_vid_z" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_parent_sbor" join="left outer" dname="ipr_titul_ip" title="Титулы">
          <call function="=">
            <column table="a" column="kod_parent_sbor" />
            <column table="kod_parent_sbor" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_titul_dop_contract" as="kod_titul_ip" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_spr_ofz" as="pr_ofz" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="pr_ofz" />
            <column table="pr_ofz" column="kod" />
          </call>
        </query>
        <query name="ips_num_lev_1" as="kod_num_lev_1" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="num_lev_1" />
            <column table="kod_num_lev_1" column="kod_num_lev_1" />
          </call>
        </query>
        <query name="is_mes" as="mes" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="beg_period" />
            <column table="mes" column="mes" />
          </call>
        </query>
        <query name="ips_vid_zajavki" as="kod_vid_z" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="kod_vid_zajavki" />
            <column table="kod_vid_z" column="kod_vid_z" />
          </call>
        </query>
        <query name="is_person" as="kod_kurator" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="a" column="kod_kurator" />
            <column table="kod_kurator" column="kod_person" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_razdel" join="left outer" dname="ipr_titul_ip" title="Раздел ИПР">
          <call function="=">
            <column table="kod_razdel" column="kod_razdel" />
            <column table="this" column="kod_razdel" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_main" dname="root_childs" join="left outer" title="Титулы">
          <call function="=">
            <column table="kod_main" column="kod_titul_ip" />
            <column table="this" column="kod_main" />
          </call>
        </query>
        <query name="ips_progpartner" as="kod_progpartner" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="kod_progpartner" column="kod_progpartner" />
            <column table="a" column="kod_progpartner" />
          </call>
        </query>
        <query name="ipr_titul_ip_sbor" as="kod_sbor_titul" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="kod_sbor_titul" column="kod_sbor_titul" />
            <column table="this" column="kod_sbor_titul" />
          </call>
        </query>
        <query name="ipr_titul_gr_aip" as="kod_aip" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="kod_aip" column="kod_aip" />
            <column table="this" column="kod_aip" />
          </call>
        </query>
        <query name="isv_tdc_tit_filial" as="kod_tit_ispoln" join="left outer" dname="ipr_titul_ip">
          <call function="=">
            <column table="kod_tit_ispoln" column="kod_titul_ip" />
            <column table="this" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_vid_zatrat_titul" class="1" timestamp="20.10.2017 17:05:36" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_vid_zatrat_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="1" fixed="1" />
        <column table="a" column="plan_cost" type="number" title="Сумма договора" is-fact="1" agg="sum" as="plan_cost" fact="ipr_vid_zatrat_titul_plan_cost" key="0" />
        <column table="a" column="smet_cost" type="number" title="" as="smet_cost" key="0" />
        <column table="a" column="comments" type="string" title="" as="comments" key="0" />
        <column table="a" column="base_god" type="number" title="" as="base_god" reference="is_god" refcol="god" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_vid_zatrat" type="number" as="kod_vid_zatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_koef" type="number" as="kod_koef" key="0" />
        <column table="a" column="lizing" type="number" title="" as="lizing" key="0" />
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0" />
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" reference="ipr_dogs" refcol="kod_ipr_dog" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="plan_cost_nds" type="number" title="Сумма договора с НДС" as="plan_cost_nds" key="0" />
        <column table="a" column="nomen_cost" type="number" title="" as="nomen_cost" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_vid_zatrat_titul" as="a">
          <link name="kod_vid_zatrat" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_vid_zatrat" table="ips_vid_zatrat" child="ipr_vid_zatrat_titul" field="kod_vid_zatrat" parent="ips_vid_zatrat" back="ipr_vid_zatrat_titul">
            <dimlink name="ipr_kod_smet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_ipr_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_ipr_dog" table="ipr_dogs" child="ipr_vid_zatrat_titul" field="kod_ipr_dog" parent="ipr_dogs" back="ipr_vid_zatrat_titul">
            <dimlink name="ipr_kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_vid_zatrat_titul" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_vid_zatrat_titul" title="Титулы">
            <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ipr_dogs" as="kod_ipr_dog" join="left outer" dname="ipr_vid_zatrat_titul">
          <call function="=">
            <column table="a" column="kod_ipr_dog" />
            <column table="kod_ipr_dog" column="kod_ipr_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kod_vid_zatrat" join="left outer" dname="ipr_vid_zatrat_titul">
          <call function="=">
            <column table="a" column="kod_vid_zatrat" />
            <column table="kod_vid_zatrat" column="kodzatrat" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_vid_zatrat_titul">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_vid_zatrat_titul" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ipr_vid_zatrat_titul">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="is_god" as="base_god" join="left outer" dname="ipr_vid_zatrat_titul">
          <call function="=">
            <column table="a" column="base_god" />
            <column table="base_god" column="god" />
          </call>
        </query>
        <!--<query name="ipr_ipr_data" as="kod_ipr" join="left outer">
          <call function="=">
            <column table="a" column="kod_ipr"></column>
            <column table="kod_ipr" column="kod_ipr"></column>
          </call>
        </query>-->
      </from>
    </query>
    <query name="ipr_vip_dog_proch" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_vip_dog_proch.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog_pr" type="number" as="kod_vip_dog_pr"></column>
        <column table="a" column="kod_ip" type="number" as="kod_ip" reference="ipr_titul_ip" refcol="kod_titul_ip"></column>
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc"></column>
        <column table="a" column="vsego" type="number" title="" as="vsego"></column>
        <column table="a" column="nds" type="number" title="" as="nds"></column>
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name"></column>
        <column table="a" column="num_doc" type="string" title="" as="num_doc"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul"></column>
        <column table="a" column="dat_copy_1c" type="date" title="" as="dat_copy_1c"></column>
        <column table="a" column="dat_korrect_1c" type="date" title="" as="dat_korrect_1c"></column>
        <column table="a" column="dat_del_1c" type="date" title="" as="dat_del_1c"></column>
        <column table="a" column="kod_act_1c" type="number" as="kod_act_1c"></column>
        <call function="rowid" as="ipr_vip_dog_proch_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_vip_dog_proch" as="a"></table>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_vip_dog_proch">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_ip" join="left outer" dname="ipr_vip_dog_proch" title="Титулы">
          <call function="=">
            <column table="a" column="kod_ip"></column>
            <column table="kod_ip" column="kod_titul_ip"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_vvod_body" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_vvod_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vvod_body" type="number" as="kod_vvod_body" key="1" fixed="1" />
        <column table="a" column="kod_vvod_head" type="number" as="kod_vvod_head" reference="ipr_vvod_head" refcol="kod_vvod_head" key="0" />
        <column table="a" column="period" type="number" title="" as="period" key="0" />
        <column table="a" column="plan_summ" type="number" title="Плановый ввод в основные фонды без НДС" description="Плановый ввод в основные фонды без НДС" as="plan_summ" key="0" />
        <column table="a" column="plan_summ_nds" type="number" title="" as="plan_summ_nds" key="0" />
        <column table="a" column="fact_summ" type="number" title="" as="fact_summ" key="0" />
        <column table="a" column="fact_summ_nds" type="number" title="" as="fact_summ_nds" key="0" />
        <column table="a" column="wfact_summ" type="number" title="" as="wfact_summ" key="0" />
        <column table="a" column="wfact_summ_nds" type="number" title="" as="wfact_summ_nds" key="0" />
        <column table="a" column="closed" type="number" title="" as="closed" key="0" />
        <call function="+" as="ym" key="0">
          <call function="*">
            <column table="head" column="year" />
            <const>100</const>
          </call>
          <column table="a" column="period" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_vvod_body" as="a">
          <link name="kod_vvod_head" as="head" table="ipr_vvod_head" child="ipr_vvod_body" field="kod_vvod_head" parent="ipr_vvod_head" back="ipr_vvod_body" />
        </table>
        <query name="ipr_vvod_head" as="kod_vvod_head" join="left outer" dname="ipr_vvod_body">
          <call function="=">
            <column table="a" column="kod_vvod_head" />
            <column table="kod_vvod_head" column="kod_vvod_head" />
          </call>
        </query>
      </from>
      <where>
        <call function="!=0">
          <column table="a" column="plan_summ" />
          <column table="a" column="wfact_summ" />
        </call>
      </where>
    </query>
    <query name="ipr_vvod_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_vvod_head.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vvod_head" type="number" as="kod_vvod_head" key="1" fixed="1"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" reference="ipr_vid_zatrat_titul" refcol="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="comments" type="string" title="" as="comments" key="0"></column>
        <column table="a" column="formdate" type="date" title="" as="formdate" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="is_last" type="number" title="" as="is_last" key="0"></column>
        <call function="if" as="pr_last" type="number" key="0">
          <call function="is null">
            <column table="ipr_v_docs_last" column="inc" dgroup="max" />
          </call>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_vvod_head" as="a">
          <dlink name="ipr_v_docs_last_vvod" as="ipr_v_docs_last" table="ipr_v_docs_last_vvod" child="ipr_v_docs_last_vvod" field="kod_vvod_head" parent="ipr_vvod_head" back="ipr_v_docs_last_vvod">
            <where>
              <call function="=">
                <column table="ipr_v_docs_last" column="inc" />
                <const>1</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="ipr_vid_zatrat_titul" as="kod_vid_zatrat_titul" join="left outer" dname="ipr_vvod_head">
          <call function="=">
            <column table="a" column="kod_vid_zatrat_titul"></column>
            <column table="kod_vid_zatrat_titul" column="kod_vid_zatrat_titul"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_vvod_head" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_vvod_head">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_ad_tituls" class="1" timestamp="08.08.2017 14:36:47" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_ad_tituls.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ad_titul" type="number" key="1" as="kod_ad_titul" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="num_ad" type="string" title="" as="num_ad" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="supply" type="string" title="" as="supply" />
        <column table="a" column="load_point" type="string" title="" as="load_point" />
        <column table="a" column="lp_addr" type="string" title="" as="lp_addr" />
        <column table="a" column="num_aid" type="string" title="" as="num_aid" />
        <column table="a" column="sum_ad" type="number" title="" as="sum_ad" />
        <column table="a" column="gor_obl" type="string" title="" as="gor_obl" />
        <column table="a" column="load" type="string" title="" as="load" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="name_status" type="string" title="" as="name_status" />
        <column table="a" column="req_year" type="number" title="" as="req_year" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" />
        <column table="a" column="num_ad_pref" type="string" title="" as="num_ad_pref" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_v_ad_tituls" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_v_ad_tituls" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="ipr_v_ad_tituls" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_docs_last_finplan" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_docs_last_finplan.xml" haskeys="1">
      <select>
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0"></column>
        <column table="a" column="doc_date" type="date" title="" as="doc_date" key="0"></column>
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" key="0"></column>
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0"></column>
        <column table="a" column="kod_finplan_head" type="number" as="kod_finplan_head" reference="ipr_finplan_head" refcol="kod_finplan_head" key="0"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="head_year" type="number" title="" as="head_year" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_vid_zatrat" type="number" as="kod_vid_zatrat" key="0"></column>
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="0"></column>
        <column table="a" column="inc" type="number" title="" as="inc" key="0"></column>
        <column table="a" column="kod_status" type="number" as="kod_status" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_v_docs_last_finplan" as="a"></table>
        <query name="ipr_finplan_head" as="kod_finplan_head" dname="ipr_v_docs_last_finplan">
          <call function="=">
            <column table="a" column="kod_finplan_head" />
            <column table="kod_finplan_head" column="kod_finplan_head" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_docs_last_okv" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_docs_last_okv.xml" haskeys="1">
      <select>
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0"></column>
        <column table="a" column="doc_date" type="date" title="" as="doc_date" key="0"></column>
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" key="0"></column>
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0"></column>
        <column table="a" column="kod_kapitalvloz_head" type="number" as="kod_kapitalvloz_head" reference="ipr_kapitalvloz_head" refcol="kod_kapitalvloz_head" key="0"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="head_year" type="number" title="" as="head_year" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_vid_zatrat" type="number" as="kod_vid_zatrat" key="0"></column>
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="0"></column>
        <column table="a" column="inc" type="number" title="" as="inc" key="0"></column>
        <column table="a" column="kod_status" type="number" as="kod_status" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_v_docs_last_okv" as="a"></table>
        <query name="ipr_kapitalvloz_head" as="kod_kapitalvloz_head" dname="ipr_v_docs_last_okv">
          <call function="=">
            <column table="a" column="kod_kapitalvloz_head" />
            <column table="kod_kapitalvloz_head" column="kod_kapitalvloz_head" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_docs_last_power" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_docs_last_power.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1"></column>
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0"></column>
        <column table="a" column="doc_date" type="date" title="" as="doc_date" key="0"></column>
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" key="0"></column>
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0"></column>
        <column table="a" column="kod_power_head" type="number" as="kod_power_head" reference="ipr_power_head" refcol="kod_power_head" key="0"></column>
        <column table="a" column="head_year" type="number" title="" as="head_year" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_status" type="number" as="kod_status" key="0"></column>
        <column table="a" column="kod_subject" type="number" as="kod_subject" key="0"></column>
        <column table="a" column="inc" type="number" title="" as="inc" key="0"></column>
        <column table="a" column="kod_direct" type="number" as="kod_direct" key="0"></column>
        <column table="a" column="kod_ispolnit" type="number" as="kod_ispolnit" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_v_docs_last_power" as="a"></table>
        <query name="ipr_power_head" as="kod_power_head" dname="ipr_v_docs_last_power">
          <call function="=">
            <column table="a" column="kod_power_head" />
            <column table="kod_power_head" column="kod_power_head" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_docs_last_vvod" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_docs_last_vvod.xml" haskeys="1">
      <select>
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0"></column>
        <column table="a" column="doc_date" type="date" title="" as="doc_date" key="0"></column>
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" key="0"></column>
        <column table="a" column="kod_ip_by_year" type="number" as="kod_ip_by_year" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0"></column>
        <column table="a" column="kod_vvod_head" type="number" as="kod_vvod_head" reference="ipr_vvod_head" refcol="kod_vvod_head" key="0"></column>
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="0"></column>
        <column table="a" column="head_year" type="number" title="" as="head_year" key="0"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_vid_zatrat" type="number" as="kod_vid_zatrat" key="0"></column>
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="0"></column>
        <column table="a" column="inc" type="number" title="" as="inc" key="0"></column>
        <column table="a" column="kod_status" type="number" as="kod_status" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_v_docs_last_vvod" as="a"></table>
        <query name="ipr_vvod_head" as="kod_vvod_head" dname="ipr_v_docs_last_vvod">
          <call function="=">
            <column table="a" column="kod_vvod_head" />
            <column table="kod_vvod_head" column="kod_vvod_head" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_v_titul_res" class="1" timestamp="08.08.2017 11:37:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_v_titul_res.xml" haskeys="1">
      <select>
        <call function="rowid" as="ipr_v_titul_res_id" key="1" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="kodres" type="number" title="" as="kodres" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_v_titul_res" as="a" />
        <query name="ipr_titul_ip" join="left outer" as="kod_titul_ip" dname="ipr_v_titul_res" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_spr_direct" join="left outer" as="kodres" dname="ipr_v_titul_res" title="Подразделения">
          <call function="=">
            <column table="a" column="kodres" />
            <column table="kodres" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_works_body" class="1" timestamp="16.11.2018 11:04:24" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_works_body.xml" haskeys="1">
      <select>
        <column table="a" column="kod_work_body" type="number" column-mandatory="1" as="kod_work_body" key="1" fixed="1" />
        <column table="a" column="beg_plan_date" type="date" title="" as="beg_plan_date" key="0" />
        <column table="a" column="end_plan_date" type="date" title="" as="end_plan_date" key="0" />
        <column table="a" column="proc_complete" type="number" title="" as="proc_complete" key="0" />
        <column table="a" column="fact_cost" type="number" title="" as="fact_cost" key="0" />
        <column table="a" column="beg_fact_date" type="date" title="" as="beg_fact_date" key="0" />
        <column table="a" column="end_fact_date" type="date" title="" as="end_fact_date" key="0" />
        <column table="a" column="comments" type="string" title="" data-size="250" as="comments" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="kod_work_oborud" type="number" as="kod_work_oborud" reference="ips_work_kind" refcol="kod_work_kind" key="0" />
        <column table="a" column="about_work" type="string" title="" data-size="250" as="about_work" key="0" />
        <column table="a" column="smet_cost" type="number" title="" as="smet_cost" key="0" />
        <column table="a" column="kod_tituls_object" type="number" column-mandatory="1" as="kod_tituls_object" reference="ipr_tituls_objects" refcol="kod_tituls_object" key="0" />
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" reference="ipr_vid_zatrat_titul" refcol="kod_vid_zatrat_titul" key="0" />
        <column table="a" column="order_num" type="string" title="" data-size="250" as="order_num" key="0" />
        <column table="a" column="high_work_prizn" type="number" title="" as="high_work_prizn" key="0" />
        <column table="a" column="break_num" type="number" title="" as="break_num" key="0" />
        <column table="a" column="fact_cost_vvod" type="number" title="" as="fact_cost_vvod" key="0" />
        <column table="a" column="kod_status" type="number" as="kod_status" key="0" />
        <column table="a" column="is_first" type="number" title="" comment="работа, которая будет выведена в графике работ как общая для нескольких объектов" as="is_first" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" key="0" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" key="0" />
        <column table="a" column="kod_ipr_dog" type="number" as="kod_ipr_dog" key="0" />
        <column table="a" column="kod_settings" type="number" as="kod_settings" reference="is_settings_work" refcol="kod" key="0" />
        <column table="a" column="num_tu_def" type="number" title="" as="num_tu_def" key="0" />
        <column table="a" column="cost_calculate" type="number" title="" as="cost_calculate" key="0" />
        <column table="a" column="str_name_tu" type="string" data-size="1500" title="" as="str_name_tu" key="0" />
        <column table="a" column="kod_analog" type="number" comment="Аналог работы с другого объекта" as="kod_analog" reference="ipr_works_body" refcol="kod_work_body" key="0" />
        <column table="a" column="str_name_tz" type="string" data-size="4000" title="" as="str_name_tz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_works_body" as="a" />
        <query name="ipr_tituls_objects" as="kod_tituls_object" join="left outer" dname="ipr_works_body">
          <call function="=">
            <column table="a" column="kod_tituls_object" />
            <column table="kod_tituls_object" column="kod_tituls_object" />
          </call>
        </query>
        <query name="ipr_vid_zatrat_titul" as="kod_vid_zatrat_titul" join="left outer" dname="ipr_works_body">
          <call function="=">
            <column table="a" column="kod_vid_zatrat_titul" />
            <column table="kod_vid_zatrat_titul" column="kod_vid_zatrat_titul" />
          </call>
        </query>
        <query name="ips_work_kind" as="kod_work_kind" join="left outer" dname="ipr_works_body">
          <call function="=">
            <column table="a" column="kod_work_oborud" />
            <column table="kod_work_kind" column="kod_work_kind" />
          </call>
        </query>
        <query name="is_settings_work" join="left outer" as="kod_settings" dname="ipr_works_body">
          <call function="=">
            <column table="a" column="kod_settings" />
            <column table="kod_settings" column="kod" />
          </call>
        </query>
        <query name="ipr_works_body" as="kod_analog" join="left outer" dname="ipr_works_body">
          <call function="=">
            <column table="a" column="kod_analog" />
            <column table="kod_analog" column="kod_work_body" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_works_head" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_works_head.xml" haskeys="1">
      <select>
        <column table="a" column="kod_work_head" type="number" column-mandatory="1" as="kod_work_head" key="1" fixed="1" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_works_head" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipr_works_head" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_works_head">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_works_vvod" class="1" timestamp="01.03.2016 18:46:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_works_vvod.xml" haskeys="1">
      <select>
        <column table="a" column="kod_work_vvod" type="number" as="kod_work_vvod" key="1" fixed="1" />
        <column table="a" column="kod_work_body" type="number" as="kod_work_body" key="0" />
        <column table="a" column="summ" type="number" title="" as="summ" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_fact_wcompl" type="number" as="kod_fact_wcompl" reference="ipr_fact_wcompl" refcol="kod_fact_wcompl" key="0" />
        <column table="a" column="summ_nds" type="number" title="" as="summ_nds" key="0" />
        <call function="date to ym2" as="ym" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="year" as="year" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <call function="month" as="period" key="0">
          <column table="kod_doc" column="doc_date" />
        </call>
        <column table="kod_doc" column="doc_date" as="dat" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_works_vvod" as="a" />
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipr_works_vvod">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="ipr_fact_wcompl" as="kod_fact_wcompl" join="left outer" dname="ipr_works_vvod">
          <call function="=">
            <column table="a" column="kod_fact_wcompl" />
            <column table="kod_fact_wcompl" column="kod_fact_wcompl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_work_hb_rel" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_work_hb_rel.xml" haskeys="1">
      <select>
        <call function="rowid" as="ipr_work_hb_rel_id" key="1" />
        <column table="a" column="kod_work_body" type="number" as="kod_work_body" />
        <column table="a" column="kod_work_head" type="number" as="kod_work_head" reference="ipr_works_head" refcol="kod_work_head" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipr_work_hb_rel" as="a" />
        <query name="ipr_works_body" as="kod_work_body" join="left outer" dname="ipr_work_hb_rel">
          <call function="=">
            <column table="a" column="kod_work_body" />
            <column table="kod_work_body" column="kod_work_body" />
          </call>
        </query>
        <query name="ipr_works_head" as="kod_work_head" join="left outer" dname="ipr_work_hb_rel">
          <call function="=">
            <column table="a" column="kod_work_head" />
            <column table="kod_work_head" column="kod_work_head" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_character_spr_values" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_character_spr_values.xml" haskeys="1">
      <select>
        <column table="a" column="kod_character_spr_values" type="number" as="kod_character_spr_values" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="kod_character_sprav" type="number" as="kod_character_sprav" reference="ips_character_sprav" refcol="kod_character_sprav" key="0"></column>
        <column table="a" column="num_value" type="number" title="" as="num_value" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_character_spr_values" as="a"></table>
        <query name="ips_character_sprav" as="kod_character_sprav" join="left outer" dname="ips_character_spr_values">
          <call function="=">
            <column table="a" column="kod_character_sprav"></column>
            <column table="kod_character_sprav" column="kod_character_sprav"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ips_doc_targets" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_doc_targets.xml" haskeys="1">
      <select>
        <column table="a" column="kod_target" type="number" as="kod_target" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <call function="decode" as="doc_target_str" type="string" key="0">
          <column table="this" column="kod_target" />
          <const>106</const>
          <const>'USR'</const>
          <const>277</const>
          <const>'PSD'</const>
          <const>107</const>
          <const>'PSD_10'</const>
          <const>283</const>
          <const>'PSD_30'</const>
          <const>278</const>
          <const>'UTVPSD'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_doc_targets" as="a"></table>
        <query name="ips_doc_target_str" as="doc_target_str" join="left outer" dname="ips_doc_targets">
          <call function="=">
            <column table="this" column="doc_target_str" />
            <column table="doc_target_str" column="doc_target_str" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_doc_type" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_doc_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="ks14_prizn" type="number" title="" as="ks14_prizn" key="0"></column>
        <column table="a" column="num_value" type="number" title="" as="num_value" key="0"></column>
        <column table="a" column="dot_name" type="string" title="" comment="имя шаблона для автозаполнения" as="dot_name" key="0"></column>
        <column table="a" column="need_add" type="number" title="" comment="док-ты этого типа необходимо копировать в новую заявку (корректировку)" as="need_add" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="abbr" type="string" as="abbr" key="0"></column>
        <call function="nvl" type="number" as="pr_main" key="0">
          <query>
            <select>
              <call function="()" group="max" as="v">
                <const>1</const>
              </call>
            </select>
            <from>
              <query name="ips_doc_type_target" as="dtt" />
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="dtt" column="kod_doc_target" />
                  <const>284</const>
                </call>
                <call function="=">
                  <column table="dtt" column="kod_doc_type" />
                  <column table="a" column="kod_doc_type" />
                </call>
              </call>
            </where>
          </query>
          <const>0</const>
        </call>
        <call function="nvl" type="number" as="pr_e_ef" key="0">
          <query>
            <select>
              <call function="()" group="max" as="v">
                <const>1</const>
              </call>
            </select>
            <from>
              <query name="ips_doc_type_target" as="dtt" />
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="dtt" column="kod_doc_target" />
                  <const>296</const>
                </call>
                <call function="=">
                  <column table="dtt" column="kod_doc_type" />
                  <column table="a" column="kod_doc_type" />
                </call>
              </call>
            </where>
          </query>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_doc_type" as="a"></table>
      </from>
    </query>
    <query name="ips_doc_type_target" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_doc_type_target.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_type_target" type="number" as="kod_doc_type_target" key="1" fixed="1"></column>
        <column table="a" column="kod_doc_type" type="number" comment="тип документа" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" key="0"></column>
        <column table="a" column="kod_doc_target" type="number" comment="в каких местах может встречаться" as="kod_doc_target" reference="ips_doc_targets" refcol="kod_target" key="0"></column>
        <column table="a" column="kod_doc_type1" type="number" comment="тип зависимого документа" as="kod_doc_type1" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_doc_type_target" as="a"></table>
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" dname="ips_doc_type_target">
          <call function="=">
            <column table="a" column="kod_doc_type"></column>
            <column table="kod_doc_type" column="kod_doc_type"></column>
          </call>
        </query>
        <query name="ips_doc_targets" as="kod_doc_target" join="left outer" dname="ips_doc_type_target">
          <call function="=">
            <column table="a" column="kod_doc_target"></column>
            <column table="kod_doc_target" column="kod_target"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ips_klass_titul" class="1" timestamp="15.03.2017 15:38:09" title="Принадлежность к важн. объекта, программам" parent-field-name="kod_parent" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_klass_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_klass" type="number" as="kod_klass" key="1" fixed="1" />
        <column table="a" column="abbr_num" type="string" title="№" vid="1" as="abbr_num" key="0" />
        <column table="a" column="name" type="string" title="Наименование" vid="1" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" vid="1" as="abbr" key="0" />
        <column table="a" column="act_from" type="number" title="" as="act_from" key="0" />
        <column table="a" column="act_to" type="number" title="" as="act_to" key="0" />
        <call function="()" type="string" as="vid" key="0">
          <column table="this" column="abbr_num" />
        </call>
        <call function="||" type="string" as="vid_full" is-name="1" key="0">
          <column table="this" column="vid" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_klass_titul" as="a" title="Принадлежность к важн. объекта, программам" />
      </from>
    </query>
    <query name="ips_kriteria" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_kriteria.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kriteria" type="number" as="kod_kriteria" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="act_from" type="number" title="" as="act_from" key="0"></column>
        <column table="a" column="act_to" type="number" title="" as="act_to" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="cognos_name" type="string" title="" as="cognos_name" key="0"></column>
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="abbr" />
          <const>' '</const>
          <column table="a" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_kriteria" as="a"></table>
      </from>
    </query>
    <query name="ips_kriteria_otklon" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_kriteria_otklon.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kriteria_otklon" type="number" as="kod_kriteria_otklon" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Критерий отклонения (Россети)" as="abbr" key="0" />
        <column table="a" column="name" type="string" title="Критерий отклонения (Россети)" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="abbr1" type="string" title="Критерий отклонения (Минэнерго)" as="abbr1" key="0" />
        <column table="a" column="name1" type="string" title="Критерий отклонения (Минэнерго)" as="name1" key="0" />
        <call function="||" as="full_name" key="0">
          <column table="this" column="abbr" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <call function="||" as="full_name1" key="0">
          <column table="this" column="abbr1" />
          <const>' '</const>
          <column table="this" column="name1" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_kriteria_otklon" as="a" />
      </from>
    </query>
    <query name="ips_krit_minenergo" class="1" title="Критерий минэнерго" timestamp="14.03.2017 13:53:11" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_krit_minenergo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_krit_minenergo" type="number" as="kod_krit_minenergo" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="def_proc" type="number" title="" as="def_proc" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <call function="()" type="string" as="vid" fact="ips_krit_minenergo_vid" agg="list" is-name="1" key="0">
          <column table="this" column="abbr" />
        </call>
        <call function="||" type="string" as="vid_full" key="0">
          <column table="this" column="vid" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_krit_minenergo" as="a" title="Критерий минэнерго">
          <dlink name="vr_tree_krit_minenergo" as="vr_tree_krit_minenergo" table="vr_tree_krit_minenergo" child="vr_tree_krit_minenergo" field="kod_krit_minenergo" parent="ips_krit_minenergo" back="vr_tree_krit_minenergo">
            <link name="kod_tree" dimension="1" as="kod_tree" table="vr_tree" child="vr_tree_krit_minenergo" field="kod_tree" parent="vr_tree" back="vr_tree_krit_minenergo" />
          </dlink>
        </table>
      </from>
    </query>
    <query name="ips_objects" class="1" timestamp="18.04.2016 16:16:10" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_objects.xml" haskeys="1">
      <select>
        <column table="a" column="kod_object" type="number" as="kod_object" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование ОС" as="name" key="0" />
        <column table="a" column="invent_num" type="string" title="Инвентарный номер" as="invent_num" key="0" />
        <column table="a" column="kod_vid_object" type="number" as="kod_vid_object" key="0" />
        <column table="a" column="kod_podrazd" type="number" as="kod_podrazd" key="0" />
        <column table="a" column="link_podr" type="number" title="" as="link_podr" key="0" />
        <column table="a" column="is_new" type="number" title="" as="is_new" key="0" />
        <column table="a" column="kod_1c" type="string" as="kod_1c" key="0" />
        <column table="a" column="ekspluat_normativ" type="number" title="" comment="нормативный срок эксплуатации оборудования, лет" as="ekspluat_normativ" key="0" />
        <column table="a" column="ekspluat_buhgalt" type="number" title="" comment="срок эксплуатации оборудования по бухгалтерскому учету, лет" as="ekspluat_buhgalt" key="0" />
        <column table="a" column="buhgalt_iznos" type="number" title="" comment="бухгалтерский износ объекта, %" as="buhgalt_iznos" key="0" />
        <column table="a" column="phys_iznoz" type="number" title="" comment="физический износ объекта, %" as="phys_iznoz" key="0" />
      </select>
      <from>
        <table name="ips_objects" as="a" />
      </from>
    </query>
    <query name="ips_passport_doc_control" class="1" timestamp="05.05.2017 10:50:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_passport_doc_control.xml" haskeys="1">
      <select>
        <column table="a" column="kod_passport_doc_control" type="number" key="1" as="kod_passport_doc_control" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ips_passport_doc_control" as="a" />
      </from>
    </query>
    <query name="ips_priority" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_priority.xml" haskeys="1">
      <select>
        <column table="a" column="kod_priority" type="number" as="kod_priority" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" as="abbr" key="0" />
        <column table="a" column="kod_order" type="number" as="kod_order" key="0" />
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="abbr"></column>
          <column table="a" column="name"></column>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_priority" as="a" />
      </from>
    </query>
    <query name="ips_progpartner" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_progpartner.xml" haskeys="1">
      <select>
        <column table="a" column="kod_progpartner" type="number" as="kod_progpartner" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="act_from" type="number" title="" as="act_from" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="act_to" type="number" title="" as="act_to" reference="is_god" refcol="god" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <query as="kod_root" key="0">
          <select>
            <call function="keep last" as="kod_root">
              <column table="parents" column="kod_progpartner" group="max" />
              <call function="level" />
            </call>
          </select>
          <from>
            <query name="ips_progpartner" as="parents" />
          </from>
          <connect>
            <call function="=">
              <column table="parents" column="kod_progpartner" />
              <column table="parents" column="kod_parent" prior="1" />
            </call>
          </connect>
          <start>
            <call function="=">
              <column table="parents" column="kod_progpartner" />
              <column table="a" column="kod_progpartner" />
            </call>
          </start>
        </query>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_progpartner" as="a"></table>
        <query name="is_god" as="act_to" join="left outer" dname="ips_progpartner">
          <call function="=">
            <column table="a" column="act_to"></column>
            <column table="act_to" column="god"></column>
          </call>
        </query>
        <query name="is_god" as="act_from" join="left outer" dname="ips_progpartner">
          <call function="=">
            <column table="a" column="act_from"></column>
            <column table="act_from" column="god"></column>
          </call>
        </query>
        <query name="ips_progpartner" as="kod_root" dname="root_childs" join="left outer">
          <call function="=">
            <column table="kod_root" column="kod_progpartner" />
            <column table="this" column="kod_root" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_razdel_ip" class="1" title="Раздел ИПР" timestamp="15.03.2017 15:18:03" parent-field-name="kod_parent" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_razdel_ip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_razdel" type="number" as="kod_razdel" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Номер" vid="1" as="abbr" key="0" />
        <column table="a" column="name" type="string" title="Наименование" vid="1" as="name" key="0" />
        <column table="a" column="act_from" type="number" title="" as="act_from" key="0" />
        <column table="a" column="act_to" type="number" title="" as="act_to" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ips_razdel_ip" refcol="kod_razdel" key="0" />
        <column table="a" column="color" type="string" title="" as="color" key="0" />
        <column table="a" column="abbr1" type="string" title="" as="abbr1" key="0" />
        <column table="a" column="show_nomen_cost" type="number" title="" as="show_nomen_cost" key="0" />
        <column table="a" column="prizn" type="number" comment="Для отчета. Заполнен разово. 1-ВЛ 2-КЛ  3-ПС null - Прочие." as="prizn" key="0" />
        <call function="||" as="full_name" title="Наименование раздела" class-title="Раздел ИПР" key="0">
          <!--<column table="a" column="abbr"/>
          <const>' '</const>-->
          <column table="a" column="name" />
        </call>
        <column table="ips_razdel_ip_stored" column="path" as="path" key="0" />
        <column table="ips_razdel_ip_stored" column="kod_root" as="kod_root" key="0" />
        <column table="ips_razdel_ip_stored" column="tip_obj" as="tip_obj" key="0" />
        <call function="case" as="har" type="string" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="abbr" />
              <const>'1'</const>
            </call>
            <const>'ТПИР'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="abbr" />
              <const>'2'</const>
            </call>
            <const>'НС'</const>
          </call>
          <call function="else">
            <const>'-'</const>
          </call>
        </call>
        <call function="()" type="string" as="vid" key="0">
          <call function="nvl">
            <column table="this" column="abbr" />
            <column table="this" column="abbr1" />
          </call>
        </call>
        <call function="||" type="string" as="vid_full" is-name="1" key="0">
          <column table="this" column="vid" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_razdel_ip" as="a" title="Раздел ИПР" />
        <query name="ips_razdel_ip" as="kod_parent" dname="childs" join="left outer" title="Раздел ИПР">
          <call function="=">
            <column table="kod_parent" column="kod_razdel" />
            <column table="a" column="kod_parent" />
          </call>
        </query>
        <query name="ips_razdel_ip" as="kod_root" dname="root_childs" join="left outer" title="Раздел ИПР">
          <call function="=">
            <column table="kod_root" column="kod_razdel" />
            <column table="this" column="kod_root" />
          </call>
        </query>
        <query name="ips_razdel_ip_stored" join="left outer" as="ips_razdel_ip_stored" dname="ips_razdel_ip">
          <call function="=">
            <column table="this" column="kod_razdel" />
            <column table="ips_razdel_ip_stored" column="kod_razdel" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_smet_structure" title="Виды затрат" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_smet_structure.xml" haskeys="1">
      <select>
        <column table="a" column="kod_smet" type="number" as="kod_smet" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вид затрат" as="name" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0"></column>
        <column table="a" column="name_cognos" type="string" title="" as="name_cognos" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_smet_structure" as="a" title="Виды затрат"></table>
        <query name="ipr_fin_body_united" as="kod_smet" join="left outer" dname="ips_smet_structure" title="Ведение инвестиционных проектов">
          <call function="=">
            <column table="a" column="kod_smet"></column>
            <column table="kod_smet" column="kod_smet"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ips_subjects" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_subjects.xml" haskeys="1">
      <select>
        <column table="a" column="kod_subject" type="number" as="kod_subject" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Субъект Федерации" vid="1" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" vid="1" description="Субъект Федерации" as="abbr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_subjects" as="a" />
      </from>
    </query>
    <query name="ips_type_titul" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_type_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_type" type="number" as="kod_type" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <call function="||" as="full_name" title="Полное наименование" key="0">
          <column table="a" column="abbr"></column>
          <const>' '</const>
          <column table="a" column="name"></column>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_type_titul" as="a"></table>
      </from>
    </query>
    <query name="ips_units" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_units.xml" haskeys="1">
      <select>
        <column table="a" column="kod_unit" type="number" column-mandatory="1" as="kod_unit" key="1" fixed="1" />
        <column table="a" column="kod_phys_param" type="number" as="kod_phys_param" reference="ips_phys_param" refcol="kod_phys_param" key="0" />
        <column table="a" column="description" type="string" data-size="250" title="" as="description" key="0" />
        <column table="a" column="koef_okr" type="number" title="" as="koef_okr" key="0" />
        <column table="a" column="kod_okei" type="number" as="kod_okei" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="koef" type="number" title="" comment="коэффициент для домнодения на 1000, 1000000 - кило, мега..." as="koef" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_units" as="a" />
        <query name="ips_phys_param" as="kod_phys_param" join="left outer" dname="ips_units">
          <call function="=">
            <column table="a" column="kod_phys_param" />
            <column table="kod_phys_param" column="kod_phys_param" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_vid_object" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_object.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_object" type="number" as="kod_vid_object" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_vid_object" as="a"></table>
      </from>
    </query>
    <query name="ips_vid_zajavki" class="1" timestamp="30.05.2017 16:27:22" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_zajavki.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_z" type="number" as="kod_vid_z" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ips_vid_zajavki" refcol="kod_vid_z" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="disallow_prizn" type="number" title="" as="disallow_prizn" key="0" />
        <column table="a" column="show_fields" type="number" title="" as="show_fields" key="0" />
        <column table="a" column="kod_tarif" type="number" as="kod_tarif" reference="ips_tarifs" refcol="kod_tarif" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_vid_zajavki" as="a" />
        <query name="ips_tarifs" as="kod_tarif" join="left outer" dname="ips_vid_zajavki">
          <call function="=">
            <column table="a" column="kod_tarif" />
            <column table="kod_tarif" column="kod_tarif" />
          </call>
        </query>
        <query name="ips_vid_zajavki" as="kod_parent" join="left outer" dname="ips_vid_zajavki">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_vid_z" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_vid_zatrat" class="1" timestamp="03.04.2018 19:42:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_zatrat.xml" haskeys="1">
      <select>
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Вид затрат" as="name" key="0" />
        <column table="a" column="kod_proc_nds" type="number" as="kod_proc_nds" key="0" />
        <column table="a" column="auto_fact" type="number" title="" as="auto_fact" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="auto_add" type="number" title="" as="auto_add" key="0" />
        <column table="a" column="abbr" type="string" title="Вид затрат" as="abbr" key="0" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" reference="ips_smet_structure" refcol="kod_smet" key="0" />
        <column table="a" column="kod_ofis" type="number" as="kod_ofis" key="0" />
        <column table="a" column="proch" type="number" title="" as="proch" key="0" />
        <column table="a" column="proch_show" type="number" title="" as="proch_show" key="0" />
        <column table="a" column="proch_auto_doc" type="number" title="" comment="создается ли док-основание автоматически (если нет, то он может быть тлько один)" as="proch_auto_doc" key="0" />
        <column table="a" column="proch_auto_calc" type="number" title="" comment="содержание заказчика считается автоматичски" as="proch_auto_calc" key="0" />
        <column table="a" column="name_kr" type="string" title="" as="name_kr" key="0" />
        <column table="a" column="skod_1c" type="string" comment="код статьи в 1-с" as="skod_1c" key="0" />
        <column table="a" column="name_1c" type="string" title="" comment="наименов вида затрат в 1-с" as="name_1c" key="0" />
        <call function="||" as="full_name" title="Вид затрат" is-name="1" key="0">
          <column table="a" column="abbr" />
          <const>' '</const>
          <column table="a" column="name" />
        </call>
        <call function="||" as="full_name_tst" title="Вид затрат" is-name="1" is-fact="1" agg="1" fact="ips_vid_zatrat_full_name_tst" key="0">
          <column table="a" column="name" />
          <const>' '</const>
          <column table="a" column="abbr" />
        </call>
        <call function="case" as="kod_schet" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="skod_1c" />
              <const>'07 счет'</const>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="skod_1c" />
              <const>'10 счет'</const>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="skod_1c" />
              <const>'08.05 счет'</const>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="skod_1c" />
              <const>'08.41 счет'</const>
            </call>
            <const>4</const>
          </call>
          <call function="when">
            <call function="not like">
              <call function="lower">
                <column table="a" column="skod_1c" />
              </call>
              <const>'%счет'</const>
            </call>
            <const>3</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="||" as="sp_col_name" title="" key="0">
          <call function="||" as="full_name" title="Вид затрат" is-name="1">
            <column table="a" column="abbr" />
            <const>' '</const>
            <column table="a" column="name" />
          </call>
          <const>' '</const>
          <call function="||" as="full_name_tst" title="Вид затрат" is-name="1" is-fact="1" agg="1">
            <column table="a" column="name" />
            <const>' '</const>
            <column table="a" column="abbr" />
          </call>
        </call>
      </select>
      <from>
        <table name="ips_vid_zatrat" as="a" />
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dimension="1" dname="ips_vid_zatrat" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet" />
            <column table="kod_smet" column="kod_smet" />
          </call>
        </query>
        <query name="ips_vid_zatrat_schet" as="kod_schet" join="left outer" dname="ips_vid_zatrat">
          <call function="=">
            <column table="this" column="kod_schet" />
            <column table="kod_schet" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="ips_work_kind" class="1" timestamp="15.11.2018 13:29:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_work_kind.xml" haskeys="1">
      <select>
        <column table="a" column="kod_work_kind" type="number" column-mandatory="1" as="kod_work_kind" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" key="0" />
        <column table="a" column="not_need_prizn" type="number" title="" as="not_need_prizn" key="0" />
        <column table="a" column="kod_need" type="number" as="kod_need" key="0" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" reference="ips_smet_structure" refcol="kod_smet" key="0" />
        <column table="a" column="pr_tu" type="number" title="" as="pr_tu" key="0" />
        <column table="a" column="pr_outdated" type="number" title="" as="pr_outdated" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ips_work_kind" as="a" />
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="ips_work_kind" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet" />
            <column table="kod_smet" column="kod_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipt_summ_1c" class="1" timestamp="27.06.2016 14:49:07" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipt_summ_1c.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipt_summ_1c" type="number" key="1" as="kod_ipt_summ_1c" />
        <column table="a" column="requests" type="string" title="" as="requests" />
        <column table="a" column="tit_num_new" type="string" title="" as="tit_num_new" reference="ipr_titul_ip" refcol="tit_num_new" />
        <column table="kod_titul_ip" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="kod_ispolnit" type="number" as="kod_ispolnit" />
        <column table="a" column="kod_vid_zatrat" type="number" dimension="ipr_kod_zatrat" as="kod_vid_zatrat" reference="ips_vid_zatrat" refcol="kodzatrat" />
        <column table="a" column="summ" type="number" title="" fact="ipr_1c_data_nzs" agg="sum" as="summ" />
        <column table="a" column="pr" type="number" title="" as="pr" />
        <column table="a" column="kod_vid_zajavki" type="number" as="kod_vid_zajavki" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ipt_summ_1c" as="a" />
        <query name="ipr_titul_ip" join="left outer" as="kod_titul_ip" dname="ipt_summ_1c" title="Титулы">
          <call function="=">
            <column table="a" column="tit_num_new" />
            <column table="kod_titul_ip" column="tit_num_new" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kod_vid_zatrat" join="left outer" dname="ipt_summ_1c">
          <call function="=">
            <column table="a" column="kod_vid_zatrat" />
            <column table="kod_vid_zatrat" column="kodzatrat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipv_ipr_version" class="1" timestamp="24.09.2018 13:42:49" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipv_ipr_version.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="doc_num" type="string" title="" as="doc_num" key="0" />
        <column table="a" column="doc_name" type="string" title="" as="doc_name" key="0" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" key="0" />
        <column table="a" column="end_god_ip" type="number" title="" as="end_god_ip" key="0" />
        <column table="a" column="kod_status" type="number" as="kod_status" key="0" />
        <column table="a" column="status_name" type="string" title="" as="status_name" key="0" />
        <column table="a" column="doc_date" type="date" title="" as="doc_date" key="0" />
        <column table="a" column="link_storage" type="string" title="" as="link_storage" key="0" />
        <column table="a" column="is_closed" type="number" title="" as="is_closed" key="0" />
        <column table="a" column="asuz_sign" type="number" title="" as="asuz_sign" key="0" />
        <call function="||" as="full_name" title="Наименование" key="0">
          <column table="a" column="doc_num" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="doc_date" />
          </call>
          <const>' : '</const>
          <column table="a" column="doc_name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipv_ipr_version" as="a" />
      </from>
    </query>
    <query name="ipv_phys_param_values" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipv_phys_param_values.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="ipr_doc" refcol="kod_doc" key="0"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0"></column>
        <column table="a" column="kod_phis_param" type="number" as="kod_phis_param" key="0"></column>
        <column table="a" column="value" type="string" title="" as="value" key="0"></column>
        <column table="a" column="value_dem" type="string" title="" as="value_dem" key="0"></column>
        <column table="a" column="old_value" type="string" title="" as="old_value" key="0"></column>
        <call function="cut_num" as="nvalue" key="0">
          <column table="this" column="value" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipv_phys_param_values" as="a"></table>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="ipv_phys_param_values">
          <call function="=">
            <column table="a" column="kod_ipr"></column>
            <column table="kod_ipr" column="kod_ipr"></column>
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc" join="left outer" dname="ipv_phys_param_values">
          <call function="=">
            <column table="a" column="kod_doc"></column>
            <column table="kod_doc" column="kod_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="ipv_phys_param_values" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip"></column>
            <column table="kod_titul_ip" column="kod_titul_ip"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ipv_razdel_mn" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipv_razdel_mn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_minenergo" type="string" title="" as="kod_minenergo" key="1" fixed="1"></column>
        <column table="a" column="kod_parent" type="string" as="kod_parent" reference="ipv_razdel_mn" refcol="kod" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <call function="||" as="full_name" title="Наименование раздела" class-title="Раздел " key="0">
          <column table="a" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipv_razdel_mn" as="a"></table>
        <query name="ipv_razdel_mn" as="kod_parent" dname="childs" join="left outer">
          <call function="=">
            <column table="kod_parent" column="kod" />
            <column table="a" column="kod_parent" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipv_razdel_rs" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipv_razdel_rs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_klass" type="string" as="kod_klass" key="1" fixed="1"></column>
        <column table="a" column="kod_parent" type="string" as="kod_parent" reference="ipv_razdel_rs" refcol="kod_klass" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr_num" type="string" title="" as="abbr_num" key="0"></column>
        <call function="||" as="full_name" title="Наименование раздела" class-title="Раздел " key="0">
          <column table="a" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipv_razdel_rs" as="a"></table>
        <query name="ipv_razdel_rs" as="kod_parent" dname="childs" join="left outer">
          <call function="=">
            <column table="kod_parent" column="kod_klass" />
            <column table="a" column="kod_parent" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipv_status_tit" class="1" timestamp="01.11.2017 14:43:54" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipv_status_tit.xml" haskeys="1">
      <select>
        <column table="a" column="status" type="number" title="" key="1" as="status" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="plan.ipv_status_tit" as="a" />
      </from>
    </query>
    <query name="isv_ad_all" class="1" timestamp="09.08.2018 16:43:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_all.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_all_id" key="1">
          <call function="to_char">
            <column table="a" column="kn_req" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="№ в Уник.дог. (старый)" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" type="number" title="№ в Уник.дог. (старый)" as="kod_dop_contract" />
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" />
        <column table="a" column="num_contr" type="string" title="№ договора (старый)" as="num_contr" />
        <column table="a" column="num_req" type="string" title="№ заявки" as="num_req" />
        <column table="a" column="dt_contract" type="date" title="Дата начала действия АД" as="dt_contract" />
        <column table="a" column="contr_note" type="string" title="Примечание по АД" as="contr_note" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="a_customer" type="string" title="Абонент" as="a_customer" />
        <column table="a" column="name_all" type="string" title="Полное наименование  абонента" as="name_all" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" />
        <column table="a" column="kpp" type="string" title="КПП" as="kpp" />
        <column table="a" column="vb_customer" type="string" title="" as="vb_customer" />
        <column table="a" column="ind_proekt" type="number" title="Индив. проект" as="ind_proekt" />
        <column table="a" column="sind_proekt" type="string" title="" as="sind_proekt" />
        <column table="a" column="load_point" type="string" title="Точка подключения" as="load_point" />
        <column table="a" column="name_rs" type="string" title="РЭС" as="name_rs" />
        <column table="a" column="load_sum1" type="number" title="Кат.1 мощность" as="load_sum1" />
        <column table="a" column="load_sum2" type="number" title="Кат.2 мощность" as="load_sum2" />
        <column table="a" column="load_sum3" type="number" title="Кат.3 мощность" as="load_sum3" />
        <column table="a" column="sum_load" type="number" title="Суммарная мощность" as="sum_load" />
        <column table="a" column="load1" type="number" title="Кат.1 мощность" as="load1" />
        <column table="a" column="load2" type="number" title="Кат.2 мощность" as="load2" />
        <column table="a" column="load3" type="number" title="Кат.3 мощность" as="load3" />
        <column table="a" column="load123" type="number" title="Заявленная мощность" as="load123" />
        <column table="a" column="load_existed" type="number" title="Существующая мощность" as="load_existed" />
        <column table="a" column="req_year" type="number" title="" as="req_year" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="load_existed_kvt" type="number" title="" as="load_existed_kvt" />
        <column table="a" column="load_ex1" type="number" title="Кат.1 Существ. мощность" as="load_ex1" />
        <column table="a" column="load_ex2" type="number" title="Кат.2 Существ. мощность" as="load_ex2" />
        <column table="a" column="load_ex3" type="number" title="Кат.3 Существ. мощность" as="load_ex3" />
        <column table="a" column="kateg" type="string" title="" as="kateg" />
        <column table="a" column="supply" type="string" title="Источник питания" as="supply" />
        <column table="a" column="supply1" type="string" title="Источник 2 питания" as="supply1" />
        <column table="a" column="kn_sert" type="number" title="Номер АТП" as="kn_sert" />
        <column table="a" column="dt_reg" type="date" title="Дата  регистр. АТП" as="dt_reg" />
        <column table="a" column="dt_delivery" type="date" title="Дата выдачи АТП" as="dt_delivery" />
        <column table="a" column="dat_act" type="date" title="Дата акта бездоговорного использ" as="dat_act" />
        <column table="a" column="dts_final" type="string" title="" as="dts_final" />
        <column table="a" column="sfl_build" type="string" title="" as="sfl_build" />
        <column table="a" column="sfl_build_vip" type="string" title="" as="sfl_build_vip" />
        <column table="a" column="sfl_build_z" type="string" title="" as="sfl_build_z" />
        <column table="a" column="sfl_build_z_vip" type="string" title="" as="sfl_build_z_vip" />
        <column table="a" column="fl_build" type="number" title="Наличие работ ЛЭ" as="fl_build" />
        <column table="a" column="fl_build_vip" type="number" title="Работы выполн. ЛЭ" as="fl_build_vip" />
        <column table="a" column="fl_build_z" type="number" title="Наличие работ Заявителя" as="fl_build_z" />
        <column table="a" column="fl_build_z_vip" type="number" title="Работы выполн. Заявителем" as="fl_build_z_vip" />
        <column table="a" column="kn_zone" type="number" title="Зона" as="kn_zone" />
        <column table="a" column="contr_sumf" type="number" title="Стоимость АД" as="contr_sumf" />
        <column table="a" column="cm_case" type="string" title="" as="cm_case" />
        <column table="a" column="contr_kind" type="string" title="Тип дог-ра" as="contr_kind" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="num_ouco" type="string" title="№ Уник.дог." as="num_ouco" />
        <column table="a" column="cust_addr_old" type="string" title="" as="cust_addr_old" />
        <column table="a" column="lp_addr_old" type="string" title="" as="lp_addr_old" />
        <column table="a" column="cust_addr" type="string" title="Адрес абонента" as="cust_addr" />
        <column table="a" column="lp_addr" type="string" title="Адрес подключения" as="lp_addr" />
        <column table="a" column="sum_rated" type="number" title="Сумма расчетная по заявке" as="sum_rated" />
        <column table="a" column="contr_sum_m" type="number" title="Денежная часть" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="Имущественная часть" as="contr_sum_e" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" />
        <column table="a" column="contr_kn_house" type="number" title="" as="contr_kn_house" />
        <column table="a" column="contr_addr_type" type="number" title="" as="contr_addr_type" />
        <column table="a" column="req_kn_house" type="number" title="" as="req_kn_house" />
        <column table="a" column="req_addr_type" type="number" title="" as="req_addr_type" />
        <column table="a" column="kodres" type="number" title="" as="kodres" />
        <column table="a" column="num_ds" type="string" title="№ д/с" as="num_ds" />
        <column table="a" column="dt_request" type="date" title="Дата заявки" as="dt_request" />
        <column table="a" column="exp_num" type="string" title="№ СЗ в ДПО" as="exp_num" />
        <column table="a" column="exp_dat" type="date" title="Дата СЗ в ДПО" as="exp_dat" />
        <column table="a" column="exp_prim" type="string" title="Причина передачи СЗ в ДПО" as="exp_prim" />
        <column table="a" column="reg_req_title" type="string" title="Титул" as="reg_req_title" />
        <column table="a" column="guess_sum" type="number" title="Стоимость&#xA;проекта&#xA;(оценка)" as="guess_sum" />
        <column table="a" column="pr_name" type="string" title="Приложение ИП" as="pr_name" />
        <column table="a" column="name_group" type="string" title="Группа" as="name_group" />
        <column table="a" column="num_tu" type="string" title="номер ТУ" as="num_tu" />
        <column table="a" column="skorr_ip" type="string" title="" as="skorr_ip" />
        <column table="a" column="korr_ip" type="number" title="Корректировка ИП" as="korr_ip" />
        <column table="a" column="dat_vip_rab" type="date" title="Дата справки о выполнении работ" as="dat_vip_rab" />
        <column table="a" column="num_vip_rab" type="string" title="Номер справки о выполнении раб" as="num_vip_rab" />
        <column table="a" column="name_rab" type="string" title="" as="name_rab" />
        <column table="a" column="name_oblig" type="string" title="" as="name_oblig" />
        <column table="a" column="dat_tz_ks" type="date" title="ТЗ передано в КС (дата)" as="dat_tz_ks" />
        <column table="a" column="dat_ks_11" type="date" title="КС-11 (дата)" as="dat_ks_11" />
        <column table="a" column="fl_work_net" type="number" title="Раб. по РС" as="fl_work_net" />
        <column table="a" column="sfl_work_net" type="string" title="" as="sfl_work_net" />
        <column table="a" column="fl_work_pu" type="number" title="Раб. по ПУ" as="fl_work_pu" />
        <column table="a" column="sfl_work_pu" type="string" title="" as="sfl_work_pu" />
        <column table="a" column="vol" type="string" title="Уровень напряжения" as="vol" />
        <column table="a" column="kod_spr_kurators" type="number" as="kod_spr_kurators" />
        <column table="a" column="kod_spr_kurators_req" type="number" as="kod_spr_kurators_req" />
        <column table="a" column="name_kurators" type="string" title="Куратор договора" as="name_kurators" />
        <column table="a" column="name_kurators_req" type="string" title="Куратор заявки" as="name_kurators_req" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" />
        <column table="a" column="dat_vol" type="date" title="" as="dat_vol" />
        <column table="a" column="prim" type="string" title="Примечание (техн.инф.)" as="prim" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="ku_name" type="string" title="" as="ku_name" />
        <column table="a" column="dat_vip" type="date" title="" as="dat_vip" />
        <column table="a" column="dat_ouco" type="date" title="Дата регистр. в ОУСО" as="dat_ouco" />
        <column table="a" column="dat_end" type="date" title="Дата закрытия дог-ра" as="dat_end" />
        <column table="a" column="dat_rastorg" type="date" title="Дата расторж. дог-ра" as="dat_rastorg" />
        <column table="a" column="dat_sl_zap" type="date" title="Дата передачи ДС в бух." as="dat_sl_zap" />
        <column table="a" column="dat_per_sl_zap" type="date" title="Дата передачи ТЗ в работу" as="dat_per_sl_zap" />
        <column table="a" column="srok_uslug" type="date" title="Срок оказания услуг" as="srok_uslug" />
        <column table="a" column="cp" type="number" title="" as="cp" />
        <column table="a" column="scp" type="string" title="" as="scp" />
        <column table="a" column="ap" type="number" title="" as="ap" />
        <column table="a" column="uvedom" type="number" title="" as="uvedom" />
        <column table="a" column="uvedom_r" type="number" title="" as="uvedom_r" />
        <column table="a" column="sap" type="string" title="" as="sap" />
        <column table="a" column="suvedom" type="string" title="" as="suvedom" />
        <column table="a" column="suvedom_r" type="string" title="" as="suvedom_r" />
        <column table="a" column="name_obj" type="string" title="Подключаемый объект" as="name_obj" />
        <column table="a" column="name_zayav" type="string" title="Признак заявителя" as="name_zayav" />
        <column table="a" column="god_tarif" type="number" title="Год тарифа" as="god_tarif" />
        <column table="a" column="god_ip" type="number" title="Инвест. пр-ма (год)" as="god_ip" />
        <column table="a" column="dat_ks" type="date" title="Передан в работу в блок КС" as="dat_ks" />
        <column table="a" column="opl" type="number" title="Оплата всего" as="opl" />
        <column table="a" column="name_kr" type="string" title="Подразделение регистрации дог-ра" as="name_kr" />
        <column table="a" column="vid_atp" type="string" title="Вид АТП" as="vid_atp" />
        <column table="a" column="load_units" type="string" title="Ед. Изм. мощн." as="load_units" />
        <column table="a" column="folder" type="string" title="№ папки" as="folder" />
        <column table="a" column="folder_date" type="date" title="Дата создания папки" as="folder_date" />
        <column table="a" column="name_folder_user" type="string" title="Папка создана пользователем" as="name_folder_user" />
        <column table="a" column="fl_rotate" type="number" title="Оче редь" as="fl_rotate" />
        <column table="a" column="fl_rnk_not" type="number" title="Без РНК" as="fl_rnk_not" />
        <column table="a" column="sfl_rotate" type="string" title="" as="sfl_rotate" />
        <column table="a" column="sfl_rnk_not" type="string" title="" as="sfl_rnk_not" />
        <column table="a" column="quant_ds" type="number" title="Кол-во Д/С" as="quant_ds" />
        <column table="a" column="dat_ds" type="date" title="Дата посл. Д/С" as="dat_ds" />
        <column table="a" column="fl_discount" type="number" title="Льгот." as="fl_discount" />
        <column table="a" column="sfl_discount" type="string" title="" as="sfl_discount" />
        <column table="a" column="titul_ip" type="string" title="№ Титула" as="titul_ip" />
        <column table="a" column="num_aip" type="string" title="№ АИП" as="num_aip" />
        <column table="a" column="name_vid_ad" type="string" title="Вид дог-ра" as="name_vid_ad" />
        <column table="a" column="name_kat_zayav" type="string" title="Категория заявителя" as="name_kat_zayav" />
        <column table="a" column="dat_close_deb_zadol" type="date" title="Дата погашения ДЗ (план)" as="dat_close_deb_zadol" />
        <column table="a" column="otl_usl" type="string" title="Отлагательные условия" as="otl_usl" />
        <column table="a" column="sstage" type="string" title="" as="sstage" />
        <column table="a" column="ssso" type="string" title="" as="ssso" />
        <column table="a" column="stage" type="number" title="Этапы" as="stage" />
        <column table="a" column="sso" type="number" title="ССО" as="sso" />
        <column table="a" column="dat_status_2" type="date" title="Дата аннулирования" as="dat_status_2" />
        <column table="a" column="num_ad" type="string" title="№ АД" as="num_ad" />
        <column table="a" column="pr_db" type="number" title="Признак DB" as="pr_db" />
        <column table="a" column="spr_db" type="string" title="" as="spr_db" />
        <column table="a" column="dat_uv_el_ust" type="date" title="Дата увед. о предъявл. эл.установки" as="dat_uv_el_ust" />
        <column table="a" column="dat_spis_kz" type="date" title="Дата списания КЗ" as="dat_spis_kz" />
        <column table="a" column="um_status_1" type="string" title="Регистратор дог-ра" as="um_status_1" />
        <column table="a" column="srok_otl_usl" type="date" title="Срок действ. отлагат. условий" as="srok_otl_usl" />
        <column table="a" column="vid_otl_usl" type="string" title="Вид отлагат. условий" as="vid_otl_usl" />
        <column table="a" column="razdel_okved" type="string" title="Раздел ОКВЭД" as="razdel_okved" />
        <column table="a" column="name_razdel_okved" type="string" title="Наименование раздела ОКВЭД" as="name_razdel_okved" />
        <column table="a" column="sposob_okved" type="string" title="Способ определения ОКВЭД" as="sposob_okved" />
        <column table="a" column="name_otrasl" type="string" title="Отрасль" as="name_otrasl" />
        <column table="a" column="group_lp" type="string" title="Группа точки подключения" as="group_lp" />
        <column table="a" column="vid_ds" type="string" title="Вид д/с" as="vid_ds" />
        <column table="a" column="contr_opl_d" type="number" title="Сумма оплаты денежнаяАД" as="contr_opl_d" />
        <column table="a" column="contr_opl_i" type="number" title="Сумма оплаты имущественная" as="contr_opl_i" />
        <column table="a" column="contr_opl" type="number" title="Сумма оплаты АД" as="contr_opl" />
        <column table="a" column="vozvrat" type="number" title="Возврат" as="vozvrat" />
        <column table="a" column="perepl" type="number" title="Переплата" as="perepl" />
        <column table="a" column="sum_os" type="number" title="Итоговая стоимость ОС" as="sum_os" />
        <column table="a" column="zadol_opl" type="number" title="Задолженность по АД" as="zadol_opl" />
        <column table="a" column="zadol_d" type="number" title="Задолженность денежная" as="zadol_d" />
        <column table="a" column="zadol_i" type="number" title="Задолженность имуществ." as="zadol_i" />
        <column table="a" column="sum_akts" type="number" title="Сумма выполнения" as="sum_akts" />
        <column table="a" column="proc_opl" type="number" title="% оплаты" as="proc_opl" />
        <column table="a" column="imuch" type="number" title="Передача имуществом" as="imuch" />
        <column table="a" column="dat_opl" type="date" title="Последняя дата оплаты" as="dat_opl" />
        <column table="a" column="sum_pd" type="number" title="Сумма подрядных дог-ров" as="sum_pd" />
        <column table="a" column="ind_tar" type="number" title="Инд. тариф" as="ind_tar" />
        <column table="a" column="fl_work_ps" type="number" title="Раб. на ист." as="fl_work_ps" />
        <column table="a" column="sfl_work_ps" type="string" title="" as="sfl_work_ps" />
        <column table="a" column="fl_loss" type="number" title="Дог. убыт." as="fl_loss" />
        <column table="a" column="sfl_loss" type="string" title="" as="sfl_loss" />
        <column table="a" column="name_status" type="string" title="Состояние АД" as="name_status" />
        <column table="a" column="text_rab" type="string" title="Работы" as="text_rab" />
        <column table="a" column="text_oblig" type="string" title="Обязательства" as="text_oblig" />
        <column table="a" column="text_spis" type="string" title="Списание задолженности" as="text_spis" />
        <column table="a" column="dat_read_to_close" type="date" title="Дата направ. уведомл. о готовн. к закрытию" as="dat_read_to_close" />
        <column table="a" column="read_to_close" type="number" title="Направлено уведомл.  о готовн.к закрытию" as="read_to_close" />
        <column table="a" column="fio" type="string" title="Изменил состояния АД" as="fio" />
        <column table="a" column="dataizm" type="date" title="Дата изменения состояния АД" as="dataizm" />
        <column table="a" column="old_status_name" type="string" title="Предыдущее состояние АД" as="old_status_name" />
        <column table="a" column="analog" type="string" title="Аналоги" as="analog" />
        <column table="a" column="dat_dop_doc" type="date" title="Дата доп. док-та" as="dat_dop_doc" />
        <column table="a" column="num_dop_doc" type="string" title="№ доп. док-та" as="num_dop_doc" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" />
        <column table="a" column="pr_late_payment" type="number" title="Нарушение графика оплаты" as="pr_late_payment" />
        <column table="a" column="prior_ad" type="string" title="Признак приоритетности" as="prior_ad" />
        <column table="a" column="vrem_tp" type="number" title="Временное &#xA;ТП&#xA;" as="vrem_tp" />
        <column table="a" column="dat_fact_vol" type="date" title="Дата&#xA;фактической подачи&#xA;напряжения" as="dat_fact_vol" />
        <column table="a" column="pr_ofz" type="number" title="Признак ОФЗ" as="pr_ofz" />
        <column table="a" column="podr_status_1" type="string" title="Подразделение &#xA;регистратора&#xA;дог-ра" as="podr_status_1" />
        <column table="a" column="num_ad_pref" type="string" title="" as="num_ad_pref" />
        <column table="a" column="pr_sum_name" type="string" title="Ставка" as="pr_sum_name" />
        <column table="a" column="group_ad" type="string" title="" as="group_ad" />
        <column table="a" column="mo_name" type="string" title="Сельское поселение(было)" as="mo_name" />
        <column table="a" column="folder_ofz" type="string" title="Папка архива ОФЗ" as="folder_ofz" />
        <column table="a" column="all_control" type="number" title="Проверка завершена по ОФЗ" as="all_control" />
        <column table="a" column="n_pril" type="string" title="Приказ 609 № Приложения" as="n_pril" />
        <column table="a" column="filial" type="string" title="Филиал" as="filial" />
        <column table="a" column="s_mobr" type="string" title="Муниципальное образование (было)" as="s_mobr" />
        <column table="a" column="s_nasp" type="string" title="Населенный пункт (было)" as="s_nasp" />
        <column table="a" column="pr_ad_iskl" type="number" title=" Принуд.ОДИ" as="pr_ad_iskl" />
        <column table="a" column="vid_opl_ad" type="string" title="Вид оплаты договора" as="vid_opl_ad" />
        <column table="a" column="type_req" type="string" title="Тип заявки" as="type_req" />
        <column table="a" column="pr_gen" type="number" title="Генерация" as="pr_gen" />
        <column table="a" column="pr_num_pref_control" type="number" title="№ АД проверен" as="pr_num_pref_control" />
        <column table="a" column="dat_got_to_close" type="date" title="Дата получ. уведомл. о готовн.  Заявителя" as="dat_got_to_close" />
        <column table="a" column="got_to_close" type="number" title="Получено уведомл.  о готовн. Заявителя" as="got_to_close" />
        <column table="a" column="dat_first_opl" type="date" title="Первая дата оплаты" as="dat_first_opl" />
        <column table="a" column="srok_tu" type="date" title="Срок действия ТУ" as="srok_tu" />
        <column table="a" column="load_point1" type="string" title="Точка подключения 2" as="load_point1" />
        <column table="a" column="vol1" type="string" title="Уровень  напряжения 2" as="vol1" />
        <column table="a" column="group_lp1" type="string" title="Группа  точки  подключения 2" as="group_lp1" />
        <column table="a" column="titul_ad" type="number" title="Нет связи с объектом строительства" as="titul_ad" />
        <column table="a" column="ds_not_rab_le" type="number" title="" as="ds_not_rab_le" />
        <column table="a" column="cnt_mes" type="number" title="Период рассрочки (месяцев)" as="cnt_mes" />
        <column table="a" column="pr_ofz_vkl" type="number" title="" as="pr_ofz_vkl" />
        <column table="a" column="status_ofz" type="string" title="Статус состояния ОФЗ" as="status_ofz" />
        <column table="a" column="name_mo" type="string" title="Муниципальное образование" as="name_mo" />
        <column table="a" column="name_np" type="string" title="Населенный пункт" as="name_np" />
        <column table="a" column="name_sp" type="string" title="Сельское поселение" as="name_sp" />
        <column table="a" column="name_direct_i" type="string" title="Инициатор ОФЗ" as="name_direct_i" />
        <column table="a" column="sposob_zayav" type="string" title="Способ подачи заявки" as="sposob_zayav" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" as="pr_exist_pd" />
        <column table="a" column="dat_plan_rab" type="date" title="Плановая дата работ" as="dat_plan_rab" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="pr_part_akt" type="number" title="" as="pr_part_akt" />
        <column table="a" column="spos_vip" type="string" title="Способ выполнения работ ЛЭ" as="spos_vip" />
        <column table="a" column="org_active" type="string" title="ДЗО" as="org_active" />
        <column table="a" column="dat_status_1" type="date" title="" as="dat_status_1" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="kod_vol" type="number" as="kod_vol" />
        <column table="a" column="dt_indtar_got" type="date" title="" as="dt_indtar_got" />
        <column table="a" column="proc" type="number" title="" as="proc" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="contr_opl_bez_nds_d" type="number" title="" as="contr_opl_bez_nds_d" />
        <column table="a" column="contr_opl_bez_nds_i" type="number" title="" as="contr_opl_bez_nds_i" />
        <column table="a" column="pr_dso" type="number" title="" as="pr_dso" />
        <column table="a" column="kod_filial_tit" type="number" as="kod_filial_tit" />
        <column table="a" column="proc_atp" type="number" title="" as="proc_atp" />
        <column table="a" column="kod_vid_ad" type="number" as="kod_vid_ad" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="dat_status_4" type="date" title="" as="dat_status_4" />
        <column table="a" column="dat_status_5" type="date" title="" as="dat_status_5" />
        <column table="a" column="dat_status_30" type="date" title="" as="dat_status_30" />
        <column table="a" column="dat_akt" type="date" title="" as="dat_akt" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="pr_sum" type="number" title="" as="pr_sum" />
        <column table="a" column="pr_nonprofit" type="string" title="" as="pr_nonprofit" />
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" />
        <column table="a" column="kn_supply1" type="number" title="" as="kn_supply1" />
        <column table="a" column="kn_load_type" type="number" title="" as="kn_load_type" />
        <column table="a" column="kod_pr_zayav" type="number" as="kod_pr_zayav" />
        <column table="a" column="kn_st_req" type="number" title="" as="kn_st_req" />
        <column table="a" column="kod_spr_ini_prod" type="number" as="kod_spr_ini_prod" />
        <column table="a" column="name_ini_prod" type="string" title="Инициатор продления" as="name_ini_prod" />
        <column table="a" column="dt_bus_plan" type="date" title="Бизнес план" as="dt_bus_plan" />
        <column table="a" column="power" type="number" title="" as="power" />
        <column table="a" column="power_units" type="string" title="" as="power_units" />
        <column table="a" column="cnt_mes_tp" type="date" title="Плановая дата выполнения работ заявителем" as="cnt_mes_tp" />
        <column table="a" column="kod_ini_prod_ds" type="number" as="kod_ini_prod_ds" />
        <column table="a" column="name_ini_prod_ds" type="string" title="Инициатор ДС" as="name_ini_prod_ds" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_zpr" type="number" as="kod_zpr" />
        <column table="a" column="length_le" type="number" title="" as="length_le" />
        <column table="a" column="kod_org_active" type="number" as="kod_org_active" />
        <column table="a" column="kod_dzo_bus_plan" type="number" as="kod_dzo_bus_plan" />
        <column table="a" column="name_dzo_bus_plan" type="string" title="Принадлежность БП" as="name_dzo_bus_plan" />
        <column table="a" column="pr_motiv_ref" type="number" title="" as="pr_motiv_ref" />
        <column table="a" column="dat_ecp_le" type="date" title="Дата подписания ЭЦП ЛЭ" as="dat_ecp_le" />
        <column table="a" column="dat_ecp_ab" type="date" title="Дата подписания ЭЦП абонентом" as="dat_ecp_ab" />
        <column table="a" column="kod_status_every_day" type="number" as="kod_status_every_day" />
        <column table="a" column="name_status_every_day" type="string" title="Статус в отчет ВКС" as="name_status_every_day" />
        <column table="a" column="zadol_d_prosrok" type="number" title="Денежная задолженность просроченная" as="zadol_d_prosrok" />
        <column table="a" column="kod_fs" type="number" as="kod_fs" />
        <column table="a" column="pr_nw_more" type="number" title="По сети 35-110 " as="pr_nw_more" />
        <column table="a" column="pr_nw_less" type="number" title="По сети 35" as="pr_nw_less" />
        <column table="a" column="pr_nw_more_end" type="number" title="Вып. по сети 35-110" as="pr_nw_more_end" />
        <column table="a" column="pr_nw_less_end" type="number" title="Вып. по сети 35" as="pr_nw_less_end" />
        <column table="a" column="num_order" type="string" title="Номер приказа" as="num_order" />
        <column table="a" column="date_order" type="date" title="Дата приказа" as="date_order" />
        <column table="a" column="dat_zam_stor" type="date" title="Замена стороны" as="dat_zam_stor" />
        <column table="a" column="srok_bus_plan" type="string" title="Срок бизн.плана" as="srok_bus_plan" />
        <column table="a" column="dat_prognoz_od" type="date" title="Прогноз ОД" as="dat_prognoz_od" />
        <column table="a" column="kod_ipr" type="string" as="kod_ipr" />
        <column table="a" column="dat_real_ipr" type="string" title="" as="dat_real_ipr" />
        <column table="a" column="podr_ipr" type="string" title="" as="podr_ipr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_all" as="a" />
      </from>
    </query>
    <query name="isv_ad_everyday" timestamp="25.09.2020 04:16:14" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_everyday.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ad_everyday" type="string" title="" key="1" as="kod_ad_everyday" />
        <call function="||" as="isv_ad_everyday_id">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" is-final-dimension="1" is-private-dimension="1" as="kod_dop_contract" reference="is_reestr_actual" refcol="kod_dop_contract" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="num_req" type="string" title="№ заявки" as="num_req" />
        <column table="a" column="kod_filial" type="number" dimension="ipr_kod_ispolnit" is-final-dimension="1" is-private-dimension="1" as="kod_filial" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="titul_ip" type="string" title="" as="titul_ip" />
        <column table="a" column="fl_build" type="number" title="" dimension="evd_fl_build" is-final-dimension="1" is-private-dimension="1" as="fl_build" />
        <column table="a" column="podr_name_titul" type="string" title="Подразделение по титулу" dimension="evd_podr_name_titul" is-final-dimension="1" is-private-dimension="1" as="podr_name_titul" />
        <column table="a" column="pr_ofz_vkl" type="number" title="" dimension="evd_pr_ofz_vkl" is-final-dimension="1" is-private-dimension="1" as="pr_ofz_vkl" />
        <column table="a" column="dt_reg" type="date" title="Дата АТП" as="dt_reg" />
        <column table="a" column="otch_list" type="number" title="" dimension="evd_otch_list" is-final-dimension="1" is-private-dimension="1" as="otch_list" />
        <column table="a" column="kod_filial_tit" type="number" dimension="ipr_kod_ispolnit_tit" as="kod_filial_tit" is-final-dimension="1" is-private-dimension="1" comment="вычисляется в ext" />
        <column table="a" column="dt_contract" type="date" title="Дата нач. действия договора" dimension="evd_dt_contract" is-final-dimension="1" is-private-dimension="1" as="dt_contract" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" />
        <column table="a" column="dataizm" type="date" title="" as="dataizm" />
        <column table="a" column="dat_read_to_close" type="date" title="Дата направл. увед.СО" as="dat_read_to_close" />
        <column table="a" column="dat_status_1" type="date" title="" as="dat_status_1" />
        <column table="a" column="col_plan" type="number" is-fact="1" title="План" agg="sum" halign="center" format="N0" as="col_plan" fact="isv_ad_everyday_col_plan" />
        <column table="a" column="col_f" type="number" title="Выдан пост.АТП" is-fact="1" agg="sum" halign="center" format="N0" as="col_f" fact="isv_ad_everyday_col_f" />
        <column table="a" column="col_i" type="number" title="Подписано ДС о гот. СО (Приостановлен)" is-fact="1" agg="sum" halign="center" format="N0" as="col_i" fact="isv_ad_everyday_col_i" />
        <column table="a" column="col_l" type="number" is-fact="1" agg="sum" title="Расторгнут Аннулирован Проект" halign="center" format="N0" as="col_l" fact="isv_ad_everyday_col_l" />
        <column table="a" column="col_n" type="number" title="СОУ наступил увед. СО не напр." is-fact="1" agg="sum" halign="center" format="N0" as="col_n" fact="isv_ad_everyday_col_n" />
        <column table="a" column="col_o" type="number" title="Остаток в стройке увед.не напр." is-fact="1" agg="sum" halign="center" format="N0" as="col_o" fact="isv_ad_everyday_col_o" />
        <column table="a" column="col_p" type="number" title="Работы выполнены увед. СО направлено" is-fact="1" agg="sum" halign="center" format="N0" as="col_p" fact="isv_ad_everyday_col_p" />
        <column table="a" column="col_p_2" type="number" title="СОУ не наступил (текущие)" is-fact="1" agg="sum" halign="center" format="N0" as="col_p_2" fact="isv_ad_everyday_col_p_2" />
        <column table="a" column="col_l_2" type="number" title="Претензионно-исковая" is-fact="1" agg="sum" halign="center" format="N0" as="col_l_2" fact="isv_ad_everyday_col_l_2" />
        <column table="a" column="status" type="number" title="" as="status" reference="is_status" refcol="status" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" dimension="evd_pr_hoz_sposob" is-final-dimension="1" is-private-dimension="1" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" dimension="evd_pr_exist_pd" is-final-dimension="1" is-private-dimension="1" as="pr_exist_pd" />
        <column table="a" column="pr_mixed" type="number" title="" dimension="evd_pr_mixed" is-final-dimension="1" is-private-dimension="1" as="pr_mixed" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="name_atp_case" type="string" title="Вид АТП" as="name_atp_case" />
        <column table="a" column="id_slice" type="number" title="" dimension="id_slice" is-final-dimension="1" is-private-dimension="1" as="id_slice" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="otch_list_3" type="number" title="" dimension="evd_otch_list_3" is-final-dimension="1" is-private-dimension="1" as="otch_list_3" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" />
        <column table="a" column="num_ouco" type="string" title="№ договора" as="num_ouco" />
        <column table="a" column="name_filial" type="string" title="Филиaл" as="name_filial" />
        <column table="a" column="name_filial_tit" type="string" title="Филиaл по титулу" as="name_filial_tit" />
        <column table="a" column="vrem_tp" type="number" title="Призн. врем ТП" format="N0" halign="center" as="vrem_tp" />
        <column table="a" column="cg_col_f" type="date" title="" as="cg_col_f" />
        <column table="a" column="cg_col_i" type="date" title="" as="cg_col_i" />
        <column table="a" column="cg_col_l" type="date" title="" as="cg_col_l" />
        <column table="a" column="cg_col_n" type="date" title="" as="cg_col_n" />
        <column table="a" column="srok_uslug" type="date" title="Срок оказания услуг по договору" as="srok_uslug" />
        <column table="a" column="name_abon" type="string" title="Абонент" as="name_abon" />
        <column table="a" column="otch_2_1_1" type="number" title="" dimension="evd_otch_2_1_1" is-final-dimension="1" is-private-dimension="1" as="otch_2_1_1" />
        <column table="a" column="otch_2_1_2" type="number" title="" dimension="evd_otch_2_1_2" is-final-dimension="1" is-private-dimension="1" as="otch_2_1_2" />
        <column table="a" column="otch_2_1_3" type="number" title="" dimension="evd_otch_2_1_3" is-final-dimension="1" is-private-dimension="1" as="otch_2_1_3" />
        <column table="a" column="dat_plan_rab" type="date" title="" as="dat_plan_rab" />
        <column table="a" column="cg_pr_hoz_sposob" type="date" title="" as="cg_pr_hoz_sposob" />
        <column table="a" column="cg_pr_exist_pd" type="date" title="" as="cg_pr_exist_pd" />
        <column table="a" column="cg_dat_plan_rab" type="date" title="" as="cg_dat_plan_rab" />
        <column table="a" column="lp_addr" type="string" title="Адрес подключения" as="lp_addr" />
        <column table="a" column="load_sum1" type="number" title="" as="load_sum1" />
        <column table="a" column="load_sum2" type="number" title="" as="load_sum2" />
        <column table="a" column="load_sum3" type="number" title="" as="load_sum3" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="kodres" type="number" title="" dimension="evd_kodres" is-final-dimension="1" as="kodres" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="dat_rastorg" type="date" title="Дата расторжения" as="dat_rastorg" />
        <column table="a" column="dat_status_30" type="date" title="" as="dat_status_30" />
        <column table="a" column="cg_col_l_2" type="date" title="" as="cg_col_l_2" />
        <column table="a" column="cg_col_p" type="date" title="" as="cg_col_p" />
        <column table="a" column="year_srok" type="number" title="" dimension="evd_year_srok" is-final-dimension="1" is-private-dimension="1" as="year_srok" />
        <column table="a" column="pr_ostatok" type="number" title="" dimension="evd_pr_ostatok" is-final-dimension="1" is-private-dimension="1" as="pr_ostatok" />
        <column table="a" column="pr_vip" type="number" title="" dimension="evd_pr_vip" is-final-dimension="1" is-private-dimension="1" as="pr_vip" />
        <column table="a" column="cg_any_fact" type="date" title="" as="cg_any_fact" />
        <column table="a" column="kod_list7" type="number" title="" dimension="evd_kod_list7" as="kod_list7" />
        <column table="a" column="list7_name1" type="string" title="" as="list7_name1" />
        <column table="a" column="list7_name2" type="string" title="" as="list7_name2" />
        <column table="a" column="kod_org_active" type="number" title="" is-private-dimension="kod_org_active" is-final-dimension="kod_org_active" dimension="kod_org_active" as="kod_org_active" />
        <column table="a" column="fl_fake" type="number" title="" as="fl_fake" />
        <column table="a" column="name_rs" type="string" title="РЭС аббревиатура" as="name_rs" />
        <call table="a" function="nvl" as="nm_mo" title="Муниципальное образование" is-private-dimension="evd_name_mo" is-final-dimension="evd_name_mo" dimension="evd_name_mo" type="string">
          <column table="a" column="name_mo" />
          <const>'не заполнено'</const>
        </call>
        <call table="a" function="nvl" as="nm_sp" title="Сельское поселение" is-private-dimension="evd_name_sp" is-final-dimension="evd_name_sp" dimension="evd_name_sp" type="string">
          <column table="a" column="name_sp" />
          <const>'не заполнено'</const>
        </call>
        <call table="a" function="nvl" as="nm_np" title="Населенный пункт" is-private-dimension="evd_name_np" is-final-dimension="evd_name_np" dimension="evd_name_np" type="string">
          <column table="a" column="name_np" />
          <const>'не заполнено'</const>
        </call>
        <call as="name_podr" function="case" type="string" is-private-dimension="evd_name_podr" is-final-dimension="evd_name_podr" dimension="evd_name_podr">
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Хозспособ'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="lt">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <column table="kod_direct" column="name" />
          </call>
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Подр. дог.'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="ge">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <const>'ДСРРС'</const>
          </call>
        </call>
        <call as="name_kr" function="case" type="string">
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Хозспособ'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="lt">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <column table="kod_direct" column="name_kr" />
          </call>
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Подр. дог.'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="ge">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <const>'ДСРРС'</const>
          </call>
        </call>
        <call as="fl_branch" function="case" type="number" is-private-dimension="evd_fl_branch" is-final-dimension="evd_fl_branch" dimension="evd_fl_branch">
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Хозспособ'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="lt">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <column table="kod_direct" column="fl_branch" />
          </call>
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Подр. дог.'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="ge">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
        </call>
        <call as="kod_predpr" function="case" type="string" is-private-dimension="evd_kod_predpr" is-final-dimension="evd_kod_predpr" dimension="evd_kod_predpr">
          <call function="when">
            <call function="or">
              <call function="=">
                <column table="this" column="sposob_vip_rab" />
                <const>'Хозспособ'</const>
              </call>
              <call function="and">
                <call function="is null">
                  <column table="this" column="sposob_vip_rab" />
                </call>
                <call function="lt">
                  <column table="this" column="sum_load" />
                  <const>670</const>
                </call>
              </call>
            </call>
            <column table="kod_direct" column="kod_predpr" />
          </call>
          <call function="when">
            <call function="=">
              <call function="or">
                <call function="=">
                  <column table="this" column="sposob_vip_rab" />
                  <const>'Подр. дог.'</const>
                </call>
                <call function="and">
                  <call function="is null">
                    <column table="this" column="sposob_vip_rab" />
                  </call>
                  <call function="ge">
                    <column table="this" column="sum_load" />
                    <const>670</const>
                  </call>
                </call>
              </call>
            </call>
            <const>''</const>
          </call>
        </call>
        <column table="a" column="pr_gen" type="number" as="pr_gen" />
        <column table="a" column="fl_build_as_is" type="number" as="fl_build_as_is" />
        <column table="a" column="fl_work_pu" type="number" as="fl_work_pu" />
        <call function="year" as="year_contract" title="Год закл. дог-ра" format="F0">
          <column table="a" column="dt_contract" />
        </call>
        <call function="-nvl" type="number" as="prev_end1">
          <call function="year">
            <call function="sysdate" />
          </call>
          <const>2</const>
        </call>
        <call function="if" as="kod_dt_cont_grp1" type="number">
          <call function="lt">
            <call function="year">
              <column table="a" column="dt_contract" />
            </call>
            <column table="this" column="prev_end1" />
          </call>
          <const>0</const>
          <column table="this" column="year_contract" />
        </call>
        <call function="+nvl" as="col_any_fact" is-fact="1" agg="sum" fact="isv_ad_evd_col_any_fact" title="Факт исполнения">
          <column table="this" column="col_f" />
          <column table="this" column="col_i" />
          <column table="this" column="col_l" />
          <column table="this" column="col_l_2" />
          <column table="this" column="col_p" />
        </call>
        <call function="if" is-fact="1" agg="sum" fact="isv_ad_evd_col_any_fact_fb" title="Факт исполнения только для наличие работ ниже 35 кВ" as="col_any_fact_fl_build">
          <call function="and">
            <call function="=0">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=1">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="col_f" />
            <column table="this" column="col_i" />
            <column table="this" column="col_l" />
            <column table="this" column="col_l_2" />
            <column table="this" column="col_p" />
          </call>
        </call>
        <call function="if" agg="sum" is-fact="1" fact="isv_ad_evd_col_any_fact_pu" title="Факт исполнения только для наличие работ ПУ" as="col_any_fact_work_pu">
          <call function="and">
            <call function="=1">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=0">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="col_f" />
            <column table="this" column="col_i" />
            <column table="this" column="col_l" />
            <column table="this" column="col_l_2" />
            <column table="this" column="col_p" />
          </call>
        </call>
        <call function="if" agg="sum" is-fact="1" fact="isv_ad_evd_col_any_fact_fb_pu" title="Факт исполнения для наличие работ ниже 35 и на ПУ" as="col_any_fact_fl_build_work_pu">
          <call function="and">
            <call function="=1">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=1">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="col_f" />
            <column table="this" column="col_i" />
            <column table="this" column="col_l" />
            <column table="this" column="col_l_2" />
            <column table="this" column="col_p" />
          </call>
        </call>
        <call function="if" type="number" as="col_any_fact2" fact="isv_ad_evd_col_any_fact2" agg="sum">
          <call function="=">
            <column table="this" column="col_n" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <call function="+nvl" as="col_no_fact" type="number" is-fact="1" fact="isv_ad_evd_col_no_fact" title="Не выполненные" agg="sum" halign="center" format="N0">
          <column table="a" column="col_n" halign="center" />
          <column table="a" column="col_p_2" halign="center" />
        </call>
        <call function="if" is-fact="1" agg="sum" fact="isv_ad_evd_col_no_fact_fb" title="Не выполненные для наличие работ ниже 35 кВ" as="col_no_fact_fl_build" type="number">
          <call function="and">
            <call function="=0">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=1">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="a" column="col_n" halign="center" />
            <column table="a" column="col_p_2" halign="center" />
          </call>
        </call>
        <call function="if" agg="sum" is-fact="1" fact="isv_ad_evd_col_no_fact_pu" title="Не выполненные для наличие работ ПУ" as="col_no_fact_work_pu" type="number">
          <call function="and">
            <call function="=1">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=0">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="a" column="col_n" halign="center" />
            <column table="a" column="col_p_2" halign="center" />
          </call>
        </call>
        <call function="if" agg="sum" is-fact="1" fact="isv_ad_evd_col_no_fact_fb_pu" title="Не выполненные для наличие работ ниже 35 и на ПУ" as="col_no_fact_fl_build_work_pu" type="number">
          <call function="and">
            <call function="=1">
              <column table="a" column="fl_work_pu" />
            </call>
            <call function="=1">
              <column table="a" column="fl_build_as_is" />
            </call>
          </call>
          <call function="+nvl">
            <column table="a" column="col_n" halign="center" />
            <column table="a" column="col_p_2" halign="center" />
          </call>
        </call>
        <call function="||" as="is_ad_all_id">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kn_req" type="number" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" />
          </call>
        </call>
        <call function="||" as="isv_tdc_all_id">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" />
          </call>
        </call>
        <const as="cnt_kod_isv_ad_evd" type="number" agg="sum" is-fact="1" fact="isv_ad_evd_count">1</const>
        <call function="case" type="string" as="sposob_vip_rab" title="Способ выполнения работ ЛЭ">
          <call function="when">
            <call function="=1">
              <column table="this" column="pr_hoz_sposob" />
            </call>
            <const>'Хозспособ'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="pr_exist_pd" />
            </call>
            <const>'Подр. дог.'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="pr_mixed" />
            </call>
            <const>'Смешанный'</const>
          </call>
        </call>
        <call function="nullif" as="load_sum1_nvl" title="Катег.1 итог. мощность" format="N3">
          <column table="this" column="load_sum1" />
          <const>0</const>
        </call>
        <call function="nullif" as="load_sum2_nvl" title="Катег.2 итог. мощность" format="N3">
          <column table="this" column="load_sum2" />
          <const>0</const>
        </call>
        <call function="nullif" as="load_sum3_nvl" title="Катег.3 итог. мощность" format="N3">
          <column table="this" column="load_sum3" />
          <const>0</const>
        </call>
        <call function="nullif" as="sum_load_nvl" title="Итоговая мощность" format="N3">
          <column table="this" column="sum_load" />
          <const>0</const>
        </call>
        <call as="pr_ofz_vkl_name" title="Включено в ОФЗ" type="string" function="if">
          <call function="=1">
            <column table="this" column="pr_ofz_vkl" />
          </call>
          <const>'Да'</const>
          <const>'Нет'</const>
        </call>
        <call as="fl_build_name" type="string" title="С работами ЛЭ" function="if">
          <call function="=1">
            <column table="this" column="fl_build" title="С работами ЛЭ" />
          </call>
          <const>'Да'</const>
          <const>'Нет'</const>
        </call>
        <call function="nvl" comment="ДСРСС считается КС" as="kod_filial_tit2" dimension="evd_kod_filial_tit">
          <column table="kod_titul_ip" column="kod_filial_tit2" dgroup="max" />
          <column table="a" column="kod_filial" />
        </call>
        <call function="if" as="filial_res_valid" type="number" is-final-dimension="ipr_filial_res_valid" dimension="ipr_filial_res_valid">
          <call function="=">
            <column table="this" column="kod_filial_tit2" />
            <column table="kodres" column="kod_parent" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="case" title="Статус ВКС" as="status_vks_name" type="string" is-fact="1" fact="isv_ad_evd_status_vks_name" agg="max">
          <call function="when">
            <call function="=1">
              <column table="this" column="col_f" />
            </call>
            <const>'Выдан пост.АТП'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_i" />
            </call>
            <const>'Подписано ДС о гот. СО (Приостановлен)'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_l" />
            </call>
            <const>'Расторгнут Аннулирован Проект'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_n" />
            </call>
            <const>'СОУ наступил увед. СО не напр.'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_p" />
            </call>
            <const>'Работы выполнены увед. СО направлено'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_p_2" />
            </call>
            <const>'СОУ не наступил (текущие)'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="col_l_2" />
            </call>
            <const>'Претензионно-исковая'</const>
          </call>
        </call>
        <call as="fl_reestr_2018" type="number" function="if" comment="в реестре на 01.01.2018">
          <call function="is not null">
            <column table="reestr2018" column="kod_dop_contract" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="fl_reestr_2018_fact" type="number" function="nvl" comment="в реестре на 01.01.2018" is-fact="1" fact="isv_ad_evd_fl_2018_fact" agg="sum">
          <column table="reestr2018" column="fl_fact" />
          <const>0</const>
        </call>
        <call function="nvl" as="fl_build_real" type="number" is-private-dimension="evd_fl_build_real" is-final-dimension="evd_fl_build_real" dimension="evd_fl_build_real">
          <column table="a" column="fl_build_real" type="string" title="" />
          <column table="a" column="fl_build" />
        </call>
      </select>
      <from>
        <table name="isv_ad_everyday" as="a" view="1">
          <dlink name="isv_slice_of_tdc_all" as="isv_slice_of_tdc_all" table="isv_slice_of_tdc_all" child="isv_slice_of_tdc_all" field="isv_ad_everyday" parent="isv_ad_everyday" back="isv_slice_of_tdc_all">
            <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="isv_slice_of_tdc_all" field="kod_titul_ip" parent="ipr_titul_ip" back="isv_slice_of_tdc_all" title="Титулы">
              <where>
                <call function="=">
                  <column table="kod_titul_ip" column="pr_41656" />
                  <const>1</const>
                </call>
              </where>
            </link>
          </dlink>
        </table>
        <query name="is_status" as="status" join="left outer" dname="isv_ad_everyday" title="Статус">
          <call function="=">
            <column table="a" column="status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="45676-years-detail1" as="kod_dt_cont_grp1" join="left outer" dimension="1" dname="isv_ad_everyday">
          <call function="=">
            <column table="kod_dt_cont_grp1" column="kod" />
            <column table="this" column="kod_dt_cont_grp1" />
          </call>
        </query>
        <query name="isv_slice_of_ad_all" as="isv_slice_of_ad_all" join="left outer" comment="при условии что доступ к is_ad_all через вьюху на которую наложен slice_id" dname="isv_ad_everyday">
          <call function="=">
            <column table="this" column="is_ad_all_id" />
            <column table="isv_slice_of_ad_all" column="is_ad_all_id" />
          </call>
        </query>
        <query name="is_ad_all" as="is_ad_all" join="left outer" comment="при условии что доступ к is_ad_all через вьюху на которую наложен slice_id" dname="isv_ad_everyday">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dop_contract" />
              <column table="is_ad_all" column="kod_dop_contract" />
            </call>
            <call function="=">
              <column table="this" column="id_slice" />
              <column table="is_ad_all" column="id_slice" />
            </call>
            <call function="=">
              <column table="this" column="pr_srez" />
              <column table="is_ad_all" column="pr_srez" />
            </call>
          </call>
        </query>
        <query name="is_spr_direct" as="kodres" join="left outer" dname="isv_ad_everyday" title="Подразделения">
          <call function="=">
            <column table="a" column="kodres" />
            <column table="kodres" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="isv_ad_everyday" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_reestr_actual" as="reestr2018" join="left outer" dname="isv_ad_everyday">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dop_contract" />
              <column table="reestr2018" column="kod_dop_contract" />
            </call>
            <call function="=">
              <column table="reestr2018" column="year" />
              <const>2021</const>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ad_everyday_vs1" class="1" timestamp="27.01.2021 03:11:46" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_everyday_vs1.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ad_everyday" type="string" data-size="83" key="1" as="kod_ad_everyday" />
        <column table="a" column="id_slice" type="number" title="" is-private-dimension="id_slice" is-final-dimension="id_slice" dimension="id_slice" as="id_slice" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" is-private-dimension="kod_dop_contract" is-final-dimension="kod_dop_contract" dimension="kod_dop_contract" as="kod_dop_contract" reference="is_reestr_actual" refcol="kod_dop_contract" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_filial" type="number" is-private-dimension="ipr_kod_ispolnit" is-final-dimension="ipr_kod_ispolnit" dimension="ipr_kod_ispolnit" as="kod_filial" />
        <column table="a" column="fl_build" type="number" title="" is-private-dimension="evd_fl_build" is-final-dimension="evd_fl_build" dimension="evd_fl_build" as="fl_build" />
        <column table="a" column="fl_build_real" type="number" title="" as="fl_build_real" />
        <column table="a" column="dt_contract" type="date" title="" is-private-dimension="evd_dt_contract" is-final-dimension="evd_dt_contract" dimension="evd_dt_contract" as="dt_contract" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="col_plan" type="number" title="" is-fact="1" agg="sum" as="col_plan" fact="isv_ad_everyday_vs1_col_plan" />
        <column table="a" column="col_f" type="number" title="" is-fact="1" agg="sum" as="col_f" fact="isv_ad_everyday_vs1_col_f" />
        <column table="a" column="col_i" type="number" title="" is-fact="1" agg="sum" as="col_i" fact="isv_ad_everyday_vs1_col_i" />
        <column table="a" column="col_l" type="number" title="" is-fact="1" agg="sum" as="col_l" fact="isv_ad_everyday_vs1_col_l" />
        <column table="a" column="col_l_2" type="number" title="" is-fact="1" agg="sum" as="col_l_2" fact="isv_ad_everyday_vs1_col_l_2" />
        <column table="a" column="col_p" type="number" title="" is-fact="1" agg="sum" as="col_p" fact="isv_ad_everyday_vs1_col_p" />
        <column table="a" column="col_p_2" type="number" title="" is-fact="1" agg="sum" as="col_p_2" fact="isv_ad_everyday_vs1_col_p_2" />
        <column table="a" column="col_n" type="number" title="" is-fact="1" agg="sum" as="col_n" fact="isv_ad_everyday_vs1_col_n" />
        <call function="+nvl" as="col_no_fact" type="number" is-fact="1" fact="isv_ad_evd_vs1_col_no_fact" title="Не выполненные" agg="sum" halign="center" format="N0">
          <column table="a" column="col_n" />
          <column table="a" column="col_p_2" />
        </call>
        <column table="a" column="fl_fake" type="number" title="" as="fl_fake" />
        <call function="year" as="year_contract" title="Год закл. дог-ра" format="F0">
          <column table="a" column="dt_contract" />
        </call>
        <call function="+nvl" as="col_any_fact" is-fact="1" agg="sum" fact="isv_ad_evd_vs1_col_any_fact" title="Факт исполнения">
          <column table="this" column="col_f" />
          <column table="this" column="col_i" />
          <column table="this" column="col_l" />
          <column table="this" column="col_l_2" />
          <column table="this" column="col_p" />
        </call>
        <const as="cnt_kod_isv_ad_evd" type="number" agg="sum" is-fact="1" fact="isv_ad_evd_vs1_count">1</const>
        <call function="nvl" as="fl_build_real" type="number" is-private-dimension="evd_fl_build_real" is-final-dimension="evd_fl_build_real" dimension="evd_fl_build_real">
          <column table="a" column="fl_build_real" type="string" title="" />
          <column table="a" column="fl_build" />
        </call>
        <call as="fl_reestr_fact" type="number" function="nvl" comment="в реестре на 01.01.2018" is-fact="1" fact="isv_ad_evd_vs1_fl_reestr_fact" agg="sum">
          <column table="reestr" column="fl_fact" />
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="isv_ad_everyday_vs1" as="a" view="1" />
        <query name="is_reestr_actual" as="reestr" join="left outer" dname="isv_ad_everyday_vs1">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dop_contract" />
              <column table="reestr" column="kod_dop_contract" />
            </call>
            <call function="=">
              <column table="reestr" column="year" />
              <const>2021</const>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ad_otch_f1" class="1" timestamp="24.05.2017 16:19:02" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f1.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f1_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="num_req" type="string" title="номер заявки" as="num_req" />
        <column table="a" column="vrem_tp" type="number" agg="max" title="Временное ТП ---временное технологическое присоединение" as="vrem_tp" />
        <column table="a" column="pr_gen" type="number" title="Генерация ---объекты по производству электрической энергии" agg="max" as="pr_gen" />
        <column table="a" column="gor_obl" type="number" title="0-область, 1-город" dimension="kod_gor_obl" as="gor_obl" />
        <column table="a" column="sum_load" type="number" title="суммарная мощность ( в кВт)" agg="max" as="sum_load" />
        <column table="a" column="ur_lico" type="number" title="0-физ.лицо,1-юр" agg="max" as="ur_lico" />
        <column table="a" column="fl_discount" type="number" title="признак льготника" agg="max" as="fl_discount" />
        <column table="a" column="pr_cnt_mes" type="number" title="признак рассрочки" agg="max" as="pr_cnt_mes" />
        <column table="a" column="vol" type="number" title="Уровень напряжения 0,4,10 - 1-20" agg="max" as="vol" />
        <column table="a" column="kateg2" type="number" title="Категория надежности 2" agg="max" as="kateg2" />
        <column table="a" column="kateg3" type="number" title="Категория надежности 3" agg="max" as="kateg3" />
        <column table="a" column="sredn_vir" type="number" title="Средняя (на 1 кВт) выручка от ТП (без НДС)" agg="sum" is-fact="1" as="sredn_vir" fact="isv_ad_otch_f1_sredn_vir" />
        <column table="a" column="tarif_st" type="number" title="Тарифная ставка" agg="sum" is-fact="1" as="tarif_st" fact="isv_ad_otch_f1_tarif_st" />
        <column table="a" column="ind_proekt" type="number" title="Признак индивидуального проекта" agg="max" as="ind_proekt" />
        <column table="a" column="pr_nonprofit" type="number" title="" as="pr_nonprofit" />
        <column table="a" column="pr_garden_obj" type="number" title="" as="pr_garden_obj" />
        <column table="a" column="id_slice" type="number" title="" as="id_slice" reference="is_ad_all_slice" refcol="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="sredn_opl" type="number" title="Средний (на 1 кВт) TOTEX (фактически сложившиеся затраты) в рамках ТП" is-fact="1" agg="sum" as="sredn_opl" fact="isv_ad_otch_f1_sredn_opl" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f1" as="a" />
        <query name="is_ad_all_slice" as="id_slice" join="left outer" dname="isv_ad_otch_f1">
          <call function="=">
            <column table="a" column="id_slice" />
            <column table="id_slice" column="id_slice" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ad_otch_f2" class="1" timestamp="20.06.2017 11:31:24" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f2.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f2_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kn_req" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="vrem_tp" type="number" title="" as="vrem_tp" />
        <column table="a" column="pr_gen" type="number" title="" as="pr_gen" />
        <column table="a" column="gor_obl" type="number" title="" dimension="kod_gor_obl" as="gor_obl" />
        <column table="a" column="pr_nonprofit" type="string" title="" as="pr_nonprofit" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="sum_zayav" type="number" title="" as="sum_zayav" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" />
        <column table="a" column="pr_cnt_mes" type="number" title="" as="pr_cnt_mes" />
        <column table="a" column="vol" type="number" title="" as="vol" />
        <column table="a" column="ind_proekt" type="number" title="" as="ind_proekt" />
        <column table="a" column="srok_project" type="number" title="" as="srok_project" />
        <column table="a" column="col_2" type="number" title="" as="col_2" />
        <column table="a" column="col_3" type="number" title="" as="col_3" />
        <column table="a" column="col_4" type="number" title="" as="col_4" />
        <column table="a" column="col_5" type="number" title="" as="col_5" />
        <column table="a" column="col_6" type="number" title="" as="col_6" />
        <column table="a" column="col_7" type="number" title="" as="col_7" />
        <column table="a" column="col_8" type="number" title="" as="col_8" />
        <column table="a" column="col_9" type="number" title="" as="col_9" />
        <column table="a" column="col_10" type="number" title="" as="col_10" />
        <column table="a" column="col_11" type="number" title="" as="col_11" />
        <column table="a" column="col_12" type="number" title="" as="col_12" />
        <column table="a" column="col_13" type="number" title="" as="col_13" />
        <column table="a" column="col_14" type="number" title="" as="col_14" />
        <column table="a" column="col_15" type="number" title="" as="col_15" />
        <column table="a" column="col_16" type="number" title="" as="col_16" />
        <column table="a" column="col_17" type="number" title="" as="col_17" />
        <column table="a" column="col_18" type="number" title="" as="col_18" />
        <column table="a" column="col_19" type="number" title="" as="col_19" />
        <column table="a" column="col_20" type="number" title="" as="col_20" />
        <column table="a" column="col_21" type="number" title="" as="col_21" />
        <column table="a" column="col_22" type="number" title="" as="col_22" />
        <column table="a" column="col_23" type="number" title="" as="col_23" />
        <column table="a" column="col_24" type="number" title="" as="col_24" />
        <column table="a" column="col_25" type="number" title="" as="col_25" />
        <column table="a" column="col_26" type="number" title="" as="col_26" />
        <column table="a" column="col_27" type="number" title="" as="col_27" />
        <column table="a" column="col_28" type="number" title="" as="col_28" />
        <column table="a" column="col_29" type="number" title="" as="col_29" />
        <column table="a" column="col_30" type="number" title="" as="col_30" />
        <column table="a" column="col_31" type="number" title="" as="col_31" />
        <column table="a" column="col_32" type="number" title="" as="col_32" />
        <column table="a" column="col_33" type="number" title="" as="col_33" />
        <column table="a" column="col_34_sum_dn" type="number" title="" as="col_34_sum_dn" />
        <column table="a" column="col_34_cnt" type="number" title="" as="col_34_cnt" />
        <column table="a" column="col_35" type="number" title="" as="col_35" />
        <column table="a" column="col_36" type="number" title="" as="col_36" />
        <column table="a" column="col_37" type="number" title="" as="col_37" />
        <column table="a" column="col_38" type="number" title="" as="col_38" />
        <column table="a" column="col_39" type="number" title="" as="col_39" />
        <column table="a" column="col_40" type="number" title="" as="col_40" />
        <column table="a" column="col_41" type="number" title="" as="col_41" />
        <column table="a" column="col_42" type="number" title="" as="col_42" />
        <column table="a" column="col_43" type="number" title="" as="col_43" />
        <column table="a" column="col_44" type="number" title="" as="col_44" />
        <column table="a" column="col_45" type="number" title="" as="col_45" />
        <column table="a" column="col_46" type="number" title="" as="col_46" />
        <column table="a" column="col_47" type="number" title="" as="col_47" />
        <column table="a" column="col_48" type="number" title="" as="col_48" />
        <column table="a" column="col_49" type="number" title="" as="col_49" />
        <column table="a" column="col_50" type="number" title="" as="col_50" />
        <column table="a" column="col_51" type="number" title="" as="col_51" />
        <column table="a" column="col_52" type="number" title="" as="col_52" />
        <column table="a" column="col_53" type="number" title="" as="col_53" />
        <column table="a" column="col_54" type="number" title="" as="col_54" />
        <column table="a" column="col_55" type="number" title="" as="col_55" />
        <column table="a" column="col_56" type="number" title="" as="col_56" />
        <column table="a" column="col_57" type="number" title="" as="col_57" />
        <column table="a" column="col_58" type="number" title="" as="col_58" />
        <column table="a" column="col_59" type="number" title="" as="col_59" />
        <column table="a" column="col_60" type="number" title="" as="col_60" />
        <column table="a" column="col_61" type="number" title="" as="col_61" />
        <column table="a" column="col_62" type="number" title="" as="col_62" />
        <column table="a" column="col_63" type="number" title="" as="col_63" />
        <column table="a" column="col_64" type="number" title="" as="col_64" />
        <column table="a" column="col_65" type="number" title="" as="col_65" />
        <column table="a" column="col_66" type="number" title="" as="col_66" />
        <column table="a" column="col_67" type="number" title="" as="col_67" />
        <column table="a" column="col_68" type="number" title="" as="col_68" />
        <column table="a" column="col_69" type="number" title="" as="col_69" />
        <column table="a" column="col_70" type="number" title="" as="col_70" />
        <column table="a" column="col_71" type="number" title="" as="col_71" />
        <column table="a" column="col_72" type="number" title="" as="col_72" />
        <column table="a" column="col_73" type="number" title="" as="col_73" />
        <column table="a" column="col_74" type="number" title="" as="col_74" />
        <column table="a" column="col_75" type="number" title="" as="col_75" />
        <column table="a" column="col_76" type="number" title="" as="col_76" />
        <column table="a" column="col_77" type="number" title="" as="col_77" />
        <column table="a" column="col_78" type="number" title="" as="col_78" />
        <column table="a" column="col_79" type="number" title="" as="col_79" />
        <column table="a" column="col_80" type="number" title="" as="col_80" />
        <column table="a" column="col_81" type="number" title="" as="col_81" />
        <column table="a" column="col_82" type="number" title="" as="col_82" />
        <column table="a" column="col_83" type="number" title="" as="col_83" />
        <column table="a" column="col_84" type="number" title="" as="col_84" />
        <column table="a" column="col_85" type="number" title="" as="col_85" />
        <column table="a" column="col_86" type="number" title="" as="col_86" />
        <column table="a" column="col_87" type="string" title="" as="col_87" />
        <column table="a" column="col_88" type="string" title="" as="col_88" />
        <column table="a" column="col_89" type="number" title="" as="col_89" />
        <column table="a" column="col_90" type="number" title="" as="col_90" />
        <column table="a" column="col_91" type="number" title="" as="col_91" />
        <column table="a" column="col_92" type="number" title="" as="col_92" />
        <column table="a" column="col_93" type="number" title="" as="col_93" />
        <column table="a" column="col_94" type="number" title="" as="col_94" />
        <column table="a" column="col_95" type="number" title="" as="col_95" />
        <column table="a" column="col_96" type="number" title="" as="col_96" />
        <column table="a" column="col_97" type="number" title="" as="col_97" />
        <column table="a" column="col_98" type="number" title="" as="col_98" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="col_99" type="number" title="" as="col_99" />
        <column table="a" column="col_100" type="number" title="" as="col_100" />
        <column table="a" column="col_101" type="number" title="" as="col_101" />
        <column table="a" column="col_102" type="number" title="" as="col_102" />
        <column table="a" column="col_103" type="number" title="" as="col_103" />
        <column table="a" column="col_104" type="number" title="" as="col_104" />
        <column table="a" column="col_105" type="number" title="" as="col_105" />
        <column table="a" column="col_106" type="number" title="" as="col_106" />
        <column table="a" column="col_107" type="number" title="" as="col_107" />
        <column table="a" column="col_108" type="number" title="" as="col_108" />
        <column table="a" column="col_109" type="number" title="" as="col_109" />
        <column table="a" column="col_110" type="number" title="" as="col_110" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="kateg" type="string" title="" as="kateg" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" />
        <column table="a" column="filial" type="string" title="" as="filial" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="date_off" type="date" title="" as="date_off" />
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" as="pr_exist_pd" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="pr_sum" type="number" title="" as="pr_sum" />
        <column table="a" column="sum_dog" type="number" title="" as="sum_dog" />
        <column table="a" column="sum_akts" type="number" title="" as="sum_akts" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="srok_isp_ad" type="string" title="" as="srok_isp_ad" />
        <column table="a" column="dlit_vip_ad" type="string" title="" as="dlit_vip_ad" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="str" type="number" title="" as="str" />
        <column table="a" column="str1" type="number" title="" as="str1" />
        <column table="a" column="str2" type="number" title="" as="str2" />
        <column table="a" column="col_2_7" type="number" title="" as="col_2_7" />
        <column table="a" column="col_8_13" type="number" title="" as="col_8_13" />
        <column table="a" column="col_14_19" type="number" title="" as="col_14_19" />
        <column table="a" column="col_20_25" type="number" title="" as="col_20_25" />
        <column table="a" column="col_26_31" type="number" title="" as="col_26_31" />
        <column table="a" column="col_39_44" type="number" title="" as="col_39_44" />
        <column table="a" column="col_45_50" type="number" title="" as="col_45_50" />
        <column table="a" column="col_51_54" type="number" title="" as="col_51_54" />
        <column table="a" column="col_55_58" type="number" title="" as="col_55_58" />
        <column table="a" column="col_63_68" type="number" title="" as="col_63_68" />
        <column table="a" column="col_69_74" type="number" title="" as="col_69_74" />
        <column table="a" column="col_75_78" type="number" title="" as="col_75_78" />
        <column table="a" column="col_79_82" type="number" title="" as="col_79_82" />
        <column table="a" column="col_89_94" type="number" title="" as="col_89_94" />
        <column table="a" column="col_99_106" type="number" title="" as="col_99_106" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f2" as="a" />
      </from>
    </query>
    <query name="isv_ad_otch_f2_new" class="1" timestamp="27.12.2017 16:46:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f2_new.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f2_new_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kn_req" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" is-private-dimension="kod_dop_contract" is-final-dimension="kod_dop_contract" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="vrem_tp" type="number" title="" as="vrem_tp" />
        <column table="a" column="pr_gen" type="number" title="" as="pr_gen" />
        <column table="a" column="gor_obl" type="number" title="" is-private-dimension="kod_gor_obl" is-final-dimension="kod_gor_obl" dimension="kod_gor_obl" as="gor_obl" />
        <column table="a" column="pr_nonprofit" type="string" title="" as="pr_nonprofit" />
        <column table="a" column="sum_load_all" type="number" title="" as="sum_load_all" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" />
        <column table="a" column="pr_cnt_mes" type="number" title="" as="pr_cnt_mes" />
        <column table="a" column="vol" type="number" title="" as="vol" />
        <column table="a" column="kateg" type="string" title="" as="kateg" />
        <column table="a" column="ind_proekt" type="number" title="" as="ind_proekt" />
        <column table="a" column="srok_project" type="number" title="" as="srok_project" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="kod_filial" type="number" is-private-dimension="ipr_kod_ispolnit" is-final-dimension="ipr_kod_ispolnit" dimension="ipr_kod_ispolnit" as="kod_filial" />
        <column table="a" column="filial" type="string" title="" as="filial" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="date_off" type="date" title="" as="date_off" />
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="dt_request" type="date" title="" as="dt_request" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" as="pr_exist_pd" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="pr_sum" type="number" title="" as="pr_sum" />
        <column table="a" column="sum_dog" type="number" title="" as="sum_dog" />
        <column table="a" column="sum_akts" type="number" title="" as="sum_akts" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="srok_naprav_project" type="number" title="" as="srok_naprav_project" />
        <column table="a" column="srok_zayav_akt" type="number" title="" as="srok_zayav_akt" />
        <column table="a" column="srok_dog_akt" type="number" title="" as="srok_dog_akt" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="status_req" type="string" title="" as="status_req" />
        <column table="a" column="dat_read_to_close" type="date" title="" as="dat_read_to_close" />
        <column table="a" column="dat_got_to_close" type="date" title="" as="dat_got_to_close" />
        <column table="a" column="dt_reg" type="date" title="" as="dt_reg" />
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" />
        <column table="a" column="kod_spr_ini_prod" type="number" as="kod_spr_ini_prod" />
        <column table="a" column="name_ini_prod" type="string" title="" as="name_ini_prod" />
        <column table="a" column="srok_uslug_ds" type="date" title="" as="srok_uslug_ds" />
        <column table="a" column="cnt_srok_uslug_ds" type="number" title="" as="cnt_srok_uslug_ds" />
        <column table="a" column="str" type="number" title="" as="str" />
        <column table="a" column="str1" type="number" title="" as="str1" />
        <column table="a" column="str2" type="number" title="" as="str2" />
        <column table="a" column="col_2" type="number" title="" as="col_2" />
        <column table="a" column="col_3" type="number" title="" as="col_3" />
        <column table="a" column="col_4" type="number" title="" as="col_4" />
        <column table="a" column="col_5" type="number" title="" as="col_5" />
        <column table="a" column="col_8_13_35" type="number" title="" as="col_8_13_35" />
        <column table="a" column="col_8_13_35_m" type="number" title="" as="col_8_13_35_m" />
        <column table="a" column="col_6" type="number" title="" as="col_6" />
        <column table="a" column="col_7" type="number" title="" as="col_7" />
        <column table="a" column="col_8" type="number" title="" as="col_8" />
        <column table="a" column="col_9" type="number" title="" as="col_9" />
        <column table="a" column="col_10" type="number" title="" as="col_10" />
        <column table="a" column="col_11" type="number" title="" as="col_11" />
        <column table="a" column="col_12" type="number" title="" as="col_12" />
        <column table="a" column="col_13" type="number" title="" as="col_13" />
        <column table="a" column="col_14" type="number" title="" as="col_14" />
        <column table="a" column="col_15" type="number" title="" as="col_15" />
        <column table="a" column="col_16" type="number" title="" as="col_16" />
        <column table="a" column="col_17" type="number" title="" as="col_17" />
        <column table="a" column="col_18" type="number" title="" as="col_18" />
        <column table="a" column="col_19" type="number" title="" as="col_19" />
        <column table="a" column="col_20" type="number" title="" as="col_20" />
        <column table="a" column="col_21" type="number" title="" as="col_21" />
        <column table="a" column="col_22" type="number" title="" as="col_22" />
        <column table="a" column="col_23" type="number" title="" as="col_23" />
        <column table="a" column="col_24" type="number" title="" as="col_24" />
        <column table="a" column="col_25" type="number" title="" as="col_25" />
        <column table="a" column="col_26" type="number" title="" as="col_26" />
        <column table="a" column="col_27" type="number" title="" as="col_27" />
        <column table="a" column="col_28" type="number" title="" as="col_28" />
        <column table="a" column="col_29" type="number" title="" as="col_29" />
        <column table="a" column="col_30" type="number" title="" as="col_30" />
        <column table="a" column="col_31" type="number" title="" as="col_31" />
        <column table="a" column="col_32" type="number" title="" as="col_32" />
        <column table="a" column="col_33" type="number" title="" as="col_33" />
        <column table="a" column="col_34_dn" type="number" title="" as="col_34_dn" />
        <column table="a" column="col_34_cnt" type="number" title="" as="col_34_cnt" />
        <column table="a" column="col_35" type="number" title="" as="col_35" />
        <column table="a" column="col_36" type="number" title="" as="col_36" />
        <column table="a" column="col_37" type="number" title="" as="col_37" />
        <column table="a" column="col_38" type="number" title="" as="col_38" />
        <column table="a" column="col_39" type="number" title="" as="col_39" />
        <column table="a" column="col_40" type="number" title="" as="col_40" />
        <column table="a" column="col_41" type="number" title="" as="col_41" />
        <column table="a" column="col_42" type="number" title="" as="col_42" />
        <column table="a" column="col_43" type="number" title="" as="col_43" />
        <column table="a" column="col_44" type="number" title="" as="col_44" />
        <column table="a" column="col_45" type="number" title="" as="col_45" />
        <column table="a" column="col_46" type="number" title="" as="col_46" />
        <column table="a" column="col_47" type="number" title="" as="col_47" />
        <column table="a" column="col_48" type="number" title="" as="col_48" />
        <column table="a" column="col_49" type="number" title="" as="col_49" />
        <column table="a" column="col_50" type="number" title="" as="col_50" />
        <column table="a" column="col_51" type="number" title="" as="col_51" />
        <column table="a" column="col_52" type="number" title="" as="col_52" />
        <column table="a" column="col_53" type="number" title="" as="col_53" />
        <column table="a" column="col_54" type="number" title="" as="col_54" />
        <column table="a" column="col_55" type="number" title="" as="col_55" />
        <column table="a" column="col_56" type="number" title="" as="col_56" />
        <column table="a" column="col_57" type="number" title="" as="col_57" />
        <column table="a" column="col_58" type="number" title="" as="col_58" />
        <column table="a" column="col_59" type="number" title="" as="col_59" />
        <column table="a" column="col_60" type="number" title="" as="col_60" />
        <column table="a" column="col_61" type="number" title="" as="col_61" />
        <column table="a" column="col_62" type="number" title="" as="col_62" />
        <column table="a" column="col_63" type="number" title="" as="col_63" />
        <column table="a" column="col_64" type="number" title="" as="col_64" />
        <column table="a" column="col_65" type="number" title="" as="col_65" />
        <column table="a" column="col_66" type="number" title="" as="col_66" />
        <column table="a" column="col_67" type="number" title="" as="col_67" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f2_new" as="a" />
      </from>
    </query>
    <query name="isv_ad_otch_f4" class="1" timestamp="25.05.2017 12:58:03" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f4.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f4_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_titul_ip" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="num_req" type="string" title="номер заявки" as="num_req" />
        <column table="a" column="gor_obl" type="number" title="Город\область" dimension="kod_gor_obl" as="gor_obl" />
        <column table="a" column="kod_filial" type="number" dimension="ipr_kod_ispolnit" as="kod_filial" />
        <column table="a" column="name_fil" type="string" title="наименов филиала" as="name_fil" />
        <column table="a" column="kn_customer" type="number" title="код контрагента(код заявителя)" as="kn_customer" />
        <column table="a" column="name_all" type="string" title="заявитель" as="name_all" />
        <column table="a" column="supply" type="string" title="точка подключения (наименование энергоприним.устройств)" as="supply" />
        <column table="a" column="lp_addr" type="string" title="Адрес точки подключения (местонахожд.энергоприним.устройств" as="lp_addr" />
        <column table="a" column="date_coming" type="date" title="Дата регистрации заявки на ТП" as="date_coming" />
        <column table="a" column="num_ouco" type="string" title="Номер договора ТП" as="num_ouco" />
        <column table="a" column="dt_contract" type="date" title="Дата заключения договора ТП" as="dt_contract" />
        <column table="a" column="load123_kvt" type="number" title="Суммарная мощность в Мегаваттах" as="load123_kvt" />
        <column table="a" column="voltage" type="number" title="заявляемый уровень напряжения" as="voltage" />
        <column table="a" column="kateg" type="string" title="категория надежности" as="kateg" />
        <column table="a" column="sum_dog" type="number" title="сумма договора" as="sum_dog" />
        <column table="a" column="opl_d" type="number" title="оплата аванса" as="opl_d" />
        <column table="a" column="col_14" type="string" title="ПС с высшим классом напряжения не менее 35 кВ(точки присоединения)" as="col_14" />
        <column table="a" column="col_15" type="string" title="Мероприятия и объемы необходимые для выполнения ТП(укрупнено)" as="col_15" />
        <column table="a" column="srok_uslug" type="date" title="Срок оказания услуг(Дата исполнения обязательств по договору ТП)" as="srok_uslug" />
        <column table="a" column="year_plan" type="number" title="Предполагаемый год ввода объектов ДЗО в соответствии с ИПР" as="year_plan" />
        <column table="a" column="col_18" type="string" title="Подготовка технического задания" as="col_18" />
        <column table="a" column="col_19" type="string" title="Проведение закупочных процедур" as="col_19" />
        <column table="a" column="col_20" type="string" title="Заключен договор на ПИР" as="col_20" />
        <column table="a" column="col_21" type="string" title="Заключен договор на СМР" as="col_21" />
        <column table="a" column="proc_isp_pir" type="number" title="Исполнение ПИР" as="proc_isp_pir" />
        <column table="a" column="proc_isp_smr" type="number" title="Исполнение СМР" as="proc_isp_smr" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="tit_num_new" type="string" title="11 значный код титула" as="tit_num_new" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f4" as="a" />
        <query name="is_ad_all_slice" as="id_slice" join="left outer" dname="isv_ad_otch_f4">
          <call function="=">
            <column table="a" column="id_slice" />
            <column table="id_slice" column="id_slice" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ad_otch_f6" class="1" timestamp="25.05.2017 16:08:53" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f6.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f6_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_titul_ip" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="kod_filial" type="number" dimension="ipr_kod_ispolnit" as="kod_filial" />
        <column table="a" column="name_fil" type="string" title="" as="name_fil" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="supply" type="string" title="" as="supply" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="col_6" type="date" title="" as="col_6" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="sum_dog" type="number" title="" is-fact="1" agg="sum" as="sum_dog" fact="isv_ad_otch_f6_sum_dog" />
        <column table="a" column="opl_d" type="number" title="" agg="sum" is-fact="1" as="opl_d" fact="isv_ad_otch_f6_opl_d" />
        <column table="a" column="col_13" type="string" title="" as="col_13" />
        <column table="a" column="col_14" type="string" title="" as="col_14" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="year_plan" type="number" title="" as="year_plan" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="tit_num_new" type="string" title="" as="tit_num_new" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="name_all" type="string" title="" as="name_all" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f6" as="a" />
      </from>
    </query>
    <query name="isv_ad_otch_f7" class="1" timestamp="25.05.2017 17:40:15" materialize="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f7.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f7_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_titul_ip" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" />
        <column table="a" column="kod_filial" type="number" dimension="ipr_kod_ispolnit" as="kod_filial" />
        <column table="a" column="name_fil" type="string" title="" as="name_fil" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="name_all" type="string" title="" as="name_all" />
        <column table="a" column="supply" type="string" title="" as="supply" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="col_10" type="date" title="" as="col_10" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="sum_dog" type="number" title="" is-fact="1" agg="sum" as="sum_dog" fact="isv_ad_otch_f7_sum_dog" />
        <column table="a" column="opl_d" type="number" title="" is-fact="1" agg="sum" as="opl_d" fact="isv_ad_otch_f7_opl_d" />
        <column table="a" column="col_15" type="string" title="" as="col_15" />
        <column table="a" column="col_16" type="string" title="" as="col_16" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="year_plan" type="number" title="" as="year_plan" />
        <column table="a" column="col_19" type="string" title="" as="col_19" />
        <column table="a" column="col_20" type="string" title="" as="col_20" />
        <column table="a" column="col_21" type="string" title="" as="col_21" />
        <column table="a" column="col_22" type="string" title="" as="col_22" />
        <column table="a" column="proc_isp_pir" type="number" title="" as="proc_isp_pir" />
        <column table="a" column="proc_isp_smr" type="number" title="" as="proc_isp_smr" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="tit_num_new" type="string" title="" as="tit_num_new" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f7" as="a" />
      </from>
    </query>
    <query name="isv_ad_otch_f8" class="1" timestamp="29.05.2017 19:27:40" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_otch_f8.xml" haskeys="1">
      <select>
        <call function="||" as="isv_ad_otch_f8_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kn_req" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="dat_copy" type="date" title="" as="dat_copy" />
        <column table="a" column="kod_dop_contract" type="number" dimension="kod_dop_contract" as="kod_dop_contract" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" />
        <column table="a" column="okved" type="string" title="" as="okved" />
        <column table="a" column="okved2" type="string" title="" dimension="okved2" as="okved2" />
        <column table="a" column="col_4" type="number" title="" as="col_4" />
        <column table="a" column="col_5" type="number" title="" as="col_5" />
        <column table="a" column="col_6" type="number" title="" as="col_6" />
        <column table="a" column="col_7" type="number" title="" as="col_7" />
        <column table="a" column="col_8" type="number" title="" as="col_8" />
        <column table="a" column="col_9" type="number" title="" as="col_9" />
        <column table="a" column="col_10" type="number" title="" as="col_10" />
        <column table="a" column="col_11" type="number" title="" as="col_11" />
        <column table="a" column="col_12" type="number" title="" as="col_12" />
        <column table="a" column="col_13" type="number" title="" as="col_13" />
        <column table="a" column="col_14" type="number" title="" as="col_14" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_ad_otch_f8" as="a" />
      </from>
    </query>
    <query name="isv_ad_titul_zatrat" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_titul_zatrat.xml" haskeys="1">
      <select>
        <column table="a" column="pp" type="number" title="" as="pp" key="1" fixed="1" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="0" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="0" />
        <column table="a" column="vid" type="string" data-size="248" title="" as="vid" key="0" />
        <column table="a" column="tit_num_new" type="string" data-size="50" title="" as="tit_num_new" key="0" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="status" type="string" data-size="8" title="" as="status" key="0" />
        <column table="a" column="pr_status" type="number" title="" as="pr_status" key="0" />
        <column table="a" column="pr_dog" type="number" title="" as="pr_dog" key="0" />
        <column table="a" column="s_pr_dog" type="string" data-size="26" title="" as="s_pr_dog" key="0" />
        <column table="a" column="dat_plan" type="date" title="" as="dat_plan" key="0" />
        <column table="a" column="year_plan" type="number" title="" as="year_plan" key="0" />
        <column table="a" column="dat_fact_kido" type="date" title="" as="dat_fact_kido" key="0" />
        <column table="a" column="dat_fact" type="date" title="" as="dat_fact" key="0" />
        <column table="a" column="plan" type="number" title="" as="plan" key="0" />
        <column table="a" column="fact" type="number" title="" as="fact" key="0" />
        <column table="a" column="ostatok" type="number" title="" as="ostatok" key="0" />
        <column table="a" column="vip_dog" type="number" title="" as="vip_dog" key="0" />
        <column table="a" column="proc_isp" type="number" title="" as="proc_isp" key="0" />
        <column table="a" column="analiz_1" type="number" title="" as="analiz_1" key="0" />
        <column table="a" column="analiz_2" type="number" title="" as="analiz_2" key="0" />
        <column table="a" column="sum_dog" type="number" title="" as="sum_dog" key="0" />
        <column table="a" column="pr_db" type="string" data-size="2" title="" as="pr_db" key="0" />
        <column table="a" column="status_ofz" type="string" data-size="250" title="" as="status_ofz" key="0" />
        <column table="a" column="num_req" type="string" data-size="50" title="" as="num_req" key="0" />
        <column table="a" column="num_ouco" type="string" data-size="20" title="" as="num_ouco" key="0" />
        <column table="a" column="name_cred" type="string" data-size="250" title="" as="name_cred" key="0" />
        <column table="a" column="status_dog" type="string" data-size="50" title="" as="status_dog" key="0" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" key="0" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" key="0" />
        <column table="a" column="hoz_sposob" type="number" title="" as="hoz_sposob" key="0" />
        <column table="a" column="dat_fact_xz" type="date" title="" as="dat_fact_xz" key="0" />
        <column table="a" column="vip_xz" type="number" title="" as="vip_xz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ad_titul_zatrat" as="a" />
      </from>
    </query>
    <query name="isv_ip_opl" class="1" timestamp="22.02.2017 15:57:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ip_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" key="1" fixed="1" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_ip" type="number" as="kod_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="regnom" type="string" title="" as="regnom" key="0" />
        <column table="a" column="vid_zatr" type="string" title="" as="vid_zatr" key="0" />
        <column table="a" column="num_doc" type="string" title="" as="num_doc" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата РНО" as="dat_opl" key="0" />
        <column table="a" column="sum_opl" type="number" title="" as="sum_opl" key="0" />
        <column table="a" column="bez_nds" type="number" title="" as="bez_nds" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" reference="isv_ip_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="year_vip" type="number" title="" as="year_vip" key="0" />
        <column table="a" column="prizn_r" type="number" title="" as="prizn_r" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" key="0" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" key="0" />
        <column table="a" column="num_rno" type="string" title="Номер РНО" as="num_rno" key="0" />
        <column table="a" column="kazn_num" type="number" title="" as="kazn_num" key="0" />
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="vozv" type="number" title="" as="vozv" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="0" />
        <column table="a" column="vsego_osv_akt" type="number" title="" as="vsego_osv_akt" key="0" />
        <column table="a" column="summa_osv_akt" type="number" title="" as="summa_osv_akt" key="0" />
        <column table="a" column="is_avans" type="number" title="" as="is_avans" key="0" />
        <column table="a" column="status" type="string" title="" as="status" key="0" />
        <column table="a" column="kod_sum_akts" type="number" title="" as="kod_sum_akts" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" key="0" />
        <call function="date to ym2" as="ym" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="year" as="year" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="month" as="period" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="coalesce" as="kod_schet" key="0">
          <column table="kod_vip_dog" column="kod_schet" />
          <column table="kodzatrat" column="kod_schet" />
          <const>3</const>
        </call>
        <column table="kod_ro" column="kod_predpr" as="kod_predpr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ip_opl" as="a">
          <link name="kod_ro" as="kod_ro" table="is_ro" child="isv_ip_opl" field="kod_ro" parent="is_ro" back="isv_ip_opl" />
        </table>
        <query name="ipr_titul_ip" as="kod_ip" join="left outer" dname="isv_ip_opl" title="Титулы">
          <call function="=">
            <column table="a" column="kod_ip" />
            <column table="kod_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="isv_ip_opl" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="isv_ip_opl">
          <call function="=">
            <column table="a" column="kodzatrat" />
            <column table="kodzatrat" column="kodzatrat" />
          </call>
        </query>
        <query name="isv_ip_vip_dog" as="kod_vip_dog" join="left outer" dname="isv_ip_opl">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_opl_period" as="kod_opl_period" join="left outer" dname="isv_ip_opl">
          <call function="=">
            <column table="a" column="kod_opl_period" />
            <column table="kod_opl_period" column="kod_opl_period" />
          </call>
        </query>
        <query name="is_ro" as="kod_ro" join="left outer" dname="isv_ip_opl">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro" column="kod_ro" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_ip_vip_dog" class="1" timestamp="16.08.2017 15:40:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ip_vip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_ip" type="number" as="kod_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="regnom" type="string" title="" as="regnom" key="0" />
        <column table="a" column="vid_zatr" type="string" title="" as="vid_zatr" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" key="0" />
        <column table="a" column="num_doc" type="string" title="Номер акта" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата акта" as="dat_doc" key="0" />
        <column table="a" column="vsego" type="number" title="Сумма с НДС" is-fact="1" agg="sum" as="vsego" fact="isv_ip_vip_dog_vsego" key="0" />
        <column table="a" column="nds" type="number" title="НДС" as="nds" key="0" />
        <column table="a" column="opl_close_avans_nds" type="number" title="" as="opl_close_avans_nds" key="0" />
        <column table="a" column="opl_close_avans" type="number" title="" as="opl_close_avans" key="0" />
        <column table="a" column="opl_vip_nds" type="number" title="" as="opl_vip_nds" key="0" />
        <column table="a" column="opl_vip" type="number" title="" as="opl_vip" key="0" />
        <column table="a" column="vozv_nds" type="number" title="" as="vozv_nds" key="0" />
        <column table="a" column="vozv" type="number" title="" as="vozv" key="0" />
        <column table="a" column="prizn_r" type="number" title="" as="prizn_r" key="0" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="prizn_doc_vip" type="number" title="" as="prizn_doc_vip" key="0" />
        <column table="a" column="dat_buh" type="date" title="" as="dat_buh" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="0" />
        <column table="a" column="num_dog" type="string" title="" as="num_dog" key="0" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" reference="ips_smet_structure" refcol="kod_smet" key="0" />
        <column table="a" column="kod_vid_zatrat_titul" type="number" as="kod_vid_zatrat_titul" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" key="0" />
        <column table="a" column="pr_ofz" type="number" title="Признак ОФЗ" as="pr_ofz" key="0" />
        <call function="date to ym2" as="ym" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <call function="year" as="year" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <call function="month" as="period" key="0">
          <column table="a" column="dat_doc" />
        </call>
        <column table="buh_akt_vip_dog_2" column="kod_schet" as="kod_schet_it" key="0" />
        <column table="kodzatrat" column="kod_schet" as="kod_schet_zt" key="0" />
        <call function="coalesce" as="kod_schet" key="0">
          <column table="this" column="kod_schet_it" />
          <column table="this" column="kod_schet_zt" />
          <const>3</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_ip_vip_dog" as="a" />
        <query name="ipr_titul_ip" as="kod_ip" join="left outer" dname="isv_ip_vip_dog" title="Титулы">
          <call function="=">
            <column table="a" column="kod_ip" />
            <column table="kod_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="isv_ip_vip_dog" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ips_smet_structure" as="kod_smet" join="left outer" dname="isv_ip_vip_dog" title="Виды затрат">
          <call function="=">
            <column table="a" column="kod_smet" />
            <column table="kod_smet" column="kod_smet" />
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="isv_ip_vip_dog">
          <call function="=">
            <column table="a" column="kodzatrat" />
            <column table="kodzatrat" column="kodzatrat" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" dname="isv_ip_vip_dog" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="ipr_vip_dog_proch" as="kod_vip_dog_proch" join="left outer" dname="isv_ip_vip_dog">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog_proch" column="kod_vip_dog_pr" />
          </call>
        </query>
        <query name="vv_buh_akt_vip_dog_2" as="buh_akt_vip_dog_2" join="left outer" dname="isv_ip_vip_dog">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="buh_akt_vip_dog_2" column="kod_vip_dog" />
          </call>
        </query>
        <query name="ips_vid_zatrat_schet" as="kod_schet" join="left outer" dname="isv_ip_vip_dog">
          <call function="=">
            <column table="this" column="kod_schet" />
            <column table="kod_schet" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_pd_msp_akt" class="1" timestamp="30.08.2017 19:39:00" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_pd_msp_akt.xml" haskeys="1">
      <select>
        <call function="rownum" as="isv_pd_msp_akt_id" key="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="kod_parent_cp" type="number" as="kod_parent_cp" />
        <column table="a" column="e_code" type="number" title="" as="e_code" />
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" />
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" />
        <column table="a" column="kod_sum_akts" type="number" as="kod_sum_akts" />
        <column table="a" column="kod_predpr" type="number" as="kod_predpr" />
        <column table="a" column="name_kr" type="string" title="" as="name_kr" />
        <column table="a" column="num_dog" type="string" title="Номер договора" as="num_dog" />
        <column table="a" column="dat_dog" type="date" title="Дата договора" as="dat_dog" />
        <column table="a" column="predm_dog" type="string" title="Предмет договора" as="predm_dog" />
        <column table="a" column="name_kred" type="string" title="Наименование контрагента" as="name_kred" />
        <column table="a" column="inn" type="string" title="ИНН контрагента" as="inn" />
        <column table="a" column="kpp" type="string" title="КПП контрагента" as="kpp" />
        <column table="a" column="vsego_dog" type="number" title="Текущая цена договора с учетом заключенных дополнительных соглашений" as="vsego_dog" />
        <column table="a" column="num_akt" type="string" title="" as="num_akt" />
        <column table="a" column="dat_doc" type="date" title="Дата подписания заказчиком документа о приемке товара" as="dat_doc" />
        <column table="a" column="dat_srok" type="date" title="Плановый срок оплаты" as="dat_srok" />
        <column table="a" column="dat_opl" type="date" title="Фактический срок оплаты" as="dat_opl" />
        <column table="a" column="sum_akt" type="number" title="Планируемая сумма оплаты" as="sum_akt" />
        <column table="a" column="vist_akt" type="number" title="" as="vist_akt" />
        <column table="a" column="sum_opl" type="number" title="Фактическая сумма оплаты" as="sum_opl" />
        <column table="a" column="srok_zadol" type="number" title="Срок задержки оплаты (в днях)" as="srok_zadol" />
        <column table="a" column="reason_zadol" type="string" title="Причины неисполнения требований" as="reason_zadol" />
        <column table="a" column="dat_plan_zadol" type="date" title="Плановая дата погашения задолженности" as="dat_plan_zadol" />
        <column table="a" column="dop_info" type="string" title="Дополнительная информация" as="dop_info" />
        <column table="a" column="unig_ro" type="string" title="" as="unig_ro" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_pd_msp_akt" as="a" />
      </from>
    </query>
    <query name="isv_pd_msp_akt_itog" class="1" timestamp="30.08.2017 19:18:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_pd_msp_akt_itog.xml" haskeys="1">
      <select>
        <call function="rownum" as="isv_pd_msp_akt_itog_id" key="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="vsego_dog" type="number" title="" as="vsego_dog" />
        <column table="a" column="zadol_kred" type="number" title="" as="zadol_kred" />
        <column table="a" column="zadol_kred_srok" type="number" title="" as="zadol_kred_srok" />
        <column table="a" column="zadol_kred_srok_msp" type="number" title="" as="zadol_kred_srok_msp" />
        <column table="a" column="kod_predpr" type="number" as="kod_predpr" />
        <column table="a" column="name_kr" type="string" title="" as="name_kr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_pd_msp_akt_itog" as="a" />
      </from>
    </query>
    <query name="isv_rep_ad" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_rep_ad.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" />
        <column table="a" column="kn_load_type" type="number" title="" as="kn_load_type" />
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="dat_ouco" type="date" title="" as="dat_ouco" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" />
        <column table="a" column="dt_akt" type="date" title="" as="dt_akt" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="kateg" type="string" title="" as="kateg" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="sum_load_ext" type="number" title="" as="sum_load_ext" />
        <column table="a" column="sum_power" type="number" title="" as="sum_power" />
        <column table="a" column="srok_project" type="number" title="" as="srok_project" />
        <column table="a" column="proekttu_over" type="number" title="" as="proekttu_over" />
        <column table="a" column="srok_isp" type="number" title="" as="srok_isp" />
        <column table="a" column="col_51_54" type="number" title="" as="col_51_54" />
        <column table="a" column="col_55_58" type="number" title="" as="col_55_58" />
        <column table="a" column="col_83_84" type="number" title="" as="col_83_84" />
        <column table="a" column="col_86" type="number" title="" as="col_86" />
        <column table="a" column="tarif_st" type="number" title="" as="tarif_st" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="fl_vrem_tp" type="number" title="" as="fl_vrem_tp" />
        <column table="a" column="pr_garden_obj" type="number" title="" as="pr_garden_obj" />
        <column table="a" column="pr_nonprofit" type="number" title="" as="pr_nonprofit" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg" />
        <column table="a" column="date_off" type="date" title="" as="date_off" />
        <column table="a" column="kn_st_req" type="number" title="" as="kn_st_req" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="voltage" type="string" title="" as="voltage" />
        <call function="rownum" as="isv_rep_ad_id" key="1" />
        <call function="rowid" as="isv_rep_ad_id" key="1" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_rep_ad" as="a" />
      </from>
    </query>
    <query name="isv_rep_ad_m" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_rep_ad_m.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract"></column>
        <column table="a" column="kn_request" type="number" title="" as="kn_request"></column>
        <column table="a" column="kn_load_type" type="number" title="" as="kn_load_type"></column>
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract"></column>
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p"></column>
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds"></column>
        <column table="a" column="date_coming" type="date" title="" as="date_coming"></column>
        <column table="a" column="dt_project" type="date" title="" as="dt_project"></column>
        <column table="a" column="num_req" type="string" title="" as="num_req"></column>
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco"></column>
        <column table="a" column="dat_ouco" type="date" title="" as="dat_ouco"></column>
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract"></column>
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug"></column>
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg"></column>
        <column table="a" column="date_off" type="date" title="" as="date_off"></column>
        <column table="a" column="kn_st_req" type="number" title="" as="kn_st_req"></column>
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason"></column>
        <column table="a" column="dt_akt" type="date" title="" as="dt_akt"></column>
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got"></column>
        <column table="a" column="kateg" type="string" title="" as="kateg"></column>
        <column table="a" column="sum_load" type="number" title="" as="sum_load"></column>
        <column table="a" column="sum_load_ext" type="number" title="" as="sum_load_ext"></column>
        <column table="a" column="sum_power" type="number" title="" as="sum_power"></column>
        <column table="a" column="srok_project" type="number" title="" as="srok_project"></column>
        <column table="a" column="proekttu_over" type="number" title="" as="proekttu_over"></column>
        <column table="a" column="srok_isp" type="number" title="" as="srok_isp"></column>
        <column table="a" column="col_51_54" type="number" title="" as="col_51_54"></column>
        <column table="a" column="col_55_58" type="number" title="" as="col_55_58"></column>
        <column table="a" column="col_83_84" type="number" title="" as="col_83_84"></column>
        <column table="a" column="col_86" type="number" title="" as="col_86"></column>
        <column table="a" column="tarif_st" type="number" title="" as="tarif_st"></column>
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico"></column>
        <column table="a" column="fl_vrem_tp" type="number" title="" as="fl_vrem_tp"></column>
        <column table="a" column="pr_garden_obj" type="number" title="" as="pr_garden_obj"></column>
        <column table="a" column="pr_nonprofit" type="number" title="" as="pr_nonprofit"></column>
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage"></column>
        <column table="a" column="voltage" type="string" title="" as="voltage"></column>
        <column table="a" column="status" type="number" title="" as="status"></column>
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m"></column>
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e"></column>
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone"></column>
        <call function="rowid" as="isv_rep_ad_m_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_rep_ad_m" as="a"></table>
      </from>
    </query>
    <query name="isv_slice_of_ad_all" class="1" timestamp="17.01.2018 16:30:41" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_slice_of_ad_all.xml" haskeys="1">
      <select part-id="is_ad_all-select">
        <call function="||" as="is_ad_all_id" key="1">
          <call function="to_char">
            <column table="a" column="id_slice" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kn_req" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" />
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" />
        <column table="a" column="num_contr" type="string" title="" as="num_contr" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="contr_note" type="string" title="" as="contr_note" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="a_customer" type="string" title="" as="a_customer" />
        <column table="a" column="name_all" type="string" title="" as="name_all" />
        <column table="a" column="inn" type="string" title="" as="inn" />
        <column table="a" column="kpp" type="string" title="" as="kpp" />
        <column table="a" column="vb_customer" type="string" title="" as="vb_customer" />
        <column table="a" column="ind_proekt" type="number" title="" as="ind_proekt" />
        <column table="a" column="sind_proekt" type="string" title="" as="sind_proekt" />
        <column table="a" column="load_point" type="string" title="" as="load_point" />
        <column table="a" column="name_rs" type="string" title="" as="name_rs" />
        <column table="a" column="load_sum1" type="number" title="" as="load_sum1" />
        <column table="a" column="load_sum2" type="number" title="" as="load_sum2" />
        <column table="a" column="load_sum3" type="number" title="" as="load_sum3" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="load1" type="number" title="" as="load1" />
        <column table="a" column="load2" type="number" title="" as="load2" />
        <column table="a" column="load3" type="number" title="" as="load3" />
        <column table="a" column="load123" type="number" title="" as="load123" />
        <column table="a" column="load_existed" type="number" title="" as="load_existed" />
        <column table="a" column="req_year" type="number" title="" as="req_year" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="load_existed_kvt" type="number" title="" as="load_existed_kvt" />
        <column table="a" column="load_ex1" type="number" title="" as="load_ex1" />
        <column table="a" column="load_ex2" type="number" title="" as="load_ex2" />
        <column table="a" column="load_ex3" type="number" title="" as="load_ex3" />
        <column table="a" column="kateg" type="string" title="" as="kateg" />
        <column table="a" column="supply" type="string" title="" as="supply" />
        <column table="a" column="supply1" type="string" title="" as="supply1" />
        <column table="a" column="kn_sert" type="number" title="" as="kn_sert" />
        <column table="a" column="dt_reg" type="date" title="" as="dt_reg" />
        <column table="a" column="dt_delivery" type="date" title="" as="dt_delivery" />
        <column table="a" column="dat_act" type="date" title="" as="dat_act" />
        <column table="a" column="dts_final" type="string" title="" as="dts_final" />
        <column table="a" column="sfl_build" type="string" title="" as="sfl_build" />
        <column table="a" column="sfl_build_vip" type="string" title="" as="sfl_build_vip" />
        <column table="a" column="sfl_build_z" type="string" title="" as="sfl_build_z" />
        <column table="a" column="sfl_build_z_vip" type="string" title="" as="sfl_build_z_vip" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="fl_build_vip" type="number" title="" as="fl_build_vip" />
        <column table="a" column="fl_build_z" type="number" title="" as="fl_build_z" />
        <column table="a" column="fl_build_z_vip" type="number" title="" as="fl_build_z_vip" />
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone" />
        <column table="a" column="contr_sumf" type="number" title="" as="contr_sumf" />
        <column table="a" column="cm_case" type="string" title="" as="cm_case" />
        <column table="a" column="contr_kind" type="string" title="" as="contr_kind" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="cust_addr_old" type="string" title="" as="cust_addr_old" />
        <column table="a" column="lp_addr_old" type="string" title="" as="lp_addr_old" />
        <column table="a" column="cust_addr" type="string" title="" as="cust_addr" />
        <column table="a" column="lp_addr" type="string" title="" as="lp_addr" />
        <column table="a" column="sum_rated" type="number" title="" as="sum_rated" />
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" />
        <column table="a" column="contr_kn_house" type="number" title="" as="contr_kn_house" />
        <column table="a" column="contr_addr_type" type="number" title="" as="contr_addr_type" />
        <column table="a" column="req_kn_house" type="number" title="" as="req_kn_house" />
        <column table="a" column="req_addr_type" type="number" title="" as="req_addr_type" />
        <column table="a" column="kodres" type="number" title="" as="kodres" />
        <column table="a" column="num_ds" type="string" title="" as="num_ds" />
        <column table="a" column="dt_request" type="date" title="" as="dt_request" />
        <column table="a" column="exp_num" type="string" title="" as="exp_num" />
        <column table="a" column="exp_dat" type="date" title="" as="exp_dat" />
        <column table="a" column="exp_prim" type="string" title="" as="exp_prim" />
        <column table="a" column="reg_req_title" type="string" title="" as="reg_req_title" />
        <column table="a" column="guess_sum" type="number" title="" as="guess_sum" />
        <column table="a" column="pr_name" type="string" title="" as="pr_name" />
        <column table="a" column="name_group" type="string" title="" as="name_group" />
        <column table="a" column="num_tu" type="string" title="" as="num_tu" />
        <column table="a" column="skorr_ip" type="string" title="" as="skorr_ip" />
        <column table="a" column="korr_ip" type="number" title="" as="korr_ip" />
        <column table="a" column="dat_vip_rab" type="date" title="" as="dat_vip_rab" />
        <column table="a" column="num_vip_rab" type="string" title="" as="num_vip_rab" />
        <column table="a" column="name_rab" type="string" title="" as="name_rab" />
        <column table="a" column="name_oblig" type="string" title="" as="name_oblig" />
        <column table="a" column="dat_tz_ks" type="date" title="" as="dat_tz_ks" />
        <column table="a" column="dat_ks_11" type="date" title="" as="dat_ks_11" />
        <column table="a" column="fl_work_net" type="number" title="" as="fl_work_net" />
        <column table="a" column="sfl_work_net" type="string" title="" as="sfl_work_net" />
        <column table="a" column="fl_work_pu" type="number" title="" as="fl_work_pu" />
        <column table="a" column="sfl_work_pu" type="string" title="" as="sfl_work_pu" />
        <column table="a" column="vol" type="string" title="" as="vol" />
        <column table="a" column="kod_spr_kurators" type="number" as="kod_spr_kurators" />
        <column table="a" column="kod_spr_kurators_req" type="number" as="kod_spr_kurators_req" />
        <column table="a" column="name_kurators" type="string" title="" as="name_kurators" />
        <column table="a" column="name_kurators_req" type="string" title="" as="name_kurators_req" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" />
        <column table="a" column="dat_vol" type="date" title="" as="dat_vol" />
        <column table="a" column="prim" type="string" title="" as="prim" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="ku_name" type="string" title="" as="ku_name" />
        <column table="a" column="dat_vip" type="date" title="" as="dat_vip" />
        <column table="a" column="dat_ouco" type="date" title="" as="dat_ouco" />
        <column table="a" column="dat_end" type="date" title="" as="dat_end" />
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg" />
        <column table="a" column="dat_sl_zap" type="date" title="" as="dat_sl_zap" />
        <column table="a" column="dat_per_sl_zap" type="date" title="" as="dat_per_sl_zap" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="cp" type="number" title="" as="cp" />
        <column table="a" column="scp" type="string" title="" as="scp" />
        <column table="a" column="ap" type="number" title="" as="ap" />
        <column table="a" column="uvedom" type="number" title="" as="uvedom" />
        <column table="a" column="uvedom_r" type="number" title="" as="uvedom_r" />
        <column table="a" column="sap" type="string" title="" as="sap" />
        <column table="a" column="suvedom" type="string" title="" as="suvedom" />
        <column table="a" column="suvedom_r" type="string" title="" as="suvedom_r" />
        <column table="a" column="name_obj" type="string" title="" as="name_obj" />
        <column table="a" column="name_zayav" type="string" title="" as="name_zayav" />
        <column table="a" column="god_tarif" type="number" title="" as="god_tarif" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" />
        <column table="a" column="dat_ks" type="date" title="" as="dat_ks" />
        <column table="a" column="opl" type="number" title="" as="opl" />
        <column table="a" column="name_kr" type="string" title="" as="name_kr" />
        <column table="a" column="vid_atp" type="string" title="" as="vid_atp" />
        <column table="a" column="load_units" type="string" title="" as="load_units" />
        <column table="a" column="folder" type="string" title="" as="folder" />
        <column table="a" column="folder_date" type="date" title="" as="folder_date" />
        <column table="a" column="name_folder_user" type="string" title="" as="name_folder_user" />
        <column table="a" column="fl_rotate" type="number" title="" as="fl_rotate" />
        <column table="a" column="fl_rnk_not" type="number" title="" as="fl_rnk_not" />
        <column table="a" column="sfl_rotate" type="string" title="" as="sfl_rotate" />
        <column table="a" column="sfl_rnk_not" type="string" title="" as="sfl_rnk_not" />
        <column table="a" column="quant_ds" type="number" title="" as="quant_ds" />
        <column table="a" column="dat_ds" type="date" title="" as="dat_ds" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" />
        <column table="a" column="sfl_discount" type="string" title="" as="sfl_discount" />
        <column table="a" column="titul_ip" type="string" title="" as="titul_ip" />
        <column table="a" column="num_aip" type="string" title="" as="num_aip" />
        <column table="a" column="name_vid_ad" type="string" title="" as="name_vid_ad" />
        <column table="a" column="name_kat_zayav" type="string" title="" as="name_kat_zayav" />
        <column table="a" column="dat_close_deb_zadol" type="date" title="" as="dat_close_deb_zadol" />
        <column table="a" column="otl_usl" type="string" title="" as="otl_usl" />
        <column table="a" column="sstage" type="string" title="" as="sstage" />
        <column table="a" column="ssso" type="string" title="" as="ssso" />
        <column table="a" column="stage" type="number" title="" as="stage" />
        <column table="a" column="sso" type="number" title="" as="sso" />
        <column table="a" column="dat_status_2" type="date" title="" as="dat_status_2" />
        <column table="a" column="num_ad" type="string" title="" as="num_ad" />
        <column table="a" column="pr_db" type="number" title="" as="pr_db" />
        <column table="a" column="spr_db" type="string" title="" as="spr_db" />
        <column table="a" column="dat_uv_el_ust" type="date" title="" as="dat_uv_el_ust" />
        <column table="a" column="dat_spis_kz" type="date" title="" as="dat_spis_kz" />
        <column table="a" column="um_status_1" type="string" title="" as="um_status_1" />
        <column table="a" column="srok_otl_usl" type="date" title="" as="srok_otl_usl" />
        <column table="a" column="vid_otl_usl" type="string" title="" as="vid_otl_usl" />
        <column table="a" column="razdel_okved" type="string" title="" as="razdel_okved" />
        <column table="a" column="name_razdel_okved" type="string" title="" as="name_razdel_okved" />
        <column table="a" column="sposob_okved" type="string" title="" as="sposob_okved" />
        <column table="a" column="name_otrasl" type="string" title="" as="name_otrasl" />
        <column table="a" column="group_lp" type="string" title="" as="group_lp" />
        <column table="a" column="vid_ds" type="string" title="" as="vid_ds" />
        <column table="a" column="contr_opl_d" type="number" title="" as="contr_opl_d" />
        <column table="a" column="contr_opl_i" type="number" title="" as="contr_opl_i" />
        <column table="a" column="contr_opl" type="number" title="" as="contr_opl" />
        <column table="a" column="vozvrat" type="number" title="" as="vozvrat" />
        <column table="a" column="perepl" type="number" title="" as="perepl" />
        <column table="a" column="sum_os" type="number" title="" as="sum_os" />
        <column table="a" column="zadol_opl" type="number" title="" as="zadol_opl" />
        <column table="a" column="zadol_d" type="number" title="" as="zadol_d" />
        <column table="a" column="zadol_i" type="number" title="" as="zadol_i" />
        <column table="a" column="sum_akts" type="number" title="" as="sum_akts" />
        <column table="a" column="proc_opl" type="number" title="" as="proc_opl" />
        <column table="a" column="imuch" type="number" title="" as="imuch" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" />
        <column table="a" column="sum_pd" type="number" title="" as="sum_pd" />
        <column table="a" column="ind_tar" type="number" title="" as="ind_tar" />
        <column table="a" column="fl_work_ps" type="number" title="" as="fl_work_ps" />
        <column table="a" column="sfl_work_ps" type="string" title="" as="sfl_work_ps" />
        <column table="a" column="fl_loss" type="number" title="" as="fl_loss" />
        <column table="a" column="sfl_loss" type="string" title="" as="sfl_loss" />
        <column table="a" column="name_status" type="string" title="" as="name_status" />
        <column table="a" column="text_rab" type="string" title="" as="text_rab" />
        <column table="a" column="text_oblig" type="string" title="" as="text_oblig" />
        <column table="a" column="text_spis" type="string" title="" as="text_spis" />
        <column table="a" column="dat_read_to_close" type="date" title="" as="dat_read_to_close" />
        <column table="a" column="read_to_close" type="number" title="" as="read_to_close" />
        <column table="a" column="fio" type="string" title="" as="fio" />
        <column table="a" column="dataizm" type="date" title="" as="dataizm" />
        <column table="a" column="old_status_name" type="string" title="" as="old_status_name" />
        <column table="a" column="analog" type="string" title="" as="analog" />
        <column table="a" column="dat_dop_doc" type="date" title="" as="dat_dop_doc" />
        <column table="a" column="num_dop_doc" type="string" title="" as="num_dop_doc" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" />
        <column table="a" column="pr_late_payment" type="number" title="" as="pr_late_payment" />
        <column table="a" column="prior_ad" type="string" title="" as="prior_ad" />
        <column table="a" column="vrem_tp" type="number" title="" as="vrem_tp" />
        <column table="a" column="dat_fact_vol" type="date" title="" as="dat_fact_vol" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" />
        <column table="a" column="podr_status_1" type="string" title="" as="podr_status_1" />
        <column table="a" column="num_ad_pref" type="string" title="" as="num_ad_pref" />
        <column table="a" column="pr_sum_name" type="string" title="" as="pr_sum_name" />
        <column table="a" column="group_ad" type="string" title="" as="group_ad" />
        <column table="a" column="mo_name" type="string" title="" as="mo_name" />
        <column table="a" column="folder_ofz" type="string" title="" as="folder_ofz" />
        <column table="a" column="all_control" type="number" title="" as="all_control" />
        <column table="a" column="n_pril" type="string" title="" as="n_pril" />
        <column table="a" column="filial" type="string" title="" as="filial" />
        <column table="a" column="s_mobr" type="string" title="" as="s_mobr" />
        <column table="a" column="s_nasp" type="string" title="" as="s_nasp" />
        <column table="a" column="pr_ad_iskl" type="number" title="" as="pr_ad_iskl" />
        <column table="a" column="vid_opl_ad" type="string" title="" as="vid_opl_ad" />
        <column table="a" column="type_req" type="string" title="" as="type_req" />
        <column table="a" column="pr_gen" type="number" title="" as="pr_gen" />
        <column table="a" column="pr_num_pref_control" type="number" title="" as="pr_num_pref_control" />
        <column table="a" column="dat_got_to_close" type="date" title="" as="dat_got_to_close" />
        <column table="a" column="got_to_close" type="number" title="" as="got_to_close" />
        <column table="a" column="dat_first_opl" type="date" title="" as="dat_first_opl" />
        <column table="a" column="srok_tu" type="date" title="" as="srok_tu" />
        <column table="a" column="load_point1" type="string" title="" as="load_point1" />
        <column table="a" column="vol1" type="string" title="" as="vol1" />
        <column table="a" column="group_lp1" type="string" title="" as="group_lp1" />
        <column table="a" column="titul_ad" type="number" title="" as="titul_ad" />
        <column table="a" column="ds_not_rab_le" type="number" title="" as="ds_not_rab_le" />
        <column table="a" column="cnt_mes" type="number" title="" as="cnt_mes" />
        <column table="a" column="pr_ofz_vkl" type="number" title="" as="pr_ofz_vkl" />
        <column table="a" column="status_ofz" type="string" title="" as="status_ofz" />
        <column table="a" column="name_mo" type="string" title="" as="name_mo" />
        <column table="a" column="name_np" type="string" title="" as="name_np" />
        <column table="a" column="name_sp" type="string" title="" as="name_sp" />
        <column table="a" column="name_direct_i" type="string" title="" as="name_direct_i" />
        <column table="a" column="sposob_zayav" type="string" title="" as="sposob_zayav" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" as="pr_exist_pd" />
        <column table="a" column="dat_plan_rab" type="date" title="" as="dat_plan_rab" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="pr_part_akt" type="number" title="" as="pr_part_akt" />
        <column table="a" column="spos_vip" type="string" title="" as="spos_vip" />
        <column table="a" column="org_active" type="string" title="" as="org_active" />
        <column table="a" column="dat_status_1" type="date" title="" as="dat_status_1" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="kod_vol" type="number" as="kod_vol" />
        <column table="a" column="dt_indtar_got" type="date" title="" as="dt_indtar_got" />
        <column table="a" column="proc" type="number" title="" as="proc" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="id_slice" type="number" title="" as="id_slice" reference="is_ad_all_slice" refcol="id_slice" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="contr_opl_bez_nds_d" type="number" title="" as="contr_opl_bez_nds_d" />
        <column table="a" column="contr_opl_bez_nds_i" type="number" title="" as="contr_opl_bez_nds_i" />
        <column table="a" column="pr_dso" type="number" title="" as="pr_dso" />
        <column table="a" column="cg_dt_reg" type="date" title="" as="cg_dt_reg" />
        <column table="a" column="cg_col_f" type="date" title="" as="cg_col_f" />
        <column table="a" column="cg_col_i" type="date" title="" as="cg_col_i" />
        <column table="a" column="cg_col_l" type="date" title="" as="cg_col_l" />
        <column table="a" column="cg_col_n" type="date" title="" as="cg_col_n" />
        <column table="a" column="kod_vid_ad" type="number" as="kod_vid_ad" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" />
        <column table="a" column="kn_st_req" type="number" title="" as="kn_st_req" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="date_off" type="date" title="" as="date_off" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="dat_status_4" type="date" title="" as="dat_status_4" />
        <column table="a" column="dat_status_5" type="date" title="" as="dat_status_5" />
        <column table="a" column="dat_status_30" type="date" title="" as="dat_status_30" />
        <column table="a" column="dat_akt" type="date" title="" as="dat_akt" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="pr_sum" type="number" title="" as="pr_sum" />
        <column table="a" column="pr_nonprofit" type="string" title="" as="pr_nonprofit" />
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" />
        <column table="a" column="kn_supply1" type="number" title="" as="kn_supply1" />
        <column table="a" column="kn_load_type" type="number" title="" as="kn_load_type" />
        <column table="a" column="srok_isp_ad" type="number" title="" as="srok_isp_ad" />
        <column table="a" column="dlit_vip_ad" type="number" title="" as="dlit_vip_ad" />
        <column table="a" column="kod_pr_zayav" type="number" as="kod_pr_zayav" />
        <column table="a" column="srok_project_norm" type="number" title="" as="srok_project_norm" />
        <column table="a" column="kod_spr_ini_prod" type="number" as="kod_spr_ini_prod" />
        <column table="a" column="name_ini_prod" type="string" title="" as="name_ini_prod" />
        <column table="a" column="dt_bus_plan" type="date" title="" as="dt_bus_plan" />
        <column table="a" column="power" type="number" title="" as="power" />
        <column table="a" column="power_units" type="string" title="" as="power_units" />
        <column table="a" column="cg_pr_hoz_sposob" type="date" title="" as="cg_pr_hoz_sposob" />
        <column table="a" column="cg_pr_exist_pd" type="date" title="" as="cg_pr_exist_pd" />
        <column table="a" column="cg_dat_plan_rab" type="date" title="" as="cg_dat_plan_rab" />
        <column table="a" column="cg_col_l_2" type="date" title="" as="cg_col_l_2" />
        <column table="a" column="cnt_mes_tp" type="date" title="" as="cnt_mes_tp" />
        <column table="a" column="kod_ini_prod_ds" type="number" as="kod_ini_prod_ds" />
        <column table="a" column="name_ini_prod_ds" type="string" title="" as="name_ini_prod_ds" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_zpr" type="number" as="kod_zpr" />
        <column table="a" column="length_le" type="number" title="" as="length_le" />
        <column table="a" column="kod_org_active" type="number" as="kod_org_active" />
        <column table="a" column="kod_dzo_bus_plan" type="number" as="kod_dzo_bus_plan" />
        <column table="a" column="name_dzo_bus_plan" type="string" title="" as="name_dzo_bus_plan" />
        <column table="a" column="dat_ecp_le" type="date" as="dat_ecp_le" />
        <column table="a" column="dat_ecp_ab" type="date" as="dat_ecp_ab" />
        <column table="a" column="name_status_every_day" type="string" as="name_status_every_day" />
        <column table="a" column="zadol_d_prosrok" type="number" as="zadol_d_prosrok" />
        <column table="a" column="kod_fs" type="number" comment="Код формы собственности" as="kod_fs" />
        <column table="a" column="dt_reject_eb" type="date" title="" comment="Уведомление заявителю(аппсерв)" as="dt_reject_eb" />
        <column table="a" column="dt_contr_b" type="date" title="" comment="Дата договора(аппсерв)" as="dt_contr_b" />
        <column table="a" column="dt_proj_b" type="date" title="" comment="Дата проекта дог-ра(аппсерв)" as="dt_proj_b" />
        <column table="a" column="dt_mess" type="date" title="" comment="Сообщено клиенту(аппсерв)" as="dt_mess" />
        <column table="a" column="dt_client_proj" type="date" title="" comment="На подпись клиенту(аппсерв)" as="dt_client_proj" />
        <column table="a" column="dt_client_sign" type="date" title="" comment="Подписан клиентом(аппсерв)" as="dt_client_sign" />
        <column table="a" column="dt_client_to" type="date" title="" comment="Выдан клиенту(аппсерв)" as="dt_client_to" />
        <column table="a" column="dt_lack_req" type="date" title="" comment="Дата письма о недост док(аппсерв)" as="dt_lack_req" />
        <column table="a" column="dt_pass_up" type="date" title="" comment="Дата ЦОК=&gt; в ТБ/KC" as="dt_pass_up" />
        <column table="a" column="pr_zam_stor" type="number" title="" comment="Заменя стороны ПЭС/СПбЭС на ЛЭ" as="pr_zam_stor" />
        <column table="a" column="dat_zam_stor" type="date" title="" comment="Дата заменя стороны" as="dat_zam_stor" />
        <column table="a" column="srok_bus_plan" type="string" title="" comment="Срок по БП (текст)" as="srok_bus_plan" />
        <column table="a" column="dat_prognoz_od" type="date" title="" comment="Прогноз ОД" as="dat_prognoz_od" />
        <column table="a" column="pr_nw_more" type="number" title="" comment="По сети 35-110 кВ и выше" as="pr_nw_more" />
        <column table="a" column="pr_nw_less" type="number" title="" comment="По распред. сети ниже 35 кВ" as="pr_nw_less" />
        <column table="a" column="pr_nw_more_end" type="number" title="" comment="Вып. работы по сети 35-110 кВ и выше" as="pr_nw_more_end" />
        <column table="a" column="pr_nw_less_end" type="number" title="" comment="Вып. работы по распред. сети ниже 35 кВ" as="pr_nw_less_end" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_slice_of_ad_all" as="a" />
        <query name="is_ad_all_slice" as="id_slice" join="left outer" dname="isv_slice_of_ad_all">
          <call function="=">
            <column table="a" column="id_slice" />
            <column table="id_slice" column="id_slice" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_slice_of_tdc_all" class="1" timestamp="21.10.2017 19:26:12" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_slice_of_tdc_all.xml" haskeys="1">
      <select>
        <call function="rowid" as="isv_slice_of_tdc_all_id" key="1" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="kod_ad_slice" type="number" as="kod_ad_slice" reference="isv_ad_everyday" refcol="kod_ad_everyday" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="isv_slice_of_ad_all" refcol="kod_dop_contract" />
        <column table="a" column="is_new" type="number" title="" as="is_new" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" />
        <column table="a" column="id_slice" type="number" title="" dimension="id_slice" is-final-dimension="1" is-private-dimension="1" as="id_slice" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="kod_isv_titul_res" type="string" title="" as="kod_isv_titul_res" reference="vdwh_isv_titul_res" refcol="kod_isv_titul_res" />
      </select>
      <from>
        <table name="isv_slice_of_tdc_all" as="a" view="1">
          <link name="isv_ad_everyday" as="isv_ad_everyday" table="isv_ad_everyday" child="isv_slice_of_tdc_all" field="isv_ad_everyday" parent="isv_ad_everyday" back="isv_slice_of_tdc_all">
            <dimlink name="evd_pr_vip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_pr_ostatok" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_year_srok" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_otch_list_3" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_fl_build" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_dt_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="evd_kodres" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="evd_pr_hoz_sposob" is-final-dimension="1" dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="isv_slice_of_ad_all" as="kod_dop_contract" join="left outer" dname="isv_slice_of_tdc_all">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="isv_slice_of_tdc_all" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="vdwh_isv_titul_res" as="kod_isv_titul_res" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="isv_slice_of_tdc_all">
          <call function="=">
            <column table="a" column="kod_isv_titul_res" />
            <column table="kod_isv_titul_res" column="kod_isv_titul_res" />
          </call>
        </query>
        <query name="isv_ad_everyday" as="isv_ad_everyday" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="isv_slice_of_tdc_all">
          <call function="=">
            <column table="a" column="kod_ad_slice" />
            <column table="isv_ad_everyday" column="kod_ad_everyday" />
          </call>
        </query>
      </from>
    </query>
    <query name="isv_spr_classifier_oktmo" class="1" timestamp="13.12.2018 20:11:33" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_spr_classifier_oktmo.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" title="" key="1" as="id" />
        <column table="a" column="code" type="string" title="" as="code" />
        <column table="a" column="control_number" type="number" title="" as="control_number" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="pr_actual" type="number" title="" as="pr_actual" />
        <column table="a" column="note" type="string" title="" as="note" />
        <column table="a" column="id_sp" type="number" title="" as="id_sp" />
        <column table="a" column="code_sp" type="string" title="" as="code_sp" />
        <column table="a" column="name_sp" type="string" title="" as="name_sp" />
        <column table="a" column="id_mo" type="number" title="" as="id_mo" />
        <column table="a" column="code_mo" type="string" title="" as="code_mo" />
        <column table="a" column="name_mo" type="string" title="" as="name_mo" />
        <column table="a" column="additional_data" type="string" title="" as="additional_data" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="id_parent" type="number" title="" as="id_parent" />
        <column table="a" column="not_used" type="number" title="" as="not_used" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_spr_classifier_oktmo" as="a" />
      </from>
    </query>
    <query name="isv_tdc_tit_filial" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_tdc_tit_filial.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip"></column>
        <column table="a" column="kod_filial" type="number" as="kod_filial"></column>
        <call function="rowid" as="isv_tdc_tit_filial_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_tdc_tit_filial" as="a"></table>
      </from>
    </query>
    <query name="isv_viza_abon" class="1" timestamp="20.04.2018 15:22:03" stored="isv_viza_abon_mv" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_viza_abon.xml" haskeys="1">
      <select>
        <call function="rowid" as="isv_viza_abon_id" key="1" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" />
        <column table="a" column="kn_request" type="number" title="" as="kn_request" />
        <column table="a" column="num_ouco" type="string" title="" as="num_ouco" />
        <column table="a" column="dat_ouco" type="date" title="" as="dat_ouco" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="dt_request" type="date" title="" as="dt_request" />
        <column table="a" column="kurator_req" type="string" title="" as="kurator_req" />
        <column table="a" column="load_type" type="string" title="" as="load_type" />
        <column table="a" column="load_type_kod" type="number" title="" as="load_type_kod" />
        <column table="a" column="st_req" type="string" title="" as="st_req" />
        <column table="a" column="creat_req_db" type="string" title="" as="creat_req_db" />
        <column table="a" column="req_path" type="string" title="" as="req_path" />
        <column table="a" column="customer" type="string" title="" as="customer" />
        <column table="a" column="contr_kind" type="string" title="" as="contr_kind" />
        <column table="a" column="contr_sum_f" type="number" title="" as="contr_sum_f" />
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone" />
        <column table="a" column="load" type="number" title="" as="load" />
        <column table="a" column="load1" type="number" title="" as="load1" />
        <column table="a" column="load2" type="number" title="" as="load2" />
        <column table="a" column="load3" type="number" title="" as="load3" />
        <column table="a" column="load_existed" type="number" title="" as="load_existed" />
        <column table="a" column="list_load" type="number" title="" as="list_load" />
        <column table="a" column="list_eskl" type="number" title="" as="list_eskl" />
        <column table="a" column="tbl_uved" type="number" title="" as="tbl_uved" />
        <column table="a" column="tbl_req" type="number" title="" as="tbl_req" />
        <column table="a" column="tbl_tu" type="number" title="" as="tbl_tu" />
        <column table="a" column="tbl_ocen" type="number" title="" as="tbl_ocen" />
        <column table="a" column="tbl_proj" type="number" title="" as="tbl_proj" />
        <column table="a" column="tbl_dog" type="number" title="" as="tbl_dog" />
        <column table="a" column="tbl_sign" type="number" title="" as="tbl_sign" />
        <column table="a" column="tbl_mess" type="number" title="" as="tbl_mess" />
        <column table="a" column="kateg_depend" type="string" title="" as="kateg_depend" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="filial" type="string" title="" as="filial" />
        <column table="a" column="kod_filial" type="number" title="" as="kod_filial" />
        <column table="a" column="kurator" type="string" title="" as="kurator" />
        <column table="a" column="podr_for_vks" type="string" title="" as="podr_for_vks" />
        <column table="a" column="name_status" type="string" title="" as="name_status" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="fio" type="string" title="" as="fio" />
        <column table="a" column="name_direct" type="string" title="" as="name_direct" />
        <column table="a" column="name_viza" type="string" title="" as="name_viza" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" />
        <column table="a" column="dat_viz" type="date" title="" as="dat_viz" />
        <column table="a" column="prim" type="string" title="" as="prim" />
        <column table="a" column="spec_text" type="string" title="" as="spec_text" />
        <column table="a" column="tel" type="string" title="" as="tel" />
        <column table="a" column="dolgn" type="string" title="" as="dolgn" />
        <column table="a" column="polzov" type="string" title="" as="polzov" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="ym" type="number" title="" as="ym" />
        <column table="a" column="dt_lack_req" type="date" title="" as="dt_lack_req" />
        <column table="a" column="dt_lack_req_max" type="date" title="" as="dt_lack_req_max" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="dt_pass_up" type="date" title="" as="dt_pass_up" />
        <column table="a" column="dt_pz" type="date" title="" as="dt_pz" />
        <column table="a" column="dt_pass_eb" type="date" title="" as="dt_pass_eb" />
        <column table="a" column="dt_cost_put" type="date" title="" as="dt_cost_put" />
        <column table="a" column="dt_pass_cc" type="date" title="" as="dt_pass_cc" />
        <column table="a" column="dt_pass_od" type="date" title="" as="dt_pass_od" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="dt_sogl_dog" type="date" title="" as="dt_sogl_dog" />
        <column table="a" column="dt_podp_dog" type="date" title="" as="dt_podp_dog" />
        <column table="a" column="dt_podp_dog_ep" type="date" title="" as="dt_podp_dog_ep" />
        <column table="a" column="fio_podp_dog" type="string" title="" as="fio_podp_dog" />
        <column table="a" column="podr_podp_for_vks" type="string" title="" as="podr_podp_for_vks" />
        <column table="a" column="dt_mess" type="date" title="" as="dt_mess" />
        <column table="a" column="dt_mess_too" type="date" title="" as="dt_mess_too" />
        <column table="a" column="dt_client_proj" type="date" title="" as="dt_client_proj" />
        <column table="a" column="dt_client_sign" type="date" title="" as="dt_client_sign" />
        <column table="a" column="dt_rmo" type="date" title="" as="dt_rmo" />
        <column table="a" column="dt_rmo_max" type="date" title="" as="dt_rmo_max" />
        <column table="a" column="mes_req" type="number" title="" as="mes_req" />
        <column table="a" column="day_req" type="number" title="" as="day_req" />
        <column table="a" column="srok_req" type="number" title="" as="srok_req" />
        <column table="a" column="otkl_req" type="number" title="" as="otkl_req" />
        <column table="a" column="mes_tu" type="number" title="" as="mes_tu" />
        <column table="a" column="day_tu" type="number" title="" as="day_tu" />
        <column table="a" column="srok_tu" type="number" title="" as="srok_tu" />
        <column table="a" column="otkl_tu" type="number" title="" as="otkl_tu" />
        <column table="a" column="mes_ocen" type="number" title="" as="mes_ocen" />
        <column table="a" column="day_ocen" type="number" title="" as="day_ocen" />
        <column table="a" column="srok_ocen" type="number" title="" as="srok_ocen" />
        <column table="a" column="otkl_ocen" type="number" title="" as="otkl_ocen" />
        <column table="a" column="mes_proj" type="number" title="" as="mes_proj" />
        <column table="a" column="day_proj" type="number" title="" as="day_proj" />
        <column table="a" column="srok_proj" type="number" title="" as="srok_proj" />
        <column table="a" column="otkl_proj" type="number" title="" as="otkl_proj" />
        <column table="a" column="mes_dog" type="number" title="" as="mes_dog" />
        <column table="a" column="day_dog" type="number" title="" as="day_dog" />
        <column table="a" column="srok_dog" type="number" title="" as="srok_dog" />
        <column table="a" column="otkl_dog" type="number" title="" as="otkl_dog" />
        <column table="a" column="mes_sign" type="number" title="" as="mes_sign" />
        <column table="a" column="day_sign" type="number" title="" as="day_sign" />
        <column table="a" column="srok_sign" type="number" title="" as="srok_sign" />
        <column table="a" column="otkl_sign" type="number" title="" as="otkl_sign" />
        <column table="a" column="day_22_4_sign" type="number" title="" as="day_22_4_sign" />
        <column table="a" column="srok_22_4_sign" type="number" title="" as="srok_22_4_sign" />
        <column table="a" column="otkl_22_4_sign" type="number" title="" as="otkl_22_4_sign" />
        <column table="a" column="mes_mess" type="number" title="" as="mes_mess" />
        <column table="a" column="day_mess" type="number" title="" as="day_mess" />
        <column table="a" column="srok_mess" type="number" title="" as="srok_mess" />
        <column table="a" column="otkl_mess" type="number" title="" as="otkl_mess" />
        <column table="a" column="mes_client_proj" type="number" title="" as="mes_client_proj" />
        <column table="a" column="day_client_proj" type="number" title="" as="day_client_proj" />
        <column table="a" column="mes_all" type="number" title="" as="mes_all" />
        <column table="a" column="day_all" type="number" title="" as="day_all" />
        <column table="a" column="srok_all" type="number" title="" as="srok_all" />
        <column table="a" column="otkl_all" type="number" title="" as="otkl_all" />
        <column table="a" column="dat_lkk" type="date" title="" as="dat_lkk" />
        <column table="a" column="fio_kont" type="string" title="" as="fio_kont" />
        <column table="a" column="e_mail_kont" type="string" title="" as="e_mail_kont" />
        <column table="a" column="phone_kont" type="string" title="" as="phone_kont" />
        <column table="a" column="region" type="string" title="" as="region" />
        <column table="a" column="lp_addr" type="string" title="" as="lp_addr" />
        <column table="a" column="zayav_status" type="string" title="" as="zayav_status" />
        <column table="a" column="name_obj" type="string" title="" as="name_obj" />
        <column table="a" column="dt_atp_ready" type="date" title="" as="dt_atp_ready" />
        <column table="a" column="dt_atp_signed" type="date" title="" as="dt_atp_signed" />
        <column table="a" column="dt_atp_sogl" type="date" title="" as="dt_atp_sogl" />
        <column table="a" column="dt_atp_signed_le" type="date" title="" as="dt_atp_signed_le" />
        <column table="a" column="dt_atp_signed_to_eskl" type="date" title="" as="dt_atp_signed_to_eskl" />
        <column table="a" column="dt_reg" type="date" title="" as="dt_reg" />
        <column table="a" column="dt_delivery" type="date" title="" as="dt_delivery" />
        <column table="a" column="atp_num" type="number" as="atp_num" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_viza_abon" as="a" />
      </from>
    </query>
    <query name="isv_viza_agr_doc_state" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_viza_agr_doc_state.xml" haskeys="1">
      <select>
        <column table="a" column="num_iter" type="number" title="" as="num_iter"></column>
        <column table="a" column="kod_stage" type="number" as="kod_stage"></column>
        <column table="a" column="kod_kind_reglam" type="number" as="kod_kind_reglam"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc"></column>
        <column table="a" column="pref" type="string" title="" as="pref"></column>
        <column table="a" column="full_kod_doc" type="string" as="full_kod_doc"></column>
        <column table="a" column="fio" type="string" title="" as="fio"></column>
        <column table="a" column="name_dir" type="string" title="" as="name_dir"></column>
        <column table="a" column="name_viza" type="string" title="" as="name_viza"></column>
        <column table="a" column="days" type="string" title="" as="days"></column>
        <column table="a" column="srok" type="string" title="" as="srok"></column>
        <call function="rowid" as="isv_viza_agr_doc_state_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="isv_viza_agr_doc_state" as="a"></table>
      </from>
    </query>
    <query name="isv_viza_agr_doc_state_sales" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_viza_agr_doc_state_sales.xml" haskeys="1">
      <select>
        <column table="a" column="num_iter" type="number" title="" as="num_iter" key="1" fixed="1" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" key="0" />
        <column table="a" column="kod_kind_reglam" type="number" as="kod_kind_reglam" key="0" />
        <column table="a" column="final_stage" type="number" title="" as="final_stage" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" key="0" />
        <column table="a" column="pref" type="string" title="" as="pref" key="0" />
        <column table="a" column="full_kod_doc" type="string" as="full_kod_doc" key="0" />
        <column table="a" column="kod_person_v" type="number" as="kod_person_v" key="0" />
        <column table="a" column="fio_person_v" type="string" title="" as="fio_person_v" key="0" />
        <column table="a" column="kod_direct_v" type="number" as="kod_direct_v" key="0" />
        <column table="a" column="fio" type="string" title="" as="fio" key="0" />
        <column table="a" column="name_dir" type="string" title="" as="name_dir" key="0" />
        <column table="a" column="name_viza" type="string" title="" as="name_viza" key="0" />
        <column table="a" column="days" type="string" title="" as="days" key="0" />
        <column table="a" column="kod_viza" type="string" as="kod_viza" key="0" />
        <column table="a" column="kod_person" type="string" as="kod_person" key="0" />
        <column table="a" column="kod_direct" type="string" as="kod_direct" key="0" />
        <column table="a" column="str_spec" type="string" title="" as="str_spec" key="0" />
        <column table="a" column="prev_remark" type="string" title="" as="prev_remark" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" key="0" />
        <column table="a" column="srok" type="date" title="" as="srok" key="0" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" key="0" />
        <column table="a" column="dat_post_person" type="date" title="" as="dat_post_person" key="0" />
        <column table="a" column="str_docum" type="string" title="" as="str_docum" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_viza_agr_doc_state_sales" as="a" />
      </from>
    </query>
    <query name="isv_viza_agr_doc_state_zyv_v" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_viza_agr_doc_state_zyv_v.xml" haskeys="1">
      <select>
        <column table="a" column="num_iter" type="number" title="" as="num_iter" key="1" fixed="1" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" key="0" />
        <column table="a" column="kod_kind_reglam" type="number" as="kod_kind_reglam" key="0" />
        <column table="a" column="final_stage" type="number" title="" as="final_stage" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" key="0" />
        <column table="a" column="pref" type="string" data-size="10" title="" as="pref" key="0" />
        <column table="a" column="full_kod_doc" type="string" data-size="20" as="full_kod_doc" key="0" />
        <column table="a" column="fio" type="string" data-size="4000" title="" as="fio" key="0" />
        <column table="a" column="name_dir" type="string" data-size="4000" title="" as="name_dir" key="0" />
        <column table="a" column="name_viza" type="string" data-size="4000" title="" as="name_viza" key="0" />
        <column table="a" column="days" type="string" data-size="4000" title="" as="days" key="0" />
        <column table="a" column="kod_viza" type="string" data-size="4000" as="kod_viza" key="0" />
        <column table="a" column="kod_person" type="string" data-size="4000" as="kod_person" key="0" />
        <column table="a" column="kod_direct" type="string" data-size="4000" as="kod_direct" key="0" />
        <column table="a" column="srok" type="date" title="" as="srok" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="isv_viza_agr_doc_state_zyv_v" as="a" />
      </from>
    </query>
    <query name="is_abon" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_abon.xml" haskeys="1">
      <select>
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" key="1" fixed="1"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="contr_kn_house" type="number" title="" as="contr_kn_house" key="0"></column>
        <column table="a" column="contr_addr_type" type="number" title="" as="contr_addr_type" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="kod_fs" type="number" as="kod_fs" key="0"></column>
        <column table="a" column="jurid" type="number" title="" as="jurid" key="0"></column>
        <column table="a" column="cust_addr" type="string" title="" as="cust_addr" key="0"></column>
        <column table="a" column="customer" type="string" title="" as="customer" key="0"></column>
        <column table="a" column="rassh1" type="string" title="" as="rassh1" key="0"></column>
        <column table="a" column="kodbpl" type="string" title="" as="kodbpl" key="0"></column>
        <column table="a" column="kodbpol" type="string" title="" as="kodbpol" key="0"></column>
        <column table="a" column="inn" type="string" title="" as="inn" key="0"></column>
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0"></column>
        <column table="a" column="kpp" type="string" title="" as="kpp" key="0"></column>
        <column table="a" column="kodp" type="string" title="" as="kodp" key="0"></column>
        <column table="a" column="name_all" type="string" title="" as="name_all" key="0"></column>
        <column table="a" column="okpo" type="string" title="" as="okpo" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_abon" as="a"></table>
      </from>
    </query>
    <query name="is_ad_all" timestamp="01.10.2020 23:31:29" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_ad_all.xml" haskeys="1">
      <select>
        <call function="||" as="is_ad_all_id" key="1">
          <call function="to_char">
            <column table="a" column="kn_req" type="number" title="" />
          </call>
          <const>'-'</const>
          <call function="to_char">
            <column table="a" column="kod_dop_contract" type="number" title="№ в Уник.дог. (старый)" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" type="number" title="№ в Уник.дог. (старый)" as="kod_dop_contract" />
        <column table="a" column="num_ouco" type="string" title="№ Уник.дог." comment="номер оусо (гг-9999)" as="num_ouco" />
        <column table="a" column="num_ds" type="string" title="№ д/с" comment="№ доп. соглашения" as="num_ds" />
        <column table="a" column="num_req" type="string" title="№ заявки" comment="номер заявки (год+№)" as="num_req" />
        <column table="a" column="contr_kind" type="string" title="Тип дог-ра" as="contr_kind" />
        <column table="a" column="name_vid_ad" type="string" title="Вид дог-ра" as="name_vid_ad" />
        <column table="a" column="sum_rated" type="number" title="Сумма расчетная по заявке" comment="расчитанная по заявке" as="sum_rated" />
        <column table="a" column="contr_sumf" type="number" title="Стоимость АД" comment="сумма по договору" is-fact="1" agg="sum" as="contr_sumf" fact="is_ad_all_contr_sumf" />
        <column table="a" column="contr_sum_m" type="number" title="Денежная часть" comment="денежная" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="Имущественная часть" comment="имущественная" as="contr_sum_e" />
        <column table="a" column="contr_opl" type="number" title="Сумма оплаты АД" as="contr_opl" />
        <column table="a" column="contr_opl_d" type="number" title="Сумма оплаты денежная АД" as="contr_opl_d" />
        <column table="a" column="contr_opl_i" type="number" title="Сумма оплаты имущественная" as="contr_opl_i" />
        <column table="a" column="opl" type="number" title="Оплата всего" as="opl" />
        <column table="a" column="perepl" type="number" title="Переплата" as="perepl" />
        <column table="a" column="vozvrat" type="number" title="Возврат" as="vozvrat" />
        <column table="a" column="sum_os" type="number" title="Итоговая стоимость ОС" as="sum_os" />
        <column table="a" column="zadol_opl" type="number" title="Задолженность по АД" as="zadol_opl" />
        <column table="a" column="zadol_d" type="number" title="Задолженность денежная" as="zadol_d" />
        <column table="a" column="zadol_i" type="number" title="Задолженность имуществ." as="zadol_i" />
        <column table="a" column="sum_akts" type="number" title="Сумма выполнения" as="sum_akts" />
        <column table="a" column="proc_opl" type="number" title="% оплаты" as="proc_opl" />
        <column table="a" column="imuch" type="number" title="Передача имуществом" as="imuch" />
        <column table="a" column="dat_opl" type="date" title="Последняя дата оплаты" as="dat_opl" />
        <column table="a" column="a_customer" type="string" title="Абонент" as="a_customer" />
        <column table="a" column="dt_contract" type="date" title="Дата начала действия АД" comment="дата подписания ад (цркп)" as="dt_contract" />
        <column table="a" column="srok_uslug" type="date" title="Срок оказания услуг" comment="срок оказания услуг (оусо)" is-fact="1" agg="max" as="srok_uslug" fact="is_ad_all_srok_uslug" />
        <column table="a" column="dat_end" type="date" title="Дата закрытия дог-ра" comment="дата закрытия договора" as="dat_end" />
        <column table="a" column="dat_rastorg" type="date" title="Дата расторж. дог-ра" comment="дата расторжения договора" as="dat_rastorg" />
        <column table="a" column="dat_ouco" type="date" title="Дата регистр. в ОУСО" comment="дата регистр. в оусо" as="dat_ouco" />
        <column table="a" column="name_kr" type="string" title="Подразделение регистрации дог-ра" as="name_kr" />
        <column table="a" column="fl_build" type="number" title="Работы по РС ниже 35 кВ" comment="признак наличия работ лэ" as="fl_build" />
        <column table="a" column="fl_build_vip" type="number" title="Выполнены работы по РС ниже 35 кВ" comment="признак выполнения работ лэ" format="F0" halign="center" as="fl_build_vip" />
        <column table="a" column="fl_build_z" type="number" title="Наличие работ Заявителя" comment="признак наличия работ заявителя" as="fl_build_z" />
        <column table="a" column="fl_build_z_vip" type="number" title="Работы выполн. Заявителем" comment="признак выполнения работ заявителем" as="fl_build_z_vip" />
        <column table="a" column="god_tarif" type="number" title="Год тарифа" as="god_tarif" />
        <column table="a" column="ind_proekt" type="number" title="Индив. проект" comment="тариф по индивидуальным затратам (1/0)" as="ind_proekt" />
        <column table="a" column="god_ip" type="number" title="Инвест. пр-ма (год)" comment="инвест.пр-ма (год)" as="god_ip" />
        <column table="a" column="pr_name" type="string" title="Приложение ИП" as="pr_name" />
        <column table="a" column="korr_ip" type="number" title="Корректировка ИП" comment="признак корректировки ип" as="korr_ip" />
        <column table="a" column="name_obj" type="string" title="Подключаемый объект" as="name_obj" />
        <column table="a" column="name_otrasl" type="string" title="Отрасль" as="name_otrasl" />
        <column table="a" column="razdel_okved" type="string" title="Раздел ОКВЭД" as="razdel_okved" />
        <column table="a" column="name_razdel_okved" type="string" title="Наименование раздела ОКВЭД" as="name_razdel_okved" />
        <column table="a" column="sposob_okved" type="string" title="Способ определения ОКВЭД" as="sposob_okved" />
        <column table="a" column="kn_zone" type="number" title="Зона" comment="код зоны" as="kn_zone" />
        <column table="a" column="name_rs" type="string" title="РЭС" as="name_rs" />
        <column table="a" column="cust_addr" type="string" title="Адрес абонента" as="cust_addr" />
        <column table="a" column="load_point" type="string" title="Точка подключения" comment="ту" as="load_point" />
        <column table="a" column="group_lp" type="string" title="Группа точки подключения" as="group_lp" />
        <column table="a" column="lp_addr" type="string" title="Адрес подключения" comment="адрес ту" as="lp_addr" />
        <column table="a" column="sum_load" type="number" title="Суммарная мощность" comment="load1+load2+load3+load_ex1+load_ex2+load_ex3" as="sum_load" />
        <column table="a" column="load_sum1" type="number" title="Кат.1 мощность" comment="load1 + load_ex1" format="N3" as="load_sum1" />
        <column table="a" column="load_sum2" type="number" title="Кат.2 мощность" comment="load2 + load_ex2" format="N3" as="load_sum2" />
        <column table="a" column="load_sum3" type="number" title="Кат.3 мощность" comment="load3 + load_ex3" format="N3" as="load_sum3" />
        <column table="a" column="load123" type="number" title="Заявленная мощность" comment="load1+load2+load3" as="load123" />
        <column table="a" column="load1" type="number" title="Кат.1 мощность" comment="мощность кат 1" as="load1" />
        <column table="a" column="load2" type="number" title="Кат.2 мощность" comment="мощность кат 2" as="load2" />
        <column table="a" column="load3" type="number" title="Кат.3 мощность" comment="мощность кат 3" as="load3" />
        <column table="a" column="load_existed" type="number" title="Существующая мощность" comment="мощность существующая load_ex1+load_ex2+load_ex3" as="load_existed" />
        <column table="a" column="load_ex1" type="number" title="Кат.1 Существ. мощность" comment="мощность сущ. кат.1" as="load_ex1" />
        <column table="a" column="load_ex2" type="number" title="Кат.2 Существ. мощность" comment="мощность сущ. кат.2" as="load_ex2" />
        <column table="a" column="load_ex3" type="number" title="Кат.3 Существ. мощность" comment="мощность сущ. кат.3" as="load_ex3" />
        <column table="a" column="supply" type="string" title="Источник питания" as="supply" />
        <column table="a" column="supply1" type="string" title="Источник 2 питания" as="supply1" />
        <column table="a" column="vol" type="string" title="Уровень напряжения" as="vol" />
        <column table="a" column="dt_request" type="date" title="Дата заявки" comment="дата заявки" as="dt_request" />
        <column table="a" column="exp_num" type="string" title="№ СЗ в ДПО" comment="№ сз в дпо (раньше было номер протокола экспертной группы)" as="exp_num" />
        <column table="a" column="exp_dat" type="date" title="Дата СЗ в ДПО" comment="дата сз в дпо (раньше было дата протокола экспертной группы)" as="exp_dat" />
        <column table="a" column="exp_prim" type="string" title="Причина передачи СЗ в ДПО" comment="причина передачи сз в дпо" as="exp_prim" />
        <column table="a" column="name_status" type="string" title="Состояние АД" as="name_status" />
        <column table="a" column="name_kurators" type="string" title="Куратор договора" as="name_kurators" />
        <column table="a" column="name_kurators_req" type="string" title="Куратор заявки" as="name_kurators_req" />
        <column table="a" column="num_tu" type="string" title="номер ТУ" as="num_tu" />
        <column table="a" column="contr_note" type="string" title="Примечание по АД" comment="примечание" as="contr_note" />
        <column table="a" column="prim" type="string" title="Примечание (техн.инф.)" comment="прим. (тех)" as="prim" />
        <column table="a" column="dat_sl_zap" type="date" title="Дата передачи ДС в бух." comment="дата получения служ. записки" as="dat_sl_zap" />
        <column table="a" column="dat_per_sl_zap" type="date" title="Дата передачи ТЗ в работу" comment="дата передачи служ. записки" as="dat_per_sl_zap" />
        <column table="a" column="dat_ks" type="date" title="Передан в работу в блок КС" comment="дата передачи в кс" as="dat_ks" />
        <column table="a" column="reg_req_title" type="string" title="Титул" as="reg_req_title" />
        <column table="a" column="kn_sert" type="number" title="Номер АТП" as="kn_sert" />
        <column table="a" column="ind_tar" type="number" title="Инд. тариф" comment="признак наличия даты получения индивид. тарифа (0 -нет, 1 - есть)" as="ind_tar" />
        <column table="a" column="fl_work_ps" type="number" title="Раб. на ист." comment="признак наличия работ на источнике" as="fl_work_ps" />
        <column table="a" column="fl_work_net" type="number" title="Раб. по РС" comment="признак наличия работ на распред. сети" as="fl_work_net" />
        <column table="a" column="fl_work_pu" type="number" title="Раб. по ПУ" comment="признак наличия работ по пу" as="fl_work_pu" />
        <column table="a" column="fl_loss" type="number" title="Дог. убыт." comment="признак  убыточности" as="fl_loss" />
        <column table="a" column="name_group" type="string" title="Группа" as="name_group" />
        <column table="a" column="dat_tz_ks" type="date" title="ТЗ передано в КС (дата)" comment="тз передано в кс(капстрой)" as="dat_tz_ks" />
        <column table="a" column="dat_ks_11" type="date" title="КС-11 (дата)" comment="кс-11-дата пол. справки(кураторы)" as="dat_ks_11" />
        <column table="a" column="dat_act" type="date" title="Дата акта бездоговорного использ" as="dat_act" />
        <column table="a" column="dat_vip_rab" type="date" title="Дата справки о выполнении работ" comment="дата справки о выполнении работ" as="dat_vip_rab" />
        <column table="a" column="num_vip_rab" type="string" title="Номер справки о выполнении раб" comment="номер справки об оконч работ" as="num_vip_rab" />
        <column table="a" column="text_rab" type="string" title="Работы" comment="работы" as="text_rab" />
        <column table="a" column="text_oblig" type="string" title="Обязательства" comment="обязательства" as="text_oblig" />
        <column table="a" column="analog" type="string" title="Аналоги" as="analog" />
        <column table="a" column="dat_dop_doc" type="date" title="Дата доп. док-та" as="dat_dop_doc" />
        <column table="a" column="num_dop_doc" type="string" title="№ доп. док-та" as="num_dop_doc" />
        <column table="a" column="num_ad" type="string" title="№ АД" comment="номер ад (полный)" as="num_ad" />
        <column table="a" column="vid_atp" type="string" title="Вид АТП" as="vid_atp" />
        <column table="a" column="load_units" type="string" title="Ед. Изм. мощн." comment="ед. измерения мощности" as="load_units" />
        <column table="a" column="folder" type="string" title="№ папки" comment="папка ад" as="folder" />
        <column table="a" column="folder_date" type="date" title="Дата создания папки" comment="дата создания № папки" as="folder_date" />
        <column table="a" column="name_folder_user" type="string" title="Папка создана пользователем" comment="имя пользователя, изменившего № папки" as="name_folder_user" />
        <column table="a" column="fl_rotate" type="number" title="Оче редь" comment="очередь" as="fl_rotate" />
        <column table="a" column="fl_rnk_not" type="number" title="Без РНК" as="fl_rnk_not" />
        <column table="a" column="quant_ds" type="number" title="Кол-во Д/С" as="quant_ds" />
        <column table="a" column="dat_ds" type="date" title="Дата посл. Д/С" as="dat_ds" />
        <column table="a" column="fl_discount" type="number" title="Льгот." as="fl_discount" />
        <column table="a" column="titul_ip" type="string" title="№ Титула" as="titul_ip" />
        <column table="a" column="num_aip" type="string" title="№ АИП" as="num_aip" />
        <column table="a" column="name_kat_zayav" type="string" title="Категория заявителя" as="name_kat_zayav" />
        <column table="a" column="dat_close_deb_zadol" type="date" title="Дата погашения ДЗ (план)" comment="дата погашения дебиторской задолженности" as="dat_close_deb_zadol" />
        <column table="a" column="otl_usl" type="string" title="Отлагательные условия" comment="отлагательные условия" as="otl_usl" />
        <column table="a" column="vid_otl_usl" type="string" title="Вид отлагат. условий" as="vid_otl_usl" />
        <column table="a" column="srok_otl_usl" type="date" title="Срок действ. отлагат. условий" as="srok_otl_usl" />
        <column table="a" column="dat_status_2" type="date" title="Дата аннулирования" comment="перевод в статус аннулирован" as="dat_status_2" />
        <column table="a" column="pr_db" type="number" title="Признак DB" as="pr_db" />
        <column table="a" column="dat_uv_el_ust" type="date" title="Дата увед. о предъявл. эл.установки" comment="дата выполнения работ заявителем" as="dat_uv_el_ust" />
        <column table="a" column="dat_spis_kz" type="date" title="Дата списания КЗ" as="dat_spis_kz" />
        <column table="a" column="um_status_1" type="string" title="Регистратор дог-ра" as="um_status_1" />
        <column table="a" column="vid_ds" type="string" title="Вид д/с" as="vid_ds" />
        <column table="a" column="dat_post" type="date" title="Дата поступления в отдел (тех)" comment="дата поступления в отдел (тех)" as="dat_post" />
        <column table="a" column="dat_vol" type="date" title="Дата заявки на спр. (тех)" comment="дата заявки на спр. (тех)" as="dat_vol" />
        <column table="a" column="guess_sum" type="number" comment="стоимость проекта (оценка)" title="Стоимость&#xA; проекта &#xA;(оценка)" as="guess_sum" />
        <column table="a" column="name_zayav" type="string" title="Признак заявителя" as="name_zayav" />
        <column table="a" column="sum_pd" type="number" title="Сумма подрядных дог-ров" as="sum_pd" />
        <column table="a" column="read_to_close" type="number" title="Направлено уведомл.  о готовн.к закрытию" as="read_to_close" />
        <column table="a" column="dat_read_to_close" type="date" title="Дата направ. уведомл. о готовн. к закрытию" as="dat_read_to_close" />
        <column table="a" column="got_to_close" type="number" title="Получено уведомл.  о готовн. Заявителя" as="got_to_close" />
        <column table="a" column="dat_got_to_close" type="date" title="Дата получ. уведомл. о готовн.  Заявителя" as="dat_got_to_close" />
        <column table="a" column="old_status_name" type="string" title="Предыдущее состояние АД" as="old_status_name" />
        <column table="a" column="dataizm" type="date" title="Дата изменения состояния АД" as="dataizm" />
        <column table="a" column="fio" type="string" title="Изменил состояния АД" as="fio" />
        <column table="a" column="text_spis" type="string" title="Списание задолженности" as="text_spis" />
        <column table="a" column="pr_late_payment" type="number" title="Нарушение графика оплаты" as="pr_late_payment" />
        <column table="a" column="prior_ad" type="string" title="Признак приоритетности" as="prior_ad" />
        <column table="a" column="vrem_tp" type="number" title="Временное &#xA;ТП&#xA;" comment="признак временного тп" as="vrem_tp" />
        <column table="a" column="dat_fact_vol" type="date" title="Дата&#xA; фактической подачи &#xA;напряжения" comment="дата факт подачи напряжения" as="dat_fact_vol" />
        <column table="a" column="pr_ofz" type="number" title="Признак ОФЗ" comment="признак офз" as="pr_ofz" />
        <column table="a" column="podr_status_1" type="string" title="Подразделение &#xA;регистратора&#xA; дог-ра" as="podr_status_1" />
        <column table="a" column="name_all" type="string" title="Полное наименование  абонента" as="name_all" />
        <column table="a" column="pr_sum_name" type="string" title="Ставка" as="pr_sum_name" />
        <column table="a" column="group_ad" type="string" title="Группа АД" as="group_ad" />
        <column table="a" column="dt_reg" type="date" title="Дата  регистр. АТП" as="dt_reg" />
        <column table="a" column="dt_delivery" type="date" title="Дата выдачи АТП" as="dt_delivery" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" />
        <column table="a" column="kpp" type="string" title="КПП" as="kpp" />
        <column table="a" column="mo_name" type="string" title="Сельское поселение(было)" as="mo_name" />
        <column table="a" column="n_pril" type="string" title="Приказ 609 № Приложения" comment="№ приложения" as="n_pril" />
        <column table="a" column="all_control" type="number" title="Проверка завершена по ОФЗ" as="all_control" />
        <column table="a" column="folder_ofz" type="string" title="Папка архива ОФЗ" as="folder_ofz" />
        <column table="a" column="filial" type="string" title="Филиал" as="filial" />
        <column table="a" column="s_mobr" type="string" title="Муниципальное образование (было)" as="s_mobr" />
        <column table="a" column="s_nasp" type="string" title="Населенный пункт (было)" as="s_nasp" />
        <column table="a" column="name_mo" type="string" title="Муниципальное образование" as="name_mo" />
        <column table="a" column="name_np" type="string" title="Населенный пункт" as="name_np" />
        <column table="a" column="name_sp" type="string" title="Сельское поселение" as="name_sp" />
        <column table="a" column="vid_opl_ad" type="string" title="Вид оплаты договора" as="vid_opl_ad" />
        <column table="a" column="pr_ad_iskl" type="number" title=" Принуд.ОДИ" as="pr_ad_iskl" />
        <column table="a" column="type_req" type="string" title="Тип заявки" as="type_req" />
        <column table="a" column="pr_gen" type="number" title="Генерация" as="pr_gen" />
        <column table="a" column="pr_num_pref_control" type="number" title="№ АД проверен" comment="номер дог-ра проверен" as="pr_num_pref_control" />
        <column table="a" column="dat_first_opl" type="date" title="Первая дата оплаты" as="dat_first_opl" />
        <column table="a" column="srok_tu" type="string" title="Срок действия ТУ" comment="срок действия ту" as="srok_tu" />
        <column table="a" column="load_point1" type="string" title="Точка подключения 2" comment="точка подключения 2" as="load_point1" />
        <column table="a" column="vol1" type="string" title="Уровень  напряжения 2" as="vol1" />
        <column table="a" column="group_lp1" type="string" title="Группа  точки  подключения 2" as="group_lp1" />
        <column table="a" column="titul_ad" type="number" title="Нет связи с объектом строительства" as="titul_ad" />
        <column table="a" column="ds_not_rab_le" type="number" title="Доп.согл. о снятии работ" as="ds_not_rab_le" />
        <column table="a" column="cnt_mes" type="number" title="Период рассрочки (месяцев)" comment="период рассрочки,месяцев" as="cnt_mes" />
        <column table="a" column="status_ofz" type="string" title="Статус состояния ОФЗ" as="status_ofz" />
        <column table="a" column="sposob_zayav" type="string" title="Способ подачи заявки" as="sposob_zayav" />
        <column table="a" column="name_direct_i" type="string" title="Инициатор ОФЗ" as="name_direct_i" />
        <column table="a" column="pr_hoz_sposob" type="number" title="Признак хозспособа" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="Признак наличия подрядных договоров" as="pr_exist_pd" />
        <column table="a" column="dat_plan_rab" type="date" title="Плановая дата работ" as="dat_plan_rab" />
        <column table="a" column="spos_vip" type="string" title="Способ выполнения работ ЛЭ" as="spos_vip" />
        <column table="a" column="org_active" type="string" title="ДЗО" as="org_active" />
        <column table="a" column="kn_contract" type="number" title="Код договора" comment="код договора" as="kn_contract" />
        <column table="a" column="kn_req" type="number" title="Код заявки" comment="код заявки" as="kn_req" />
        <column table="a" column="kn_contr_kind" type="number" title="Код типа АД" comment="код типа ад" as="kn_contr_kind" reference="is_spr_contr_kind" refcol="kn_contr_kind" />
        <column table="a" column="num_contr" type="string" title="Номер АД (год+№)" comment="номер ад (год+№)" as="num_contr" />
        <column table="a" column="kn_customer" type="number" title="Код абонента" comment="код абонента" as="kn_customer" />
        <column table="a" column="vb_customer" type="string" title="Абонент" comment="абонент" as="vb_customer" />
        <column table="a" column="sind_proekt" type="string" title="Тариф по индивидуальным затратам (да/нет)" comment="тариф по индивидуальным затратам (да/нет)" as="sind_proekt" />
        <column table="a" column="req_year" type="number" title="Год заявки" comment="год заявки" as="req_year" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="load_existed_kvt" type="number" title="" as="load_existed_kvt" />
        <column table="a" column="kateg" type="string" title="Категория надежности" comment="категория надежности" as="kateg" />
        <column table="a" column="dts_final" type="string" title="Срок оказания услуги (текст цркп)" comment="срок оказания услуги (текст цркп)" as="dts_final" />
        <column table="a" column="sfl_build" type="string" title="Наличие работ ЛЭ (да/нет)" comment="наличие работ лэ (да/нет)" as="sfl_build" />
        <column table="a" column="sfl_build_vip" type="string" title="Работы ЛЭ выполнены (да/нет)" comment="работы лэ выполнены (да/нет)" as="sfl_build_vip" />
        <column table="a" column="sfl_build_z" type="string" title="Наличие работ заявителя (да/нет)" comment="наличие работ заявителя (да/нет)" as="sfl_build_z" />
        <column table="a" column="sfl_build_z_vip" type="string" title="Выполнены работы заявителя (да/нет)" comment="выполнены работы заявителя (да/нет)" as="sfl_build_z_vip" />
        <column table="a" column="cm_case" type="string" title="Вид графика оплат" comment="вид графика оплат" as="cm_case" />
        <column table="a" column="status" type="number" title="Статус" comment="статус" as="status" />
        <column table="a" column="cust_addr_old" type="string" title="" as="cust_addr_old" />
        <column table="a" column="lp_addr_old" type="string" title="" as="lp_addr_old" />
        <column table="a" column="kn_contract_p" type="number" title="Родительский код договора" comment="родительский код договора" as="kn_contract_p" />
        <column table="a" column="contr_kn_house" type="number" title="Код адреса абонента" comment="код адреса абонента" as="contr_kn_house" />
        <column table="a" column="contr_addr_type" type="number" title="Тип адреса абонента" comment="тип адреса абонента" as="contr_addr_type" />
        <column table="a" column="req_kn_house" type="number" title="Код адреса подключения" comment="код адреса подключения" as="req_kn_house" />
        <column table="a" column="req_addr_type" type="number" title="Тип адреса подключения" comment="тип адреса подключения" as="req_addr_type" />
        <column table="a" column="kodres" type="number" title="Код района электрической сети" comment="код района электрической сети" as="kodres" />
        <column table="a" column="skorr_ip" type="string" title="Корректировка ИП (да/нет)" comment="корректировка ип (да/нет)" as="skorr_ip" />
        <column table="a" column="name_rab" type="string" title="Наименование работы (стройка/реконструкция)" comment="наименование работы (стройка/реконструкция)" as="name_rab" />
        <column table="a" column="name_oblig" type="string" title="Наименование обязательства (накопленные/текущие)" comment="наименование обязательства (накопленные/текущие)" as="name_oblig" />
        <column table="a" column="sfl_work_net" type="string" title="Наличие работ на распред. сети (есть/нет)" comment="наличие работ на распред. сети (есть/нет)" as="sfl_work_net" />
        <column table="a" column="sfl_work_pu" type="string" title="Наличие работ по ПУ (есть/нет)" comment="наличие работ по пу (есть/нет)" as="sfl_work_pu" />
        <column table="a" column="kod_spr_kurators" type="number" comment="код куратора (тех)" title="Код куратора (тех)" as="kod_spr_kurators" />
        <column table="a" column="kod_spr_kurators_req" type="number" comment="куратор заявки" title="Куратор заявки" as="kod_spr_kurators_req" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="ku_name" type="string" title="" as="ku_name" />
        <column table="a" column="dat_vip" type="date" title="Срок оказания услуг (тех.инф)" comment="срок оказания услуг (тех.инф)" as="dat_vip" />
        <column table="a" column="cp" type="number" title="Целевая программа" comment="код целевой программы" as="cp" />
        <column table="a" column="scp" type="string" title="Целевая программа (да/нет)" comment="целевая программа (да/нет)" as="scp" />
        <column table="a" column="ap" type="number" title="Адресная программа" comment="код адресной программы" as="ap" />
        <column table="a" column="uvedom" type="number" title="Задолж. по строит. части ТП" comment="код уведомления о реуструктуризации" as="uvedom" />
        <column table="a" column="uvedom_r" type="number" title="График 884" comment="код уведомления о реструктуризации" as="uvedom_r" />
        <column table="a" column="sap" type="string" title="Адресная программа (да/нет)" comment="адресная программа (да/нет)" as="sap" />
        <column table="a" column="suvedom" type="string" title="Уведомление о реуструктуризации (есть/нет)" comment="уведомление о реуструктуризации (есть/нет)" as="suvedom" />
        <column table="a" column="suvedom_r" type="string" title="Уведомление о реструктуризации (есть/нет)" comment="уведомление о реструктуризации (есть/нет)" as="suvedom_r" />
        <column table="a" column="sfl_rotate" type="string" title="Очередь (да/нет)" comment="очередь (да/нет)" as="sfl_rotate" />
        <column table="a" column="sfl_rnk_not" type="string" title="" as="sfl_rnk_not" />
        <column table="a" column="sfl_discount" type="string" title="" as="sfl_discount" />
        <column table="a" column="sstage" type="string" title="Этапы (есть/нет)" comment="этапы (есть/нет)" as="sstage" />
        <column table="a" column="ssso" type="string" title="ССО (есть/нет)" comment="ссо (есть/нет)" as="ssso" />
        <column table="a" column="stage" type="number" title="Этапы" comment="этапы" as="stage" />
        <column table="a" column="sso" type="number" title="ССО" comment="ссо" as="sso" />
        <column table="a" column="spr_db" type="string" title="" as="spr_db" />
        <column table="a" column="sfl_work_ps" type="string" title="Наличие работ на источнике (есть/нет)" comment="наличие работ на источнике (есть/нет)" as="sfl_work_ps" />
        <column table="a" column="sfl_loss" type="string" title="Убыточность (да/нет)" comment="убыточность (да/нет)" as="sfl_loss" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" />
        <column table="a" column="num_ad_pref" type="string" title="Нoмер АД и дата с префиксом" comment="нoмер ад и дата с префиксом" as="num_ad_pref" />
        <column table="a" column="pr_ofz_vkl" type="number" title="Включено в ОФЗ" comment="включено в офз" as="pr_ofz_vkl" />
        <column table="a" column="kod_filial" type="number" comment="филиал" title="Филиал" as="kod_filial" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="pr_part_akt" type="number" title="" as="pr_part_akt" />
        <column table="a" column="dat_status_1" type="date" title="Перевод статуса в действ./учтен в осн. договоре" comment="перевод статуса в действ./учтен в осн. договоре" as="dat_status_1" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="kod_vol" type="number" comment="код спр. уровня напряжения в точке подкл.1" title="Код спр. уровня напряжения в точке подкл.1" as="kod_vol" />
        <column table="a" column="dt_indtar_got" type="date" title="Дата получения индивид. тарифа" comment="дата получения индивид. тарифа" as="dt_indtar_got" />
        <column table="a" column="proc" type="number" title="% НДС (для оплаты)" comment="% ндс(для оплаты)" as="proc" />
        <column table="a" column="pr_srez" type="number" title="Признак среза" comment="признак среза" as="pr_srez" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="id_slice" type="number" title="" dimension="id_slice" is-final-dimension="1" is-private-dimension="1" as="id_slice" reference="is_ad_all_slice" refcol="id_slice" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="contr_opl_bez_nds_d" type="number" title="" as="contr_opl_bez_nds_d" />
        <column table="a" column="contr_opl_bez_nds_i" type="number" title="" as="contr_opl_bez_nds_i" />
        <column table="a" column="pr_dso" type="number" title="" as="pr_dso" />
        <column table="a" column="cg_dt_reg" type="date" title="" as="cg_dt_reg" />
        <column table="a" column="cg_col_f" type="date" title="Дата изм. Постоянный АТП" comment="дата посл.изм.col_f (постоянный атп) во вьюхе isv_ad_everyday" as="cg_col_f" />
        <column table="a" column="cg_col_i" type="date" title="Дата изм. Подписано ДС о готовности СО" comment="дата посл.изм.col_i (подписано дс о готовности со) во вьюхе isv_ad_everyday" as="cg_col_i" />
        <column table="a" column="cg_col_l" type="date" title="Дата изм. Расторгнут" comment="дата посл.изм.col_l (расторгнут) во вьюхе isv_ad_everyday" as="cg_col_l" />
        <column table="a" column="cg_col_n" type="date" title="Дата изм. Остаток" comment="дата посл.изм.col_n (остаток) во вьюхе isv_ad_everyday" as="cg_col_n" />
        <column table="a" column="kod_vid_ad" type="number" as="kod_vid_ad" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" />
        <column table="a" column="kn_st_req" type="number" title="Статус заявки в аппсерв" comment="статус заявки в аппсерв" as="kn_st_req" />
        <column table="a" column="dt_project" type="date" title="Дата проекта договора в аппсерв" comment="дата проекта договора в аппсерв" as="dt_project" />
        <column table="a" column="date_coming" type="date" title="Дата приема заявки" comment="дата приема заявки" as="date_coming" />
        <column table="a" column="date_off" type="date" title="Дата аннулирования заявки в аппсерв" comment="дата аннулирования заявки в аппсерв" as="date_off" />
        <column table="a" column="kn_off_reason" type="number" title="Код причины аннулирования" comment="код причины аннулирования" as="kn_off_reason" />
        <column table="a" column="dt_docs_got" type="date" title="Дата полного пакета докум.аппсерв" comment="дата полного пакета докум.аппсерв" as="dt_docs_got" />
        <column table="a" column="dat_status_4" type="date" title="Дата перевода в статус выполнен" comment="дата перевода в статус выполнен" as="dat_status_4" />
        <column table="a" column="dat_status_5" type="date" title="Дата перевода в статус приостановлен" comment="дата перевода в статус приостановлен" as="dat_status_5" />
        <column table="a" column="dat_status_30" type="date" title="Дата перевода в ст претенз-иск работа" comment="дата перевода в ст претенз-иск работа" as="dat_status_30" />
        <column table="a" column="dat_akt" type="date" title="Последняя дата акта услуг" comment="последняя дата акта услуг" as="dat_akt" />
        <column table="a" column="kod_vid_ds" type="number" comment="вид доп соглашения" title="Вид доп соглашения" as="kod_vid_ds" />
        <column table="a" column="pr_sum" type="number" title="Код варианта стоимости" comment="код варианта стоимости" as="pr_sum" />
        <column table="a" column="pr_nonprofit" type="string" title="Признак некоммерч орг" comment="признак некоммерч орг" as="pr_nonprofit" />
        <column table="a" column="kn_supply" type="number" title="Ключ точки подключения" comment="ключ точки подключения" as="kn_supply" />
        <column table="a" column="kn_supply1" type="number" title="Ключ точки подключения 1" comment="ключ точки подключения 1" as="kn_supply1" />
        <column table="a" column="kn_load_type" type="number" title="Код типа заявки" comment="код типа заявки" as="kn_load_type" />
        <column table="a" column="srok_isp_ad" type="number" title="Срок исполнения АД (по функции)" comment="срок исполнения ад(по функции)" as="srok_isp_ad" />
        <column table="a" column="dlit_vip_ad" type="number" title="Длит. вып. АД (по функции)" comment="длит.вып.ад(по функции)" as="dlit_vip_ad" />
        <column table="a" column="kod_pr_zayav" type="number" comment="признак заявителя" title="Признак заявителя" as="kod_pr_zayav" />
        <column table="a" column="srok_project_norm" type="number" title="Срок направления проекта" comment="срок направления проекта" as="srok_project_norm" />
        <column table="a" column="kod_spr_ini_prod" type="number" comment="код инициатора продления" title="Код инициатора продления" as="kod_spr_ini_prod" />
        <column table="a" column="name_ini_prod" type="string" title="Инициатор продления" comment="наимен.инициатора продления" as="name_ini_prod" />
        <column table="a" column="dt_bus_plan" type="date" title="Бизнес план" comment="дата бизнес план" as="dt_bus_plan" />
        <column table="a" column="power" type="number" title="Мощность АТП" comment="мощность атп" as="power" />
        <column table="a" column="power_units" type="string" title="Ед. изм. мощности АТП" comment="един.измерения мощности атп" as="power_units" />
        <column table="a" column="cg_pr_hoz_sposob" type="date" title="Дата изм признака Хоз способ" comment="дата изм признака Хоз способ" as="cg_pr_hoz_sposob" />
        <column table="a" column="cg_pr_exist_pd" type="date" title="Дата изм признака Подряд работы" comment="дата изм признака Подряд работы" as="cg_pr_exist_pd" />
        <column table="a" column="cg_dat_plan_rab" type="date" title="Дата изм Плановая дата выполнения работ ЛЭ" comment="дата изм Плановая дата выполнения работ ЛЭ" as="cg_dat_plan_rab" />
        <column table="a" column="cg_col_l_2" type="date" title="Дата изм. претензион-иск" comment="дата посл.изм.COL_L_2 (претензион-иск) во вьюхе ISV_AD_EVERYDAY" as="cg_col_l_2" />
        <column table="a" column="cnt_mes_tp" type="date" title="Плановая дата выполнения работ заявителем" comment="плановая дата выполнения работ заявителем" as="cnt_mes_tp" />
        <column table="a" column="kod_ini_prod_ds" type="number" comment="инициатор дс" title="Инициатор ДС" as="kod_ini_prod_ds" />
        <column table="a" column="name_ini_prod_ds" type="string" title="Инициатор ДС" comment="наименование инициатора дс" as="name_ini_prod_ds" />
        <column table="a" column="kod_zayav" type="number" comment="код заявки" title="Код заявки" as="kod_zayav" />
        <column table="a" column="kod_zpr" type="number" comment="код паспорта" title="Код паспорта" as="kod_zpr" />
        <column table="a" column="length_le" type="number" title="Расстояния до сетей ЛЭ" comment="расстояния до сетей ЛЭ" as="length_le" />
        <column table="a" column="kod_org_active" type="number" comment="ДЗО, если NULL то ЛЭ" title="ДЗО, если NULL то ЛЭ" as="kod_org_active" />
        <column table="a" column="kod_dzo_bus_plan" type="number" comment="Принадлежность БП код" title="Принадлежность БП код" as="kod_dzo_bus_plan" />
        <column table="a" column="name_dzo_bus_plan" type="string" title="Принадлежность БП" comment="Принадлежность БП наимен" as="name_dzo_bus_plan" />
        <column table="a" column="pr_motiv_ref" type="number" title="Признак наличия док Мотивированый отказ" comment="Признак наличия док Мотивированый отказ" as="pr_motiv_ref" />
        <column table="a" column="dat_ecp_le" type="date" title="Дата подписания ЭЦП ЛЭ" comment="Дата подписания ЭЦП ЛЭ" as="dat_ecp_le" />
        <column table="a" column="dat_ecp_ab" type="date" title="Дата подписания ЭЦП абонентом" comment="Дата подписания ЭЦП абонентом" as="dat_ecp_ab" />
        <column table="a" column="kod_status_every_day" type="number" comment="код статуса в отчет (ВКС)" title="Код статуса в отчет (ВКС)" as="kod_status_every_day" />
        <column table="a" column="name_status_every_day" type="string" title="Статус в отчет ВКС" comment="наим статуса в отчет (ВКС)" as="name_status_every_day" />
        <column table="a" column="zadol_d_prosrok" type="number" title="Задолженность денежная просроченная" comment="Просроченная денежная задолженность" as="zadol_d_prosrok" />
        <column table="a" column="kod_fs" type="number" comment="Код формы собственности" is-private-dimension="is_spr_fs" is-final-dimension="is_spr_fs" dimension="is_spr_fs" title="Код формы собственности" as="kod_fs" reference="is_spr_fs" refcol="kod_fs" />
        <column table="a" column="pr_zam_stor" type="number" title="Заменя стороны ПЭС/СПбЭС на ЛЭ" comment="Заменя стороны ПЭС/СПбЭС на ЛЭ" as="pr_zam_stor" />
        <column table="a" column="dat_zam_stor" type="date" title="Замена стороны на ЛЭ" comment="Дата заменя стороны" as="dat_zam_stor" />
        <column table="a" column="srok_bus_plan" type="string" title="Срок бизн.плана" comment="Срок по БП (текст)" as="srok_bus_plan" />
        <column table="a" column="dat_prognoz_od" type="date" title="Прогноз ОД" comment="Прогноз ОД" as="dat_prognoz_od" />
        <column table="a" column="pr_nw_more" type="number" title="Работы по сети 35-110 кВ и выше" comment="По сети 35-110 кВ и выше" as="pr_nw_more" />
        <column table="a" column="pr_nw_less" type="number" title="По распред. сети ниже 35 кВ" comment="По распред. сети ниже 35 кВ" as="pr_nw_less" />
        <column table="a" column="pr_nw_more_end" type="number" title="Выполнены работы по сети 35-110 кВ и выше" comment="Вып. работы по сети 35-110 кВ и выше" as="pr_nw_more_end" />
        <column table="a" column="pr_nw_less_end" type="number" title="Вып. работы по распред. сети ниже 35 кВ" comment="Вып. работы по распред. сети ниже 35 кВ" as="pr_nw_less_end" />
        <column table="a" column="num_order" type="string" title="Номер приказа/распоряжения Комитета по тарифам" comment="Номер приказа/распоряжения Комитета по тарифам " as="num_order" />
        <column table="a" column="date_order" type="date" title="Дата приказа/распоряжения Комитета по тарифам" comment="Дата приказа/распоряжения Комитета по тарифам" as="date_order" />
        <column table="a" column="kod_ipr" type="string" comment="Код утвержденного титула ИПР" title="Код утвержд. титула ИПР" as="kod_ipr" />
        <column table="a" column="dat_real_ipr" type="string" title="Дата реализации утвержд. титула ИПР" comment="Дата реализации утвержд. титула ИПР" as="dat_real_ipr" />
        <column table="a" column="podr_ipr" type="string" title="Подразд. ответствен. за реализ. утв.титула ИПР" comment="Подразделение ответственное за реализацию утв.титула ИПР" as="podr_ipr" />
        <column table="a" column="fl_vks" type="number" comment="Включен в отчет ВКС" title="Включен в отчет ВКС" as="fl_vks" />
        <call function="()" type="number" as="cnt" is-fact="1" agg="sum" title="Количество заявок" fact="is_ad_all_cnt">
          <const>1</const>
        </call>
        <column type="string" table="a" column="name_type_tarif" title="Тип тарифа для оценки" as="name_type_tarif" />
        <column table="a" column="cad_num" type="string" title="Кадастровый номер объекта" as="cad_num" />
        <column table="a" column="opl_vid_real_4" type="number" title="Оплата вида реал Неустойка" as="opl_vid_real_4" />
        <column title="Оплата вида реал Прочие" table="a" column="opl_vid_real_5" type="number" as="opl_vid_real_5" />
        <column table="a" column="name_stage_graf" type="string" title="Наименование вида граф опл" as="name_stage_graf" />
        <column table="a" column="dat_oferta" type="date" title="Дата направления оферты заявителю" as="dat_oferta" />
        <column table="a" column="sum_rs_new" type="number" title="Сумма по распред. сети - Новое строительство" as="sum_rs_new" />
        <column table="a" column="sum_ip_new" type="number" title="Сумма по источнику питания - Новое строительство" as="sum_ip_new" />
        <call table="a" column="sum_new" type="number" title="Новое строит. Общая оценка" function="+nvl" as="sum_new" nullif="0">
          <column table="a" column="sum_rs_new" />
          <column table="a" column="sum_ip_new" />
        </call>
        <column table="a" column="sum_rs_rek" type="number" title="Сумма по распред. сети - Реконструкция" as="sum_rs_rek" />
        <column table="a" column="sum_ip_rek" type="number" title="Сумма по источнику питания - Реконструкция" as="sum_ip_rek" />
        <call table="a" column="sum_rek" type="number" title="Реконструкция Общая оценка" as="sum_rek" function="+nvl" nullif="0">
          <column table="a" column="sum_rs_rek" />
          <column table="a" column="sum_ip_rek" />
        </call>
        <column table="a" column="dat_plan_pir" type="date" title="План дата ПИР" comment="Плановый срок ПИР - расчетов от даты нач дог-ра + 120 дн" as="dat_plan_pir" />
        <column table="a" column="dat_plan_smr" type="date" title="План дата выполнения работ СО" comment="Плановый срок СМР - расчетом от даты нач дог-ра + 160 дн" as="dat_plan_smr" />
        <column table="a" type="string" column="name_fs" comment="Наименование формы собственности" title="Организационно-правовая форма" as="name_fs" />
        <column table="a" type="number" column="FL_BUILD_DSRRS" comment="Работы выполняет ДСРРС" title="Работы выполняет ДСРРС" as="FL_BUILD_DSRRS" />
        <column table="a" column="FL_WORK_GP_PU" type="number" title="Работы ГП на ПУ" as="FL_WORK_GP_PU" />
        <column table="a" column="FL_WORK_GP_PU_END" type="number" title="Выполнены работы ГП на ПУ" as="FL_WORK_GP_PU_END" />
        <column table="a" column="WORK_ESK_PU_END" type="number" title="Выполнены работы ЛЭ на ПУ" as="WORK_ESK_PU_END" />
        <column table="a" column="WORK_ABON_PU" type="number" title="Работы заявителя на ПУ" as="WORK_ABON_PU" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_ad_all" as="a">
          <link name="kod_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dop_contract" table="is_dop_contract" child="is_ad_all" field="kod_dop_contract" parent="is_dop_contract" back="is_ad_all" title="Абонентские договоры">
            <dimlink name="ipr_kod_titul_ip" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_ipr" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_atp_dop_info" dimension="1" is-private-dimension="1" is-final-dimension="1" />
          </link>
        </table>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_ad_all" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" title="№ в Уник.дог. (старый)" />
            <column table="kod_dop_contract" column="kod_dop_contract" title="№ в Уник.дог. (старый)" />
          </call>
        </query>
        <query name="is_ad_all_slice" as="id_slice" join="left outer" dname="is_ad_all">
          <call function="=">
            <column table="a" column="id_slice" title="№ в Уник.дог. (старый)" />
            <column table="id_slice" column="id_slice" title="№ в Уник.дог. (старый)" />
          </call>
        </query>
        <query name="is_spr_fs" as="kod_fs" join="left outer" dname="is_ad_all">
          <call function="=">
            <column table="a" column="kod_fs" />
            <column table="kod_fs" column="kod_fs" />
          </call>
        </query>
        <query name="is_spr_contr_kind" as="kn_contr_kind" join="left outer" dname="is_ad_all" title="Тип договоров">
          <call function="=">
            <column table="a" column="kn_contr_kind" />
            <column table="kn_contr_kind" column="kn_contr_kind" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_ad_all_slice" class="1" timestamp="04.09.2017 03:09:07" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_ad_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice" type="number" title="" as="id_slice" key="1" fixed="1" />
        <column table="a" column="dat_copy" type="date" title="Дата" as="dat_copy" key="0" />
        <column table="a" column="dat_copy_time" type="date" title="" as="dat_copy_time" key="0" />
        <column table="a" column="pr_manual" type="number" title="" as="pr_manual" key="0" />
        <column table="a" column="user_ad_all" type="string" title="" as="user_ad_all" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" key="0" />
        <call function="over" as="id_slice_day" type="number" key="0">
          <call function="last_value">
            <column table="a" column="id_slice" />
          </call>
          <call function="partition by">
            <column table="a" column="dat_copy" />
          </call>
          <call function="order by rows * *">
            <column table="a" column="dat_copy_time" />
          </call>
        </call>
        <call function="to_char" as="name" key="0">
          <column table="a" column="dat_copy_time" type="date" title="" />
          <const>'dd.mm.yyyy hh24:mi:ss'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_ad_all_slice" as="a" />
      </from>
    </query>
    <query name="is_ad_stage" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_ad_stage.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ad_stage" type="number" column-mandatory="1" as="kod_ad_stage" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="num_stage" type="string" data-size="250" title="" comment="номер этапа" as="num_stage" key="0" />
        <column table="a" column="dat_stage" type="date" title="" comment="дата этапа" as="dat_stage" key="0" />
        <column table="a" column="load" type="number" title="" comment="мощность на этапе" as="load" key="0" />
        <column table="a" column="sum_m" type="number" title="" comment="выручка" as="sum_m" key="0" />
        <column table="a" column="prim" type="string" data-size="2000" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" data-size="30" title="" as="polzov" key="0" />
        <column table="a" column="sum_e" type="number" title="" comment="имущество" as="sum_e" key="0" />
        <column table="a" column="load1" type="number" title="" as="load1" key="0" />
        <column table="a" column="load2" type="number" title="" as="load2" key="0" />
        <column table="a" column="load3" type="number" title="" as="load3" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_zayav_vo" type="number" as="kod_zayav_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_ad_stage" as="a" />
        <query name="c_zayav_virtual" as="kod_zayav_vo" join="left outer" dname="is_ad_stage">
          <call function="=">
            <column table="a" column="kod_zayav_vo" />
            <column table="kod_zayav_vo" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_ad_stage" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_ad_stage">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_aktstp_view" class="1" timestamp="22.07.2016 12:22:04" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_aktstp_view.xml" haskeys="1">
      <select>
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="num_req" type="string" title="" as="num_req" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" />
        <column table="a" column="kn_sert_power" type="number" title="" as="kn_sert_power" />
        <column table="a" column="dt_reg" type="date" title="" as="dt_reg" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="num_ask" type="string" title="" as="num_ask" />
        <column table="a" column="dt_ask" type="date" title="" as="dt_ask" />
        <column table="a" column="dt_delivery" type="date" title="" as="dt_delivery" />
        <column table="a" column="kod_atp_dop_info" type="number" as="kod_atp_dop_info" />
        <column table="a" column="atp_load1" type="string" title="" as="atp_load1" />
        <column table="a" column="atp_load2" type="string" title="" as="atp_load2" />
        <column table="a" column="atp_load3" type="string" title="" as="atp_load3" />
        <column table="a" column="load1" type="string" title="" as="load1" />
        <column table="a" column="load_ex1" type="string" title="" as="load_ex1" />
        <column table="a" column="load2" type="string" title="" as="load2" />
        <column table="a" column="load_ex2" type="string" title="" as="load_ex2" />
        <column table="a" column="load3" type="string" title="" as="load3" />
        <column table="a" column="load_ex3" type="string" title="" as="load_ex3" />
        <column table="a" column="atp_load_all" type="string" title="" as="atp_load_all" />
        <column table="a" column="load_all" type="string" title="" as="load_all" />
        <column table="a" column="load_ex_all" type="string" title="" as="load_ex_all" />
        <column table="a" column="customer" type="string" title="" as="customer" />
        <column table="a" column="cust_addr" type="string" title="" as="cust_addr" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="regnum_ks" type="string" title="" as="regnum_ks" />
        <column table="a" column="dt_reg_ks" type="date" title="" as="dt_reg_ks" />
        <column table="a" column="act_perform" type="number" title="" as="act_perform" />
        <column table="a" column="load_point" type="string" title="" as="load_point" />
        <column table="a" column="dt_expire" type="string" title="" as="dt_expire" />
        <column table="a" column="build_addr" type="string" title="" as="build_addr" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="kn_service_name" type="string" title="" as="kn_service_name" />
        <column table="a" column="e_code" type="number" title="" as="e_code" />
        <column table="a" column="num_akt_vip_tu" type="string" title="" as="num_akt_vip_tu" />
        <column table="a" column="date_akt_vip_tu" type="date" title="" as="date_akt_vip_tu" />
        <column table="a" column="num_akt_search_ee" type="string" title="" as="num_akt_search_ee" />
        <column table="a" column="date_akt_search_ee" type="date" title="" as="date_akt_search_ee" />
        <column table="a" column="prizn_podtverd" type="number" title="" as="prizn_podtverd" />
        <column table="a" column="is_scan" type="number" title="" as="is_scan" />
        <column table="a" column="doc_name" type="string" title="" as="doc_name" />
        <column table="a" column="with_osob" type="number" title="" as="with_osob" />
        <column table="a" column="prim" type="string" title="" as="prim" />
        <column table="a" column="load_units" type="string" title="" as="load_units" />
        <column table="a" column="date_buh_check_prizn" type="date" title="" as="date_buh_check_prizn" />
        <column table="a" column="num_akt_auto" type="string" title="" as="num_akt_auto" />
        <column table="a" column="num_akt_auto_end" type="string" title="" as="num_akt_auto_end" />
        <column table="a" column="num_akt_auto_" type="string" title="" as="num_akt_auto_" />
        <column table="a" column="titul_name" type="string" title="" as="titul_name" />
        <column table="a" column="date_get_cust" type="date" title="" as="date_get_cust" />
        <column table="a" column="date_podpis_cust" type="date" title="" as="date_podpis_cust" />
        <column table="a" column="date_podtverd" type="date" title="" as="date_podtverd" />
        <column table="a" column="status_name" type="string" title="" as="status_name" />
        <column table="a" column="ofz_state" type="number" title="" as="ofz_state" />
        <column table="a" column="num_ad" type="string" title="" as="num_ad" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" />
        <column table="a" column="dat_reestr" type="date" title="" as="dat_reestr" />
        <column table="a" column="is_long_num" type="number" title="" as="is_long_num" />
        <column table="a" column="user_name" type="string" title="" as="user_name" />
        <column table="a" column="date_reg_bd" type="date" title="" as="date_reg_bd" />
        <column table="a" column="num_tu" type="string" title="" as="num_tu" />
        <column table="a" column="date_tu" type="date" title="" as="date_tu" />
        <column table="a" column="kod_le_person" type="number" as="kod_le_person" />
        <column table="a" column="kod_person" type="number" as="kod_person" />
        <column table="a" column="fio" type="string" title="" as="fio" />
        <column table="a" column="full_name" type="string" title="" as="full_name" />
        <column table="a" column="dolgn" type="string" title="" as="dolgn" />
        <column table="a" column="dolgn_" type="string" title="" as="dolgn_" />
        <column table="a" column="dolgn_r" type="string" title="" as="dolgn_r" />
        <column table="a" column="fio_r_le" type="string" title="" as="fio_r_le" />
        <column table="a" column="type_osnov_le" type="string" title="" as="type_osnov_le" />
        <column table="a" column="osnov_le" type="string" title="" as="osnov_le" />
        <column table="a" column="tituls_list" type="string" title="" as="tituls_list" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" />
        <column table="a" column="dat_reestr_check" type="date" title="" as="dat_reestr_check" />
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" />
        <column table="a" column="kor_time" type="date" title="" as="kor_time" />
        <column table="a" column="kor_name" type="string" title="" as="kor_name" />
        <column table="a" column="state_prizn" type="number" title="" as="state_prizn" />
        <column table="a" column="kod_subject" type="number" as="kod_subject" />
        <column table="a" column="inn" type="string" title="" as="inn" />
        <column table="a" column="kpp" type="string" title="" as="kpp" />
        <column table="a" column="kod_direct_form_reestr" type="number" as="kod_direct_form_reestr" />
        <column table="a" column="num_etap" type="string" title="" as="num_etap" />
        <column table="a" column="sum_etap_nds" type="number" title="" as="sum_etap_nds" />
        <column table="a" column="sum_etap" type="number" title="" as="sum_etap" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" />
        <column table="a" column="get_scan" type="number" title="" as="get_scan" />
        <column table="a" column="other_info" type="string" title="" as="other_info" />
        <column table="a" column="num_ad_pref" type="string" title="" as="num_ad_pref" />
        <column table="a" column="prim_uprav" type="string" title="" as="prim_uprav" />
        <column table="a" column="kod_addr" type="number" as="kod_addr" />
        <column table="a" column="kod_addr_text" type="string" as="kod_addr_text" />
        <column table="a" column="prim_tb" type="string" title="" as="prim_tb" />
        <column table="a" column="state_soglas" type="string" title="" as="state_soglas" />
        <column table="a" column="fio_soglas" type="string" title="" as="fio_soglas" />
        <column table="a" column="direct_soglas" type="string" title="" as="direct_soglas" />
        <column table="a" column="num_iter" type="number" title="" as="num_iter" />
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m" />
        <column table="a" column="pr_edit" type="number" title="" as="pr_edit" />
        <column table="a" column="access_doc" type="string" title="" as="access_doc" />
        <column table="a" column="user_ins_dog" type="string" title="" as="user_ins_dog" />
        <column table="a" column="user_ins_tb" type="string" title="" as="user_ins_tb" />
        <column table="a" column="user_prn_atp" type="string" title="" as="user_prn_atp" />
        <column table="a" column="addition" type="string" title="" as="addition" />
        <column table="a" column="kod_res" type="number" as="kod_res" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" />
        <column table="a" column="vid_usl_tp" type="string" title="" as="vid_usl_tp" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="with_akt_access" type="number" title="" as="with_akt_access" />
        <column table="a" column="lp_addr" type="string" title="" as="lp_addr" />
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="dat_end" type="date" title="" as="dat_end" />
        <column table="a" column="oplata" type="number" title="" as="oplata" />
        <column table="a" column="zadol" type="number" title="" as="zadol" />
        <column table="a" column="cad_num" type="string" title="" as="cad_num" />
        <column table="a" column="print_build_addr" type="number" title="" as="print_build_addr" />
        <column table="a" column="kod_proch_sv" type="string" as="kod_proch_sv" />
        <column table="a" column="state_color" type="string" title="" as="state_color" />
        <call function="rowid" as="is_aktstp_view_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_aktstp_view" as="a" />
      </from>
    </query>
    <query name="is_akt_all" class="1" timestamp="10.01.2019 19:51:28" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_akt_all.xml" haskeys="1">
      <select>
        <column table="a" column="kod_akt" type="number" comment="ID записи акта" key="1" as="kod_akt" />
        <column table="a" column="id_slice_akt" type="number" column-mandatory="1" title="" comment="ID среза" as="id_slice_akt" />
        <column table="a" column="pr_srez_akt" type="number" title="" comment="Признак среза" as="pr_srez_akt" />
        <column table="a" column="kn_customer" type="number" title="" comment="Код абонента" as="kn_customer" />
        <column table="a" column="customer" type="string" data-size="250" title="" comment="Наименование абонента" as="customer" />
        <column table="a" column="full_name" type="string" data-size="1000" title="" comment="1С Абонент" as="full_name" />
        <column table="a" column="num_dog_zayav" type="string" data-size="250" title="" comment="1С Номер договора" as="num_dog_zayav" />
        <column table="a" column="num_doc_buh" type="string" data-size="250" title="" comment="1С Документ" as="num_doc_buh" />
        <column table="a" column="kod_zayav" type="number" comment="Код заявки" as="kod_zayav" />
        <column table="a" column="num_req" type="string" data-size="50" title="" comment="Номер заявки" as="num_req" />
        <column table="a" column="kod_dop_contract" type="number" comment="ID записи в таблице договоров" as="kod_dop_contract" />
        <column table="a" column="kn_contract" type="number" title="" comment="Код договора" as="kn_contract" />
        <column table="a" column="num_ouco" type="string" data-size="20" title="" comment="Уникальный номер договора" as="num_ouco" />
        <column table="a" column="num_ad" type="string" data-size="250" title="" comment="Номер договора" as="num_ad" />
        <column table="a" column="kn_contr_kind" type="number" title="" comment="Код типа договора" as="kn_contr_kind" />
        <column table="a" column="contr_kind" type="string" data-size="250" title="" comment="Тип договора" as="contr_kind" />
        <column table="a" column="dt_contract" type="date" title="" comment="Дата начала действия АД" as="dt_contract" />
        <column table="a" column="contr_sumf" type="number" title="" comment="Стоимость АД" as="contr_sumf" />
        <column table="a" column="kod_org_active" type="number" comment="Код ДЗО заключения" as="kod_org_active" />
        <column table="a" column="org_active" type="string" data-size="250" title="" comment="ДЗО заключения" as="org_active" />
        <column table="a" column="kod_buh_akts" type="number" comment="ID записи бух. акта" as="kod_buh_akts" />
        <column table="a" column="org_active_akt" type="string" data-size="250" title="" comment="ДЗО акта" as="org_active_akt" />
        <column table="a" column="name_podr_akt" type="string" data-size="25" title="" comment="Подразделение акта" as="name_podr_akt" />
        <column table="a" column="vid_akt" type="number" title="" comment="Код вида акта" as="vid_akt" />
        <column table="a" column="vid_real" type="number" title="" comment="Код вида реализации" as="vid_real" />
        <column table="a" column="vid_buh_akt" type="string" data-size="10" title="" comment="Вид бух. акта" as="vid_buh_akt" />
        <column table="a" column="vid_atp" type="string" data-size="20" title="" comment="Вид АТП" as="vid_atp" />
        <column table="a" column="num_akt" type="string" data-size="20" title="" comment="Номер акта" as="num_akt" />
        <column table="a" column="dat_akt" type="date" title="" comment="Дата акта" as="dat_akt" />
        <column table="a" column="sum_akt_opl" type="number" title="" comment="Сумма по акту, закрытая оплатой" as="sum_akt_opl" />
        <column table="a" column="sum_akt_ost" type="number" title="" comment="Сумма по акту, не закрытая оплатой" as="sum_akt_ost" />
        <column table="a" column="sum_akt_total" type="number" title="" comment="Сумма по акту" as="sum_akt_total" />
        <column table="a" column="nal" type="number" title="" comment="В т.ч. НДС" as="nal" />
        <column table="a" column="tax" type="number" title="" comment="% НДС" as="tax" />
        <column table="a" column="kn_zone" type="number" title="" comment="Зона тех. присоединения" as="kn_zone" />
        <column table="a" column="kod_filial" type="number" comment="Код филиала" as="kod_filial" />
        <column table="a" column="filial" type="string" data-size="25" title="" comment="Филиал" as="filial" />
        <column table="a" column="kodres" type="number" title="" comment="Код РЭС" as="kodres" />
        <column table="a" column="name_rs" type="string" data-size="25" title="" comment="РЭС" as="name_rs" />
        <column table="a" column="load123" type="number" title="" comment="Мощность заявленная" as="load123" />
        <column table="a" column="load1" type="number" title="" comment="в т.ч. кат. 1" as="load1" />
        <column table="a" column="load2" type="number" title="" comment="в т.ч. кат. 2" as="load2" />
        <column table="a" column="load3" type="number" title="" comment="в т.ч. кат. 3" as="load3" />
        <column table="a" column="atp_load123" type="number" title="" comment="Мощность акта" as="atp_load123" />
        <column table="a" column="atp_load1" type="number" title="" comment="в т.ч. кат. 1" as="atp_load1" />
        <column table="a" column="atp_load2" type="number" title="" comment="в т.ч. кат. 2" as="atp_load2" />
        <column table="a" column="atp_load3" type="number" title="" comment="в т.ч. кат. 3" as="atp_load3" />
        <column table="a" column="kod_status" type="number" comment="Код статуса АД" as="kod_status" />
        <column table="a" column="status" type="string" data-size="25" title="" comment="Состояние АД" as="status" />
        <column table="a" column="srok_uslug" type="date" title="" comment="Срок оказания услуг" as="srok_uslug" />
        <column table="a" column="dat_end" type="date" title="" comment="Дата закрытия АД" as="dat_end" />
        <column table="a" column="kn_load_type" type="number" title="" comment="Код типа заявки" as="kn_load_type" />
        <column table="a" column="type_req" type="string" data-size="30" title="" comment="Тип заявки" as="type_req" />
        <column table="a" column="vrem_tp" type="number" title="" comment="Временное ТП" as="vrem_tp" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_akt_all" as="a" />
      </from>
    </query>
    <query name="is_akt_all_slice" class="1" timestamp="10.01.2019 20:10:37" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_akt_all_slice.xml" haskeys="1">
      <select>
        <column table="a" column="id_slice_akt" type="number" column-mandatory="1" title="" as="id_slice_akt" key="1" fixed="1" />
        <column table="a" column="dat_copy" type="date" title="Дата" as="dat_copy" key="0" />
        <column table="a" column="dat_copy_time" type="date" title="" as="dat_copy_time" key="0" />
        <column table="a" column="pr_manual" type="number" title="" as="pr_manual" key="0" />
        <column table="a" column="user_ad_all" type="string" data-size="130" title="" as="user_ad_all" key="0" />
        <column table="a" column="prim" type="string" data-size="200" title="" as="prim" key="0" />
        <column table="a" column="pr_srez_akt" type="number" title="" as="pr_srez_akt" key="0" />
        <call function="to_char" as="name" key="0">
          <column table="a" column="dat_copy_time" type="date" title="" />
          <const>'dd.mm.yyyy hh24:mi:ss'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_akt_all_slice" as="a" />
      </from>
    </query>
    <query name="is_atp_conn_point" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_atp_conn_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_atp_conn_point" type="number" column-mandatory="1" as="kod_atp_conn_point" key="1" fixed="1" />
        <column table="a" column="conn_point" type="string" data-size="1000" title="" comment="Наименование точки присоединения" as="conn_point" key="0" />
        <column table="a" column="kn_supply" type="number" title="" comment="Источник питания" as="kn_supply" key="0" />
        <column table="a" column="conn_point_descript" type="string" data-size="1000" title="" comment="Описание точки присоединения" as="conn_point_descript" key="0" />
        <column table="a" column="kn_voltage" type="number" title="" comment="Напряжение" as="kn_voltage" key="0" />
        <column table="a" column="max_power" type="number" title="" comment="Максимальная мощность" as="max_power" key="0" />
        <column table="a" column="category" type="number" title="" comment="Категория надежности" as="category" key="0" />
        <column table="a" column="max_power_trans" type="string" data-size="100" title="" comment="Величина номинальной мощности присоед. тр-ров" as="max_power_trans" key="0" />
        <column table="a" column="tan_fi" type="number" title="" comment="Предельное значения коэф.реакт.мощности" as="tan_fi" key="0" />
        <column table="a" column="protect_device" type="string" data-size="1000" title="" comment="Кстройства защиты" as="protect_device" key="0" />
        <column table="a" column="source_line" type="string" data-size="500" title="" comment="Наименование питающих линий" as="source_line" key="0" />
        <column table="a" column="kod_atp_object" type="number" as="kod_atp_object" reference="is_atp_objects" refcol="kod_atp_object" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" comment="Сслыка на таблицу АТП с доп.инф." as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="max_power1" type="number" title="" comment="макс мощность по 1 категории" as="max_power1" key="0" />
        <column table="a" column="max_power2" type="number" title="" comment="макс мощность по  2  категории" as="max_power2" key="0" />
        <column table="a" column="max_power3" type="number" title="" comment="макс мощность по 3  категории" as="max_power3" key="0" />
        <column table="a" column="voltage" type="string" data-size="100" title="" comment="Уровень напряжения текстом" as="voltage" key="0" />
        <column table="a" column="num" type="number" title="" comment="номер точки подкл" as="num" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительской точки для объединения" as="kod_parent" key="0" />
        <column table="a" column="max_power_new" type="number" title="" as="max_power_new" key="0" />
        <column table="a" column="max_power_1_new" type="number" title="" as="max_power_1_new" key="0" />
        <column table="a" column="max_power_2_new" type="number" title="" as="max_power_2_new" key="0" />
        <column table="a" column="max_power_3_new" type="number" title="" as="max_power_3_new" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_atp_conn_point" as="a" />
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="is_atp_conn_point">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
        <query name="is_atp_objects" as="kod_atp_object" join="left outer" dname="is_atp_conn_point">
          <call function="=">
            <column table="a" column="kod_atp_object" />
            <column table="kod_atp_object" column="kod_atp_object" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_atp_dop_info" class="1" timestamp="12.07.2017 14:20:28" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_atp_dop_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod_atp_dop_info" type="number" key="1" column-mandatory="1" as="kod_atp_dop_info" />
        <column table="a" column="kn_sert_power" type="number" title="" comment="код атп" as="kn_sert_power" reference="as_sert_power" refcol="kn_sert_power" />
        <column table="a" column="tp_name" type="string" title="" comment="точка подключения (редактируемая по атп)" data-size="1000" as="tp_name" />
        <column table="a" column="with_osob" type="number" title="" comment="признак &quot;с особенностями&quot;" as="with_osob" />
        <column table="a" column="prim" type="string" title="" comment="примечание" data-size="4000" as="prim" />
        <column table="a" column="date_buh_check_prizn" type="date" title="Дата принятия бухгалтерией" comment="дата бух (не нужна)" as="date_buh_check_prizn" />
        <column table="a" column="kod_titul_ip" type="number" comment="код титула объекта строительства" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="date_get_cust" type="date" title="" comment="дата передави заказчику (аналог даты передачи) (не нужна)" as="date_get_cust" />
        <column table="a" column="date_podpis_cust" type="date" comment="дата подписания абонентом" title="Дата подписания заявителем" as="date_podpis_cust" />
        <column table="a" column="date_podtverd" type="date" title="" comment="дата подтверждения" as="date_podtverd" />
        <column table="a" column="prizn_podtverd" type="number" title="" comment="признак подтверждения" as="prizn_podtverd" />
        <column table="a" column="date_reg_bd" type="date" title="" comment="дата рег-ции в бд" as="date_reg_bd" />
        <column table="a" column="num_porc" type="number" title="" as="num_porc" />
        <column table="a" column="dat_reestr" type="date" title="Дата реестра для бухгалтерии" as="dat_reestr" />
        <column table="a" column="num_tu" type="string" title="" comment="номер ту" data-size="100" as="num_tu" />
        <column table="a" column="date_tu" type="date" title="" comment="дата ту" as="date_tu" />
        <column table="a" column="other_info" type="string" title="" comment="прочая информация (тех блок)" data-size="1000" as="other_info" />
        <column table="a" column="kod_le_person" type="number" comment="представитель лэ для подписания акта" as="kod_le_person" reference="is_atp_le_person" refcol="kod_atp_le_person" />
        <column table="a" column="user_reg_bd" type="string" title="" comment="пользователь, создавший акт" data-size="50" as="user_reg_bd" />
        <column table="a" column="num_porc_check" type="number" title="" comment="номер порции для праления" as="num_porc_check" />
        <column table="a" column="dat_reestr_check" type="date" title="" comment="дата реестра для упраления" as="dat_reestr_check" />
        <column table="a" column="prim_uprav" type="string" title="" comment="примечания управления" data-size="500" as="prim_uprav" />
        <column table="a" column="kod_direct_form_reestr" type="number" comment="подразделение, формирующее реестр в бух." as="kod_direct_form_reestr" />
        <column table="a" column="num_etap" type="string" title="" comment="номер этапа" data-size="50" as="num_etap" />
        <column table="a" column="sum_etap" type="number" title="" comment="сумма этапа" as="sum_etap" />
        <column table="a" column="get_scan" type="number" title="" comment="необходимость скана" as="get_scan" />
        <column table="a" column="num_akt_auto_end" type="string" title="" comment="окончание номера акта тп при отправке в бух" data-size="50" as="num_akt_auto_end" />
        <column table="a" column="num_akt_auto" type="string" title="" comment="номер акта тп при отправке в бух" data-size="100" as="num_akt_auto" />
        <column table="a" column="pr_edit" type="number" title="" comment="признак редактирования акта при выставленной дате реестра бух" as="pr_edit" />
        <column table="a" column="user_ins_dog" type="string" title="" comment="пользователь по договорной части (попадает в подвал атп, заполняется по маршруту)" data-size="50" as="user_ins_dog" />
        <column table="a" column="user_ins_tb" type="string" title="" comment="пользователь по тех блоку (попадает в подвал атп, заполняется по маршруту)" data-size="50" as="user_ins_tb" />
        <column table="a" column="user_prn_atp" type="string" title="" comment="пользователь по печати шаблона (заполняется автоматом при печати шаблона)" data-size="50" as="user_prn_atp" />
        <column table="a" column="prim_tb" type="string" title="" comment="примечания тех блока" data-size="1000" as="prim_tb" />
        <column table="a" column="dt_delivery" type="date" title="Дата выдачи" comment="дата выдачи атп" as="dt_delivery" />
        <column table="a" column="kn_atp_case" type="number" title="" comment="вид атп - 1-врем, 2-пост." as="kn_atp_case" />
        <column table="a" column="dt_expire" type="string" title="" comment="срок действия врем атп" data-size="100" as="dt_expire" />
        <column table="a" column="kod_dop_contract" type="number" comment="код ад" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="dt_ask" type="date" title="" comment="дата запроса атп" as="dt_ask" />
        <column table="a" column="num_ask" type="string" title="" comment="номер запроса атп" data-size="200" as="num_ask" />
        <column table="a" column="addition" type="string" title="" comment="приложения" data-size="2000" as="addition" />
        <column table="a" column="atp_load1" type="number" title="" as="atp_load1" />
        <column table="a" column="atp_load2" type="number" title="" as="atp_load2" />
        <column table="a" column="atp_load3" type="number" title="" as="atp_load3" />
        <column table="a" column="doc_data" type="blob" title="" comment="скан документа" as="doc_data" />
        <column table="a" column="doc_name" type="string" title="" comment="имя файла скана" data-size="250" as="doc_name" />
        <column table="a" column="kod_spr_vid_usl" type="number" comment="вид оказания услуг тп" as="kod_spr_vid_usl" />
        <column table="a" column="with_akt_access" type="number" title="" comment="в соответствии с актом допуска" as="with_akt_access" />
        <column table="a" column="vid_usl_tp" type="string" title="" comment="вид оказания услуг тп" data-size="1000" as="vid_usl_tp" />
        <column table="a" column="file_reestr_name" type="string" title="" comment="наименование файла, отправленного в реестр" data-size="500" as="file_reestr_name" />
        <column table="a" column="regnum_ks" type="string" title="" comment="зарегестрирован в кс под номером" data-size="100" as="regnum_ks" />
        <column table="a" column="dt_reg_ks" type="date" title="" comment="дата регистрации в кс" as="dt_reg_ks" />
        <column table="a" column="cad_num" type="string" title="" comment="кадастровый номер" data-size="4000" as="cad_num" />
        <column table="a" column="user_create_reestr" type="string" title="" data-size="250" as="user_create_reestr" reference="is_rights" refcol="puser" />
        <column table="a" column="user_create_reestr_fio" type="string" title="" data-size="250" as="user_create_reestr_fio" />
        <column table="a" column="screen" type="blob" title="" as="screen" />
        <column table="a" column="print_build_addr" type="number" title="" comment="выводить строительный адрес на печать" as="print_build_addr" />
        <column table="a" column="date_send_to_buh" type="date" title="" as="date_send_to_buh" />
        <column table="a" column="date_excel" type="date" title="" as="date_excel" />
        <column table="a" column="doc_name_old" type="string" title="" comment="имя файла скана старое" data-size="250" as="doc_name_old" />
        <column table="a" column="sum_nds" type="number" title="" comment="сумма ндс этапа" as="sum_nds" />
        <column table="a" column="dat_create" type="date" title="" comment="дата первичного прикрепления скана" as="dat_create" />
        <column table="a" column="polzov_create" type="string" title="" comment="пользователь,прикрепивший скан" data-size="30" as="polzov_create" />
        <column table="a" column="pr_part_akt" type="number" title="" comment="признак частичного актирования" as="pr_part_akt" />
        <column table="a" column="date_signature_le" type="date" title="" as="date_signature_le" />
        <column table="a" column="kn_ser_power_pes" type="number" title="" comment="номер акта для пэс" as="kn_ser_power_pes" />
        <column table="a" column="kn_ser_power_spbes" type="number" title="" comment="номер акта для спбэс" as="kn_ser_power_spbes" />
        <column table="a" column="kod_person_le" type="number" as="kod_person_le" reference="is_person" refcol="kod_person" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" reference="c_dop_doc" refcol="kod_dop_doc" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="kod_doc_tu" type="number" as="kod_doc_tu" reference="c_doc_zpr" refcol="kod_doc" />
        <column table="a" column="kod_uved" type="number" as="kod_uved" reference="is_lkk_vip_tu" refcol="kod" />
        <column table="a" column="proc_nds" type="number" title="" as="proc_nds" />
        <call function="trim" title="Уникальный номер АТП (UID)" as="u_id">
          <call type="string" function="if">
            <call function="is not null">
              <column table="a" column="num_akt_auto_end" />
            </call>
            <call function="||">
              <column table="a" column="num_akt_auto" />
              <column table="a" column="num_akt_auto_end" />
            </call>
          </call>
        </call>
        <call type="number" function="if" title="Наличие скана подписанного АТП" as="pr_scan">
          <call function="is not null">
            <column table="a" column="doc_data" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_atp_dop_info" as="a" />
        <query name="is_rights" as="user_create_reestr" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="user_create_reestr" />
            <column table="user_create_reestr" column="puser" />
          </call>
        </query>
        <query name="is_atp_le_person" as="kod_le_person" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_le_person" />
            <column table="kod_le_person" column="kod_atp_le_person" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="is_atp_dop_info" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="as_sert_power" as="kn_sert_power" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kn_sert_power" />
            <column table="kn_sert_power" column="kn_sert_power" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_uved" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_uved" />
            <column table="kod_uved" column="kod" />
          </call>
        </query>
        <query name="c_dop_doc" as="kod_dop_doc" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_dop_doc" />
            <column table="kod_dop_doc" column="kod_dop_doc" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc_tu" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_doc_tu" />
            <column table="kod_doc_tu" column="kod_doc" />
          </call>
        </query>
        <query name="is_person" as="kod_person_le" join="left outer" dname="is_atp_dop_info">
          <call function="=">
            <column table="a" column="kod_person_le" />
            <column table="kod_person_le" column="kod_person" />
          </call>
        </query>
        <query name="is_dop_contract" join="left outer" as="kod_dop_contract" dname="is_atp_dop_info" title="Абонентские договоры">
          <call function="=">
            <column table="kod_dop_contract" column="kod_dop_contract" />
            <column table="a" column="kod_dop_contract">2</column>
          </call>
        </query>
        <query name="is_aktstp_view" join="left outer" as="is_aktstp_view" dname="is_atp_dop_info">
          <call function="=">
            <column table="is_aktstp_view" column="kod_atp_dop_info" />
            <column table="a" column="kod_atp_dop_info">2</column>
          </call>
        </query>
        <query name="buh_akts_atp" join="left outer" as="kod_buh_akt" dname="is_atp_dop_info">
          <call function="=">
            <column table="kod_buh_akt" column="uid_cod" />
            <column table="this" column="u_id">2</column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_atp_kontacts" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_atp_kontacts.xml" haskeys="1">
      <select>
        <column table="a" column="kod_atp_kontact" type="number" column-mandatory="1" as="kod_atp_kontact" key="1" fixed="1" />
        <column table="a" column="kod_dop_contr_dubl" type="number" as="kod_dop_contr_dubl" reference="is_dop_contr_dubl" refcol="kod_dop_contr_dubl" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="kod_kontact" type="number" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="kod_notif" type="number" as="kod_notif" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="pr_send" type="number" title="" as="pr_send" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_atp_kontacts" as="a" />
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="is_atp_kontacts" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
        <query name="is_dop_contr_dubl" as="kod_dop_contr_dubl" join="left outer" dname="is_atp_kontacts">
          <call function="=">
            <column table="a" column="kod_dop_contr_dubl" />
            <column table="kod_dop_contr_dubl" column="kod_dop_contr_dubl" />
          </call>
        </query>
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="is_atp_kontacts">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_notif" join="left outer" dname="is_atp_kontacts">
          <call function="=">
            <column table="a" column="kod_notif" />
            <column table="kod_notif" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_atp_objects" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_atp_objects.xml" haskeys="1">
      <select>
        <column table="a" column="kod_atp_object" type="number" column-mandatory="1" as="kod_atp_object" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="1000" title="Наименование" comment="наименование объекта" as="name" key="0" />
        <column table="a" column="kod_addr" type="number" comment="код адреса объекта" as="kod_addr" key="0" />
        <column table="a" column="build_addr" type="string" data-size="1000" title="" comment="строительный адрес объекта (текст)" as="build_addr" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="spec" type="string" data-size="1500" title="" as="spec" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_atp_objects" as="a" />
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="is_atp_objects">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_claims" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_claims.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_lawyer" type="number" comment="Код юриста" as="kod_lawyer" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="dat_reg" type="date" title="" comment="Дата подачи док-та в суд" as="dat_reg" key="0" />
        <column table="a" column="dat_law" type="date" title="" comment="Дата принятия док-та в суде" as="dat_law" key="0" />
        <column table="a" column="num_deal" type="string" data-size="500" title="" comment="№ дела" as="num_deal" key="0" />
        <column table="a" column="kod_type_claims" type="number" comment="Тип документа поданого в суд " as="kod_type_claims" reference="is_type_claim" refcol="kod" key="0" />
        <column table="a" column="kod_subject" type="number" comment="Предмет спора" as="kod_subject" reference="is_claim_subject" refcol="kod" key="0" />
        <column table="a" column="dat_plan" type="date" title="" comment="Планируемая дата судебного разбирательства" as="dat_plan" key="0" />
        <column table="a" column="kod_court" type="number" comment="Суд/судебный участок" as="kod_court" key="0" />
        <column table="a" column="num_doc_return" type="string" data-size="500" title="" comment="№ документа возврата (не используется)" as="num_doc_return" key="0" />
        <column table="a" column="dat_return_claim" type="date" title="" comment="Дата возврата иска" as="dat_return_claim" key="0" />
        <column table="a" column="kod_person_sign" type="number" comment="За чье подписью сделан возврат (не используется)" as="kod_person_sign" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="osnov_return" type="string" data-size="250" title="" comment="Основание возврата" as="osnov_return" key="0" />
        <column table="a" column="dat_prin_akt" type="date" title="" comment="Дата принятия судебного акта" as="dat_prin_akt" key="0" />
        <column table="a" column="kod_sud_akt" type="number" comment="Судебный акт и  результат рассмотрения" as="kod_sud_akt" reference="is_akt_result" refcol="kod" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="50" title="" as="u_c" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="prim" type="string" data-size="500" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="kod_contractor" type="number" comment="Исполнитель" as="kod_contractor" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="sum_dolg" type="number" title="" comment="Присужденная сумма долга" as="sum_dolg" key="0" />
        <column table="a" column="peni" type="number" title="" comment="Присужденное пени" as="peni" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="Присужденный штраф" as="shtraf" key="0" />
        <column table="a" column="proc" type="number" title="" comment="Присужденные проценты за пользование чужими средствами" as="proc" key="0" />
        <column table="a" column="fee_otvet" type="number" title="" comment="Пошлина ответчика" as="fee_otvet" key="0" />
        <column table="a" column="fee_isc" type="number" title="" comment="Пошлина исца" as="fee_isc" key="0" />
        <column table="a" column="sud_izd" type="number" title="" comment="Судебные издержки" as="sud_izd" key="0" />
        <column table="a" column="num_isp_list" type="string" data-size="500" title="" comment="№ исполнительного листа" as="num_isp_list" key="0" />
        <column table="a" column="dat_vid_isp_list" type="date" title="" comment="Дата выдачи исполнительного листа" as="dat_vid_isp_list" key="0" />
        <column table="a" column="dat_on_isp_list" type="date" title="" comment="Дата вступления в силу исполнительного листа" as="dat_on_isp_list" key="0" />
        <column table="a" column="prim_isp_list" type="string" data-size="300" title="" comment="Примечание для исполнительного листа" as="prim_isp_list" key="0" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="pr_in" type="number" title="" comment="Признак вх/исх документа" as="pr_in" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_claims" refcol="kod" key="0" />
        <column table="a" column="kod_subject_pret" type="string" data-size="1000" comment="Предмет претензии" as="kod_subject_pret" key="0" />
        <column table="a" column="dat_pret" type="date" title="" comment="Дата поступления претензии" as="dat_pret" key="0" />
        <column table="a" column="kod_status_pret" type="number" comment="Состояние претензии" as="kod_status_pret" key="0" />
        <column table="a" column="file_pret" type="number" title="" comment="Файл претензии" as="file_pret" key="0" />
        <column table="a" column="sum_pret" type="number" title="" comment="Сумма претензии" as="sum_pret" key="0" />
        <column table="a" column="proc_pret" type="number" title="" comment="Процент претензии" as="proc_pret" key="0" />
        <column table="a" column="srok_pret" type="date" title="" comment="Срок претензии" as="srok_pret" key="0" />
        <column table="a" column="dat_otv_pret" type="date" title="" comment="Дата ответа на претензию" as="dat_otv_pret" key="0" />
        <column table="a" column="body_otv_pret" type="string" data-size="1000" title="" comment="Содержание ответа на претензию" as="body_otv_pret" key="0" />
        <column table="a" column="prim_pret" type="string" data-size="1000" title="" comment="Примечание к претензии" as="prim_pret" key="0" />
        <column table="a" column="dat_close_pret" type="date" title="" comment="Дата закрытия претензии" as="dat_close_pret" key="0" />
        <column table="a" column="num_pret" type="string" data-size="1000" title="" comment="Номер претензии" as="num_pret" key="0" />
        <column table="a" column="kod_lawyer_isp" type="number" comment="Юрист (исп. лист)" as="kod_lawyer_isp" key="0" />
        <column table="a" column="dat_vid_list_isp" type="date" title="" comment="Дата направления в ПСП" as="dat_vid_list_isp" key="0" />
        <column table="a" column="kod_court_isp" type="number" comment="Номер ПСП" as="kod_court_isp" key="0" />
        <column table="a" column="num_post_list_isp" type="string" data-size="1000" title="" comment="Номер постановления (исп. лист)" as="num_post_list_isp" key="0" />
        <column table="a" column="kod_type_isp" type="number" comment="Документ(тип) исп. листа" as="kod_type_isp" key="0" />
        <column table="a" column="kod_subject_isp" type="string" data-size="1000" comment="Предмет иска (исп. лист)" as="kod_subject_isp" key="0" />
        <column table="a" column="num_doc_return_isp" type="string" data-size="1000" title="" comment="Номер док возврата (исп. лист)" as="num_doc_return_isp" key="0" />
        <column table="a" column="dat_return_claim_isp" type="date" title="" comment="Дата возврата(исп. лист)" as="dat_return_claim_isp" key="0" />
        <column table="a" column="kod_person_sign_isp" type="number" comment="За чьей подписью возврат(исп. лист)" as="kod_person_sign_isp" key="0" />
        <column table="a" column="osnov_return_isp" type="string" data-size="1000" title="" comment="Основание для возврата(исп. лист)" as="osnov_return_isp" key="0" />
        <column table="a" column="prim_list_isp" type="string" data-size="3000" title="" comment="Примечание (исп. лист)" as="prim_list_isp" key="0" />
        <column table="a" column="name_claim" type="string" data-size="100" title="" comment="Наименование претензия/суд произв./исп, произв" as="name_claim" key="0" />
        <column table="a" column="lvl" type="number" title="" as="lvl" key="0" />
        <column table="a" column="kod_group" type="number" as="kod_group" key="0" />
        <column table="a" column="dat_calc" type="date" title="" comment="Дата последнего рассчета процентов" as="dat_calc" key="0" />
        <column table="a" column="penalty" type="number" title="" as="penalty" key="0" />
        <column table="a" column="proc_penalty" type="number" title="" as="proc_penalty" key="0" />
        <column table="a" column="link" type="string" data-size="1000" title="" as="link" key="0" />
        <column table="a" column="contr_pret" type="string" data-size="200" title="" as="contr_pret" key="0" />
        <column table="a" column="num_posh" type="string" data-size="200" title="" as="num_posh" key="0" />
        <column table="a" column="dat_posh" type="date" title="" as="dat_posh" key="0" />
        <column table="a" column="sum_posh" type="number" title="" as="sum_posh" key="0" />
        <column table="a" column="kod_signer" type="number" as="kod_signer" key="0" />
        <column table="a" column="stavka" type="number" title="" as="stavka" key="0" />
        <column table="a" column="kod_reason_return" type="number" as="kod_reason_return" key="0" />
        <column table="a" column="kod_kurator" type="number" as="kod_kurator" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="dat_pause" type="date" title="" as="dat_pause" key="0" />
        <column table="a" column="dat_appeal" type="date" title="" as="dat_appeal" key="0" />
        <column table="a" column="dat_order_list" type="date" title="" as="dat_order_list" key="0" />
        <column table="a" column="loss" type="number" title="" comment="Дата вступления в силу исполнительного листа (не используется)" as="loss" key="0" />
        <column table="a" column="link_site" type="string" data-size="1000" title="" comment="Ссылка на сайт суда" as="link_site" key="0" />
        <column table="a" column="dat_zadolg" type="date" title="" comment="дата задолженности" as="dat_zadolg" key="0" />
        <column table="a" column="srok_otv_pret" type="date" title="" comment="Срок ответа на претензию" as="srok_otv_pret" key="0" />
        <column table="a" column="dat_calc_new" type="date" title="" as="dat_calc_new" key="0" />
        <column table="a" column="penalty_str" type="string" data-size="500" title="" as="penalty_str" key="0" />
        <column table="a" column="dat_calc_penalty" type="date" title="" as="dat_calc_penalty" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_claims" as="a" />
        <query name="is_creditors" as="kn_customer" join="left outer" dname="is_claims" title="Контрагенты">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="e_code" />
          </call>
        </query>
        <query name="is_person" as="kod_lawyer" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_lawyer" />
            <column table="kod_lawyer" column="kod_person" />
          </call>
        </query>
        <query name="is_claims" as="kod_parent" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
        <query name="is_claim_subject" as="kod_subject" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod" />
          </call>
        </query>
        <query name="is_akt_result" as="kod_sud_akt" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_sud_akt" />
            <column table="kod_sud_akt" column="kod" />
          </call>
        </query>
        <query name="is_type_claim" as="kod_type_claims" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_type_claims" />
            <column table="kod_type_claims" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_claims" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_person" as="kod_person_sign" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_person_sign" />
            <column table="kod_person_sign" column="kod_person" />
          </call>
        </query>
        <query name="is_person" as="kod_contractor" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_contractor" />
            <column table="kod_contractor" column="kod_person" />
          </call>
        </query>
        <query name="is_person" as="kod_kurator" join="left outer" dname="is_claims">
          <call function="=">
            <column table="a" column="kod_kurator" />
            <column table="kod_kurator" column="kod_person" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_complaints" class="1" timestamp="20.02.2019 13:19:30" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_complaints.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" comment="Родительское обращение" as="kod_parent" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="kod_dop_contract" type="number" comment="Код договора" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kn_customer" type="number" title="" comment="Код контрагента" as="kn_customer" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="type_link" type="number" title="" comment="Тип связывания: 1 - договор, 2 - заявка, 3 - контрагент, 4 - прочее" as="type_link" key="0" />
        <column table="a" column="num_reg" type="string" data-size="50" title="" comment="№ регистрации" as="num_reg" key="0" />
        <column table="a" column="date_reg" type="date" title="" comment="Дата регистрации" as="date_reg" key="0" />
        <column table="a" column="num_doc_in" type="string" data-size="50" title="" comment="№ Вход. документа" as="num_doc_in" key="0" />
        <column table="a" column="dat_doc_in" type="date" title="" comment="Дата Вход. документа" as="dat_doc_in" key="0" />
        <column table="a" column="kod_dop_doc_in" type="number" comment="Вход. документ" as="kod_dop_doc_in" reference="c_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="num_doc_out" type="string" data-size="50" title="" comment="№ Исх. документа" as="num_doc_out" key="0" />
        <column table="a" column="dat_doc_out" type="date" title="" comment="Дата Исх. документа" as="dat_doc_out" key="0" />
        <column table="a" column="kod_dop_doc_out" type="number" comment="Исх. документ" as="kod_dop_doc_out" reference="c_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="kod_person" type="number" comment="Куратор" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="type_compl" type="number" title="" comment="Тип жалобы: 1 - первичная, 2 - вторичная" as="type_compl" key="0" />
        <column table="a" column="kod_first_compl" type="number" comment="Код первичной жалобы" as="kod_first_compl" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="str_first_compl" type="string" data-size="250" title="" comment="№ первичной жалобы" as="str_first_compl" key="0" />
        <column table="a" column="pr_group_compl" type="number" title="" comment="Признак групперовки жалоб" as="pr_group_compl" key="0" />
        <column table="a" column="kod_subject" type="number" comment="Тема" as="kod_subject" key="0" />
        <column table="a" column="kod_subtheme" type="number" comment="Подтема" as="kod_subtheme" key="0" />
        <column table="a" column="kod_type_source" type="number" comment="Канал поступления" as="kod_type_source" reference="is_complaints_type_source" refcol="kod" key="0" />
        <column table="a" column="kod_form_source" type="number" comment="Форма поступления" as="kod_form_source" reference="is_complaints_form_source" refcol="kod" key="0" />
        <column table="a" column="cause" type="string" data-size="4000" title="" comment="Причина" as="cause" key="0" />
        <column table="a" column="date_fakt" type="date" title="" comment="Дата факта исполнения корректирующих мероприятий" as="date_fakt" key="0" />
        <column table="a" column="prim" type="string" data-size="4000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="Дата создания" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="50" title="" comment="Пользватель создавший" as="u_c" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата изменения" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" comment="Пользватель изменивший" as="u_m" key="0" />
        <column table="a" column="kod_zayav" type="number" comment="Заявка" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="num_asud" type="string" data-size="250" title="" comment="№ АСУД" as="num_asud" key="0" />
        <column table="a" column="date_asud" type="date" title="" comment="Дата АСУД" as="date_asud" key="0" />
        <column table="a" column="srok" type="date" title="" comment="Срок" as="srok" key="0" />
        <column table="a" column="date_complete" type="date" title="" comment="Дата выполнения" as="date_complete" key="0" />
        <column table="a" column="date_anul" type="date" title="" comment="Дата аннулирования" as="date_anul" key="0" />
        <column table="a" column="num_uniq" type="number" title="" as="num_uniq" key="0" />
        <column table="a" column="kod_region" type="number" comment="Город область : 1 - область, 0 - город" as="kod_region" key="0" />
        <column table="a" column="kod_filial_in" type="number" comment="Филиал принявший обращение" as="kod_filial_in" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_filial_out" type="number" comment="Филиал обрабатывающий обращение" as="kod_filial_out" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_res_out" type="number" comment="Район обрабатывающий обращение" as="kod_res_out" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_res_in" type="number" comment="Район принявший обращение" as="kod_res_in" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="pr_rationale" type="number" title="" comment="Признак обоснованности" as="pr_rationale" key="0" />
        <column table="a" column="date_plan" type="date" title="" comment="Плановая дата исполнения корректирущих мероприятий" as="date_plan" key="0" />
        <column table="a" column="date_first_compl" type="date" title="" comment="Дата первичного обращения" as="date_first_compl" key="0" />
        <column table="a" column="pr_need_events" type="number" title="" comment="Требуются мероприятия" as="pr_need_events" key="0" />
        <column table="a" column="kod_result" type="number" comment="Результат рассмотрения" as="kod_result" reference="is_complaints_result" refcol="kod" key="0" />
        <column table="a" column="date_result" type="date" title="" comment="Дата выстовления результата" as="date_result" key="0" />
        <column table="a" column="pr_authorities" type="number" title="" comment="Уточнение для органов власти" as="pr_authorities" key="0" />
        <column table="a" column="pr_qualification" type="number" title="" comment="Уточнение по условиям договора" as="pr_qualification" key="0" />
        <column table="a" column="kod_boss" type="number" comment="Руководитель" as="kod_boss" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="str_adr" type="string" data-size="1500" title="" comment="Адрес" as="str_adr" key="0" />
        <column table="a" column="kod_vid_compl" type="number" comment="Вид обращения" as="kod_vid_compl" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="pr_important" type="number" title="" comment="Особая важность" as="pr_important" key="0" />
        <column table="a" column="kod_kontact" type="number" comment="Контактный e-mail" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="phone" type="string" data-size="100" title="" as="phone" key="0" />
        <column table="a" column="e_mail" type="string" data-size="100" title="" as="e_mail" key="0" />
        <column table="a" column="str_message" type="string" data-size="4000" title="" comment="Сообщение для отправки" as="str_message" key="0" />
        <column table="a" column="date_sz" type="date" title="" comment="Дата СЗ" as="date_sz" key="0" />
        <column table="a" column="date_vks" type="date" title="" comment="Дата ВКС" as="date_vks" key="0" />
        <column table="a" column="person_get_compl" type="string" data-size="1500" title="" comment="Подал заявку" as="person_get_compl" key="0" />
        <column table="a" column="phone_get_compl" type="string" data-size="100" title="" comment="Телефон, подавшего заявку" as="phone_get_compl" key="0" />
        <column table="a" column="kod_person_in" type="number" comment="Принявший обращение" as="kod_person_in" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_direct_in" type="number" comment="Подразделение принявшее обращение" as="kod_direct_in" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="date_close" type="date" title="" comment="Дата закрытия" as="date_close" key="0" />
        <column table="a" column="kod_last_call" type="number" comment="ID последнего обзвона" as="kod_last_call" reference="is_complaints_call" refcol="kod" key="0" />
        <column table="a" column="dat_to_work" type="date" title="" comment="Дата направления обращения в работу" as="dat_to_work" key="0" />
        <column table="a" column="dat_info_ready" type="date" title="" comment="Дата перехода в статус &quot;Информация по обращению подготовлена&quot;" as="dat_info_ready" key="0" />
        <column table="a" column="srok_count_days" type="number" title="" comment="Кол-во рабочих дней" as="srok_count_days" key="0" />
        <column table="a" column="kod_type_send" type="number" comment="Способ оповещения" as="kod_type_send" reference="is_spr_prior_notific_mes" refcol="kod_mes" key="0" />
        <column table="a" column="pr_import" type="number" title="" as="pr_import" key="0" />
        <column table="a" column="kod_direct_z" type="number" as="kod_direct_z" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_res_z" type="number" as="kod_res_z" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="date_portal" type="date" title="" as="date_portal" key="0" />
        <column table="a" column="num_portal" type="string" data-size="500" title="" as="num_portal" key="0" />
        <column table="a" column="user_id" type="number" title="" as="user_id" reference="vc_user_login" refcol="user_id" key="0" />
        <column table="a" column="str_name" type="string" data-size="1500" title="" as="str_name" key="0" />
        <column table="a" column="prior_send" type="number" title="" as="prior_send" key="0" />
        <column table="a" column="lkk_num_zayav" type="string" data-size="30" title="" as="lkk_num_zayav" key="0" />
        <column table="a" column="lkk_petition_type" type="number" title="" as="lkk_petition_type" key="0" />
        <column table="a" column="kod_type_source_lkk" type="number" as="kod_type_source_lkk" key="0" />
        <column table="a" column="lkk_theme_id" type="number" title="" as="lkk_theme_id" key="0" />
        <call function="qg_state_lkk.f_state_by_compl" type="number" as="status" key="0">
          <column table="this" column="kod" />
        </call>
        <column table="a" column="kod_district" type="number" as="kod_district" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_complaints" as="a" />
        <query name="c_dop_doc" as="kod_dop_doc_out" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_dop_doc_out" />
            <column table="kod_dop_doc_out" column="kod_dop_doc" />
          </call>
        </query>
        <query name="is_complaints" as="kod_first_compl" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_first_compl" />
            <column table="kod_first_compl" column="kod" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial_in" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial_in" />
            <column table="kod_filial_in" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct_z" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct_z" />
            <column table="kod_direct_z" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res_z" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res_z" />
            <column table="kod_res_z" column="kod_direct" />
          </call>
        </query>
        <query name="vc_user_login" as="user_id" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="user_id" />
            <column table="user_id" column="user_id" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial_out" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial_out" />
            <column table="kod_filial_out" column="kod_direct" />
          </call>
        </query>
        <query name="is_complaints_form_source" as="kod_form_source" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_form_source" />
            <column table="kod_form_source" column="kod" />
          </call>
        </query>
        <query name="is_complaints" as="kod_parent" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_complaints_result" as="kod_result" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res_in" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res_in" />
            <column table="kod_res_in" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res_out" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res_out" />
            <column table="kod_res_out" column="kod_direct" />
          </call>
        </query>
        <query name="is_complaints_subject" as="kod_subject" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod" />
          </call>
        </query>
        <query name="is_complaints_subject" as="kod_subtheme" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_subtheme" />
            <column table="kod_subtheme" column="kod" />
          </call>
        </query>
        <query name="is_settings_tema_lkk" as="is_settings_tema_lkk" join="left outer" dname="is_complaints">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_subtheme" />
              <column table="is_settings_tema_lkk" column="kod_subtheme" />
            </call>
            <call function="=">
              <column column="kod_subject" table="a" />
              <column column="kod_subject" table="is_settings_tema_lkk" />
            </call>
          </call>
        </query>
        <query name="is_complaints_type_source" as="kod_type_source" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_type_source" />
            <column table="kod_type_source" column="kod" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="is_person" as="kod_boss" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_boss" />
            <column table="kod_boss" column="kod_person" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="is_complaints" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_vid_compl" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_vid_compl" />
            <column table="kod_vid_compl" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_person" as="kod_person_in" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_person_in" />
            <column table="kod_person_in" column="kod_person" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct_in" join="left outer" dname="is_complaints" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct_in" />
            <column table="kod_direct_in" column="kod_direct" />
          </call>
        </query>
        <query name="is_complaints_call" as="kod_last_call" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_last_call" />
            <column table="kod_last_call" column="kod" />
          </call>
        </query>
        <query name="is_spr_prior_notific_mes" as="kod_type_send" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_type_send" />
            <column table="kod_type_send" column="kod_mes" />
          </call>
        </query>
        <query name="is_creditors" as="kn_customer" join="left outer" dname="is_complaints" title="Контрагенты">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="e_code" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_complaints" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="c_dop_doc" as="kod_dop_doc_in" join="left outer" dname="is_complaints">
          <call function="=">
            <column table="a" column="kod_dop_doc_in" />
            <column table="kod_dop_doc_in" column="kod_dop_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_complaints_call" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_complaints_call.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" comment="Родительское обращение" as="kod_parent" reference="is_complaints_call" refcol="kod" key="0" />
        <column table="a" column="kod_zayav" type="number" comment="Заявка" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_dop_contract" type="number" comment="Код договора" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kn_customer" type="number" title="" comment="Код контрагента" as="kn_customer" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="num_reg" type="string" data-size="50" title="" comment="№ регистрации" as="num_reg" key="0" />
        <column table="a" column="date_reg" type="date" title="" comment="Дата регистрации" as="date_reg" key="0" />
        <column table="a" column="kod_type_event" type="number" comment="Тип дейсвтия" as="kod_type_event" reference="is_dop_contr_task_type" refcol="kod" key="0" />
        <column table="a" column="date_repeat" type="date" title="" comment="Дата дейтсвия" as="date_repeat" key="0" />
        <column table="a" column="kod_dop_doc" type="number" comment="Скан копия" as="kod_dop_doc" reference="c_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="kod_person" type="number" comment="Совершающий дейтсвие" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_kontact" type="number" comment="Контактное лицо" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="prim" type="string" data-size="4000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="srok" type="date" title="" comment="Планова дата" as="srok" key="0" />
        <column table="a" column="date_result" type="date" title="" comment="Дата результата" as="date_result" key="0" />
        <column table="a" column="kod_result" type="number" comment="Результат" as="kod_result" reference="is_dop_contr_task_result" refcol="kod" key="0" />
        <column table="a" column="str_message" type="string" data-size="4000" title="" comment="Текст сообщения" as="str_message" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата изменения" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" comment="Пользватель изменивший" as="u_m" key="0" />
        <column table="a" column="date_anul" type="date" title="" as="date_anul" key="0" />
        <column table="a" column="phone" type="string" data-size="100" title="" comment="Телефон" as="phone" key="0" />
        <column table="a" column="e_mail" type="string" data-size="100" title="" comment="Эл. почта" as="e_mail" key="0" />
        <column table="a" column="pr_double_phone" type="number" title="" comment="Наличие заявок, совпавших по номеру телефона контактного лица" as="pr_double_phone" key="0" />
        <column table="a" column="kod_source" type="number" comment="Строка по которой создана текущая" as="kod_source" reference="is_complaints_call" refcol="kod" key="0" />
        <column table="a" column="kod_compl" type="number" comment="Код обращения" as="kod_compl" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="50" title="" as="u_c" key="0" />
        <column table="a" column="kod_tema" type="number" as="kod_tema" reference="is_compl_call_tema" refcol="kod" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="str_fio_contact" type="string" data-size="250" title="" as="str_fio_contact" key="0" />
        <column table="a" column="str_adr" type="string" data-size="1500" title="" as="str_adr" key="0" />
        <column table="a" column="kod_vo" type="number" as="kod_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="kod_uved" type="number" as="kod_uved" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="num_asud" type="string" data-size="250" title="" as="num_asud" key="0" />
        <column table="a" column="group_id" type="number" title="" as="group_id" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_complaints_call" as="a" />
        <query name="is_compl_call_tema" as="kod_tema" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_tema" />
            <column table="kod_tema" column="kod" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_uved" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_uved" />
            <column table="kod_uved" column="kod" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_vo" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_vo" />
            <column table="kod_vo" column="kod" />
          </call>
        </query>
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="is_complaints_call" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
        <query name="is_complaints" as="kod_compl" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_compl" />
            <column table="kod_compl" column="kod" />
          </call>
        </query>
        <query name="is_creditors" as="kn_customer" join="left outer" dname="is_complaints_call" title="Контрагенты">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="e_code" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_complaints_call" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="c_dop_doc" as="kod_dop_doc" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_dop_doc" />
            <column table="kod_dop_doc" column="kod_dop_doc" />
          </call>
        </query>
        <query name="is_complaints_call" as="kod_parent" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_dop_contr_task_result" as="kod_result" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod" />
          </call>
        </query>
        <query name="is_complaints_call" as="kod_source" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_source" />
            <column table="kod_source" column="kod" />
          </call>
        </query>
        <query name="is_dop_contr_task_type" as="kod_type_event" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_type_event" />
            <column table="kod_type_event" column="kod" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_complaints_call">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_complaints_form_source" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_complaints_form_source.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="dat_del" type="date" title="" as="dat_del" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_complaints_form_source" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_complaints_form_source" as="a" />
        <query name="is_complaints_form_source" as="kod_parent" join="left outer" dname="is_complaints_form_source">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_complaints_subject" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_complaints_subject.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_complaints_subject" refcol="kod" key="0" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="dat_del" type="date" title="" as="dat_del" key="0" />
        <column table="a" column="pr_report" type="number" title="" as="pr_report" key="0" />
        <column table="a" column="sub_group" type="number" title="" as="sub_group" key="0" />
        <column table="a" column="kod_vid_compl" type="number" as="kod_vid_compl" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_complaints_subject" as="a" />
        <query name="is_spr_doc" as="kod_vid_compl" join="left outer" dname="is_complaints_subject">
          <call function="=">
            <column table="a" column="kod_vid_compl" />
            <column table="kod_vid_compl" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_complaints_subject" as="kod_parent" join="left outer" dname="is_complaints_subject">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_complaints_type_source" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_complaints_type_source.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_complaints_type_source" refcol="kod" key="0" />
        <column table="a" column="pr_default" type="number" title="" as="pr_default" key="0" />
        <column table="a" column="dat_del" type="date" title="" as="dat_del" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_complaints_type_source" as="a" />
        <query name="is_complaints_type_source" as="kod_parent" join="left outer" dname="is_complaints_type_source">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_creditors" title="Контрагенты" class="1" timestamp="08.05.2020 21:31:33" security-id="2" table-code="2" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_creditors.xml" haskeys="1">
      <select>
        <column table="a" column="e_code" type="number" title="" column-mandatory="1" as="e_code" key="1" fixed="1" />
        <column table="a" column="kod_fs" type="number" as="kod_fs" key="0" />
        <column table="a" column="name" type="string" title="Наименование контрагента" comment="наименование" is-fact="1" agg="stragg" as="name" fact="is_creditors_name" key="0" />
        <column table="a" column="director" type="string" title="" comment="директор" as="director" key="0" />
        <column table="a" column="phone" type="string" title="Телефон" comment="телефон" as="phone" key="0" />
        <column table="a" column="fax" type="string" title="" comment="факс" as="fax" key="0" />
        <column table="a" column="sot_phone" type="string" title="" comment="мобильный" as="sot_phone" key="0" />
        <column table="a" column="teletype" type="string" title="" as="teletype" key="0" />
        <column table="a" column="telex" type="string" title="" as="telex" key="0" />
        <column table="a" column="inn" type="string" title="ИНН" comment="ИНН" as="inn" key="0" />
        <column table="a" column="okpo" type="string" title="" comment="окро" as="okpo" key="0" />
        <column table="a" column="okonh" type="string" title="" as="okonh" key="0" />
        <column table="a" column="license" type="string" title="" as="license" key="0" />
        <column table="a" column="grantor" type="string" title="" as="grantor" key="0" />
        <column table="a" column="lic_date" type="date" title="" as="lic_date" key="0" />
        <column table="a" column="lic_term" type="date" title="" as="lic_term" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="kodd_fiz" type="number" title="" as="kodd_fiz" key="0" />
        <column table="a" column="kodd_ur" type="number" title="" as="kodd_ur" key="0" />
        <column table="a" column="prizn_deb" type="number" title="" as="prizn_deb" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="ur_lico" type="number" comment="0-физ., 1- юр.лицо" title="Признак -  юр. лицо" as="ur_lico" key="0" />
        <column table="a" column="kodm_fiz" type="number" title="" as="kodm_fiz" key="0" />
        <column table="a" column="kodu_fiz" type="number" title="" as="kodu_fiz" key="0" />
        <column table="a" column="kodm_ur" type="number" title="" as="kodm_ur" key="0" />
        <column table="a" column="kodu_ur" type="number" title="" as="kodu_ur" key="0" />
        <column table="a" column="prizn_energy" type="number" title="" comment="признак отн-я к э/системе" as="prizn_energy" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kpp" type="string" title="КПП" comment="КПП" as="kpp" key="0" />
        <column table="a" column="kod_adr_ur" type="number" column-mandatory="1" as="kod_adr_ur" key="0" />
        <column table="a" column="kod_adr_fiz" type="number" column-mandatory="1" as="kod_adr_fiz" key="0" />
        <column table="a" column="tip_adr_ur" type="number" title="" as="tip_adr_ur" key="0" />
        <column table="a" column="tip_adr_fiz" type="number" title="" as="tip_adr_fiz" key="0" />
        <column table="a" column="adr_text" type="string" title="" comment="юр.адрес текстом" as="adr_text" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в бд" as="d_c" key="0" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" key="0" />
        <column table="a" column="pr_zadol" type="number" title="" comment="признак должника" as="pr_zadol" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="срок ограничения дог-ных отношений" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="срок ограничения дог-ных отношений" as="dat_po" key="0" />
        <column table="a" column="pr_kido" type="number" title="" comment="1- наличие записи в кидо" as="pr_kido" key="0" />
        <column table="a" column="pr_con" type="number" title="" comment="1 - наличие записи в присоед" as="pr_con" key="0" />
        <column table="a" column="adr_post" type="string" title="" comment="почтовый адрес" as="adr_post" key="0" />
        <column table="a" column="name_all" type="string" title="" comment="фио" as="name_all" key="0" />
        <column table="a" column="dolg" type="string" title="" as="dolg" key="0" />
        <column table="a" column="osnov" type="string" title="" as="osnov" key="0" />
        <column table="a" column="direct_r" type="string" title="" as="direct_r" key="0" />
        <column table="a" column="nerez" type="number" title="" as="nerez" key="0" />
        <column table="a" column="ogrn" type="string" title="" comment="огрн" as="ogrn" key="0" />
        <column table="a" column="pasport" type="string" title="" comment="паспортные данные" as="pasport" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kn_customer" type="number" title="" comment="код ад" as="kn_customer" key="0" />
        <column table="a" column="pr_contr_kazn" type="number" title="" as="pr_contr_kazn" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="дата удаления" as="dat_udal" key="0" />
        <column table="a" column="e_code_old" type="number" title="" as="e_code_old" key="0" />
        <column table="a" column="kod_spr_okato" type="number" comment="окато" as="kod_spr_okato" reference="ks_okato" refcol="kod_spr_okato" key="0" />
        <column table="a" column="kod_spr_bd" type="number" comment="кбк" as="kod_spr_bd" reference="ks_bd_kl" refcol="kod_spr_bd" key="0" />
        <column table="a" column="ispoln" type="string" title="" comment="пользователь,создавший карточку" as="ispoln" key="0" />
        <column table="a" column="id_payer" type="string" title="" comment="идентификатор корреспондента в справочнике тгк" as="id_payer" key="0" />
        <column table="a" column="pr_oper" type="number" title="" comment="работы выполняются оператором" as="pr_oper" key="0" />
        <column table="a" column="kod_reg" type="string" comment="код региона" as="kod_reg" key="0" />
        <column table="a" column="kod_zpz" type="number" comment="код признака заказчика пз" as="kod_zpz" key="0" />
        <column table="a" column="e_code_pol" type="number" title="" comment="код получателя платежа" as="e_code_pol" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="dolg_r" type="string" title="" comment="должность руководителя в род. падеже" as="dolg_r" key="0" />
        <column table="a" column="prizn_owner" type="number" title="" comment="признак наличия собственн(для тгк)" as="prizn_owner" key="0" />
        <column table="a" column="name_old" type="string" title="" as="name_old" key="0" />
        <column table="a" column="e_mail" type="string" title="E-mail" as="e_mail" key="0" />
        <column table="a" column="website" type="string" title="" comment="Адрес WEB-сайта" as="website" key="0" />
        <column table="a" column="kod_mdm" type="number" comment="уник id контрагента 1с тгк" as="kod_mdm" key="0" />
        <column table="a" column="adr_text_fiz" type="string" title="" comment="адрес текстом физический" as="adr_text_fiz" key="0" />
        <column table="a" column="guid" type="string" title="" comment="глобальный идентификатор" as="guid" key="0" />
        <column table="a" column="pr_msp" type="number" title="" comment="мсп -признак тгк" as="pr_msp" key="0" />
        <column table="a" column="e_code_parent" type="number" title="" comment="код головного контрагента" as="e_code_parent" key="0" />
        <column table="a" column="pr_filial" type="number" title="" comment="0-филиал,1-головной" as="pr_filial" key="0" />
        <column table="a" column="inn_b" type="string" title="" comment="инн банка" as="inn_b" key="0" />
        <column table="a" column="adr_text_uchr_doc" type="string" title="" comment="адрес по учред.документам" as="adr_text_uchr_doc" key="0" />
        <column table="a" column="kod_group_cred_sap" type="number" comment="Группа контрагентов по SAP" as="kod_group_cred_sap" reference="is_spr_group_cred_sap" refcol="kod_group_cred_sap" key="0" />
        <column table="a" column="pr_kr_aff" type="number" title="" comment="Признак аффилированности(для ТГК)" as="pr_kr_aff" key="0" />
        <column table="a" column="pr_ndfl" type="number" title="" comment="Признак С платежом по НДФЛ" as="pr_ndfl" key="0" />
        <column table="a" column="pr_correct" type="number" title="" as="pr_correct" key="0" />
        <column table="a" column="check_inn" type="number" title="" comment="Рез-т проверки ИНН на сайте ФНС: 0- Не проводилась, 1- Успешно, 2- Ошибка" as="check_inn" key="0" />
        <column table="a" column="dat_check_inn" type="date" title="" comment="Дата проверки ИНН на сайте ФНС" as="dat_check_inn" key="0" />
        <column table="a" column="sso" type="number" title="" comment="ССО для АД" as="sso" key="0" />
        <column table="a" column="text_check_inn" type="string" title="" comment="Текст  проверки ИНН на сайте ФНС" as="text_check_inn" key="0" />
        <column table="a" column="name_plat" type="string" title="" comment="Наименование в платежку" as="name_plat" key="0" />
        <column table="a" column="send_prior" type="number" title="" comment="Приоритетное оповещение: 0 - по телефону, 1 - по e-mail" as="send_prior" reference="is_spr_prior_notific_mes" refcol="kod_mes" key="0" />
        <column table="a" column="phone_dop" type="string" title="" comment="Дополнительный номер телефона" as="phone_dop" key="0" />
        <column table="a" column="pr_sud_pr" type="number" title="" comment="Признак Судебного производства (сохраняется само по себе без общей процедуры)" as="pr_sud_pr" key="0" />
        <column table="a" column="pr_bankrot" type="number" title="" comment="Признак процедуры банкротства (сохраняется само по себе без общей процедуры)" as="pr_bankrot" key="0" />
        <column table="a" column="pr_likvid" type="number" title="" comment="Признак Ликвидации (сохраняется само по себе без общей процедуры)" as="pr_likvid" key="0" />
        <column table="a" column="pr_per_prav" type="number" title="" comment="Признак уступки прав (сохраняется само по себе без общей процедуры)" as="pr_per_prav" key="0" />
        <column table="a" column="pasp_series" type="string" title="" comment="Серия паспорта" as="pasp_series" key="0" />
        <column table="a" column="pasp_num" type="string" title="" comment="Номер паспорта" as="pasp_num" key="0" />
        <column table="a" column="dat_pasp" type="date" title="" comment="Дата паспорта" as="dat_pasp" key="0" />
        <column table="a" column="pasp_issued" type="string" title="" comment="Кем выдан" as="pasp_issued" key="0" />
        <column table="a" column="kod_ident_card" type="number" comment="Код удостоверения личности" as="kod_ident_card" reference="is_spr_ident_card" refcol="kod_ident_card" key="0" />
        <call function="case" type="number" as="tip" title="1-ФЛ 2-ЮЛ 3-ИП" key="0">
          <call function="when">
            <call function="=">
              <column table="this" column="kod_fs" />
              <const>33</const>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ur_lico" />
              <const>1</const>
            </call>
            <const>2</const>
          </call>
          <call function="else">
            <const>1</const>
          </call>
        </call>
        <call as="f" function="extract_word" key="0">
          <column table="this" column="name_all" />
          <const>1</const>
        </call>
        <call as="i" function="extract_word" key="0">
          <column table="this" column="name_all" />
          <const>2</const>
        </call>
        <call as="o" function="extract_word" key="0">
          <column table="this" column="name_all" />
          <const>3</const>
        </call>
        <column table="a" column="kod_razd" type="number" as="kod_razd" key="0" />
        <column table="a" column="prizn_asuz" type="number" title="" comment="Признак, что контрагент создан из АСУЗ" as="prizn_asuz" key="0" />
        <column table="a" column="kod_sap" type="string" data-size="250" comment="Код интеграции SAP" as="kod_sap" key="0" />
        <column table="a" column="snils" type="string" data-size="14" title="" as="snils" key="0" />
        <column table="a" column="oktmo" type="string" data-size="11" title="" as="oktmo" key="0" />
        <column table="a" column="name_for_1c" type="string" data-size="250" title="" comment="наименование в формате &lt;Наименование организации, ОПФ&gt; для передачи в 1С" as="name_for_1c" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_creditors" as="a" title="Контрагенты">
          <dlink name="qr_list_zpr_abons" is-private-dimension="1" is-final-dimension="1" dimension="1" as="qr_list_zpr_abons" table="qr_list_zpr_abons" child="qr_list_zpr_abons" field="kodp" parent="is_creditors" back="qr_list_zpr_abons">
            <dimlink name="qr_zpr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="c_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login_by_z" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="is_kontact" is-private-dimension="1" is-final-dimension="1" dimension="1" as="is_kontact" table="is_kontact" child="is_kontact" field="e_code" parent="is_creditors" back="is_kontact" title="Контакт" />
          <dlink name="is_dop_contract" is-private-dimension="1" is-final-dimension="1" dimension="1" as="is_dop_contract" table="is_dop_contract" child="is_dop_contract" field="kn_customer" parent="is_creditors" back="is_dop_contract" title="Абонентские договоры">
            <dimlink name="kod_ipr" />
            <dimlink name="ipr_kod_titul_ip" />
          </dlink>
          <dlink name="is_dogovor" is-private-dimension="1" is-final-dimension="1" dimension="1" as="is_dogovor" table="is_dogovor" child="is_dogovor" field="e_code" parent="is_creditors" back="is_dogovor" title="Подрядные договоры" />
        </table>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_creditors" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="ks_okato" as="kod_spr_okato" join="left outer" dname="is_creditors">
          <call function="=">
            <column table="a" column="kod_spr_okato" />
            <column table="kod_spr_okato" column="kod_spr_okato" />
          </call>
        </query>
        <query name="ks_bd_kl" as="kod_spr_bd" join="left outer" dname="is_creditors">
          <call function="=">
            <column table="a" column="kod_spr_bd" />
            <column table="kod_spr_bd" column="kod_spr_bd" />
          </call>
        </query>
        <query name="is_creditors" as="e_code_pol" join="left outer" dname="is_creditors" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code_pol" />
            <column table="e_code_pol" column="e_code" />
          </call>
        </query>
        <query name="is_spr_ident_card" as="kod_ident_card" join="left outer" dname="is_creditors">
          <call function="=">
            <column table="a" column="kod_ident_card" />
            <column table="kod_ident_card" column="kod_ident_card" />
          </call>
        </query>
        <query name="is_spr_prior_notific_mes" as="send_prior" join="left outer" dname="is_creditors">
          <call function="=">
            <column table="a" column="send_prior" />
            <column table="send_prior" column="kod_mes" />
          </call>
        </query>
        <query name="is_spr_group_cred_sap" as="kod_group_cred_sap" join="left outer" dname="is_creditors">
          <call function="=">
            <column table="a" column="kod_group_cred_sap" />
            <column table="kod_group_cred_sap" column="kod_group_cred_sap" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dc_signs" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dc_signs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dc_signs" type="number" column-mandatory="1" as="kod_dc_signs" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" column-mandatory="1" comment="Код договора присоединения" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_person" type="number" comment="Подписант от ЛЭ" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_kontact" type="number" comment="ФИО подписанта от Контрагента" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="250" title="" as="u_m" key="0" />
        <column table="a" column="e_code" type="number" title="" comment="Организация подписант от Контрагента (выбор есть многосторонний дог-р)" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dc_signs" as="a" />
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_dc_signs" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_dc_signs">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="is_dc_signs" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_dc_signs" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_doc_vip" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_doc_vip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc_vip" type="number" as="kod_doc_vip" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0"></column>
        <column table="a" column="num" type="string" title="" as="num" key="0"></column>
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0"></column>
        <column table="a" column="dat_srok" type="date" title="" as="dat_srok" key="0"></column>
        <column table="a" column="prizn_r" type="number" title="" as="prizn_r" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_doc_vip" refcol="kod_doc_vip" key="0"></column>
        <column table="a" column="kod_tmp" type="number" comment="используется для хранения kod_vip_dog при конвертации" as="kod_tmp" key="0"></column>
        <column table="a" column="file_data" type="blob" title="" comment="файл" as="file_data" key="0"></column>
        <column table="a" column="file_name" type="string" title="" comment="наименвоанеи файлa" as="file_name" key="0"></column>
        <column table="a" column="file_ext" type="string" title="" comment="расширение файлa" as="file_ext" key="0"></column>
        <column table="a" column="file_name_2" type="string" title="" comment="наименвоание файла" as="file_name_2" key="0"></column>
        <column table="a" column="file_ext_2" type="string" title="" comment="расширение файла" as="file_ext_2" key="0"></column>
        <column table="a" column="file_data_2" type="blob" title="" comment="файл" as="file_data_2" key="0"></column>
        <column table="a" column="kod_uid" type="string" comment="уник. код для бух" as="kod_uid" key="0"></column>
        <column table="a" column="num_porc" type="number" title="" comment="№ порции за день" as="num_porc" key="0"></column>
        <column table="a" column="dat_reestr" type="date" title="" comment="дата реестра" as="dat_reestr" key="0"></column>
        <column table="a" column="kod_titul" type="number" comment="код титула" as="kod_titul" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="pr_edit" type="number" title="" comment="наредактирование" as="pr_edit" key="0"></column>
        <column table="a" column="not_detal" type="number" title="" comment="без детализации" as="not_detal" key="0"></column>
        <column table="a" column="kod_filial" type="number" comment="код филиала" as="kod_filial" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="user_create_reestr" type="string" title="" comment="пользователь отправив. док. в реестр" as="user_create_reestr" key="0"></column>
        <column table="a" column="user_create_reestr_fio" type="string" title="" comment="пользователь отправив. док. в реестр" as="user_create_reestr_fio" key="0"></column>
        <column table="a" column="pr_ofz" type="number" title="" comment="пр. офз" as="pr_ofz" key="0"></column>
        <column table="a" column="pr_create_web" type="number" title="" comment="документ создат в лк" as="pr_create_web" key="0"></column>
        <call table="a" column="kod_doc_vip" type="number" function="nvl" as="kod_titul_ip_ks3" comment="по пояснению ретневой 39591 " key="0">
          <column table="is_ks2" column="kod_titul" dgroup="max" />
          <column table="a" column="kod_titul" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_doc_vip" as="a">
          <dlink name="is_ks2" as="is_ks2" table="is_ks2" child="is_ks2" field="kod_vip_doc" parent="is_doc_vip" back="is_ks2" />
        </table>
        <query name="is_doc_vip" as="kod_parent" join="left outer" dname="is_doc_vip">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_doc_vip"></column>
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_doc_vip" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="is_doc_vip" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial"></column>
            <column table="kod_filial" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_doc_vip">
          <call function="=">
            <column table="a" column="kod_spr_doc"></column>
            <column table="kod_spr_doc" column="kod_spr_doc"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul" join="left outer" dname="is_doc_vip" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul"></column>
            <column table="kod_titul" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip_ks3" join="left outer" dname="is_doc_vip" title="Титулы">
          <call function="=">
            <column table="this" column="kod_titul_ip_ks3" />
            <column table="kod_titul_ip_ks3" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dogovor" title="Подрядные договоры" class="1" timestamp="06.09.2018 21:32:21" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_rs_cr" type="number" as="kod_rs_cr" reference="is_rs_cr" refcol="kod_rs_cr" key="0" />
        <column table="a" column="kod_direct" type="number" comment="код дирекции которая подготавливает договора" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_predpr" type="number" comment="код подразделения - заказчика" as="kod_predpr" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_tip_dog" type="number" as="kod_tip_dog" reference="is_spr_tip_dog" refcol="kod_tip_dog" key="0" />
        <column table="a" column="num_dog" type="string" title="Номер подрядного договора" as="num_dog" key="0" />
        <column table="a" column="num_oko" type="string" title="" as="num_oko" key="0" />
        <column table="a" column="dat_oko" type="date" title="" as="dat_oko" key="0" />
        <column table="a" column="num_dop" type="number" title="" as="num_dop" key="0" />
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0" />
        <column table="a" column="dat_dog" type="date" title="Дата начала подр.договора" as="dat_dog" key="0" />
        <column table="a" column="dat_udal" type="date" title="Дата окончания договора" as="dat_udal" key="0" />
        <column table="a" column="predm_dog" type="string" title="" as="predm_dog" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="avans" type="number" title="" as="avans" key="0" />
        <column table="a" column="ispoln" type="string" title="" as="ispoln" key="0" />
        <column table="a" column="status" type="number" title="" comment="состояние договора&#xA;0 - проект&#xA;1 - действующий договор&#xA;2 - приостановленный &#xA;3 - архив&#xA;" as="status" reference="is_status" refcol="status" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="period" type="string" title="" as="period" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="usl_opl" type="string" title="" as="usl_opl" key="0" />
        <column table="a" column="perehod" type="number" title="" as="perehod" key="0" />
        <column table="a" column="sum_mat" type="number" title="" as="sum_mat" key="0" />
        <column table="a" column="kod_podr" type="number" as="kod_podr" key="0" />
        <column table="a" column="mal" type="number" title="" as="mal" key="0" />
        <column table="a" column="osnov_dop_sogl" type="string" title="" as="osnov_dop_sogl" key="0" />
        <column table="a" column="prz_inv" type="string" title="" as="prz_inv" key="0" />
        <column table="a" column="sbros_arhiv" type="number" title="" as="sbros_arhiv" key="0" />
        <column table="a" column="vsego_god" type="number" title="" as="vsego_god" key="0" />
        <column table="a" column="dat_podpis" type="date" title="" as="dat_podpis" key="0" />
        <column table="a" column="prizn_ram" type="number" title="" as="prizn_ram" key="0" />
        <column table="a" column="dat_prognoz" type="date" title="" as="dat_prognoz" key="0" />
        <column table="a" column="dat_cr_dog" type="date" title="" as="dat_cr_dog" key="0" />
        <column table="a" column="year" type="number" title="" as="year" key="0" />
        <column table="a" column="kod_unig_dog" type="number" as="kod_unig_dog" key="0" />
        <column table="a" column="kod_spr_folders" type="number" as="kod_spr_folders" reference="is_spr_folders" refcol="kod_spr_folders" key="0" />
        <column table="a" column="smeta" type="string" title="" as="smeta" key="0" />
        <column table="a" column="budget" type="string" title="" as="budget" key="0" />
        <column table="a" column="titul" type="string" title="" as="titul" key="0" />
        <column table="a" column="invest" type="string" title="" as="invest" key="0" />
        <column table="a" column="pp" type="string" title="" as="pp" key="0" />
        <column table="a" column="prib" type="string" title="" as="prib" key="0" />
        <column table="a" column="rao" type="string" title="" as="rao" key="0" />
        <column table="a" column="du" type="string" title="" as="du" key="0" />
        <column table="a" column="prizn_ag" type="number" title="" as="prizn_ag" key="0" />
        <column table="a" column="uvedom" type="number" title="" comment="ведется претензионная работа" as="uvedom" key="0" />
        <column table="a" column="kod_spr_kur_pd" type="number" as="kod_spr_kur_pd" reference="is_spr_kur_pd" refcol="kod_spr_kur_pd" key="0" />
        <column table="a" column="uvedom_r" type="number" title="" comment="расторгнут по уведомлению" as="uvedom_r" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="дата закрытия дог-ра" is-fact="1" agg="max" as="dat_end" fact="is_dogovor_dat_end" key="0" />
        <column table="a" column="dat_ret" type="date" title="" comment="дата анулирования дог-ра" as="dat_ret" key="0" />
        <column table="a" column="raschet" type="number" title="" as="raschet" key="0" />
        <column table="a" column="kod_esys" type="number" as="kod_esys" key="0" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" reference="is_spr_vid_ds" refcol="kod_vid_ds" key="0" />
        <column table="a" column="export_oko" type="number" title="" as="export_oko" key="0" />
        <column table="a" column="vsego" type="number" title="" comment="всего по дог-ру" as="vsego" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="vsego_dog_god" type="number" title="" comment="всего по дог-ру за год тек" as="vsego_dog_god" key="0" />
        <column table="a" column="summa_dog_god" type="number" title="" as="summa_dog_god" key="0" />
        <column table="a" column="folders" type="string" title="" comment="папка хранения дог-ра" as="folders" key="0" />
        <column table="a" column="not_oko" type="number" title="" comment="дог-р не зарегистрирован в око" as="not_oko" key="0" />
        <column table="a" column="dat_status_1" type="date" title="Дата перевода в статус Действующий" comment="дата перевода в статус действующий" as="dat_status_1" key="0" />
        <column table="a" column="el_vers" type="string" title="" comment="номер электронной версии договора" as="el_vers" key="0" />
        <column table="a" column="dop_doc" type="string" title="" as="dop_doc" key="0" />
        <column table="a" column="prolong" type="number" title="" comment="признак пролонгации договора" as="prolong" key="0" />
        <column table="a" column="st_dog" type="number" title="" comment="призн.изменения статуса дог-ра" as="st_dog" key="0" />
        <column table="a" column="osn_st_dog" type="string" title="" comment="основание д/изм. статуса дог-ра" as="osn_st_dog" key="0" />
        <column table="a" column="dat_uo" type="date" title="" comment="дата регистрации юо" as="dat_uo" key="0" />
        <column table="a" column="num_uo" type="string" title="" comment="номер или примечание юо по дог-ру" as="num_uo" key="0" />
        <column table="a" column="pr_sm" type="number" title="" comment="смета в программе а0 (0-нет,1-есть)" as="pr_sm" key="0" />
        <column table="a" column="dat_rastorg" type="date" title="" comment="дата расторжения дог-ра" as="dat_rastorg" key="0" />
        <column table="a" column="dat_fact_vip" type="date" title="" comment="фактич.дата выполнения работ" as="dat_fact_vip" key="0" />
        <column table="a" column="prim_vip" type="string" title="" comment="примечание к выполнению" as="prim_vip" key="0" />
        <column table="a" column="sogl_konf" type="number" title="" comment="дог-р имеет соглашение о конфиденциальности" as="sogl_konf" key="0" />
        <column table="a" column="stat_dog" type="number" title="" comment="признак: дог-р станционный" as="stat_dog" key="0" />
        <column table="a" column="proc_limit" type="number" title="" comment="% лимита на расход" as="proc_limit" key="0" />
        <column table="a" column="pr_old" type="number" title="" comment="договор старый (1с)" as="pr_old" key="0" />
        <column table="a" column="pr_oper" type="number" title="" comment="работы выполняются оператором" as="pr_oper" key="0" />
        <column table="a" column="pr_gar_dog" type="date" title="" comment="требуется гаран испол.дог-ра (сохраняем дату)" as="pr_gar_dog" key="0" />
        <column table="a" column="pr_gar_avans" type="date" title="" comment="требуется гаран возврата аванса (дата)" as="pr_gar_avans" key="0" />
        <column table="a" column="pr_doh_dog" type="number" title="" comment="признак наличия доходного договора" as="pr_doh_dog" key="0" />
        <column table="a" column="sum_izm_ram" type="number" title="" comment="величина, изменяющая сумму рамочного  договора" as="sum_izm_ram" key="0" />
        <column table="a" column="dat_cr_pol" type="date" title="" comment="дата получения кредита" as="dat_cr_pol" key="0" />
        <column table="a" column="dat_cr_pog" type="date" title="" comment="дата погашения кредита " as="dat_cr_pog" key="0" />
        <column table="a" column="dat_cr_pogprol" type="date" title="" comment="дата погашения кредита  при пролонгации" as="dat_cr_pogprol" key="0" />
        <column table="a" column="kod_spr_val" type="number" comment="код валюты " as="kod_spr_val" reference="is_spr_val" refcol="kod_spr_val" key="0" />
        <column table="a" column="pr_zalog" type="number" title="" comment="признак залога" as="pr_zalog" key="0" />
        <column table="a" column="rate_cr" type="number" title="" comment="ставка по кредиту" as="rate_cr" key="0" />
        <column table="a" column="sum_limit_cr" type="number" title="" comment="сумма лимита по кредиту" as="sum_limit_cr" key="0" />
        <column table="a" column="days_god_cr" type="number" title="" comment="кол-во дней в году для расчета % по кредиту" as="days_god_cr" key="0" />
        <column table="a" column="kod_opl_ro" type="number" comment="код строки оплаты полученного кредита" as="kod_opl_ro" reference="is_dog_conf" refcol="kod_conf" key="0" />
        <column table="a" column="pr_tarif" type="number" title="" comment="признак: тарифный договор" as="pr_tarif" key="0" />
        <column table="a" column="new_form_benif" type="number" title="" comment="новая форма с уч.бениф." as="new_form_benif" key="0" />
        <column table="a" column="kod_doc_vip" type="number" comment="ссылка на расх.часть (для кредитных дог)" as="kod_doc_vip" reference="is_doc_vip" refcol="kod_doc_vip" key="0" />
        <column table="a" column="kod_reason" type="number" comment="код причины расторж договора" as="kod_reason" reference="is_spr_reasons_term" refcol="kod_reason" key="0" />
        <column table="a" column="motiv_reason" type="string" title="" comment="обоснование причины расторж" as="motiv_reason" key="0" />
        <column table="a" column="pr_control_p" type="number" title="" comment="признак проверено на п(на переходящий)" as="pr_control_p" key="0" />
        <column table="a" column="pr_bez_benef" type="number" title="" comment="разрешено без бенефициаров" as="pr_bez_benef" key="0" />
        <column table="a" column="pr_gos_zakd" type="number" title="" comment="договор на сайте госзакупки" as="pr_gos_zakd" key="0" />
        <column table="a" column="dat_gos_zakd" type="date" title="" comment="дата размещения дог на сайте" as="dat_gos_zakd" key="0" />
        <column table="a" column="pr_zalog_out" type="number" title="" comment="признак снятия с залога" as="pr_zalog_out" key="0" />
        <column table="a" column="pr_dog_god_rab_doc" type="number" title="" comment="1-отключить проверку года документа с годом работ на всем дог" as="pr_dog_god_rab_doc" key="0" />
        <column table="a" column="pr_dog_without_gkpz" type="number" title="" comment="1-полностью не сверять с гкпз" as="pr_dog_without_gkpz" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="связанный договор (напр. для договора страхования kod_spr_doc=200)" as="kod_dog_link" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="object_dog" type="string" title="" comment="объект договора" as="object_dog" key="0" />
        <column table="a" column="kod_cfo_f" type="number" comment="код цфо филиала" as="kod_cfo_f" reference="is_cfo" refcol="kod" key="0" />
        <column table="a" column="new_form_inf_price" type="number" title="" comment="новая форма с инф. о ценах подрядч." as="new_form_inf_price" key="0" />
        <column table="a" column="pr_ds_inf_price" type="number" title="" comment="есть д/с с видом &quot;инф. о ценах подрдч.&quot;" as="pr_ds_inf_price" key="0" />
        <column table="a" column="kod_parent_cp" type="number" comment="подрядный родительский договор по целевой программе" title="Родительский договор" as="kod_parent_cp" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_akt_dop" type="date" title="" comment="дата акта первичного допуска" as="dat_akt_dop" key="0" />
        <column table="a" column="pr_akt_po_ram" type="number" title="" comment="признак договора акт по рамке" as="pr_akt_po_ram" key="0" />
        <column table="a" column="guid" type="string" title="" comment="глобальный идентификатор" as="guid" key="0" />
        <column table="a" column="tip_form" type="number" title="" comment="признак типовой формы" as="tip_form" key="0" />
        <column table="a" column="pr_obesp" type="number" title="" comment="признак &quot;с обеспечением&quot;" as="pr_obesp" key="0" />
        <column table="a" column="kod_person_isp" type="number" comment="код  исполнителя" as="kod_person_isp" key="0" />
        <column table="a" column="pr_strah" type="number" title="" comment="1- договор на контроле отдела страхования" as="pr_strah" key="0" />
        <column table="a" column="comment_strah" type="string" title="" comment="коммент.отдела страхования" as="comment_strah" key="0" />
        <column table="a" column="pr_doh_out" type="number" title="" comment="1 - снят котроль по суммам дохода и расхода" as="pr_doh_out" key="0" />
        <column table="a" column="srok_vip_rab" type="number" title="" comment="расчет срока выполн. работ: кол-во дней от даты (не помню какой)" as="srok_vip_rab" key="0" />
        <column table="a" column="kod_strah_out" type="number" comment="код причины снятия договора с контроля в отд. страх." as="kod_strah_out" key="0" />
        <column table="a" column="dat_srok_zadat" type="date" title="" comment="срок перечисления задатка" as="dat_srok_zadat" key="0" />
        <column table="a" column="form_opl" type="number" title="" comment="форма оплаты" as="form_opl" key="0" />
        <column table="a" column="dat_status_4" type="date" title="Дата выполнения договора" comment="дата первого перевода дог в статус выполнен" as="dat_status_4" key="0" />
        <column table="a" column="pr_centr" type="number" title="" comment="признак централизованный(тгк)" as="pr_centr" key="0" />
        <column table="a" column="pr_ram_ds" type="number" title="" comment="признак рамочного доп/согл" as="pr_ram_ds" key="0" />
        <column table="a" column="pr_dat_udal_dat_doc" type="number" title="" comment="1-отключить проверку дата документа &gt; дата оконч действ дог-ра" as="pr_dat_udal_dat_doc" key="0" />
        <column table="a" column="kod_dog_zpr" type="number" comment="код дог-ра присоединения (для тс) ссылки нет , идет по dblink" as="kod_dog_zpr" key="0" />
        <column table="a" column="dat_publ_rastorg" type="date" title="" comment="дата опубл.инф-ции о расторжении договора" as="dat_publ_rastorg" key="0" />
        <column table="a" column="kod_spr_prizn_zak" type="number" comment="признак договора из гкпз" as="kod_spr_prizn_zak" reference="z_spr_prizn_zak" refcol="kod_spr_prizn_zak" key="0" />
        <column table="a" column="kod_tip_dog_sap" type="number" comment="код типа дог-ра по sap (для выгрузки россети)" as="kod_tip_dog_sap" reference="is_spr_tip_dog_sap" refcol="kod_tip_dog_sap" key="0" />
        <column table="a" column="dat_zadat" type="date" title="" comment="дата задатка(обеспечение)" as="dat_zadat" key="0" />
        <column table="a" column="kod_form_opl" type="number" comment="код формы оплаты" as="kod_form_opl" key="0" />
        <column table="a" column="pr_msp" type="number" title="" comment="признак мсп договора (для тгк)" as="pr_msp" key="0" />
        <column table="a" column="cnt_garant" type="number" title="" comment="гарантийный срок" as="cnt_garant" key="0" />
        <column table="a" column="dat_end_gos_zakd" type="date" title="" comment="дата закр.дог на сайте госзак" as="dat_end_gos_zakd" key="0" />
        <column table="a" column="pr_sd_ok" type="number" title="" comment="сделка одобрена сд" as="pr_sd_ok" key="0" />
        <column table="a" column="pr_limit" type="number" title="" as="pr_limit" key="0" />
        <column table="a" column="kod_link" type="number" comment="связь с дс, внесенными в качестве обеспечения предложения на участие в закупочных процедурах" as="kod_link" reference="kr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="kod_link_spbs" type="number" comment="для спбэс: связь с дс, внесенными в качестве обеспечения предложения на участие в закупочных процедурах" as="kod_link_spbs" key="0" />
        <column table="a" column="pr_sud_pr" type="number" title="" comment="признак судебного производства (сохраняется само по себе без общей процедуры)" as="pr_sud_pr" key="0" />
        <column table="a" column="pr_bankrot" type="number" title="" comment="признак процедуры банкротства (сохраняется само по себе без общей процедуры)" as="pr_bankrot" key="0" />
        <column table="a" column="pr_likvid" type="number" title="" comment="признак ликвидации (сохраняется само по себе без общей процедуры)" as="pr_likvid" key="0" />
        <column table="a" column="pr_per_prav" type="number" title="" comment="признак передачи прав (сохраняется само по себе без общей процедуры)" as="pr_per_prav" key="0" />
        <call function="||" as="name_unig_dog" title="Уникальный № договора" qlikview="1" key="0">
          <call function="substr">
            <call function="int to char">
              <column table="a" column="year" type="number" />
            </call>
            <const>3</const>
            <const>2</const>
          </call>
          <const>'-'</const>
          <call function="int to char">
            <column table="a" column="kod_unig_dog" type="number" />
          </call>
        </call>
        <call function="||" as="name" title="Договор" key="0">
          <column table="this" column="name_unig_dog" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_dog" />
          </call>
        </call>
        <call function="||" as="dog_info" title="контрагент, номер, дата" is-fact="1" agg="stragg" fact="is_dogovor_dog_info" key="0">
          <column table="e_code" column="name" />
          <const>'  '</const>
          <column table="this" column="name_unig_dog" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_dog" />
          </call>
        </call>
        <column table="kod_predpr" column="name" as="predpr_name" title="Заказчик" type="string" qlikview="1" key="0" />
        <call as="prizn_pir" function="if" type="number" key="0">
          <call function="gt">
            <column table="kod_spr_stage1" column="kod_spr_stage" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <call as="prizn_smr" function="if" type="number" key="0">
          <call function="gt">
            <column table="kod_spr_stage2" column="kod_spr_stage" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <call function="||" as="dat_srok_f_text" agg="1" is-fact="1" fact="is_dogovor_dat_srok_f_text" key="0">
          <call function="date to char">
            <column table="a" column="dat_udal" />
          </call>
          <call function="if">
            <call function="and">
              <call function="is not null">
                <column table="is_vip_dog" column="dat_doc" dgroup="max" />
              </call>
            </call>
            <call function="||">
              <const>' ('</const>
              <call function="date to char">
                <column table="is_vip_dog" column="dat_doc" dgroup="max" />
              </call>
              <const>')'</const>
            </call>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dogovor" as="a" title="Подрядные договоры">
          <dlink name="is_period" as="kod_period1" table="is_period" child="is_period" field="kod_dog" parent="is_dogovor" back="is_period" title="Этапы работ">
            <link name="kod_spr_stage" as="kod_spr_stage1" table="is_spr_stage" child="is_period" field="kod_spr_stage" parent="is_spr_stage" back="is_period">
              <where>
                <call function="or">
                  <call function="=">
                    <column table="kod_spr_stage1" column="kod_smet" dgroup="count" />
                    <const>1</const>
                  </call>
                  <call function="and">
                    <call function="is null">
                      <column table="kod_spr_stage1" column="kod_smet" />
                    </call>
                    <call function="contains">
                      <column table="kod_spr_stage1" column="name_kr" />
                      <const>'ПИР'</const>
                    </call>
                  </call>
                </call>
              </where>
            </link>
          </dlink>
          <dlink name="is_period" as="kod_period2" table="is_period" child="is_period" field="kod_dog" parent="is_dogovor" back="is_period" title="Этапы работ">
            <link name="kod_spr_stage" as="kod_spr_stage2" table="is_spr_stage" child="is_period" field="kod_spr_stage" parent="is_spr_stage" back="is_period">
              <where>
                <call function="or">
                  <call function="=">
                    <column table="kod_spr_stage2" column="kod_smet" />
                    <const>2</const>
                  </call>
                  <call function="and">
                    <call function="is null">
                      <column table="kod_spr_stage2" column="kod_smet" />
                    </call>
                    <call function="contains">
                      <column table="kod_spr_stage2" column="name_kr" />
                      <const>'СМР'</const>
                    </call>
                  </call>
                </call>
              </where>
            </link>
          </dlink>
          <dlink name="is_period" as="kod_period" table="is_period" child="is_period" field="kod_dog" parent="is_dogovor" back="is_period" title="Этапы работ">
            <dlink name="is_vip_dog" as="is_vip_dog" table="is_vip_dog" child="is_vip_dog" field="kod_period" parent="is_period" back="is_vip_dog" title="Док-ты по выполнению" />
          </dlink>
          <dlink name="is_fin_doc_dog_titul_uniq" as="is_fin_doc_dog_titul_uniq" table="is_fin_doc_dog_titul_uniq" child="is_fin_doc_dog_titul_uniq" field="kod_dog" parent="is_dogovor" back="is_fin_doc_dog_titul_uniq" title="Источники финансирования">
            <link name="kod_titul_ip" dimension="1" as="kod_titul_ip" table="ipr_titul_ip" child="is_fin_doc_dog_titul_uniq" field="kod_titul_ip" parent="ipr_titul_ip" back="is_fin_doc_dog_titul_uniq" title="Титулы">
              <dimlink name="kod_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_ipr" dimension="1" />
            </link>
          </dlink>
          <dlink name="ipr_dogs" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ipr_dogs" table="ipr_dogs" child="ipr_dogs" field="kod_dog" parent="is_dogovor" back="ipr_dogs">
            <dimlink name="ipr_kod_smet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_vid_zt_tit" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="is_spr_tip_dog" as="kod_tip_dog" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_tip_dog" />
            <column table="kod_tip_dog" column="kod_tip_dog" />
          </call>
        </query>
        <query name="is_spr_kur_pd" as="kod_spr_kur_pd" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_spr_kur_pd" />
            <column table="kod_spr_kur_pd" column="kod_spr_kur_pd" />
          </call>
        </query>
        <query name="is_spr_folders" as="kod_spr_folders" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_spr_folders" />
            <column table="kod_spr_folders" column="kod_spr_folders" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_predpr" join="left outer" dname="is_dogovor" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_predpr" />
            <column table="kod_predpr" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_dogovor" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_rs_cr" as="kod_rs_cr" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_rs_cr" />
            <column table="kod_rs_cr" column="kod_rs_cr" />
          </call>
        </query>
        <query name="is_spr_vid_ds" as="kod_vid_ds" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_vid_ds" />
            <column table="kod_vid_ds" column="kod_vid_ds" />
          </call>
        </query>
        <query name="is_spr_val" as="kod_spr_val" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_spr_val" />
            <column table="kod_spr_val" column="kod_spr_val" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_parent" join="left outer" dname="is_dogovor" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_dog" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_dogovor" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="is_spr_reasons_term" as="kod_reason" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_reason" />
            <column table="kod_reason" column="kod_reason" />
          </call>
        </query>
        <query name="is_doc_vip" as="kod_doc_vip" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_doc_vip" />
            <column table="kod_doc_vip" column="kod_doc_vip" />
          </call>
        </query>
        <query name="is_dog_conf" as="kod_opl_ro" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_opl_ro" />
            <column table="kod_opl_ro" column="kod_conf" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_parent_cp" dname="is_dogovor_child" join="left outer" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_parent_cp" />
            <column table="kod_parent_cp" column="kod_dog" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog_link" dname="is_dogovor_link" join="left outer" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog_link" />
            <column table="kod_dog_link" column="kod_dog" />
          </call>
        </query>
        <query name="is_status" as="status" join="left outer" dname="is_dogovor" title="Статус">
          <call function="=">
            <column table="a" column="status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="kr_opl_bank" as="kod_link" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="is_cfo" as="kod_cfo_f" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_cfo_f" />
            <column table="kod_cfo_f" column="kod" />
          </call>
        </query>
        <query name="is_spr_tip_dog_sap" as="kod_tip_dog_sap" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_tip_dog_sap" />
            <column table="kod_tip_dog_sap" column="kod_tip_dog_sap" />
          </call>
        </query>
        <query name="z_spr_prizn_zak" as="kod_spr_prizn_zak" join="left outer" dname="is_dogovor">
          <call function="=">
            <column table="a" column="kod_spr_prizn_zak" />
            <column table="kod_spr_prizn_zak" column="kod_spr_prizn_zak" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_contract" title="Абонентские договоры" class="1" timestamp="27.04.2018 14:18:46" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contract.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" key="1" column-mandatory="1" as="kod_dop_contract" />
        <column table="a" column="kod_spr_kurators" type="number" comment="код куратора (тех)" as="kod_spr_kurators" />
        <column table="a" column="kn_contract" type="number" title="" comment="код договора" as="kn_contract" reference="as_contract" refcol="kn_contract" />
        <column table="a" column="dat_post" type="date" title="" comment="дата поступления в отдел (тех)" as="dat_post" />
        <column table="a" column="dat_vol" type="date" title="" comment="дата заявки на спр. (тех)" as="dat_vol" />
        <column table="a" column="prim" type="string" title="" comment="прим. (тех)" data-size="300" as="prim" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="polzov" type="string" title="" data-size="50" as="polzov" />
        <column table="a" column="num_contr" type="string" title="" comment="номер ад (год+№)" data-size="50" as="num_contr" />
        <column table="a" column="num_req" type="string" title="Номер заявки" comment="номер заявки (год+№)" data-size="50" as="num_req" />
        <column table="a" column="dat_send" type="date" title="" comment="дата отправления запроса(тех)" as="dat_send" />
        <column table="a" column="dat_get" type="date" title="" comment="дата получения запроса(тех)" as="dat_get" />
        <column table="a" column="text_zapr" type="string" title="" comment="текст запроса на спр. на мощность(тех.)" data-size="50" as="text_zapr" />
        <column table="a" column="dat_vip" type="date" title="" comment="срок оказания услуг (тех.инф)" as="dat_vip" />
        <column table="a" column="dat_dc" type="date" title="" comment="дата по доп. соглаш. (тех. инф)" as="dat_dc" />
        <column table="a" column="vip" type="number" title="" comment="признак vip объекта" as="vip" />
        <column table="a" column="kod_spr_folders" type="number" comment="код папки" as="kod_spr_folders" />
        <column table="a" column="num_ouco" type="string" comment="номер оусо (гг-9999)" title="Уникальный номер договора" data-size="20" as="num_ouco" />
        <column table="a" column="dat_ouco" type="date" title="" comment="дата регистр. в оусо" as="dat_ouco" />
        <column table="a" column="status" type="number" title="" comment="статус" as="status" reference="is_status" refcol="status" />
        <column table="a" column="num_ad" type="string" title="Номер договора" comment="номер ад (полный)" data-size="250" as="num_ad" />
        <column table="a" column="num_ad_pref" type="string" title="Номер договора (полный)" comment="номер ад (полный)" data-size="250" as="num_ad_pref" />
        <column table="a" column="contr_sumf" type="number" title="Cумма по договору" comment="сумма по договору" as="contr_sumf" />
        <column table="a" column="zona" type="string" title="Зона" comment="зона" data-size="250" as="zona" />
        <column table="a" column="dat_end" type="date" title="Дата закрытия договора" comment="дата закрытия договора" as="dat_end" />
        <column table="a" column="dat_sl_zap" type="date" title="" comment="дата получения служ. записки" as="dat_sl_zap" />
        <column table="a" column="dat_per_sl_zap" type="date" title="" comment="дата передачи служ. записки" as="dat_per_sl_zap" />
        <column table="a" column="lp_addr" type="string" title="Адрес подключения" comment="адрес ту" data-size="250" as="lp_addr" />
        <column table="a" column="cust_addr" type="string" title="Адрес абонента" comment="адрес абонента (текст)" data-size="250" as="cust_addr" />
        <column table="a" column="cm_case" type="string" title="" comment="вид графика оплат" data-size="250" as="cm_case" />
        <column table="a" column="kn_cm_case" type="number" title="" comment="код вида графика оплат" as="kn_cm_case" />
        <column table="a" column="kn_zone" type="number" title="" comment="код зоны" as="kn_zone" />
        <column table="a" column="kn_sert" type="number" title="" comment="код спр.на мощность" as="kn_sert" />
        <column table="a" column="dt_sert" type="date" title="" comment="дата регистрации спр. на мощность" as="dt_sert" />
        <column table="a" column="kn_supply" type="number" title="" comment="код источника питания" as="kn_supply" />
        <column table="a" column="supply" type="string" title="" comment="источник питания" data-size="250" as="supply" />
        <column table="a" column="load_point" type="string" title="" comment="ту" data-size="500" as="load_point" />
        <column table="a" column="load1" type="number" title="Мощность заявл. кат. 1" comment="мощность кат 1" as="load1" />
        <column table="a" column="load2" type="number" title="Мощность заявл. кат. 2" comment="мощность кат 2" as="load2" />
        <column table="a" column="load3" type="number" title="Мощность заявл. кат. 3" comment="мощность кат 3" as="load3" />
        <column table="a" column="load_existed" type="number" title="" comment="мощность существующая" as="load_existed" />
        <column table="a" column="kn_contr_kind" type="number" title="" comment="код типа ад" as="kn_contr_kind" reference="as_contr_kind" refcol="kn_contr_kind" />
        <column table="a" column="contr_kind" type="string" title="Вид договора" comment="тип ад" data-size="250" as="contr_kind" />
        <column table="a" column="kn_customer" type="number" title="" comment="код абонента" column-mandatory="1" as="kn_customer" />
        <column table="a" column="customer" type="string" title="ФИО абонента" comment="абонент" data-size="250" as="customer" />
        <column table="a" column="contr_note" type="string" title="" comment="примечание" data-size="4000" as="contr_note" />
        <column table="a" column="dts_final" type="string" title="" comment="срок оказания услуги (текст цркп)" data-size="250" as="dts_final" />
        <column table="a" column="ks_region" type="string" title="" comment="район" data-size="250" as="ks_region" />
        <column table="a" column="kn_req" type="number" title="" comment="код заявки" as="kn_req" />
        <column table="a" column="contr_year" type="number" title="" comment="год ад" as="contr_year" />
        <column table="a" column="contr_num" type="string" title="" comment="номер ад" data-size="50" as="contr_num" />
        <column table="a" column="req_year" type="number" title="" comment="год заявки" as="req_year" />
        <column table="a" column="req_num" type="string" title="" comment="номе заявки" data-size="50" as="req_num" />
        <column table="a" column="fl_build" type="number" title="Признак наличия работ ЛЭ" comment="признак наличия работ лэ" as="fl_build" />
        <column table="a" column="dt_contract" type="date" title="Дата начала договора" comment="дата подписания ад (цркп)" as="dt_contract" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="srok_uslug" type="date" title="Срок окончания договора" comment="срок оказания услуг (оусо)" is-fact="1" agg="max" as="srok_uslug" fact="is_dop_contract_srok_uslug" />
        <column table="a" column="kod_spr_kurators_ad" type="number" comment="куратор ад" as="kod_spr_kurators_ad" />
        <column table="a" column="kod_spr_kurators_req" type="number" comment="куратор заявки" as="kod_spr_kurators_req" />
        <column table="a" column="sum_rated" type="number" title="" comment="расчитанная по заявке" as="sum_rated" />
        <column table="a" column="contr_sum_m" type="number" title="Стоимость денежная" comment="денежная" fact="id_dop_cont_contr_sum_m" agg="sum" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="Стоимость имущественная" comment="имущественная" fact="id_dop_cont_contr_sum_e" agg="sum" as="contr_sum_e" />
        <column table="a" column="kn_contract_p" type="number" title="" comment="родительский код договора" as="kn_contract_p" />
        <column table="a" column="contr_kn_house" type="number" title="" comment="код адреса абонента" column-mandatory="1" as="contr_kn_house" reference="k_house" refcol="kodd" />
        <column table="a" column="contr_addr_type" type="number" title="" comment="тип адреса абонента" as="contr_addr_type" />
        <column table="a" column="req_kn_house" type="number" title="" comment="код адреса подключения" column-mandatory="1" as="req_kn_house" reference="k_house" refcol="kodd" />
        <column table="a" column="req_addr_type" type="number" title="" comment="тип адреса подключения" as="req_addr_type" />
        <column table="a" column="kodres" type="number" title="Район (РЭС)" comment="код района электрической сети" as="kodres" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="num_ds" type="number" title="" comment="№ доп. соглашения" as="num_ds" />
        <column table="a" column="progr" type="number" title="" comment="1-целевая программа,2-адресная программа" as="progr" />
        <column table="a" column="uvedom" type="number" title="" comment="уведомление о реуструктуризации" as="uvedom" />
        <column table="a" column="dog_num" type="number" title="" comment="номер оусо в пределах года оусо" as="dog_num" />
        <column table="a" column="dog_year" type="number" title="" comment="год оусо" as="dog_year" />
        <column table="a" column="id" type="string" title="" comment="идентификатор одинаковых старых №№ ад" data-size="15" as="id" />
        <column table="a" column="kod_vol" type="number" comment="код спр. уровня напряжения" as="kod_vol" />
        <column table="a" column="exp_num" type="string" title="" comment="номер протокола экспертной группы" data-size="20" as="exp_num" />
        <column table="a" column="exp_dat" type="date" title="" comment="дата экспертной группы" as="exp_dat" />
        <column table="a" column="dt_request" type="date" title="" comment="дата заявки" as="dt_request" />
        <column table="a" column="uvedom_r" type="number" title="" comment="уведомление о реструктуризации" as="uvedom_r" />
        <column table="a" column="dat_uv" type="date" title="" as="dat_uv" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="kod_vid_uvedom" type="number" as="kod_vid_uvedom" reference="is_spr_vid_uvedom" refcol="kod_vid_uvedom" />
        <column table="a" column="god_tarif" type="number" title="" as="god_tarif" />
        <column table="a" column="kod_pr_zayav" type="number" comment="код признака заявителя" as="kod_pr_zayav" />
        <column table="a" column="dat_ks" type="date" title="" comment="дата передачи в кс" as="dat_ks" />
        <column table="a" column="god_ip" type="number" title="" comment="инвест.пр-ма (год)" as="god_ip" />
        <column table="a" column="built" type="number" title="" comment="построена:да или нет" as="built" />
        <column table="a" column="equiped" type="number" title="" comment="оборудована:да или нет" as="equiped" />
        <column table="a" column="city_or_owner" type="number" title="" comment="0-пусто,1-город,2-собственник" as="city_or_owner" />
        <column table="a" column="guess_sum" type="number" title="" comment="стоимость проекта (оценка)" as="guess_sum" />
        <column table="a" column="dat_rastorg" type="date" comment="дата расторжения дог-ра" title="Дата расторжения договора" as="dat_rastorg" />
        <column table="a" column="kod_podr_create" type="number" comment="код подразделения,в к-м зарегестр.дог-р" as="kod_podr_create" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="kod_spr_pril_ip" type="number" comment="код спр-ка приложения ип" as="kod_spr_pril_ip" reference="is_spr_pril_ip" refcol="kod_spr_pril_ip" />
        <column table="a" column="kn_supply_tmp" type="string" title="" comment="временная колонка для записи старых кодов ист питания" data-size="50" as="kn_supply_tmp" />
        <column table="a" column="s_tmp" type="string" title="" comment="для временного хранение перекодированных кодов" data-size="50" as="s_tmp" />
        <column table="a" column="ind_proekt" type="number" title="" comment="тариф по индивидуальным затратам" as="ind_proekt" />
        <column table="a" column="kod_group" type="number" comment="номер группы" as="kod_group" />
        <column table="a" column="korr_ip" type="number" title="" comment="корректировка ип" as="korr_ip" />
        <column table="a" column="dat_sogl" type="date" title="" comment="дата согл по проекту" as="dat_sogl" />
        <column table="a" column="dat_beg_pr" type="date" title="" comment="дата начала работ подр.орг." as="dat_beg_pr" />
        <column table="a" column="dat_vkl" type="date" title="" comment="дата указания на вкл." as="dat_vkl" />
        <column table="a" column="cnt_mes" type="number" title="" comment="период рассрочки,месяцев" as="cnt_mes" />
        <column table="a" column="limit_s" type="number" title="" comment="лимит" as="limit_s" />
        <column table="a" column="dat_pres_eq" type="date" title="" comment="дата наличия закупленного оборудов" as="dat_pres_eq" />
        <column table="a" column="dat_agr_land" type="date" title="" comment="дата наличия догов на землю" as="dat_agr_land" />
        <column table="a" column="dat_end_pr" type="date" title="" comment="дата окончания работ(подр)" as="dat_end_pr" />
        <column table="a" column="dat_sogl_ird" type="date" title="" comment="дата согласования ирд" as="dat_sogl_ird" />
        <column table="a" column="mldat_sogl" type="string" title="" comment="примечание к  датам согл(кс)" data-size="250" as="mldat_sogl" />
        <column table="a" column="mldat_agr_land" type="string" title="" comment="примечание к дате договора на землю" data-size="250" as="mldat_agr_land" />
        <column table="a" column="load_ex1" type="number" title="Мощность сущ. кат.1" comment="мощность сущ. кат.1" as="load_ex1" />
        <column table="a" column="load_ex2" type="number" title="Мощность сущ. кат.2" comment="мощность сущ. кат.2" as="load_ex2" />
        <column table="a" column="load_ex3" type="number" title="Мощность сущ. кат.3" comment="мощность сущ. кат.3" as="load_ex3" />
        <column table="a" column="d_s" type="date" title="" comment="дата создания" as="d_s" />
        <column table="a" column="vid_atp" type="string" title="" comment="вид атп(врем/пост)" data-size="50" as="vid_atp" />
        <column table="a" column="dt_act" type="date" title="" comment="дата акта о бездогов.использ" as="dt_act" />
        <column table="a" column="dat_vip_rab" type="date" title="" comment="дата справки о выполнении работ" as="dat_vip_rab" />
        <column table="a" column="num_vip_rab" type="string" title="" comment="номер справки об оконч работ" data-size="20" as="num_vip_rab" />
        <column table="a" column="nkod_rab" type="number" comment="работа код" as="nkod_rab" />
        <column table="a" column="nkod_oblig" type="number" comment="обязательства код" as="nkod_oblig" />
        <column table="a" column="kod_zpr" type="number" comment="QR.kod_zpr ссылка" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" />
        <column table="a" column="kod_or_sum" type="number" comment="признак заключ.ад по ориент.стоимости" as="kod_or_sum" />
        <column table="a" column="kn_customer_pres" type="number" title="" comment="старый код абонента" as="kn_customer_pres" />
        <column table="a" column="dat_tz_ks" type="date" title="" comment="тз передано в кс(капстрой)" as="dat_tz_ks" />
        <column table="a" column="dat_ks_11" type="date" title="" comment="кс-11-дата пол. справки(кураторы)" as="dat_ks_11" />
        <column table="a" column="dat_plan_atp" type="date" title="" comment="планируемая срок запроса атп" as="dat_plan_atp" />
        <column table="a" column="kod_vid_ds" type="number" comment="код спр. вида доп. соглашения" as="kod_vid_ds" reference="is_spr_vid_ds" refcol="kod_vid_ds" />
        <column table="a" column="sum_ip" type="number" title="" comment="сумма работ на ип" as="sum_ip" />
        <column table="a" column="sum_rs" type="number" title="" comment="сумма работ по рс" as="sum_rs" />
        <column table="a" column="kn_supply1" type="number" title="" comment="код источника питания -1" as="kn_supply1" />
        <column table="a" column="load_units" type="string" title="" comment="ед. измерения" data-size="15" as="load_units" />
        <column table="a" column="supply1" type="string" title="" comment="источника питания -2" data-size="250" as="supply1" />
        <column table="a" column="sum_ds_m" type="number" title="" comment="сумма по д/с денежная (дельту не хотят считать, дельта будет сидеть в contr_sum_m )" as="sum_ds_m" />
        <column table="a" column="sum_ds_e" type="number" title="" comment="сумма по д/с имущественная (дельту не хотят считать, дельта будет сидеть в contr_sum_m )" as="sum_ds_e" />
        <column table="a" column="folder" type="string" title="" comment="папка ад" data-size="250" as="folder" />
        <column table="a" column="fl_work_ps" type="number" title="" comment="признак наличия работ на источнике" as="fl_work_ps" />
        <column table="a" column="fl_work_net" type="number" title="" comment="признак наличия работ на распред. сети" as="fl_work_net" />
        <column table="a" column="dt_indtar_got" type="date" title="" comment="дата получения индивид. тарифа" as="dt_indtar_got" />
        <column table="a" column="fl_loss" type="number" title="" comment="признак  убыточности" as="fl_loss" />
        <column table="a" column="fl_rotate" type="number" title="" comment="очередь" as="fl_rotate" />
        <column table="a" column="dat_status_1" type="date" title="" comment="перевод статуса в действ./учтен в осн. договоре" as="dat_status_1" />
        <column table="a" column="dat_status_2" type="date" title="" comment="перевод в статус аннулирован" as="dat_status_2" />
        <column table="a" column="dat_status_4" type="date" title="" comment="перевод в статус выполнен" as="dat_status_4" />
        <column table="a" column="fl_rnk_not" type="number" title="" as="fl_rnk_not" />
        <column table="a" column="fl_build_z" type="number" title="" comment="наличие работ заявителя" as="fl_build_z" />
        <column table="a" column="proc" type="number" title="" comment="% ндс(для оплаты)" as="proc" />
        <column table="a" column="kn_voltage" type="number" title="" comment="уровень напряжения в тп1" as="kn_voltage" />
        <column table="a" column="kod_obj_old" type="number" as="kod_obj_old" />
        <column table="a" column="user_modify" type="string" title="" data-size="30" as="user_modify" />
        <column table="a" column="titul_ip" type="number" title="" comment="номер титула ип" as="titul_ip" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" />
        <column table="a" column="kod_vid_ad" type="number" comment="вид договора" as="kod_vid_ad" />
        <column table="a" column="user_web" type="string" title="" data-size="50" as="user_web" />
        <column table="a" column="kod_parent_cp" type="number" comment="родит. абон. договор по целевой программе" as="kod_parent_cp" />
        <column table="a" column="pr_sum" type="number" title="" comment="вид стоимости ад " as="pr_sum" />
        <column table="a" column="fl_work_pu" type="number" title="" comment="признак наличия работ по пу" as="fl_work_pu" />
        <column table="a" column="fl_build_z_vip" type="number" title="" comment="признак выполнения работ заявителем" as="fl_build_z_vip" />
        <column table="a" column="fl_build_vip" type="number" title="" comment="признак выполнения работ лэ" as="fl_build_vip" />
        <column table="a" column="kod_vol_old" type="number" as="kod_vol_old" />
        <column table="a" column="otl_usl" type="string" title="" comment="отлагательные условия" data-size="2000" as="otl_usl" />
        <column table="a" column="stage" type="number" title="" comment="этапы" as="stage" />
        <column table="a" column="sso" type="number" title="" comment="ссо" as="sso" />
        <column table="a" column="dat_close_deb_zadol" type="date" title="" comment="дата погашения дебиторской задолженности" as="dat_close_deb_zadol" />
        <column table="a" column="kod_kat_zayav" type="number" comment="код спр. категория заявителя" as="kod_kat_zayav" />
        <column table="a" column="kod_mo" type="number" comment="код сельского поселения" title="Сельское поселение" as="kod_mo" />
        <column table="a" column="pr_ofz" type="number" title="" comment="признак офз" as="pr_ofz" />
        <column table="a" column="pr_ofz_fin" type="number" title="" comment="финансировано из офз" as="pr_ofz_fin" />
        <column table="a" column="pr_ofz_vkl" type="number" title="" comment="включено в офз" as="pr_ofz_vkl" />
        <column table="a" column="pr_ofz_vip" type="number" title="" comment="выполнено по офз" as="pr_ofz_vip" />
        <column table="a" column="kod_filial" type="number" title="Филиал, к которому относится договор ТП " comment="филиал" as="kod_filial" />
        <column table="a" column="pr_ad_iskl" type="number" title="" comment="договор-исключение вид оплаты оди" as="pr_ad_iskl" />
        <column table="a" column="kn_load_type" type="number" title="" comment="код типа заявки(первоначально из аппсерв)" as="kn_load_type" reference="as_load_type" refcol="kn_load_type" />
        <column table="a" column="kod_podr_pref" type="number" comment="префик подразделения в чью зону отв-ти входит договор" as="kod_podr_pref" />
        <column table="a" column="pr_db" type="number" title="" comment="не редактируется - приходит из асу птп" as="pr_db" />
        <column table="a" column="dat_uv_el_ust" type="date" title="" comment="дата выполнения работ заявителем" as="dat_uv_el_ust" />
        <column table="a" column="dat_spis_kz" type="date" title="" as="dat_spis_kz" />
        <column table="a" column="um_status_1" type="string" title="" data-size="50" as="um_status_1" />
        <column table="a" column="kod_vid_otl_usl" type="number" comment="код спр видов отлаг условий" as="kod_vid_otl_usl" />
        <column table="a" column="dat_srok_otl_usl" type="date" title="" comment="дата действия отлагат условий" as="dat_srok_otl_usl" />
        <column table="a" column="kod_group_lp" type="number" comment="код группы точек подключения" as="kod_group_lp" reference="is_spr_group_lp" refcol="kod_group_lp" />
        <column table="a" column="id_infsys" type="number" title="" comment="еск: &lt;fk&gt; id информац системы при создании" as="id_infsys" reference="ek_information_system" refcol="id_infsys" />
        <column table="a" column="dat_read_to_close" type="date" title="" comment="дата уведом о готовности к закрытию" as="dat_read_to_close" />
        <column table="a" column="folder_user" type="string" title="" comment="пользователь, изменивший № папки" data-size="50" as="folder_user" />
        <column table="a" column="folder_date" type="date" title="" comment="дата создания № папки" as="folder_date" />
        <column table="a" column="kod_razd_okved" type="number" comment="раздел оквэд (выставляется по подк объекту, но иногда из контрагента)" as="kod_razd_okved" />
        <column table="a" column="exp_prim" type="string" title="" comment="причина передачи сз в дпо" data-size="2000" as="exp_prim" />
        <column table="a" column="vrem_tp" type="number" title="" comment="признак временного тп" as="vrem_tp" />
        <column table="a" column="dat_fact_vol" type="date" title="" comment="дата факт подачи напряжения" as="dat_fact_vol" />
        <column table="a" column="kod_spr_prior" type="number" comment="признак приоритетности" as="kod_spr_prior" reference="is_spr_prior_ad" refcol="kod_spr_prior" />
        <column table="a" column="load_point1" type="string" title="" comment="точка подключения 2" data-size="500" as="load_point1" />
        <column table="a" column="kn_voltage1" type="number" title="" comment="уровень напряжения в тп2" as="kn_voltage1" />
        <column table="a" column="srok_tu" type="date" title="" comment="срок действия ту" as="srok_tu" />
        <column table="a" column="kod_vol1" type="number" comment="код спр. уровня напряжения в точке подкл.2" as="kod_vol1" />
        <column table="a" column="kn_supply1_not" type="number" title="" comment="источник питания 2 - нет (отсутствует)" as="kn_supply1_not" />
        <column table="a" column="load_point1_not" type="number" title="" comment="точка подключения 2 - нет (отсутствует)" as="load_point1_not" />
        <column table="a" column="kn_voltage1_not" type="number" title="" comment="уровень напряжения в тп 2 - нет (отсутствует)" as="kn_voltage1_not" />
        <column table="a" column="fiz_tu" type="number" title="" comment="физические объемы ту - 0-не выбрано, 1- да, 2 - нет" as="fiz_tu" />
        <column table="a" column="n_pril" type="string" title="№ приложения" comment="№ приложения" data-size="50" as="n_pril" />
        <column table="a" column="kod_group_lp1" type="number" comment="код группы точек подключения 2" as="kod_group_lp1" />
        <column table="a" column="name_obj" type="string" title="" comment="наименование объекта" data-size="250" as="name_obj" />
        <column table="a" column="pr_ofz_iskl" type="number" title="" comment="исключен из офз" as="pr_ofz_iskl" />
        <column table="a" column="kod_mobr" type="number" comment="код муницип образования" title="Муниципальное образование" as="kod_mobr" />
        <column table="a" column="kod_nasp" type="number" comment="код населенного пункта" title="Населенный пункт" as="kod_nasp" reference="is_spr_nasp" refcol="kod_nasp" />
        <column table="a" column="folder_ofz" type="string" title="" comment="папка архива офз" data-size="250" as="folder_ofz" />
        <column table="a" column="id_oktmo" type="number" title="" comment="Код-ссылка на запись в справочнике ОКТМО" as="id_oktmo" />
        <column table="a" column="pr_num_pref_control" type="number" title="" comment="Номер дог-ра проверен" as="pr_num_pref_control" />
        <column table="a" column="dat_got_to_close" type="date" title="" comment="Дата получения уведом о готовности заявителя к закрытию" as="dat_got_to_close" />
        <column table="a" column="cnt_mes_tp" type="date" title="" comment="Срок вып. мер ТПр" as="cnt_mes_tp" />
        <column table="a" column="kod_org_active" type="number" comment="Организация для выполнения актирования" as="kod_org_active" />
        <column table="a" column="dat_plan_imug" type="date" title="" comment="Плановая дата выполнения по имуществу" as="dat_plan_imug" />
        <column table="a" column="pr_sogl_el_sign" type="number" title="" comment="Признак Согласие заявителя на электронное согласование" as="pr_sogl_el_sign" />
        <column table="a" column="pr_owner_land" type="number" title="" comment="Признак лица,владеющего зем.уч. по дог/аренды на срок &lt;=1 года, на кот. располож. присоединяемые ЭУ" as="pr_owner_land" />
        <column table="a" column="pr_tp_appart" type="number" title="" comment="Признак: ТП ЭУ расположены в жилых помещениях многоквартирных домов" as="pr_tp_appart" />
        <column table="a" column="pr_oposred_pris" type="number" title="" comment="Признак опосредованного присоединение через существующие сети" as="pr_oposred_pris" />
        <column table="a" column="kol_memb" type="number" title="" comment="Количество членов объединения" as="kol_memb" />
        <column table="a" column="kod_exp" type="number" comment="Код Причины СЗ в ДПО" as="kod_exp" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" comment="Признак хозспособа" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" comment="Признак наличия подрядных договоров" as="pr_exist_pd" />
        <column table="a" column="dat_plan_rab" type="date" title="" comment="Плановая дата работ" as="dat_plan_rab" />
        <column table="a" column="dat_status_5" type="date" title="" comment="дата статуса Приостановлен" as="dat_status_5" />
        <column table="a" column="dat_status_30" type="date" title="" comment="дата статуса Претенз-иск" as="dat_status_30" />
        <column table="a" column="pr_nonprofit" type="string" title="" comment="Признак некоммерч орган на АД" data-size="5" as="pr_nonprofit" />
        <column table="a" column="kod_spr_ini_prod" type="number" comment="Инициатор продления" as="kod_spr_ini_prod" reference="is_spr_ini_prod" refcol="kod_spr_ini_prod" />
        <column table="a" column="dt_bus_plan" type="date" title="" comment="дата бизнес план" as="dt_bus_plan" />
        <column table="a" column="kod_rs" type="number" comment="расч.счет" as="kod_rs" />
        <column table="a" column="count_list_tu" type="number" title="" comment="Кол-во листов ТУ" as="count_list_tu" />
        <column table="a" column="srok_uslug_text" type="string" title="" comment="Срок выполнения мероприятий (текст для шаблона дог)" data-size="250" as="srok_uslug_text" />
        <column table="a" column="kod_ini_prod_ds" type="number" comment="Инициатор продления доп.согл" as="kod_ini_prod_ds" reference="is_spr_ini_prod" refcol="kod_spr_ini_prod" />
        <column table="a" column="kod_zayav" type="number" comment="C_ZAYAV ссылкм" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="srok_usl_count" type="number" title="" comment="кол-во (дн,мес,лет)" as="srok_usl_count" />
        <column table="a" column="kod_spr_srok_usl" type="number" comment="1-дни,2-мес,3-лет" as="kod_spr_srok_usl" reference="is_spr_doc" refcol="kod_spr_doc" />
        <column table="a" column="dat_status_cr_2" type="date" title="" comment="Дата первоначального перевода в статус Аннул" as="dat_status_cr_2" />
        <column table="a" column="kod_dzo_bus_plan" type="number" comment="Код дзо бизнес плана" as="kod_dzo_bus_plan" reference="is_org_active" refcol="kod" />
        <column table="a" column="date_mo" type="date" title="" comment="Дата мотивир. отказа (тип документа)" as="date_mo" />
        <column table="a" column="date_obr" type="date" title="" comment="Дата обращения (тип документа)" as="date_obr" />
        <column table="a" column="pr_zam_stor" type="number" title="" comment="Заменя стороны ПЭС/СПбЭС на ЛЭ" as="pr_zam_stor" />
        <column table="a" column="dat_zam_stor" type="date" title="" comment="Дата заменя стороны" as="dat_zam_stor" />
        <column table="a" column="srok_bus_plan" type="string" data-size="250" title="" comment="Срок по БП (текст)" as="srok_bus_plan" />
        <column table="a" column="dat_prognoz_od" type="date" title="" comment="Прогноз ОД" as="dat_prognoz_od" />
        <column table="a" column="kod_graf_opl" type="number" comment="код шаблона графика оплат" as="kod_graf_opl" />
        <column table="a" column="date_protokol_razn" type="date" title="" comment="Дата - Протокол разногласий " as="date_protokol_razn" />
        <column table="a" column="pr_kurator" type="number" title="" comment="1-добавлен по маршруту,0-изменен по функции,2-не менять по фукнции" as="pr_kurator" />
        <column table="a" column="pr_goz" type="number" title="" comment="1-признак гособоронзаказ" as="pr_goz" />
        <column table="a" column="num_goz" type="string" data-size="250" title="" comment="№ в реестре гос.контрактов" as="num_goz" />
        <column table="a" column="dat_plan_pir" type="date" title="" comment="Плановый срок ПИР - расчетов от даты нач дог-ра + 120 дн (в settings) - на триггере QR_TU_ENERGO" as="dat_plan_pir" />
        <column table="a" column="dat_plan_smr" type="date" title="" comment="Плановый срок СМР - расчетом от даты нач дог-ра + 160 дн (в settings) - на триггере QR_TU_ENERGO" as="dat_plan_smr" />
        <column table="a" column="pr_mixed" type="number" title="" comment="Способ выполнения работ ЛЭ: смешанный" as="pr_mixed" />
        <call function="case" as="kod_region" type="number">
          <call function="when">
            <call function="=">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="gt">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="case" as="name_region" title="Регион" type="string">
          <call function="when">
            <call function="=">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>'Ленинградская область'</const>
          </call>
          <call function="when">
            <call function="gt">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>'Санкт-Петербург'</const>
          </call>
        </call>
        <call function="case" as="name_region_kr" title="Регион" type="string">
          <call function="when">
            <call function="=">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>'ЛО'</const>
          </call>
          <call function="when">
            <call function="gt">
              <column table="a" column="kn_zone" />
              <const>0</const>
            </call>
            <const>'СПб'</const>
          </call>
        </call>
        <column table="id_oktmo" column="name_mo" as="name_r" title="Район" qlikview="1" fact="is_dop_contract_name_r" agg="stragg_dist" />
        <column table="kod_direct" column="name_kr" as="name_r_kr" title="Район кр" qlikview="1" />
        <column table="id_oktmo" column="name_sp" as="sel_pos_name" qlikview="1" fact="is_dop_cont_sel_pos_name" agg="stragg_dist" title="Сельское поселение" />
        <column table="id_oktmo" column="name" as="nasp_name" qlikview="1" fact="is_dop_cont_nasp_name" agg="stragg_dist" title="Населенный пункт" />
        <column table="kod_podr_create" column="name" as="name_f" title="Филиал" qlikview="1" />
        <column table="kod_podr_create" column="name_kr" as="name_f_kr" title="Филиал кр" qlikview="1" />
        <column table="kn_supply" column="supply" as="name_supply" qlikview="1" />
        <column table="kod_dop_contract_dop" column="power" title="заявленная мощность" as="power" />
        <column table="kod_dop_contract_dop" column="category" title="категория надежности" as="category" />
        <call function="+nvl" as="load123" title="Заявленная мощность">
          <column table="a" column="load1" />
          <column table="a" column="load2" />
          <column table="a" column="load3" />
        </call>
        <call function="+nvl" as="loadex123" title="Cуществующая мощность">
          <column table="a" column="load_ex1" />
          <column table="a" column="load_ex2" />
          <column table="a" column="load_ex3" />
        </call>
        <call function="+nvl" as="load_all" title="Суммарная мощность">
          <column table="this" column="load123" />
          <column table="this" column="loadex123" />
        </call>
        <call function="if" as="load123_kvt" title="Заявленная мощность, кВт" agg="sum" fact="is_dop_cont_load123_kvt">
          <call function="=">
            <column table="a" column="load_units" />
            <const>'кВА'</const>
          </call>
          <call function="*">
            <column table="this" column="load123" />
            <call function="is_du.f_koef_load_units">
              <column table="this" column="kod_dop_contract" />
            </call>
          </call>
          <column table="this" column="load123" />
        </call>
        <call function="if" as="load_all_kvt" title="Суммарная мощность, кВт" fact="is_dop_cont_load_all_kvt" agg="sum">
          <call function="=">
            <column table="a" column="load_units" />
            <const>'кВА'</const>
          </call>
          <call function="*">
            <column table="this" column="load_all" />
            <call function="is_du.f_koef_load_units">
              <column table="this" column="kod_dop_contract" />
            </call>
          </call>
          <column table="this" column="load_all" />
        </call>
        <call function="+nvl" as="req_year_fl">
          <column table="a" column="req_year" />
          <const>2000</const>
        </call>
        <const as="cnt_kod_dop_contract" type="number" fact="is_dop_cont_count" agg="sum">1</const>
        <call function="if" as="fl_build_dop" type="number">
          <call function="and">
            <call function="!=0">
              <column table="a" column="contr_sum_e" />
            </call>
            <call function="=0">
              <column table="a" column="contr_sum_m" />
            </call>
          </call>
          <const>2</const>
          <column table="a" column="fl_build" />
        </call>
        <call function="case" as="kod_spr_load" type="number">
          <call function="when">
            <call function="lt">
              <call function="+nvl">
                <column table="this" column="load123_kvt" />
                <column table="this" column="load_all_kvt" />
              </call>
              <const>15</const>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="between">
              <call function="+nvl">
                <column table="this" column="load123_kvt" />
                <column table="this" column="load_all_kvt" />
              </call>
              <const>15</const>
              <const>150</const>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="gt">
              <call function="+nvl">
                <column table="this" column="load123_kvt" />
                <column table="this" column="load_all_kvt" />
              </call>
              <const>150</const>
            </call>
            <const>3</const>
          </call>
        </call>
        <call function="case" as="isp_info" type="string">
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz_vip" />
              <const>1</const>
            </call>
            <const>'исполнено'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz" />
              <const>1</const>
            </call>
            <const>'не исполнено'</const>
          </call>
        </call>
        <call function="case" as="kod_ofz_state" type="number">
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz_vip" />
              <const>1</const>
            </call>
            <const>4</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz_fin" />
              <const>1</const>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz_vkl" />
              <const>1</const>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="pr_ofz" />
              <const>1</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="substr" as="num_ad_pref_no_dat" title="Номер договора (полный без даты)">
          <column table="a" column="num_ad_pref" />
          <const>0</const>
          <call function="-nvl">
            <call function="instr">
              <column table="a" column="num_ad_pref" />
              <const>'от'</const>
            </call>
            <const>2</const>
          </call>
        </call>
        <call function="nvl" as="num_ad_pref_nvl" type="string">
          <column table="this" column="num_ad_pref" />
          <call function="||">
            <column table="this" column="num_ouco" />
            <const>'/'</const>
            <column table="this" column="num_req" />
            <const>' от '</const>
            <call function="date to char">
              <column table="this" column="dt_contract" />
            </call>
          </call>
        </call>
        <call function="if" as="vid_opl" type="string" title="Вид оплаты договора">
          <call function="or">
            <call function="!=0">
              <column table="a" column="contr_sum_e" />
            </call>
            <call function="=1">
              <column table="a" column="pr_ad_iskl" />
            </call>
          </call>
          <const>'ОДИ'</const>
          <const>'ОД'</const>
        </call>
        <call function="+nvl" as="contr_sum" is-fact="1" fact="is_dop_cont_contr_sum" agg="sum" title="Стоимость">
          <column table="this" column="contr_sum_m" />
          <column table="this" column="contr_sum_e" />
        </call>
        <call function="asuse.get_srcdnum" title="Источник питания" as="ist_pit">
          <column table="a" column="kn_supply" />
        </call>
        <call function="date to char" as="srok_uslug_str" is-fact="1" agg="stragg" fact="is_dop_contract_srok_uslug_str">
          <column table="a" column="srok_uslug" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_dop_contract" as="a" title="Абонентские договоры">
          <dlink name="ipr_titul_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ipr_titul_dop_contract" table="ipr_titul_dop_contract" child="ipr_titul_dop_contract" field="kod_dop_contract" parent="is_dop_contract" back="ipr_titul_dop_contract">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_ipr" dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" />
          </dlink>
          <link name="kod_dop_contr_anl" as="kod_dop_contr_anl" table="vr_dop_contr_anl" child="is_dop_contract" field="kod_dop_contr_anl" parent="vr_dop_contr_anl" back="is_dop_contract">
            <link name="kod_dop_contr_anl_gr" dimension="1" as="kod_dop_contr_anl_gr" table="vr_dop_contr_anl_gr" child="vr_dop_contr_anl" field="kod_dop_contr_anl_gr" parent="vr_dop_contr_anl_gr" back="vr_dop_contr_anl" />
          </link>
          <dlink name="c_dop_doc" dimension="1" as="c_dop_doc" table="c_dop_doc" child="c_dop_doc" field="kod_dop_contract" parent="is_dop_contract" back="c_dop_doc">
            <where>
              <call function="=">
                <column table="c_dop_doc" column="kod_vid_doc" />
                <const>113</const>
              </call>
            </where>
          </dlink>
          <dlink name="as_sert_power_dop_contract" dimension="1" as="as_sert_power_dop_contract" table="as_sert_power_dop_contract" child="as_sert_power_dop_contract" field="kod_dop_contract" parent="is_dop_contract" back="as_sert_power_dop_contract" />
          <dlink name="is_reestr_44164" dimension="1" is-final-dimension="1" is-private-dimension="1" as="is_reestr_44164" table="is_reestr_44164" child="is_reestr_44164" field="kod_dop_contract" parent="is_dop_contract" back="is_reestr_44164" />
          <dlink name="is_atp_dop_info" dimension="1" is-final-dimension="1" is-private-dimension="1" as="is_atp_dop_info" table="is_atp_dop_info" child="is_atp_dop_info" field="kod_dop_contract" parent="is_dop_contract" back="is_atp_dop_info" />
        </table>
        <query name="is_spr_pril_ip" as="kod_spr_pril_ip" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_spr_pril_ip" />
            <column table="kod_spr_pril_ip" column="kod_spr_pril_ip" />
          </call>
        </query>
        <query name="is_spr_kurators" as="kod_spr_kurators_req" join="left outer" dname="is_dop_contract" title="Кураторы">
          <call function="=">
            <column table="a" column="kod_spr_kurators_req" />
            <column table="kod_spr_kurators_req" column="kod_spr_kurators" />
          </call>
        </query>
        <query name="is_status" as="status" join="left outer" dname="is_dop_contract" title="Статус">
          <call function="=">
            <column table="a" column="status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="as_request" as="kn_request" join="left outer" dname="is_dop_contract" title="Заявки">
          <call function="=">
            <column table="a" column="kn_req" />
            <column table="kn_request" column="kn_request" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="asv_spr_supply" as="kn_supply" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kn_supply" />
            <column table="kn_supply" column="kn_supply" />
          </call>
        </query>
        <query name="is_spr_vid_uvedom" as="kod_vid_uvedom" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_vid_uvedom" />
            <column table="kod_vid_uvedom" column="kod_vid_uvedom" />
          </call>
        </query>
        <query name="is_creditors" as="kn_customer" join="left outer" qlikview="0" dname="is_dop_contract" title="Контрагенты">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="e_code" />
          </call>
        </query>
        <query name="is_spr_kat_zayav" as="kod_kat_zayav" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_kat_zayav" />
            <column table="kod_kat_zayav" column="kod" />
          </call>
        </query>
        <query name="is_spr_vid_ds" as="kod_vid_ds" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_vid_ds" />
            <column table="kod_vid_ds" column="kod_vid_ds" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_parent_cp" join="left outer" dname="is_dop_contract" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_parent_cp" />
            <column table="kod_parent_cp" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_mo" as="kod_mo" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_mo" />
            <column table="kod_mo" column="kod" />
          </call>
        </query>
        <query name="as_load_type" as="kn_load_type" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kn_load_type" />
            <column table="kn_load_type" column="kn_load_type" />
          </call>
        </query>
        <query name="is_god" as="god_tarif" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="god_tarif" />
            <column table="god_tarif" column="god" />
          </call>
        </query>
        <query name="is_spr_vid_otl_usl" as="kod_vid_otl_usl" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_vid_otl_usl" />
            <column table="kod_vid_otl_usl" column="kod" />
          </call>
        </query>
        <query name="is_spr_group_lp" as="kod_group_lp" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_group_lp" />
            <column table="kod_group_lp" column="kod_group_lp" />
          </call>
        </query>
        <query name="is_spr_prior_ad" as="kod_spr_prior" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_spr_prior" />
            <column table="kod_spr_prior" column="kod_spr_prior" />
          </call>
        </query>
        <query name="is_spr_direct" as="kodres" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="a" column="kodres" />
            <column table="kodres" column="kod_direct" />
          </call>
        </query>
        <query name="as_contract" as="kn_contract" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kn_contract" />
            <column table="kn_contract" column="kn_contract" />
          </call>
        </query>
        <query name="is_spr_nasp" as="kod_nasp" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_nasp" />
            <column table="kod_nasp" column="kod_nasp" />
          </call>
        </query>
        <query name="isv_spr_classifier_oktmo" as="id_oktmo" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="id_oktmo" />
            <column table="id_oktmo" column="id" />
          </call>
        </query>
        <query name="is_spr_ini_prod" as="kod_spr_ini_prod" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_spr_ini_prod" />
            <column table="kod_spr_ini_prod" column="kod_spr_ini_prod" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left inner" dname="is_dop_contract" title="Контрагенты">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="is_spr_vid_otl_usl" as="kod" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_vid_otl_usl" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="is_spr_classifier_oktmo" as="id" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="id_oktmo" />
            <column table="id" column="id" />
          </call>
        </query>
        <query name="is_spr_mo" as="kod" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_mo" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="is_org_active" as="kod" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_org_active" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="is_spr_kurators" as="kod_spr_kurators" join="left outer" dname="is_dop_contract" title="Кураторы">
          <call function="=">
            <column table="a" column="kod_spr_kurators_req" />
            <column table="kod_spr_kurators" column="kod_spr_kurators" />
          </call>
        </query>
        <query name="is_god" as="god" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="god_tarif" />
            <column table="god" column="god" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_dop_contract" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_parent_cp" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_kat_zayav" as="kod" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_kat_zayav" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="is_rs_cr" as="kod_rs_cr" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_rs" />
            <column table="kod_rs_cr" column="kod_rs_cr" />
          </call>
        </query>
        <query name="qr_links" as="qr_links" join="left outer" dname="is_dop_contract">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dop_contract" />
              <call function="nvl">
                <column table="qr_links" column="kod_dog" />
                <column table="qr_links" column="pred_kod_dog" />
              </call>
            </call>
            <call function="is null">
              <column table="qr_links" column="kod_parent" />
            </call>
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="hr_eobject" as="kn_supply" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kn_supply" />
            <column table="kn_supply" column="eobj_id" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial" />
            <column table="kod_filial" column="kod_direct" />
          </call>
        </query>
        <query name="as_request" as="kn_req" join="left outer" dname="is_dop_contract" title="Заявки">
          <call function="=">
            <column table="a" column="kn_req" />
            <column table="kn_req" column="kn_request" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podr_create" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podr_create" />
            <column table="kod_podr_create" column="kod_direct" />
          </call>
        </query>
        <query name="as_load_kind" as="kod_obj" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kn_load_kind" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podr_pref" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_podr_pref" />
            <column table="kod_podr_pref" column="kod_direct" />
          </call>
        </query>
        <query name="k_house" as="contr_kn_house" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="contr_kn_house" />
            <column table="contr_kn_house" column="kodd" />
          </call>
        </query>
        <query name="k_house" as="req_kn_house" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="req_kn_house" />
            <column table="req_kn_house" column="kodd" />
          </call>
        </query>
        <query name="ek_information_system" as="id_infsys" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="id_infsys" />
            <column table="id_infsys" column="id_infsys" />
          </call>
        </query>
        <query name="is_spr_ini_prod" as="kod_ini_prod_ds" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_ini_prod_ds" />
            <column table="kod_ini_prod_ds" column="kod_spr_ini_prod" />
          </call>
        </query>
        <query name="is_rs_cr" as="kod_rs" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_rs" />
            <column table="kod_rs" column="kod_rs_cr" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_srok_usl" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_spr_srok_usl" />
            <column table="kod_spr_srok_usl" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_org_active" as="kod_dzo_bus_plan" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_dzo_bus_plan" />
            <column table="kod_dzo_bus_plan" column="kod" />
          </call>
        </query>
        <query name="is_spr_classifier_oktmo" as="id_oktmo" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="id_oktmo" />
            <column table="id_oktmo" column="id" />
          </call>
        </query>
        <query name="as_contr_kind" as="kn_contr_kind" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kn_contr_kind" />
            <column table="kn_contr_kind" column="kn_contr_kind" />
          </call>
        </query>
        <query name="is_org_active" as="kod_org_active" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="a" column="kod_org_active" />
            <column table="kod_org_active" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract_dop" as="kod_dop_contract_dop" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="kod_dop_contract_dop" column="kod_dop_contract" />
            <column table="a" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_build" as="fl_build" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="fl_build" column="id" />
            <column table="this" column="fl_build_dop" />
          </call>
        </query>
        <query name="is_spr_load" as="kod_spr_load" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="kod_spr_load" column="id" />
            <column table="this" column="kod_spr_load" />
          </call>
        </query>
        <query name="vr_dop_contr_anl" as="kod_dop_contr_anl" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="kod_dop_contr_anl" column="kod_dop_contract" />
            <column table="this" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_podkl_obj" as="kod_obj" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="kod_obj" column="kod_obj" />
            <column table="a" column="kod_obj" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_podr_pref" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="kod_podr_pref" column="kod_podr_pref" />
            <column table="a" column="kod_podr_pref" />
          </call>
        </query>
        <query name="is_org_active" as="kod_org_active" join="left outer" dname="is_dop_contract">
          <call function="=">
            <column table="kod_org_active" column="kod" />
            <column table="a" column="kod_org_active" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="is_dop_contract" title="Подразделения">
          <call function="=">
            <column table="kod_filial" column="kod_direct" />
            <column table="a" column="kod_filial" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_contract_korr" class="1" timestamp="07.02.2018 12:25:24" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contract_korr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="1" fixed="1" />
        <column table="a" column="kod_dop_ish" type="number" as="kod_dop_ish" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contract_korr" as="a" />
      </from>
    </query>
    <query name="is_dop_contr_dubl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contr_dubl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contr_dubl" type="number" column-mandatory="1" as="kod_dop_contr_dubl" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" column-mandatory="1" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="prizn" type="number" title="" as="prizn" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="prim" type="string" data-size="1000" title="" as="prim" key="0" />
        <column table="a" column="polzov" type="string" data-size="30" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="e_code_manual" type="number" title="" as="e_code_manual" reference="is_creditors_manual" refcol="e_code" key="0" />
        <column table="a" column="pr_buh" type="number" title="" comment="Для АТП от какого контрагента выводить информацию в реестре для бухгалтерии" as="pr_buh" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contr_dubl" as="a" />
        <query name="is_creditors_manual" as="e_code_manual" join="left outer" dname="is_dop_contr_dubl">
          <call function="=">
            <column table="a" column="e_code_manual" />
            <column table="e_code_manual" column="e_code" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_dop_contr_dubl" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_dop_contr_dubl" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_spr_doc" as="prizn" join="left outer" dname="is_dop_contr_dubl">
          <call function="=">
            <column table="a" column="prizn" />
            <column table="prizn" column="kod_spr_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_contr_task" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contr_task.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="Код договора" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="num_task" type="string" data-size="50" title="" comment="Номер задания" as="num_task" key="0" />
        <column table="a" column="kod_state" type="number" comment="Состояние" as="kod_state" reference="is_dop_contr_task_state" refcol="kod" key="0" />
        <column table="a" column="kod_type_task" type="number" column-mandatory="1" comment="Тип задания" as="kod_type_task" reference="is_dop_contr_task_type" refcol="kod" key="0" />
        <column table="a" column="date_task" type="date" column-mandatory="1" title="" comment="Дата задания" as="date_task" key="0" />
        <column table="a" column="type_person_from" type="number" title="" comment="Тип личности ОТ" as="type_person_from" key="0" />
        <column table="a" column="type_person_whom" type="number" title="" comment="Тип личности КОМУ" as="type_person_whom" key="0" />
        <column table="a" column="topic_task" type="string" data-size="250" title="" comment="Тема задания" as="topic_task" key="0" />
        <column table="a" column="content_task" type="string" data-size="1000" title="" comment="Содержание задания" as="content_task" key="0" />
        <column table="a" column="date_end" type="date" title="" comment="Срок выполнения" as="date_end" key="0" />
        <column table="a" column="kod_result" type="number" comment="Результат" as="kod_result" reference="is_dop_contr_task_result" refcol="kod" key="0" />
        <column table="a" column="prim" type="string" data-size="1000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="kod_parent" type="number" comment="Родительское задание (свзяь задание - выполнение)" as="kod_parent" reference="is_dop_contr_task" refcol="kod" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="file_data" type="blob" title="" comment="Файл" as="file_data" key="0" />
        <column table="a" column="file_name" type="string" data-size="100" title="" comment="Имя файла" as="file_name" key="0" />
        <column table="a" column="file_ext" type="string" data-size="10" title="" comment="Расширение файла" as="file_ext" key="0" />
        <column table="a" column="u_c" type="string" data-size="100" title="" comment="Пользователь создавший запись" as="u_c" key="0" />
        <column table="a" column="kod_group_task" type="number" comment="Код групового задания" as="kod_group_task" key="0" />
        <column table="a" column="pr_kurator" type="number" title="" comment="Пр. куратора)" as="pr_kurator" key="0" />
        <column table="a" column="kod_person_source" type="number" comment="Отправитель пользователь ЛЭ" as="kod_person_source" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_kontact_source" type="number" comment="Отправитель контактное лицо абонента" as="kod_kontact_source" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="kod_person_target" type="number" comment="Получатель пользователь ЛЭ" as="kod_person_target" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_kontact_target" type="number" comment="Получатель контактное лицо абонента" as="kod_kontact_target" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="kod_vid_doc" type="number" comment="Кода вида док-та который формируется в паре с данной строкой" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" reference="c_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="kod_notif" type="number" as="kod_notif" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="kod_viza" type="number" as="kod_viza" reference="is_viza_agr_doc" refcol="kod" key="0" />
        <column table="a" column="kod_zayav_vo" type="number" as="kod_zayav_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_vid_doc_s" type="number" as="kod_vid_doc_s" reference="is_reglam_vid_doc" refcol="kod" key="0" />
        <column table="a" column="kod_compl" type="number" as="kod_compl" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="kod_compl_call" type="number" as="kod_compl_call" reference="is_complaints_call" refcol="kod" key="0" />
        <column table="a" column="num_reg" type="string" data-size="250" title="" as="num_reg" key="0" />
        <column table="a" column="kod_tema" type="number" as="kod_tema" reference="is_compl_call_tema" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contr_task" as="a" />
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_zayav_vo" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_zayav_vo" />
            <column table="kod_zayav_vo" column="kod" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_dop_contr_task" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact_source" join="left outer" dname="is_dop_contr_task" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact_source" />
            <column table="kod_kontact_source" column="kod_kontact" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact_target" join="left outer" dname="is_dop_contr_task" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact_target" />
            <column table="kod_kontact_target" column="kod_kontact" />
          </call>
        </query>
        <query name="is_person" as="kod_person_source" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_person_source" />
            <column table="kod_person_source" column="kod_person" />
          </call>
        </query>
        <query name="is_person" as="kod_person_target" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_person_target" />
            <column table="kod_person_target" column="kod_person" />
          </call>
        </query>
        <query name="c_dop_doc" as="kod_dop_doc" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_dop_doc" />
            <column table="kod_dop_doc" column="kod_dop_doc" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_notif" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_notif" />
            <column table="kod_notif" column="kod" />
          </call>
        </query>
        <query name="is_viza_agr_doc" as="kod_viza" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_viza" />
            <column table="kod_viza" column="kod" />
          </call>
        </query>
        <query name="is_reglam_vid_doc" as="kod_vid_doc_s" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_vid_doc_s" />
            <column table="kod_vid_doc_s" column="kod" />
          </call>
        </query>
        <query name="is_complaints" as="kod_compl" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_compl" />
            <column table="kod_compl" column="kod" />
          </call>
        </query>
        <query name="is_complaints_call" as="kod_compl_call" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_compl_call" />
            <column table="kod_compl_call" column="kod" />
          </call>
        </query>
        <query name="is_compl_call_tema" as="kod_tema" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_tema" />
            <column table="kod_tema" column="kod" />
          </call>
        </query>
        <query name="is_dop_contr_task" as="kod_parent" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="is_dop_contr_task" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_dop_contr_task_result" as="kod_result" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod" />
          </call>
        </query>
        <query name="is_dop_contr_task_state" as="kod_state" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod" />
          </call>
        </query>
        <query name="is_dop_contr_task_type" as="kod_type_task" join="left outer" dname="is_dop_contr_task">
          <call function="=">
            <column table="a" column="kod_type_task" />
            <column table="kod_type_task" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_contr_task_result" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contr_task_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="pr_child_row" type="number" title="" as="pr_child_row" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="kod_type" type="number" comment="Тип обращения" as="kod_type" reference="is_dop_contr_task_type" refcol="kod" key="0" />
        <column table="a" column="pr_pr_compl_call" type="number" title="" as="pr_pr_compl_call" key="0" />
        <column table="a" column="pr_compl_call" type="number" title="" as="pr_compl_call" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contr_task_result" as="a" />
        <query name="is_dop_contr_task_type" as="kod_type" join="left outer" dname="is_dop_contr_task_result">
          <call function="=">
            <column table="a" column="kod_type" />
            <column table="kod_type" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_contr_task_state" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contr_task_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contr_task_state" as="a" />
      </from>
    </query>
    <query name="is_dop_contr_task_type" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_contr_task_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="pr_default" type="number" title="" as="pr_default" reference="is_dop_contr_task_type" refcol="kod" key="0" />
        <column table="a" column="abbr" type="string" data-size="250" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="pr_compl_call" type="number" title="" as="pr_compl_call" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_contr_task_type" as="a" />
        <query name="is_dop_contr_task_type" as="pr_default" join="left outer" dname="is_dop_contr_task_type">
          <call function="=">
            <column table="a" column="pr_default" />
            <column table="pr_default" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_docs_atp" class="1" timestamp="22.07.2016 02:33:43" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_docs_atp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" key="0" />
        <column table="a" column="num_doc" type="string" title="Номер документа" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата документа" as="dat_doc" key="0" />
        <column table="a" column="vid_doc" type="number" title="" comment="1- акт о выполнении технических условий , 2 -акт осмотра электроустановок" as="vid_doc" key="0" />
        <column table="a" column="kn_sert_power" type="number" title="" as="kn_sert_power" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" comment="сслыка на таблицу атп с доп.инф." as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_docs_atp" as="a" />
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="is_dop_docs_atp">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_doc_kr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_doc_kr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_doc" type="number" column-mandatory="1" as="kod_dop_doc" key="1" fixed="1" />
        <column table="a" column="e_code" type="number" column-mandatory="1" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_vid_doc" type="number" column-mandatory="1" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="num_doc" type="string" data-size="100" title="" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="prim" type="string" data-size="2000" title="" as="prim" key="0" />
        <column table="a" column="polzov" type="string" data-size="30" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="doc_file_name" type="string" data-size="250" title="" comment="имя файла без пути" as="doc_file_name" key="0" />
        <column table="a" column="path" type="string" data-size="250" title="" comment="Путь к документу" as="path" key="0" />
        <column table="a" column="doc_file" type="blob" title="" comment="Файл в формате PDF" as="doc_file" key="0" />
        <column table="a" column="num_upd" type="number" title="" comment="счетчик сохранений" as="num_upd" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="Дата окончания периода действия документа" as="dat_udal" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="250" title="" comment="кто создал" as="u_c" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_doc_kr" as="a" />
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_dop_doc_kr">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_dop_doc_kr" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_dop_doc_ro" class="1" timestamp="13.12.2016 14:20:38" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_dop_doc_ro.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" key="1" fixed="1" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="num_doc" type="string" title="" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="doc_file_name" type="string" title="" comment="имя файла без пути" as="doc_file_name" key="0" />
        <column table="a" column="path" type="string" title="" comment="путь к документу" as="path" key="0" />
        <column table="a" column="doc_file" type="blob" title="" comment="файл в формате pdf" as="doc_file" key="0" />
        <column table="a" column="num_upd" type="number" title="" comment="счетчик сохранений" as="num_upd" key="0" />
        <column table="a" column="kod_doc_dog" type="number" comment="код док-та из договора" as="kod_doc_dog" key="0" />
        <column table="a" column="kod_doc_vip" type="number" comment="код документа из кс-3" as="kod_doc_vip" key="0" />
        <column table="a" column="kod_ks" type="number" comment="код документа из кс-2" as="kod_ks" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_dop_doc_ro" as="a" />
        <query name="is_ro" as="kod_ro" join="left outer" dname="is_dop_doc_ro">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro" column="kod_ro" />
          </call>
        </query>
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_dop_doc_ro">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_filial_plan" class="1" timestamp="02.10.2020 01:01:15" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_filial_plan.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" />
        <column table="a" column="dat_begin" type="date" title="" as="dat_begin" />
        <column table="a" column="nw_less" type="number" title="" as="nw_less" />
        <column table="a" column="nw_more" type="number" title="" as="nw_more" />
        <call function="over" as="dat_end">
          <call function="lead">
            <column table="a" column="dat_begin" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_direct" />
          </call>
          <call function="order by simple">
            <column table="a" column="dat_begin" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_filial_plan" as="a" />
      </from>
    </query>
    <query name="is_fin_doc" title="Источники финансирования" class="1" timestamp="06.09.2018 23:58:50" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_fin_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fin_doc" type="number" as="kod_fin_doc" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_spr_budget" type="number" as="kod_spr_budget" reference="is_spr_budget" refcol="kod_spr_budget" key="0" />
        <column table="a" column="kod_spr_smet" type="number" as="kod_spr_smet" reference="is_spr_smet" refcol="kod_spr_smet" key="0" />
        <column table="a" column="num" type="string" title="" as="num" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kod_inv_pr" type="number" as="kod_inv_pr" reference="is_inv_pr" refcol="kod_inv_pr" key="0" />
        <column table="a" column="kod_zatratip" type="number" as="kod_zatratip" key="0" />
        <column table="a" column="kod_ts" type="number" as="kod_ts" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" reference="is_period" refcol="kod_period" key="0" />
        <column table="a" column="kod_spr_rao" type="number" as="kod_spr_rao" reference="is_spr_rao" refcol="kod_spr_rao" key="0" />
        <column table="a" column="kod_spr_razd_ts" type="number" as="kod_spr_razd_ts" key="0" />
        <column table="a" column="temp" type="number" title="" as="temp" key="0" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" key="0" />
        <column table="a" column="kod_zak" type="number" as="kod_zak" reference="z_zak" refcol="kod_zak" key="0" />
        <column table="a" column="kod_lot" type="number" as="kod_lot" key="0" />
        <column table="a" column="kod_dog_doh" type="number" comment="код договора доходного(связан с расх)" as="kod_dog_doh" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_zak_pz" type="number" comment="код портфеля заказа" as="kod_zak_pz" reference="z_zak" refcol="kod_zak" key="0" />
        <column table="a" column="kod_lot_pz" type="number" comment="код лота портфеля заказа" as="kod_lot_pz" reference="z_lot" refcol="kod_lot" key="0" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="kod_parent_titul_ip" type="number" comment="код головного титула ип(инвестпро)" as="kod_parent_titul_ip" key="0" />
        <column table="a" column="num_parent" type="string" title="" comment="наименование головного титула ип(инвестпро)" as="num_parent" key="0" />
        <call function="if" as="num_ip" type="string" title="ИП" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>13</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <call function="if" as="num_dpn" type="string" title="ДПН" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>16</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <call function="if" as="num_smet" type="string" title="Статья сметы" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>15</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <call function="if" as="num_zak" type="string" title="Закупка" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>14</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <call function="if" as="num_prib" type="string" title="Из прибыли" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>27</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <call function="if" as="num_ad" type="string" title="Абонентский договор" qlikview="1" key="0">
          <call function="=">
            <column table="a" column="kod_spr_doc" type="number" />
            <const>36</const>
          </call>
          <column table="a" column="num" type="string" title=""></column>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_fin_doc" as="a" title="Источники финансирования" />
        <query name="z_zak" as="kod_zak" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_zak" />
            <column table="kod_zak" column="kod_zak" />
          </call>
        </query>
        <query name="z_zak" as="kod_zak_pz" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_zak_pz" />
            <column table="kod_zak_pz" column="kod_zak" />
          </call>
        </query>
        <query name="z_lot" as="kod_lot_pz" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_lot_pz" />
            <column table="kod_lot_pz" column="kod_lot" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="is_spr_rao" as="kod_spr_rao" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_spr_rao" />
            <column table="kod_spr_rao" column="kod_spr_rao" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_budget" as="kod_spr_budget" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_spr_budget" />
            <column table="kod_spr_budget" column="kod_spr_budget" />
          </call>
        </query>
        <query name="is_period" as="kod_period" join="left outer" dname="is_fin_doc" title="Этапы работ">
          <call function="=">
            <column table="a" column="kod_period" />
            <column table="kod_period" column="kod_period" />
          </call>
        </query>
        <query name="is_inv_pr" as="kod_inv_pr" join="left outer" dname="is_fin_doc">
          <call function="=">
            <column table="a" column="kod_inv_pr" />
            <column table="kod_inv_pr" column="kod_inv_pr" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_fin_doc" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog_doh" join="left outer" dname="is_fin_doc" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog_doh" />
            <column table="kod_dog_doh" column="kod_dog" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="is_fin_doc" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_fin_doc" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_folders_arhiv" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_folders_arhiv.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" comment="код абонентского договора" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код подрядного договора" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="num_rack" type="string" data-size="250" title="" comment="номер стеллажа" as="num_rack" key="0" />
        <column table="a" column="num_package_doc" type="string" data-size="250" title="" comment="номер короба" as="num_package_doc" key="0" />
        <column table="a" column="dat_create" type="date" title="" comment="дата приема документов в архив" as="dat_create" key="0" />
        <column table="a" column="polzov" type="string" data-size="250" title="" comment="сотрудник выполнивший прием документов" as="polzov" key="0" />
        <column table="a" column="prim" type="string" data-size="1000" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="kod_titul_ip" type="number" comment="код объекта строительства" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="ws_kod" type="string" data-size="30" title="" comment="код параметра веб-сервиса" as="ws_kod" key="0" />
        <column table="a" column="kod_gkpz" type="number" comment="FK из ipr_gkpz gkpz" as="kod_gkpz" reference="ipr_gkpz" refcol="kod_gkpz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_folders_arhiv" as="a" />
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_folders_arhiv" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_folders_arhiv" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="is_folders_arhiv" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_gkpz" as="kod_gkpz" join="left outer" dname="is_folders_arhiv">
          <call function="=">
            <column table="a" column="kod_gkpz" />
            <column table="kod_gkpz" column="kod_gkpz" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_god" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_god.xml" haskeys="1">
      <select>
        <call function="rowid" as="is_god_id" key="1" />
        <column table="a" column="god" type="number" title="" as="god" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_god" as="a" />
      </from>
    </query>
    <query name="is_graf_opl_cust" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_graf_opl_cust.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="id" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0"></column>
        <column table="a" column="srok" type="date" title="" comment="срок" as="srok" key="0"></column>
        <column table="a" column="summa" type="number" title="" comment="сумма" as="summa" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="польз. измен." as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="дата измен." as="d_m" key="0"></column>
        <column table="a" column="kod_type_opl" type="number" comment="форма оплаты" as="kod_type_opl" key="0"></column>
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_graf_opl_cust" as="a"></table>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="is_graf_opl_cust" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dop_contract"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_graph_chek" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_graph_chek.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_person" type="number" comment="Визитер" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="date_vizit_plan" type="date" title="" comment="Дата планового визита" as="date_vizit_plan" key="0" />
        <column table="a" column="date_vizit_fakt" type="date" title="" comment="Дата фактического визита" as="date_vizit_fakt" key="0" />
        <column table="a" column="kod_result" type="number" comment="Результат визита" as="kod_result" reference="is_spr_viz" refcol="kod_spr_viz" key="0" />
        <column table="a" column="prim" type="string" data-size="2500" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="kod_notification" type="number" comment="Код уведомления" as="kod_notification" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="kod_status_atp" type="number" as="kod_status_atp" key="0" />
        <column table="a" column="str_kod_remarks" type="string" data-size="500" as="str_kod_remarks" key="0" />
        <column table="a" column="remark" type="string" data-size="2500" title="" as="remark" key="0" />
        <column table="a" column="note" type="string" data-size="2500" title="" as="note" key="0" />
        <column table="a" column="pr_scheduler" type="number" title="" as="pr_scheduler" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="pr_checked_doc" type="number" title="" as="pr_checked_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_graph_chek" as="a" />
        <query name="is_person" as="kod_person" join="left outer" dname="is_graph_chek">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_spr_viz" as="kod_result" join="left outer" dname="is_graph_chek">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_spr_viz" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_notification" join="left outer" dname="is_graph_chek">
          <call function="=">
            <column table="a" column="kod_notification" />
            <column table="kod_notification" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_kontact" class="1" timestamp="05.12.2018 14:52:11" title="Контакт" table-code="133" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_kontact.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kontact" type="number" column-mandatory="1" key="1" as="kod_kontact" />
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" />
        <column table="a" column="oper" type="string" title="ФИО" comment="ФИО полное" data-size="250" as="oper" />
        <column table="a" column="phone" type="string" title="Телефон" data-size="250" as="phone" />
        <column table="a" column="fax" type="string" title="" data-size="250" as="fax" />
        <column table="a" column="kodm" type="number" title="" as="kodm" />
        <column table="a" column="kodu" type="number" title="" as="kodu" />
        <column table="a" column="kodd" type="number" title="" as="kodd" />
        <column table="a" column="polzov" type="string" title="" data-size="50" as="polzov" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="time_pr" type="string" title="" data-size="20" as="time_pr" />
        <column table="a" column="kod_adr" type="number" as="kod_adr" />
        <column table="a" column="tip_adr" type="number" title="" as="tip_adr" />
        <column table="a" column="e_mail" type="string" title="E-mail" comment="Email" data-size="100" as="e_mail" />
        <column table="a" column="prim" type="string" title="" comment="Примечание" data-size="250" as="prim" />
        <column table="a" column="kod_spr_dolg" type="number" comment="спр должностей" as="kod_spr_dolg" reference="ks_namedolzh" refcol="kod_namedolzh" />
        <column table="a" column="fio_i" type="string" comment="ФИО краткое (им.пад.) " title="ФИО краткое" data-size="250" as="fio_i" />
        <column table="a" column="fio_r" type="string" title="" comment="ФИО полное (род.пад.)" data-size="250" as="fio_r" />
        <column table="a" column="osnov" type="string" title="" comment="Основание деятельности" data-size="250" as="osnov" />
        <column table="a" column="dolg_func" type="string" title="" comment="Должностная функция" data-size="250" as="dolg_func" />
        <column table="a" column="dolg_func_r" type="string" title="" data-size="250" as="dolg_func_r" />
        <column table="a" column="kod_dop_contr_dubl" type="number" as="kod_dop_contr_dubl" reference="is_dop_contr_dubl" refcol="kod_dop_contr_dubl" />
        <column table="a" column="e_code_manual" type="number" title="" comment="Ссылка на таблицу с контраенатми, занесенными вручную" as="e_code_manual" />
        <column table="a" column="send_prior" type="number" title="" comment="Приоритетное оповещение: 0 - по телефону, 1 - по e-mail" as="send_prior" />
        <call function="decode" type="number" as="send_prior_nvl">
          <column table="this" column="send_prior" />
          <const>1</const>
          <const>0</const>
          <const>1</const>
        </call>
        <column table="a" column="phone_dop" type="string" title="" comment="Дополнительный номер телефона" data-size="100" as="phone_dop" />
        <column table="a" column="dat_udal" type="date" title="" comment="Дата закрытия конт лица(чтобы не выбирали в КИДО  ТП)" as="dat_udal" />
        <column table="a" column="pr_main" comment="признак основной для контрагента" type="number" title="" as="pr_main" />
        <call function="coalesce" type="string" as="name_expr" is-name="1">
          <column table="this" column="oper" />
          <column table="this" column="fio_i" />
          <column table="e_code" column="name" />
        </call>
        <call function="()" type="number" as="cnt" is-fact="1" agg="sum" fact="is_kontact_cnt">
          <const>1</const>
        </call>
        <call as="f" function="extract_word">
          <column table="this" column="oper" />
          <const>1</const>
        </call>
        <call function="cut_phone" as="phone_clear" title="Телефон">
          <column table="this" column="phone" />
        </call>
        <call function="||" as="vis_id">
          <column table="this" column="phone" />
          <const>' '</const>
          <column table="this" column="oper" />
        </call>
        <column table="a" column="pr_auto_create" type="number" title="" as="pr_auto_create" />
        <column table="a" column="old_e_mail" type="string" data-size="250" title="" as="old_e_mail" />
        <column table="a" column="u_c" type="string" data-size="50" title="" as="u_c" />
        <column table="a" column="d_c" type="date" title="" as="d_c" />
        <column table="a" column="kod_ident_card" type="number" comment="код документа, удостоверяющего личность" as="kod_ident_card" reference="is_spr_ident_card" refcol="kod_ident_card" />
        <column table="a" column="pasp_series" type="string" data-size="10" title="" comment="серия документа" as="pasp_series" />
        <column table="a" column="pasp_num" type="string" data-size="50" title="" comment="№ документа" as="pasp_num" />
        <column table="a" column="dat_pasp" type="date" title="" comment="дата выдачи документа" as="dat_pasp" />
        <column table="a" column="pasp_issued" type="string" data-size="250" title="" comment="кем выдан документ" as="pasp_issued" />
        <column table="a" column="pr_ruk" type="number" title="" comment="признак руководителя" as="pr_ruk" />
        <column table="a" column="sot_phone" type="string" data-size="100" title="" comment="Дополнительный телефон (для SMS)" as="sot_phone" />
        <column table="a" column="snils" type="string" data-size="14" title="" comment="СНИЛС" as="snils" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_kontact" as="a" title="Контакт">
          <link name="e_code" is-private-dimension="1" is-final-dimension="1" dimension="1" as="e_code" table="is_creditors" child="is_kontact" field="e_code" parent="is_creditors" back="is_kontact" title="Контрагенты">
            <dimlink name="qr_zpr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="c_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login_by_z" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dlink name="vc_ul_kontakt" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vc_ul_kontakt">
            <dimlink name="vc_user_login_by_k" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="is_dop_contr_dubl" as="kod_dop_contr_dubl" join="left outer" dname="is_kontact">
          <call function="=">
            <column table="a" column="kod_dop_contr_dubl" />
            <column table="kod_dop_contr_dubl" column="kod_dop_contr_dubl" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_kontact" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_spr_dolg" join="left outer" dname="is_kontact">
          <call function="=">
            <column table="a" column="kod_spr_dolg" />
            <column table="kod_spr_dolg" column="kod_namedolzh" />
          </call>
        </query>
        <query name="vc_ul_kontakt" as="vc_ul_kontakt" join="left outer" dname="is_kontact">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="vc_ul_kontakt" column="kod_kontact" />
          </call>
        </query>
        <query name="is_spr_ident_card" as="kod_ident_card" join="left outer" dname="is_kontact">
          <call function="=">
            <column table="a" column="kod_ident_card" />
            <column table="kod_ident_card" column="kod_ident_card" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_ks2" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_ks2.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="id" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="kod_vip_doc" type="number" comment="код кс-3" as="kod_vip_doc" reference="is_doc_vip" refcol="kod_doc_vip" key="0"></column>
        <column table="a" column="num" type="string" title="" comment="номер" as="num" key="0"></column>
        <column table="a" column="status" type="number" title="" comment="статус" as="status" reference="is_status" refcol="status" key="0"></column>
        <column table="a" column="date_doc" type="date" title="" comment="дата составления" as="date_doc" key="0"></column>
        <column table="a" column="date_sogl" type="date" title="" comment="дата согласования" as="date_sogl" key="0"></column>
        <column table="a" column="date_s" type="date" title="" comment="отчетный период &quot;с&quot;" as="date_s" key="0"></column>
        <column table="a" column="date_po" type="date" title="" comment="отчетный период &quot;по&quot;" as="date_po" key="0"></column>
        <column table="a" column="kod_titul" type="number" comment="код титула" as="kod_titul" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0"></column>
        <column table="a" column="name_titul" type="string" title="" comment="наименвоание объекта(титул)" as="name_titul" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="польз. измен." as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="дата измен." as="d_m" key="0"></column>
        <column table="a" column="file_data" type="blob" title="" comment="данные файла" as="file_data" key="0"></column>
        <column table="a" column="file_name" type="string" title="" comment="имя файла" as="file_name" key="0"></column>
        <column table="a" column="file_ext" type="string" title="" comment="расширение файла" as="file_ext" key="0"></column>
        <column table="a" column="not_detal" type="number" title="" comment="без детализации" as="not_detal" key="0"></column>
        <column table="a" column="sum_vsego" type="number" title="" comment="сумма по документу кс-2" as="sum_vsego" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="file_data_smeta" type="blob" title="" comment="файл-смета" as="file_data_smeta" key="0"></column>
        <column table="a" column="file_name_smeta" type="string" title="" comment="наименвоанеи файл-смета" as="file_name_smeta" key="0"></column>
        <column table="a" column="file_ext_smeta" type="string" title="" comment="расширение файл-смета" as="file_ext_smeta" key="0"></column>
        <column table="a" column="pr_auto_create" type="number" title="" comment="авто создание" as="pr_auto_create" key="0"></column>
        <column table="a" column="num_porc" type="number" title="" comment="№ порции за день" as="num_porc" key="0"></column>
        <column table="a" column="dat_reestr" type="date" title="" comment="дата реестра" as="dat_reestr" key="0"></column>
        <column table="a" column="kod_uid" type="string" comment="уник код для бух" as="kod_uid" key="0"></column>
        <column table="a" column="pr_akt_pir" type="number" title="" comment="детализация по акту пир" as="pr_akt_pir" key="0"></column>
        <column table="a" column="kod_spr_doc" type="number" comment="код документа" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0"></column>
        <column table="a" column="kod_vid_zatrat" type="number" comment="код вид затрат" as="kod_vid_zatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0"></column>
        <column table="a" column="pr_create_web" type="number" title="" comment="документ создат в лк" as="pr_create_web" key="0"></column>
        <column table="a" column="pr_edit" type="number" title="" comment="необходимо отредактированть" as="pr_edit" key="0"></column>
        <column table="a" column="prim_error" type="string" title="" as="prim_error" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_ks2" as="a"></table>
        <query name="is_doc_vip" as="kod_vip_doc" join="left outer" dname="is_ks2">
          <call function="=">
            <column table="a" column="kod_vip_doc"></column>
            <column table="kod_vip_doc" column="kod_doc_vip"></column>
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_ks2" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_ks2">
          <call function="=">
            <column table="a" column="kod_spr_doc"></column>
            <column table="kod_spr_doc" column="kod_spr_doc"></column>
          </call>
        </query>
        <query name="is_status" as="status" join="left outer" dname="is_ks2" title="Статус">
          <call function="=">
            <column table="a" column="status"></column>
            <column table="status" column="status"></column>
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul" join="left outer" dname="is_ks2" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul"></column>
            <column table="kod_titul" column="kod_titul_ip"></column>
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kod_vid_zatrat" join="left outer" dname="is_ks2">
          <call function="=">
            <column table="a" column="kod_vid_zatrat"></column>
            <column table="kod_vid_zatrat" column="kodzatrat"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_links_uved_atp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_links_uved_atp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="kod_uved" type="number" column-mandatory="1" as="kod_uved" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="kod_atp" type="number" column-mandatory="1" as="kod_atp" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_links_uved_atp" as="a" />
        <query name="is_lkk_vip_tu" as="kod_uved" join="left outer" dname="is_links_uved_atp">
          <call function="=">
            <column table="a" column="kod_uved" />
            <column table="kod_uved" column="kod" />
          </call>
        </query>
        <query name="is_atp_dop_info" as="kod_atp" join="left outer" dname="is_links_uved_atp">
          <call function="=">
            <column table="a" column="kod_atp" />
            <column table="kod_atp" column="kod_atp_dop_info" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_link_budget_sap" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_link_budget_sap.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_spr_budget" type="number" column-mandatory="1" as="kod_spr_budget" reference="is_spr_budget" refcol="kod_spr_budget" key="0" />
        <column table="a" column="kod_budget_sap" type="number" column-mandatory="1" as="kod_budget_sap" reference="is_spr_budget_sap" refcol="kod_budget_sap" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_link_budget_sap" as="a" />
        <query name="is_spr_budget" as="kod_spr_budget" join="left outer" dname="is_link_budget_sap">
          <call function="=">
            <column table="a" column="kod_spr_budget" />
            <column table="kod_spr_budget" column="kod_spr_budget" />
          </call>
        </query>
        <query name="is_spr_budget_sap" as="kod_budget_sap" join="left outer" dname="is_link_budget_sap">
          <call function="=">
            <column table="a" column="kod_budget_sap" />
            <column table="kod_budget_sap" column="kod_budget_sap" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_lkk_el_equipment" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_el_equipment.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="postresponsible" type="string" data-size="255" title="" comment="Должность" as="postresponsible" key="0" />
        <column table="a" column="fionameresponsible" type="string" data-size="255" title="" comment="ФИО" as="fionameresponsible" key="0" />
        <column table="a" column="numberappdecree" type="string" data-size="255" title="" comment="№ приказа о назначении" as="numberappdecree" key="0" />
        <column table="a" column="dateappdecree" type="date" title="" comment="Дата приказа о назначении" as="dateappdecree" key="0" />
        <column table="a" column="commissionname" type="string" data-size="255" title="" comment="Проверку знаний прошел в комиссии" as="commissionname" key="0" />
        <column table="a" column="electricalgroup" type="string" data-size="255" title="" comment="С присвоением № группы" as="electricalgroup" key="0" />
        <column table="a" column="typeofelectric" type="number" title="" comment="Вид электроустановок: 1- До 1000в; 2- До и выше 1000в" as="typeofelectric" key="0" />
        <column table="a" column="numbercommissionreport" type="string" data-size="255" title="" comment="№ протокола" as="numbercommissionreport" key="0" />
        <column table="a" column="datecommissionreport" type="date" title="" comment="Дата протокола" as="datecommissionreport" key="0" />
        <column table="a" column="numberstatementobligation" type="string" data-size="255" title="" comment="Заявление обязательство №" as="numberstatementobligation" key="0" />
        <column table="a" column="datestatementobligation" type="date" title="" comment="Дата заявления-обязательства" as="datestatementobligation" key="0" />
        <column table="a" column="organzationstatement" type="string" data-size="255" title="" comment="Кем выдано" as="organzationstatement" key="0" />
        <column table="a" column="login" type="string" data-size="255" title="" comment="Login при регистрации в ЛКК" as="login" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата создания записи" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_el_equipment" as="a" />
      </from>
    </query>
    <query name="is_lkk_guarant_suppl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_guarant_suppl.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="namesupplier" type="string" data-size="255" title="" comment="Наименование сбытовой организации" as="namesupplier" key="0" />
        <column table="a" column="numbercontractsupplier" type="string" data-size="255" title="" comment="Номер договора со сбытовой организацией" as="numbercontractsupplier" key="0" />
        <column table="a" column="datecontractsupplier" type="date" title="" comment="Дата договора со сбытовой организацией" as="datecontractsupplier" key="0" />
        <column table="a" column="login" type="string" data-size="255" title="" comment="Login при регистрации в ЛКК" as="login" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата создания записи" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_guarant_suppl" as="a" />
      </from>
    </query>
    <query name="is_lkk_net_maintenance" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_net_maintenance.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="nameorgmaintenance" type="string" data-size="255" title="" comment="Наимен-е организации, с кот. заключен договор тех.обссл-я" as="nameorgmaintenance" key="0" />
        <column table="a" column="numbercontractmaintenance" type="string" data-size="255" title="" comment="Номер договора о техническом обслуживании" as="numbercontractmaintenance" key="0" />
        <column table="a" column="datecontractmaintenance" type="date" title="" comment="Дата договора о техническом обслуживании" as="datecontractmaintenance" key="0" />
        <column table="a" column="login" type="string" data-size="255" title="" comment="Login при регистрации в ЛКК" as="login" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата создания записи" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_net_maintenance" as="a" />
      </from>
    </query>
    <query name="is_lkk_vip_tu" class="1" timestamp="05.12.2018 21:10:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_vip_tu.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="Код АТП созданного через Уведомление" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dop_contract" type="number" comment="Код АД" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_counteragent" type="number" comment="Заявитель" as="kod_counteragent" reference="is_lkk_zayavitel" refcol="kod" key="0" />
        <column table="a" column="num_req" type="string" data-size="255" title="" comment="№ заявки" as="num_req" key="0" />
        <column table="a" column="dat_req" type="date" title="" comment="дата заявки" as="dat_req" key="0" />
        <column table="a" column="el_device_name" type="string" data-size="255" title="" comment="Наименование электроустановки (объекта)" as="el_device_name" key="0" />
        <column table="a" column="el_device_adr" type="string" data-size="255" title="" comment="Адрес места нахождения электроустановки (объекта)" as="el_device_adr" key="0" />
        <column table="a" column="max_power_without_ex" type="string" data-size="255" title="" comment="Максимальная мощность, без учета сущ." as="max_power_without_ex" key="0" />
        <column table="a" column="capacity_1_ex" type="number" title="" comment="Категория надежности электроснабжения энергопринимающего устройства кВА/кВт (1 категория)" as="capacity_1_ex" key="0" />
        <column table="a" column="capacity_2_ex" type="number" title="" comment="Категория надежности электроснабжения энергопринимающего устройства кВА/кВт (2 категория)" as="capacity_2_ex" key="0" />
        <column table="a" column="capacity_3_ex" type="number" title="" comment="Категория надежности электроснабжения энергопринимающего устройства кВА/кВт (3 категория)" as="capacity_3_ex" key="0" />
        <column table="a" column="max_power_with_ex" type="string" data-size="255" title="" comment="Максимальная мощность с учетом сущ." as="max_power_with_ex" key="0" />
        <column table="a" column="electrical_property" type="string" data-size="4000" title="" comment="Электроустановки в собственности заявителя" as="electrical_property" key="0" />
        <column table="a" column="power_lines_property" type="string" data-size="4000" title="" comment="Линии электропередач в собственности заявителя" as="power_lines_property" key="0" />
        <column table="a" column="construction_property" type="string" data-size="4000" title="" comment="Строительная часть (наименование зданий и сооружений) в собственности заявителя" as="construction_property" key="0" />
        <column table="a" column="other_equipment_property" type="string" data-size="4000" title="" comment="Прочее оборудование в собственности заявителя" as="other_equipment_property" key="0" />
        <column table="a" column="pr_registration_acts" type="number" title="" comment="Необх-ть оформления актов согл-я технологической и (или) аварийной брони: 0-&#x9;От оформления отказываюсь;1- Необходимо оформить" as="pr_registration_acts" key="0" />
        <column table="a" column="device_specifications" type="string" data-size="4000" title="" comment="Метролог-е хар-ки прибора учета и изм-х трансформаторов (в т.ч. класс точности, тип)" as="device_specifications" key="0" />
        <column table="a" column="dat_contract" type="date" title="" comment="Дата договора об осуществлении технологического присоединения" as="dat_contract" key="0" />
        <column table="a" column="num_contract" type="string" data-size="255" title="" comment="№ договора об осуществлении технологического присоединения" as="num_contract" key="0" />
        <column table="a" column="name_project_org" type="string" data-size="255" title="" comment="Наименование проектной организации" as="name_project_org" key="0" />
        <column table="a" column="name_wiring_org" type="string" data-size="255" title="" comment="Наименование электромонтажной организации" as="name_wiring_org" key="0" />
        <column table="a" column="num_act_el_work" type="string" data-size="255" title="" comment="№ акта сдачи-приемки (технической готовности) электромонтажных работ" as="num_act_el_work" key="0" />
        <column table="a" column="dat_act_el_work" type="string" data-size="255" title="" comment="Дата акта сдачи-приемки (технической готовности) электромонтажных работ" as="dat_act_el_work" key="0" />
        <column table="a" column="org_act_el_work" type="string" data-size="255" title="" comment="Кем выдан акт" as="org_act_el_work" key="0" />
        <column table="a" column="test_lab" type="string" data-size="255" title="" comment="Электролаборатория, выполнившая испытания" as="test_lab" key="0" />
        <column table="a" column="num_test_report" type="string" data-size="255" title="" comment="№ протокола испытаний" as="num_test_report" key="0" />
        <column table="a" column="dat_test_report" type="date" title="" comment="Дата протокола испытаний" as="dat_test_report" key="0" />
        <column table="a" column="kod_el_equipment" type="number" comment="Ответственный за электрохозяйство" as="kod_el_equipment" reference="is_lkk_el_equipment" refcol="kod" key="0" />
        <column table="a" column="kod_net_maintenance" type="number" comment="Договор на техническое обслуживание электрических сетей" as="kod_net_maintenance" reference="is_lkk_net_maintenance" refcol="kod" key="0" />
        <column table="a" column="kod_guarant_supplier" type="number" comment="Гарантирующий поставщик и договор" as="kod_guarant_supplier" reference="is_lkk_guarant_suppl" refcol="kod" key="0" />
        <column table="a" column="release_dat_device" type="date" title="" comment="Предполагаемая дата и время проведения процедуры допуска в эксплуатацию прибора учета электроэнергии" as="release_dat_device" key="0" />
        <column table="a" column="status" type="number" title="" comment="Статус уведомления о выполнении ТУ: 0 - создан" as="status" key="0" />
        <column table="a" column="kod_unig_vip_tu" type="number" comment="Код в пределах года созданного уведомления о выполнении ТУ" as="kod_unig_vip_tu" key="0" />
        <column table="a" column="dat_vip_tu" type="date" title="" comment="Дата регистрации созданного уведомления о выполнении ТУ" as="dat_vip_tu" key="0" />
        <column table="a" column="number_vip_tu" type="string" data-size="255" title="" comment="Номер регистрации созданного уведомления о выполнении ТУ" as="number_vip_tu" key="0" />
        <column table="a" column="year" type="number" title="" comment="Год создания уведомления о выполнении ТУ" as="year" key="0" />
        <column table="a" column="login" type="string" data-size="255" title="" comment="Login при регистрации в ЛКК" as="login" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата создания записи" as="d_m" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="Дата закрытия увед-я, ставится авт-ки при создании нового увед-я в ЛКК по той же заявке" as="dat_end" key="0" />
        <column table="a" column="pr_create_net" type="number" title="" as="pr_create_net" key="0" />
        <column table="a" column="kod_type_source" type="number" comment="Источник" as="kod_type_source" reference="is_type_source" refcol="kod" key="0" />
        <column table="a" column="num_asud" type="string" data-size="250" title="" as="num_asud" key="0" />
        <column table="a" column="date_asud" type="date" title="" as="date_asud" key="0" />
        <column table="a" column="kod_place" type="number" as="kod_place" key="0" />
        <column table="a" column="kod_atp_dop_info" type="number" as="kod_atp_dop_info" reference="is_atp_dop_info" refcol="kod_atp_dop_info" key="0" />
        <column table="a" column="u_c" type="string" data-size="250" title="" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_m" type="string" data-size="250" title="" as="u_m" key="0" />
        <column table="a" column="load_pod_1" type="number" title="" comment="Подключаемая мощность 1" as="load_pod_1" key="0" />
        <column table="a" column="load_pod_2" type="number" title="" comment="Подключаемая мощность 2" as="load_pod_2" key="0" />
        <column table="a" column="load_pod_3" type="number" title="" comment="Подключаемая мощность 3" as="load_pod_3" key="0" />
        <column table="a" column="pr_rtn" type="number" title="" comment="До РТН/После РТН/null" as="pr_rtn" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="pr_auto" type="number" title="" as="pr_auto" key="0" />
        <column table="a" column="kod_vizit" type="number" as="kod_vizit" reference="is_graph_chek" refcol="kod" key="0" />
        <column table="a" column="atp_kn_sert_power" type="string" data-size="1500" title="" as="atp_kn_sert_power" key="0" />
        <column table="a" column="atp_date_reg_bd" type="string" data-size="1500" title="" as="atp_date_reg_bd" key="0" />
        <column table="a" column="atp_kn_atp_case" type="string" data-size="1500" title="" as="atp_kn_atp_case" key="0" />
        <column table="a" column="atp_date_podpis_cust" type="string" data-size="1500" title="" as="atp_date_podpis_cust" key="0" />
        <column table="a" column="atp_status" type="string" data-size="1500" title="" as="atp_status" key="0" />
        <column table="a" column="atp_date_reg" type="string" data-size="1500" title="" as="atp_date_reg" key="0" />
        <column table="a" column="kod_state_lkk" type="number" as="kod_state_lkk" reference="qs_state_lkk" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_vip_tu" as="a" />
        <query name="is_graph_chek" as="kod_vizit" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_vizit" />
            <column table="kod_vizit" column="kod" />
          </call>
        </query>
        <query name="is_atp_dop_info" as="kod_atp_dop_info" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_atp_dop_info" />
            <column table="kod_atp_dop_info" column="kod_atp_dop_info" />
          </call>
        </query>
        <query name="is_lkk_zayavitel" as="kod_counteragent" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_counteragent" />
            <column table="kod_counteragent" column="kod" />
          </call>
        </query>
        <query name="is_lkk_net_maintenance" as="kod_net_maintenance" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_net_maintenance" />
            <column table="kod_net_maintenance" column="kod" />
          </call>
        </query>
        <query name="is_lkk_el_equipment" as="kod_el_equipment" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_el_equipment" />
            <column table="kod_el_equipment" column="kod" />
          </call>
        </query>
        <query name="is_lkk_guarant_suppl" as="kod_guarant_supplier" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_guarant_supplier" />
            <column table="kod_guarant_supplier" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_lkk_vip_tu" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_type_source" as="kod_type_source" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_type_source" />
            <column table="kod_type_source" column="kod" />
          </call>
        </query>
        <query name="qs_state_lkk" as="kod_state_lkk" join="left outer" dname="is_lkk_vip_tu">
          <call function="=">
            <column table="a" column="kod_state_lkk" />
            <column table="kod_state_lkk" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_lkk_vo_zayavitel" class="1" timestamp="24.12.2018 18:00:39" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_vo_zayavitel.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_vo" type="number" comment="код ВО (по табл. c_zayav_virtual)" as="kod_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="kod_zayavitel" type="number" comment="код заявителя (по табл. is_lkk_zayavitel)" as="kod_zayavitel" reference="is_lkk_zayavitel" refcol="kod" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_vo_zayavitel" as="a" />
        <query name="c_zayav_virtual" as="kod_vo" join="left outer" dname="is_lkk_vo_zayavitel">
          <call function="=">
            <column table="a" column="kod_vo" />
            <column table="kod_vo" column="kod" />
          </call>
        </query>
        <query name="is_lkk_zayavitel" as="kod_zayavitel" join="left outer" dname="is_lkk_vo_zayavitel">
          <call function="=">
            <column table="a" column="kod_zayavitel" />
            <column table="kod_zayavitel" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_lkk_zayavitel" class="1" timestamp="25.12.2018 21:30:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_lkk_zayavitel.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="namelast" type="string" data-size="255" title="" comment="Фамилия" as="namelast" key="0" />
        <column table="a" column="namefirst" type="string" data-size="255" title="" comment="Имя" as="namefirst" key="0" />
        <column table="a" column="namesecond" type="string" data-size="255" title="" comment="Отчество" as="namesecond" key="0" />
        <column table="a" column="ogrn" type="string" data-size="255" title="" comment="ОГРН" as="ogrn" key="0" />
        <column table="a" column="login" type="string" data-size="255" title="" comment="Login при регистрации в ЛКК" as="login" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="e_code" type="number" title="" comment="Поле связи с табл. is_creditors (если удалось определить)" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="phone" type="string" data-size="250" title="" as="phone" key="0" />
        <column table="a" column="e_mail" type="string" data-size="250" title="" as="e_mail" key="0" />
        <column table="a" column="send_prior" type="number" title="" comment="Приоритетное оповещение: 0 - по телефону, 1 - по e-mail" as="send_prior" key="0" />
        <column table="a" column="ur_lico" type="number" title="" comment="признак юр.лица" as="ur_lico" key="0" />
        <column table="a" column="fs" type="string" data-size="255" title="" comment="форма собственности" as="fs" key="0" />
        <column table="a" column="title" type="string" data-size="255" title="" comment="полное наименование организации, Ф.И.О. ИП (ФЛ)" as="title" key="0" />
        <column table="a" column="shorttitle" type="string" data-size="255" title="" comment="сокращенное наименование организации" as="shorttitle" key="0" />
        <column table="a" column="ser_passp" type="string" data-size="255" title="" comment="серия паспорта" as="ser_passp" key="0" />
        <column table="a" column="num_passp" type="string" data-size="255" title="" comment="номер паспорта" as="num_passp" key="0" />
        <column table="a" column="dat_passp" type="date" title="" comment="дата выдачи паспорта" as="dat_passp" key="0" />
        <column table="a" column="kem_passp" type="string" data-size="255" title="" comment="кем выдан паспорт" as="kem_passp" key="0" />
        <column table="a" column="adr_reg" type="string" data-size="255" title="" comment="адрес регистрации" as="adr_reg" key="0" />
        <column table="a" column="adr_fiz" type="string" data-size="255" title="" comment="адрес  местонахождения" as="adr_fiz" key="0" />
        <column table="a" column="adr_post" type="string" data-size="255" title="" comment="адрес почтовой корреспонденции" as="adr_post" key="0" />
        <column table="a" column="fax" type="string" data-size="255" title="" comment="факс" as="fax" key="0" />
        <column table="a" column="url" type="string" data-size="255" title="" comment="сайт" as="url" key="0" />
        <column table="a" column="inn" type="string" data-size="255" title="" comment="ИНН" as="inn" key="0" />
        <column table="a" column="kpp" type="string" data-size="255" title="" comment="КПП" as="kpp" key="0" />
        <column table="a" column="oktmo" type="string" data-size="255" title="" comment="ОКТМО" as="oktmo" key="0" />
        <column table="a" column="okpo" type="string" data-size="255" title="" comment="ОКПО" as="okpo" key="0" />
        <column table="a" column="okved" type="string" data-size="255" title="" comment="ОКВЭД" as="okved" key="0" />
        <column table="a" column="okato" type="string" data-size="255" title="" comment="ОКАТО" as="okato" key="0" />
        <column table="a" column="num_egrul" type="string" data-size="255" title="" comment="номер записи ЕГРЮЛ/ЕГРИП" as="num_egrul" key="0" />
        <column table="a" column="dat_egrul" type="date" title="" comment="дата внесения записи в реестр (ЕГРЮЛ/ЕГРИП)" as="dat_egrul" key="0" />
        <column table="a" column="bank" type="string" data-size="255" title="" comment="наименование банка" as="bank" key="0" />
        <column table="a" column="bik" type="string" data-size="255" title="" comment="БИК" as="bik" key="0" />
        <column table="a" column="rs" type="string" data-size="255" title="" comment="расчетный счет" as="rs" key="0" />
        <column table="a" column="corrs" type="string" data-size="255" title="" comment="корреспондентский счет" as="corrs" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания записи" as="d_c" key="0" />
        <call function="case" type="number" as="tip" title="1-ФЛ 2-ЮЛ 3-ИП" key="0">
          <call function="when">
            <call function="=">
              <column table="this" column="ur_lico" />
              <const>1</const>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="this" column="num_egrul" />
            </call>
            <const>3</const>
          </call>
          <call function="else">
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_lkk_zayavitel" as="a" />
        <query name="is_creditors" as="e_code" join="left outer" dname="is_lkk_zayavitel" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_mail_stack_auto" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_mail_stack_auto.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="Уник код" as="kod" key="1" fixed="1" />
        <column table="a" column="e_mail" type="string" data-size="2500" title="" comment="эл.почта отправки (череззапятую)" as="e_mail" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="Дата создания" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="50" title="" comment="Пользователь создавший" as="u_c" key="0" />
        <column table="a" column="caption" type="string" data-size="2500" title="" comment="Заголовок пиьсма" as="caption" key="0" />
        <column table="a" column="txt_body" type="string" data-size="4000" title="" comment="Текст письма строуовый" as="txt_body" key="0" />
        <column table="a" column="dat_send" type="date" title="" comment="Дата отправки" as="dat_send" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата изменения" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" comment="Пользователь изменивший" as="u_m" key="0" />
        <column table="a" column="last_error" type="string" data-size="4000" title="" comment="Текст последней ошибки при отправки" as="last_error" key="0" />
        <column table="a" column="html_body" type="clob" title="" comment="Текст письма HTML" as="html_body" key="0" />
        <column table="a" column="name_send_file" type="string" data-size="500" title="" comment="Наименвоанеи файла для отправки" as="name_send_file" key="0" />
        <column table="a" column="send_file" type="blob" title="" comment="Файл для отправки" as="send_file" key="0" />
        <column table="a" column="kod_zayav" type="number" comment="Заявка - SALES.C_ZAYAV.KOD_ZAYAV" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="УВТУ - PLAN.IS_LKK_VIP_TU.KOD" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_notif" type="number" as="kod_notif" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="prepare" type="number" title="" comment="Данная строка находиться в предпоготовке для отправки" as="prepare" key="0" />
        <column table="a" column="kod_dog" type="number" comment="Договор - PLAN.IS_DOP_CONTRACT.KOD_DOP_CONTRACT" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" key="0" />
        <column table="a" column="kod_compl" type="number" comment="Обращение - PLAN.IS_COMPLAINTS.KOD" as="kod_compl" reference="is_complaints" refcol="kod" key="0" />
        <column table="a" column="kod_call" type="number" comment="Обзвон - PLAN.IS_COMPLAINTS_CALL.KOD" as="kod_call" reference="is_complaints_call" refcol="kod" key="0" />
        <column table="a" column="kod_zayav_vo" type="number" comment="Вирт. обр. - SALES.C_ZAYAV_VIRTUAL.KOD" as="kod_zayav_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="num_reg" type="string" data-size="150" title="" as="num_reg" key="0" />
        <column table="a" column="kod_tema" type="number" as="kod_tema" reference="is_compl_call_tema" refcol="kod" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="kod_viza" type="number" as="kod_viza" reference="is_viza_agr_doc" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_mail_stack_auto" as="a" />
        <query name="is_compl_call_tema" as="kod_tema" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_tema" />
            <column table="kod_tema" column="kod" />
          </call>
        </query>
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="is_mail_stack_auto" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_zayav_vo" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_zayav_vo" />
            <column table="kod_zayav_vo" column="kod" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="is_mail_stack_auto" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
        <query name="is_viza_agr_doc" as="kod_viza" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_viza" />
            <column table="kod_viza" column="kod" />
          </call>
        </query>
        <query name="is_complaints" as="kod_compl" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_compl" />
            <column table="kod_compl" column="kod" />
          </call>
        </query>
        <query name="is_complaints_call" as="kod_call" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_call" />
            <column table="kod_call" column="kod" />
          </call>
        </query>
        <query name="is_lkk_vip_tu" as="kod_notif" join="left outer" dname="is_mail_stack_auto">
          <call function="=">
            <column table="a" column="kod_notif" />
            <column table="kod_notif" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_mail_task" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_mail_task.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="e_mail" type="string" data-size="2500" title="" as="e_mail" key="0" />
        <column table="a" column="dat_mail" type="date" title="" as="dat_mail" key="0" />
        <column table="a" column="polzov" type="string" data-size="250" title="" as="polzov" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="kod_notif" type="number" as="kod_notif" key="0" />
        <column table="a" column="text_mail" type="string" data-size="2500" title="" as="text_mail" key="0" />
        <column table="a" column="caption_mail" type="string" data-size="1500" title="" as="caption_mail" key="0" />
        <column table="a" column="text_error" type="string" data-size="2500" title="" as="text_error" key="0" />
        <column table="a" column="pr_send" type="number" title="" as="pr_send" key="0" />
        <column table="a" column="kod_compl" type="number" as="kod_compl" key="0" />
        <column table="a" column="kod_compl_call" type="number" as="kod_compl_call" key="0" />
        <column table="a" column="id_sms" type="number" title="" as="id_sms" key="0" />
        <column table="a" column="kod_zayav_vo" type="number" as="kod_zayav_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_mail_task" as="a" />
        <query name="c_zayav_virtual" as="kod_zayav_vo" join="left outer" dname="is_mail_task">
          <call function="=">
            <column table="a" column="kod_zayav_vo" />
            <column table="kod_zayav_vo" column="kod" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_mail_task" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="is_mail_task">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_opl_period" class="1" timestamp="17.10.2017 21:56:54" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_opl_period.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_period" type="number" as="kod_opl_period" key="1" fixed="1" />
        <column table="a" column="kod_opl_ro" type="number" as="kod_opl_ro" reference="is_opl_ro" refcol="kod_opl_ro" key="0" />
        <column table="a" column="kod_sum_akts" type="number" as="kod_sum_akts" reference="is_sum_akts" refcol="kod_sum_akts" key="0" />
        <column table="a" column="kod_sum_ro" type="number" as="kod_sum_ro" reference="is_sum_ro" refcol="kod_sum_ro" key="0" />
        <column table="a" column="sum_opl" type="number" title="" as="sum_opl" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_opl_period" refcol="kod_opl_period" key="0" />
        <column table="a" column="perepl" type="number" title="" as="perepl" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" reference="is_period" refcol="kod_period" key="0" />
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" reference="is_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="tmp" type="string" title="" as="tmp" key="0" />
        <column table="a" column="kod_opl_period_offset" type="number" comment="код док-та родителя для взаимозачета" as="kod_opl_period_offset" reference="is_opl_period" refcol="kod_opl_period" key="0" />
        <column table="a" column="dat_close_avans" type="date" title="" comment="дата закрытия аванса" as="dat_close_avans" key="0" />
        <column table="a" column="nds" type="number" title="" comment="сумма ндс по оплате (для расчета % берем из акта)" as="nds" key="0" />
        <column table="a" column="summa" type="number" title="" comment="сумма без ндс" as="summa" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="kod_opl_ro" column="dat_opl" dimension="ipr_dat" as="dat_opl" key="0" />
        <call function="-nvl" as="summ" title="Сумма  без НДС" is-fact="1" fact="is_opl_period_sum" agg="sum" key="0">
          <column table="this" column="sum_opl" />
          <column table="this" column="nds" />
        </call>
        <call function="if" as="is_avans" title="Признак авансовой оплаты" key="0">
          <call function="and">
            <call function="=">
              <column table="kod_vip_dog" column="kod_spr_doc" />
              <const>21</const>
            </call>
            <call function="=">
              <column table="kod_vip_dog" column="prizn_r" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <table name="is_opl_period" as="a">
          <link name="kod_dog" as="kod_dog" table="is_dogovor" child="is_opl_period" field="kod_dog" parent="is_dogovor" back="is_opl_period" title="Подрядные договоры">
            <dimlink name="ipr_kod_titul_ip" dimension="1" />
            <dimlink name="kod_reestr_44164" dimension="1" />
          </link>
        </table>
        <query name="is_opl_period" as="kod_parent" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl_period" />
          </call>
        </query>
        <query name="is_opl_period" as="kod_opl_period_offset" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_opl_period_offset" />
            <column table="kod_opl_period_offset" column="kod_opl_period" />
          </call>
        </query>
        <query name="is_opl_ro" as="kod_opl_ro" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_opl_ro" />
            <column table="kod_opl_ro" column="kod_opl_ro" />
          </call>
        </query>
        <query name="is_sum_akts" as="kod_sum_akts" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_sum_akts" />
            <column table="kod_sum_akts" column="kod_sum_akts" />
          </call>
        </query>
        <query name="is_sum_ro" as="kod_sum_ro" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_sum_ro" />
            <column table="kod_sum_ro" column="kod_sum_ro" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" dname="is_opl_period" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dimension="1" dname="is_opl_period" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="isv_ip_opl" as="kod_opl_period" join="left outer" dname="is_opl_period">
          <call function="=">
            <column table="a" column="kod_opl_period" />
            <column table="kod_opl_period" column="kod_opl_period" />
          </call>
        </query>
        <query name="is_period" as="kod_period" join="left outer" dname="is_opl_period" title="Этапы работ">
          <call function="=">
            <column table="a" column="kod_period" />
            <column table="kod_period" column="kod_period" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_opl_ro" class="1" timestamp="16.12.2016 15:09:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_opl_ro.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_ro" type="number" as="kod_opl_ro" key="1" fixed="1" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0" />
        <column table="a" column="num_doc" type="string" title="" as="num_doc" key="0" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" key="0" />
        <column table="a" column="sum_opl" type="number" title="" as="sum_opl" key="0" />
        <column table="a" column="bank" type="string" title="" as="bank" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="prz_inv" type="string" title="" as="prz_inv" key="0" />
        <column table="a" column="num_vakt" type="string" title="" as="num_vakt" key="0" />
        <column table="a" column="prz_tek" type="number" title="" as="prz_tek" key="0" />
        <column table="a" column="vid_veksel" type="string" title="" as="vid_veksel" key="0" />
        <column table="a" column="kod_dog" type="number" comment="заполняется только если возврат денж.средств по договору" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="progr" type="number" title="" comment="1-моя программа, иначе выбросить, т.к.нет разноса оплат" as="progr" key="0" />
        <column table="a" column="kod_link" type="number" comment="код оплаты по выписке банка" as="kod_link" reference="kr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_vidopl" type="number" comment="вид оплаты" as="kod_vidopl" reference="ks_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="kod_doc_vip" type="number" comment="код счета/акта по дог-рам ебт" as="kod_doc_vip" reference="is_doc_vip" refcol="kod_doc_vip" key="0" />
        <column table="a" column="kod_parent" type="number" comment="родитель оплаты закрытого акта" as="kod_parent" reference="is_opl_ro" refcol="kod_opl_ro" key="0" />
        <column table="a" column="kod_direct" type="number" comment="код подразд.по расч.счету" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_offset" type="number" comment="код док-та основания по взаимозачету" as="kod_offset" reference="is_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="dat_publ" type="date" title="" comment="дата публикации" as="dat_publ" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_opl_ro" as="a" />
        <query name="is_doc_vip" as="kod_doc_vip" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_doc_vip" />
            <column table="kod_doc_vip" column="kod_doc_vip" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_opl_ro" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="is_opl_ro" as="kod_parent" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl_ro" />
          </call>
        </query>
        <query name="is_ro" as="kod_ro" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro" column="kod_ro" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_opl_ro" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="ks_vidopl" as="kod_vidopl" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="is_dop_doc" as="kod_offset" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_offset" />
            <column table="kod_offset" column="kod_dop_doc" />
          </call>
        </query>
        <query name="kr_opl_bank" as="kod_link" join="left outer" dname="is_opl_ro">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_org_active" class="1" timestamp="18.08.2017 18:11:51" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_org_active.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" key="1" as="kod" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_org_active" as="a" />
      </from>
    </query>
    <query name="is_period" title="Этапы работ" class="1" timestamp="07.09.2018 02:31:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_period.xml" haskeys="1">
      <select>
        <column table="a" column="kod_period" type="number" as="kod_period" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_first" type="date" title="Дата начала работ" as="dat_first" key="0" />
        <column table="a" column="dat_last" type="date" title="Дата окончания работ" as="dat_last" key="0" />
        <column table="a" column="period" type="string" title="" as="period" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="summa" type="number" title="Сумма без НДС" as="summa" key="0" />
        <column table="a" column="nds" type="number" title="НДС" as="nds" key="0" />
        <column table="a" column="vid_rab" type="string" title="Вид работы" as="vid_rab" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="vsego" type="number" title="Стоимость этапа работ" is-fact="1" agg="sum" as="vsego" fact="is_period_vsego" key="0" />
        <column table="a" column="avans" type="number" title="" as="avans" key="0" />
        <column table="a" column="proc_avans" type="number" title="" as="proc_avans" key="0" />
        <column table="a" column="kod_period_prev" type="number" as="kod_period_prev" key="0" />
        <column table="a" column="kod_direct_isp" type="number" as="kod_direct_isp" key="0" />
        <column table="a" column="temp" type="number" title="" as="temp" key="0" />
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_period" refcol="kod_period" key="0" />
        <column table="a" column="volume" type="number" title="" as="volume" key="0" />
        <column table="a" column="kod_rec" type="number" as="kod_rec" key="0" />
        <column table="a" column="kod_plan_ebt" type="number" as="kod_plan_ebt" reference="is_plan_ebt" refcol="kod_plan_ebt" key="0" />
        <column table="a" column="kod_tip_dog" type="number" as="kod_tip_dog" reference="is_spr_tip_dog" refcol="kod_tip_dog" key="0" />
        <column table="a" column="proc_gu" type="number" title="" comment="% гарантийного удержания" as="proc_gu" key="0" />
        <column table="a" column="kod_direct_cfo" type="number" as="kod_direct_cfo" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_spr_stage_tmp" type="number" as="kod_spr_stage_tmp" key="0" />
        <column table="a" column="sum_mat" type="number" title="" comment="сумма по материалам по работе" as="sum_mat" key="0" />
        <column table="a" column="kod_ucfo" type="number" comment="код уцфо" as="kod_ucfo" reference="is_spr_cfo" refcol="kod_cfo" key="0" />
        <column table="a" column="kod_spr_doc" type="number" comment="вид док-та (кредит,%...)" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="vsego_val" type="number" title="" comment="всего в валюте" as="vsego_val" key="0" />
        <column table="a" column="kurs" type="number" title="" comment="курс на момент ввода суммы" as="kurs" key="0" />
        <column table="a" column="e_code" type="number" title="" comment="объект произв. работ (тгк сервис)" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_vip_dog" type="number" comment="ссылка на док-т подтверждение (для кредитных дог)" as="kod_vip_dog" reference="is_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="sum_limit" type="number" title="" comment="сумма лимита" as="sum_limit" key="0" />
        <column table="a" column="sum_bonus" type="number" title="" comment="сумма страх.премии" as="sum_bonus" key="0" />
        <column table="a" column="sum_franchise" type="number" title="" comment="сумма франшизы" as="sum_franchise" key="0" />
        <column table="a" column="sum_podt_smet" type="number" title="" comment="сумма подтв.сметы" as="sum_podt_smet" key="0" />
        <column table="a" column="sum_obesp" type="number" title="" comment="сумма обеспечения по договору" as="sum_obesp" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки работы" as="d_c" key="0" />
        <column table="a" column="kod_group_dog" type="number" comment="код группы дог-ров (тгк-сервис)" as="kod_group_dog" reference="is_spr_group_dog" refcol="kod" key="0" />
        <column table="is_fin_doc_tit1" column="kod_fin_doc" as="kod_fin_doc_tit" dgroup="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_period" as="a" title="Этапы работ">
          <dlink name="is_fin_doc" as="is_fin_doc_tit1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="is_fin_doc" child="is_fin_doc" field="kod_period" parent="is_period" back="is_fin_doc" title="Источники финансирования">
            <dimlink name="is_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ipr_kod_titul_ip" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <where>
              <call function="and">
                <call function="is not null">
                  <column table="is_fin_doc_tit1" column="kod_titul_ip" />
                </call>
              </call>
            </where>
          </dlink>
        </table>
        <query name="is_spr_tip_dog" as="kod_tip_dog" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_tip_dog" />
            <column table="kod_tip_dog" column="kod_tip_dog" />
          </call>
        </query>
        <query name="is_spr_stage" as="kod_spr_stage" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_spr_stage" />
            <column table="kod_spr_stage" column="kod_spr_stage" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="is_period" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct_cfo" join="left outer" dname="is_period" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct_cfo" />
            <column table="kod_direct_cfo" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_cfo" as="kod_ucfo" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_ucfo" />
            <column table="kod_ucfo" column="kod_cfo" />
          </call>
        </query>
        <query name="is_plan_ebt" as="kod_plan_ebt" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_plan_ebt" />
            <column table="kod_plan_ebt" column="kod_plan_ebt" />
          </call>
        </query>
        <query name="is_period" as="kod_parent" join="left outer" dname="is_period" title="Этапы работ">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_period" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="is_period" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" qlikview="0" dname="is_period" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_creditors" as="e_code" join="left outer" qlikview="0" dname="is_period" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="is_spr_group_dog" as="kod_group_dog" join="left outer" dname="is_period">
          <call function="=">
            <column table="a" column="kod_group_dog" />
            <column table="kod_group_dog" column="kod" />
          </call>
        </query>
        <query name="is_spr_stage_copy" as="kod_spr_stage_copy" join="left outer" dname="is_period" title="Этап работ">
          <call function="=">
            <column table="a" column="kod_spr_stage" />
            <column table="kod_spr_stage" column="kod_spr_stage" />
          </call>
        </query>
        <query name="is_fin_doc" as="kod_fin_doc_tit" join="left outer" qlikview="0" dname="is_period" title="Источники финансирования">
          <call function="=">
            <column table="this" column="kod_fin_doc_tit" />
            <column table="kod_fin_doc_tit" column="kod_fin_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_person" class="1" table-code="111" timestamp="05.12.2018 14:30:35" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_person.xml" haskeys="1">
      <select>
        <column table="a" column="kod_person" type="number" column-mandatory="1" as="kod_person" key="1" fixed="1" />
        <column table="a" column="kod_direct" type="number" column-mandatory="1" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="fio" type="string" title="" data-size="250" column-mandatory="1" comment="фио кратко в и.п." as="fio" key="0" />
        <column table="a" column="dolgn" type="string" title="" data-size="250" comment="должностная функция кратко в и.п." as="dolgn" key="0" />
        <column table="a" column="tel" type="string" title="" data-size="20" as="tel" key="0" />
        <column table="a" column="e_mail" type="string" title="" data-size="50" as="e_mail" key="0" />
        <column table="a" column="prizn" type="number" title="" as="prizn" key="0" />
        <column table="a" column="kod_spr_dolg" type="number" column-mandatory="1" as="kod_spr_dolg" key="0" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" key="0" />
        <column table="a" column="kod_gv" type="number" as="kod_gv" reference="is_spr_gv" refcol="kod_gv" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" data-size="30" as="polzov" key="0" />
        <column table="a" column="cp" type="string" title="" data-size="20" as="cp" key="0" />
        <column table="a" column="fio_r" type="string" title="" comment="фио в р.п." data-size="250" as="fio_r" key="0" />
        <column table="a" column="dolgn_r" type="string" title="" comment="должность в р.п." data-size="250" as="dolgn_r" key="0" />
        <column table="a" column="osnov" type="string" title="" data-size="250" as="osnov" key="0" />
        <column table="a" column="dolgn_full" type="string" data-size="1000" title="" comment="Должностная функция полная" as="dolgn_full" key="0" />
        <column table="a" column="dolgn_r_full" type="string" data-size="1000" title="" comment="Должностная функция полная в р.п." as="dolgn_r_full" key="0" />
        <column table="a" column="full_name" type="string" data-size="1000" title="" comment="ФИО полное в и.п." as="full_name" key="0" />
        <column table="a" column="full_name_r" type="string" data-size="1000" title="" comment="ФИО полное в р.п." as="full_name_r" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" key="0" />
        <column table="a" column="pr_route" type="number" title="" comment="признак наличия в согласовании по маршруту" as="pr_route" key="0" />
        <column table="a" column="phone_city" type="string" data-size="150" title="" comment="Телефон городской" as="phone_city" key="0" />
        <column table="a" column="fio_d" type="string" data-size="250" title="" comment="ФИО в д.п." as="fio_d" key="0" />
        <column table="a" column="dolgn_d" type="string" data-size="250" title="" comment="Должностная функция в д.п." as="dolgn_d" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_person" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_person" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_gv" as="kod_gv" join="left outer" dname="is_person">
          <call function="=">
            <column table="a" column="kod_gv" />
            <column table="kod_gv" column="kod_gv" />
          </call>
        </query>
        <query name="is_spr_dolg" as="kod_spr_dolg" join="left outer" dname="is_person">
          <call function="=">
            <column table="a" column="kod_spr_dolg" />
            <column table="kod_spr_dolg" column="kod_spr_dolg" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_spr_dolg" join="left outer" dname="is_person">
          <call function="=">
            <column table="a" column="kod_spr_dolg" />
            <column table="kod_spr_dolg" column="kod_namedolzh" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_podr_uslug" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_podr_uslug.xml" haskeys="1">
      <select>
        <column table="a" column="kod_podr_uslug" type="number" as="kod_podr_uslug" key="1" fixed="1"></column>
        <column table="a" column="kn_contract" type="number" title="" comment="код договора аппсерв" as="kn_contract" key="0"></column>
        <column table="a" column="kod_dog" type="number" comment="код подрядного договра" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="num" type="string" title="" as="num" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="kod_dop_contract" type="number" comment="код аб. договора" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_podr_uslug" as="a"></table>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_podr_uslug" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_podr_uslug" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract"></column>
            <column table="kod_dop_contract" column="kod_dop_contract"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_reestr_44164" class="1" timestamp="22.10.2017 02:14:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_reestr_44164.xml" haskeys="1">
      <select>
        <column table="a" column="kod_reestr" type="number" key="1" index="1" as="kod_reestr" />
        <column table="a" column="dat" type="date" title="" index="1" dimension="ipr_dat" is-final-dimension="1" is-private-dimension="1" as="dat" />
        <column table="a" column="kod_dop_contract" type="number" index="1" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="saldo" type="string" title="" is-fact="1" agg="sum" as="saldo" fact="is_reestr_44164_saldo" />
        <column table="a" column="dolg_tek" type="string" title="" as="dolg_tek" />
        <column table="a" column="dolg_pr" type="string" title="" is-fact="1" agg="sum" as="dolg_pr" fact="is_reestr_44164_dolg_pr" />
        <call as="pr" function="()" type="number" is-fact="1" agg="max" fact="is_reestr_44164_pr">
          <const>1</const>
        </call>
        <column table="a" column="pr550" type="number" title="" index="1" as="pr550" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_reestr_44164" as="a">
          <link name="kod_dop_contract" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dop_contract" table="is_dop_contract" child="is_reestr_44164" field="kod_dop_contract" parent="is_dop_contract" back="is_reestr_44164" title="Абонентские договоры">
            <dimlink name="ipr_kod_titul_ip" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_ipr" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ipr_kod_doc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_reestr_44164" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract" />
            <column table="kod_dop_contract" column="kod_dop_contract" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_reestr_actual" timestamp="05.04.2018 20:56:36" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_reestr_actual.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="1" fixed="1" />
        <column table="a" column="year" type="number" as="year" key="0" />
        <column table="a" column="fl_fact" type="number" as="fl_fact" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_reestr_actual" as="a" />
      </from>
    </query>
    <query name="is_reglam_algorithm" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_reglam_algorithm.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_type_doc" type="number" column-mandatory="1" comment="Тип документа" as="kod_type_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_viza" type="number" column-mandatory="1" comment="Дейсвтие" as="kod_viza" reference="is_spr_viz" refcol="kod_spr_viz" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="prim_reglam" type="string" data-size="500" title="" comment="Пояснение к строке регламента" as="prim_reglam" key="0" />
        <column table="a" column="prim_reglam_do" type="string" data-size="500" title="" comment="Выполняемое дейсвтие" as="prim_reglam_do" key="0" />
        <column table="a" column="block_schem" type="number" title="" comment="Блок схема" as="block_schem" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="count_day_viza" type="number" title="" comment="Кол-во дней на согласование" as="count_day_viza" key="0" />
        <column table="a" column="count_day_remark" type="number" title="" comment="Кол-во дней на устранение замечаний" as="count_day_remark" key="0" />
        <column table="a" column="num_str" type="number" title="" as="num_str" key="0" />
        <column table="a" column="kod_person" type="number" comment="Исполниель" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_dolzh" type="number" comment="Должность" as="kod_dolzh" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" key="0" />
        <column table="a" column="final_stage" type="number" title="" comment="Финальный этап" as="final_stage" key="0" />
        <column table="a" column="num_print" type="number" title="" comment="№ при печати" as="num_print" key="0" />
        <column table="a" column="str_print" type="string" data-size="500" title="" comment="Для печати" as="str_print" key="0" />
        <column table="a" column="date_begin" type="date" title="" as="date_begin" key="0" />
        <column table="a" column="date_end" type="date" title="" as="date_end" key="0" />
        <column table="a" column="num_stage" type="number" title="" as="num_stage" key="0" />
        <column table="a" column="group_direct" type="string" data-size="250" title="" as="group_direct" key="0" />
        <column table="a" column="num_prim" type="number" title="" as="num_prim" key="0" />
        <column table="a" column="need_agr" type="number" title="" as="need_agr" key="0" />
        <column table="a" column="str_print_web" type="string" data-size="250" title="" as="str_print_web" key="0" />
        <column table="a" column="pr_send_mail" type="number" title="" comment="Отправка эл. сообщения" as="pr_send_mail" key="0" />
        <column table="a" column="kod_kind_reglam" type="number" comment="Код типа регламента" as="kod_kind_reglam" reference="is_list_algorithm_reglam" refcol="kod" key="0" />
        <column table="a" column="pr_abon" type="number" title="" comment="Действие контрагента" as="pr_abon" key="0" />
        <column table="a" column="pr_null_stage" type="number" title="" as="pr_null_stage" key="0" />
        <column table="a" column="kod_bs_query" type="number" comment="Код запрсоа блок-схемы" as="kod_bs_query" reference="is_block_schema_query" refcol="kod" key="0" />
        <column table="a" column="str_status" type="string" data-size="500" title="" comment="Статус" as="str_status" key="0" />
        <column table="a" column="fast_move" type="number" title="" as="fast_move" key="0" />
        <column table="a" column="guid" type="string" data-size="250" title="" as="guid" key="0" />
        <column table="a" column="pr_multi_person" type="number" title="" as="pr_multi_person" key="0" />
        <column table="a" column="kod_email_text" type="number" as="kod_email_text" reference="is_reglam_email_text" refcol="kod" key="0" />
        <column table="a" column="kod_group" type="number" as="kod_group" reference="is_group_person_agr" refcol="kod" key="0" />
        <column table="a" column="kod_bs_default" type="number" comment="Ответсвенные по умолчанию" as="kod_bs_default" reference="is_reglam_bs_default" refcol="kod" key="0" />
        <column table="a" column="next_way" type="number" title="" comment="При возврате на маршрут использовать строку как начальную" as="next_way" key="0" />
        <column table="a" column="pr_send_all" type="number" title="" as="pr_send_all" key="0" />
        <column table="a" column="pr_person_v" type="number" title="" as="pr_person_v" key="0" />
        <column table="a" column="sid" type="number" title="" as="sid" key="0" />
        <column table="a" column="machine" type="string" data-size="500" title="" as="machine" key="0" />
        <column table="a" column="osuser" type="string" data-size="500" title="" as="osuser" key="0" />
        <column table="a" column="need_vid_doc" type="number" title="" as="need_vid_doc" key="0" />
        <column table="a" column="kod_doing_app" type="number" as="kod_doing_app" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_reglam_algorithm" as="a" />
        <query name="is_reglam_bs_default" as="kod_bs_default" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_bs_default" />
            <column table="kod_bs_default" column="kod" />
          </call>
        </query>
        <query name="is_spr_doc" as="block_schem" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="block_schem" />
            <column table="block_schem" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_type_doc" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_type_doc" />
            <column table="kod_type_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_viz" as="kod_viza" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_viza" />
            <column table="kod_viza" column="kod_spr_viz" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_list_algorithm_reglam" as="kod_kind_reglam" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_kind_reglam" />
            <column table="kod_kind_reglam" column="kod" />
          </call>
        </query>
        <query name="is_reglam_email_text" as="kod_email_text" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_email_text" />
            <column table="kod_email_text" column="kod" />
          </call>
        </query>
        <query name="is_group_person_agr" as="kod_group" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_group" />
            <column table="kod_group" column="kod" />
          </call>
        </query>
        <query name="is_block_schema_query" as="kod_bs_query" join="left outer" dname="is_reglam_algorithm">
          <call function="=">
            <column table="a" column="kod_bs_query" />
            <column table="kod_bs_query" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_reglam_vid_doc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_reglam_vid_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="500" title="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_spr_vid_doc" refcol="kod_vid_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_reglam_vid_doc" as="a" />
        <query name="is_spr_vid_doc" as="kod_vid_doc" join="left outer" dname="is_reglam_vid_doc">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod_vid_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_rights" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_rights.xml" haskeys="1">
      <select>
        <column table="a" column="puser" type="string" title="" as="puser" key="1" fixed="1"></column>
        <column table="a" column="kod_sec" type="number" comment="права на чтение кидо" as="kod_sec" key="0"></column>
        <column table="a" column="flags" type="string" title="" as="flags" key="0"></column>
        <column table="a" column="kod_insp" type="number" comment="где работает пользователь" as="kod_insp" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="roles" type="string" title="" as="roles" key="0"></column>
        <column table="a" column="dostup" type="number" title="" comment="права на запись кидо" as="dostup" key="0"></column>
        <column table="a" column="save_gkpz" type="number" title="" comment="права на запись гкпз" as="save_gkpz" key="0"></column>
        <column table="a" column="user_inet" type="string" title="" comment="логин в интернете" as="user_inet" key="0"></column>
        <column table="a" column="dat_vvod" type="date" title="" comment="дата ввода" as="dat_vvod" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="kod_person" type="number" comment="код должностного лица" as="kod_person" reference="is_person" refcol="kod_person" key="0"></column>
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_rights" as="a"></table>
        <query name="is_person" as="kod_person" join="left outer" dname="is_rights">
          <call function="=">
            <column table="a" column="kod_person"></column>
            <column table="kod_person" column="kod_person"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_insp" join="left outer" dname="is_rights" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_insp"></column>
            <column table="kod_insp" column="kod_direct"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_ro" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_ro.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ro" type="number" as="kod_ro" key="1" fixed="1"></column>
        <column table="a" column="kod_rs_cr" type="number" as="kod_rs_cr" key="0"></column>
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="e_code" type="number" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0"></column>
        <column table="a" column="kod_predpr" type="number" as="kod_predpr" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0"></column>
        <column table="a" column="akts" type="string" title="" as="akts" key="0"></column>
        <column table="a" column="s_fact" type="string" title="" as="s_fact" key="0"></column>
        <column table="a" column="i_doc" type="string" title="" as="i_doc" key="0"></column>
        <column table="a" column="kazn_num" type="number" title="" as="kazn_num" key="0"></column>
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="text" type="string" title="" as="text" key="0"></column>
        <column table="a" column="prizn_part" type="number" title="" comment="признак, что это р/опл заполняется на несколько договоров (т.е. партнеры)" as="prizn_part" key="0"></column>
        <column table="a" column="dat_sl_zap" type="date" title="" as="dat_sl_zap" key="0"></column>
        <column table="a" column="zadol_z" type="number" title="" as="zadol_z" key="0"></column>
        <column table="a" column="zadol_oko" type="number" title="" as="zadol_oko" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="status" type="number" title="" as="status" key="0"></column>
        <column table="a" column="dogs" type="string" title="" as="dogs" key="0"></column>
        <column table="a" column="dat_ro" type="date" title="" as="dat_ro" key="0"></column>
        <column table="a" column="prizn_avans" type="number" title="" as="prizn_avans" key="0"></column>
        <column table="a" column="mes_kvot" type="number" title="" as="mes_kvot" key="0"></column>
        <column table="a" column="god_kvot" type="number" title="" as="god_kvot" key="0"></column>
        <column table="a" column="kat_vagn" type="number" title="" as="kat_vagn" key="0"></column>
        <column table="a" column="str_smet" type="string" title="" as="str_smet" key="0"></column>
        <column table="a" column="schet" type="string" title="" as="schet" key="0"></column>
        <column table="a" column="kod_spr_kvot" type="number" as="kod_spr_kvot" reference="is_spr_kvot" refcol="kod_spr_kvot" key="0"></column>
        <column table="a" column="prichina" type="string" title="" as="prichina" key="0"></column>
        <column table="a" column="year" type="number" title="" as="year" key="0"></column>
        <column table="a" column="kod_unig_ro" type="number" as="kod_unig_ro" key="0"></column>
        <column table="a" column="prz_inv" type="string" title="" as="prz_inv" key="0"></column>
        <column table="a" column="month_fp" type="number" title="" as="month_fp" key="0"></column>
        <column table="a" column="dat_inv" type="date" title="" as="dat_inv" key="0"></column>
        <column table="a" column="kod_gur_ro" type="number" as="kod_gur_ro" key="0"></column>
        <column table="a" column="pr_uslug" type="number" title="" as="pr_uslug" key="0"></column>
        <column table="a" column="str_budget" type="string" title="" as="str_budget" key="0"></column>
        <column table="a" column="kod_esys" type="number" as="kod_esys" key="0"></column>
        <column table="a" column="export_oko" type="number" title="" as="export_oko" key="0"></column>
        <column table="a" column="nakl" type="string" title="" as="nakl" key="0"></column>
        <column table="a" column="rs_predpr" type="number" title="" comment="с расчетного счета предприятия" as="rs_predpr" key="0"></column>
        <column table="a" column="dat_dcppc" type="date" title="" comment="когда в реестр на оплату" as="dat_dcppc" key="0"></column>
        <column table="a" column="dat_srok" type="date" title="" comment="из договора или вручную" as="dat_srok" key="0"></column>
        <column table="a" column="dat_avans" type="date" title="" comment="дата закрытия аванса" as="dat_avans" key="0"></column>
        <column table="a" column="kod_person_otvr" type="number" comment="руководитель департ ответственный за расход" as="kod_person_otvr" reference="is_person" refcol="kod_person" key="0"></column>
        <column table="a" column="kod_direct_otvr" type="number" comment="департамент ответв. за расход" as="kod_direct_otvr" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="dat_status_7" type="date" title="" comment="перевод в статус предварительно-действующий" as="dat_status_7" key="0"></column>
        <column table="a" column="dat_status_1" type="date" title="" comment="перевод в статус действующий" as="dat_status_1" key="0"></column>
        <column table="a" column="dat_status_3" type="date" title="" comment="перевод в статус полностью оплачен" as="dat_status_3" key="0"></column>
        <column table="a" column="kod_spr_okato" type="number" comment="окато" as="kod_spr_okato" reference="ks_okato" refcol="kod_spr_okato" key="0"></column>
        <column table="a" column="kod_spr_bd" type="number" comment="кбк" as="kod_spr_bd" reference="ks_bd_kl" refcol="kod_spr_bd" key="0"></column>
        <column table="a" column="kod_filial" type="number" comment="для какого филиала" as="kod_filial" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="dat_status_5" type="date" title="" comment="возврат на доработку из казначейства" as="dat_status_5" key="0"></column>
        <column table="a" column="dat_status_8" type="date" title="" comment="перевод в статус приостановлен" as="dat_status_8" key="0"></column>
        <column table="a" column="num_nal_doc" type="string" title="" as="num_nal_doc" key="0"></column>
        <column table="a" column="dat_nal_doc" type="date" title="" as="dat_nal_doc" key="0"></column>
        <column table="a" column="kod_tip_nal" type="number" as="kod_tip_nal" reference="ks_tip_nal" refcol="kod_tip_nal" key="0"></column>
        <column table="a" column="kod_osn_nal" type="number" as="kod_osn_nal" reference="ks_osn_nal" refcol="kod_osn_nal" key="0"></column>
        <column table="a" column="period_s" type="date" title="" as="period_s" key="0"></column>
        <column table="a" column="period_po" type="date" title="" as="period_po" key="0"></column>
        <column table="a" column="period" type="number" title="" as="period" key="0"></column>
        <column table="a" column="period_str" type="string" title="" as="period_str" key="0"></column>
        <column table="a" column="kod_st_org" type="number" comment="статус составителя док-та" as="kod_st_org" reference="ks_st_org" refcol="kod_st_org" key="0"></column>
        <column table="a" column="kod_reestr" type="number" comment="реестр рно" as="kod_reestr" reference="is_reestr_ro" refcol="kod_reestr" key="0"></column>
        <column table="a" column="kod_dest" type="number" comment="код назначение платежа" as="kod_dest" reference="ks_dest_opl" refcol="kod_dest" key="0"></column>
        <column table="a" column="isp_ro" type="string" title="" comment="исполнитель рно" as="isp_ro" key="0"></column>
        <column table="a" column="dat_plan" type="date" title="" comment="планируемая дата опл(нужна финанс)" as="dat_plan" key="0"></column>
        <column table="a" column="kod_limit" type="number" as="kod_limit" reference="is_reestr_ro" refcol="kod_reestr" key="0"></column>
        <column table="a" column="pr_akc_cfo" type="number" title="" comment="акцепт директора цфо" as="pr_akc_cfo" key="0"></column>
        <column table="a" column="dat_akc_kaz" type="date" title="" comment="акцепт главного казначея" as="dat_akc_kaz" key="0"></column>
        <column table="a" column="num_regl" type="number" title="" comment="1-;2-регл подпис в оплату из фед.бюдж" as="num_regl" key="0"></column>
        <column table="a" column="kod_reestr_proch" type="number" comment="код реестра по прочим платежам" as="kod_reestr_proch" key="0"></column>
        <column table="a" column="dat_akc_cfo" type="date" title="" comment="дата выставления признака акцепта рук. цфо" as="dat_akc_cfo" key="0"></column>
        <column table="a" column="proc" type="number" title="" comment="% ндс (добавили для оплат - считается в триггере)" as="proc" key="0"></column>
        <column table="a" column="kod_spr_oktmo" type="number" comment="октмо" as="kod_spr_oktmo" key="0"></column>
        <column table="a" column="s_dat_nal_doc" type="string" title="" comment="дата налогового платежа строкой '0'" as="s_dat_nal_doc" key="0"></column>
        <column table="a" column="kod_yin" type="string" comment="код (уин)" as="kod_yin" key="0"></column>
        <column table="a" column="kod_person_dir" type="number" comment="колд персоны подписанта от отв заяв" as="kod_person_dir" key="0"></column>
        <column table="a" column="s_num_gkpz" type="string" title="" comment="номер гкпз" as="s_num_gkpz" key="0"></column>
        <column table="a" column="inn_b" type="string" title="" comment="инн банка" as="inn_b" key="0"></column>
        <column table="a" column="kod_dog_kred" type="number" comment="связь с кредитным договором" as="kod_dog_kred" key="0"></column>
        <column table="a" column="kod_ist_fin" type="number" comment="ист.фин-я по ип (для лэ)" as="kod_ist_fin" key="0"></column>
        <column table="kod_ro_1c" column="dat_vigr_1c" type="date" title="Дата выгрузки из 1С" as="dat_vigr_1c" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_ro" as="a">
          <link name="kod_ro_1c" as="kod_ro_1c" table="is_ro_1c" child="is_ro" field="kod_ro_1c" parent="is_ro_1c" back="is_ro" />
        </table>
        <query name="is_creditors" as="e_code" join="left outer" dname="is_ro" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code"></column>
            <column table="e_code" column="e_code"></column>
          </call>
        </query>
        <query name="is_person" as="kod_person_otvr" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_person_otvr"></column>
            <column table="kod_person_otvr" column="kod_person"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_predpr" join="left outer" dname="is_ro" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_predpr"></column>
            <column table="kod_predpr" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_ro" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct"></column>
            <column table="kod_direct" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct_otvr" join="left outer" dname="is_ro" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct_otvr"></column>
            <column table="kod_direct_otvr" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="is_ro" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial"></column>
            <column table="kod_filial" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_spr_doc"></column>
            <column table="kod_spr_doc" column="kod_spr_doc"></column>
          </call>
        </query>
        <query name="is_spr_kvot" as="kod_spr_kvot" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_spr_kvot"></column>
            <column table="kod_spr_kvot" column="kod_spr_kvot"></column>
          </call>
        </query>
        <query name="ks_bd_kl" as="kod_spr_bd" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_spr_bd"></column>
            <column table="kod_spr_bd" column="kod_spr_bd"></column>
          </call>
        </query>
        <query name="ks_dest_opl" as="kod_dest" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_dest"></column>
            <column table="kod_dest" column="kod_dest"></column>
          </call>
        </query>
        <query name="ks_okato" as="kod_spr_okato" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_spr_okato"></column>
            <column table="kod_spr_okato" column="kod_spr_okato"></column>
          </call>
        </query>
        <query name="ks_osn_nal" as="kod_osn_nal" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_osn_nal"></column>
            <column table="kod_osn_nal" column="kod_osn_nal"></column>
          </call>
        </query>
        <query name="ks_st_org" as="kod_st_org" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_st_org"></column>
            <column table="kod_st_org" column="kod_st_org"></column>
          </call>
        </query>
        <query name="ks_tip_nal" as="kod_tip_nal" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_tip_nal"></column>
            <column table="kod_tip_nal" column="kod_tip_nal"></column>
          </call>
        </query>
        <query name="is_reestr_ro" as="kod_reestr" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_reestr"></column>
            <column table="kod_reestr" column="kod_reestr"></column>
          </call>
        </query>
        <query name="is_reestr_ro" as="kod_limit" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_limit"></column>
            <column table="kod_limit" column="kod_reestr"></column>
          </call>
        </query>
        <query name="is_ro_1c" as="kod_ro_1c" join="left outer" dname="is_ro">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro_1c" column="kod_ro" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_rs_cr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_rs_cr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_rs_cr" type="number" column-mandatory="1" as="kod_rs_cr" key="1" fixed="1" />
        <column table="a" column="e_code" type="number" column-mandatory="1" title="" as="e_code" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="r_schet" type="string" data-size="25" column-mandatory="1" title="" as="r_schet" key="0" />
        <column table="a" column="bank" type="string" data-size="200" title="" as="bank" key="0" />
        <column table="a" column="filial" type="string" data-size="200" title="" as="filial" key="0" />
        <column table="a" column="bic" type="string" data-size="20" title="" as="bic" key="0" />
        <column table="a" column="ks" type="string" data-size="30" title="" as="ks" key="0" />
        <column table="a" column="adr" type="string" data-size="60" title="" as="adr" key="0" />
        <column table="a" column="ind" type="string" data-size="10" title="" as="ind" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" data-size="30" title="" as="polzov" key="0" />
        <column table="a" column="kodb" type="number" column-mandatory="1" title="" as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в БД" as="d_c" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="ocher" type="number" title="" comment="1-выставлять по умолчанию" as="ocher" key="0" />
        <column table="a" column="kodp_old" type="number" title="" comment="старый код казначейства" as="kodp_old" key="0" />
        <column table="a" column="prim" type="string" data-size="250" title="" as="prim" key="0" />
        <column table="a" column="kod_rs" type="number" comment="код расчетного счета казначейства" as="kod_rs" key="0" />
        <column table="a" column="pr_udal" type="number" title="" comment="признак блокировки рас\сч" as="pr_udal" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" key="0" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" key="0" />
        <column table="a" column="tbl_dop_doc" type="string" data-size="50" title="" comment="таблица, на кот.сыылается  IS_RS_CR.KOD_DOP_DOC (is_dop_doc_kr,  is_dop_doc, is_dop_doc_ro)" as="tbl_dop_doc" key="0" />
        <column table="a" column="kod_mdm" type="number" comment="уник ID  р/сч из 1С ТГК" as="kod_mdm" key="0" />
        <column table="a" column="guid" type="string" data-size="40" title="" comment="Глобальный идентификатор" as="guid" key="0" />
        <column table="a" column="pr_plat_budget" type="number" title="" comment="Признак бюджетных платежей" as="pr_plat_budget" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_rs_cr" as="a" />
        <query name="is_creditors" as="e_code" join="left outer" dname="is_rs_cr" title="Контрагенты">
          <call function="=">
            <column table="a" column="e_code" />
            <column table="e_code" column="e_code" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="is_rs_cr">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_settings_tema_lkk" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_settings_tema_lkk.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_tema_lkk" type="number" column-mandatory="1" as="kod_tema_lkk" key="0" />
        <column table="a" column="kod_vid" type="number" column-mandatory="1" as="kod_vid" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="is_complaints_subject" refcol="kod" key="0" />
        <column table="a" column="kod_subtheme" type="number" column-mandatory="1" as="kod_subtheme" reference="is_complaints_subject" refcol="kod" key="0" />
        <column table="a" column="kod_form_source" type="number" column-mandatory="1" as="kod_form_source" reference="is_complaints_form_source" refcol="kod" key="0" />
        <column table="a" column="kod_type_source" type="number" column-mandatory="1" as="kod_type_source" reference="is_complaints_type_source" refcol="kod" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_settings_tema_lkk" as="a" />
        <query name="is_spr_doc" as="kod_vid" join="left outer" dname="is_settings_tema_lkk">
          <call function="=">
            <column table="a" column="kod_vid" />
            <column table="kod_vid" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_complaints_subject" as="kod_subject" join="left outer" dname="is_settings_tema_lkk">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod" />
          </call>
        </query>
        <query name="is_complaints_subject" as="kod_subtheme" join="left outer" dname="is_settings_tema_lkk">
          <call function="=">
            <column table="a" column="kod_subtheme" />
            <column table="kod_subtheme" column="kod" />
          </call>
        </query>
        <query name="is_complaints_form_source" as="kod_form_source" join="left outer" dname="is_settings_tema_lkk">
          <call function="=">
            <column table="a" column="kod_form_source" />
            <column table="kod_form_source" column="kod" />
          </call>
        </query>
        <query name="is_complaints_type_source" as="kod_type_source" join="left outer" dname="is_settings_tema_lkk">
          <call function="=">
            <column table="a" column="kod_type_source" />
            <column table="kod_type_source" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_settings_work" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_settings_work.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="str_spr_query" type="string" data-size="250" title="" as="str_spr_query" key="0" />
        <column table="a" column="pr_work_abon" type="number" title="" as="pr_work_abon" key="0" />
        <column table="a" column="pr_otlag_usl" type="number" title="" as="pr_otlag_usl" key="0" />
        <column table="a" column="str_obj" type="string" data-size="1500" title="" as="str_obj" key="0" />
        <column table="a" column="type_obj" type="number" title="" as="type_obj" key="0" />
        <column table="a" column="kod_work" type="number" as="kod_work" reference="ips_work_kind" refcol="kod_work_kind" key="0" />
        <column table="a" column="name_tu" type="string" data-size="4000" title="" as="name_tu" key="0" />
        <column table="a" column="kod_num_tu_def" type="number" as="kod_num_tu_def" key="0" />
        <column table="a" column="priority" type="number" title="" as="priority" key="0" />
        <column table="a" column="sum_city" type="number" title="" as="sum_city" key="0" />
        <column table="a" column="sum_region" type="number" title="" as="sum_region" key="0" />
        <column table="a" column="function_sum" type="string" data-size="4000" title="" as="function_sum" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_type_object" type="number" as="kod_type_object" reference="ips_vid_object" refcol="kod_vid_object" key="0" />
        <column table="a" column="kod_type_char" type="number" as="kod_type_char" reference="qs_pris_har" refcol="kod" key="0" />
        <column table="a" column="name_tz" type="string" data-size="4000" title="" as="name_tz" key="0" />
        <column table="a" column="is_demontage" type="number" title="" as="is_demontage" key="0" />
        <column table="a" column="pr_hand" type="number" title="" as="pr_hand" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_settings_work" as="a" />
        <query name="qs_pris_har" as="kod_type_char" join="left outer" dname="is_settings_work">
          <call function="=">
            <column table="a" column="kod_type_char" />
            <column table="kod_type_char" column="kod" />
          </call>
        </query>
        <query name="ips_work_kind" as="kod_work" join="left outer" dname="is_settings_work">
          <call function="=">
            <column table="a" column="kod_work" />
            <column table="kod_work" column="kod_work_kind" />
          </call>
        </query>
        <query name="ips_vid_object" as="kod_type_object" join="left outer" dname="is_settings_work">
          <call function="=">
            <column table="a" column="kod_type_object" />
            <column table="kod_type_object" column="kod_vid_object" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_budget" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_budget.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_budget" type="number" as="kod_spr_budget" key="1" fixed="1"></column>
        <column table="a" column="kod_budget" type="string" as="kod_budget" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_spr_budget" refcol="kod_spr_budget" key="0"></column>
        <column table="a" column="dat_start" type="number" title="" as="dat_start" key="0"></column>
        <column table="a" column="dat_finish" type="number" title="" as="dat_finish" key="0"></column>
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="prizn" type="number" title="" comment="доход -0, расход - 1" as="prizn" key="0"></column>
        <column table="a" column="vid_func" type="number" title="" comment="вид деятельности 0-основная,1-неосновная" as="vid_func" key="0"></column>
        <column table="a" column="kod_sap" type="string" comment="код справочника sap (соотвествие)" as="kod_sap" key="0"></column>
        <column table="a" column="kod_budget_sap" type="number" comment="код бюджет sap" as="kod_budget_sap" reference="is_spr_budget_sap" refcol="kod_budget_sap" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_budget" as="a"></table>
        <query name="is_spr_budget" as="kod_parent" join="left outer" dname="is_spr_budget">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_spr_budget"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_spr_budget" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct"></column>
            <column table="kod_direct" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_budget_sap" as="kod_budget_sap" join="left outer" dname="is_spr_budget">
          <call function="=">
            <column table="a" column="kod_budget_sap"></column>
            <column table="kod_budget_sap" column="kod_budget_sap"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_budget_sap" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_budget_sap.xml" haskeys="1">
      <select>
        <column table="a" column="kod_budget_sap" type="number" column-mandatory="1" comment="Код" as="kod_budget_sap" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="Наименование вид договора SAP" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" comment="Аббревиатура (выводится в отчет по выгрузке)" as="abbr" key="0" />
        <column table="a" column="pp" type="string" title="" comment="№ п/п" as="pp" key="0" />
        <column table="a" column="dr" type="number" title="" comment="доходные-0,расходные-1" as="dr" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_spr_budget_sap" refcol="kod_budget_sap" key="0" />
        <column table="a" column="dat_start" type="number" title="" as="dat_start" key="0" />
        <column table="a" column="dat_finish" type="number" title="" as="dat_finish" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_budget_sap" as="a" />
        <query name="is_spr_budget_sap" as="kod_parent" join="left outer" dname="is_spr_budget_sap">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_budget_sap" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_cfo" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_cfo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_cfo" type="number" as="kod_cfo" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kod_parent" type="number" comment="фиктивная колонка для дерева" as="kod_parent" key="0"></column>
        <column table="a" column="name_kr" type="string" title="" comment="краткое наименование" as="name_kr" key="0"></column>
        <column table="a" column="fio" type="string" title="" as="fio" key="0"></column>
        <column table="a" column="kod_person" type="number" as="kod_person" reference="is_person" refcol="kod_person" key="0"></column>
        <column table="a" column="kod_filial" type="number" comment="код филиала" as="kod_filial" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0"></column>
        <column table="a" column="dat_begin" type="date" title="" comment="дата начала действия" as="dat_begin" key="0"></column>
        <column table="a" column="dat_finish" type="date" title="" comment="дата окончания действия" as="dat_finish" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_cfo" as="a"></table>
        <query name="is_person" as="kod_person" join="left outer" dname="is_spr_cfo">
          <call function="=">
            <column table="a" column="kod_person"></column>
            <column table="kod_person" column="kod_person"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer" dname="is_spr_cfo" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_filial"></column>
            <column table="kod_filial" column="kod_direct"></column>
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_spr_cfo" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct"></column>
            <column table="kod_direct" column="kod_direct"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_classifier_oktmo" class="1" timestamp="05.12.2018 14:49:01" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_classifier_oktmo.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" title="" as="id" key="1" fixed="1" />
        <column table="a" column="code" type="string" column-mandatory="1" title="" comment="Шифр" as="code" key="0" />
        <column table="a" column="control_number" type="number" title="" comment="Контрольное число" as="control_number" key="0" />
        <column table="a" column="name" type="string" column-mandatory="1" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="additional_data" type="string" title="" comment="Дополнительные данные" as="additional_data" key="0" />
        <column table="a" column="note" type="string" title="" comment="Пояснение" as="note" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="pr_actual" type="number" title="" comment="Признак актуальности(использ в питере и обл)" as="pr_actual" key="0" />
        <column table="a" column="id_parent" type="number" title="" as="id_parent" key="0" />
        <column table="a" column="kod_mo" type="number" as="kod_mo" key="0" />
        <column table="a" column="kod_mobr" type="number" as="kod_mobr" key="0" />
        <column table="a" column="kod_nasp" type="number" as="kod_nasp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_classifier_oktmo" as="a" />
      </from>
    </query>
    <query name="is_spr_contr_kind" timestamp="05.06.2018 11:00:19" class="1" title="Тип договоров" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_contr_kind.xml" haskeys="1">
      <select>
        <column table="a" column="kn_contr_kind" key="1" type="number" as="kn_contr_kind" />
        <column table="a" column="name" type="string" title="Тип договора" vid="1" as="name" />
        <column table="a" column="m_user" type="string" title="Запись добавил/изменил" as="m_user" />
        <column table="a" column="m_time" type="date" title="Дата создания/изменения записи" as="m_time" />
        <column table="a" column="sname" type="string" title="Аббревиатура" vid="1" is-name="1" as="sname" />
        <column table="a" column="prizn_1c_vid_dog" type="number" title="Вид договора по 1С" as="prizn_1c_vid_dog" />
        <column table="a" column="prizn_1c_tip_dog" type="number" title="Тип договора по 1С" as="prizn_1c_tip_dog" />
        <column table="a" column="kod_tip_dog_1c_abr" type="string" title="Аббревиатура типа договора 1С" as="kod_tip_dog_1c_abr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="as_contr_kind" />
      </from>
    </query>
    <query name="is_spr_direct" title="Подразделения" class="1" description="Подразделения" timestamp="03.07.2019 14:45:06" table-code="121" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_direct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_direct" type="number" comment="уникальный код подразделения" column-mandatory="1" as="kod_direct" key="1" fixed="1" />
        <column table="a" column="kod_predpr" type="string" as="kod_predpr" key="0" />
        <column table="a" column="name" type="string" title="Подразделение" comment="наименование подразделения" column-mandatory="1" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родителя" as="kod_parent" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="name_kr" type="string" comment="краткое наимен.подразделения" vid="1" description="Сокращенное наименование подразделения " title="Подразделение" as="name_kr" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" key="0" />
        <column table="a" column="kod_podr" type="number" as="kod_podr" key="0" />
        <column table="a" column="en_gor" type="number" title="" as="en_gor" key="0" />
        <column table="a" column="en_obl" type="number" title="" as="en_obl" key="0" />
        <column table="a" column="tep_gor" type="number" title="" as="tep_gor" key="0" />
        <column table="a" column="kod_plant" type="string" as="kod_plant" key="0" />
        <column table="a" column="tep_obl" type="number" title="" as="tep_obl" key="0" />
        <column table="a" column="prizn_isp" type="number" title="" as="prizn_isp" key="0" />
        <column table="a" column="crkp" type="number" title="" as="crkp" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_dir_old" type="number" as="kod_dir_old" key="0" />
        <column table="a" column="kod_gkpz" type="number" as="kod_gkpz" key="0" />
        <column table="a" column="path_doc" type="string" title="" comment="путь хранения док-тов дог-ра (только для верхнего уровня)" as="path_doc" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в бд" as="d_c" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата изменения строки" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="строку добавил/изменил" as="u_m" key="0" />
        <column table="a" column="kod_kazn" type="string" as="kod_kazn" key="0" />
        <column table="a" column="fl_branch" type="number" title="" comment="флаг филиала:  1- филиалы, 2- районы кс, 3- рэс" as="fl_branch" key="0" />
        <column table="a" column="kn_fblock" type="number" title="" as="kn_fblock" reference="is_spr_direct" refcol="" key="0" />
        <column table="a" column="kod_nemo" type="number" comment="для синхронизации справочников немо" as="kod_nemo" key="0" />
        <column table="a" column="kod_xml_plan" type="number" as="kod_xml_plan" key="0" />
        <column table="a" column="invest_pr" type="number" title="" as="invest_pr" key="0" />
        <column table="a" column="fl_ask_atp" type="number" title="" as="fl_ask_atp" key="0" />
        <call function="if" as="kod_parent_i" type="number" title="-" key="0">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <column table="a" column="kod_direct_code" type="string" comment="Шифр подразделения для использования в коде. Аналог PK, но user friendly." as="kod_direct_code" key="0" />
        <column table="a" column="kod_spr_pfm" type="number" as="kod_spr_pfm" reference="is_spr_pfm" refcol="kod_spr_pfm" key="0" />
        <column table="a" column="city_name" type="string" title="" as="city_name" key="0" />
        <column table="a" column="full_name" type="string" title="" comment="Полное наим. подразд(без сокращений)" as="full_name" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="ссылка на KODP подразделения, добавленного из IS_SPR_DIRECT в KR_ORG схемы ASUSE" as="kodp" key="0" />
        <column table="a" column="pr_vks_ofz" type="number" title="" comment="ВКС/ОФЗ" as="pr_vks_ofz" key="0" />
        <column table="a" column="kod_spr_rosseti" type="string" comment="код по справочнику Россетей &quot;Оргструктура&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="zone" type="number" title="" comment="тарифная зона (для города)" as="zone" key="0" />
        <column table="a" column="mvp_code" type="string" comment="SAP код МВП" data-size="4" as="mvp_code" key="0" />
        <call function="decode" as="gor_obl_name" type="string" key="0">
          <column table="a" column="gor_obl" />
          <const>1</const>
          <const>'СПб'</const>
          <const>2</const>
          <const>'ЛО'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_direct" as="a" title="Подразделения" />
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_spr_direct">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_parent" join="left outer" dname="is_spr_direct" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kn_fblock" join="left outer" dname="is_spr_direct" title="Подразделения">
          <call function="=">
            <column table="a" column="kn_fblock" />
            <column table="kn_fblock" column="" />
          </call>
        </query>
        <query name="ipr_rights" as="puser" join="left outer" dname="is_spr_direct">
          <call function="or">
            <call function="=">
              <column table="puser" column="kod_sec" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser" column="kod_sec" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_spr_pfm" join="left outer" dname="is_spr_direct">
          <call function="=">
            <column table="a" column="kod_spr_pfm" />
            <column table="kod_spr_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="ipr_rights_all" as="puser_ext" join="left outer" dname="is_spr_direct">
          <call function="or">
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <const>3</const>
            </call>
            <call function="=">
              <column table="puser_ext" column="kod_direct" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_doc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="name_tabl" type="string" title="" comment="????" as="name_tabl" key="0" />
        <column table="a" column="vid" type="number" title="" comment="0-договор&#xA;1-выполнение&#xA;2-финансирование" as="vid" key="0" />
        <column table="a" column="pb" type="string" title="" comment="кратко название" as="pb" key="0" />
        <column table="a" column="kod_spr_gur" type="number" comment="вид деятельности предприятия" as="kod_spr_gur" key="0" />
        <column table="a" column="prizn" type="number" title="" comment="(для vid=0 (0 - дог., 1-сч/дог) ## vid=1( 1- кред.расх., 2-кред.дох., 3-рамка, 0- остальные) ## vid=2 (1-для графиков ад)##vid=17(1-виза для абон дог)" as="prizn" key="0" />
        <column table="a" column="dr" type="number" title="" comment="доходные-0,расходные-1, прочие -2 " as="dr" key="0" />
        <column table="a" column="vid_func" type="number" title="" comment="вид деятельности 0-основная,1-неосновная" as="vid_func" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родит док-та дог-ра для счета б/догра" as="kod_parent" key="0" />
        <column table="a" column="bez_ro" type="number" title="" comment="0-с рно, 1- без рно" as="bez_ro" key="0" />
        <column table="a" column="not_gur" type="number" title="" comment="не должны попадать в журналы:1-сводные" as="not_gur" key="0" />
        <column table="a" column="kod_buh" type="string" comment="код первичного док-та бух" as="kod_buh" key="0" />
        <column table="a" column="name_buh" type="string" title="" comment="наименования первичного док-та бух" as="name_buh" key="0" />
        <column table="a" column="prizn_num_pp" type="number" title="" comment="признак формирования порядкового номера по табл. is_num_doc_fil_mes" as="prizn_num_pp" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" comment="вид затрат по умолчанию для режима кс-2" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_doc" as="a" />
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="is_spr_doc">
          <call function="=">
            <column table="a" column="kodzatrat"></column>
            <column table="kodzatrat" column="kodzatrat"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_dolg" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_dolg.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_dolg" type="number" as="kod_spr_dolg" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="priority" type="number" title="" as="priority" key="0"></column>
        <column table="a" column="name_kr" type="string" title="" as="name_kr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_dolg" as="a"></table>
      </from>
    </query>
    <query name="is_spr_from_path" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_from_path.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" column-mandatory="1" title="Наименование" as="name" key="0" />
        <column table="a" column="pr_vo" type="number" title="" as="pr_vo" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_from_path" as="a" />
      </from>
    </query>
    <query name="is_spr_fs" class="1" timestamp="06.10.2016 10:39:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_fs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fs" type="number" key="1" as="kod_fs" />
        <column table="a" column="name" type="string" title="Форма собственности" as="name" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="pr_organa" type="number" title="" comment="0 - госуд,1-обществен органы (колонка из кидо plan.is_spr_fs)" as="pr_organa" />
        <column table="a" column="arhive" type="number" title="" comment="признак: 1 - переведен в архив" as="arhive" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ks_fs" />
      </from>
    </query>
    <query name="is_spr_group" class="1" timestamp="28.03.2019 12:17:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_group.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group" type="number" as="kod_group" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование группы" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_group" as="a" />
      </from>
    </query>
    <query name="is_spr_group_lp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_group_lp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group_lp" type="number" column-mandatory="1" as="kod_group_lp" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="50" title="Наименование" as="name" key="0" />
        <column table="a" column="full_name" type="string" data-size="250" title="" as="full_name" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" data-size="30" title="" as="polzov" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_group_lp" as="a" />
      </from>
    </query>
    <query name="is_spr_ini_prod" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_ini_prod.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_ini_prod" type="number" column-mandatory="1" as="kod_spr_ini_prod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="50" title="Наименование" comment="Наименование инициатора продления" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_ini_prod" as="a" />
      </from>
    </query>
    <query name="is_spr_kat_zayav" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_kat_zayav.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="Категория заявителя" as="name" key="0" />
        <column table="a" column="abbr" type="string" data-size="10" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_kat_zayav" as="a" />
      </from>
    </query>
    <query name="is_spr_kredit" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_kredit.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_kredit" type="number" column-mandatory="1" as="kod_spr_kredit" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_kredit" as="a" />
      </from>
    </query>
    <query name="is_spr_kurators" title="Кураторы" class="1" timestamp="02.04.2019 20:15:27" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_kurators.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_kurators" type="number" column-mandatory="1" as="kod_spr_kurators" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="ФИО куратора" data-size="250" as="name" key="0" />
        <column table="a" column="phone" type="string" title="Телефон куратора" data-size="20" as="phone" key="0" />
        <column table="a" column="puser" type="string" title="" data-size="20" as="puser" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_person" type="number" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_kurators" as="a" title="Кураторы" />
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_spr_kurators" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_spr_kurators">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_mo" class="1" timestamp="15.02.2016 10:26:16" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_mo.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_mo" type="string" comment="код мунициапального образования" as="kod_mo" key="0" />
        <column table="a" column="name" type="string" title="Поселение" as="name" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_mo" as="a" />
      </from>
    </query>
    <query name="is_spr_mobr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_mobr.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_mobr" type="string" comment="код мунициапального образования" as="kod_mobr" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_mobr" as="a"></table>
      </from>
    </query>
    <query name="is_spr_nasp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_nasp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_nasp" type="string" comment="код населенного пункта" as="kod_nasp" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_nasp" as="a"></table>
      </from>
    </query>
    <query name="is_spr_ofz" class="1" timestamp="21.10.2016 11:19:31" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_ofz.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Состояние ОФЗ" as="name" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="pr_ad" type="number" title="" comment="1-показывать по ад" as="pr_ad" key="0" />
        <column table="a" column="pr_ipr" type="number" title="" comment="1-показывать по титулу" as="pr_ipr" key="0" />
        <column table="a" column="pr_dp" type="number" title="" comment="1-показыватьпо пд" as="pr_dp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_ofz" as="a" />
      </from>
    </query>
    <query name="is_spr_podkl_obj" class="1" timestamp="11.12.2018 15:25:39" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_podkl_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj" type="number" as="kod_obj" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_group" type="number" as="kod_group" key="0" />
        <column table="a" column="name_group" type="string" title="" as="name_group" key="0" />
        <column table="a" column="kod_razd" type="number" as="kod_razd" key="0" />
        <column table="a" column="dat_udal" type="date" as="dat_udal" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_podkl_obj" as="a" />
      </from>
    </query>
    <query name="is_spr_prior_ad" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_prior_ad.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_prior" type="number" column-mandatory="1" as="kod_spr_prior" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" data-size="50" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="pn_prior" type="number" title="" comment="порядок приоритетности" as="pn_prior" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_prior_ad" as="a" />
      </from>
    </query>
    <query name="is_spr_smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_smet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_smet" type="number" column-mandatory="1" as="kod_spr_smet" key="1" fixed="1" />
        <column table="a" column="kod_smet" type="string" as="kod_smet" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="soderg" type="string" title="" as="soderg" key="0" />
        <column table="a" column="dat_start" type="number" title="" as="dat_start" key="0" />
        <column table="a" column="dat_finish" type="number" title="" as="dat_finish" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_spr_smet" refcol="kod_spr_smet" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="prizn" type="number" title="" comment="основная -0, неосновная деятельность - 1" as="prizn" key="0" />
        <column table="a" column="kod_direct" type="number" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="prib" type="number" title="" comment="1-из прибыли" as="prib" key="0" />
        <column table="a" column="proch" type="number" title="" comment="1-прочие" as="proch" key="0" />
        <column table="a" column="not_show" type="number" title="" comment="1 - не показывать для отч форм" as="not_show" key="0" />
        <column table="a" column="dr" type="number" title="" comment="0 - доход, 1 - расход" as="dr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_smet" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_spr_smet" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_parent" join="left outer" dname="is_spr_smet">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_stage" class="1" timestamp="28.08.2017 17:09:55" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_stage.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_stage" type="number" key="1" as="kod_spr_stage" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="name_kr" type="string" title="Вид затрат" as="name_kr" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" />
        <column table="a" column="kod_parent_stage" type="number" as="kod_parent_stage" />
        <column table="a" column="tip_dog" type="number" title="" as="tip_dog" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" />
        <column table="a" column="kod_tip_dog" type="number" as="kod_tip_dog" />
        <column table="a" column="kod_smet" type="number" as="kod_smet" />
        <column table="a" column="pr" type="number" title="" as="pr" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" />
        <column table="a" column="skod_1c" type="string" as="skod_1c" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_spr_stage" as="a" />
      </from>
    </query>
    <query name="is_spr_stage_copy" title="Этап работ" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_stage_copy.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_stage" type="number" as="kod_spr_stage" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование вида затрат" as="name" key="0" />
        <column table="a" column="name_kr" type="string" title="Вид затрат" as="name_kr" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="kod_parent_stage" type="number" as="kod_parent_stage" reference="is_spr_stage_copy" refcol="kod_spr_stage" key="0" />
        <column table="a" column="tip_dog" type="number" title="" as="tip_dog" key="0" />
        <column table="a" column="dat_udal" type="date" title="" as="dat_udal" key="0" />
        <column table="a" column="kod_tip_dog" type="number" as="kod_tip_dog" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_stage_copy" as="a" title="Этап работ" />
        <query name="is_spr_stage_copy" as="kod_parent_stage" join="left outer" dname="is_spr_stage_copy" title="Этап работ">
          <call function="=">
            <column table="a" column="kod_parent_stage" />
            <column table="kod_parent_stage" column="kod_spr_stage" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_tip_dog" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_tip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tip_dog" type="number" as="kod_tip_dog" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="vid_func" type="number" title="" comment="вид деятельности 0-основная,1-неосновная (пока не используется, но удалять не стали - вдруг пригодится)" as="vid_func" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_spr_tip_dog" refcol="kod_tip_dog" key="0" />
        <column table="a" column="razdel" type="number" title="" comment="1-раздел-1" as="razdel" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="pr_dog" type="number" title="" as="pr_dog" key="0" />
        <column table="a" column="prizn_1c_vid_dog" type="number" title="" comment="вид договора по 1с" as="prizn_1c_vid_dog" reference="buh_vid_dog" refcol="kod_vid_dog" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="дата удаления" as="dat_udal" key="0" />
        <column table="a" column="dr" type="number" title="" comment="доходные-0,расходные-1, прочие -2 " as="dr" key="0" />
        <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" reference="ips_vid_zatrat" refcol="kodzatrat" key="0" />
        <column table="a" column="pr_cr" type="number" title="" as="pr_cr" key="0" />
        <column table="a" column="prizn_1c_tip_dog" type="number" title="" comment="тип договора по 1с" as="prizn_1c_tip_dog" reference="buh_tip_dog" refcol="kod_tip_dog" key="0" />
        <column table="a" column="kod_vid_dog_sap" type="number" comment="вид дог-ра по sap" as="kod_vid_dog_sap" reference="is_spr_vid_dog_sap" refcol="kod_vid_dog_sap" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_tip_dog" as="a" />
        <query name="is_spr_tip_dog" as="kod_parent" join="left outer" dname="is_spr_tip_dog">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_tip_dog"></column>
          </call>
        </query>
        <query name="is_spr_vid_dog_sap" as="kod_vid_dog_sap" join="left outer" dname="is_spr_tip_dog">
          <call function="=">
            <column table="a" column="kod_vid_dog_sap"></column>
            <column table="kod_vid_dog_sap" column="kod_vid_dog_sap"></column>
          </call>
        </query>
        <query name="ips_vid_zatrat" as="kodzatrat" join="left outer" dname="is_spr_tip_dog">
          <call function="=">
            <column table="a" column="kodzatrat"></column>
            <column table="kodzatrat" column="kodzatrat"></column>
          </call>
        </query>
        <query name="buh_vid_dog" as="prizn_1c_vid_dog" join="left outer" dname="is_spr_tip_dog">
          <call function="=">
            <column table="a" column="prizn_1c_vid_dog"></column>
            <column table="prizn_1c_vid_dog" column="kod_vid_dog"></column>
          </call>
        </query>
        <query name="buh_tip_dog" as="prizn_1c_tip_dog" join="left outer" dname="is_spr_tip_dog">
          <call function="=">
            <column table="a" column="prizn_1c_tip_dog"></column>
            <column table="prizn_1c_tip_dog" column="kod_tip_dog"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_vid_ad" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_vid_ad.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_ad" type="number" column-mandatory="1" as="kod_vid_ad" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="кратко без признака юр лицо физ лицо" data-size="200" column-mandatory="1" as="name" key="0" />
        <column table="a" column="pr_ur_lico" type="number" title="" comment="0-физ., 1- юр.лицо" as="pr_ur_lico" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="50" as="u_m" key="0" />
        <column table="a" column="load" type="string" title="" comment="нагрузка" data-size="50" as="load" key="0" />
        <column table="a" column="name_full" type="string" title="" comment="полное наименование для выбора в условиях" data-size="200" as="name_full" key="0" />
        <column table="a" column="n_days" type="number" title="" comment="кол-во дней рассмотрения" as="n_days" key="0" />
        <call function="if" as="name_fiz" title="Юридический статус заявки" qlikview="1" key="0">
          <call function="=">
            <call function="nvl0">
              <column table="a" column="pr_ur_lico" />
            </call>
            <const>0</const>
          </call>
          <const>'Физ. лицо'</const>
          <const>'Юр. лицо'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_vid_ad" as="a" />
      </from>
    </query>
    <query name="is_spr_vid_doc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_vid_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_doc" type="number" column-mandatory="1" as="kod_vid_doc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" data-size="200" column-mandatory="1" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" data-size="20" column-mandatory="1" as="abbr" key="0" />
        <column table="a" column="count_day" type="number" title="" as="count_day" key="0" />
        <column table="a" column="pr_doc" type="number" title="" comment="1-договор" as="pr_doc" key="0" />
        <column table="a" column="pr_zak" type="number" title="" comment="к закупке:1-конкурсные,2-экспертизы,3-протокол кп" as="pr_zak" key="0" />
        <column table="a" column="pr_con" type="number" title="" comment="к дог-ру ад" as="pr_con" key="0" />
        <column table="a" column="pr_rekv" type="number" title="" comment="признак вида док-та из табл. is_spr_doc" as="pr_rekv" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="pr_ro" type="number" title="" comment="1-рно" as="pr_ro" key="0" />
        <column table="a" column="pr_org" type="number" title="" comment="1-организация" as="pr_org" key="0" />
        <column table="a" column="pr_rd" type="number" title="" comment="1-распорядительный документ (лэ)" as="pr_rd" key="0" />
        <column table="a" column="pr_tz" type="number" title="" comment="1-документ по тз " as="pr_tz" key="0" />
        <column table="a" column="pr_smeta" type="number" title="" comment="1-документ по смете " as="pr_smeta" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="pr_doc_obr" type="number" title="" comment="1-документооборот" as="pr_doc_obr" key="0" />
        <column table="a" column="text_ls" type="string" title="" comment="текст для печати в листе согласования" data-size="250" as="text_ls" key="0" />
        <column table="a" column="pr_ur" type="number" title="" comment="1 - документ юридический (по претензии)" as="pr_ur" key="0" />
        <column table="a" column="pr_ks2" type="number" title="" comment="1-док-т кс-2" as="pr_ks2" key="0" />
        <column table="a" column="pr_kazn" type="number" title="" comment="1-док-т для казначейства" as="pr_kazn" key="0" />
        <column table="a" column="kod_spr_doc" type="number" comment="для связи стаблицами по kod_spr_doc" as="kod_spr_doc" key="0" />
        <column table="a" column="pr_atp" type="number" title="" comment="признак использоваиня в атп" as="pr_atp" key="0" />
        <column table="a" column="pr_podpis" type="number" title="" comment="0-без подписи,1- необходимость подписи" as="pr_podpis" key="0" />
        <column table="a" column="pr_show_lkk" type="number" title="" comment="1- показывать в лкк" as="pr_show_lkk" key="0" />
        <column table="a" column="pr_one_active" type="number" title="" comment="1- данный тип док-та должен иметь в дог-ре только один активный док-т" as="pr_one_active" key="0" />
        <column table="a" column="pr_zayav" type="number" title="" comment="1-док-т заявка" as="pr_zayav" key="0" />
        <column table="a" column="pr_tema" type="number" title="" comment="1-обязательно ввести краткое содержание" as="pr_tema" key="0" />
        <column table="a" column="pr_num" type="number" title="" comment="1-обязательно к заполнению поле Номер документа" as="pr_num" key="0" />
        <column table="a" column="pr_qr_kod" type="number" title="" comment="1-обязательно д.б. QR-код при формировании по шаблону" as="pr_qr_kod" key="0" />
        <column table="a" column="pr_doc_shabl" type="number" title="" comment="1-док-т должен быть создан только по шаблону" as="pr_doc_shabl" key="0" />
        <column table="a" column="pr_dog_esn" type="number" title="" comment="1-дог-ры энергоснабжения" as="pr_dog_esn" key="0" />
        <column table="a" column="abbr_qr_code" type="string" data-size="50" title="" comment="Аббревиатура для фор-я QR-кода" as="abbr_qr_code" key="0" />
        <column table="a" column="pr_tu" type="number" title="" comment="1-для ТУ" as="pr_tu" key="0" />
        <column table="a" column="pr_ocenka" type="number" title="" comment="1-для Оценки" as="pr_ocenka" key="0" />
        <column table="a" column="type_tab" type="string" data-size="50" title="" comment="Вкладка для сохранения скана:1-заявка,2-ТУ,3-Оценка,4-Дог,5-УВТУ,6-АТП,7-ЭСН" as="type_tab" key="0" />
        <column table="a" column="not_show_docx" type="number" title="" comment="Не показывать шаблон в формате docx" as="not_show_docx" key="0" />
        <column table="a" column="pr_uvtu" type="number" title="" comment="УВТУ" as="pr_uvtu" key="0" />
        <column table="a" column="kod_ree_ad_ks" type="number" comment="Код реестра для передачи в КС по спр-ку is_spr_doc" as="kod_ree_ad_ks" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="pr_work" type="number" title="" comment="1-выставить признак работ ЛЭ в АД, 2-снять признак работ ЛЭ в АД" as="pr_work" key="0" />
        <column table="a" column="pr_bg" type="number" title="" comment="1-для БГ банковская гаранти" as="pr_bg" key="0" />
        <column table="a" column="pr_rastorg" type="number" title="" comment="1-основание для расторжения" as="pr_rastorg" key="0" />
        <column table="a" column="pr_num_dat_claim" type="number" title="" comment="1-номер и дата претензии должны формироваться" as="pr_num_dat_claim" key="0" />
        <column table="a" column="pr_compl_call" type="number" title="" comment="1-для журнала взаимодействий" as="pr_compl_call" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_vid_doc" as="a" />
        <query name="is_spr_doc" as="pr_rekv" join="left outer" dname="is_spr_vid_doc">
          <call function="=">
            <column table="a" column="pr_rekv"></column>
            <column table="pr_rekv" column="kod_spr_doc"></column>
          </call>
        </query>
        <query name="is_spr_doc" as="kod_ree_ad_ks" join="left outer" dname="is_spr_vid_doc">
          <call function="=">
            <column table="a" column="kod_ree_ad_ks" />
            <column table="kod_ree_ad_ks" column="kod_spr_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_vid_ds" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_vid_ds.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="pr_dog" type="number" title="" comment="д/с по пд" as="pr_dog" key="0"></column>
        <column table="a" column="pr_ad" type="number" title="" comment="д/с по ад" as="pr_ad" key="0"></column>
        <column table="a" column="pr_scantu" type="number" title="" comment="наличие скана ту" as="pr_scantu" key="0"></column>
        <column table="a" column="pr_sendks" type="number" title="" comment="передавать в блок кс" as="pr_sendks" key="0"></column>
        <column table="a" column="pr_atp_shab" type="number" title="" comment="включать в перечень д/с по атп" as="pr_atp_shab" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_vid_ds" as="a"></table>
      </from>
    </query>
    <query name="is_spr_vid_otl_usl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_vid_otl_usl.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_vid_otl_usl" as="a"></table>
      </from>
    </query>
    <query name="is_spr_viz" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_spr_viz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_viz" type="number" as="kod_spr_viz" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dog" type="number" title="" as="dog" key="0"></column>
        <column table="a" column="ro" type="number" title="" as="ro" key="0"></column>
        <column table="a" column="zpr" type="number" title="" as="zpr" key="0"></column>
        <column table="a" column="prizn_zak" type="number" title="" as="prizn_zak" key="0"></column>
        <column table="a" column="prizn_os" type="number" title="" comment="признак осн.ср-в" as="prizn_os" key="0"></column>
        <column table="a" column="prizn_doc" type="number" title="" comment="признак документа" as="prizn_doc" key="0"></column>
        <column table="a" column="pizn_ip" type="string" title="" comment="признак ип" as="pizn_ip" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_viz" as="a"></table>
      </from>
    </query>
    <query name="is_status" title="Статус" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_status.xml" haskeys="1">
      <select>
        <column table="a" column="status" type="number" title="" as="status" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Статус договора" as="name" key="0"></column>
        <column table="a" column="color" type="string" title="" as="color" key="0"></column>
        <column table="a" column="n_color" type="number" title="" as="n_color" key="0"></column>
        <column table="a" column="color1" type="number" title="" as="color1" key="0"></column>
        <column table="a" column="color2" type="number" title="" as="color2" key="0"></column>
        <column table="a" column="color3" type="number" title="" as="color3" key="0"></column>
        <column table="a" column="color_r" type="number" title="" as="color_r" key="0"></column>
        <column table="a" column="color_g" type="number" title="" as="color_g" key="0"></column>
        <column table="a" column="color_b" type="number" title="" as="color_b" key="0"></column>
        <column table="a" column="color_col" type="string" title="" as="color_col" key="0"></column>
        <column table="a" column="abbr" type="string" title="" as="abbr" key="0"></column>
        <column table="a" column="pr_urist" type="number" title="" comment="1 - отн. к юр.блоку (претензия)" as="pr_urist" key="0"></column>
        <column table="a" column="color_tbl" type="string" title="" comment="подсветка строки в таблице" as="color_tbl" key="0"></column>
        <column table="a" column="pr_ad" type="number" title="" comment="признак статуса ад" as="pr_ad" key="0"></column>
        <column table="a" column="pr_doc" type="number" title="" as="pr_doc" key="0"></column>
        <column table="a" column="pr_pd" type="number" title="" as="pr_pd" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_status" as="a" title="Статус"></table>
      </from>
    </query>
    <query name="is_status_atp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_status_atp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="color" type="string" title="" as="color" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_status_atp" as="a"></table>
      </from>
    </query>
    <query name="is_sum_akts" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_sum_akts.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sum_akts" type="number" as="kod_sum_akts" key="1" fixed="1"></column>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" reference="is_vip_dog" refcol="kod_vip_dog" key="0"></column>
        <column table="a" column="kod_sum_ro" type="number" as="kod_sum_ro" reference="is_sum_ro" refcol="kod_sum_ro" key="0"></column>
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0"></column>
        <column table="a" column="summa" type="number" title="" as="summa" key="0"></column>
        <column table="a" column="nds" type="number" title="" as="nds" key="0"></column>
        <column table="a" column="proc" type="number" title="" as="proc" key="0"></column>
        <column table="a" column="ostatok" type="number" title="" as="ostatok" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_sum_akts" refcol="kod_sum_akts" key="0"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="kod_doc_vip" type="number" comment="код счета/акта по дог-рам ебт" as="kod_doc_vip" reference="is_doc_vip" refcol="kod_doc_vip" key="0"></column>
        <column table="a" column="contr_ofk" type="number" title="" comment="контроль офк" as="contr_ofk" key="0"></column>
        <column table="a" column="period" type="string" title="" as="period" key="0"></column>
        <column table="a" column="kod_offset" type="number" comment="код док-та основания по взаимозачету" as="kod_offset" reference="is_dop_doc" refcol="kod_dop_doc" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_sum_akts" as="a"></table>
        <query name="is_doc_vip" as="kod_doc_vip" join="left outer" dname="is_sum_akts">
          <call function="=">
            <column table="a" column="kod_doc_vip"></column>
            <column table="kod_doc_vip" column="kod_doc_vip"></column>
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_sum_akts" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="is_ro" as="kod_ro" join="left outer" dname="is_sum_akts">
          <call function="=">
            <column table="a" column="kod_ro"></column>
            <column table="kod_ro" column="kod_ro"></column>
          </call>
        </query>
        <query name="is_sum_akts" as="kod_parent" join="left outer" dname="is_sum_akts">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_sum_akts"></column>
          </call>
        </query>
        <query name="is_sum_ro" as="kod_sum_ro" join="left outer" dname="is_sum_akts">
          <call function="=">
            <column table="a" column="kod_sum_ro"></column>
            <column table="kod_sum_ro" column="kod_sum_ro"></column>
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog" join="left outer" dname="is_sum_akts" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog"></column>
            <column table="kod_vip_dog" column="kod_vip_dog"></column>
          </call>
        </query>
        <query name="is_dop_doc" as="kod_offset" join="left outer" dname="is_sum_akts">
          <call function="=">
            <column table="a" column="kod_offset"></column>
            <column table="kod_offset" column="kod_dop_doc"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_sum_ro" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_sum_ro.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sum_ro" type="number" as="kod_sum_ro" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0"></column>
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0"></column>
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0"></column>
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0"></column>
        <column table="a" column="summa" type="number" title="" as="summa" key="0"></column>
        <column table="a" column="proc" type="number" title="" as="proc" key="0"></column>
        <column table="a" column="nds" type="number" title="" as="nds" key="0"></column>
        <column table="a" column="kod_spr_smet" type="number" as="kod_spr_smet" reference="is_spr_smet" refcol="kod_spr_smet" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0"></column>
        <column table="a" column="predm" type="string" title="" as="predm" key="0"></column>
        <column table="a" column="akts" type="string" title="" as="akts" key="0"></column>
        <column table="a" column="kod_spr_budget" type="number" as="kod_spr_budget" reference="is_spr_budget" refcol="kod_spr_budget" key="0"></column>
        <column table="a" column="kod_parent" type="number" comment="закрытие квоты" as="kod_parent" reference="is_sum_ro" refcol="kod_sum_ro" key="0"></column>
        <column table="a" column="ostatok_kvota" type="number" title="" as="ostatok_kvota" key="0"></column>
        <column table="a" column="kod_dog_new" type="number" comment="код осн. дог-ра на кот. переходит оплата по доп.согл." as="kod_dog_new" key="0"></column>
        <column table="a" column="kod_spr_rao" type="number" as="kod_spr_rao" key="0"></column>
        <column table="a" column="kod_zak" type="number" comment="код закупки" as="kod_zak" key="0"></column>
        <column table="a" column="kod_lot" type="number" comment="код лота" as="kod_lot" key="0"></column>
        <column table="a" column="kod_zayav" type="number" comment="код заявки" as="kod_zayav" key="0"></column>
        <column table="a" column="kod_cfo" type="number" comment="код цфо" as="kod_cfo" key="0"></column>
        <column table="a" column="kod_dop_contract" type="number" comment="код заявки ад(для журн42)" as="kod_dop_contract" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_sum_ro" as="a"></table>
        <query name="is_ro" as="kod_ro" join="left outer" dname="is_sum_ro">
          <call function="=">
            <column table="a" column="kod_ro"></column>
            <column table="kod_ro" column="kod_ro"></column>
          </call>
        </query>
        <query name="is_spr_budget" as="kod_spr_budget" join="left outer" dname="is_sum_ro">
          <call function="=">
            <column table="a" column="kod_spr_budget"></column>
            <column table="kod_spr_budget" column="kod_spr_budget"></column>
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_sum_ro">
          <call function="=">
            <column table="a" column="kod_spr_doc"></column>
            <column table="kod_spr_doc" column="kod_spr_doc"></column>
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer" dname="is_sum_ro">
          <call function="=">
            <column table="a" column="kod_spr_smet"></column>
            <column table="kod_spr_smet" column="kod_spr_smet"></column>
          </call>
        </query>
        <query name="is_sum_ro" as="kod_parent" join="left outer" dname="is_sum_ro">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_sum_ro"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_type_source" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_type_source.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_type_source" as="a" />
      </from>
    </query>
    <query name="is_uved_info" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_uved_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_uved" type="number" column-mandatory="1" as="kod_uved" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="kn_sert_power" type="string" data-size="500" title="" as="kn_sert_power" key="0" />
        <column table="a" column="date_reg_bd" type="string" data-size="500" title="" as="date_reg_bd" key="0" />
        <column table="a" column="date_reg" type="string" data-size="500" title="" as="date_reg" key="0" />
        <column table="a" column="kn_atp_case" type="string" data-size="500" title="" as="kn_atp_case" key="0" />
        <column table="a" column="date_podpis_cust" type="string" data-size="500" title="" as="date_podpis_cust" key="0" />
        <column table="a" column="status" type="string" data-size="500" title="" as="status" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_uved_info" as="a" />
        <query name="is_lkk_vip_tu" as="kod_uved" join="left outer" dname="is_uved_info">
          <call function="=">
            <column table="a" column="kod_uved" />
            <column table="kod_uved" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_uvtu_add_plan" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_uvtu_add_plan.xml" haskeys="1">
      <select>
        <column table="a" column="kod_uvtu_add_plan" type="number" column-mandatory="1" comment="Первичный ключ" as="kod_uvtu_add_plan" key="1" fixed="1" />
        <column table="a" column="kod_uvtu" type="number" column-mandatory="1" comment="Код УВТУ" as="kod_uvtu" reference="is_lkk_vip_tu" refcol="kod" key="0" />
        <column table="a" column="dat_task_add" type="date" column-mandatory="1" title="" comment="Дата задачи" as="dat_task_add" key="0" />
        <column table="a" column="dat_task_processed" type="date" title="" comment="Дата обработки задачи" as="dat_task_processed" key="0" />
        <column table="a" column="error" type="string" data-size="4000" title="" comment="Ошибка обработки задачи" as="error" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_uvtu_add_plan" as="a" />
        <query name="is_lkk_vip_tu" as="kod_uvtu" join="left outer" dname="is_uvtu_add_plan">
          <call function="=">
            <column table="a" column="kod_uvtu" />
            <column table="kod_uvtu" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_vip_dog" title="Док-ты по выполнению" class="1" timestamp="07.09.2018 02:32:03" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_vip_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="is_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_period" type="number" as="kod_period" reference="is_period" refcol="kod_period" key="0" />
        <column table="a" column="num" type="string" title="" as="num" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата закрытия" as="dat_post" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="vsego" type="number" title="Сумма по док-ту выполнения" is-fact="1" agg="sum" as="vsego" fact="is_vip_dog_vsego" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="summa" type="number" title="Сумма" as="summa" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0" />
        <column table="a" column="prizn_r" type="number" title="" comment="признак участия в расчетах по сумме выполнения работ, если 1 - сумма участвует в сумме &quot;выполнено&quot;" as="prizn_r" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="ostatok" type="number" title="" as="ostatok" key="0" />
        <column table="a" column="kod_doc_vip" type="number" as="kod_doc_vip" reference="is_doc_vip" refcol="kod_doc_vip" key="0" />
        <column table="a" column="volume" type="number" title="" as="volume" key="0" />
        <column table="a" column="dat_srok" type="date" title="" comment="срок оплаты" as="dat_srok" key="0" />
        <column table="a" column="ram" type="number" title="" comment="признак  зачета по счету рамочного дог-ра" as="ram" key="0" />
        <column table="a" column="dat_buh" type="date" title="" comment="дата принятие акта бухгалтерией" as="dat_buh" key="0" />
        <column table="a" column="num_sf" type="string" title="" comment="номер и даты сч/факт для печатив рно" as="num_sf" key="0" />
        <column table="a" column="sum_mat" type="number" title="" comment="сумма по материалам" as="sum_mat" key="0" />
        <column table="a" column="sum_mat_nds" type="number" title="" comment="ндс сумма по материалам" as="sum_mat_nds" key="0" />
        <column table="a" column="dat_kr" type="date" title="" comment="дата предост. кредита" as="dat_kr" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="срок пользования c тек. кредитом" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="срок пользования по тек. кредитом" as="dat_po" key="0" />
        <column table="a" column="proc_kr" type="number" title="" comment="процент по кредиту" as="proc_kr" key="0" />
        <column table="a" column="kod_offset" type="number" comment="код док-та основания по взаимозачету" as="kod_offset" reference="is_dop_doc" refcol="kod_dop_doc" key="0" />
        <column table="a" column="kod_vip_dog_offset" type="number" comment="код док-та родителя для взаимозачета" as="kod_vip_dog_offset" reference="is_vip_dog" refcol="kod_vip_dog" key="0" />
        <column table="a" column="dat_doc_rasch" type="date" title="" comment="дата установки признака расчет" as="dat_doc_rasch" key="0" />
        <column table="a" column="pr_god_rab_god_doc" type="number" title="" comment="1-отключить проверку года документа с годом работ" as="pr_god_rab_god_doc" key="0" />
        <column table="a" column="doc_file_name" type="string" title="" comment="имя файла без пути" as="doc_file_name" key="0" />
        <column table="a" column="doc_file" type="blob" title="" comment="файл в формате pdf" as="doc_file" key="0" />
        <column table="a" column="path" type="string" title="" comment="путь к документу" as="path" key="0" />
        <column table="a" column="prizn_vip" type="number" title="" comment="признак готовности" as="prizn_vip" key="0" />
        <column table="a" column="contents_vip" type="string" title="" comment="содержание документа" as="contents_vip" key="0" />
        <column table="a" column="dat_publ" type="date" title="" comment="дата публикации" as="dat_publ" key="0" />
        <column table="a" column="kod_ist_fin" type="number" comment="ист.фин-я по ип (для лэ)" as="kod_ist_fin" key="0" />
        <column table="a" column="doc_file_ext" type="string" title="" comment="расширение файла" as="doc_file_ext" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" comment="признак офз" as="pr_ofz" key="0" />
        <column table="a" column="dat_doc_buh_tmp" type="date" title="" comment="для сохранения даты акта кидо при привязке бух акта" as="dat_doc_buh_tmp" key="0" />
        <column table="a" column="proc_rezerv" type="number" title="" comment="% резервирования" as="proc_rezerv" key="0" />
        <column table="a" column="sum_rezerv" type="number" title="" comment="сумма резервирования" as="sum_rezerv" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_vip_dog" as="a" title="Док-ты по выполнению">
          <link name="kod_period" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_period" table="is_period" child="is_vip_dog" field="kod_period" parent="is_period" back="is_vip_dog" title="Этапы работ">
            <dimlink name="is_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ipr_kod_ispolnit" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ipr_kod_titul_ip" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_dog" table="is_dogovor" child="is_vip_dog" field="kod_dog" parent="is_dogovor" back="is_vip_dog" title="Подрядные договоры" />
        </table>
        <query name="is_dop_doc" as="kod_offset" join="left outer" dname="is_vip_dog">
          <call function="=">
            <column table="a" column="kod_offset" />
            <column table="kod_offset" column="kod_dop_doc" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_vip_dog_offset" join="left outer" dname="is_vip_dog" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog_offset" />
            <column table="kod_vip_dog_offset" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="is_vip_dog">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_vip_dog" as="kod_parent" join="left outer" dname="is_vip_dog" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_period" as="kod_period" join="left outer" dname="is_vip_dog" title="Этапы работ">
          <call function="=">
            <column table="a" column="kod_period" />
            <column table="kod_period" column="kod_period" />
          </call>
        </query>
        <query name="is_doc_vip" as="kod_doc_vip" join="left outer" dname="is_vip_dog">
          <call function="=">
            <column table="a" column="kod_doc_vip" />
            <column table="kod_doc_vip" column="kod_doc_vip" />
          </call>
        </query>
        <query name="isv_ip_vip_dog" as="kod_vip_dog_ip" join="left outer" dname="is_vip_dog">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog_ip" column="kod_vip_dog" />
          </call>
        </query>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_vip_dog" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_viza" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_viza.xml" haskeys="1">
      <select>
        <column table="a" column="kod_viza" type="number" as="kod_viza" key="1" fixed="1"></column>
        <column table="a" column="kod_person" type="number" as="kod_person" reference="is_person" refcol="kod_person" key="0"></column>
        <column table="a" column="kod_spr_viz" type="number" as="kod_spr_viz" reference="is_spr_viz" refcol="kod_spr_viz" key="0"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="is_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="num_pp" type="number" title="" as="num_pp" key="0"></column>
        <column table="a" column="dat_post" type="date" title="" as="dat_post" key="0"></column>
        <column table="a" column="dat_viz" type="date" title="" as="dat_viz" key="0"></column>
        <column table="a" column="dolgn" type="string" title="" as="dolgn" key="0"></column>
        <column table="a" column="fio" type="string" title="" as="fio" key="0"></column>
        <column table="a" column="name_direct" type="string" title="" as="name_direct" key="0"></column>
        <column table="a" column="tel" type="string" title="" as="tel" key="0"></column>
        <column table="a" column="prizn_podr" type="number" title="" as="prizn_podr" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" key="0"></column>
        <column table="a" column="spec_text" type="string" title="" as="spec_text" key="0"></column>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0"></column>
        <column table="a" column="kod_spr_zam_dog" type="number" as="kod_spr_zam_dog" key="0"></column>
        <column table="a" column="zam" type="string" title="" as="zam" key="0"></column>
        <column table="a" column="kod_ucfo" type="number" comment="код уцфо" as="kod_ucfo" key="0"></column>
        <column table="a" column="ucfo" type="string" title="" comment="наим.уцфо (для отчетов лэ)" as="ucfo" key="0"></column>
        <column table="a" column="dat_cr" type="date" title="" comment="дата и время создания строки визирования (для сортировки)" as="dat_cr" key="0"></column>
        <column table="a" column="kod_spr_viz_old" type="number" as="kod_spr_viz_old" key="0"></column>
        <column table="a" column="dat_viz_old" type="date" title="" as="dat_viz_old" key="0"></column>
        <column table="a" column="ucfo_all" type="string" title="" comment="полное наимен.уцфо(отчет лэ по исполн.дисц)" as="ucfo_all" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_viza" as="a"></table>
        <query name="is_dogovor" as="kod_dog" join="left outer" dname="is_viza" title="Подрядные договоры">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dop_contract" join="left outer" dname="is_viza" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dop_contract"></column>
            <column table="kod_dop_contract" column="kod_dop_contract"></column>
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_viza">
          <call function="=">
            <column table="a" column="kod_person"></column>
            <column table="kod_person" column="kod_person"></column>
          </call>
        </query>
        <query name="is_spr_viz" as="kod_spr_viz" join="left outer" dname="is_viza">
          <call function="=">
            <column table="a" column="kod_spr_viz"></column>
            <column table="kod_spr_viz" column="kod_spr_viz"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="is_viza_agr_doc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_viza_agr_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" comment="Код документа" as="kod_doc" key="0" />
        <column table="a" column="pref" type="string" column-mandatory="1" title="" comment="Префикс (+ kod_doc) - уникальный ключ" as="pref" key="0" />
        <column table="a" column="kod_spr_viz" type="number" column-mandatory="1" comment="Дейсвтие" as="kod_spr_viz" reference="is_spr_viz" refcol="kod_spr_viz" key="0" />
        <column table="a" column="date_create" type="date" title="" comment="Дата создания" as="date_create" key="0" />
        <column table="a" column="dat_post" type="date" title="" comment="Дата передачи" as="dat_post" key="0" />
        <column table="a" column="kod_person" type="number" comment="Исполнитель" as="kod_person" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_direct" type="number" comment="Подразделение" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="dat_viz" type="date" title="" comment="Дата дейсвтия" as="dat_viz" key="0" />
        <column table="a" column="spec" type="string" title="" comment="Примечание" as="spec" key="0" />
        <column table="a" column="remark" type="string" title="" comment="Замечание" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Польз. измен." as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" key="0" />
        <column table="a" column="full_kod_doc" type="string" column-mandatory="1" as="full_kod_doc" key="0" />
        <column table="a" column="kod_algorithm" type="number" column-mandatory="1" comment="Код этапа" as="kod_algorithm" reference="is_reglam_algorithm" refcol="kod" key="0" />
        <column table="a" column="num_iter" type="number" title="" as="num_iter" key="0" />
        <column table="a" column="tel" type="string" title="" as="tel" key="0" />
        <column table="a" column="fio" type="string" title="" as="fio" key="0" />
        <column table="a" column="dolgn" type="string" title="" as="dolgn" key="0" />
        <column table="a" column="name_direct" type="string" title="" as="name_direct" key="0" />
        <column table="a" column="fast_move" type="number" title="" as="fast_move" key="0" />
        <column table="a" column="jump_stage" type="number" title="" as="jump_stage" key="0" />
        <column table="a" column="prev_kod" type="number" title="" as="prev_kod" reference="is_viza_agr_doc" refcol="kod" key="0" />
        <column table="a" column="pr_get_self" type="number" title="" as="pr_get_self" key="0" />
        <column table="a" column="kod_direct_next" type="number" as="kod_direct_next" key="0" />
        <column table="a" column="kod_person_next" type="number" as="kod_person_next" key="0" />
        <column table="a" column="dat_post_stage" type="date" title="" as="dat_post_stage" key="0" />
        <column table="a" column="kod_person_v" type="number" comment="Визирующий сотрудник" as="kod_person_v" reference="is_person" refcol="kod_person" key="0" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_reglam_vid_doc" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_viza_agr_doc" as="a" />
        <query name="is_viza_agr_doc" as="prev_kod" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="prev_kod" />
            <column table="prev_kod" column="kod" />
          </call>
        </query>
        <query name="is_person" as="kod_person_v" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="kod_person_v" />
            <column table="kod_person_v" column="kod_person" />
          </call>
        </query>
        <query name="is_reglam_vid_doc" as="kod_vid_doc" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod" />
          </call>
        </query>
        <query name="is_reglam_algorithm" as="kod_algorithm" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="kod_algorithm" />
            <column table="kod_algorithm" column="kod" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_viza_agr_doc" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_spr_viz" as="kod_spr_viz" join="left outer" dname="is_viza_agr_doc">
          <call function="=">
            <column table="a" column="kod_spr_viz" />
            <column table="kod_spr_viz" column="kod_spr_viz" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_viza_agr_doc_last" class="1" timestamp="24.12.2019 19:06:19" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_viza_agr_doc_last.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" key="1" as="kod" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" comment="Код документа" as="kod_doc" />
        <column table="a" column="pref" type="string" data-size="10" column-mandatory="1" title="" comment="Префикс (+ kod_doc) - уникальный ключ" as="pref" />
        <column table="a" column="kod_spr_viz" type="number" column-mandatory="1" comment="Дейсвтие" as="kod_spr_viz" reference="is_spr_viz" refcol="kod_spr_viz" />
        <column table="a" column="date_create" type="date" title="" comment="Дата создания" as="date_create" />
        <column table="a" column="dat_post" type="date" title="" comment="Дата передачи" as="dat_post" />
        <column table="a" column="kod_person" type="number" comment="Исполнитель" as="kod_person" reference="is_person" refcol="kod_person" />
        <column table="a" column="kod_direct" type="number" comment="Подразделение" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" />
        <column table="a" column="dat_viz" type="date" title="" comment="Дата дейсвтия" as="dat_viz" />
        <column table="a" column="spec" type="string" data-size="4000" title="" comment="Примечание" as="spec" />
        <column table="a" column="remark" type="string" data-size="4000" title="" comment="Замечание" as="remark" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" />
        <column table="a" column="full_kod_doc" type="string" data-size="20" column-mandatory="1" as="full_kod_doc" />
        <column table="a" column="kod_algorithm" type="number" column-mandatory="1" comment="Код этапа" as="kod_algorithm" reference="is_reglam_algorithm" refcol="kod" />
        <column table="a" column="num_iter" type="number" title="" comment="Номер итерации" as="num_iter" />
        <column table="a" column="fio" type="string" data-size="250" title="" comment="ФИО (для истории сохраненяем)  - определяем в тригере" as="fio" />
        <column table="a" column="name_direct" type="string" data-size="25" title="" comment="Подразделение (для истории сохраняем)  - определяем в тригере" as="name_direct" />
        <column table="a" column="tel" type="string" data-size="100" title="" comment="Телефон сотрудника (для истории сохраняем)  - определяем в тригере" as="tel" />
        <column table="a" column="dolgn" type="string" data-size="250" title="" comment="Должность ФИО (для истории сохраненяем)  - определяем в тригере" as="dolgn" />
        <column table="a" column="fast_move" type="number" title="" as="fast_move" />
        <column table="a" column="jump_stage" type="number" title="" as="jump_stage" />
        <column table="a" column="prev_kod" type="number" title="" as="prev_kod" />
        <column table="a" column="pr_get_self" type="number" title="" as="pr_get_self" />
        <column table="a" column="kod_direct_next" type="number" as="kod_direct_next" />
        <column table="a" column="kod_person_next" type="number" as="kod_person_next" />
        <column table="a" column="dat_post_stage" type="date" title="" as="dat_post_stage" />
        <column table="a" column="kod_person_v" type="number" comment="Визирующий сотрудник" as="kod_person_v" reference="is_person" refcol="kod_person" />
        <column table="a" column="kod_vid_doc" type="number" as="kod_vid_doc" reference="is_reglam_vid_doc" refcol="kod" />
        <column table="a" column="prev_remark" type="string" data-size="4000" title="" as="prev_remark" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="is_viza_agr_doc_last" as="a" />
        <query name="is_reglam_vid_doc" as="kod_vid_doc" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod_vid_doc" />
            <column table="kod_vid_doc" column="kod" />
          </call>
        </query>
        <query name="is_person" as="kod_person_v" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod_person_v" />
            <column table="kod_person_v" column="kod_person" />
          </call>
        </query>
        <query name="is_viza_agr_doc" as="kod" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="is_viza_agr_doc_last" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_viz" as="kod_spr_viz" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod_spr_viz" />
            <column table="kod_spr_viz" column="kod_spr_viz" />
          </call>
        </query>
        <query name="is_person" as="kod_person" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod_person" />
            <column table="kod_person" column="kod_person" />
          </call>
        </query>
        <query name="is_reglam_algorithm" as="kod_algorithm" join="left outer" dname="is_viza_agr_doc_last">
          <call function="=">
            <column table="a" column="kod_algorithm" />
            <column table="kod_algorithm" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_vizit_type_remarks" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\is_vizit_type_remarks.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="500" title="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_vizit_type_remarks" as="a" />
      </from>
    </query>
    <query name="kk_status" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kk_status.xml" haskeys="1">
      <select>
        <column table="a" column="status" type="number" column-mandatory="1" title="" as="status" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="color" type="string" title="" as="color" key="0" />
        <column table="a" column="n_color" type="number" title="" as="n_color" key="0" />
        <column table="a" column="color1" type="number" title="" as="color1" key="0" />
        <column table="a" column="color2" type="number" title="" as="color2" key="0" />
        <column table="a" column="color3" type="number" title="" as="color3" key="0" />
        <column table="a" column="color_r" type="number" title="" as="color_r" key="0" />
        <column table="a" column="color_g" type="number" title="" as="color_g" key="0" />
        <column table="a" column="color_b" type="number" title="" as="color_b" key="0" />
        <column table="a" column="color_col" type="string" title="" as="color_col" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_status" as="a" />
      </from>
    </query>
    <query name="kk_vid_real" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" column-mandatory="1" title="" as="vid_real" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_vid_real" as="a" />
      </from>
    </query>
    <query name="kr_extract" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_extract.xml" haskeys="1">
      <select>
        <column table="a" column="kod_extract" type="number" column-mandatory="1" as="kod_extract" key="1" fixed="1" />
        <column table="a" column="num_bank" type="number" title="" comment="номер выписке (автоматом)" as="num_bank" key="0" />
        <column table="a" column="dat_bank" type="date" title="" comment="дата выписки и время" as="dat_bank" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="банк компании" column-mandatory="1" as="kodb_p" reference="ks_bank_p" refcol="kodb_p" key="0" />
        <column table="a" column="opl" type="number" title="" comment="сумма по виписке" column-mandatory="1" as="opl" key="0" />
        <column table="a" column="kod_vidopl" type="number" comment="форма оплаты" column-mandatory="1" as="kod_vidopl" reference="ks_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="pr_vvod" type="number" title="" column-mandatory="1" as="pr_vvod" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_extract" as="a" />
        <query name="ks_bank_p" as="kodb_p" join="left outer" dname="kr_extract">
          <call function="=">
            <column table="a" column="kodb_p"></column>
            <column table="kodb_p" column="kodb_p"></column>
          </call>
        </query>
        <query name="ks_vidopl" as="kod_vidopl" join="left outer" dname="kr_extract">
          <call function="=">
            <column table="a" column="kod_vidopl"></column>
            <column table="kod_vidopl" column="kod_vidopl"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_finans" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_finans.xml" haskeys="1">
      <select>
        <column table="a" column="kod_finans" type="number" column-mandatory="1" as="kod_finans" key="1" fixed="1" />
        <column table="a" column="kod_spr_budget" type="number" column-mandatory="1" as="kod_spr_budget" reference="is_spr_budget" refcol="kod_spr_budget" key="0" />
        <column table="a" column="kredit" type="number" column-mandatory="1" title="" as="kredit" key="0" />
        <column table="a" column="vsego" type="number" column-mandatory="1" title="" as="vsego" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kod_rnp" type="number" column-mandatory="1" as="kod_rnp" reference="kr_rnp" refcol="kod_rnp" key="0" />
        <column table="a" column="edit" type="number" title="" as="edit" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="kod_spr_kredit" type="number" column-mandatory="1" as="kod_spr_kredit" reference="is_spr_kredit" refcol="kod_spr_kredit" key="0" />
        <column table="a" column="kod_budget_sap" type="number" comment="код БДДС спр-ка SAP (исп. в ЛЭ)" as="kod_budget_sap" reference="is_spr_budget_sap" refcol="kod_budget_sap" key="0" />
        <column table="a" column="kod_cfo" type="number" comment="код СФО (по спр-ку is_spr_direct)" as="kod_cfo" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_pfm" type="number" comment="код ПФМ" as="kod_pfm" reference="is_spr_pfm" refcol="kod_spr_pfm" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="код расч счета" as="kodb_p" reference="ks_bank_p" refcol="kodb_p" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_finans" as="a" />
        <query name="is_spr_budget_sap" as="kod_budget_sap" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kod_budget_sap" />
            <column table="kod_budget_sap" column="kod_budget_sap" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_cfo" join="left outer" dname="kr_finans" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_cfo" />
            <column table="kod_cfo" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_pfm" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kod_pfm" />
            <column table="kod_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="ks_bank_p" as="kodb_p" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kodb_p" />
            <column table="kodb_p" column="kodb_p" />
          </call>
        </query>
        <query name="kr_rnp" as="kod_rnp" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kod_rnp" />
            <column table="kod_rnp" column="kod_rnp" />
          </call>
        </query>
        <query name="is_spr_budget" as="kod_spr_budget" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kod_spr_budget" />
            <column table="kod_spr_budget" column="kod_spr_budget" />
          </call>
        </query>
        <query name="is_spr_kredit" as="kod_spr_kredit" join="left outer" dname="kr_finans">
          <call function="=">
            <column table="a" column="kod_spr_kredit" />
            <column table="kod_spr_kredit" column="kod_spr_kredit" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_opl_bank" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" comment="уник.номер" column-mandatory="1" as="kod_link" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" comment="вид оплаты" column-mandatory="1" as="kod_vidopl" reference="ks_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="kod_rnp" type="number" as="kod_rnp" reference="kr_rnp" refcol="kod_rnp" key="0" />
        <column table="a" column="kod_extract" type="number" as="kod_extract" reference="kr_extract" refcol="kod_extract" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код получателя" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_rs" type="number" comment="код расч. счета получателя (kod_rs)" as="kod_rs" reference="is_rs_cr" refcol="kod_rs_cr" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bank_tmp" refcol="kodb" key="0" />
        <column table="a" column="bic_pol" type="string" title="" comment="бик банка получателя" as="bic_pol" key="0" />
        <column table="a" column="name_pol" type="string" title="" comment="наименование получателя" as="name_pol" key="0" />
        <column table="a" column="rs_pol" type="string" title="" comment="расч. счет получателя" as="rs_pol" key="0" />
        <column table="a" column="inn_pol" type="string" title="" comment="инн получателя" as="inn_pol" key="0" />
        <column table="a" column="kpp_pol" type="number" title="" comment="кпп получателя" as="kpp_pol" key="0" />
        <column table="a" column="kodb_p" type="number" title="" comment="код расч. счета плательщика (эск)" column-mandatory="1" as="kodb_p" reference="ks_bank_p" refcol="kodb_p" key="0" />
        <column table="a" column="kodbpl" type="number" title="" comment="код банка плательщика" as="kodbpl" reference="ks_bank_tmp" refcol="kodb" key="0" />
        <column table="a" column="name_pl" type="string" title="" comment="наименования плательщика (эск)" as="name_pl" key="0" />
        <column table="a" column="rs_pl" type="string" title="" comment="расч. счет плательщика" as="rs_pl" key="0" />
        <column table="a" column="inn_pl" type="string" title="" as="inn_pl" key="0" />
        <column table="a" column="kpp_pl" type="number" title="" comment="кпп плательщика" as="kpp_pl" key="0" />
        <column table="a" column="dat_opl" type="date" title="" comment="дата оплаты в банке" as="dat_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="" comment="№ док-та оплаты в банке" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" comment="сумма оплаченная банком" as="opl" key="0" />
        <column table="a" column="num_pl" type="number" title="" comment="номер пп" as="num_pl" key="0" />
        <column table="a" column="dat_deb" type="date" title="" comment="дата пп" as="dat_deb" key="0" />
        <column table="a" column="nachisl" type="number" title="" comment="сумма пп" as="nachisl" key="0" />
        <column table="a" column="osn_opl" type="string" title="" comment="основание для оплаты" as="osn_opl" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" comment="признак разноса оплат" as="pr_raznos" key="0" />
        <column table="a" column="file_export" type="string" title="" comment="имя файла который экспортирует данную запись" as="file_export" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="currency" type="string" title="" comment="валюта" as="currency" key="0" />
        <column table="a" column="pr_return" type="number" title="" comment="1-возврат в банк данного платежного поручения" as="pr_return" key="0" />
        <column table="a" column="ks_pl" type="string" title="" as="ks_pl" key="0" />
        <column table="a" column="ks_pol" type="string" title="" as="ks_pol" key="0" />
        <column table="a" column="bank_pl" type="string" title="" as="bank_pl" key="0" />
        <column table="a" column="bank_pol" type="string" title="" as="bank_pol" key="0" />
        <column table="a" column="bic_pl" type="string" title="" as="bic_pl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="ocher_pl" type="number" title="" comment="очередность платежа" as="ocher_pl" key="0" />
        <column table="a" column="tmp" type="string" title="" as="tmp" key="0" />
        <column table="a" column="vo" type="string" title="" comment="вид операции - записывается при импорте" as="vo" key="0" />
        <column table="a" column="text_on_file" type="string" title="" comment="первичная инф.из файла" as="text_on_file" key="0" />
        <column table="a" column="pr_export" type="number" title="" comment="признак готовности к экспорту (только для тгк)" as="pr_export" key="0" />
        <column table="a" column="pr_razn_1c" type="number" title="" comment="признак разноса(аналог kod_rnp)" as="pr_razn_1c" key="0" />
        <column table="a" column="kodp_old" type="number" title="" comment="старый код казначейства" as="kodp_old" key="0" />
        <column table="a" column="kod_rs_old" type="number" comment="код расч счета кзнач старый" as="kod_rs_old" key="0" />
        <column table="a" column="kod_bd" type="string" comment="код кбк" as="kod_bd" key="0" />
        <column table="a" column="sap_dat_export" type="date" title="" comment="дата выгрузки в sap" as="sap_dat_export" key="0" />
        <column table="a" column="sap_pr_sign" type="number" title="" comment="0-не существенный, 1- существенный (из sap придет)" as="sap_pr_sign" key="0" />
        <column table="a" column="sap_status" type="number" title="" comment="статус sap (согласовано, отказано)" as="sap_status" key="0" />
        <column table="a" column="sap_prim" type="string" title="" comment="примечание из sap (например при отказе в оплате)" as="sap_prim" key="0" />
        <column table="a" column="sap_porc" type="number" title="" comment="порция выгрузки в sap" as="sap_porc" key="0" />
        <column table="a" column="kod_link_parent" type="number" comment="родительский код разбиваемой записи" as="kod_link_parent" reference="kr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="pr_il" type="number" title="" comment="признак взыскание, поступление по ил" as="pr_il" key="0" />
        <column table="a" column="text_tmp" type="string" title="" comment="для внутренних дел" as="text_tmp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_opl_bank" as="a" />
        <query name="is_creditors" as="kodp" join="left outer" dname="kr_opl_bank" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="e_code"></column>
          </call>
        </query>
        <query name="is_rs_cr" as="kod_rs" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kod_rs"></column>
            <column table="kod_rs" column="kod_rs_cr"></column>
          </call>
        </query>
        <query name="kr_extract" as="kod_extract" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kod_extract"></column>
            <column table="kod_extract" column="kod_extract"></column>
          </call>
        </query>
        <query name="kr_opl_bank" as="kod_link_parent" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kod_link_parent"></column>
            <column table="kod_link_parent" column="kod_link"></column>
          </call>
        </query>
        <query name="kr_rnp" as="kod_rnp" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kod_rnp"></column>
            <column table="kod_rnp" column="kod_rnp"></column>
          </call>
        </query>
        <query name="ks_bank_tmp" as="kodbpl" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kodbpl"></column>
            <column table="kodbpl" column="kodb"></column>
          </call>
        </query>
        <query name="ks_bank_tmp" as="kodbpol" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kodbpol"></column>
            <column table="kodbpol" column="kodb"></column>
          </call>
        </query>
        <query name="ks_bank_p" as="kodb_p" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kodb_p"></column>
            <column table="kodb_p" column="kodb_p"></column>
          </call>
        </query>
        <query name="ks_vidopl" as="kod_vidopl" join="left outer" dname="kr_opl_bank">
          <call function="=">
            <column table="a" column="kod_vidopl"></column>
            <column table="kod_vidopl" column="kod_vidopl"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_opl_budget" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_opl_budget.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_budget" type="number" column-mandatory="1" as="kod_opl_budget" key="1" fixed="1" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="kod_link" type="number" column-mandatory="1" comment="уник.номер" as="kod_link" reference="kr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="kod_spr_budget" type="number" column-mandatory="1" as="kod_spr_budget" reference="is_spr_budget" refcol="kod_spr_budget" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="kod_budget_sap" type="number" comment="код БДДС спр-ка SAP (исп. в ЛЭ)" as="kod_budget_sap" reference="is_spr_budget_sap" refcol="kod_budget_sap" key="0" />
        <column table="a" column="kod_cfo" type="number" comment="код СФО (по спр-ку is_spr_direct)" as="kod_cfo" key="0" />
        <column table="a" column="kod_pfm" type="number" comment="код ПФМ" as="kod_pfm" key="0" />
        <column table="a" column="dat_extract" type="date" title="" comment="дата выписки (нужна для пересчета is_budget_fac_opl, т.к. при удалении строки уже не достать дату выписки)" as="dat_extract" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_opl_budget" as="a" />
        <query name="is_spr_budget_sap" as="kod_budget_sap" join="left outer" dname="kr_opl_budget">
          <call function="=">
            <column table="a" column="kod_budget_sap" />
            <column table="kod_budget_sap" column="kod_budget_sap" />
          </call>
        </query>
        <query name="is_spr_budget" as="kod_spr_budget" join="left outer" dname="kr_opl_budget">
          <call function="=">
            <column table="a" column="kod_spr_budget" />
            <column table="kod_spr_budget" column="kod_spr_budget" />
          </call>
        </query>
        <query name="kr_opl_bank" as="kod_link" join="left outer" dname="kr_opl_budget">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_opl_smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_opl_smet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_smet" type="number" column-mandatory="1" as="kod_opl_smet" key="1" fixed="1" />
        <column table="a" column="kod_link" type="number" column-mandatory="1" comment="уник.номер" as="kod_link" reference="kr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="kod_spr_smet" type="number" column-mandatory="1" as="kod_spr_smet" reference="is_spr_smet" refcol="kod_spr_smet" key="0" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="kod_reestr" type="number" comment="код реестра по лимитам (для зацепки за подразделение)" as="kod_reestr" reference="is_reestr_ro" refcol="kod_reestr" key="0" />
        <column table="a" column="kod_group_smet" type="number" comment="код шаблона Касс плана" as="kod_group_smet" reference="is_group_kass_pl_smet" refcol="kod_group_smet" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_opl_smet" as="a" />
        <query name="is_reestr_ro" as="kod_reestr" join="left outer" dname="kr_opl_smet">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
        <query name="is_group_kass_pl_smet" as="kod_group_smet" join="left outer" dname="kr_opl_smet">
          <call function="=">
            <column table="a" column="kod_group_smet" />
            <column table="kod_group_smet" column="kod_group_smet" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer" dname="kr_opl_smet">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="kr_opl_bank" as="kod_link" join="left outer" dname="kr_opl_smet">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_rnp" class="1" timestamp="31.05.2018 17:36:58" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_rnp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_rnp" type="number" column-mandatory="1" as="kod_rnp" key="1" fixed="1" />
        <column table="a" column="kod_spr_doc" type="number" column-mandatory="1" comment="вид док-та (49-реестр необходимых платежей)" as="kod_spr_doc" reference="is_spr_doc" refcol="kod_spr_doc" key="0" />
        <column table="a" column="kod_direct" type="number" column-mandatory="1" comment="код дирекции" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_predpr" type="number" column-mandatory="1" comment="код заявителя (предприятия)" as="kod_predpr" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" comment="код получателя" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_reestr" type="number" as="kod_reestr" reference="kr_reestrs" refcol="kod_reestr" key="0" />
        <column table="a" column="status" type="number" column-mandatory="1" title="" as="status" reference="kk_status" refcol="status" key="0" />
        <column table="a" column="kod_dest" type="number" column-mandatory="1" comment="код назначение платежа" as="kod_dest" reference="ks_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kodb_p" type="number" title="" as="kodb_p" reference="ks_bank_p" refcol="kodb_p" key="0" />
        <column table="a" column="kod_rs" type="number" as="kod_rs" key="0" />
        <column table="a" column="vid_real" type="number" column-mandatory="1" title="" as="vid_real" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ks_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="kod_st_org" type="number" as="kod_st_org" reference="ks_st_org" refcol="kod_st_org" key="0" />
        <column table="a" column="kazn_num" type="number" title="Казначейский номер" as="kazn_num" key="0" />
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0" />
        <column table="a" column="vsego" type="number" title="Сумма с НДС" as="vsego" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="num_nal_doc" type="string" title="" comment="номер налогового док-та" as="num_nal_doc" key="0" />
        <column table="a" column="dat_nal_doc" type="date" title="" comment="дата налогового док-та" as="dat_nal_doc" key="0" />
        <column table="a" column="kod_tip_nal" type="number" comment="тип налогового платежа" as="kod_tip_nal" reference="ks_tip_nal" refcol="kod_tip_nal" key="0" />
        <column table="a" column="kod_osn_nal" type="number" comment="основание налогового платежа" as="kod_osn_nal" reference="ks_osn_nal" refcol="kod_osn_nal" key="0" />
        <column table="a" column="kod_spr_bd" type="number" as="kod_spr_bd" reference="ks_bd_kl" refcol="kod_spr_bd" key="0" />
        <column table="a" column="kod_spr_okato" type="number" as="kod_spr_okato" reference="ks_okato" refcol="kod_spr_okato" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" comment="примечание" as="prim" key="0" />
        <column table="a" column="kod_text" type="number" as="kod_text" reference="ks_sp_text" refcol="kod_text" key="0" />
        <column table="a" column="pr_avans" type="number" title="" comment="1-аванс,2-прочее" as="pr_avans" key="0" />
        <column table="a" column="kod_ro" type="number" as="kod_ro" reference="is_ro" refcol="kod_ro" key="0" />
        <column table="a" column="text" type="string" title="" as="text" key="0" />
        <column table="a" column="ocher" type="number" title="" comment="очередность платежа" as="ocher" key="0" />
        <column table="a" column="dat_opl" type="date" title="" comment="планируемая дата оплаты" as="dat_opl" key="0" />
        <column table="a" column="num_pp" type="number" title="" comment="резервный номер пп (031-назн.платежа)" as="num_pp" key="0" />
        <column table="a" column="u_m" type="string" column-mandatory="1" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" column-mandatory="1" title="" as="d_m" key="0" />
        <column table="a" column="period_s" type="date" title="" comment="налоговый период с..." as="period_s" key="0" />
        <column table="a" column="period_po" type="date" title="" comment="налоговый период по..." as="period_po" key="0" />
        <column table="a" column="period" type="number" title="" comment="вид периода" as="period" key="0" />
        <column table="a" column="vip" type="number" title="" comment="пометка руководителя д/оплаты" as="vip" key="0" />
        <column table="a" column="period_str" type="string" title="" as="period_str" key="0" />
        <column table="a" column="pr_imp" type="number" title="" comment="1-имп.благополучно,2-нет казн№,3-нет статьи, 4-казн.№ введён неверно,5-статья введена неверно" as="pr_imp" key="0" />
        <column table="a" column="kodp_old" type="number" title="" comment="старый код казначейства" as="kodp_old" key="0" />
        <column table="a" column="kod_rs_old" type="number" comment="старый код расч счета казн" as="kod_rs_old" key="0" />
        <column table="a" column="kod_reestr_rno" type="number" comment="реестр по рно" as="kod_reestr_rno" key="0" />
        <column table="a" column="kod_spr_oktmo" type="number" comment="ОКТМО" as="kod_spr_oktmo" key="0" />
        <column table="a" column="s_dat_nal_doc" type="string" title="" comment="Дата налогового платежа строкой '0'" as="s_dat_nal_doc" key="0" />
        <column table="a" column="kod_yin" type="string" comment="КОД(УИН)" as="kod_yin" key="0" />
        <column table="a" column="inn_b" type="string" title="" comment="ИНН банка" as="inn_b" key="0" />
        <column table="a" column="name_plat" type="string" title="" comment="Наименование контрагента для плат док" as="name_plat" key="0" />
        <column table="a" column="dat_srok_dog" type="date" title="" comment="Срок оплаты по усл договора" as="dat_srok_dog" key="0" />
        <column table="a" column="kod_tip_id_fl" type="number" comment="Тип идентифик.сведений о ФЛ" as="kod_tip_id_fl" reference="ks_tip_id_fl" refcol="kod_tip_id" key="0" />
        <column table="a" column="pr_custom" type="number" title="" comment="Признак таможенного платежа" as="pr_custom" key="0" />
        <column table="a" column="custom_code" type="string" title="" comment="Код таможенного платежа" as="custom_code" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_rnp" as="a" />
        <query name="ks_tip_id_fl" as="kod_tip_id_fl" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_tip_id_fl" />
            <column table="kod_tip_id_fl" column="kod_tip_id" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="kr_rnp" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="kr_reestrs" as="kod_reestr" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
        <query name="ks_vidopl" as="kod_vidopl" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kk_status" as="status" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="status" />
            <column table="status" column="status" />
          </call>
        </query>
        <query name="is_ro" as="kod_ro" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_ro" />
            <column table="kod_ro" column="kod_ro" />
          </call>
        </query>
        <query name="ks_st_org" as="kod_st_org" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_st_org" />
            <column table="kod_st_org" column="kod_st_org" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="kr_rnp" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="ks_sp_text" as="kod_text" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_text" />
            <column table="kod_text" column="kod_text" />
          </call>
        </query>
        <query name="ks_okato" as="kod_spr_okato" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_spr_okato" />
            <column table="kod_spr_okato" column="kod_spr_okato" />
          </call>
        </query>
        <query name="ks_bd_kl" as="kod_spr_bd" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_spr_bd" />
            <column table="kod_spr_bd" column="kod_spr_bd" />
          </call>
        </query>
        <query name="ks_osn_nal" as="kod_osn_nal" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_osn_nal" />
            <column table="kod_osn_nal" column="kod_osn_nal" />
          </call>
        </query>
        <query name="ks_tip_nal" as="kod_tip_nal" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_tip_nal" />
            <column table="kod_tip_nal" column="kod_tip_nal" />
          </call>
        </query>
        <query name="ks_dest_opl" as="kod_dest" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_predpr" join="left outer" dname="kr_rnp" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_predpr" />
            <column table="kod_predpr" column="kod_direct" />
          </call>
        </query>
        <query name="ks_bank_p" as="kodb_p" join="left outer" dname="kr_rnp">
          <call function="=">
            <column table="a" column="kodb_p" />
            <column table="kodb_p" column="kodb_p" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_rnp_rs" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_rnp_rs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_rnp_rs" type="number" column-mandatory="1" as="kod_rnp_rs" key="1" fixed="1" />
        <column table="a" column="kod_rnp" type="number" column-mandatory="1" as="kod_rnp" reference="kr_rnp" refcol="kod_rnp" key="0" />
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kodb_p" type="number" title="" as="kodb_p" reference="ks_bank_p" refcol="kodb_p" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="not_r" type="number" column-mandatory="1" title="" comment="1 -если расч. сч. не должен участв. в расчетах по казн. док-ту" as="not_r" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="ocher_pl" type="number" title="" comment="очередность платежа в платежке, высталяется по назначению, но может корр. в зависимости от банка и условий" as="ocher_pl" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_rnp_rs" as="a" />
        <query name="ks_bank_p" as="kodb_p" join="left outer" dname="kr_rnp_rs">
          <call function="=">
            <column table="a" column="kodb_p" />
            <column table="kodb_p" column="kodb_p" />
          </call>
        </query>
        <query name="kr_rnp" as="kod_rnp" join="left outer" dname="kr_rnp_rs">
          <call function="=">
            <column table="a" column="kod_rnp" />
            <column table="kod_rnp" column="kod_rnp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_rs" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_rs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_rs" type="number" column-mandatory="1" as="kod_rs" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" as="kodp" key="0" />
        <column table="a" column="kodb" type="number" column-mandatory="1" title="" as="kodb" key="0" />
        <column table="a" column="rs" type="string" column-mandatory="1" title="" as="rs" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="ocher" type="number" title="" as="ocher" key="0" />
        <column table="a" column="kod_rs_cr" type="string" as="kod_rs_cr" key="0" />
        <column table="a" column="kodp_old" type="number" title="" as="kodp_old" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_rs" as="a" />
      </from>
    </query>
    <query name="kr_smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\kr_smet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_smet" type="number" column-mandatory="1" as="kod_smet" key="1" fixed="1" />
        <column table="a" column="kod_spr_smet" type="number" column-mandatory="1" as="kod_spr_smet" reference="is_spr_smet" refcol="kod_spr_smet" key="0" />
        <column table="a" column="vsego" type="number" title="" as="vsego" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kod_rnp" type="number" column-mandatory="1" as="kod_rnp" reference="kr_rnp" refcol="kod_rnp" key="0" />
        <column table="a" column="edit" type="number" title="" as="edit" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_smet" as="a" />
        <query name="kr_rnp" as="kod_rnp" join="left outer" dname="kr_smet">
          <call function="=">
            <column table="a" column="kod_rnp" />
            <column table="kod_rnp" column="kod_rnp" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer" dname="kr_smet">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_bank_p" class="1" timestamp="24.05.2018 19:18:53" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_bank_p.xml" haskeys="1">
      <select>
        <column table="a" column="kodb_p" type="number" title="" column-mandatory="1" as="kodb_p" key="1" fixed="1" />
        <column table="a" column="rs" type="string" title="" column-mandatory="1" as="rs" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kodb" type="number" title="" as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="ocher_plat" type="number" title="" comment="очередность платежа" as="ocher_plat" key="0" />
        <column table="a" column="limit" type="number" title="" comment="неснижаемый остаток" as="limit" key="0" />
        <column table="a" column="pr_bk" type="number" title="" comment="признак банк-клиент&#xA;1-псб&#xA;2-пэб" as="pr_bk" key="0" />
        <column table="a" column="dat_begin" type="date" title="Дата открытия счета" comment="дата открытия счета" as="dat_begin" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="дата закрытия счета" as="dat_end" key="0" />
        <column table="a" column="name_podr" type="string" title="" comment="наим. структурн. пожразделения" as="name_podr" key="0" />
        <column table="a" column="kod_tip_schet" type="number" as="kod_tip_schet" reference="ks_tip_schet" refcol="kod_tip_schet" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" comment="кратко" as="abbr" key="0" />
        <column table="a" column="not_prn" type="number" title="" comment="признак не отображать в отчетах" as="not_prn" key="0" />
        <column table="a" column="kod_direct" type="number" comment="структурное подразделение" as="kod_direct" reference="is_spr_direct" refcol="kod_direct" key="0" />
        <column table="a" column="kod_ist" type="number" comment="наименование организации" column-mandatory="1" as="kod_ist" reference="k_zbd" refcol="kod" key="0" />
        <column table="a" column="num_row" type="number" title="" comment="порядок отображения в справочнике" as="num_row" key="0" />
        <column table="a" column="prior_v" type="number" title="" comment="приоритет вывода в отчетах" as="prior_v" key="0" />
        <column table="a" column="path_imp" type="string" title="" comment="путь импорта" as="path_imp" key="0" />
        <column table="a" column="path_exp" type="string" title="" comment="путь экспорта" as="path_exp" key="0" />
        <column table="a" column="path_err" type="string" title="" comment="путь ошибок" as="path_err" key="0" />
        <column table="a" column="pr_ofz" type="number" title="" comment="счет с признаком офз" as="pr_ofz" key="0" />
        <column table="a" column="kod_budg_level" type="number" comment="код уровня бюджета" as="kod_budg_level" reference="ks_budg_level" refcol="kod_budg_level" key="0" />
        <column table="a" column="kod_ubp" type="string" comment="код клиента" as="kod_ubp" key="0" />
        <column table="a" column="name_ubp_pay" type="string" title="" comment="полное наименование плательщика" as="name_ubp_pay" key="0" />
        <column table="a" column="ls_pay" type="string" title="" comment="л/с клиента-плательщика" as="ls_pay" key="0" />
        <column table="a" column="kod_dzo" type="number" comment="код ДЗО" as="kod_dzo" reference="is_org_active" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_bank_p" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer" dname="ks_bank_p" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="ks_bank_p">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ks_tip_schet" as="kod_tip_schet" join="left outer" dname="ks_bank_p">
          <call function="=">
            <column table="a" column="kod_tip_schet" />
            <column table="kod_tip_schet" column="kod_tip_schet" />
          </call>
        </query>
        <query name="k_zbd" as="kod_ist" join="left outer" dname="ks_bank_p">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod" />
          </call>
        </query>
        <query name="ks_budg_level" as="kod_budg_level" join="left outer" dname="ks_bank_p">
          <call function="=">
            <column table="a" column="kod_budg_level" />
            <column table="kod_budg_level" column="kod_budg_level" />
          </call>
        </query>
        <query name="is_org_active" as="kod_dzo" join="left outer" dname="ks_bank_p">
          <call function="=">
            <column table="a" column="kod_dzo" />
            <column table="kod_dzo" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_bd_kl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_bd_kl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_spr_bd" type="number" column-mandatory="1" as="kod_spr_bd" key="1" fixed="1" />
        <column table="a" column="kod_bd" type="string" column-mandatory="1" comment="код бюджетной классификации" as="kod_bd" key="0" />
        <column table="a" column="name" type="string" column-mandatory="1" title="Наименование" comment="расшифровка кода бюдж классификации" as="name" key="0" />
        <column table="a" column="kod_dest" type="number" comment="назначение платежа" as="kod_dest" reference="ks_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_bd_kl" as="a" />
        <query name="ks_dest_opl" as="kod_dest" join="left outer" dname="ks_bd_kl">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_dest_opl" class="1" timestamp="30.05.2018 16:40:18" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_dest_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dest" type="number" column-mandatory="1" as="kod_dest" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="abbr" type="string" title="Номер" as="abbr" key="0" />
        <column table="a" column="sname" type="string" title="Наименование" as="sname" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_dest_opl" as="a" />
        <query name="ks_istfin" as="kod_ist" join="left outer" dname="ks_dest_opl">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_osn_nal" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_osn_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_osn_nal" type="number" column-mandatory="1" as="kod_osn_nal" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование оснований налоговых платежей" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="Дата закрытия строки" as="dat_udal" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_osn_nal" as="a" />
      </from>
    </query>
    <query name="ks_st_org" class="1" timestamp="30.05.2018 17:40:40" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_st_org.xml" haskeys="1">
      <select>
        <column table="a" column="kod_st_org" type="number" column-mandatory="1" as="kod_st_org" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Номер" as="abbr" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="Дата закрытия строки" as="dat_udal" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_st_org" as="a" />
      </from>
    </query>
    <query name="ks_tip_id_fl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_tip_id_fl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tip_id" type="number" column-mandatory="1" comment="Уник.код." as="kod_tip_id" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="Наименование идентификатора" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" comment="Код-номер документа" as="abbr" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кто изменял" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата последнего изменения" as="d_m" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="Дата закрытия" as="dat_udal" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tip_id_fl" as="a" />
      </from>
    </query>
    <query name="ks_tip_schet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_tip_schet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tip_schet" type="number" column-mandatory="1" as="kod_tip_schet" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tip_schet" as="a" />
      </from>
    </query>
    <query name="ks_vidopl" class="1" timestamp="30.05.2018 21:17:24" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_vidopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vidopl" type="number" column-mandatory="1" as="kod_vidopl" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ks_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" column-mandatory="1" as="abbr" key="0" />
        <column table="a" column="sname" type="string" title="" column-mandatory="1" as="sname" key="0" />
        <column table="a" column="name" type="string" title="Наименование" column-mandatory="1" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_tvidopl" type="number" as="kod_tvidopl" key="0" />
        <column table="a" column="kod_spr_doc" type="number" as="kod_spr_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_vidopl" as="a" />
        <query name="ks_vidopl" as="kod_parent" join="left outer" dname="ks_vidopl">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_vidopl" />
          </call>
        </query>
      </from>
    </query>
    <query name="plan_ks_zbd" class="1" timestamp="30.05.2018 20:45:39" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ks_zbd.xml" haskeys="1">
      <select>
        <column table="a" column="platelchik" type="string" title="" as="platelchik" key="1" fixed="1" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="kpp" type="number" title="" as="kpp" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="kodb" type="number" title="" as="kodb" key="0" />
        <column table="a" column="pr_str" type="number" title="" as="pr_str" key="0" />
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="kod_fin" type="number" as="kod_fin" key="0" />
        <column table="a" column="adr" type="string" title="" as="adr" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kod_direct" type="number" comment="принадлежность" as="kod_direct" key="0" />
        <column table="a" column="name_all" type="string" title="" as="name_all" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="plan.ks_zbd" as="a" />
      </from>
    </query>
    <query name="k_shablon_raschet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\k_shablon_raschet.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name_stage" type="string" data-size="50" title="" as="name_stage" key="0" />
        <column table="a" column="day" type="number" title="" as="day" key="0" />
        <column table="a" column="proc" type="number" title="" as="proc" key="0" />
        <column table="a" column="prim" type="string" data-size="250" title="" as="prim" key="0" />
        <column table="a" column="prizn" type="number" title="" comment="1-дни,2-месяцы" as="prizn" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код строки наименования отчета" as="kod_parent" reference="k_shablon_raschet" refcol="kod" key="0" />
        <column table="a" column="kod_vid_ad" type="number" comment="код вида договора" as="kod_vid_ad" key="0" />
        <column table="a" column="pn" type="number" title="" comment="порядковый номер в предалах вида договора" as="pn" key="0" />
        <column table="a" column="from_dat" type="number" title="" comment="1-даты договора,2-даты акта ТП, 3---даты договора по годам?, 4 даты акта рассчетом" as="from_dat" key="0" />
        <column table="a" column="pr_work_days" type="number" title="" as="pr_work_days" key="0" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" key="0" />
        <column table="a" column="fl_ur_lico" type="number" title="" as="fl_ur_lico" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="дата удаления" as="dat_udal" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_shablon_raschet" as="a" />
        <query name="k_shablon_raschet" as="kod_parent" join="left outer" dname="k_shablon_raschet">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="k_user" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\k_user.xml" haskeys="1">
      <select>
        <column table="a" column="puser" type="string" title="" as="puser" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="fam" type="string" title="" as="fam" key="0"></column>
        <column table="a" column="im" type="string" title="" as="im" key="0"></column>
        <column table="a" column="otch" type="string" title="" as="otch" key="0"></column>
        <column table="a" column="telef" type="string" title="" as="telef" key="0"></column>
        <column table="a" column="gru" type="number" title="" as="gru" key="0"></column>
        <column table="a" column="podr" type="number" title="" as="podr" key="0"></column>
        <column table="a" column="menu_tep" type="string" title="" as="menu_tep" key="0"></column>
        <column table="a" column="num_z" type="string" title="" as="num_z" key="0"></column>
        <column table="a" column="roles_tep" type="string" title="" as="roles_tep" key="0"></column>
        <column table="a" column="ldap_path" type="string" title="" comment="путь к пользователю в каталоге active directory" as="ldap_path" key="0"></column>
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_user" as="a"></table>
        <query name="is_rights" as="puser" join="left outer" dname="k_user">
          <call function="=">
            <column table="a" column="puser"></column>
            <column table="puser" column="puser"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="k_vid_real" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\k_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" column-mandatory="1" as="vid_real" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" data-size="30" as="name" key="0" />
        <column table="a" column="not_prn" type="number" title="" comment="НЕ показывать в отчетах" as="not_prn" key="0" />
        <column table="a" column="pr_prior" type="number" title="" comment="Приоритет вывода в отчетах" as="pr_prior" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="abbr" type="string" data-size="10" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_vid_real" as="a" />
      </from>
    </query>
    <query name="k_vid_sf" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\k_vid_sf.xml" haskeys="1">
      <select>
        <column table="a" column="vid_sf" type="number" column-mandatory="1" title="" as="vid_sf" key="1" fixed="1" />
        <column table="a" column="plate" type="number" title="" as="plate" key="0" />
        <column table="a" column="name" type="string" data-size="30" title="Наименование" as="name" key="0" />
        <column table="a" column="name_for_sf" type="string" data-size="30" title="" as="name_for_sf" key="0" />
        <column table="a" column="prim" type="string" data-size="200" title="" as="prim" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_vid_sf" as="a" />
      </from>
    </query>
    <query name="qr_connection_point" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_connection_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_zayav_vo" type="number" as="kod_zayav_vo" reference="c_zayav_virtual" refcol="kod" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="u_c" type="string" data-size="50" title="" as="u_c" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="pointnum" type="number" title="" comment="Номер точки присоединения" as="pointnum" key="0" />
        <column table="a" column="pointname" type="string" data-size="400" title="" comment="Описание  точки присоединения" as="pointname" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="Код уровня напряжения из справочника  " as="voltage" reference="as_voltage" refcol="kn_voltage" key="0" />
        <column table="a" column="declaredpower1" type="number" title="" comment="Заявляемая мощность  в точке присоединения, 1 категория" as="declaredpower1" key="0" />
        <column table="a" column="declaredpower2" type="number" title="" comment="Заявляемая мощность  в точке присоединения, 2 категория" as="declaredpower2" key="0" />
        <column table="a" column="declaredpower3" type="number" title="" comment="Заявляемая мощность  в точке присоединения, 3 категория" as="declaredpower3" key="0" />
        <column table="a" column="existingpower1" type="number" title="" comment=" Существующая мощность  в точке присоединения, 1 категория" as="existingpower1" key="0" />
        <column table="a" column="existingpower2" type="number" title="" comment=" Существующая мощность  в точке присоединения, 2 категория" as="existingpower2" key="0" />
        <column table="a" column="existingpower3" type="number" title="" comment=" Существующая мощность  в точке присоединения, 3 категория" as="existingpower3" key="0" />
        <column table="a" column="kod_spr_tp" type="number" as="kod_spr_tp" reference="is_spr_group_lp" refcol="kod_group_lp" key="0" />
        <column table="a" column="kod_source" type="number" as="kod_source" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_connection_point" as="a" />
        <query name="c_zayav_virtual" as="kod_zayav_vo" join="left outer" dname="qr_connection_point">
          <call function="=">
            <column table="a" column="kod_zayav_vo" />
            <column table="kod_zayav_vo" column="kod" />
          </call>
        </query>
        <query name="as_voltage" as="voltage" join="left outer" dname="qr_connection_point">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="kn_voltage" />
          </call>
        </query>
        <query name="is_spr_group_lp" as="kod_spr_tp" join="left outer" dname="qr_connection_point">
          <call function="=">
            <column table="a" column="kod_spr_tp" />
            <column table="kod_spr_tp" column="kod_group_lp" />
          </call>
        </query>
        <query name="hr_eobject" as="kod_source" join="left outer" dname="qr_connection_point">
          <call function="=">
            <column table="a" column="kod_source" />
            <column table="kod_source" column="eobj_id" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qr_connection_point">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_links" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_links.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_tu" type="number" as="kod_tu" reference="qr_tu" refcol="kod_tu" key="0" />
        <column table="a" column="kod_up" type="number" as="kod_up" reference="qr_up" refcol="kod_up" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" reference="c_doc_zpr" refcol="kod_doc" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_project" type="number" as="kod_project" key="0" />
        <column table="a" column="kod_vizit" type="number" as="kod_vizit" key="0" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" key="0" />
        <column table="a" column="kod_ocenka" type="number" as="kod_ocenka" reference="qr_ocenka" refcol="kod" key="0" />
        <column table="a" column="kod_atp" type="number" as="kod_atp" key="0" />
        <column table="a" column="pred_kod_dog" type="number" as="pred_kod_dog" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="qr_links" refcol="kod" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_links" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_ocenka" as="kod_ocenka" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_ocenka" />
            <column table="kod_ocenka" column="kod" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="qr_tu" as="kod_tu" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_tu" />
            <column table="kod_tu" column="kod_tu" />
          </call>
        </query>
        <query name="qr_up" as="kod_up" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_up" />
            <column table="kod_up" column="kod_up" />
          </call>
        </query>
        <query name="qr_links" as="kod_parent" join="left outer" dname="qr_links">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_list_zpr_abons" class="1" timestamp="22.10.2018 17:29:02" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_list_zpr_abons.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zpr" type="number" as="kod_zpr" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="is_creditors" refcol="e_code" key="0" />
        <column table="a" column="kod_type" type="number" as="kod_type" key="0" />
        <column table="a" column="kod_kontact" type="number" as="kod_kontact" reference="is_kontact" refcol="kod_kontact" key="0" />
        <column table="a" column="pr_main" type="number" title="" as="pr_main" key="0" />
        <column table="kod_zayav_pre" column="kod_zayav" as="kod_zayav" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_list_zpr_abons" as="a">
          <link name="kod_zpr" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_zpr" table="qr_zpr" child="qr_list_zpr_abons" field="kod_zpr" parent="qr_zpr" back="qr_list_zpr_abons">
            <dimlink name="c_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login_by_z" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kodp" table="is_creditors" child="qr_list_zpr_abons" field="kodp" parent="is_creditors" back="qr_list_zpr_abons" title="Контрагенты">
            <dimlink name="is_kontact" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="qr_list_zpr_abons">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav_pre" join="left outer" dname="qr_list_zpr_abons_pre">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zayav_pre" column="kod_zpr" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qr_list_zpr_abons">
          <call function="=">
            <column table="kod_zayav" column="kod_zayav" />
            <column table="this" column="kod_zayav" />
          </call>
        </query>
        <query name="is_creditors" as="kodp" join="left outer" dname="qr_list_zpr_abons" title="Контрагенты">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="e_code" />
          </call>
        </query>
        <query name="is_kontact" as="kod_kontact" join="left outer" dname="qr_list_zpr_abons" title="Контакт">
          <call function="=">
            <column table="a" column="kod_kontact" />
            <column table="kod_kontact" column="kod_kontact" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_numobj_zayav" class="1" timestamp="17.12.2018 18:58:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_numobj_zayav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_numobj" type="number" column-mandatory="1" comment="ID" key="1" as="kod_numobj" />
        <column table="a" column="kod_zpr" type="number" comment="Код паспорта присоединения FK NUM_ZPR_STR, QR_ZPR, KOD_ZPR, KOD_ZPR" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" />
        <column table="a" column="kod_zayav" type="number" comment="Код заявки FK NUM_REG, C_ZAYAV, KOD_ZAYAV, KOD_ZAYAV" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="num_str" type="string" data-size="5" title="" comment="Номер объекта" as="num_str" />
        <column table="a" column="kod_adr" type="number" comment="Код адреса FK KF_ADRESS_O, ASUSE.K_HOUSE, KODD, KOD_ADR" as="kod_adr" reference="k_house" refcol="kodd" />
        <column table="a" column="tip_adr" type="number" title="" comment="Тип адреса (ФК???)" as="tip_adr" />
        <column table="a" column="str_adr" type="string" data-size="2000" title="" comment="Адрес строкой" as="str_adr" />
        <column table="a" column="spec" type="string" data-size="250" title="" comment="Уточнение адреса" as="spec" />
        <column table="a" column="kodnaznhouse" type="number" title="" comment="Код назн. строения FK NAME, HS_NAZNHOUSE_, KODNAZNHOUSE, KODNAZNHOUSE" as="kodnaznhouse" />
        <column table="a" column="kod_schema" type="number" comment="Код ИТП FK NAME, SALES.QR_SCHEMA_, KOD, KOD_SCHEMA" as="kod_schema" />
        <column table="a" column="str_schema" type="string" data-size="2000" title="" comment="Полный путь строкой" as="str_schema" />
        <column table="a" column="qs_so" type="number" title="" comment="Существующая СО" as="qs_so" />
        <column table="a" column="qs_sw" type="number" title="" comment="Существующая СВ" as="qs_sw" />
        <column table="a" column="qs_st" type="number" title="" comment="Существующая СТ" as="qs_st" />
        <column table="a" column="qs_gw" type="number" title="" comment="Существующая ГВС max*" as="qs_gw" />
        <column table="a" column="qs_all" type="number" title="" comment="Существующая Всего max*" as="qs_all" />
        <column table="a" column="qd_so" type="number" title="" comment="Дополнительная СО" as="qd_so" />
        <column table="a" column="qd_sw" type="number" title="" comment="Дополнительная СВ" as="qd_sw" />
        <column table="a" column="qd_st" type="number" title="" comment="Дополнительная СТ" as="qd_st" />
        <column table="a" column="qd_gw" type="number" title="" comment="Дополнительная ГВС max*" as="qd_gw" />
        <column table="a" column="qd_all" type="number" title="" comment="Дополнительная Всего max*" as="qd_all" />
        <column table="a" column="qi_so" type="number" title="" comment="Итого СО" as="qi_so" />
        <column table="a" column="qi_sw" type="number" title="" comment="Итого СВ" as="qi_sw" />
        <column table="a" column="qi_st" type="number" title="" comment="Итого СТ" as="qi_st" />
        <column table="a" column="qi_gw" type="number" title="" comment="Итого ГВС max*" as="qi_gw" />
        <column table="a" column="qi_all" type="number" title="" comment="Итого Всего max*" as="qi_all" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="20" title="" comment="?" as="u_m" />
        <column table="a" column="itp" type="string" data-size="250" title="" comment="ИТП" as="itp" />
        <column table="a" column="qs_sk" type="number" title="" comment="Существующая СК" as="qs_sk" />
        <column table="a" column="qs_tz" type="number" title="" comment="Существующая СВтз" as="qs_tz" />
        <column table="a" column="qs_gwsh" type="number" title="" comment="Существующая ГВС ср.ч/max*" as="qs_gwsh" />
        <column table="a" column="qs_shall" type="number" title="" comment="Существующая Всего ср.ч./max*" as="qs_shall" />
        <column table="a" column="qd_sk" type="number" title="" comment="Дополнительная СК" as="qd_sk" />
        <column table="a" column="qd_tz" type="number" title="" comment="Дополнительная СВтз" as="qd_tz" />
        <column table="a" column="qd_gwsh" type="number" title="" comment="Дополнительная ГВС ср.ч/max*" as="qd_gwsh" />
        <column table="a" column="qd_shall" type="number" title="" comment="Дополнительная Всего ср.ч./max*" as="qd_shall" />
        <column table="a" column="qi_sk" type="number" title="" comment="Итого СК" as="qi_sk" />
        <column table="a" column="qi_tz" type="number" title="" comment="Итого СВтз" as="qi_tz" />
        <column table="a" column="qi_gwsh" type="number" title="" comment="Итого ГВС ср.ч/max*" as="qi_gwsh" />
        <column table="a" column="qi_shall" type="number" title="" comment="Итого Всего ср.ч./max*" as="qi_shall" />
        <column table="a" column="kod_zayav_virtual" type="number" comment="Код заявки C_ZAYAV_VIRTUAL.KOD" as="kod_zayav_virtual" reference="c_zayav_virtual" refcol="kod" />
        <column table="a" column="str_adr_custom" type="string" data-size="2500" title="" comment="Ручной вод адреса" as="str_adr_custom" />
        <column table="a" column="kad_num" type="string" data-size="1500" title="" comment="Кадастровый номер" as="kad_num" />
        <column table="a" column="kod_ist" type="number" comment="Источник питания" as="kod_ist" />
        <column table="a" column="name_ist" type="string" data-size="250" title="" as="name_ist" />
        <column table="a" column="kod_point" type="number" comment="Точка присоединения" as="kod_point" reference="is_spr_group_lp" refcol="kod_group_lp" />
        <column table="a" column="num_stage" type="number" title="" as="num_stage" />
        <column table="a" column="num_stack" type="number" title="" as="num_stack" />
        <column table="a" column="spec_object" type="string" data-size="1500" title="" as="spec_object" />
        <column table="a" column="usl_num" type="string" data-size="250" title="" as="usl_num" />
        <column table="a" column="enter_epu" type="string" data-size="250" title="" as="enter_epu" />
        <column table="a" column="load_s_g" type="number" title="" comment="Мощность сущ. генератора - кВт" as="load_s_g" />
        <column table="a" column="load_n_g" type="number" title="" comment="Мощность нов. генератора - кВт" as="load_n_g" />
        <column table="a" column="load_speed_up" type="number" title="" comment="Скорость набора нагрузки - кВт/сек" as="load_speed_up" />
        <column table="a" column="load_teh_min" type="number" title="" comment="Технологический минимум - кВт" as="load_teh_min" />
        <column table="a" column="load_d_speed" type="number" title="" comment="Заявляемая скорость сброса/набора нагрузки не менее - МВт/мин" as="load_d_speed" />
        <column table="a" column="load_min_pred" type="number" title="" comment="Заявляемый нижний предел регулировочного диапазона - %" as="load_min_pred" />
        <column table="a" column="qc_k1" type="number" title="" as="qc_k1" />
        <column table="a" column="qc_k2" type="number" title="" as="qc_k2" />
        <column table="a" column="qc_k3" type="number" title="" as="qc_k3" />
        <column table="a" column="kod_request" type="number" comment="AR_REQUEST" as="kod_request" reference="ar_request" refcol="kod_request" />
        <column table="a" column="kod_obj_ise" type="number" comment="KR_OBJECT" as="kod_obj_ise" reference="kr_object" refcol="kod_obj" />
        <column table="a" column="qk1_pred" type="number" title="" as="qk1_pred" />
        <column table="a" column="qk2_pred" type="number" title="" as="qk2_pred" />
        <column table="a" column="qk3_pred" type="number" title="" as="qk3_pred" />
        <column table="a" column="pr_c_so" type="number" title="" as="pr_c_so" />
        <column table="a" column="pr_c_sw" type="number" title="" as="pr_c_sw" />
        <column table="a" column="pr_c_sk" type="number" title="" as="pr_c_sk" />
        <column table="a" column="pr_check_gis" type="number" title="" as="pr_check_gis" />
        <column table="a" column="str_point_connect" type="string" data-size="1500" title="" as="str_point_connect" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" reference="as_voltage" refcol="kn_voltage" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_numobj_zayav" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_zayav_virtual" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_zayav_virtual" />
            <column table="kod_zayav_virtual" column="kod" />
          </call>
        </query>
        <query name="is_spr_group_lp" as="kod_point" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_group_lp" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj_ise" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_obj_ise" />
            <column table="kod_obj_ise" column="kod_obj" />
          </call>
        </query>
        <query name="k_house" as="kod_adr" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_adr" />
            <column table="kod_adr" column="kodd" />
          </call>
        </query>
        <query name="as_voltage" as="kn_voltage" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kn_voltage" />
            <column table="kn_voltage" column="kn_voltage" />
          </call>
        </query>
        <query name="ar_request" as="kod_request" join="left outer" dname="qr_numobj_zayav">
          <call function="=">
            <column table="a" column="kod_request" />
            <column table="kod_request" column="kod_request" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_ocenka" class="1" timestamp="25.06.2019 13:15:43" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_ocenka.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" comment="C_DOC_ZPR" as="kod_doc" reference="c_doc_zpr" refcol="kod_doc" key="0" />
        <column table="a" column="pr_last_mile" type="number" title="" comment="Последняя миля (Да/Нет/Пусто)" as="pr_last_mile" key="0" />
        <column table="a" column="num_order" type="string" data-size="250" title="" comment="№ приказа/распоряжения" as="num_order" key="0" />
        <column table="a" column="date_order" type="date" title="" comment="Дата приказа/распоряжения" as="date_order" key="0" />
        <column table="a" column="pr_work_tz" type="number" title="" comment="Работы ЛЭ" as="pr_work_tz" key="0" />
        <column table="a" column="kod_type_tarif" type="number" comment="Тип тарифа" as="kod_type_tarif" reference="qs_type_tarif" refcol="kod" key="0" />
        <column table="a" column="sum_ocenka_all" type="number" title="" comment="Сумма оценки" as="sum_ocenka_all" key="0" />
        <column table="a" column="sum_ad_lgot_ind" type="number" title="" comment="Сумма АД (Льгот./Индивид.)" as="sum_ad_lgot_ind" key="0" />
        <column table="a" column="sum_ad_stav_cher" type="number" title="" comment="Сумма АД (Ставка/Счет)" as="sum_ad_stav_cher" key="0" />
        <column table="a" column="sum_ad_kwt" type="number" title="" comment="Сумма АД (кВт)" as="sum_ad_kwt" key="0" />
        <column table="a" column="sum_saldo_lgot_ind" type="number" title="" comment="Сальдо (Льгот./Индивид.)" as="sum_saldo_lgot_ind" key="0" />
        <column table="a" column="sum_saldo_stav_cher" type="number" title="" comment="Сальдо (Ставка/Счет)" as="sum_saldo_stav_cher" key="0" />
        <column table="a" column="sum_saldo_kwt" type="number" title="" comment="Сальдо (кВт)" as="sum_saldo_kwt" key="0" />
        <column table="a" column="kwt_without_nds" type="number" title="" comment="Ставка за кВт без НДС" as="kwt_without_nds" key="0" />
        <column table="a" column="kod_ind_tarif" type="number" comment="Признак инд. тарифа" as="kod_ind_tarif" reference="qs_type_tarif_ind" refcol="kod" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="sum_ad_itog" type="number" title="" as="sum_ad_itog" key="0" />
        <column table="a" column="sum_rs_new" type="number" title="" comment="Сумма по распред. сети - Новое строительство" as="sum_rs_new" key="0" />
        <column table="a" column="sum_rs_rek" type="number" title="" comment="Сумма по распред. сети - Реконструкция" as="sum_rs_rek" key="0" />
        <column table="a" column="sum_ip_new" type="number" title="" comment="Сумма по источнику питания - Новое строительство" as="sum_ip_new" key="0" />
        <column table="a" column="sum_ip_rek" type="number" title="" comment="Сумма по источнику питания - Реконструкция" as="sum_ip_rek" key="0" />
        <column table="a" column="stand_tarif" type="number" comment="Тариф по стандартизованной ставке" as="stand_tarif" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_ocenka" as="a" />
        <query name="qs_type_tarif_ind" as="kod_ind_tarif" join="left outer" dname="qr_ocenka">
          <call function="=">
            <column table="a" column="kod_ind_tarif" />
            <column table="kod_ind_tarif" column="kod" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc" join="left outer" dname="qr_ocenka">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="qs_type_tarif" as="kod_type_tarif" join="left outer" dname="qr_ocenka">
          <call function="=">
            <column table="a" column="kod_type_tarif" />
            <column table="kod_type_tarif" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_place_dog" class="1" timestamp="28.11.2018 17:48:33" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_place_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="name" type="string" data-size="150" title="Наименование" as="name" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_place_dog" as="a" />
      </from>
    </query>
    <query name="qr_spr_character_load" class="1" timestamp="12.12.2018 16:22:23" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_spr_character_load.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" />
        <column table="a" column="d_c" type="date" title="" as="d_c" />
        <column table="a" column="u_c" type="string" data-size="20" title="" as="u_c" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_spr_character_load" as="a" />
      </from>
    </query>
    <query name="qr_state_shabl" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_state_shabl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_state" type="number" column-mandatory="1" as="kod_state" key="1" fixed="1" />
        <column table="a" column="kod_spr_stage" type="number" column-mandatory="1" comment="Код этапа заявки" as="kod_spr_stage" reference="cspr_stage_zayav" refcol="kod_spr_stage" key="0" />
        <column table="a" column="name" type="string" data-size="500" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="pr_control" type="number" title="" comment="Состояние заявки для контрольного статуса" as="pr_control" key="0" />
        <column table="a" column="pr_dt" type="number" title="" comment="Состояние заявки для ДепТЭХа" as="pr_dt" key="0" />
        <column table="a" column="pr_web" type="number" title="" comment="Состояние заявки для портала" as="pr_web" key="0" />
        <column table="a" column="pr_moek" type="number" title="" comment="Состояние заявки для Руководства" as="pr_moek" key="0" />
        <column table="a" column="dat_beg" type="date" title="" comment="Дата начала действия состояния" as="dat_beg" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="Дата окончания действия состояния" as="dat_end" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="pr_hand_enter" type="number" title="" comment="Признак ручного ввода" as="pr_hand_enter" key="0" />
        <column table="a" column="prim" type="string" data-size="1000" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="pn" type="string" data-size="100" title="" comment="Порядковый номер" as="pn" key="0" />
        <column table="a" column="pr_end" type="number" title="" comment="Признак окончания работы с заявкой" as="pr_end" key="0" />
        <column table="a" column="name_dt" type="string" data-size="500" title="" comment="Наимен-е состояния заявки для ДепТЭХа" as="name_dt" key="0" />
        <column table="a" column="name_web" type="string" data-size="500" title="" comment="Наимен-е состояния заявки для портала" as="name_web" key="0" />
        <column table="a" column="pr_child_viza" type="number" title="" comment="Признак состояния, созданного по дочерней строке в согласовании" as="pr_child_viza" key="0" />
        <column table="a" column="prioritet" type="number" title="" comment="Приоритет состояний заявки" as="prioritet" key="0" />
        <column table="a" column="pref" type="string" data-size="10" column-mandatory="1" title="" comment="Префикс (+ kod_state) - уникальный ключ" as="pref" key="0" />
        <column table="a" column="kod_spr_rosseti" type="number" comment="код по справочнику Россетей &quot;Статусы&quot;" as="kod_spr_rosseti" key="0" />
        <column table="a" column="name_spr_rosseti" type="string" data-size="250" title="" comment="наименование по справочнику Россетей &quot;Статусы&quot;" as="name_spr_rosseti" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_state_shabl" as="a" />
        <query name="cspr_stage_zayav" as="kod_spr_stage" join="left outer" dname="qr_state_shabl" title="Тип заявки">
          <call function="=">
            <column table="a" column="kod_spr_stage" />
            <column table="kod_spr_stage" column="kod_spr_stage" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_stroy_obj" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_stroy_obj.xml" haskeys="1">
      <select>
        <call function="rowid" as="qr_stroy_obj_id" key="1" />
        <column table="a" column="kod_stroy_obj" type="number" column-mandatory="1" comment="ID" as="kod_stroy_obj" />
        <column table="a" column="u_m" type="string" title="" comment="?" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" />
        <column table="a" column="name" type="string" column-mandatory="1" title="Наименование" comment="наименование объекта строительства" as="name" />
        <column table="a" column="period_s" type="number" title="" comment="период работ (год) с" as="period_s" />
        <column table="a" column="period_po" type="number" title="" comment="период работ (год) по" as="period_po" />
        <column table="a" column="kod_emp" type="number" comment="НЕ ИСПОЛЬЗУЕТСЯ" as="kod_emp" />
        <column table="a" column="kod_tip_rab" type="number" comment="тип работ FK NAME2, SALES.QS_TIP_RAB, KOD_TIP_RAB, KOD_TIP_RAB" as="kod_tip_rab" />
        <column table="a" column="kod_status_rab" type="number" comment="статус работ FK NAME, SALES.K_STATUS, STATUS, KOD_STATUS_RAB" as="kod_status_rab" />
        <column table="a" column="mesto_obj" type="string" title="" comment="место расположения" as="mesto_obj" />
        <column table="a" column="gr_obj" type="string" title="" comment="граница проектирования" as="gr_obj" />
        <column table="a" column="kodp" type="number" title="" comment="заявитель заявки на вкл. в ИП FK NAME, ASUSE.KR_ORG, KODP, KODP" as="kodp" />
        <column table="a" column="kod_status_pir" type="number" comment="Статус ПИР FK NAME, SALES.K_STATUS, STATUS, KOD_STATUS_PIR" as="kod_status_pir" />
        <column table="a" column="kod_status_smr" type="number" comment="Статус СМР FK NAME, SALES.K_STATUS, STATUS, KOD_STATUS_SMR" as="kod_status_smr" />
        <column table="a" column="period_s_smr" type="number" title="" comment="Год начала работ СМР" as="period_s_smr" />
        <column table="a" column="period_po_smr" type="number" title="" comment="Год окончания работ СМР" as="period_po_smr" />
        <column table="a" column="kodinvpr" type="number" title="" comment="код ИП (формируется в тригере по наименованию ИП)" as="kodinvpr" />
        <column table="a" column="comments" type="string" title="" comment="Комментарии" as="comments" />
        <column table="a" column="pir_num_zakup" type="string" title="" comment="Номер закупки ПИР" as="pir_num_zakup" />
        <column table="a" column="pir_kod_sp_zak" type="number" comment="Способ закупки ПИР FK NAME, Z_SPR_SPOSOB_ZAK, KOD_SPR_SPOSOB_ZAK, PIR_KOD_SP_ZAK" as="pir_kod_sp_zak" />
        <column table="a" column="pir_pr_compet_docs" type="number" title="" comment="ПИР Документы для конкурса подготовлены, 1-Да, 0-Нет" as="pir_pr_compet_docs" />
        <column table="a" column="pir_date_compet" type="date" title="" comment="Дата проведения конкурса ПИР" as="pir_date_compet" />
        <column table="a" column="pir_res_compet" type="number" title="" comment="Результат конкурса ПИР (qg_ip_stroy_obj_read.p_select_result) LV 0-Нет данных, 1-Состоялся, 2-Не состоялся, Неясно" as="pir_res_compet" />
        <column table="a" column="pir_num_protokol" type="string" title="" comment="№ протокола ПИР" as="pir_num_protokol" />
        <column table="a" column="smr_num_zakup" type="string" title="" comment="Номер закупки СМР" as="smr_num_zakup" />
        <column table="a" column="smr_kod_sp_zak" type="number" comment="Способ закупки СМР FK NAME, Z_SPR_SPOSOB_ZAK, KOD_SPR_SPOSOB_ZAK, SMR_KOD_SP_ZAK" as="smr_kod_sp_zak" />
        <column table="a" column="smr_pr_compet_docs" type="number" title="" comment="СМР Документы для конкурса подготовлены LV 1-Да, 0-Нет, Неясно" as="smr_pr_compet_docs" />
        <column table="a" column="smr_date_compet" type="date" title="" comment="Дата проведения конкурса СМР" as="smr_date_compet" />
        <column table="a" column="smr_res_compet" type="number" title="" comment="Результат конкурса СМР LV 0-Нет данных, 1-Состоялся, 2-Не состоялся, Неясно" as="smr_res_compet" />
        <column table="a" column="smr_num_protokol" type="string" title="" comment="№ протокола СМР" as="smr_num_protokol" />
        <column table="a" column="kod_dog" type="number" comment="код договора подключения на основании которого сформирован титул ИП FK NUM_DOG, C_DOGOVOR, KOD_DOG, KOD_DOG" as="kod_dog" />
        <column table="a" column="pir_winner" type="string" title="" comment="Победитель конкурса ПИР" as="pir_winner" />
        <column table="a" column="pir_filename" type="string" title="" comment="Путь и имя файла (конкурс ПИР)" as="pir_filename" />
        <column table="a" column="pir_filedata" type="blob" title="" comment="Сохраненный в БД файл (конкурс ПИР)" as="pir_filedata" />
        <column table="a" column="pir_ext" type="string" title="" comment="Расширение файла (конкурс ПИР)" as="pir_ext" />
        <column table="a" column="smr_winner" type="string" title="" comment="Победитель конкурса СМР" as="smr_winner" />
        <column table="a" column="smr_filename" type="string" title="" comment="Путь и имя файла (конкурс СМР)" as="smr_filename" />
        <column table="a" column="smr_filedata" type="blob" title="" comment="Сохраненный в БД файл (конкурс СМР)" as="smr_filedata" />
        <column table="a" column="smr_ext" type="string" title="" comment="Расширение файла (конкурс СМР)" as="smr_ext" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_stroy_obj" as="a" />
      </from>
    </query>
    <query name="qr_tu" class="1" timestamp="17.12.2018 18:46:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_tu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tu" type="number" column-mandatory="1" comment="Код ТУ" key="1" as="kod_tu" />
        <column table="a" column="kod_zpr" type="number" column-mandatory="1" comment="Код паспорта присоединения FK NUM_ZPR_STR, QR_ZPR, KOD_ZPR, KOD_ZPR" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" />
        <column table="a" column="u_m" type="string" data-size="20" title="" comment="?Кем изменено" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="?Когда изменено" as="d_m" />
        <column table="a" column="num_tu" type="string" data-size="50" title="" comment="Номер ТУ" as="num_tu" />
        <column table="a" column="dat_tu" type="date" title="" comment="Дата ТУ" as="dat_tu" />
        <column table="a" column="srok_tu" type="date" title="" comment="Срок действия ТУ" as="srok_tu" />
        <column table="a" column="kod_parent_tu" type="number" comment="?НЕ ИСПОЛЬЗУЕТСЯ (QR_RELATED_DOCS) Код родит. ТУ" as="kod_parent_tu" reference="qr_tu" refcol="kod_tu" />
        <column table="a" column="kod_tarif" type="number" comment="?НЕ ИСПОЛЬЗУЕТСЯ" as="kod_tarif" />
        <column table="a" column="sum_vsego" type="number" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ" as="sum_vsego" />
        <column table="a" column="sum_nds" type="number" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ" as="sum_nds" />
        <column table="a" column="proc_nds" type="number" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ" as="proc_nds" />
        <column table="a" column="prim" type="string" data-size="1000" title="" comment="Примечание" as="prim" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="" comment="Признак активности, активно = 0, неактивно = 1 FK ABBR, ASUSE.KK_ACTIVE, PR_ACTIVE, PR_ACTIVE" as="pr_active" />
        <column table="a" column="kod_zayav" type="number" comment="Код заявки FK NUM_REG, C_ZAYAV, KOD_ZAYAV, KOD_ZAYAV" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="kod_doc" type="number" comment="Код документа FK NUM_DOC, C_DOC_ZPR, KOD_DOC, KOD_DOC" as="kod_doc" />
        <column table="a" column="srok_obj_s" type="date" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ срок подключения объекта с.." as="srok_obj_s" />
        <column table="a" column="srok_obj_po" type="date" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ срок подключения объекта по..." as="srok_obj_po" />
        <column table="a" column="tech_capability" type="number" title="" comment="Техническая возможность LV &gt;0-'Да',=0-'Нет','Не определено'" as="tech_capability" />
        <column table="a" column="str_num_parent_tu" type="string" data-size="250" title="" comment="?НЕ ИСПОЛЬЗУЕТСЯ (QR_RELATED_DOCS) Номер родительского УП, если ввели вручную" as="str_num_parent_tu" />
        <column table="a" column="type_mod_load" type="number" title="" comment="Тип корректировки нагрузки LV &gt;0-'Увеличение',=0-'Без изменений',&lt;0-'Уменьшение' ,'неизвестно'" as="type_mod_load" />
        <column table="a" column="kod_har_pris" type="number" comment="Код характеристики присоединения FK NAME, QS_PRIS_HAR, KOD, KOD_HAR_PRIS" as="kod_har_pris" />
        <column table="a" column="point_pris" type="string" data-size="2000" title="" comment="Точка присоединения (камера, ТП)" as="point_pris" />
        <column table="a" column="point_incut" type="string" data-size="2000" title="" comment="Точка подключения (врезки)" as="point_incut" />
        <column table="a" column="srok_tu_new" type="date" title="" comment="Продление" as="srok_tu_new" />
        <column table="a" column="kod_gis" type="string" data-size="30" comment="Код объекта в системе ГИС МОЭК" as="kod_gis" />
        <column table="a" column="pr_num_new" type="number" title="" comment="Признак, что номер создан по новой струтуре (Москва)" as="pr_num_new" />
        <column table="a" column="kod_gis_border" type="string" data-size="30" comment="Код границы в ГИС, к которой привязаны ТУ" as="kod_gis_border" />
        <column table="a" column="not_balans" type="number" title="" comment="Признак того, нагрузка данного ТУ не попадает в баланс" as="not_balans" />
        <column table="a" column="osn_not_balans" type="string" data-size="1000" title="" comment="Обоснование того, что нагрузка данного ТУ не попадает в баланс" as="osn_not_balans" />
        <column table="a" column="point_pris_2" type="string" data-size="500" title="" as="point_pris_2" />
        <column table="a" column="point_pris_3" type="string" data-size="500" title="" as="point_pris_3" />
        <column table="a" column="point_incut_2" type="string" data-size="500" title="" as="point_incut_2" />
        <column table="a" column="point_incut_3" type="string" data-size="500" title="" as="point_incut_3" />
        <column table="a" column="date_sogl_me" type="date" title="" comment="Дата согласования МЭ" as="date_sogl_me" />
        <column table="a" column="count_year_srok" type="number" title="" comment="Срок лет" as="count_year_srok" reference="is_spr_doc" refcol="kod_spr_doc" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_tu" as="a" />
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="qr_tu" as="kod_parent_tu" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="kod_parent_tu" />
            <column table="kod_parent_tu" column="kod_tu" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="is_spr_doc" as="count_year_srok" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="count_year_srok" />
            <column table="count_year_srok" column="kod_spr_doc" />
          </call>
        </query>
        <query name="qr_tu_energo" as="qr_tu_energo" join="left outer" dname="qr_tu">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="qr_tu_energo" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_tu_energo" class="1" timestamp="05.10.2020 16:37:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_tu_energo.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" comment="KOD_DOC" as="kod_doc" reference="c_doc_zpr" refcol="kod_doc" />
        <column table="a" column="name_ist_1" type="string" data-size="250" title="" as="name_ist_1" />
        <column table="a" column="kod_ist_1" type="number" comment="Код источника 1" as="kod_ist_1" />
        <column table="a" column="fider_1" type="string" data-size="250" title="" comment="Фидер 1" as="fider_1" />
        <column table="a" column="pr_spr_hand_1" type="number" title="" comment="Спр/руч. РТП 1" as="pr_spr_hand_1" />
        <column table="a" column="kod_en_obj_1" type="number" comment="Код РТП 1" as="kod_en_obj_1" />
        <column table="a" column="name_en_obj_1" type="string" data-size="250" title="" comment="Наименвоание РТП 1" as="name_en_obj_1" />
        <column table="a" column="kod_tp_1" type="number" comment="Код точки подключ 1" as="kod_tp_1" reference="is_spr_group_lp" refcol="kod_group_lp" />
        <column table="a" column="name_tp_1" type="string" data-size="500" title="" comment="Уточнение точки подкл 1" as="name_tp_1" />
        <column table="a" column="kod_voltage_1" type="number" comment="Уровень напряжения 1" as="kod_voltage_1" />
        <column table="a" column="name_ist_2" type="string" data-size="250" title="" as="name_ist_2" />
        <column table="a" column="kod_ist_2" type="number" comment="Код источника 2" as="kod_ist_2" />
        <column table="a" column="fider_2" type="string" data-size="250" title="" comment="Фидер 2" as="fider_2" />
        <column table="a" column="pr_spr_hand_2" type="number" title="" comment="Спр/руч. РТП 2" as="pr_spr_hand_2" />
        <column table="a" column="kod_en_obj_2" type="number" comment="Код РТП 2" as="kod_en_obj_2" />
        <column table="a" column="name_en_obj_2" type="string" data-size="250" title="" comment="Наименвоание РТП 2" as="name_en_obj_2" />
        <column table="a" column="kod_tp_2" type="number" comment="Код точки подключ 2" as="kod_tp_2" reference="is_spr_group_lp" refcol="kod_group_lp" />
        <column table="a" column="name_tp_2" type="string" data-size="500" title="" comment="Уточнение точки подкл 2" as="name_tp_2" />
        <column table="a" column="kod_voltage_2" type="number" comment="Уровень напряжения 2" as="kod_voltage_2" />
        <column table="a" column="work_esk_ip" type="number" title="" comment="Работы ЭСК ИП" as="work_esk_ip" />
        <column table="a" column="work_esk_rs" type="number" title="" comment="Работы ЭСК РС" as="work_esk_rs" />
        <column table="a" column="work_esk_pu" type="number" title="" comment="Работы ЭСК ПУ" as="work_esk_pu" />
        <column table="a" column="work_abon_ip" type="number" title="" comment="Работы Контрагента ИП" as="work_abon_ip" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" />
        <column table="a" column="kod_har" type="number" comment="Характеристика" as="kod_har" />
        <column table="a" column="kod_doc_old" type="number" comment="Ранее выданные документ" as="kod_doc_old" reference="c_doc_zpr" refcol="kod_doc" />
        <column table="a" column="length_le" type="number" title="" comment="расстояния до сетей ЛЭ" as="length_le" />
        <column table="a" column="pr_without_work" type="number" title="" comment="Без работ" as="pr_without_work" />
        <column table="a" column="pr_oposr_net" type="number" title="" comment="Признак опосредованного присоединения" as="pr_oposr_net" />
        <column table="a" column="pr_rtn" type="number" title="" as="pr_rtn" />
        <column table="a" column="pr_nw_more" type="number" title="" comment="По сети 35-110 кВ и выше" as="pr_nw_more" />
        <column table="a" column="pr_nw_less" type="number" title="" comment="По распред. сети ниже 35 кВ" as="pr_nw_less" />
        <column table="a" column="pr_nw_more_end" type="number" title="" comment="Вып. работы по сети 35-110 кВ и выше" as="pr_nw_more_end" />
        <column table="a" column="pr_nw_less_end" type="number" title="" comment="Вып. работы по распред. сети ниже 35 кВ" as="pr_nw_less_end" />
        <column table="a" column="pr_zayav_work_end" type="number" title="" comment="Вып. работы заявителем" as="pr_zayav_work_end" />
        <column table="a" column="str_org_oposred" type="string" data-size="2500" title="" as="str_org_oposred" />
        <column table="a" column="pr_gp_pu" type="number" title="" as="pr_gp_pu" />
        <column table="a" column="pr_gp_pu_end" type="number" title="" as="pr_gp_pu_end" />
        <column table="a" column="work_esk_pu_end" type="number" title="" as="work_esk_pu_end" />
        <column table="a" column="work_abon_pu" type="number" title="" as="work_abon_pu" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qr_tu_energo" as="a" />
        <query name="c_doc_zpr" as="kod_doc" join="left outer" dname="qr_tu_energo">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc_old" join="left outer" dname="qr_tu_energo">
          <call function="=">
            <column table="a" column="kod_doc_old" />
            <column table="kod_doc_old" column="kod_doc" />
          </call>
        </query>
        <query name="is_spr_group_lp" as="kod_tp_1" join="left outer" dname="qr_tu_energo">
          <call function="=">
            <column table="a" column="kod_tp_1" />
            <column table="kod_tp_1" column="kod_group_lp" />
          </call>
        </query>
        <query name="is_spr_group_lp" as="kod_tp_2" join="left outer" dname="qr_tu_energo">
          <call function="=">
            <column table="a" column="kod_tp_2" />
            <column table="kod_tp_2" column="kod_group_lp" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_zpr" class="1" timestamp="22.10.2018 16:48:26" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_zpr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zpr" type="number" column-mandatory="1" comment="Код паспорта присоединения" as="kod_zpr" key="1" fixed="1" />
        <column table="a" column="dat_zpr" type="date" column-mandatory="1" title="" comment="дата создания паспорта" as="dat_zpr" key="0" />
        <column table="a" column="num_zpr" type="number" column-mandatory="1" title="" comment="входящий (порядковый) номер" as="num_zpr" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="заказчик FK NAME, ASUSE.KR_PAYER, KODP, KODP" as="kodp" key="0" />
        <column table="a" column="kodp_zastr" type="number" title="" comment="застройщик FK NAME, ASUSE.KR_PAYER, KODP, KODP_ZASTR" as="kodp_zastr" key="0" />
        <column table="a" column="obj" type="string" title="" comment="Наименование объекта" as="obj" key="0" />
        <column table="a" column="kod_har" type="number" comment="характеристика присоединения FK NAME, QS_PRIS_HAR, KOD, KOD_HAR" as="kod_har" key="0" />
        <column table="a" column="kod_uv" type="number" comment="узел ввода FK NAME, QS_PRIS_UV, KOD, KOD_UV" as="kod_uv" key="0" />
        <column table="a" column="kod_schema" type="number" comment="указатель на параметры присоединения к структуре ТС FK NAME, ASUSE.QR_SCHEMA, KOD, KOD_SCHEMA" as="kod_schema" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="?" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="?" as="u_m" key="0" />
        <column table="a" column="num_zpr_str" type="string" title="" comment="№ паспорта с учетом года и пп" as="num_zpr_str" key="0" />
        <column table="a" column="t_pris" type="string" title="" comment="точка присоединения" as="t_pris" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="дата закрытия паспорта" as="dat_end" key="0" />
        <column table="a" column="str_adr" type="string" title="" comment="адрес строкой" as="str_adr" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код бывшего владельца" as="kod_parent" reference="qr_zpr" refcol="kod_zpr" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="dat_anul" type="date" title="" comment="дата анулирования паспорта" as="dat_anul" key="0" />
        <column table="a" column="kod_not_ts" type="number" comment="несоотвествие структуре ТС" as="kod_not_ts" key="0" />
        <column table="a" column="tip_pasp" type="number" column-mandatory="1" title="" comment="тип паспорта 0,1 FK NAME, QS_PASSP_TYPE, KOD, TIP_PASP" as="tip_pasp" reference="qs_passp_type" refcol="kod" key="0" />
        <column table="a" column="kod_schema_old" type="number" comment="?" as="kod_schema_old" key="0" />
        <column table="a" column="kod_not_ts_old" type="number" comment="?" as="kod_not_ts_old" key="0" />
        <column table="a" column="kodp_3" type="number" title="" comment="FK NAME, ASUSE.KR_PAYER, KODP, KODP_3" as="kodp_3" key="0" />
        <column table="a" column="kod_vol" type="number" comment="уровень напряжения FK ABBR, C_SPR_VOL, KOD_VOL, KOD_VOL" as="kod_vol" key="0" />
        <column table="a" column="status" type="number" title="" comment="Статус" as="status" key="0" />
        <column table="a" column="kod_spr_reason" type="number" comment="причина отказа в присоединении ( перенесено из QR_PRIS)" as="kod_spr_reason" key="0" />
        <column table="a" column="kod_dog_ts" type="number" comment="?Код договора на т\снб   -- аттавизм" as="kod_dog_ts" key="0" />
        <column table="a" column="tip_zpr" type="number" column-mandatory="1" title="" comment="Тип присоединения LV 1 - присоединение, 2-УУТС, неизвестно" as="tip_zpr" key="0" />
        <column table="a" column="dat_tgk_ts" type="date" title="" comment="Дата замены ТГК на ТС" as="dat_tgk_ts" key="0" />
        <column table="a" column="kodp_s" type="string" title="" comment="заказчик  код   СТРОКА (вместо KODP)" as="kodp_s" key="0" />
        <column table="a" column="kodp_zastr_s" type="string" title="" comment="застройщик  (вместо KODP_ZASTR)" as="kodp_zastr_s" key="0" />
        <column table="a" column="kodp_3s" type="string" title="" comment="?&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;" as="kodp_3s" key="0" />
        <column table="a" column="kod_reg" type="number" comment="код филиала  МОЭК FK NAME, ASUSE.KR_ORG, KODP, KOD_REG" as="kod_reg" key="0" />
        <column table="a" column="kod_ist" type="number" comment="код источника МОЭК(QR_IST_MOEK-view from ASUSE.QR_SCHEMA) FK NAME, ASUSE.QR_SCHEMA, KOD, KOD_IST" as="kod_ist" key="0" />
        <column table="a" column="kod_gis" type="string" comment="код объекта в системе ГИС МОЭК" as="kod_gis" key="0" />
        <column table="a" column="have_up" type="number" title="" comment="признак наличия УП LV 0 - нет, 1 - есть, неизвестно" as="have_up" key="0" />
        <column table="a" column="pr_gorzak" type="number" title="" comment="признак Горзаказа LV 0 - договор , 1 - горзаказ, неизвестно" as="pr_gorzak" key="0" />
        <column table="a" column="kodp_district" type="number" title="" comment="код района FK NAME, ASUSE.KR_ORG, KODP, KODP_DISTRICT" as="kodp_district" key="0" />
        <column table="a" column="kod_branch" type="number" comment="код филиала 2  МОЭК FK NAME, ASUSE.KR_ORG, KODP, KOD_BRANCH" as="kod_branch" key="0" />
        <column table="a" column="incut_point" type="string" title="" comment="точка врезки МОЭК" as="incut_point" key="0" />
        <column table="a" column="pr_expres" type="number" title="" comment="заявка создана в режиме экспресс" as="pr_expres" key="0" />
        <column table="a" column="main" type="string" title="" comment="магистраль" as="main" key="0" />
        <column table="a" column="reliability_category" type="string" title="" comment="категоря надежности" as="reliability_category" key="0" />
        <column table="a" column="has_client_works" type="number" title="" comment="наличие работ заявителя" as="has_client_works" key="0" />
        <column table="a" column="has_es_works" type="number" title="" comment="наличие работ ЭС" as="has_es_works" key="0" />
        <column table="a" column="kod_stroy_obj" type="number" comment="код строительного объекта FK NAME, QR_STROY_OBJ, KOD_STROY_OBJ, KOD_STROY_OBJ" as="kod_stroy_obj" reference="qr_stroy_obj" refcol="kod_stroy_obj" key="0" />
        <column table="a" column="kod_parent_pril" type="number" comment="родитель дочернего паспорта" as="kod_parent_pril" reference="qr_zpr" refcol="kod_zpr" key="0" />
        <column table="a" column="obosn_num" type="string" title="" comment="номер сл. записки основание для отсутствия ТЗ" as="obosn_num" key="0" />
        <column table="a" column="obosn_dat" type="date" title="" comment="дата сл. записки основание для отсутствия ТЗ" as="obosn_dat" key="0" />
        <column table="a" column="obosn_text" type="string" title="" comment="текст основание для отсутствия ТЗ" as="obosn_text" key="0" />
        <column table="a" column="kod_group_obj" type="number" comment="Код группы объектов FK NAME, QR_LIST_GROUP_OBJ, KOD_STROY_OBJ, KOD_GROUP_OBJ" as="kod_group_obj" key="0" />
        <column table="a" column="pr_zpr_status" type="number" title="" comment="Статус паспорта 1-по умолчанию LV 1-Действующий, Не действующий" as="pr_zpr_status" key="0" />
        <column table="a" column="kod_naznhouse" type="number" comment="назначение объекта (потребительская группа) FK NAME, HS_NAZNHOUSE_, KODNAZNHOUSE, KOD_NAZNHOUSE" as="kod_naznhouse" key="0" />
        <column table="a" column="pr_import" type="number" title="" comment="Признак, что паспорт создан по импорту" as="pr_import" key="0" />
        <column table="a" column="kod_okrug" type="number" comment="Код округа" as="kod_okrug" key="0" />
        <column table="a" column="kod_filial_new" type="number" comment="Код филиала &quot;По новой структуре&quot;" as="kod_filial_new" key="0" />
        <column table="a" column="num_company" type="number" title="" comment="Предприятие &quot;По новой структуре&quot; принемает значение [1;10]" as="num_company" key="0" />
        <column table="a" column="kod_stroy_obj_dr_pr" type="number" comment="Код строит объекта других проектов FK NAME, QR_STROY_OBJ, KOD_STROY_OBJ, KOD_STROY_OBJ_DR_PR" as="kod_stroy_obj_dr_pr" reference="qr_stroy_obj" refcol="kod_stroy_obj" key="0" />
        <column table="a" column="nazn_obj" type="string" title="" comment="Назначение объекта" as="nazn_obj" key="0" />
        <column table="a" column="e_sourse_1" type="number" title="" comment="Источник 1 - энергия FK NAME, ASUSE.HR_EOBJECT, EOBJ_ID, E_SOURSE_1" as="e_sourse_1" key="0" />
        <column table="a" column="e_sourse_2" type="number" title="" comment="Источник 2 - энергия FK NAME, ASUSE.HR_EOBJECT, EOBJ_ID, E_SOURSE_2" as="e_sourse_2" key="0" />
        <column table="a" column="e_edizm" type="number" title="" comment="Ед. изм-я - энергия FK NAME, ASUSE.SK_EDIZM, EDIZM, E_EDIZM" as="e_edizm" key="0" />
        <column table="a" column="e_voltage_level" type="number" title="" comment="Уровень напряжения - энергия FK ABBR, ASUSE.HK_VOLTAGE, VOLTAGE, E_VOLTAGE_LEVEL" as="e_voltage_level" key="0" />
        <column table="a" column="e_voltage_class" type="number" title="" comment="Класс напряжения - энергия FK V, HK_V, KODV, E_VOLTAGE_CLASS" as="e_voltage_class" key="0" />
        <column table="a" column="name_en_device" type="string" title="" comment="Наименование энергопринимающих устройств" as="name_en_device" key="0" />
        <column table="a" column="tmp_kod_person" type="number" comment="Ответсветнный врем/пост" as="tmp_kod_person" key="0" />
        <column table="a" column="str_num_abon_tn" type="string" title="" comment="Номера абонентов всех АКТОВ ТН на данном паспорте" as="str_num_abon_tn" key="0" />
        <column table="a" column="magistral" type="string" title="" comment="Магистраль (для паспортов типа &quot;Перевод в эл.вид&quot;)" as="magistral" key="0" />
        <column table="a" column="camera" type="string" title="" comment="Камера (для паспортов типа &quot;Перевод в эл.вид&quot;)" as="camera" key="0" />
        <column table="a" column="kod_magistral" type="number" comment="Код магистрали по таблице asuse.qr_schema (для паспортов типа &quot;Перевод в эл.вид&quot;)" as="kod_magistral" key="0" />
        <column table="a" column="kod_predpr" type="number" comment="Код предприятия по таблице asuse.qr_schema (для паспортов типа &quot;Перевод в эл.вид&quot;)" as="kod_predpr" key="0" />
        <column table="a" column="kod_person_archiv" type="number" comment="Код исполнителя, создающего ИД (для паспортов типа &quot;Перевод в эл.вид&quot;)" as="kod_person_archiv" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_zpr" as="a">
          <dlink name="c_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" as="c_zayav" table="c_zayav" child="c_zayav" field="kod_zpr" parent="qr_zpr" back="c_zayav">
            <dimlink name="vc_user_login_by_z" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vc_user_login" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="qr_list_zpr_abons" is-private-dimension="1" is-final-dimension="1" dimension="1" as="qr_list_zpr_abons" table="qr_list_zpr_abons" child="qr_list_zpr_abons" field="kod_zpr" parent="qr_zpr" back="qr_list_zpr_abons">
            <dimlink name="is_kontact" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="qr_zpr" as="kod_parent" join="left outer" dname="qr_zpr">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_zpr" />
          </call>
        </query>
        <query name="qs_passp_type" as="tip_pasp" join="left outer" dname="qr_zpr">
          <call function="=">
            <column table="a" column="tip_pasp" />
            <column table="tip_pasp" column="kod" />
          </call>
        </query>
        <query name="qr_stroy_obj" as="kod_stroy_obj" join="left outer" dname="qr_zpr">
          <call function="=">
            <column table="a" column="kod_stroy_obj" />
            <column table="kod_stroy_obj" column="kod_stroy_obj" />
          </call>
        </query>
        <query name="qr_zpr" as="kod_parent_pril" join="left outer" dname="qr_zpr">
          <call function="=">
            <column table="a" column="kod_parent_pril" />
            <column table="kod_parent_pril" column="kod_zpr" />
          </call>
        </query>
        <query name="qr_stroy_obj" as="kod_stroy_obj_dr_pr" join="left outer" dname="qr_zpr">
          <call function="=">
            <column table="a" column="kod_stroy_obj_dr_pr" />
            <column table="kod_stroy_obj_dr_pr" column="kod_stroy_obj" />
          </call>
        </query>
      </from>
    </query>
    <query name="qr_zpr_energo" class="1" timestamp="12.12.2018 15:54:03" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qr_zpr_energo.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_zpr" type="number" column-mandatory="1" comment="KOD_ZPR" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" key="0" />
        <column table="a" column="kod_type_obj" type="number" comment="Тип объекта" as="kod_type_obj" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_reg" type="number" comment="РЭС" as="kod_reg" key="0" />
        <column table="a" column="pr_city" type="number" title="" comment="Регион" as="pr_city" key="0" />
        <column table="a" column="zona" type="number" title="" comment="Зона" as="zona" key="0" />
        <column table="a" column="kod_ed_izm" type="number" comment="Ед. изм." as="kod_ed_izm" key="0" />
        <column table="a" column="kad_num" type="string" title="" comment="Кадастровый номер" as="kad_num" key="0" />
        <column table="a" column="kod_sel_pos" type="number" comment="Сельское поселение" as="kod_sel_pos" key="0" />
        <column table="a" column="kod_nas_punkt" type="number" comment="Населенный пункт" as="kod_nas_punkt" key="0" />
        <column table="a" column="kod_mun_obr" type="number" comment="Муниц. обра-е" as="kod_mun_obr" key="0" />
        <column table="a" column="id_oktmo" type="number" title="" comment="Код-ссылка на запись в справочнике ОКТМО" as="id_oktmo" key="0" />
        <column table="a" column="kod_adr" type="number" comment="Код адреса ASUSE.K_HOUSE.KODD" as="kod_adr" key="0" />
        <column table="a" column="pr_move_object" type="number" title="" as="pr_move_object" key="0" />
        <column table="a" column="kod_chracter_load" type="number" as="kod_chracter_load" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_zpr_energo" as="a" />
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="qr_zpr_energo">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
      </from>
    </query>
    <query name="qs_passp_type" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qs_passp_type.xml" haskeys="1">
      <select>
        <call function="rowid" as="qs_passp_type_id" key="1" />
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" />
        <column table="a" column="name" type="string" title="Наименование" comment="район в структуре предприятия" as="name" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qs_passp_type" as="a" />
      </from>
    </query>
    <query name="qs_type_tarif" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qs_type_tarif.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qs_type_tarif" as="a" />
      </from>
    </query>
    <query name="qs_type_tarif_ind" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\qs_type_tarif_ind.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="50" title="" as="u_m" key="0" />
        <column table="a" column="dat_end" type="date" title="" comment="дата удаления" as="dat_end" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qs_type_tarif_ind" as="a" />
      </from>
    </query>
    <query name="qs_manager_zpr_messages" class="1" timestamp="26.12.2018 13:53:32" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\sales.qs_manager_zpr_messages.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="ID" key="1" as="kod" />
        <column table="a" column="kod_zpr" type="number" comment="Код паспорта" as="kod_zpr" reference="qr_zpr" refcol="kod_zpr" />
        <column table="a" column="kod_status" type="number" column-mandatory="1" comment="Код статуса сообщения 0 - &quot;-&quot;, 1 - &quot;Текущий&quot;, 2 - &quot;Важный&quot;, 3 - &quot;Критичный&quot;" as="kod_status" />
        <column table="a" column="prim" type="string" data-size="4000" title="" comment="Cooобщение" as="prim" />
        <column table="a" column="u_m" type="string" data-size="40" title="" comment="Польз. измен." as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="Дата измен." as="d_m" />
        <column table="a" column="head_str" type="string" data-size="250" title="" as="head_str" />
        <column table="a" column="kod_zayav" type="number" comment="Код заявки" as="kod_zayav" reference="c_zayav" refcol="kod_zayav" />
        <column table="a" column="kod_doc" type="number" comment="Код документа" as="kod_doc" reference="c_doc_zpr" refcol="kod_doc" />
        <column table="a" column="kod_dog" type="number" comment="Код договора" as="kod_dog" reference="is_dop_contract" refcol="kod_dop_contract" />
        <column table="a" column="pr_doc" type="number" title="" comment="1 - ТУ, 2 - Оценка" as="pr_doc" />
        <column table="a" column="u_c" type="string" data-size="250" title="" comment="Пользовталеь создавший" as="u_c" />
        <column table="a" column="date_create" type="date" title="" as="date_create" />
        <column table="a" column="kod_vo" type="number" as="kod_vo" reference="c_zayav_virtual" refcol="kod" />
        <column table="a" column="kod_dog_esn" type="number" comment="SALES.C_DOG_ESN.KOD" as="kod_dog_esn" reference="c_dog_esn" refcol="kod" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="qs_manager_zpr_messages" as="a" />
        <query name="qr_zpr" as="kod_zpr" join="left outer" dname="qs_manager_zpr_messages">
          <call function="=">
            <column table="a" column="kod_zpr" />
            <column table="kod_zpr" column="kod_zpr" />
          </call>
        </query>
        <query name="c_zayav" as="kod_zayav" join="left outer" dname="qs_manager_zpr_messages">
          <call function="=">
            <column table="a" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_doc_zpr" as="kod_doc" join="left outer" dname="qs_manager_zpr_messages">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="is_dop_contract" as="kod_dog" join="left outer" dname="qs_manager_zpr_messages" title="Абонентские договоры">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dop_contract" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_vo" join="left outer" dname="qs_manager_zpr_messages">
          <call function="=">
            <column table="a" column="kod_vo" />
            <column table="kod_vo" column="kod" />
          </call>
        </query>
        <query name="c_dog_esn" as="kod_dog_esn" join="left outer" dname="qs_manager_zpr_messages">
          <call function="=">
            <column table="a" column="kod_dog_esn" />
            <column table="kod_dog_esn" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="vc_num_z_vo" class="1" timestamp="04.12.2018 01:21:02" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vc_num_z_vo.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" key="1" as="id" />
        <column table="a" column="num_zayav" type="string" data-size="30" title="" index="1" as="num_zayav" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_zayav_virt" type="number" as="kod_zayav_virt" />
        <call type="string" function="coalesce" title="Наименование контрагента" as="name_org">
          <column table="kodp" column="name" />
          <column table="kodp_v" column="name" />
          <column table="kod_zayav_virt" column="name_org" />
        </call>
        <column table="kod_zayav" column="num_zayav" title="Номер заявки" as="num_z" />
        <column table="kod_zayav_virt" column="num_zayav_vo" title="Номер ВО" as="num_zayav_vo" />
        <call function="()" as="cnt" type="number" is-fact="1" agg="max" fact="vc_num_z_vo_cnt">
          <const>1</const>
        </call>
        <call type="number" function="()" as="pr_rebind_c" column-editable="1" controlType="UICheck" title="Разрешить перепривязку">
          <const>0</const>
        </call>
        <call type="number" function="()" as="pr_change_kont_c" column-editable="1" controlType="UICheck" title="Разрешить замену основного конт. ица в заявке">
          <const>0</const>
        </call>
        <column table="this" column="pr_rebind_c" column-editable="1" as="pr_rebind" type="number" controlType="UICheck" />
        <column table="this" column="pr_change_kont_c" column-editable="1" as="pr_change_kont" type="number" controlType="UICheck" />
        <call type="number" function="()" as="pr_kont" column-editable="1" controlType="UICheck" title="Изменить основной контакт">
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vc_num_z_vo" as="a">
          <link name="kod_zayav_virt" as="kod_zayav_virt" table="c_zayav_virtual" child="vc_num_z_vo" field="kod_zayav_virt" parent="c_zayav_virtual" back="vc_num_z_vo">
            <link name="kodp" as="kodp_v" table="is_creditors" child="c_zayav_virtual" field="kodp" parent="is_creditors" back="c_zayav_virtual" title="Контрагенты" />
          </link>
          <link name="kod_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_zayav" table="c_zayav" child="vc_num_z_vo" field="kod_zayav" parent="c_zayav" back="vc_num_z_vo">
            <dimlink name="vc_user_login_by_k" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <link name="kodp" as="kodp" table="is_creditors" child="c_zayav" field="kodp" parent="is_creditors" back="c_zayav" title="Контрагенты" />
          </link>
          <link name="kod_zayav_virt" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_zayav_virt" table="c_zayav_virtual" child="vc_num_z_vo" field="kod_zayav_virt" parent="c_zayav_virtual" back="vc_num_z_vo" />
          <dlink name="vc_ul_zayav" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vc_ul_zayav">
            <dimlink name="vc_user_login" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="c_zayav" as="kod_zayav" join="left outer" ConstrDelOption="set null" dname="vc_num_z_vo">
          <call function="=">
            <column table="this" column="kod_zayav" />
            <column table="kod_zayav" column="kod_zayav" />
          </call>
        </query>
        <query name="c_zayav_virtual" as="kod_zayav_virt" join="left outer" ConstrDelOption="set null" dname="vc_num_z_vo">
          <call function="=">
            <column table="this" column="kod_zayav_virt" />
            <column table="kod_zayav_virt" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="vdwh_isv_titul_res" class="1" timestamp="04.12.2017 14:23:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vdwh_isv_titul_res.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isv_titul_res" type="string" key="1" as="kod_isv_titul_res" />
        <column table="a" column="id_slice" type="number" title="" dimension="id_slice" is-final-dimension="1" is-private-dimension="1" as="id_slice" />
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" />
        <column table="a" column="kod_res" type="number" dimension="evd_kodres" is-final-dimension="1" is-private-dimension="1" as="kod_res" reference="is_spr_direct" refcol="kod_direct" />
        <call function="if" as="filial_res_valid" type="number" is-final-dimension="ipr_filial_res_valid" dimension="ipr_filial_res_valid">
          <call function="=">
            <column table="kod_titul_ip" column="kod_filial_tit2" />
            <column table="kod_res" column="kod_parent" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vdwh_isv_titul_res" as="a">
          <dlink name="isv_slice_of_tdc_all" dimension="1" is-final-dimension="1" is-private-dimension="1" as="isv_slice_of_tdc_all" table="isv_slice_of_tdc_all" child="isv_slice_of_tdc_all" field="kod_isv_titul_res" parent="vdwh_isv_titul_res" back="isv_slice_of_tdc_all">
            <dimlink name="isv_ad_everyday" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_vip" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_ostatok" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_year_srok" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_otch_list_3" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_fl_build" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_dt_contract" dimension="1" is-final-dimension="1" />
            <dimlink name="evd_pr_hoz_sposob" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="vdwh_isv_titul_res" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_res" join="left outer" dname="vdwh_isv_titul_res" title="Подразделения">
          <call function="=">
            <column table="a" column="kod_res" />
            <column table="kod_res" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="vdwh_log" title="Логирование пакета is_vdwh" timestamp="15.11.2017 12:40:24" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vdwh_log.xml" haskeys="1">
      <select>
        <column table="a" column="kod_log" type="number" key="1" as="kod_log" />
        <column table="a" column="date_start" type="date" as="date_start" />
        <column table="a" column="date_end" type="date" as="date_end" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="t_m" type="string" data-size="200" as="t_m" />
        <column table="a" column="description" type="string" data-size="1000" as="description" />
        <column table="a" column="error_text" type="string" data-size="1000" as="error_text" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vdwh_log" as="a" title="Логирование пакета is_vdwh" />
      </from>
    </query>
    <query name="vdwh_log_detail" title="Логирование пакета is_vdwh" timestamp="15.11.2017 12:43:03" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vdwh_log_detail.xml" haskeys="1">
      <select>
        <column table="a" column="kod_detail" type="number" key="1" as="kod_detail" />
        <column table="a" column="kod_log" type="number" as="kod_log" reference="vdwh_log" refcol="kod_log" />
        <column table="a" column="date_log" type="date" as="date_log" />
        <column table="a" column="description" type="string" data-size="1000" as="description" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vdwh_log" as="a" title="Логирование пакета is_vdwh" />
        <query name="vdwh_log" as="kod_log" join="left outer" dname="vdwh_log_detail" title="Логирование пакета is_vdwh">
          <call function="=">
            <column table="a" column="kod_log" />
            <column table="kod_log" column="kod_log" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_ad_all_base_cur" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_ad_all_base_cur.xml" haskeys="1">
      <select>
        <call function="rowid" as="vr_ad_all_base_cur_id" key="1" />
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" />
        <column table="a" column="kn_contract" type="number" title="" as="kn_contract" />
        <column table="a" column="kn_req" type="number" title="" as="kn_req" />
        <column table="a" column="kn_contr_kind" type="number" title="" as="kn_contr_kind" />
        <column table="a" column="num_contr" type="string" data-size="50" title="" as="num_contr" />
        <column table="a" column="num_req" type="string" data-size="50" title="" as="num_req" />
        <column table="a" column="dt_contract" type="date" title="" as="dt_contract" />
        <column table="a" column="contr_note" type="string" data-size="4000" title="" as="contr_note" />
        <column table="a" column="kn_customer" type="number" title="" as="kn_customer" />
        <column table="a" column="a_customer" type="string" data-size="250" title="" as="a_customer" />
        <column table="a" column="name_all" type="string" data-size="1000" title="" as="name_all" />
        <column table="a" column="inn" type="string" data-size="15" title="" as="inn" />
        <column table="a" column="kpp" type="string" data-size="20" title="" as="kpp" />
        <column table="a" column="vb_customer" type="string" data-size="250" title="" as="vb_customer" />
        <column table="a" column="ind_proekt" type="number" title="" as="ind_proekt" />
        <column table="a" column="sind_proekt" type="string" data-size="3" title="" as="sind_proekt" />
        <column table="a" column="load_point" type="string" data-size="300" title="" as="load_point" />
        <column table="a" column="name_rs" type="string" data-size="25" title="" as="name_rs" />
        <column table="a" column="load_sum1" type="number" title="" as="load_sum1" />
        <column table="a" column="load_sum2" type="number" title="" as="load_sum2" />
        <column table="a" column="load_sum3" type="number" title="" as="load_sum3" />
        <column table="a" column="sum_load" type="number" title="" as="sum_load" />
        <column table="a" column="load1" type="number" title="" as="load1" />
        <column table="a" column="load2" type="number" title="" as="load2" />
        <column table="a" column="load3" type="number" title="" as="load3" />
        <column table="a" column="load123" type="number" title="" as="load123" />
        <column table="a" column="load_existed" type="number" title="" as="load_existed" />
        <column table="a" column="req_year" type="number" title="" as="req_year" />
        <column table="a" column="load123_kvt" type="number" title="" as="load123_kvt" />
        <column table="a" column="load_existed_kvt" type="number" title="" as="load_existed_kvt" />
        <column table="a" column="load_ex1" type="number" title="" as="load_ex1" />
        <column table="a" column="load_ex2" type="number" title="" as="load_ex2" />
        <column table="a" column="load_ex3" type="number" title="" as="load_ex3" />
        <column table="a" column="kateg" type="string" data-size="6" title="" as="kateg" />
        <column table="a" column="supply" type="string" data-size="250" title="" as="supply" />
        <column table="a" column="supply1" type="string" data-size="250" title="" as="supply1" />
        <column table="a" column="kn_sert" type="number" title="" as="kn_sert" />
        <column table="a" column="dt_reg" type="date" title="" as="dt_reg" />
        <column table="a" column="dt_delivery" type="date" title="" as="dt_delivery" />
        <column table="a" column="dat_act" type="date" title="" as="dat_act" />
        <column table="a" column="dts_final" type="string" data-size="250" title="" as="dts_final" />
        <column table="a" column="sfl_build" type="string" data-size="3" title="" as="sfl_build" />
        <column table="a" column="sfl_build_vip" type="string" data-size="3" title="" as="sfl_build_vip" />
        <column table="a" column="sfl_build_z" type="string" data-size="3" title="" as="sfl_build_z" />
        <column table="a" column="sfl_build_z_vip" type="string" data-size="3" title="" as="sfl_build_z_vip" />
        <column table="a" column="fl_build" type="number" title="" as="fl_build" />
        <column table="a" column="fl_build_vip" type="number" title="" as="fl_build_vip" />
        <column table="a" column="fl_build_z" type="number" title="" as="fl_build_z" />
        <column table="a" column="fl_build_z_vip" type="number" title="" as="fl_build_z_vip" />
        <column table="a" column="kn_zone" type="number" title="" as="kn_zone" />
        <column table="a" column="contr_sumf" type="number" title="" as="contr_sumf" />
        <column table="a" column="cm_case" type="string" data-size="250" title="" as="cm_case" />
        <column table="a" column="contr_kind" type="string" data-size="10" title="" as="contr_kind" />
        <column table="a" column="status" type="number" title="" as="status" />
        <column table="a" column="num_ouco" type="string" data-size="20" title="" as="num_ouco" />
        <column table="a" column="cust_addr_old" type="string" data-size="250" title="" as="cust_addr_old" />
        <column table="a" column="lp_addr_old" type="string" data-size="250" title="" as="lp_addr_old" />
        <column table="a" column="cust_addr" type="string" data-size="250" title="" as="cust_addr" />
        <column table="a" column="lp_addr" type="string" data-size="250" title="" as="lp_addr" />
        <column table="a" column="sum_rated" type="number" title="" as="sum_rated" />
        <column table="a" column="contr_sum_m" type="number" title="" as="contr_sum_m" />
        <column table="a" column="contr_sum_e" type="number" title="" as="contr_sum_e" />
        <column table="a" column="kn_contract_p" type="number" title="" as="kn_contract_p" />
        <column table="a" column="contr_kn_house" type="number" title="" as="contr_kn_house" />
        <column table="a" column="contr_addr_type" type="number" title="" as="contr_addr_type" />
        <column table="a" column="req_kn_house" type="number" title="" as="req_kn_house" />
        <column table="a" column="req_addr_type" type="number" title="" as="req_addr_type" />
        <column table="a" column="kodres" type="number" title="" as="kodres" />
        <column table="a" column="num_ds" type="string" data-size="40" title="" as="num_ds" />
        <column table="a" column="dt_request" type="date" title="" as="dt_request" />
        <column table="a" column="exp_num" type="string" data-size="20" title="" as="exp_num" />
        <column table="a" column="exp_dat" type="date" title="" as="exp_dat" />
        <column table="a" column="exp_prim" type="string" data-size="2000" title="" as="exp_prim" />
        <column table="a" column="reg_req_title" type="string" data-size="45" title="" as="reg_req_title" />
        <column table="a" column="guess_sum" type="number" title="" as="guess_sum" />
        <column table="a" column="pr_name" type="string" data-size="250" title="" as="pr_name" />
        <column table="a" column="name_group" type="string" data-size="50" title="" as="name_group" />
        <column table="a" column="num_tu" type="string" data-size="4000" title="" as="num_tu" />
        <column table="a" column="skorr_ip" type="string" data-size="3" title="" as="skorr_ip" />
        <column table="a" column="korr_ip" type="number" title="" as="korr_ip" />
        <column table="a" column="dat_vip_rab" type="date" title="" as="dat_vip_rab" />
        <column table="a" column="num_vip_rab" type="string" data-size="20" title="" as="num_vip_rab" />
        <column table="a" column="name_rab" type="string" data-size="13" title="" as="name_rab" />
        <column table="a" column="name_oblig" type="string" data-size="11" title="" as="name_oblig" />
        <column table="a" column="dat_tz_ks" type="date" title="" as="dat_tz_ks" />
        <column table="a" column="dat_ks_11" type="date" title="" as="dat_ks_11" />
        <column table="a" column="fl_work_net" type="number" title="" as="fl_work_net" />
        <column table="a" column="sfl_work_net" type="string" data-size="4" title="" as="sfl_work_net" />
        <column table="a" column="fl_work_pu" type="number" title="" as="fl_work_pu" />
        <column table="a" column="sfl_work_pu" type="string" data-size="4" title="" as="sfl_work_pu" />
        <column table="a" column="vol" type="string" data-size="20" title="" as="vol" />
        <column table="a" column="kod_spr_kurators" type="number" as="kod_spr_kurators" />
        <column table="a" column="kod_spr_kurators_req" type="number" as="kod_spr_kurators_req" />
        <column table="a" column="name_kurators" type="string" data-size="250" title="" as="name_kurators" />
        <column table="a" column="name_kurators_req" type="string" data-size="250" title="" as="name_kurators_req" />
        <column table="a" column="dat_post" type="date" title="" as="dat_post" />
        <column table="a" column="dat_vol" type="date" title="" as="dat_vol" />
        <column table="a" column="prim" type="string" data-size="300" title="" as="prim" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="ku_name" type="string" data-size="50" title="" as="ku_name" />
        <column table="a" column="dat_vip" type="date" title="" as="dat_vip" />
        <column table="a" column="dat_ouco" type="date" title="" as="dat_ouco" />
        <column table="a" column="dat_end" type="date" title="" as="dat_end" />
        <column table="a" column="dat_rastorg" type="date" title="" as="dat_rastorg" />
        <column table="a" column="dat_sl_zap" type="date" title="" as="dat_sl_zap" />
        <column table="a" column="dat_per_sl_zap" type="date" title="" as="dat_per_sl_zap" />
        <column table="a" column="srok_uslug" type="date" title="" as="srok_uslug" />
        <column table="a" column="cp" type="number" title="" as="cp" />
        <column table="a" column="scp" type="string" data-size="3" title="" as="scp" />
        <column table="a" column="ap" type="number" title="" as="ap" />
        <column table="a" column="uvedom" type="number" title="" as="uvedom" />
        <column table="a" column="uvedom_r" type="number" title="" as="uvedom_r" />
        <column table="a" column="sap" type="string" data-size="3" title="" as="sap" />
        <column table="a" column="suvedom" type="string" data-size="4" title="" as="suvedom" />
        <column table="a" column="suvedom_r" type="string" data-size="4" title="" as="suvedom_r" />
        <column table="a" column="name_obj" type="string" data-size="60" title="" as="name_obj" />
        <column table="a" column="name_zayav" type="string" data-size="250" title="" as="name_zayav" />
        <column table="a" column="god_tarif" type="number" title="" as="god_tarif" />
        <column table="a" column="god_ip" type="number" title="" as="god_ip" />
        <column table="a" column="dat_ks" type="date" title="" as="dat_ks" />
        <column table="a" column="opl" type="number" title="" as="opl" />
        <column table="a" column="name_kr" type="string" data-size="25" title="" as="name_kr" />
        <column table="a" column="vid_atp" type="string" data-size="4000" title="" as="vid_atp" />
        <column table="a" column="load_units" type="string" data-size="15" title="" as="load_units" />
        <column table="a" column="folder" type="string" data-size="250" title="" as="folder" />
        <column table="a" column="folder_date" type="date" title="" as="folder_date" />
        <column table="a" column="name_folder_user" type="string" data-size="50" title="" as="name_folder_user" />
        <column table="a" column="fl_rotate" type="number" title="" as="fl_rotate" />
        <column table="a" column="fl_rnk_not" type="number" title="" as="fl_rnk_not" />
        <column table="a" column="sfl_rotate" type="string" data-size="3" title="" as="sfl_rotate" />
        <column table="a" column="sfl_rnk_not" type="string" data-size="3" title="" as="sfl_rnk_not" />
        <column table="a" column="quant_ds" type="number" title="" as="quant_ds" />
        <column table="a" column="dat_ds" type="date" title="" as="dat_ds" />
        <column table="a" column="fl_discount" type="number" title="" as="fl_discount" />
        <column table="a" column="sfl_discount" type="string" data-size="3" title="" as="sfl_discount" />
        <column table="a" column="titul_ip" type="string" data-size="250" title="" as="titul_ip" />
        <column table="a" column="num_aip" type="string" data-size="250" title="" as="num_aip" />
        <column table="a" column="name_vid_ad" type="string" data-size="200" title="" as="name_vid_ad" />
        <column table="a" column="name_kat_zayav" type="string" data-size="250" title="" as="name_kat_zayav" />
        <column table="a" column="dat_close_deb_zadol" type="date" title="" as="dat_close_deb_zadol" />
        <column table="a" column="otl_usl" type="string" data-size="2000" title="" as="otl_usl" />
        <column table="a" column="sstage" type="string" data-size="4" title="" as="sstage" />
        <column table="a" column="ssso" type="string" data-size="4" title="" as="ssso" />
        <column table="a" column="stage" type="number" title="" as="stage" />
        <column table="a" column="sso" type="number" title="" as="sso" />
        <column table="a" column="dat_status_2" type="date" title="" as="dat_status_2" />
        <column table="a" column="num_ad" type="string" data-size="50" title="" as="num_ad" />
        <column table="a" column="pr_db" type="number" title="" as="pr_db" />
        <column table="a" column="spr_db" type="string" data-size="3" title="" as="spr_db" />
        <column table="a" column="dat_uv_el_ust" type="date" title="" as="dat_uv_el_ust" />
        <column table="a" column="dat_spis_kz" type="date" title="" as="dat_spis_kz" />
        <column table="a" column="um_status_1" type="string" data-size="50" title="" as="um_status_1" />
        <column table="a" column="srok_otl_usl" type="date" title="" as="srok_otl_usl" />
        <column table="a" column="vid_otl_usl" type="string" data-size="250" title="" as="vid_otl_usl" />
        <column table="a" column="razdel_okved" type="string" data-size="30" title="" as="razdel_okved" />
        <column table="a" column="name_razdel_okved" type="string" data-size="250" title="" as="name_razdel_okved" />
        <column table="a" column="sposob_okved" type="string" data-size="4000" title="" as="sposob_okved" />
        <column table="a" column="name_otrasl" type="string" data-size="200" title="" as="name_otrasl" />
        <column table="a" column="group_lp" type="string" data-size="50" title="" as="group_lp" />
        <column table="a" column="vid_ds" type="string" data-size="200" title="" as="vid_ds" />
        <column table="a" column="contr_opl_d" type="number" title="" as="contr_opl_d" />
        <column table="a" column="contr_opl_i" type="number" title="" as="contr_opl_i" />
        <column table="a" column="contr_opl" type="number" title="" as="contr_opl" />
        <column table="a" column="vozvrat" type="number" title="" as="vozvrat" />
        <column table="a" column="perepl" type="number" title="" as="perepl" />
        <column table="a" column="sum_os" type="number" title="" as="sum_os" />
        <column table="a" column="zadol_opl" type="number" title="" as="zadol_opl" />
        <column table="a" column="zadol_d" type="number" title="" as="zadol_d" />
        <column table="a" column="zadol_i" type="number" title="" as="zadol_i" />
        <column table="a" column="sum_akts" type="number" title="" as="sum_akts" />
        <column table="a" column="proc_opl" type="number" title="" as="proc_opl" />
        <column table="a" column="imuch" type="number" title="" as="imuch" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" />
        <column table="a" column="sum_pd" type="number" title="" as="sum_pd" />
        <column table="a" column="ind_tar" type="number" title="" as="ind_tar" />
        <column table="a" column="fl_work_ps" type="number" title="" as="fl_work_ps" />
        <column table="a" column="sfl_work_ps" type="string" data-size="4" title="" as="sfl_work_ps" />
        <column table="a" column="fl_loss" type="number" title="" as="fl_loss" />
        <column table="a" column="sfl_loss" type="string" data-size="3" title="" as="sfl_loss" />
        <column table="a" column="name_status" type="string" data-size="50" title="" as="name_status" />
        <column table="a" column="text_rab" type="string" data-size="13" title="" as="text_rab" />
        <column table="a" column="text_oblig" type="string" data-size="11" title="" as="text_oblig" />
        <column table="a" column="text_spis" type="string" data-size="500" title="" as="text_spis" />
        <column table="a" column="dat_read_to_close" type="date" title="" as="dat_read_to_close" />
        <column table="a" column="read_to_close" type="number" title="" as="read_to_close" />
        <column table="a" column="fio" type="string" data-size="250" title="" as="fio" />
        <column table="a" column="dataizm" type="date" title="" as="dataizm" />
        <column table="a" column="old_status_name" type="string" data-size="2000" title="" as="old_status_name" />
        <column table="a" column="analog" type="string" data-size="4000" title="" as="analog" />
        <column table="a" column="dat_dop_doc" type="date" title="" as="dat_dop_doc" />
        <column table="a" column="num_dop_doc" type="string" data-size="301" title="" as="num_dop_doc" />
        <column table="a" column="kod_dop_doc" type="number" as="kod_dop_doc" />
        <column table="a" column="pr_late_payment" type="number" title="" as="pr_late_payment" />
        <column table="a" column="prior_ad" type="string" data-size="250" title="" as="prior_ad" />
        <column table="a" column="vrem_tp" type="number" title="" as="vrem_tp" />
        <column table="a" column="dat_fact_vol" type="date" title="" as="dat_fact_vol" />
        <column table="a" column="pr_ofz" type="number" title="" as="pr_ofz" />
        <column table="a" column="podr_status_1" type="string" data-size="100" title="" as="podr_status_1" />
        <column table="a" column="num_ad_pref" type="string" data-size="50" title="" as="num_ad_pref" />
        <column table="a" column="pr_sum_name" type="string" data-size="250" title="" as="pr_sum_name" />
        <column table="a" column="group_ad" type="string" data-size="4000" title="" as="group_ad" />
        <column table="a" column="mo_name" type="string" data-size="250" title="" as="mo_name" />
        <column table="a" column="folder_ofz" type="string" data-size="250" title="" as="folder_ofz" />
        <column table="a" column="all_control" type="number" title="" as="all_control" />
        <column table="a" column="n_pril" type="string" data-size="50" title="" as="n_pril" />
        <column table="a" column="filial" type="string" data-size="25" title="" as="filial" />
        <column table="a" column="s_mobr" type="string" data-size="250" title="" as="s_mobr" />
        <column table="a" column="s_nasp" type="string" data-size="250" title="" as="s_nasp" />
        <column table="a" column="pr_ad_iskl" type="number" title="" as="pr_ad_iskl" />
        <column table="a" column="vid_opl_ad" type="string" data-size="3" title="" as="vid_opl_ad" />
        <column table="a" column="type_req" type="string" data-size="30" title="" as="type_req" />
        <column table="a" column="pr_gen" type="number" title="" as="pr_gen" />
        <column table="a" column="pr_num_pref_control" type="number" title="" as="pr_num_pref_control" />
        <column table="a" column="dat_got_to_close" type="date" title="" as="dat_got_to_close" />
        <column table="a" column="got_to_close" type="number" title="" as="got_to_close" />
        <column table="a" column="dat_first_opl" type="date" title="" as="dat_first_opl" />
        <column table="a" column="srok_tu" type="date" title="" as="srok_tu" />
        <column table="a" column="load_point1" type="string" data-size="300" title="" as="load_point1" />
        <column table="a" column="vol1" type="string" data-size="20" title="" as="vol1" />
        <column table="a" column="group_lp1" type="string" data-size="50" title="" as="group_lp1" />
        <column table="a" column="titul_ad" type="number" title="" as="titul_ad" />
        <column table="a" column="ds_not_rab_le" type="number" title="" as="ds_not_rab_le" />
        <column table="a" column="cnt_mes" type="number" title="" as="cnt_mes" />
        <column table="a" column="pr_ofz_vkl" type="number" title="" as="pr_ofz_vkl" />
        <column table="a" column="status_ofz" type="string" data-size="250" title="" as="status_ofz" />
        <column table="a" column="name_mo" type="string" data-size="250" title="" as="name_mo" />
        <column table="a" column="name_np" type="string" data-size="250" title="" as="name_np" />
        <column table="a" column="name_sp" type="string" data-size="250" title="" as="name_sp" />
        <column table="a" column="name_direct_i" type="string" data-size="100" title="" as="name_direct_i" />
        <column table="a" column="sposob_zayav" type="string" data-size="40" title="" as="sposob_zayav" />
        <column table="a" column="pr_hoz_sposob" type="number" title="" as="pr_hoz_sposob" />
        <column table="a" column="pr_exist_pd" type="number" title="" as="pr_exist_pd" />
        <column table="a" column="dat_plan_rab" type="date" title="" as="dat_plan_rab" />
        <column table="a" column="kod_filial" type="number" as="kod_filial" />
        <column table="a" column="kn_atp_case" type="number" title="" as="kn_atp_case" />
        <column table="a" column="pr_part_akt" type="number" title="" as="pr_part_akt" />
        <column table="a" column="spos_vip" type="string" data-size="10" title="" as="spos_vip" />
        <column table="a" column="org_active" type="string" data-size="250" title="" as="org_active" />
        <column table="a" column="dat_status_1" type="date" title="" as="dat_status_1" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="kod_vol" type="number" as="kod_vol" />
        <column table="a" column="dt_indtar_got" type="date" title="" as="dt_indtar_got" />
        <column table="a" column="proc" type="number" title="" as="proc" />
        <column table="a" column="pr_srez" type="number" title="" as="pr_srez" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="id_slice" type="number" title="" as="id_slice" />
        <column table="a" column="date_coming" type="date" title="" as="date_coming" />
        <column table="a" column="kn_voltage" type="number" title="" as="kn_voltage" />
        <column table="a" column="contr_opl_bez_nds_d" type="number" title="" as="contr_opl_bez_nds_d" />
        <column table="a" column="contr_opl_bez_nds_i" type="number" title="" as="contr_opl_bez_nds_i" />
        <column table="a" column="pr_dso" type="number" title="" as="pr_dso" />
        <column table="a" column="cg_dt_reg" type="date" title="" as="cg_dt_reg" />
        <column table="a" column="cg_col_f" type="date" title="" as="cg_col_f" />
        <column table="a" column="cg_col_i" type="date" title="" as="cg_col_i" />
        <column table="a" column="cg_col_l" type="date" title="" as="cg_col_l" />
        <column table="a" column="cg_col_n" type="date" title="" as="cg_col_n" />
        <column table="a" column="kod_vid_ad" type="number" as="kod_vid_ad" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" />
        <column table="a" column="kn_st_req" type="number" title="" as="kn_st_req" />
        <column table="a" column="dt_project" type="date" title="" as="dt_project" />
        <column table="a" column="date_off" type="date" title="" as="date_off" />
        <column table="a" column="kn_off_reason" type="number" title="" as="kn_off_reason" />
        <column table="a" column="dt_docs_got" type="date" title="" as="dt_docs_got" />
        <column table="a" column="dat_status_4" type="date" title="" as="dat_status_4" />
        <column table="a" column="dat_status_5" type="date" title="" as="dat_status_5" />
        <column table="a" column="dat_status_30" type="date" title="" as="dat_status_30" />
        <column table="a" column="dat_akt" type="date" title="" as="dat_akt" />
        <column table="a" column="kod_vid_ds" type="number" as="kod_vid_ds" />
        <column table="a" column="pr_sum" type="number" title="" as="pr_sum" />
        <column table="a" column="pr_nonprofit" type="string" data-size="5" title="" as="pr_nonprofit" />
        <column table="a" column="kn_supply" type="number" title="" as="kn_supply" />
        <column table="a" column="kn_supply1" type="number" title="" as="kn_supply1" />
        <column table="a" column="kn_load_type" type="number" title="" as="kn_load_type" />
        <column table="a" column="srok_isp_ad" type="number" title="" as="srok_isp_ad" />
        <column table="a" column="dlit_vip_ad" type="number" title="" as="dlit_vip_ad" />
        <column table="a" column="kod_pr_zayav" type="number" as="kod_pr_zayav" />
        <column table="a" column="srok_project_norm" type="number" title="" as="srok_project_norm" />
        <column table="a" column="kod_spr_ini_prod" type="number" as="kod_spr_ini_prod" />
        <column table="a" column="name_ini_prod" type="string" data-size="50" title="" as="name_ini_prod" />
        <column table="a" column="dt_bus_plan" type="date" title="" as="dt_bus_plan" />
        <column table="a" column="power" type="number" title="" as="power" />
        <column table="a" column="power_units" type="string" data-size="5" title="" as="power_units" />
        <column table="a" column="cg_pr_hoz_sposob" type="date" title="" as="cg_pr_hoz_sposob" />
        <column table="a" column="cg_pr_exist_pd" type="date" title="" as="cg_pr_exist_pd" />
        <column table="a" column="cg_dat_plan_rab" type="date" title="" as="cg_dat_plan_rab" />
        <column table="a" column="cg_col_l_2" type="date" title="" as="cg_col_l_2" />
        <column table="a" column="cnt_mes_tp" type="date" title="" as="cnt_mes_tp" />
        <column table="a" column="kod_ini_prod_ds" type="number" as="kod_ini_prod_ds" />
        <column table="a" column="name_ini_prod_ds" type="string" data-size="50" title="" as="name_ini_prod_ds" />
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_zpr" type="number" as="kod_zpr" />
        <column table="a" column="length_le" type="number" title="" as="length_le" />
        <column table="a" column="kod_org_active" type="number" as="kod_org_active" />
        <column table="a" column="kod_dzo_bus_plan" type="number" as="kod_dzo_bus_plan" />
        <column table="a" column="name_dzo_bus_plan" type="string" data-size="50" title="" as="name_dzo_bus_plan" />
        <column table="a" column="kod_slice_dc" type="string" data-size="60" as="kod_slice_dc" />
        <column table="a" column="pr_motiv_ref" type="number" title="" as="pr_motiv_ref" />
        <column table="a" column="dat_ecp_le" type="date" title="" as="dat_ecp_le" />
        <column table="a" column="dat_ecp_ab" type="date" title="" as="dat_ecp_ab" />
        <column table="a" column="kod_status_every_day" type="number" as="kod_status_every_day" />
        <column table="a" column="name_status_every_day" type="string" data-size="250" title="" as="name_status_every_day" />
        <column table="a" column="zadol_d_prosrok" type="number" title="" as="zadol_d_prosrok" />
        <column table="a" column="kod_fs" type="number" as="kod_fs" />
        <column table="a" column="pr_zam_stor" type="number" title="" as="pr_zam_stor" />
        <column table="a" column="dat_zam_stor" type="date" title="" as="dat_zam_stor" />
        <column table="a" column="srok_bus_plan" type="string" data-size="250" title="" as="srok_bus_plan" />
        <column table="a" column="dat_prognoz_od" type="date" title="" as="dat_prognoz_od" />
        <column table="a" column="pr_nw_more" type="number" title="" as="pr_nw_more" />
        <column table="a" column="pr_nw_less" type="number" title="" as="pr_nw_less" />
        <column table="a" column="pr_nw_more_end" type="number" title="" as="pr_nw_more_end" />
        <column table="a" column="pr_nw_less_end" type="number" title="" as="pr_nw_less_end" />
        <column table="a" column="num_order" type="string" data-size="250" title="" as="num_order" />
        <column table="a" column="date_order" type="date" title="" as="date_order" />
        <column table="a" column="kod_ipr" type="string" data-size="50" as="kod_ipr" />
        <column table="a" column="dat_real_ipr" type="string" data-size="20" title="" as="dat_real_ipr" />
        <column table="a" column="podr_ipr" type="string" data-size="250" title="" as="podr_ipr" />
        <column table="a" column="fl_vks" type="number" title="" as="fl_vks" />
        <column table="a" column="name_type_tarif" type="string" data-size="250" title="" as="name_type_tarif" />
        <column table="a" column="kod_graf_opl" type="number" as="kod_graf_opl" />
        <column table="a" column="name_stage_graf" type="string" data-size="50" title="" as="name_stage_graf" />
        <column table="a" column="opl_vid_real_4" type="number" title="" as="opl_vid_real_4" />
        <column table="a" column="opl_vid_real_5" type="number" title="" as="opl_vid_real_5" />
        <column table="a" column="cad_num" type="string" data-size="500" title="" as="cad_num" />
        <column table="a" column="dat_oferta" type="date" title="" as="dat_oferta" />
        <column table="a" column="sum_rs_new" type="number" title="" as="sum_rs_new" />
        <column table="a" column="sum_ip_new" type="number" title="" as="sum_ip_new" />
        <column table="a" column="sum_rs_rek" type="number" title="" as="sum_rs_rek" />
        <column table="a" column="sum_ip_rek" type="number" title="" as="sum_ip_rek" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_ad_all_base_cur" as="a" />
      </from>
    </query>
    <query name="vr_doc_reestr_folders" timestamp="30.06.2017 17:45:15" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_doc_reestr_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folder" key="1" type="number" as="kod_folder" />
        <column table="a" column="name" type="string" data-size="50" vid="1" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_doc_reestr_folders" as="a" />
      </from>
    </query>
    <query name="vr_doc_reestr_types" timestamp="30.06.2017 14:41:21" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_doc_reestr_types.xml" haskeys="1">
      <select>
        <column table="a" column="kod_type" key="1" type="number" as="kod_type" />
        <column table="a" column="kod_doc_type" type="number" as="kod_doc_type" reference="ips_doc_type" refcol="kod_doc_type" />
        <column table="a" column="kod_folder" type="number" as="kod_folder" reference="vr_doc_reestr_folders" refcol="kod_folder" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_doc_reestr_types" as="a" />
        <query name="ips_doc_type" as="kod_doc_type" join="left outer" ConstrDelOption="cascade" dname="vr_doc_reestr_types">
          <call function="=">
            <column table="a" column="kod_doc_type" />
            <column table="kod_doc_type" column="kod_doc_type" />
          </call>
        </query>
        <query name="vr_doc_reestr_folders" as="kod_folder" join="left outer" ConstrDelOption="cascade" dname="vr_doc_reestr_types">
          <call function="=">
            <column table="a" column="kod_folder" />
            <column table="kod_folder" column="kod_folder" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_dop_contr_anl" class="1" timestamp="05.04.2016 09:38:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_dop_contr_anl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contract" type="number" as="kod_dop_contract" key="1" fixed="1" />
        <column table="a" column="kod_dop_contr_anl_gr" type="string" as="kod_dop_contr_anl_gr" reference="vr_dop_contr_anl_gr" refcol="kod_dop_contr_anl_gr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vr_dop_contr_anl" as="a" />
        <query name="vr_dop_contr_anl_gr" as="kod_dop_contr_anl_gr" join="left outer" dname="vr_dop_contr_anl">
          <call function="=">
            <column table="kod_dop_contr_anl_gr" column="kod_dop_contr_anl_gr" />
            <column table="a" column="kod_dop_contr_anl_gr" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_dop_contr_anl_gr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_dop_contr_anl_gr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dop_contr_anl_gr" type="string" as="kod_dop_contr_anl_gr" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="ord" type="number" title="" as="ord" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="a" column="level1" type="number" as="level1" reference="vr_dop_contr_anl_gr" refcol="kod_dop_contr_anl_gr" key="0"></column>
        <column table="a" column="level2" type="number" as="level2" reference="vr_dop_contr_anl_gr" refcol="kod_dop_contr_anl_gr" key="0"></column>
        <column table="a" column="level3" type="number" as="level3" reference="vr_dop_contr_anl_gr" refcol="kod_dop_contr_anl_gr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vr_dop_contr_anl_gr" as="a">
          <dlink name="vr_dop_contr_anl" as="vr_dop_contr_anl" table="vr_dop_contr_anl" child="vr_dop_contr_anl" field="kod_dop_contr_anl_gr" parent="vr_dop_contr_anl_gr" back="vr_dop_contr_anl">
            <dlink name="is_dop_contract" dimension="1" as="is_dop_contract" table="is_dop_contract" child="is_dop_contract" field="kod_dop_contr_anl" parent="vr_dop_contr_anl" back="is_dop_contract" title="Абонентские договоры" />
          </dlink>
        </table>
        <query name="vr_dop_contr_anl_gr" as="level1" join="left outer" dname="vr_dop_contr_anl_gr">
          <call function="=">
            <column table="level1" column="kod_dop_contr_anl_gr" />
            <column table="a" column="level1" />
          </call>
        </query>
        <query name="vr_dop_contr_anl_gr" as="level2" join="left outer" dname="vr_dop_contr_anl_gr">
          <call function="=">
            <column table="level2" column="kod_dop_contr_anl_gr" />
            <column table="a" column="level2" />
          </call>
        </query>
        <query name="vr_dop_contr_anl_gr" as="level3" join="left outer" dname="vr_dop_contr_anl_gr">
          <call function="=">
            <column table="level3" column="kod_dop_contr_anl_gr" />
            <column table="a" column="level3" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_ipr_ofz_1c_data" class="1" timestamp="25.03.2016 21:51:27" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_ipr_ofz_1c_data.xml" haskeys="1">
      <select>
        <column table="a" column="tit_num" type="number" title="" as="tit_num" key="1" fixed="1" />
        <column table="kod_titul_ip" column="kod_titul_ip" dimension="ipr_kod_titul_ip" as="kod_titul_ip" key="0" />
        <column table="a" column="nzs" type="number" title="" fact="ipr_ofz_1c_data_nzs" agg="sum" as="nzs" key="0" />
        <column table="a" column="dolg" type="number" title="" fact="ipr_ofz_1c_data_dlg" agg="sum" as="dolg" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vr_ipr_ofz_1c_data" as="a" />
        <query name="ipr_titul_ip" join="left outer" as="kod_titul_ip" dname="vr_ipr_ofz_1c_data" title="Титулы">
          <call function="=">
            <column table="a" column="tit_num" />
            <column table="kod_titul_ip" column="tit_num_new" />
          </call>
        </query>
      </from>
    </query>
    <query name="ipr_ofz_tit_order" class="1" timestamp="21.07.2016 19:22:45" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_ipr_ofz_order.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ofz_tit_order" type="number" as="kod_ofz_tit_order" key="1" fixed="1" />
        <column table="a" column="kod_titul_ip" type="number" title="" as="kod_titul_ip" reference="ipr_titul_ip" refcol="kod_titul_ip" key="0" />
        <column table="a" column="npp" type="number" title="" format="F0" as="npp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ipr_ofz_tit_order" as="a" />
        <query name="ipr_titul_ip" join="left outer" as="kod_titul_ip" dname="ipr_ofz_tit_order" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_sprav" timestamp="15.03.2017 13:39:58" class="1" title="Справочник" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_sprav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sprav" key="1" type="number" as="kod_sprav" />
        <column table="a" column="table_name" type="string" title="Таблица справочника" data-size="300" comment="таблица" as="table_name" />
        <column table="a" column="key_name" type="string" title="Ключевое поле" data-size="300" comment="ключевое поле" as="key_name" />
        <column table="a" column="title" type="string" data-size="300" title="Справочник" is-name="1" vid="1" as="title" />
        <column table="a" column="parent_key" type="string" title="Parent Key" as="parent_key" />
        <column table="a" column="cnct_table" type="string" title="Связующая таблица" as="cnct_table" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_sprav" as="a" title="Справочник" />
      </from>
    </query>
    <query name="vr_tree_ipr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_sprav_ipr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree_struct" type="number" as="kod_tree_struct"></column>
        <column table="a" column="kod_tree" type="number" as="kod_tree" reference="vr_tree" refcol="kod_tree"></column>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr"></column>
        <call function="rowid" as="vr_sprav_ipr_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_tree_ipr" as="a"></table>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="vr_tree_ipr">
          <call function="=">
            <column table="a" column="kod_ipr"></column>
            <column table="kod_ipr" column="kod_ipr"></column>
          </call>
        </query>
        <query name="vr_tree_struct" as="kod_tree_struct" join="left outer" dname="vr_tree_ipr">
          <call function="=">
            <column table="a" column="kod_tree_struct"></column>
            <column table="kod_tree_struct" column="kod_tree_struct"></column>
          </call>
        </query>
        <query name="vr_tree" as="kod_tree" join="left outer" dname="vr_tree_ipr">
          <call function="=">
            <column table="a" column="kod_tree"></column>
            <column table="kod_tree" column="kod_tree"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="vr_spr_kontragent" class="1" order="name" timestamp="29.10.2018 18:19:35" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_spr_kontragent.xml" haskeys="1">
      <select>
        <call function="rowid" as="vr_spr_kontragent_id" key="1" />
        <column table="a" column="e_code" type="number" column-mandatory="1" title="" as="e_code" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" />
        <column table="a" column="name_all" type="string" data-size="1000" title="" as="name_all" />
        <column table="a" column="inn" type="string" data-size="15" title="" as="inn" />
        <column table="a" column="abbr" type="string" data-size="10" title="Аббревиатура" as="abbr" />
        <column table="a" column="prov_kaznach" type="string" data-size="3" title="" as="prov_kaznach" />
        <column table="a" column="sudeb_proizv" type="string" data-size="3" title="" as="sudeb_proizv" />
        <column table="a" column="proc_bankr" type="string" data-size="3" title="" as="proc_bankr" />
        <column table="a" column="likvidac" type="string" data-size="3" title="" as="likvidac" />
        <column table="a" column="ustup_prav" type="string" data-size="3" title="" as="ustup_prav" />
        <column table="a" column="ur_fiz" type="string" data-size="3" title="" as="ur_fiz" />
        <column table="a" column="nerezident" type="string" data-size="3" title="" as="nerezident" />
        <column table="a" column="inform_o_sobstv" type="string" data-size="4" title="" as="inform_o_sobstv" />
        <column table="a" column="doc_osn" type="string" data-size="4" title="" as="doc_osn" />
        <column table="a" column="adr_text" type="string" data-size="250" title="" as="adr_text" />
        <column table="a" column="address_mesto" type="string" data-size="250" title="" as="address_mesto" />
        <column table="a" column="adr_post" type="string" data-size="250" title="" as="adr_post" />
        <column table="a" column="director" type="string" data-size="250" title="" as="director" />
        <column table="a" column="direct_r" type="string" data-size="250" title="" as="direct_r" />
        <column table="a" column="kpp" type="string" data-size="20" title="" as="kpp" />
        <column table="a" column="okpo" type="string" data-size="12" title="" as="okpo" />
        <column table="a" column="okonh" type="string" data-size="24" title="" as="okonh" />
        <column table="a" column="ogrn" type="string" data-size="15" title="" as="ogrn" />
        <column table="a" column="osnov" type="string" data-size="250" title="" as="osnov" />
        <column table="a" column="pasport" type="string" data-size="250" title="" as="pasport" />
        <column table="a" column="phone" type="string" data-size="250" title="" as="phone" />
        <column table="a" column="fax" type="string" data-size="250" title="" as="fax" />
        <column table="a" column="sot_phone" type="string" data-size="250" title="" as="sot_phone" />
        <column table="a" column="license" type="string" data-size="25" title="" as="license" />
        <column table="a" column="grantor" type="string" data-size="128" title="" as="grantor" />
        <column table="a" column="lic_date" type="date" title="" as="lic_date" />
        <column table="a" column="sso" type="string" data-size="3" title="" as="sso" />
        <column table="a" column="group_kontrag" type="string" data-size="106" title="" as="group_kontrag" />
        <column table="a" column="razdel_okved" type="string" data-size="250" title="" as="razdel_okved" />
        <column table="a" column="okved" type="string" data-size="250" title="" as="okved" />
        <column table="a" column="prior_okved" type="string" data-size="3" title="" as="prior_okved" />
        <column table="a" column="ontnosh_energosyst" type="string" data-size="3" title="" as="ontnosh_energosyst" />
        <column table="a" column="msp_da" type="string" data-size="3" title="" as="msp_da" />
        <column table="a" column="msp_net" type="string" data-size="3" title="" as="msp_net" />
        <column table="a" column="cfo" type="string" data-size="4000" title="" as="cfo" />
        <column table="a" column="deb" type="string" data-size="3" title="" as="deb" />
        <column table="a" column="d_c" type="date" title="" as="d_c" />
        <column table="a" column="dpk" type="date" title="" as="dpk" />
        <column table="a" column="polz" type="string" data-size="50" title="" as="polz" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_spr_kontragent" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="vr_tree" class="1" timestamp="24.03.2017 18:15:14" delete-validation="del_validation" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree" type="number" as="kod_tree" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="name" type="string" title="Наименование" column-mandatory="1" as="name" key="0" />
        <column table="a" column="ord" type="number" title="" as="ord" key="0" />
        <column table="a" column="kod_tree_struct" type="number" as="kod_tree_struct" reference="vr_tree_struct" refcol="kod_tree_struct" key="0" />
        <column table="a" column="detail" type="number" title="Детализация по титулам" controlType="UICheck" as="detail" key="0" />
        <column table="a" type="number" title="Не показывать дочерние" controlType="UICheck" column="dont_show_child" as="dont_show_child" key="0" />
        <column table="a" type="number" controlType="UICheck" column="exclude_row" title="Исключить" as="exclude_row" key="0" />
        <column table="a" column="is_auto" type="number" controlType="UICheck" title="Строка сгенерирована автоматически" column-editable="0" as="is_auto" key="0" />
        <column table="a" column="abbr" type="string" title="№" as="abbr" key="0" />
        <call function="if" type="number" as="is_editable_refs" title=" " key="0">
          <call function="and">
            <call function="=1">
              <column table="this" column="is_not_new" />
            </call>
            <call function="not">
              <call function="=1">
                <column table="this" column="is_auto" />
              </call>
            </call>
            <call function="=1">
              <column table="this" column="is_active" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="number" as="is_editable_cond1" title=" " key="0">
          <call function="and">
            <call function="=1">
              <column table="this" column="is_par_active" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="number" as="is_editable_cond2" title=" " key="0">
          <call function="and">
            <call function="=1">
              <column table="this" column="is_active" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="string" as="del_validation" key="0">
          <call function="=1">
            <column table="this" column="is_auto" />
          </call>
          <const>'Строка сгенерировано автоматически. Воспользуйтесь признаком "исключить"'</const>
          <const>null</const>
        </call>
        <call as="row_color" type="string" function="case" title=" " key="0">
          <call function="when">
            <call function="is null">
              <column table="this" column="is_active" />
            </call>
            <const>'240,240,240'</const>
          </call>
          <call function="when">
            <call function="=1">
              <column table="this" column="is_auto" />
            </call>
            <const>'240,248,255'</const>
          </call>
          <call function="else">
            <const>'255,255,255'</const>
          </call>
        </call>
        <column table="kod_tree_act" column="is_active" as="is_active" key="0" />
        <column table="kod_tree_par_act" column="is_par_active" as="is_par_active" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vr_tree" as="a" />
        <query name="vr_tree_struct" as="kod_tree_struct" join="left outer" dimension="1" dname="vr_tree">
          <call function="=">
            <column table="a" column="kod_tree_struct" />
            <column table="kod_tree_struct" column="kod_tree_struct" />
          </call>
        </query>
        <query name="vr_tree_active_tree" join="left outer" as="kod_tree_act" dname="vr_tree">
          <call function="=">
            <column table="a" column="kod_tree" />
            <column table="kod_tree_act" column="kod_tree" />
          </call>
        </query>
        <query name="vr_tree_par_active_tree" join="left outer" as="kod_tree_par_act" dname="vr_tree">
          <call function="=">
            <column table="a" column="kod_tree" />
            <column table="kod_tree_par_act" column="kod_tree" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_tree_klass_titul" class="1" timestamp="21.03.2017 19:12:10" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree_klass_titul.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sprav" type="number" as="kod_sprav" key="1" fixed="1" />
        <column table="a" column="kod_tree" type="number" as="kod_tree" reference="vr_tree" refcol="kod_tree" key="0" />
        <column table="a" column="kod_klass" type="number" as="kod_klass" reference="ips_klass_titul" refcol="kod_klass" key="0" />
        <column table="a" column="with_childs" type="number" controlType="UICheck" title="Вместе с дочерними" as="with_childs" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="||" as="vid" fact="vr_sprav_klass_titul_vid" agg="list" key="0">
          <column table="kod_klass" column="vid" />
          <call function="if">
            <call function="=1">
              <column table="this" column="with_childs" />
            </call>
            <const>'*'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="vr_tree_klass_titul" as="a" />
        <query name="ips_klass_titul" as="kod_klass" join="left outer" dimension="1" dname="vr_tree_klass_titul" title="Принадлежность к важн. объекта, программам">
          <call function="=">
            <column table="a" column="kod_klass" />
            <column table="kod_klass" column="kod_klass" />
          </call>
        </query>
        <query name="vr_tree" as="kod_tree" join="left outer" dimension="1" dname="vr_tree_klass_titul">
          <call function="=">
            <column table="a" column="kod_tree" />
            <column table="kod_tree" column="kod_tree" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_tree_krit_minenergo" class="1" timestamp="14.03.2017 13:52:19" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree_krit_minenergo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sprav" type="number" key="1" as="kod_sprav" />
        <column table="a" column="kod_tree" type="number" as="kod_tree" reference="vr_tree" refcol="kod_tree" />
        <column table="a" column="kod_krit_minenergo" type="number" as="kod_krit_minenergo" reference="ips_krit_minenergo" refcol="kod_krit_minenergo" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_tree_krit_minenergo" as="a" />
        <query name="vr_tree" as="kod_tree" join="left outer" dimension="1" dname="vr_tree_krit_minenergo">
          <call function="=">
            <column table="a" column="kod_tree" />
            <column table="kod_tree" column="kod_tree" />
          </call>
        </query>
        <query name="ips_krit_minenergo" as="kod_krit_minenergo" join="left outer" dname="vr_tree_krit_minenergo" title="Критерий минэнерго">
          <call function="=">
            <column table="a" column="kod_krit_minenergo" />
            <column table="kod_krit_minenergo" column="kod_krit_minenergo" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_tree_sprav" class="1" timestamp="03.04.2017 00:11:11" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree_sprav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree_sprav" type="number" key="1" as="kod_tree_sprav" />
        <column table="a" column="kod_tree" type="number" as="kod_tree" reference="vr_tree" refcol="kod_tree" />
        <column table="a" column="kod_sprav_data" type="string" as="kod_sprav_data" reference="vr_sprav_data" refcol="kod_sprav_data" />
        <column table="a" column="with_childs" type="number" controlType="UICheck" title="Вместе с дочерними" as="with_childs" />
        <const as="cnt" fact="vr_tree_sprav_cnt" agg="sum" type="number">1</const>
        <call function="||" as="vid" fact="vr_tree_sprav_vid" agg="list">
          <column table="kod_sprav_data" column="abbr" />
          <call function="if">
            <call function="=1">
              <column table="this" column="with_childs" />
            </call>
            <const>'*'</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_tree_sprav" as="a" />
        <query name="vr_sprav_data" as="kod_sprav_data" join="left outer" dimension="1" dname="vr_tree_sprav">
          <call function="=">
            <column table="a" column="kod_sprav_data" />
            <column table="kod_sprav_data" column="kod_sprav_data" />
          </call>
        </query>
        <query name="vr_tree" as="kod_tree" join="left outer" dimension="1" dname="vr_tree_sprav">
          <call function="=">
            <column table="a" column="kod_tree" />
            <column table="kod_tree" column="kod_tree" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_tree_struct" class="1" timestamp="14.03.2017 22:41:25" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree_struct.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree_struct" type="number" key="1" as="kod_tree_struct" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="date_mod" type="date" title="Дата модификации настроек" controlType="UIDateTime" fact="vr_tree_struct_date_mod" agg="max" as="date_mod" />
        <column table="a" column="date_upd" type="date" title="Дата обновления хранилища (привязки титулов к структуре)" controlType="UIDateTime" fact="vr_tree_struct_date_upd" agg="min" valid="qube.ipr_tree_struct_upd_vld" as="date_upd" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_tree_struct" as="a" />
      </from>
    </query>
    <query name="vr_tree_struct_sprav" timestamp="14.03.2017 18:43:14" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vr_tree_struct_sprav.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tree_struct_sprav" key="1" type="number" as="kod_tree_struct_sprav" />
        <column table="a" column="kod_tree_struct" key="1" type="number" as="kod_tree_struct" reference="vr_tree_struct" refcol="kod_tree_struct" />
        <column table="a" column="kod_sprav" key="1" type="number" as="kod_sprav" reference="vr_sprav" refcol="kod_sprav" />
        <column table="a" column="ord" key="1" type="number" as="ord" />
        <call function="if" as="pr_ips_razdel_ip" type="number" agg="max" fact="vr_tss_pr_ips_razdel_ip">
          <call function="=">
            <column table="kod_sprav" column="table_name" />
            <const>'ips_razdel_ip'</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_ips_klass_titul" type="number" fact="vr_tss_pr_ips_klass_titul" agg="max">
          <call function="=">
            <column table="kod_sprav" column="table_name" />
            <const>'ips_klass_titul'</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_ips_krit_minenergo" type="number" fact="vr_tss_pr_ips_krit_minenergo" agg="max">
          <call function="=">
            <column table="kod_sprav" column="table_name" />
            <const>'ips_krit_minenergo'</const>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_tree_struct_sprav" as="a" />
        <query name="vr_tree_struct" as="kod_tree_struct" join="left outer" dimension="1" dname="vr_tree_struct_sprav">
          <call function="=">
            <column table="a" column="kod_tree_struct" />
            <column table="kod_tree_struct" column="kod_tree_struct" />
          </call>
        </query>
        <query name="vr_sprav" as="kod_sprav" join="left outer" dname="vr_tree_struct_sprav" title="Справочник">
          <call function="=">
            <column table="a" column="kod_sprav" />
            <column table="kod_sprav" column="kod_sprav" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_buh_akt_vip_dog_2" class="1" timestamp="18.01.2017 04:48:19" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_buh_akt_vip_dog_2.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vip_dog" type="number" as="kod_vip_dog" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_schet" type="number" as="kod_schet" key="0" />
        <column table="a" column="kod_vid_zatrat" type="number" as="kod_vid_zatrat" key="0" />
        <column table="a" column="name_vid_zatrat" type="string" as="name_vid_zatrat" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_buh_akt_vip_dog_2" as="a" />
        <query name="is_vip_dog" as="kod_vip_dog" dname="vv_buh_akt_vip_dog_2" title="Док-ты по выполнению">
          <call function="=">
            <column table="a" column="kod_vip_dog" />
            <column table="kod_vip_dog" column="kod_vip_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_ipr_contr_steps_prev_doc" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_contr_steps_prev_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr" type="number" as="kod_ipr"></column>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip"></column>
        <column table="a" column="kod_doc" type="number" as="kod_doc"></column>
        <column table="a" column="prev_doc" type="number" title="" as="prev_doc"></column>
        <call function="rowid" as="vv_ipr_contr_steps_prev_doc_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vv_ipr_contr_steps_prev_doc" as="a"></table>
      </from>
    </query>
    <query name="vv_ipr_ipr_data_check_pl_ft" class="1" timestamp="25.01.2017 03:54:02" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_ipr_data_check_pl_ft.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ipr_ext" type="number" as="kod_ipr_ext" key="1" fixed="1" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" key="0" />
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" key="0" />
        <column table="a" column="pr_plan" type="number" title="" as="pr_plan" key="0" />
        <column table="a" column="pr_fact" type="number" title="" as="pr_fact" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_ipr_ipr_data_check_pl_ft" as="a" />
      </from>
    </query>
    <query name="vv_ipr_ipr_data_extra" class="1" timestamp="17.08.2016 02:51:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_ipr_data_extra.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="kod_doc_osn" type="number" as="kod_doc_osn" reference="ipr_doc" refcol="kod_doc" key="0" />
        <column table="a" column="kod_ipr_ext" type="number" as="kod_ipr_ext" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="is_real" type="number" title="" as="is_real" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_ipr_ipr_data_extra" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="vv_ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr_ext" join="left outer" dname="vv_ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_ipr_ext" />
            <column table="kod_ipr_ext" column="kod_ipr" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="vv_ipr_ipr_data_extra" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_doc" as="kod_doc_osn" join="left outer" dname="vv_ipr_ipr_data_extra">
          <call function="=">
            <column table="a" column="kod_doc_osn" />
            <column table="kod_doc_osn" column="kod_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_ipr_vvod_fiz_dop_fact" class="1" timestamp="24.01.2017 20:06:56" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_vvod_fiz_dop_fact.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="km_vl1" type="number" title="" as="km_vl1" key="0" />
        <column table="a" column="km_vl2" type="number" title="" as="km_vl2" key="0" />
        <column table="a" column="km_vl1_pr" type="number" title="" as="km_vl1_pr" key="0" />
        <column table="a" column="km_vl2_pr" type="number" title="" as="km_vl2_pr" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr" key="0" />
        <call function="ym2 god" as="year" key="0">
          <column table="this" column="ym" />
        </call>
        <call function="ym2 mes" as="period" key="0">
          <column table="this" column="ym" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_ipr_vvod_fiz_dop_fact" as="a" />
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="vv_ipr_vvod_fiz_dop_fact" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="vv_ipr_vvod_fiz_dop_fact">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_ipr" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_ipr_vvod_fiz_dop_plan" class="1" timestamp="24.01.2017 20:07:03" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_vvod_fiz_dop_plan.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="km_vl1" type="number" title="" as="km_vl1" key="0" />
        <column table="a" column="km_vl2" type="number" title="" as="km_vl2" key="0" />
        <column table="a" column="km_vl1_pr" type="number" title="" as="km_vl1_pr" key="0" />
        <column table="a" column="km_vl2_pr" type="number" title="" as="km_vl2_pr" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <call function="ym2 god" as="year" key="0">
          <column table="this" column="ym" />
        </call>
        <call function="ym2 mes" as="period" key="0">
          <column table="this" column="ym" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_ipr_vvod_fiz_dop_plan" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="vv_ipr_vvod_fiz_dop_plan">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="vv_ipr_vvod_fiz_dop_plan" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_ipr_vvod_fiz_dop_wfact" class="1" timestamp="24.01.2017 20:07:10" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\vv_ipr_vvod_fiz_dop_wfact.xml" haskeys="1">
      <select>
        <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" />
        <column table="a" column="kod_ipr" type="number" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="km_vl1" type="number" title="" as="km_vl1" key="0" />
        <column table="a" column="km_vl2" type="number" title="" as="km_vl2" key="0" />
        <column table="a" column="km_vl1_pr" type="number" title="" as="km_vl1_pr" key="0" />
        <column table="a" column="km_vl2_pr" type="number" title="" as="km_vl2_pr" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr_ext" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <column table="kod_ipr" column="kod_doc_osn" as="kod_doc_osn" key="0" />
        <column table="kod_ipr" column="kod_razdel" as="kod_razdel" key="0" />
        <column table="kod_ipr" column="kod_main_titul" as="kod_main_titul" key="0" />
        <column table="kod_ipr" column="kod_ipr" as="kod_ipr" reference="ipr_ipr_data" refcol="kod_ipr" key="0" />
        <call function="ym2 god" as="year" key="0">
          <column table="this" column="ym" />
        </call>
        <call function="ym2 mes" as="period" key="0">
          <column table="this" column="ym" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_ipr_vvod_fiz_dop_wfact" as="a" />
        <query name="ipr_ipr_data" as="kod_ipr" join="left outer" dname="vv_ipr_vvod_fiz_dop_wfact">
          <call function="=">
            <column table="a" column="kod_ipr" />
            <column table="kod_ipr" column="kod_ipr" />
          </call>
        </query>
        <query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" dname="vv_ipr_vvod_fiz_dop_wfact" title="Титулы">
          <call function="=">
            <column table="a" column="kod_titul_ip" />
            <column table="kod_titul_ip" column="kod_titul_ip" />
          </call>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name">
    <function name="qg_state_lkk.f_state_lkk" comment="Код статуса заявки" type="number" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\function.xml">
      qg_state_lkk.f_state_lkk (
      <par1><val /></par1>
      )
    </function>
    <function name="qg_state_lkk.f_get_addr" comment="Адрес" type="string" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\function.xml">
      qg_state_lkk.f_get_addr (
      <par1><val /></par1>
      )
    </function>
    <function name="qg_state_lkk.f_state_by_compl" comment="Cтатус ЛКК по коду обращения" type="number" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\function.xml">
	  qg_state_lkk.f_state_by_compl (
		<par1><val /></par1>
		)
	</function>
  </functions>
  <parts child-name="part" key-name="id">
    <part id="ipr_contr_steps_val-date_case1" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml">
      <params>
        <param name="date_mode" />
        <param name="res_date" />
      </params>
      <call function="case">
        <call function="when">
          <call function="in">
            <useparam name="date_mode" />
            <call function="array">
              <const>1</const>
              <const>3</const>
            </call>
          </call>
          <const>null</const>
        </call>
        <call function="when">
          <call function="=">
            <useparam name="date_mode" />
            <const>2</const>
          </call>
          <useparam name="res_date" />
        </call>
        <call function="when">
          <call function="and">
            <call function="=">
              <useparam name="date_mode" />
              <const>4</const>
            </call>
            <call function="is not null">
              <column table="a" column="kod_doc_rel" />
            </call>
          </call>
          <column table="kod_doc_rel" column="doc_date" />
        </call>
        <call function="when">
          <call function="and">
            <call function="=">
              <useparam name="date_mode" />
              <const>5</const>
            </call>
            <call function="is not null">
              <column table="a" column="kod_doc_rel" />
            </call>
            <call function="!=nvl">
              <column table="kod_template_contr_steps_val" column="is_head_step" />
              <const>1</const>
            </call>
          </call>
          <column table="kod_ipr_doc" column="doc_date" dgroup="min" />
        </call>
        <call function="when">
          <call function="and">
            <call function="=">
              <useparam name="date_mode" />
              <const>6</const>
            </call>
            <call function="is not null">
              <column table="a" column="kod_doc_rel" />
            </call>
            <call function="!=nvl">
              <column table="kod_template_contr_steps_val" column="is_head_step" />
              <const>1</const>
            </call>
          </call>
          <column table="kod_ipr_doc" column="doc_date" dgroup="max" />
        </call>
      </call>
    </part>
    <part id="ipr_contr_steps_val-date_case2" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml">
      <params>
        <param name="pfx" />
      </params>
      <call function="case" type="date">
        <call function="when">
          <call function="and">
            <call function="=">
              <column table="a" column="temp_[:pfx]_date" />
              <const>5</const>
            </call>
            <call function="=">
              <column table="a" column="is_head_step" />
              <const>1</const>
            </call>
          </call>
          <column table="b" column="[:pfx]_date_min" />
        </call>
        <call function="when">
          <call function="and">
            <call function="=">
              <column table="a" column="temp_[:pfx]_date" />
              <const>6</const>
            </call>
            <call function="=">
              <column table="a" column="is_head_step" />
              <const>1</const>
            </call>
          </call>
          <column table="b" column="[:pfx]_date_max" />
        </call>
        <call function="else">
          <column table="a" column="[:pfx]_date" />
        </call>
      </call>
    </part>
    <part id="ipr_contr_steps_val-date_case3" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_contr_steps_val.xml">
      <params>
        <param name="pfx" />
        <param name="saved_date" />
      </params>
      <call function="if">
        <call function="=">
          <column table="a" column="is_closed" />
          <const>1</const>
        </call>
        <useparam name="saved_date" />
        <column table="this" column="[:pfx]_date_calc" />
      </call>
    </part>
    <part id="ipr_dogs-kod_dog_i" class="1" timestamp="18.08.2016 14:08:48" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml">
      <call function="if" as="kod_dog_i" type="string">
        <call function="is not null">
          <call function="nullif">
            <call function="to_char">
              <column table="this" column="kod_dog" group="" />
            </call>
            <const>'-1'</const>
          </call>
        </call>
        <call function="||">
          <const>'1-'</const>
          <column table="this" column="kod_dog" group="" />
        </call>
        <call function="if" as="kod_dog_i" type="string">
          <call function="is not null">
            <column table="this" column="kod_ipr_dog" group="" />
          </call>
          <call function="||">
            <const>'2-'</const>
            <column table="this" column="kod_ipr_dog" group="" />
          </call>
        </call>
      </call>
    </part>
    <part id="ipr_dogs-kod_dog_i-fact" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml">
      <call function="if" as="kod_dog_i" type="string" dimension="ipr_kod_dog_i">
        <call function="is not null">
          <call function="nullif">
            <column table="this" column="kod_dog" group="" />
            <const>-1</const>
          </call>
        </call>
        <call function="||">
          <const>'1-'</const>
          <column table="this" column="kod_dog" group="" />
        </call>
        <call function="if" as="kod_dog_i" type="string">
          <call function="is not null">
            <column table="this" column="kod_ipr_dog" group="" />
          </call>
          <call function="||">
            <const>'2-'</const>
            <column table="this" column="kod_ipr_dog" group="" />
          </call>
        </call>
      </call>
    </part>
    <part id="ipr_dogs-kod_dog_i-1" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml">
      <params>
        <param name="col" />
      </params>
      <call function="||">
        <const>'1-'</const>
        <useparam name="col" />
      </call>
    </part>
    <part id="ipr_dogs-kod_dog_i-2" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_dogs.xml">
      <params>
        <param name="col" />
      </params>
      <call function="||">
        <const>'2-'</const>
        <useparam name="col" />
      </call>
    </part>
    <part id="ipr_fin_body-select" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="+" as="ym">
        <call function="*">
          <column table="head" column="year" />
          <const>100</const>
        </call>
        <column table="a" column="period" />
      </call>
    </part>
    <part id="ipr_fin_body-links" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="s" />
      </params>
      <link name="kod_[:s]_head" as="head" />
    </part>
    <part id="ipr_fin_body-from" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml"></part>
    <part id="ipr_fin_body-columns" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <!--удалить-->
      <column table="a" column="year" />
      <!--<column table="a" column="ym"/>-->
      <column table="a" column="period" />
    </part>
    <part id="ipr_fin_body-columns1" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <column table="a" column="year" />
      <column table="a" column="ym" />
      <column table="a" column="period" />
    </part>
    <part id="ipr_fin_body-saldo-partition" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" />
        <column table="this" column="kod_ipr_ext" />
        <column table="this" column="kod_dog_i" group="max" />
        <column table="this" column="kod_ipr_dog" group="max" />
        <column table="this" column="kod_dog" group="max" />
        <column table="this" column="kodzatrat" group="max" />
        <column table="this" column="kod_smet" group="max" />
      </call>
      <call function="order by 2">
        <column table="this" column="ym" group="max" />
      </call>
    </part>
    <part id="ipr_fin_body-saldo-partition-rn" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" />
        <column table="this" column="kod_ipr_ext" />
        <column table="this" column="kod_dog_i" group="max" />
        <column table="this" column="kod_ipr_dog" group="max" />
        <column table="this" column="kod_dog" group="max" />
        <column table="this" column="kodzatrat" group="max" />
        <column table="this" column="kod_smet" group="max" />
        <column table="this" column="ym" group="max" />
      </call>
      <call function="order by 2">
        <column table="this" column="ym" group="max" />
      </call>
    </part>
    <part id="ipr_fin_body-saldo-partition-rn-ipr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" group="1" />
        <column table="this" column="kod_ipr_ext" group="1" />
        <column table="this" column="ym" group="max" />
      </call>
      <call function="order by 2">
        <column table="this" column="ym" group="max" />
      </call>
    </part>
    <part id="ipr_fin_body-saldo-partition-smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" group="1" />
        <column table="this" column="kod_ipr_ext" group="1" />
        <column table="this" column="kod_dog_i" group="1" />
        <column table="this" column="kod_smet" group="1" />
      </call>
      <call function="order by 2">
        <column table="this" column="ym" group="max" />
      </call>
    </part>
    <part id="ipr_fin_body-saldo-partition-dog" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" group="1" />
        <column table="this" column="kod_ipr_ext" group="1" />
        <column table="this" column="kod_dog_i" group="1" />
      </call>
      <call function="order by 2">
        <column table="this" column="ym" group="max" />
      </call>
    </part>
    <part id="ipr_fin_body-saldo-partition-ipr" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="partition by">
        <column table="this" column="kod_doc_osn" group="1" />
        <column table="this" column="kod_ipr_ext" group="1" />
      </call>
      <call function="order by 2">
        <call function="asc nulls first">
          <column table="this" column="ym" group="max" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_body-dk-columns" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="row_number" as="rn_dog" type="number" group="max" agg="max">
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
          <column table="this" column="ym" />
        </call>
        <call function="order by 2">
          <const>null</const>
        </call>
      </call>
      <call function="over" as="ym_nxt_dog" type="number" group="max" agg="max">
        <call function="first_value">
          <column table="this" column="ym" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
        </call>
        <call function="order by range 1 *">
          <column table="this" column="ym" />
        </call>
      </call>
      <call function="row_number" as="rn_smet" type="number" group="max" agg="max">
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
          <column table="this" column="kod_smet" />
          <column table="this" column="ym" />
        </call>
        <call function="order by 2">
          <const>null</const>
        </call>
      </call>
      <call function="over" as="ym_nxt_smet" type="number" group="max" agg="max">
        <call function="first_value">
          <column table="this" column="ym" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
          <column table="this" column="kod_smet" />
        </call>
        <call function="order by range 1 *">
          <column table="this" column="ym" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_body-dk-columns-pwf" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="s"></param>
      </params>
      <!--kod_ipr_ext,kod_dog_i,kod_smet-->
      <call function="over" as="sld[:s]_dog" type="number" title="Сальдо(договор)" group="sum" agg="sum">
        <call function="sum">
          <column table="this" column="saldo[:s]" group="" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
        </call>
        <call function="order by 2">
          <column table="this" column="ym" />
        </call>
      </call>
      <call as="deb[:s]_dog" function="if" title="Дебет (договор)" group="sum" agg="sum">
        <call function="gt">
          <column table="this" column="sld[:s]_dog" group="" />
          <const>0</const>
        </call>
        <column table="this" column="sld[:s]_dog" group="" />
      </call>
      <call as="kred[:s]_dog" function="if" title="Кредит (договор)" group="sum" agg="sum">
        <call function="lt">
          <column table="this" column="sld[:s]_dog" group="" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="sld[:s]_dog" group="" />
        </call>
      </call>
      <call function="over" as="sld[:s]_smet" type="number" title="Сальдо(строка сметы)" group="sum" agg="sum">
        <call function="sum">
          <column table="this" column="saldo[:s]" group="" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
          <column table="this" column="kod_dog_i" />
          <column table="this" column="kod_smet" />
        </call>
        <call function="order by 2">
          <column table="this" column="ym" />
        </call>
      </call>
      <call as="deb[:s]_smet" function="if" title="Дебет (строка сметы)" group="sum" agg="sum">
        <call function="gt">
          <column table="this" column="sld[:s]_smet" group="" />
          <const>0</const>
        </call>
        <column table="this" column="sld[:s]_smet" group="" />
      </call>
      <call as="kred[:s]_smet" function="if" title="Кредит (строка сметы)" group="sum" agg="sum">
        <call function="lt">
          <column table="this" column="sld[:s]_smet" group="" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="sld[:s]_smet" group="" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_body-columns5" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="s"></param>
      </params>
      <column table="this" column="kap_sum[:s]" as="kap_sum[:s]_itog" cumulate="ym" />
      <column table="this" column="kap_sum_nds[:s]" as="kap_sum_nds[:s]_itog" cumulate="ym" />
      <column table="this" column="kap_nds[:s]" as="kap_nds[:s]_itog" cumulate="ym" />
      <column table="this" column="fp_sum_nds[:s]" as="fp_sum_nds[:s]_itog" cumulate="ym" />
      <column table="this" column="fp_nds[:s]" as="fp_nds[:s]_itog" cumulate="ym" />
      <column table="this" column="vvod_sum[:s]" as="vvod_sum[:s]_itog" cumulate="ym" />
      <!--<column table="this" column="pow_mba[:s]" as="pow_mba[:s]_itog" cumulate="ym" />
      <column table="this" column="pow_km[:s]" as="pow_km[:s]_itog" cumulate="ym" />
      <column table="this" column="pow_km_kl[:s]" as="pow_km_kl[:s]_itog" cumulate="ym" />-->
      <call function="-nvl" as="saldo[:s]" agg="sum">
        <column table="this" column="fp_sum_nds[:s]" />
        <column table="this" column="kap_sum_nds[:s]" />
      </call>
      <call function="if" as="debet[:s]" agg="sum">
        <call function="gt">
          <column table="this" column="saldo[:s]" />
          <const>0</const>
        </call>
        <column table="this" column="saldo[:s]" />
      </call>
      <call function="if" as="kredit[:s]" agg="sum">
        <call function="lt">
          <column table="this" column="saldo[:s]" />
          <const>0</const>
        </call>
        <call function="*">
          <column table="this" column="saldo[:s]" />
          <const>-1</const>
        </call>
      </call>
      <call function="-nvl" as="nzs[:s]" agg="sum">
        <column table="this" column="kap_sum[:s]" />
        <column table="this" column="vvod_sum[:s]" />
      </call>
      <column table="this" column="saldo[:s]" as="saldo[:s]_itog" cumulate="ym" />
      <call function="if" as="debet[:s]_itog" virtual="1" title="Дебиторская задолженность с НДС" agg="sum">
        <call function="gt">
          <column table="this" column="saldo[:s]_itog" window="kod_doc_osn,kod_ipr_ext" />
          <const>0</const>
        </call>
        <column table="this" column="saldo[:s]_itog" />
      </call>
      <call function="if" as="kredit[:s]_itog" virtual="1" title="Кредиторская задолженность с НДС" agg="sum">
        <call function="lt">
          <column table="this" column="saldo[:s]_itog" window="kod_ipr" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo[:s]_itog" />
        </call>
      </call>
      <call function="if" as="debet[:s]_itog_smet" virtual="1" title="Дебиторская задолженность с НДС(на уровне сметы)" agg="sum">
        <call function="gt">
          <column table="this" column="saldo[:s]_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i,kod_smet" />
          <const>0</const>
        </call>
        <column table="this" column="saldo[:s]_itog" />
      </call>
      <call function="if" as="kredit[:s]_itog_smet" virtual="1" title="Кредиторская задолженность с НДС(на уровне сметы)" agg="sum">
        <call function="lt">
          <column table="this" column="saldo[:s]_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i,kod_smet" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo[:s]_itog" />
        </call>
      </call>
      <call function="if" as="debet[:s]_itog_dog" virtual="1" title="Дебиторская задолженность с НДС(на уровне договора)" agg="sum">
        <call function="gt">
          <column table="this" column="saldo[:s]_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i" />
          <const>0</const>
        </call>
        <column table="this" column="saldo[:s]_itog" />
      </call>
      <call function="if" as="kredit[:s]_itog_dog" virtual="1" title="Кредиторская задолженность с НДС(на уровне договора)" agg="sum">
        <call function="lt">
          <column table="this" column="saldo[:s]_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo[:s]_itog" />
        </call>
      </call>
      <column table="this" column="nzs[:s]" as="nzs[:s]_itog" cumulate="ym" />
    </part>
    <part id="ipr_fin_body-columns3" class="1" timestamp="17.05.2017 19:51:47" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <call function="over" as="has_plan" type="number">
        <call function="max">
          <call function="if">
            <call function="not 0">
              <column table="this" column="kap_sum" />
              <column table="this" column="vvod_sum" />
              <column table="this" column="fp_sum" />
              <column table="this" column="dz" />
              <column table="this" column="kz" />
              <column table="this" column="nzs_saldo" />
            </call>
            <const>1</const>
            <const>0</const>
          </call>
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
        </call>
      </call>
      <call function="over" as="summ_on_ipr" type="number">
        <call function="sum">
          <column table="this" column="summ" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
        </call>
      </call>
      <call function="over" as="summ_10_on_ipr" type="number">
        <call function="sum">
          <column table="this" column="summ_10" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
        </call>
      </call>
      <call function="over" as="summ_30_on_ipr" type="number">
        <call function="sum">
          <column table="this" column="summ_30" />
        </call>
        <call function="partition by">
          <column table="this" column="kod_doc_osn" />
          <column table="this" column="kod_ipr_ext" />
        </call>
      </call>
      <call function="smallest" as="summ_k_rasp_on_ipr">
        <column table="this" column="summ_on_ipr" />
        <column table="this" column="summ_10_on_ipr" />
        <column table="this" column="summ_30_on_ipr" />
      </call>
      <call function="decode" as="summ_k_rasp_id" type="number">
        <column table="this" column="summ_k_rasp_on_ipr" />
        <column table="this" column="summ_on_ipr" />
        <const>0</const>
        <column table="this" column="summ_10_on_ipr" />
        <const>1</const>
        <column table="this" column="summ_30_on_ipr" />
        <const>3</const>
      </call>
      <!--факт-->
      <column table="this" column="kap_sum_fact" as="kap_sum_fact_itog" cumulate="ym" />
      <!--<column table="this" column="kap_sum_nds_fact_a" as="kap_sum_nds_fact_a_itog" cumulate="ym"/>-->
      <column table="this" column="kap_sum_nds_fact" as="kap_sum_nds_fact_itog" cumulate="ym" />
      <column table="this" column="kap_nds_fact" as="kap_nds_fact_itog" cumulate="ym" />
      <column table="this" column="fp_sum_nds_fact" as="fp_sum_nds_fact_itog" cumulate="ym" />
      <column table="this" column="fp_nds_fact" as="fp_nds_fact_itog" cumulate="ym" />
      <column table="this" column="vvod_sum_fact" as="vvod_sum_fact_itog" cumulate="ym" />
      <call function="-nvl" as="saldo_fact" agg="sum">
        <column table="this" column="fp_sum_nds_fact" />
        <column table="this" column="kap_sum_nds_fact" />
      </call>
      <call function="-nvl" as="nzs_fact" agg="sum">
        <column table="this" column="kap_sum_fact" />
        <column table="this" column="vvod_sum_fact" />
        <column table="this" column="kap_sum_fact_sp" />
      </call>
      <call function="-nvl" as="nzs_fact_c" agg="sum">
        <column table="this" column="kap_sum_fact_c" />
        <column table="this" column="vvod_sum_fact" />
        <column table="this" column="kap_sum_fact_sp" />
      </call>
      <column table="this" column="saldo_fact" as="saldo_fact_itog" cumulate="ym" />
      <column table="this" column="nzs_fact" as="nzs_fact_itog" cumulate="ym" />
      <column table="this" column="nzs_fact_c" as="nzs_fact_c_itog" cumulate="ym" />
      <call function="if" as="debet_fact_itog" virtual="1" title="Дебиторская задолженность факт с НДС" agg="sum">
        <call function="gt">
          <column table="this" column="saldo_fact_itog" window="kod_doc_osn,kod_ipr_ext" />
          <const>0</const>
        </call>
        <column table="this" column="saldo_fact_itog" />
      </call>
      <call function="if" as="kredit_fact_itog" virtual="1" title="Кредиторская задолженность факт с НДС" agg="sum">
        <call function="lt">
          <column table="this" column="saldo_fact_itog" window="kod_ipr" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo_fact_itog" />
        </call>
      </call>
      <call function="if" as="debet_fact_itog_smet" virtual="1" title="Дебиторская задолженность факт с НДС(на уровне сметы)" agg="sum">
        <call function="gt">
          <column table="this" column="saldo_fact_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i,kod_smet" />
          <const>0</const>
        </call>
        <column table="this" column="saldo_fact_itog" />
      </call>
      <call function="if" as="kredit_fact_itog_smet" virtual="1" title="Кредиторская задолженность факт с НДС(на уровне сметы)" agg="sum">
        <call function="lt">
          <column table="this" column="saldo_fact_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i,kod_smet" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo_fact_itog" />
        </call>
      </call>
      <call function="if" as="debet_fact_itog_dog" virtual="1" title="Дебиторская задолженность факт с НДС(на уровне договора)" agg="sum">
        <call function="gt">
          <column table="this" column="saldo_fact_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i" />
          <const>0</const>
        </call>
        <column table="this" column="saldo_fact_itog" />
      </call>
      <call function="if" as="kredit_fact_itog_dog" virtual="1" title="Кредиторская задолженность факт с НДС(на уровне договора)" agg="sum">
        <call function="lt">
          <column table="this" column="saldo_fact_itog" window="kod_doc_osn,kod_ipr_ext,kod_dog_i" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo_fact_itog" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_body-columns4" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <!-- колонки , в которых из суммы исключены записи у которых год меньше года основного документа вместо них берется введенная вручную сумма из  IPR_CLOSED_PLANS-->
      <call function="if" as="fp_sum_nds_pos" group="sum" agg="sum">
        <call function="or">
          <call function="is null">
            <column table="this" column="zsaldo" group="" />
          </call>
          <call function="ge">
            <column table="this" column="year" />
            <column table="kod_doc_osn1" column="god_ip" />
          </call>
        </call>
        <column table="this" column="fp_sum_nds" group="" />
      </call>
      <call function="if" as="kap_sum_nds_pos" group="sum" agg="sum">
        <call function="or">
          <call function="is null">
            <column table="this" column="zsaldo" group="" />
          </call>
          <call function="ge">
            <column table="this" column="year" />
            <column table="kod_doc_osn1" column="god_ip" />
          </call>
        </call>
        <column table="this" column="kap_sum_nds" group="" />
      </call>
      <call function="if" as="kap_sum_pos" group="sum" agg="sum">
        <call function="or">
          <call function="is null">
            <column table="this" column="znzs" group="" />
          </call>
          <call function="ge">
            <column table="this" column="year" />
            <column table="kod_doc_osn1" column="god_ip" />
          </call>
        </call>
        <column table="this" column="kap_sum" group="" />
      </call>
      <call function="if" as="vvod_sum_pos" group="sum" agg="sum">
        <call function="or">
          <call function="is null">
            <column table="this" column="znzs" group="" />
          </call>
          <call function="ge">
            <column table="this" column="year" />
            <column table="kod_doc_osn1" column="god_ip" />
          </call>
        </call>
        <column table="this" column="vvod_sum" group="" />
      </call>
      <column table="this" column="kap_sum_nds_pos" as="kap_sum_nds_pos_itog" cumulate="ym" />
      <column table="this" column="kap_sum_pos" as="kap_sum_pos_itog" cumulate="ym" />
      <column table="this" column="fp_sum_nds_pos" as="fp_sum_nds_pos_itog" cumulate="ym" />
      <column table="this" column="vvod_sum_pos" as="vvod_sum_pos_itog" cumulate="ym" />
      <call function="-nvl" as="saldo_pos" agg="sum">
        <column table="this" column="fp_sum_nds_pos" />
        <column table="this" column="kap_sum_nds_pos" />
      </call>
      <call function="-nvl" as="nzs_pos" agg="sum">
        <column table="this" column="kap_sum_pos" />
        <column table="this" column="vvod_sum_pos" />
      </call>
      <!--<call function="+nvl" as="saldo_pos_itog_ipr" type="number" agg="sum">
        <call function="over">
          <call function="sum">
            <column table="this" column="saldo_pos" />
          </call>
          <usepart part="ipr_fin_body-saldo-partition-ipr" />
        </call>
        <column table="this" column="zsaldo"/>
      </call>-->
      <column table="this" column="saldo_pos" as="saldo_pos_itog1" cumulate="ym" />
      <column table="this" column="nzs_pos" as="nzs_pos_itog1" cumulate="ym" />
      <call function="if" as="debet2_itog" virtual="1">
        <call function="gt">
          <column table="this" column="saldo_pos_itog" window="kod_doc_osn,kod_ipr_ext" />
          <const>0</const>
        </call>
        <column table="this" column="saldo_pos_itog" />
      </call>
      <call function="if" as="kredit2_itog" virtual="1">
        <call function="lt">
          <column table="this" column="saldo_pos_itog" window="kod_doc_osn,kod_ipr_ext" />
          <const>0</const>
        </call>
        <call function="0-">
          <column table="this" column="saldo_pos_itog" />
        </call>
      </call>
      <call function="+nvl" as="saldo_pos_itog" type="number" agg="sum">
        <column table="this" column="saldo_pos_itog1" />
        <column table="this" column="zsaldo1" />
      </call>
      <call function="+nvl" as="nzs2_itog" type="number" agg="sum">
        <column table="this" column="nzs_pos_itog1" />
        <column table="this" column="nzs_saldo" />
      </call>
      <!--<call function="if" as="debet2_itog" agg="sum" >
          <call function="and">
           
            <call function="gt">
              <column table="this" column="saldo_pos_itog_ipr" />
              <const>0</const>
            </call>
          </call>
          <column table="this" column="saldo_pos_itog" />
      </call>-->
      <!--<call function="if" as="kredit2_itog" agg="sum">
        <call function="and">
          <call function="lt">
            <column table="this" column="saldo_pos_itog_ipr" />
            <const>0</const>
          </call>
        </call>
        <call function="0-">
          <column table="this" column="saldo_pos_itog" />
        </call>
      </call>-->
      <!--<call function="if" as="nzs2_itog" agg="sum">
        <call function="and">
          <call function="=">
            <call function="row_number">
              <usepart part="ipr_fin_body-saldo-partition-rn-ipr" />
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="this" column="nzs_pos_itog_ipr" />
      </call>-->
    </part>
    <part id="ipr_fin_smet-values" class="1" timestamp="14.08.2016 23:58:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="kod_target" />
        <param name="pfx" />
      </params>
      <column table="a" column="summ1" as="summ_[:kod_target]" if="[:kod_target]" fact="ipr_smet_summ_[:kod_target][:pfx]" agg="sum">
        <if>
          <call function="=">
            <column table="smet_doc" column="doc_target_str" />
            <call function="upper">
              <useparam name="kod_target" />
            </call>
          </call>
        </if>
      </column>
      <column table="a" column="summ1_10" as="summ_10_[:kod_target]" if="[:kod_target]" agg="sum" fact="ipr_smet_summ_10_[:kod_target][:pfx]" />
      <column table="a" column="summ1_30" as="summ_30_[:kod_target]" if="[:kod_target]" agg="sum" fact="ipr_smet_summ_30_[:kod_target][:pfx]" />
      <column table="a" column="summ2_nds" as="summ2_nds_[:kod_target]" if="[:kod_target]" fact="ipr_smet_summ_nds_[:kod_target][:pfx]" agg="sum" />
      <column table="a" column="summ1_nds" as="summ_nds_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="summ1_10_nds" as="summ_10_nds_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="summ1_30_nds" as="summ_30_nds_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="vl_km" as="vl_km_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="vl_km_10" as="vl_km_10_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="vl_km_30" as="vl_km_30_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="kl_km" as="kl_km_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="kl_km_10" as="kl_km_10_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="kl_km_30" as="kl_km_30_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="prch" as="prch_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="prch_10" as="prch_10_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="prch_30" as="prch_30_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="mva" as="mva_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="mva_10" as="mva_10_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="mva_30" as="mva_30_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="summ" as="all_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="summ_10" as="all_10_[:kod_target]" if="[:kod_target]" />
      <column table="a" column="summ_30" as="all_30_[:kod_target]" if="[:kod_target]" />
    </part>
    <part id="ipr_fin_body-smet_cols" class="1" timestamp="27.02.2016 13:07:33" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="table_pfx" />
        <param name="title_pfx" />
      </params>
      <!--summ то что отночится к деньгам, all все включая квт  км шт-->
      <column table="ipr_fin_smet[:table_pfx]" column="summ_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС с  НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_10_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_30_nds_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_usr" agg="sum" group="sum" title="Сметная стоимость по УРС без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_10_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -10% без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_30_usr" agg="sum" group="sum" title="Сметная стоимость по УРС -30% без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_nds_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_nds_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_nds_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_psd" agg="sum" group="sum" title="Сметная стоимость по ПСД без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_psd_10" agg="sum" group="sum" title="Сметная стоимость по ПСД -10% без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_psd_30" agg="sum" group="sum" title="Сметная стоимость по ПСД -30% без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_nds_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД с НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="summ_utvpsd" agg="sum" group="sum" title="Утвержденная сметная стоимость по ПСД без НДС[:title_pfx]" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_psd" agg="sum" group="sum" title="Сметная величина по ПСД  без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_psd_10" agg="sum" group="sum" title="Сметная величина по ПСД -10% без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_psd_30" agg="sum" group="sum" title="Сметная величина по ПСД -30% без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_usr" agg="sum" group="sum" title="Сметная величина по УРС  без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_10_usr" agg="sum" group="sum" title="Сметная величина по УРС -10% без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_30_usr" agg="sum" group="sum" title="Сметная величина по УРС -30% без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="all_utvpsd" agg="sum" group="sum" title="Утвержденная величина по ПСД  без НДС[:title_pfx]" stored="0" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="mva_psd_30" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="mva_30_usr" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="kl_km_psd_30" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="kl_km_30_usr" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="vl_km_psd_30" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="vl_km_30_usr" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="prch_psd_30" agg="sum" group="sum" as="+[:table_pfx]" />
      <column table="ipr_fin_smet[:table_pfx]" column="prch_30_usr" agg="sum" group="sum" as="+[:table_pfx]" />
      <call function="nvl" as="summ_30_mva[:table_pfx]" title="Полная стоимость строительства (-30%) МВА [:title_pfx]" type="number">
        <column table="this" column="mva_psd_30[:table_pfx]" />
        <column table="this" column="mva_30_usr[:table_pfx]" />
      </call>
      <call function="nvl" as="summ_30_kl_km[:table_pfx]" title="Полная стоимость строительства (-30%) КЛ, км [:title_pfx]" type="number">
        <column table="this" column="kl_km_psd_30[:table_pfx]" />
        <column table="this" column="kl_km_30_usr[:table_pfx]" />
      </call>
      <call function="nvl" as="summ_30_vl_km[:table_pfx]" title="Полная стоимость строительства (-30%) ВЛ, км [:title_pfx]" type="number">
        <column table="this" column="vl_km_psd_30[:table_pfx]" />
        <column table="this" column="vl_km_30_usr[:table_pfx]" />
      </call>
      <call function="nvl" as="summ_30_prch[:table_pfx]" title="Полная стоимость строительства (-30%) Прочее [:title_pfx]" type="number">
        <column table="this" column="prch_psd_30[:table_pfx]" />
        <column table="this" column="prch_30_usr[:table_pfx]" />
      </call>
      <column table="this" column="summ_utvpsd[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_utvpsd_tit[:table_pfx]" />
      <column table="this" column="summ_psd[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_psd_tit[:table_pfx]" />
      <column table="this" column="summ_usr[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_usr_tit[:table_pfx]" />
      <column table="this" column="summ_psd_10[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_psd_10_tit[:table_pfx]" />
      <column table="this" column="summ_psd_30[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_psd_30_tit[:table_pfx]" />
      <column table="this" column="summ_10_usr[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_usr_10_tit[:table_pfx]" />
      <column table="this" column="summ_30_usr[:table_pfx]" stored="0" window="kod_doc_osn,kod_ipr_ext" as="summ_usr_30_tit[:table_pfx]" />
      <call function="smallest not 0" as="summ_k_rasp_psd_tit[:table_pfx]" stored="0">
        <column table="this" column="summ_utvpsd_tit[:table_pfx]" />
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_psd_10_tit[:table_pfx]" />
        <column table="this" column="summ_psd_30_tit[:table_pfx]" />
      </call>
      <call function="smallest not 0" as="summ_k_rasp_usr_tit[:table_pfx]" stored="0">
        <column table="this" column="summ_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr_10_tit[:table_pfx]" />
        <column table="this" column="summ_usr_30_tit[:table_pfx]" />
      </call>
      <call function="nvl" as="summ_k_rasp_all[:table_pfx]" stored="0">
        <column table="this" column="summ_k_rasp_psd_tit[:table_pfx]" />
        <column table="this" column="summ_k_rasp_usr_tit[:table_pfx]" />
      </call>
      <call function="decode" as="summ_k_rasp_psd[:table_pfx]" type="number" title="Сметная стоимость к распределению ПСД без НДС [:title_pfx]">
        <column table="this" column="summ_k_rasp_psd_tit[:table_pfx]" />
        <column table="this" column="summ_utvpsd_tit[:table_pfx]" />
        <column table="this" column="summ_utvpsd[:table_pfx]" />
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_psd[:table_pfx]" />
        <column table="this" column="summ_psd_10_tit[:table_pfx]" />
        <column table="this" column="summ_psd_10[:table_pfx]" />
        <column table="this" column="summ_psd_30_tit[:table_pfx]" />
        <column table="this" column="summ_psd_30[:table_pfx]" />
      </call>
      <call function="decode" as="summ_k_rasp_usr[:table_pfx]" type="number" title="Сметная стоимость к распределению УСР без НДС [:title_pfx]">
        <column table="this" column="summ_k_rasp_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr[:table_pfx]" />
        <column table="this" column="summ_usr_10_tit[:table_pfx]" />
        <column table="this" column="summ_10_usr[:table_pfx]" />
        <column table="this" column="summ_usr_30_tit[:table_pfx]" />
        <column table="this" column="summ_30_usr[:table_pfx]" />
      </call>
      <call function="decode" as="summ_k_rasp[:table_pfx]" type="number" title="Сметная стоимость к распределению без НДС [:title_pfx]">
        <column table="this" column="summ_k_rasp_all[:table_pfx]" />
        <column table="this" column="summ_utvpsd_tit[:table_pfx]" />
        <column table="this" column="summ_utvpsd[:table_pfx]" />
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_psd[:table_pfx]" />
        <column table="this" column="summ_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr[:table_pfx]" />
        <column table="this" column="summ_psd_10_tit[:table_pfx]" />
        <column table="this" column="summ_psd_10[:table_pfx]" />
        <column table="this" column="summ_psd_30_tit[:table_pfx]" />
        <column table="this" column="summ_psd_30[:table_pfx]" />
        <column table="this" column="summ_usr_10_tit[:table_pfx]" />
        <column table="this" column="summ_10_usr[:table_pfx]" />
        <column table="this" column="summ_usr_30_tit[:table_pfx]" />
        <column table="this" column="summ_30_usr[:table_pfx]" />
      </call>
      <!--
      <call function="smallest" as="summ_k_rasp_psd[:table_pfx]" stored="0">
        <column table="this" column="summ_psd_10_tit[:table_pfx]" />
        <column table="this" column="summ_psd_30_tit[:table_pfx]" />
      </call>
      <call function="smallest" as="summ_k_rasp_usr[:table_pfx]" stored="0">
        <column table="this" column="summ_usr_10_tit[:table_pfx]" />
        <column table="this" column="summ_usr_30_tit[:table_pfx]" />
      </call>
      <call function="smallest" as="summ_k_rasp_all[:table_pfx]" stored="0">
        <column table="this" column="summ_k_rasp_tit[:table_pfx]" />
        <column table="this" column="summ_k_rasp_psd[:table_pfx]" />
        <column table="this" column="summ_k_rasp_usr[:table_pfx]" />
      </call>
      <call function="decode" as="summ_k_rasp[:table_pfx]" type="number" stored="0" title="Сметная стоимость к распределению без НДС [:title_pfx]">
        <column table="this" column="summ_k_rasp_all[:table_pfx]" />
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_psd[:table_pfx]" />
        <column table="this" column="summ_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr[:table_pfx]" />
        <column table="this" column="summ_psd_10_tit[:table_pfx]" />
        <column table="this" column="summ_psd_10[:table_pfx]" />
        <column table="this" column="summ_psd_30_tit[:table_pfx]" />
        <column table="this" column="summ_psd_30[:table_pfx]" />
        <column table="this" column="summ_usr_10_tit[:table_pfx]" />
        <column table="this" column="summ_10_usr[:table_pfx]" />
        <column table="this" column="summ_usr_30_tit[:table_pfx]" />
        <column table="this" column="summ_30_usr[:table_pfx]" />
      </call>-->
      <call function="smallest" as="summ_k_rasp_tit[:table_pfx]" stored="0">
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_usr_tit[:table_pfx]" />
      </call>
      <call function="decode" as="summ_k_rasp_old[:table_pfx]" type="number" stored="0">
        <column table="this" column="summ_k_rasp_tit[:table_pfx]" />
        <column table="this" column="summ_psd_tit[:table_pfx]" />
        <column table="this" column="summ_psd[:table_pfx]" />
        <column table="this" column="summ_usr_tit[:table_pfx]" />
        <column table="this" column="summ_usr[:table_pfx]" />
      </call>
    </part>
    <part id="ipr_fin_phis_param-val" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="kod_phis_param" />
      </params>
      <call function="if" as="phis_val[:kod_phis_param]">
        <call function="in">
          <column table="phis_param" column="kod_phis_param" />
          <useparam name="kod_phis_param" />
        </call>
        <column table="phis_param" column="value" />
      </call>
    </part>
    <part id="ipr_fin_phis_param-val-num" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="kod_phis_param" />
      </params>
      <call function="cut_num" as="phis_val[:kod_phis_param]">
        <call function="if">
          <call function="in">
            <column table="phis_param" column="kod_phis_param" />
            <useparam name="kod_phis_param" />
          </call>
          <column table="phis_param" column="value" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_phis_param-val-dem-num" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_body.xml">
      <params>
        <param name="kod_phis_param" />
      </params>
      <call function="cut_num" as="phis_val_dem_[:kod_phis_param]">
        <call function="if">
          <call function="in">
            <column table="phis_param" column="kod_phis_param" />
            <useparam name="kod_phis_param" />
          </call>
          <column table="phis_param" column="value_dem" />
        </call>
      </call>
    </part>
    <part id="ipr_fin_head-select" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_head.xml">
      <call function="if" as="pr_last" type="number">
        <call function="is null">
          <column table="ipr_v_docs_last" column="inc" dgroup="max" />
        </call>
        <const>0</const>
        <const>1</const>
      </call>
      <!--<call function="over">
            <call function="max">
              <column table="a" column="kod_doc"/>
            </call>
            <call function="partition by">
              <column table="a" column="kod_vid_zatrat_titul"/>
            </call>
            <call function="order by rows * *">
              <column table="kod_doc" column="kod_vid_zatrat_titul"/>
            </call>
          </call>-->
    </part>
    <part id="ipr_fin_head-from" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_head.xml"></part>
    <part id="ipr_fin_head-links" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_fin_head.xml">
      <params>
        <param name="kod_doc_target" />
      </params>
      <!--<link name="kod_doc">
          <dlink name="ipr_doc_by_ipr">
            <dlink name="ipr_doc_by_ipr_by_t_last">
              <where>
                <call function="=">
                  <column table="ipr_doc_by_ipr_by_t_last" column="kod_doc_target"/>
                  <useparam name="kod_doc_target"/>
                </call>
              </where>
            </dlink>
          </dlink>
        </link>-->
      <dlink name="ipr_v_docs_last_[:kod_doc_target]" as="ipr_v_docs_last">
        <where>
          <call function="=">
            <column table="ipr_v_docs_last" column="inc" />
            <const>1</const>
          </call>
        </where>
      </dlink>
    </part>
    <part id="ipr_ipr_data-val_link" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_ipr_data.xml">
      <params>
        <param name="kod_phis_param" />
      </params>
      <dlink name="ipv_phys_param_values" as="val[:kod_phis_param]">
        <where>
          <call function="=">
            <column table="val[:kod_phis_param]" column="kod_phis_param" />
            <useparam name="kod_phis_param" />
          </call>
        </where>
      </dlink>
    </part>
    <part id="ips_doc_type-pr_target" class="1" timestamp="31.01.2017 16:43:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_doc_type.xml">
      <params>
        <param name="kod_doc_target" />
      </params>
      <call function="nvl" type="number">
        <query>
          <select>
            <call function="()" group="max" as="v">
              <const>1</const>
            </call>
          </select>
          <from>
            <query name="ips_doc_type_target" as="dtt" />
          </from>
          <where>
            <call function="and">
              <call function="=">
                <column table="dtt" column="kod_doc_target" />
                <useparam name="kod_doc_target" />
              </call>
              <call function="=">
                <column table="dtt" column="kod_doc_type" />
                <column table="a" column="kod_doc_type" />
              </call>
            </call>
          </where>
        </query>
        <const>0</const>
      </call>
    </part>
    <part id="isv_ad_evd_filial_list" timestamp="01.06.2020 18:49:34" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\isv_ad_evd_filial_list.xml">
      <const comment="исключаем все филиалы, кроме 7 шт, переписка с Михайловым от 25.05.2017 + c 30.03 новый филиал СПбВС (SD 46525)">(19, 20, 21, 22, 24, 26, 27, 609, 748, 1261)</const>
    </part>
  </parts>
  <views child-name="view" key-name="id">
    <view name="kod_titul_ip_changed_test_view" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_izmen.xml">
      select 9909 as kod_titul_ip from dual union
      select 8797 from dual union
      select 24133 from dual
    </view>
    <view name="ipr_pr_last_smet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_pr_last_smet.xml">
      select 1 as pr_last from dual union select 0  from dual
    </view>
    <view name="is_spr_name_template" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_template_contr_steps_val.xml">
      select 1 as kod_spr_name_template, 'Наименование этапов ЛЭ' as name from dual
      union select 2 , 'Наименование этапов Минэнерго' from dual
      union select 3 , 'Наименование этапов ОАО Россети' from dual
    </view>
    <view name="ipr_titul_gr_aip" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ipr_titul_ip.xml">
      select 0 as kod_aip,'Объекты капстроя ' as name from  dual  union
      select 1 ,'АИП'  from  dual
    </view>
    <view name="ips_doc_target_str" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_doc_targets.xml">
      select 'USR' as doc_target_str, 'УРС' as name from dual
      union  select 'PSD' , 'ССР'  from dual
      union  select 'PSD_10' , 'ССР -10%'  from dual
      union  select 'PSD_30' , 'ССР -30%'  from dual
      union  select 'UTVPSD' , 'ПСД'  from dual
    </view>
    <view name="ips_smet_structure_dop" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_smet_structure.xml">
      select 100 as kod_smet,'МВА' as name, null as kod_parent from  dual  union
      select 200 ,'ВЛ', null from  dual  union
      select 250 ,'КЛ', null from  dual  union
      select 300 ,'Прочие', null from  dual
    </view>
    <view name="ips_vid_zatrat_schet" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\ips_vid_zatrat.xml">
      select 1 as kod, '07' as name , 400 as ordr from dual
      union all
      select 2 as kod, '10.14+10.15' as name,500 from dual
      union all
      select 5 as kod, '08.05' as name,300 from dual
      union all
      select 4 as kod, '08.41' as name,200 from dual
      union all
      select 3 as kod, '08.03' as name,150 from dual
      union all
      select null as kod, null as name,110 from dual
    </view>
    <view name="is_ro_1c" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_ro.xml">
      SELECT a.kod_ro, MAX (TRUNC (b.dat_sys)) as dat_vigr_1c -- дата выгрузки из 1С
      FROM buh_akts b, buh_akt_vip_dog vv, is_sum_akts a
      WHERE b.kod = vv.kod_buh_akts
      AND vv.kod_vip_dog = a.kod_vip_dog
      AND a.kod_parent IS NULL
      group by a.kod_ro
    </view>
    <view name="is_spr_dirisp" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_spr_direct.xml">
      select 1 as kod_dirisp, 'Все' as name from dual
      union select 2 , 'Заказчик' from dual
      union select 3 , 'Исполнитель' from dual
    </view>
    <view name="is_dog_type_prizn" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml">
      select  1 as id , 'Расходные договоры' as name from dual
      union select  0  , 'Доходные договоры' from dual
      union select  2  , 'Договоры присоединения АДДТП' from dual
      union select  3  , 'Договоры присоединения ДД' from dual
      union select  6  , 'Доходно-расходные' from dual
      union select  7  , 'Прочие' from dual
    </view>
    <view name="is_dog_type_prizn_ls" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml">
      select  1 as id , 'Расходные договоры' as name from dual
      union select  0  , 'Доходные договоры' from dual
      union select  2  , 'Договоры присоединения' from dual
      
    </view>
    <view name="is_dog_kind_prizn" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\extension\is_status.xml">
      select  1 as id , 'Договор' as name from dual
      union select  2  , 'Доп.соглашение' from dual
      union select  3  , 'Заявка на стройку' from dual

    </view>
    <view name="isv_ad_everyday" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_everyday.xml">
      vdwh_isv_ad_everyday
    </view>
    <view name="isv_ad_everyday_vs1" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_ad_everyday_vs1.xml">
      vdwh_isv_ad_everyday_vs1
    </view>
    <view name="isv_slice_of_tdc_all" class="1" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\isv_slice_of_tdc_all.xml">
      vdwh_isv_slice_of_tdc_all
    </view>
  </views>
  <reports child-name="report" key-name="name" />
  <forms child-name="form" key-name="name" />
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name">
    <expression-package name="ipr" timestamp="23.08.2017 11:19:04" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call as="ipr_last_tit_doc" function="over" group="min" type="number">
        <params>
          <param name="kod_doc_type" />
        </params>
        <call function="last_value">
          <call function="if">
            <call function="=">
              <column table="ipr_kod_doc" column="kod_doc_type" />
              <useparam name="kod_doc_type" />
            </call>
            <fact column="ipr_kod_doc" />
          </call>
        </call>
        <call function="partition by">
          <column table="ipr_kod_titul_ip" column="kod_titul_ip" />
        </call>
        <call function="order by rows * *">
          <call function="asc nulls first">
            <call function="if">
              <call function="=">
                <column table="ipr_kod_doc" column="kod_doc_type" />
                <useparam name="kod_doc_type" />
              </call>
              <column table="ipr_kod_doc" column="doc_date_c" />
            </call>
          </call>
          <column table="ipr_kod_doc" column="kod_doc" />
        </call>
      </call>
      <call function="if" type="date" as="ipr_cstep_ep_dat_by_nums" group="max">
        <params>
          <param name="nums" />
        </params>
        <call function="in">
          <column table="ipr_kod_temp_csteps" column="abbr" />
          <useparam name="nums" />
        </call>
        <fact column="ipr_cstep_ep_dat_last" />
      </call>
      <call function="if" type="date" as="ipr_cstep_ef_dat_by_nums" group="max">
        <params>
          <param name="nums" />
        </params>
        <call function="in">
          <column table="ipr_kod_temp_csteps" column="abbr" />
          <useparam name="nums" />
        </call>
        <fact column="ipr_cstep_ef_dat_last" />
      </call>
      <call function="if" type="string" as="ipr_cstep_ef_cmnt_by_nums" group="max">
        <params>
          <param name="nums" />
        </params>
        <call function="in">
          <column table="ipr_kod_temp_csteps" column="abbr" />
          <useparam name="nums" />
        </call>
        <fact column="ipr_cstep_ep_comment_last" />
      </call>
      <call function="if" type="date" as="ipr_cstep_ef_dat_by_nums_on_dat" group="max">
        <params>
          <param name="nums" />
          <param name="dat" />
        </params>
        <call function="le">
          <fact column="ipr_cstep_ef_dat_by_nums">
            <withparams>
              <useparam name="nums" />
            </withparams>
          </fact>
          <useparam name="dat" />
        </call>
        <fact column="ipr_cstep_ef_dat_by_nums">
          <withparams>
            <useparam name="nums" />
          </withparams>
        </fact>
      </call>
      <call function="over" as="ipr_cstep_ef_dat_last" group="max">
        <call function="last_value">
          <fact column="ipr_cstep_ef_date" />
        </call>
        <call function="partition by">
          <column table="ipr_kod_titul_ip" column="kod_titul_ip" />
          <column table="ipr_kod_temp_csteps" column="abbr" />
        </call>
        <call function="order by rows * *">
          <column table="ipr_kod_doc_steps" column="doc_date" />
        </call>
      </call>
      <call function="over" as="ipr_cstep_ep_dat_last" group="max">
        <call function="last_value">
          <fact column="ipr_cstep_ep_date" />
        </call>
        <call function="partition by">
          <column table="ipr_kod_titul_ip" column="kod_titul_ip" />
          <column table="ipr_kod_temp_csteps" column="abbr" />
        </call>
        <call function="order by rows * *">
          <column table="ipr_kod_doc_steps" column="doc_date" />
        </call>
      </call>
      <call function="over" as="ipr_cstep_ep_comment_last" group="max" type="string">
        <call function="last_value">
          <fact column="ipr_cstep_cmnt_all" />
        </call>
        <call function="partition by">
          <column table="ipr_kod_titul_ip" column="kod_titul_ip" />
          <column table="ipr_kod_temp_csteps" column="abbr" />
        </call>
        <call function="order by rows * *">
          <column table="ipr_kod_doc_steps" column="doc_date" />
        </call>
      </call>
    </expression-package>
    <expression-package name="ipr_smet" timestamp="28.02.2016 02:30:14" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call as="ipr_smet_nds_utvpsd_tek" function="-nvl" group="sum">
        <fact column="ipr_smet_summ_nds_utvpsd_tek" />
        <fact column="ipr_smet_summ_utvpsd_tek" />
      </call>
      <call as="ipr_smet_nds_usr_tek" function="-nvl" group="sum">
        <fact column="ipr_smet_summ_nds_usr_tek" />
        <fact column="ipr_smet_summ_usr_tek" />
      </call>
    </expression-package>
    <expression-package name="ipr_fin" timestamp="03.04.2018 17:59:18" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call function="-nvl" as="ipr_kap_fact_sum_a" group="sum">
        <fact column="ipr_kap_fact_sum_nds_a" />
        <fact column="ipr_kap_fact_nds_a" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds_per" group="sum">
        <fact column="ipr_kap_fact_sum_per" />
        <fact column="ipr_kap_fact_nds_per" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds_pri" group="sum">
        <fact column="ipr_kap_fact_sum_pri" />
        <fact column="ipr_kap_fact_nds_pri" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds_pri_pr" group="sum">
        <fact column="ipr_kap_fact_sum_pri_pr" />
        <fact column="ipr_kap_fact_nds_pri_pr" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds_per_pr" group="sum">
        <fact column="ipr_kap_fact_sum_per_pr" />
        <fact column="ipr_kap_fact_nds_per_pr" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds_sp" group="sum">
        <fact column="ipr_kap_fact_sum_sp" />
        <fact column="ipr_kap_fact_nds_sp" />
      </call>
      <call function="-nvl" as="ipr_kap_fact_sum_pp" group="sum">
        <fact column="ipr_kap_fact_sum_pri" />
        <fact column="ipr_kap_fact_sum_per" />
      </call>
      <call function="if" as="ipr_kap_fact_sum_pp_tg" group="sum">
        <call function="=">
          <call function="ym2 god">
            <column table="ipr_ym_vozn" column="val" group="" />
          </call>
          <call function="ym2 god">
            <column table="ipr_ym" column="val" group="" />
          </call>
        </call>
        <fact column="ipr_kap_fact_sum_pp" />
      </call>
      <call function="+nvl" group="sum" title=" " as="ipr_kap_fact_sum">
        <fact column="ipr_kap_fact_sum_a" />
        <call function="-nvl">
          <fact column="ipr_kap_fact_sum_pri" />
          <fact column="ipr_kap_fact_sum_per" />
        </call>
      </call>
      <call function="+nvl" group="sum" as="ipr_kap_fact_sum_n" title="Без учета перебросок пр лет">
        <fact column="ipr_kap_fact_sum_a" />
        <fact column="ipr_kap_fact_sum_pp_tg" />
      </call>
      <call function="+nvl" as="ipr_kap_fact_sum_nds" group="sum">
        <fact column="ipr_kap_fact_sum_nds_a" />
        <call function="-nvl">
          <fact column="ipr_kap_fact_sum_nds_pri" />
          <fact column="ipr_kap_fact_sum_nds_per" />
        </call>
      </call>
      <call function="+nvl" as="ipr_kap_fact_nds" group="sum">
        <fact column="ipr_kap_fact_nds_a" />
        <call function="-nvl">
          <fact column="ipr_kap_fact_nds_pri" />
          <fact column="ipr_kap_fact_nds_per" />
        </call>
      </call>
      <call function="+nvl" as="ipr_fin_fact_sum_nds_a" group="sum">
        <fact column="ipr_fin_fact_sum_nds_b" />
        <fact column="ipr_kap_fact_sum_nds_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_nds_a" group="sum">
        <fact column="ipr_fin_fact_nds_b" />
        <fact column="ipr_kap_fact_nds_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_sum_nds_pri" group="sum">
        <fact column="ipr_fin_fact_sum_nds_pri_b" />
        <fact column="ipr_kap_fact_sum_nds_pri_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_nds_pri" group="sum">
        <fact column="ipr_fin_fact_nds_pri_b" />
        <fact column="ipr_kap_fact_nds_pri_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_sum_nds_per" group="sum">
        <fact column="ipr_fin_fact_sum_nds_per_b" />
        <fact column="ipr_kap_fact_sum_nds_per_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_nds_per" group="sum">
        <fact column="ipr_fin_fact_nds_per_b" />
        <fact column="ipr_kap_fact_nds_per_pr" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_sum_nds" group="sum">
        <fact column="ipr_fin_fact_sum_nds_a" />
        <call function="-nvl">
          <fact column="ipr_fin_fact_sum_nds_pri" />
          <fact column="ipr_fin_fact_sum_nds_per" />
        </call>
      </call>
      <call function="+nvl" as="ipr_fin_fact_nds" group="sum">
        <fact column="ipr_fin_fact_nds_a" />
        <call function="-nvl">
          <fact column="ipr_fin_fact_nds_pri" />
          <fact column="ipr_fin_fact_nds_per" />
        </call>
      </call>
      <call function="-nvl" as="ipr_fin_fact_sum" group="sum">
        <fact column="ipr_fin_fact_sum_nds" />
        <fact column="ipr_fin_fact_nds" />
      </call>
      <call function="+nvl" as="ipr_fin_fact_sum_nds_npr" group="sum">
        <fact column="ipr_fin_fact_sum_nds_b" />
        <call function="-nvl">
          <fact column="ipr_fin_fact_sum_nds_pri_b" />
          <fact column="ipr_fin_fact_sum_nds_per_b" />
        </call>
      </call>
      <call function="+nvl" as="ipr_fin_fact_nds_npr" group="sum">
        <fact column="ipr_fin_fact_nds_b" />
        <call function="-nvl">
          <fact column="ipr_fin_fact_nds_pri_b" />
          <fact column="ipr_fin_fact_nds_per_b" />
        </call>
      </call>
      <call function="-nvl" as="ipr_nzs_fact_sum" group="sum">
        <fact column="ipr_kap_fact_sum" />
        <fact column="ipr_kap_fact_sum_sp" />
        <fact column="ipr_vvd_fact_sum" />
      </call>
      <call function="-nvl" as="ipr_sld_fact_sum_nds" group="sum">
        <fact column="ipr_kap_fact_sum_nds" />
        <fact column="ipr_fin_fact_sum_nds" />
      </call>
      <call function="-nvl" as="ipr_sld_fact_sum" group="sum">
        <fact column="ipr_kap_fact_sum" />
        <fact column="ipr_fin_fact_sum" />
      </call>
    </expression-package>
    <expression-package name="ipr_test" timestamp="09.03.2017 21:40:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call as="ipr_test1" function="listagg" group="/*inner*/">
        <fact column="vr_sprav_klass_titul_abbr" />
        <const>'; '</const>
        <fact column="vr_sprav_klass_titul_abbr" />
      </call>
    </expression-package>
    <expression-package name="ipr_tree_struct" timestamp="14.03.2017 22:52:50" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call function="case" as="ipr_tree_struct_upd_vld" type="string" group="max">
        <call function="when">
          <call function="lt">
            <call function="nvl">
              <fact column="vr_tree_struct_date_upd" />
              <call function="nativity" />
            </call>
            <fact column="vr_tree_struct_date_mod" />
          </call>
          <const>'Настройки изменены. Требуется обновление'</const>
        </call>
        <call function="when">
          <call function="lt">
            <call function="nvl">
              <fact column="vr_tree_struct_date_upd" />
              <call function="nativity" />
            </call>
            <fact column="ipr_izmen_last_date" />
          </call>
          <const>'Данные изменены. Возможно требуется обновление.'</const>
        </call>
      </call>
    </expression-package>
    <expression-package name="ipr_tree_sprav" timestamp="24.03.2017 20:32:29" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <call function="case" as="ipr_tree_razdel_color" type="string" group="max">
        <call function="when">
          <call function="is null">
            <call function="over">
              <call function="max">
                <fact column="vr_tree_sprav_cnt" />
              </call>
              <call function="partition by">
                <column table="ipr_kod_tree" column="kod_tree" />
              </call>
            </call>
          </call>
          <const>'192,192,192'</const>
        </call>
      </call>
    </expression-package>
    <expression-package name="ipr_smet2" timestamp="24.05.2017 14:06:13" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr2.xml">
      <call function="over" as="ipr_smet_summ_utvpsd_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_utvpsd" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_10_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd_10" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_30_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd_30" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="smallest not 0" as="ipr_smet_summ_k_rasp_psd_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_psd_tit" />
        <fact column="ipr_smet_summ_psd_10_tit" />
        <fact column="ipr_smet_summ_psd_30_tit" />
        <fact column="ipr_smet_summ_utvpsd_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp_psd">
        <fact column="ipr_smet_summ_k_rasp_psd_tit" />
        <fact column="ipr_smet_summ_psd_tit" />
        <fact column="ipr_smet_summ_psd" />
        <fact column="ipr_smet_summ_psd_10_tit" />
        <fact column="ipr_smet_summ_psd_10" />
        <fact column="ipr_smet_summ_psd_30_tit" />
        <fact column="ipr_smet_summ_psd_30" />
        <fact column="ipr_smet_summ_utvpsd_tit" />
        <fact column="ipr_smet_summ_utvpsd" />
      </call>
      <call function="over" as="ipr_smet_summ_usr_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_usr" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_usr_10_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_10_usr" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_usr_30_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_30_usr" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="smallest not 0" as="ipr_smet_summ_k_rasp_usr_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_usr_tit" />
        <fact column="ipr_smet_summ_usr_10_tit" />
        <fact column="ipr_smet_summ_usr_30_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp_usr">
        <fact column="ipr_smet_summ_k_rasp_usr_tit" />
        <fact column="ipr_smet_summ_usr_tit" />
        <fact column="ipr_smet_summ_usr" />
        <fact column="ipr_smet_summ_usr_10_tit" />
        <fact column="ipr_smet_summ_10_usr" />
        <fact column="ipr_smet_summ_usr_30_tit" />
        <fact column="ipr_smet_summ_30_usr" />
      </call>
      <call function="nvl" as="ipr_smet_summ_k_rasp_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_k_rasp_psd_tit" />
        <fact column="ipr_smet_summ_k_rasp_usr_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp">
        <fact column="ipr_smet_summ_k_rasp_tit" />
        <fact column="ipr_smet_summ_utvpsd_tit" />
        <fact column="ipr_smet_summ_utvpsd" />
        <fact column="ipr_smet_summ_psd_tit" />
        <fact column="ipr_smet_summ_psd" />
        <fact column="ipr_smet_summ_usr_tit" />
        <fact column="ipr_smet_summ_usr" />
        <fact column="ipr_smet_summ_psd_10_tit" />
        <fact column="ipr_smet_summ_psd_10" />
        <fact column="ipr_smet_summ_psd_30_tit" />
        <fact column="ipr_smet_summ_psd_30" />
        <fact column="ipr_smet_summ_usr_10_tit" />
        <fact column="ipr_smet_summ_10_usr" />
        <fact column="ipr_smet_summ_usr_30_tit" />
        <fact column="ipr_smet_summ_30_usr" />
      </call>
      <call function="if" as="ipr_smet_summ_k_rasp_fnt" group="sum" type="number">
        <call function="!=0">
          <fact column="ipr_smet_summ_k_rasp_tit" />
        </call>
        <fact column="ipr_smet_summ_k_rasp" />
        <fact column="ipr_smet_summ_k_rasp_tek" />
      </call>
    </expression-package>
    <expression-package name="ipr_fin2" timestamp="15.08.2016 03:11:44" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr2.xml">
      <call function="if" as="ipr_sld_fact_sum_nds_on_ym" group="sum">
        <params>
          <param name="ym" />
        </params>
        <call function="le">
          <column table="ipr_ym" column="val" />
          <useparam name="ym" />
        </call>
        <fact column="ipr_sld_fact_sum_nds" />
      </call>
      <call function="if" as="ipr_kred_fact_sum_nds_on_ym" group="sum">
        <params>
          <param name="ym" />
        </params>
        <call function="gt">
          <call function="over">
            <call function="sum">
              <fact column="ipr_sld_fact_sum_nds_on_ym">
                <withparams>
                  <useparam name="ym" />
                </withparams>
              </fact>
            </call>
            <call function="partition by">
              <column table="ipr_kod_vip_dog" column="kod_vip_dog" />
              <column table="ipr_kod_titul_ip" column="kod_titul_ip" />
            </call>
          </call>
          <const>0</const>
        </call>
        <fact column="ipr_sld_fact_sum_nds_on_ym">
          <withparams>
            <useparam name="ym" />
          </withparams>
        </fact>
      </call>
    </expression-package>
    <expression-package name="ipr_smet2_tek" timestamp="24.05.2017 14:07:20" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr2.xml">
      <call function="over" as="ipr_smet_summ_utvpsd_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_utvpsd_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_10_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd_10_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_psd_30_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_psd_30_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="smallest not 0" as="ipr_smet_summ_k_rasp_psd_tek_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_psd_tek_tit" />
        <fact column="ipr_smet_summ_psd_10_tek_tit" />
        <fact column="ipr_smet_summ_psd_30_tek_tit" />
        <fact column="ipr_smet_summ_utvpsd_tek_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp_psd_tek">
        <fact column="ipr_smet_summ_k_rasp_psd_tek_tit" />
        <fact column="ipr_smet_summ_psd_tek_tit" />
        <fact column="ipr_smet_summ_psd_tek" />
        <fact column="ipr_smet_summ_psd_10_tek_tit" />
        <fact column="ipr_smet_summ_psd_10_tek" />
        <fact column="ipr_smet_summ_psd_30_tek_tit" />
        <fact column="ipr_smet_summ_psd_30_tek" />
        <fact column="ipr_smet_summ_utvpsd_tek_tit" />
        <fact column="ipr_smet_summ_utvpsd_tek" />
      </call>
      <call function="over" as="ipr_smet_summ_usr_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_usr_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_usr_10_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_10_usr_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="over" as="ipr_smet_summ_usr_30_tek_tit" group="sum">
        <call function="sum">
          <fact column="ipr_smet_summ_30_usr_tek" />
        </call>
        <call function="partition by">
          <column table="kod_ipr" column="kod_ipr" />
        </call>
      </call>
      <call function="smallest not 0" as="ipr_smet_summ_k_rasp_usr_tek_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_usr_tek_tit" />
        <fact column="ipr_smet_summ_usr_10_tek_tit" />
        <fact column="ipr_smet_summ_usr_30_tek_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp_usr_tek">
        <fact column="ipr_smet_summ_k_rasp_usr_tek_tit" />
        <fact column="ipr_smet_summ_usr_tek_tit" />
        <fact column="ipr_smet_summ_usr_tek" />
        <fact column="ipr_smet_summ_usr_10_tek_tit" />
        <fact column="ipr_smet_summ_10_usr_tek" />
        <fact column="ipr_smet_summ_usr_30_tek_tit" />
        <fact column="ipr_smet_summ_30_usr_tek" />
      </call>
      <call function="nvl" as="ipr_smet_summ_k_rasp_tek_tit" stored="0" group="sum">
        <fact column="ipr_smet_summ_k_rasp_psd_tek_tit" />
        <fact column="ipr_smet_summ_k_rasp_usr_tek_tit" />
      </call>
      <call function="decode" group="sum" as="ipr_smet_summ_k_rasp_tek">
        <fact column="ipr_smet_summ_k_rasp_tek_tit" />
        <fact column="ipr_smet_summ_utvpsd_tek_tit" />
        <fact column="ipr_smet_summ_utvpsd_tek" />
        <fact column="ipr_smet_summ_psd_tek_tit" />
        <fact column="ipr_smet_summ_psd_tek" />
        <fact column="ipr_smet_summ_usr_tek_tit" />
        <fact column="ipr_smet_summ_usr_tek" />
        <fact column="ipr_smet_summ_psd_10_tek_tit" />
        <fact column="ipr_smet_summ_psd_10_tek" />
        <fact column="ipr_smet_summ_psd_30_tek_tit" />
        <fact column="ipr_smet_summ_psd_30_tek" />
        <fact column="ipr_smet_summ_usr_10_tek_tit" />
        <fact column="ipr_smet_summ_10_usr_tek" />
        <fact column="ipr_smet_summ_usr_30_tek_tit" />
        <fact column="ipr_smet_summ_30_usr_tek" />
      </call>
    </expression-package>
    <expression-package name="kido" timestamp="21.10.2017 22:17:03" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.kido.xml">
      <call function="-nvl" as="kido_ob_nds_den" group="sum" comment="Остаток оплаты денежный с НДС">
        <fact column="id_dop_cont_contr_sum_m" />
        <fact column="c_opl_opl_nds_den" />
      </call>
      <call function="-nvl" as="kido_ob_nds_imuch" group="sum" comment="Остаток оплаты имущественный с НДС">
        <fact column="id_dop_cont_contr_sum_e" />
        <fact column="c_imuch_opl_nds" />
      </call>
      <call function="case" as="kido_c_akt_sum" group="sum" comment="Остаток оплаты имущественный с НДС" type="number">
        <call function="when">
          <call function="in">
            <column table="kido_kod_akt" column="vid_akt" />
            <call function="array">
              <const>0</const>
              <const>2</const>
            </call>
          </call>
          <fact column="c_akt_sum_akt" />
        </call>
        <call function="when">
          <call function="in">
            <column table="kido_kod_akt" column="vid_akt" />
            <call function="array">
              <const>1</const>
              <const>3</const>
            </call>
          </call>
          <fact column="c_akt_opl_opl" />
        </call>
      </call>
      <call function="case" as="kido_c_akt_sum_bn" group="sum" comment="Остаток оплаты имущественный с НДС" type="number">
        <call function="when">
          <call function="in">
            <column table="kido_kod_akt" column="vid_akt" />
            <call function="array">
              <const>1</const>
              <const>3</const>
            </call>
          </call>
          <fact column="c_akt_sum_akt_bn" />
        </call>
        <call function="when">
          <call function="in">
            <column table="kido_kod_akt" column="vid_akt" />
            <call function="array">
              <const>0</const>
              <const>2</const>
            </call>
          </call>
          <fact column="c_akt_opl_opl_bn" />
        </call>
      </call>
      <call function="if" as="kido_c_deb_nach_0" group="sum" comment="Остаток оплаты имущественный с НДС">
        <call function="in">
          <column table="kido_sf_vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="c_debet_nachisl" />
      </call>
      <call function="if" as="kido_c_deb_vsego_0" group="sum" comment="Остаток оплаты имущественный с НДС">
        <call function="in">
          <column table="kido_sf_vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="c_debet_vsego" />
      </call>
      <call function="-nvl" as="kido_ob_for_pros_dlg_bn" group="sum">
        <fact column="kido_c_deb_nach_0" />
        <fact column="c_opl_in_opl_bn" />
      </call>
      <call function="-nvl" as="kido_ob_for_pros_dlg" group="sum">
        <fact column="kido_c_deb_vsego_0" />
        <fact column="c_opl_in_oplf" />
      </call>
      <call function="if" as="kido_opl_va_0_bn" group="sum" comment="Остаток оплаты имущественный с НДС" type="number">
        <call function="and">
          <call function="is null">
            <column table="kido_kod_opl" column="kod_parent" />
          </call>
          <call function="or">
            <call function="=">
              <column table="kido_kod_opl" column="vid_pl" />
              <const>0</const>
            </call>
            <call function="and">
              <call function="=">
                <column table="kido_kod_opl" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="kido_kod_opl" column="kod_type_opl" />
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <fact column="c_opl_opl_bn" />
      </call>
      <call function="-nvl" as="kido_ob_tp_akt_kred_bn" group="sum">
        <fact column="kido_opl_va_0_bn" />
        <fact column="kido_c_akt_sum_bn" />
      </call>
    </expression-package>
  </expression-packages>
  <dimension-packages child-name="dimension-package" key-name="name">
    <dimension-package name="ipr" timestamp="04.09.2018 16:18:20" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <dimension class-type="is_reestr_44164" name="kod_reestr_44164" />
      <dimension class-type="cube_ipr_tit_smet" name="cube_ipr_tit_smet" />
      <dimension class-type="cube_ipr_dog_cost" name="cube_ipr_dog_cost" />
      <dimension class-type="ipr_vid_zatrat_titul" name="ipr_kod_vid_zt_tit" />
      <dimension class-type="ipr_vvod_fiz" name="ipr_vvod_fiz" />
      <dimension class-type="ips_razdel_ip" name="ipr_kod_razdel" />
      <dimension class-type="ips_krit_minenergo" name="ipr_kod_krit_minenergo" />
      <dimension class-type="ips_klass_titul" name="ipr_kod_klass_titul" />
      <dimension class-type="ipr_ipr_data" name="kod_ipr" />
      <dimension class-type="ipr_ipr_data_extra" name="kod_ipr_ext" />
      <dimension class-type="ipr_titul_ip" name="ipr_kod_titul_ip" />
      <dimension class-type="ipr_doc" name="ipr_kod_doc" />
      <dimension class-type="ipr_doc_main" name="ipr_kod_doc_main" />
      <dimension class-type="ipr_doc_vvod" name="ipr_kod_doc_vvod" />
      <dimension class-type="ipr_doc_steps" name="ipr_kod_doc_steps" />
      <dimension class-type="ipr_doc_smet" name="ipr_kod_doc_smet" />
      <dimension time-type="day" timeline="ipr_time" name="ipr_dat" />
      <dimension time-type="month2" timeline="ipr_time" name="ipr_ym" />
      <dimension time-type="month2" name="ipr_ym_vozn" />
      <dimension class-type="ipr_pr_last_smet" name="ipr_pr_last_smet" />
      <dimension class-type="ipr_contr_steps_val" name="ipr_kod_contr_steps_val" />
      <dimension class-type="ipr_template_contr_steps_val" name="ipr_kod_temp_csteps" />
      <dimension class-type="ips_smet_structure" name="ipr_kod_smet" />
      <dimension name="ipr_kod_smet_sub" class-type="ips_smet_struct_sub" />
      <dimension class-type="isv_ip_opl" name="ipr_kod_opl_period" />
      <dimension class-type="is_opl_period" name="ipr_kod_opl_per" />
      <dimension class-type="isv_ip_vip_dog" name="ipr_kod_vip_dog" />
      <dimension class-type="ips_vid_zatrat_schet" name="ipr_kod_schet" />
      <dimension name="ipr_sub_sch" time-type="string" />
      <dimension class-type="ipr_dogs" name="ipr_kod_ipr_dog" />
      <dimension class-type="ips_vid_zatrat" name="ipr_kod_zatrat" />
      <dimension class-type="ipr_tituls_objects" name="ipr_kod_tituls_objects" />
      <dimension name="ipr_kod_dog_i" class-type="ipr_dogs_i" />
      <dimension name="ipr_kod_dog" class-type="is_dogovor" />
      <dimension name="kod_report_dop" class-type="ipr_report_dop" />
      <dimension name="ipr_kod_tree" class-type="vr_tree" parent-field-name="kod_parent" />
      <dimension name="ipr_kod_ispolnit" class-type="is_spr_direct" />
      <dimension name="ipr_kod_titul_dc" class-type="ipr_titul_dop_contract" />
      <dimension class-type="ipr_hoz_sposob" name="ipr_kod_hoz_sposob" />
      <dimension class-type="ipr_vvod_fiz" name="ipr_kod_vvod_fiz" />
      <dimension class-type="ipr_sost_del" name="ipr_kod_sost_del" />
      <dimension name="ipr_filial_res_valid" time-type="number" />
      <dimension name="d_46432_num_ip" time-type="string" />
    </dimension-package>
    <dimension-package name="ipr_fbu" timestamp="17.10.2017 20:29:34" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <dimension class-type="ipr_fin_kap" name="ipr_kod_ipr_fin_kap" />
      <dimension class-type="ipr_fin_kap_fact_dog" name="ipr_kod_fact_kap" />
      <dimension class-type="ipr_fin_kap_fact_mto" name="ipr_kod_fact_kap_mto" />
      <dimension class-type="ipr_fin_kap_fact_mfr" name="ipr_kod_fact_kap_mfr" />
      <dimension class-type="ipr_fin_vvod_fact_dog" name="ipr_kod_fact_vvod" />
      <dimension class-type="ipr_fin_finplan_fact_dog" name="ipr_fin_finplan_fact_dog" />
      <dimension class-type="ipr_fin_finplan_fact_mfr" name="ipr_fin_finplan_fact_mfr" />
      <dimension class-type="ipr_fin_finplan_fact_mto" name="ipr_fin_finplan_fact_mto" />
      <dimension class-type="ipr_fin_kap_fact_dog_pr" name="ipr_fin_kap_fact_dog_pr" />
    </dimension-package>
    <dimension-package name="ipr_struct" timestamp="03.04.2017 00:07:35" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.ipr.xml">
      <dimension class-type="vr_tree_struct" name="ipr_kod_tree_struct" />
      <dimension class-type="vr_sprav" name="ipr_kod_sprav" />
      <dimension class-type="vr_sprav_data" name="ipr_kod_sprav_data" />
    </dimension-package>
    <dimension-package name="kido" timestamp="17.12.2018 15:14:06" file="sql.builder.templates\sql.builder\projects\ipr_scheme\qube\qube.kido.xml">
      <dimension name="is_period" class-type="is_period" />
      <dimension name="vc_num_z_vo" class-type="vc_num_z_vo" />
      <dimension name="vc_user_login_by_k" class-type="vc_user_login_by_k" />
      <dimension name="vc_user_login_by_z" class-type="vc_user_login_by_z" />
      <dimension name="vc_user_login" class-type="vc_user_login" />
      <dimension name="vc_ul_zayav" class-type="vc_ul_zayav" />
      <dimension name="vc_ul_kontakt" class-type="vc_ul_kontakt" />
      <dimension name="is_kontact" class-type="is_kontact" />
      <dimension name="c_zayav" class-type="c_zayav" />
      <dimension name="c_zayav_virtual" class-type="c_zayav_virtual" />
      <dimension class-type="qr_zpr" name="qr_zpr" />
      <dimension class-type="qr_list_zpr_abons" name="qr_list_zpr_abons" />
      <dimension name="is_vip_dog" class-type="is_vip_dog" />
      <dimension name="is_fin_doc" class-type="is_fin_doc" />
      <dimension class-type="is_spr_smet" name="is_spr_smet" />
      <dimension class-type="is_atp_dop_info" name="kod_atp_dop_info" />
      <dimension class-type="k_vid_real" name="kido_sf_vid_real" />
      <dimension class-type="is_dop_contract" name="kod_dop_contract" />
      <dimension class-type="c_opl" name="kido_kod_opl" />
      <dimension class-type="c_opl_in" name="kido_kod_opl_in" />
      <dimension class-type="c_debet" name="kido_kod_deb" />
      <dimension class-type="c_facvip" name="kido_kod_sf" />
      <dimension class-type="c_akt_opl" name="kido_kod_akt_opl" />
      <dimension class-type="c_imuch" name="kido_kod_imuch" />
      <dimension time-type="day" timeline="kido_time_opl" name="kido_dat_opl" />
      <dimension time-type="day" timeline="kido_time_dolg" name="kido_dat_dolg" />
      <dimension time-type="day" timeline="kido_sf_time_dolg" name="kido_sf_dat_dolg" />
      <dimension name="kido_kod_dop_contr_anl_gr" class-type="vr_dop_contr_anl_gr" />
      <dimension class-type="c_akt" name="kido_kod_akt" />
      <dimension class-type="c_dop_doc" name="kido_kod_dop_doc" />
      <dimension name="kido_kn_sert_pow" class-type="as_sert_power_dop_contract" />
      <dimension name="kido_e_code" class-type="is_creditors" />
      <dimension class-type="is_spr_fs" name="is_spr_fs" />
      <dimension name="kod_org_active" class-type="is_org_active" />
    </dimension-package>
  </dimension-packages>
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id" />
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>