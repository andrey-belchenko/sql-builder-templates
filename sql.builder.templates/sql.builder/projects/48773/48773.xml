<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-05-23T04:05:18.0171332+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="50060" is-report="1" title="Журнал поступивших в ПИО материалов для взыскания в судебном порядке" nogrid="1" order="pio_date" timestamp="30.10.2023 11:36:56" file="sql.builder.templates\sql.builder\projects\48773\all\50060.xml" haskeys="1">
      <params>
        <param name="dep" controlType="UIList" title="Отделение" timestamp="13.05.2019 13:13:44" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat" title="Отчет на дату" visible="1" mandatory="1" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата поступления с" name="dat_pio_min" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата поступления по" name="dat_pio_max" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="kod_emp_urist" title="Юрист" />
        <param name="kod_group_cust_parent" controlType="UIList" name-field-name="name" title="Группа потребителей" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param name="kod_group_cust_recursive" controlType="UIList" name-field-name="name" title="Подгруппа потребления" timestamp="11.03.2019 21:55:11" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param name="kod_group_cust_recursive_h" controlType="UIList" name-field-name="name" title="Подгруппа потребления вся" timestamp="11.03.2019 21:55:11" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" visible="0" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата подачи в суд заполнена" name="l_dat_sud" />
        <param name="arch" controlType="UIList" title="Активный/Архивный" timestamp="25.04.2020 16:51:06" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" default="arch" checked="1" />
      </params>
      <print-templates>
        <excel>
          <template name="50060.xlsx" title="Журнал поступивших в ПИО материалов для взыскания в судебном порядке" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <events>
        <useaction event-name="double-click" action-type="dynamic-form" call="ur_folders_main">
          <column table="this" column="kod_folders" />
        </useaction>
      </events>
      <content>
        <usefield field="asuse_dep" />
        <usefield field="cmn_date_cur" name="dat" title="Отчет на дату" visible="1" mandatory="1" />
        <usefield field="cmn_date" title="Дата поступления с" name="dat_pio_min">
          <defaultquery>
            <query name="start_of_year" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_date" title="Дата поступления по" name="dat_pio_max">
          <defaultquery>
            <query name="today" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" name="kod_emp_urist" type="number" title="Юрист">
          <listquery>
            <query name="kr_employee_urists">
              <withparams>
                <useparam name="dep" />
              </withparams>
            </query>
          </listquery>
        </usefield>
        <usefield field="asuse_kod_group_cust_parent" />
        <usefield field="asuse_kod_group_cust_recursive" />
        <usefield field="asuse_kod_group_cust_recursive" name="kod_group_cust_recursive_h" title="Подгруппа потребления вся" visible="0">
          <defaultquery>
            <query name="ks_group_cust_list_recursive">
              <withparams>
                <useparam name="kod_group_cust_parent" />
              </withparams>
            </query>
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" type="number" title="Дата подачи в суд заполнена" name="l_dat_sud">
          <listquery>
            <query name="yn" />
          </listquery>
        </usefield>
        <usefield name="arch" field="asuse_prizn_arch_folder_all" title="Активный/Архивный" default="arch" checked="1" />
      </content>
      <select>
        <call function="rownum" key="1" as="id" />
        <column table="kod_folders" column="kod_folders" as="kod_folders" />
        <column table="kod_pretenz" column="kod_pretenz" as="kod_pretenz" />
        <column table="kod_dep" column="sname" as="name_podr" />
        <column table="kod_pretenz" column="pio_date" title="Дата поступления материалов в ПИО" as="pio_date" />
        <column table="kod_pretenz" column="num_sz" title="Номер с/з филиала" as="num_sz" />
        <column table="kodp" column="name" as="name" />
        <column table="kod_dog" column="ndog" as="kr_dog_name" title="№ договора" />
        <call as="ur_dp_sum_osn" type="number" title="Основной долг, руб." function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_pretenz_vvod_sum_osn" />
          <fact column="ur_dp_sum_osn" as="" type="" />
        </call>
        <call function="ym to char" title="Период задолженности с" as="ur_dogplat_ym_min">
          <call type="" function="if">
            <call function="=1">
              <column table="kod_folders" column="vvod" />
            </call>
            <column table="kod_pretenz" column="vvod_per_s" />
            <fact column="ur_dogplat_ym_min" format="F2" as="" type="" />
          </call>
        </call>
        <call function="ym to char" as="ur_dogplat_ym_max" title="Период задолженности по">
          <call type="" function="if">
            <call function="=1">
              <column table="kod_folders" column="vvod" />
            </call>
            <column table="kod_pretenz" column="vvod_per_po" />
            <fact column="ur_dogplat_ym_max" format="F2" as="" type="" />
          </call>
        </call>
        <call as="ur_dp_sum_peni" type="number" title="Проценты/ пени, руб." function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_pretenz_vvod_sum_peni" as="" type="" />
          <fact column="ur_dp_sum_peni" as="" type="" />
        </call>
        <call as="peni_period_str" type="string" title="Период пени" function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="pretenz_peni_period_str" />
          <fact column="peni_period_str" as="" type="" />
        </call>
        <column table="kod_pretenz" column="ogr" title="Расходы за отключения/подключения, руб." as="ogr" />
        <call function="+" as="total_debt" title="Общая сумма иска" type="number">
          <column column="ur_dp_sum_peni" table="this" />
          <column column="ur_dp_sum_osn" table="this" />
          <column column="ogr" table="this" />
        </call>
        <column table="kod_pretenz" column="dat_doc" title="Дата направления претензии" as="dat_doc" />
        <column table="kod_pretenz" column="dat_do" title="Дата истечения претензионного срока" as="dat_do" />
        <column table="kod_emp" column="fio" as="pio_fio" />
        <column table="kod_pretenz" column="prim" as="prim" />
        <column table="kod_mat" column="dat_doc" title="Дата подачи иска в суд" as="dat_sud" />
      </select>
      <from>
        <qube>
          <link name="kod_pretenz">
            <link name="kod_folders">
              <link name="kod_dep" />
              <link name="kodp" />
            </link>
            <link name="kod_emp" />
            <link name="kod_mat" />
          </link>
          <link name="kod_dog" />
          <where>
            <call function="and">
              <call function="le">
                <column table="kod_pretenz" column="dat_doc" />
                <useparam name="dat" />
              </call>
              <call function="in" optional="1">
                <column column="kodp" table="kod_dep" />
                <useparam name="dep" />
              </call>
              <call function="is not null">
                <column table="kod_pretenz" column="pio_date" />
              </call>
              <call function="or" optional="1">
                <call function="and">
                  <call function="in">
                    <const comment="Активный">1</const>
                    <useparam name="arch" />
                  </call>
                  <call function="is null">
                    <column table="kod_pretenz" column="dat_arh" />
                  </call>
                  <call function="is null">
                    <column table="kod_folders" column="dat_finish" />
                  </call>
                </call>
                <call function="and">
                  <call function="in">
                    <const comment="Архивный">0</const>
                    <useparam name="arch" />
                  </call>
                  <call type="" function="or">
                    <call function="is not null">
                      <column table="kod_folders" column="dat_finish" />
                    </call>
                    <call function="is not null">
                      <column table="kod_pretenz" column="dat_finish" />
                    </call>
                  </call>
                </call>
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="!=">
          <call function="nvl0">
            <column table="this" column="total_debt" />
          </call>
          <const type="number">0</const>
        </call>
        <call function="le" optional="1">
          <column table="this" column="pio_date" />
          <useparam name="dat_pio_max" />
        </call>
        <call function="ge" optional="1">
          <column table="this" column="pio_date" />
          <useparam name="dat_pio_min" />
        </call>
        <call function="in" optional="1">
          <column table="kod_pretenz" column="kod_emp" />
          <useparam name="kod_emp_urist" />
        </call>
        <call function="in" optional="1">
          <column column="kod_group_cust" table="kod_dog" />
          <useparam name="kod_group_cust_recursive" />
        </call>
        <call function="or" optional="1">
          <call function="in" optional="1">
            <column column="kod_group_cust" table="kod_dog" />
            <useparam name="kod_group_cust_recursive_h" />
          </call>
          <call function="in" optional="1">
            <column column="kod_group_cust" table="kod_dog" />
            <useparam name="kod_group_cust_parent" />
          </call>
        </call>
        <call function="in" optional="1">
          <call function="if">
            <call function="is null">
              <column table="kod_mat" column="dat_doc" />
            </call>
            <const>0</const>
            <const>1</const>
          </call>
          <useparam name="l_dat_sud" />
        </call>
      </where>
      <order>
        <column column="pio_date" />
      </order>
    </query>
    <query name="50060_test" timestamp="11.03.2019 16:36:37" is-report="1" title="Журнал поступивших в ПИО материалов для взыскания в судебном порядке" nogrid="1" order="pio_date" visible="0" file="sql.builder.templates\sql.builder\projects\48773\all\50060.xml" haskeys="1">
      <params>
        <param name="dep" controlType="UIList" title="Отделение" timestamp="13.05.2019 13:13:44" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat" title="Отчет на дату" visible="1" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата поступления с" name="dat_pio_min" />
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата поступления по" name="dat_pio_max" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="kod_emp_urist" title="Юрист" />
        <param name="kod_group_cust_parent" controlType="UIList" name-field-name="name" title="Группа потребителей" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param name="kod_group_cust" controlType="UIList" name-field-name="name" title="Подгруппа потребления" timestamp="18.11.2016 16:28:06" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Дата подачи в суд заполнена" name="l_dat_sud" />
      </params>
      <print-templates>
        <excel>
          <template name="50060.xlsx" title="Журнал поступивших в ПИО материалов для взыскания в судебном порядке" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <events>
        <useaction event-name="double-click" action-type="dynamic-form" call="ur_folders_main">
          <column table="this" column="kod_folders" />
        </useaction>
      </events>
      <content>
        <usefield field="asuse_dep" />
        <usefield field="cmn_date_cur" name="dat" title="Отчет на дату" visible="1" />
        <usefield field="cmn_date" title="Дата поступления с" name="dat_pio_min">
          <defaultquery>
            <query name="start_of_year" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_date" title="Дата поступления по" name="dat_pio_max">
          <defaultquery>
            <query name="today" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" name="kod_emp_urist" type="number" title="Юрист">
          <listquery>
            <query name="kr_employee_urists_singl_dep" />
          </listquery>
        </usefield>
        <usefield field="asuse_kod_group_cust_parent" />
        <usefield field="asuse_kod_group_cust" />
        <usefield field="cmn_list" type="number" title="Дата подачи в суд заполнена" name="l_dat_sud">
          <listquery>
            <query name="yn" />
          </listquery>
        </usefield>
      </content>
      <select>
        <call function="rownum" key="1" as="id" />
        <column table="kod_folders" column="kod_folders" as="kod_folders" />
        <column table="kod_pretenz" column="kod_pretenz" as="kod_pretenz" />
        <column table="kod_dep" column="sname" as="name_podr" />
        <column table="kod_pretenz" column="pio_date" title="Дата поступления материалов в ПИО" as="pio_date" />
        <column table="kod_pretenz" column="num_sz" title="Номер с/з филиала" as="num_sz" />
        <column table="kodp" column="name" as="name" />
        <column table="kod_dog" column="ndog" as="kr_dog_name" title="№ договора" />
        <fact column="ur_dp_sum_osn" title="Основной долг, руб." as="ur_dp_sum_osn" is-fact-use="1" />
        <call function="ym to char" title="Период задолженности с" as="ur_dogplat_ym_min">
          <fact column="ur_dogplat_ym_min" format="F2" />
        </call>
        <call function="ym to char" as="ur_dogplat_ym_max" title="Период задолженности по">
          <fact column="ur_dogplat_ym_max" format="F2" />
        </call>
        <fact column="ur_dp_sum_peni" title="Проценты/ пени, руб." as="ur_dp_sum_peni" is-fact-use="1" />
        <fact column="peni_period_str" title="Период пени" as="peni_period_str" is-fact-use="1" />
        <column table="kod_pretenz" column="ogr" title="Расходы за отключения/подключения, руб." as="ogr" />
        <call function="+" as="total_debt" title="Общая сумма иска" type="number">
          <fact column="ur_dp_sum_osn" title="Основной долг, руб." />
          <fact column="ur_dp_sum_peni" title="Проценты/ пени, руб." />
          <column column="ogr" title="Расходы за отключения/подключения, руб." />
        </call>
        <column table="kod_pretenz" column="dat_doc" title="Дата направления претензии" as="dat_doc" />
        <column table="kod_pretenz" column="dat_do" title="Дата истечения претензионного срока" as="dat_do" />
        <column table="kod_emp" column="fio" as="pio_fio" />
        <column table="kod_pretenz" column="prim" as="prim" />
        <column table="kod_mat" column="dat_doc" title="Дата подачи иска в суд" as="dat_sud" />
      </select>
      <from>
        <qube>
          <link name="kod_pretenz">
            <link name="kod_folders">
              <link name="kod_dep" />
              <link name="kodp" />
            </link>
            <link name="kod_emp" />
            <link name="kod_mat" />
          </link>
          <link name="kod_dog" />
          <where>
            <call function="and">
              <call function="le">
                <column table="kod_pretenz" column="dat_doc" />
                <useparam name="dat" />
              </call>
              <call function="gt">
                <call function="earliest">
                  <column table="kod_pretenz" column="dat_arh" />
                  <call function="doomsday" />
                </call>
                <useparam name="dat" />
              </call>
              <call function="gt">
                <call function="earliest">
                  <column table="kod_folders" column="dat_finish" />
                  <call function="doomsday" />
                </call>
                <useparam name="dat" />
              </call>
              <call function="in" optional="1">
                <column column="kodp" table="kod_dep" />
                <useparam name="dep" />
              </call>
              <call function="is not null">
                <column table="kod_pretenz" column="pio_date" />
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="!=">
          <call function="nvl0">
            <column table="this" column="total_debt" />
          </call>
          <const type="number">0</const>
        </call>
        <call function="le" optional="1">
          <column table="this" column="pio_date" />
          <useparam name="dat_pio_max" />
        </call>
        <call function="ge" optional="1">
          <column table="this" column="pio_date" />
          <useparam name="dat_pio_min" />
        </call>
        <call function="=" optional="1">
          <column table="kod_folders" column="kod_emp" />
          <useparam name="kod_emp_urist" />
        </call>
        <call function="=" optional="1">
          <column table="kod_dog" column="kod_group_cust" />
          <useparam name="kod_group_cust" />
        </call>
        <call function="=" optional="1">
          <call function="nvl">
            <column table="kod_dog" column="kod_gr_parent" />
            <column table="kod_dog" column="kod_group_cust" />
          </call>
          <useparam name="kod_group_cust_parent" />
        </call>
        <call function="in" optional="1">
          <call function="if">
            <call function="is null">
              <column table="kod_mat" column="dat_doc" />
            </call>
            <const>0</const>
            <const>1</const>
          </call>
          <useparam name="l_dat_sud" />
        </call>
      </where>
      <order>
        <column column="pio_date" />
      </order>
    </query>
    <query name="48773-dog" timestamp="24.04.2020 20:44:09" order="dep_name,name,ndog" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <call function="distinct" as="kod_dog" key="1">
          <column table="a" column="kod_dog" />
        </call>
        <column table="a" column="dep_name" title="Отделение" as="dep_name" />
        <column table="a" column="name" as="name" />
        <column table="a" column="ndog" as="ndog" />
      </select>
      <from>
        <query name="48773-pre" as="a">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
      </from>
      <order>
        <column column="dep_name" />
        <column column="name" />
        <column column="ndog" />
      </order>
    </query>
    <query name="48773-p1" timestamp="24.04.2020 20:29:53" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="1" />
        <column table="a" column="kod_dog" as="kod_dog" key="0" />
        <column table="a" column="dolg" as="dolg" key="0" is-fact-use="1" />
        <column table="a" column="period" as="period" key="0" is-fact-use="1" />
        <column table="a" column="dat_id" as="dat_id" key="0" is-fact-use="1" />
        <column table="a" column="isp_info" as="isp_info" key="0" />
        <column table="a" column="num_id" as="num_id" key="0" is-fact-use="1" />
        <call function="row_number" as="sf_num_in_id" key="0">
          <call function="partition by">
            <column table="a" column="num_id" is-fact-use="1" />
            <column table="a" column="kod_dog" />
          </call>
          <call function="order by simple">
            <column table="a" column="kod_sf" />
          </call>
        </call>
      </select>
      <from>
        <query name="48773-pre" as="a">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>7</const>
          </call>
          <call function="le">
            <column table="a" column="dat_entry" />
            <useparam name="dat" />
          </call>
        </call>
      </where>
    </query>
    <query name="48773-p2" timestamp="24.04.2020 20:29:53" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="1" />
        <column table="a" column="kod_dog" as="kod_dog" key="0" />
        <column table="a" column="dolg" as="dolg" key="0" is-fact-use="1" />
        <column table="a" column="dat_id" as="dat_id" key="0" is-fact-use="1" />
        <column table="a" column="isp_info" as="isp_info" key="0" />
        <column table="a" column="num_id" as="num_id" key="0" is-fact-use="1" />
        <call function="row_number" as="sf_num_in_id" key="0">
          <call function="partition by">
            <column table="a" column="num_id" is-fact-use="1" />
            <column table="a" column="kod_dog" />
          </call>
          <call function="order by simple">
            <column table="a" column="kod_sf" />
          </call>
        </call>
      </select>
      <from>
        <query name="48773-pre" as="a">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>9</const>
          </call>
          <call function="le">
            <column table="a" column="dat_entry" />
            <useparam name="dat" />
          </call>
        </call>
      </where>
    </query>
    <query name="48773-p3" timestamp="24.04.2020 20:46:46" order="dat_sf" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="1" />
        <column table="a" column="kod_dog" as="kod_dog" key="0" />
        <column table="a" column="dolg" as="dolg" key="0" is-fact-use="1" />
        <column table="a" column="period" as="period" key="0" is-fact-use="1" />
        <column table="a" column="dat_sf" title="Принятое решение" as="dat_sf" key="0" />
        <column table="a" column="dat_pret" as="dat_pret" key="0" />
        <column table="a" column="dat_pio" title="Дата поступления материалов в ПИО" as="dat_pio" key="0" is-fact-use="1" />
        <column table="a" column="dat_sud" title="Дата подачи иска" as="dat_sud" key="0" is-fact-use="1" />
        <column table="a" column="tp_ras" title="Порядок рассмотрения" as="tp_ras" key="0" is-fact-use="1" />
        <column table="a" column="dat_ras_apr" as="dat_ras_apr" key="0" is-fact-use="1" />
        <column table="a" column="dat_sud_akt" title="Дата судебного акта" as="dat_sud_akt" key="0" is-fact-use="1" />
      </select>
      <from>
        <query name="48773-pre" as="a">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>7</const>
          </call>
          <call function="or">
            <call function="is null">
              <column table="a" column="dat_entry" />
            </call>
            <call function="gt">
              <column table="a" column="dat_entry" />
              <useparam name="dat" />
            </call>
          </call>
          <call function="=">
            <call function="nvl0">
              <column table="a" column="prizn_konv" />
            </call>
            <const>0</const>
          </call>
        </call>
      </where>
      <order>
        <column column="dat_sf" />
      </order>
    </query>
    <query name="48773-pre" timestamp="24.04.2020 19:09:33" materialize="1" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="kod_sf" column="kod_sf" key="1" as="kod_sf" />
        <column table="kod_dog" column="kod_dog" as="kod_dog" />
        <column table="dep" column="sname" as="dep_name" />
        <column table="kodp" column="name" as="name" />
        <column table="kod_dog" column="ndog" as="ndog" />
        <column table="kod_sf" column="dat_sf" as="dat_sf" />
        <column table="kod_sf" column="dat_sf" as="dat_pret" title="Дата направления претензии" />
        <column table="kod_sf" column="vid_real" as="vid_real" />
        <fact column="ur_isp_dat_doc" as="dat_id" is-fact-use="1" />
        <fact column="ur_isp_info" as="num_id" is-fact-use="1" />
        <fact column="fin_ul_ob" table="sf" as="dolg" is-fact-use="1" />
        <fact column="peni_period_str" as="period" is-fact-use="1" />
        <fact column="ur_hist_mat_dec_dat_entry" as="dat_entry" is-fact-use="1" />
        <fact column="ur_dogplat_prizn_konv" as="prizn_konv" is-fact-use="1" />
        <fact column="ur_pretenz_pio_date" as="dat_pio" is-fact-use="1" />
        <fact column="ur_mat_pp_dat_doc" as="dat_sud" is-fact-use="1" />
        <fact column="ur_hist_mat_dec_dat_resh" as="dat_sud_akt" is-fact-use="1" />
        <fact column="ur_mat_pp_tp_ras_name" as="tp_ras" is-fact-use="1" />
        <fact column="ur_mat_pp_dt_ras_apr" as="dat_ras_apr" is-fact-use="1" />
        <column as="isp_info" column="info" table="i" title="ИД на исполнении в" />
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kod_dog">
            <link name="kodp" />
            <link name="dep" />
          </link>
          <link name="kod_sf" />
          <dimset as="sf">
            <link name="dat" only-for-cond="1" />
            <where>
              <call function="and">
                <call function="le">
                  <column table="dat" column="val" />
                  <useparam name="dat" />
                </call>
              </call>
            </where>
          </dimset>
          <where>
            <call function="and">
              <call function="in">
                <column table="kod_sf" column="vid_real" />
                <call function="array">
                  <const>7</const>
                  <const>9</const>
                </call>
              </call>
              <call function="ge">
                <column table="kod_sf" column="dat_sf" />
                <useparam name="dat_beg" />
              </call>
              <call function="in" optional="1">
                <column table="dep" column="kodp" />
                <useparam name="dep" />
              </call>
            </call>
          </where>
        </qube>
        <query as="i" join="left outer" name="48773-isp_info" dname="48773-pre">
          <call function="=">
            <column column="kod_sf" table="this" />
            <column column="kod_sf" table="i" />
          </call>
        </query>
        <query as="ii" join="left outer" name="48773-kod_sf_arch" dname="48773-pre">
          <call function="=">
            <column column="kod_sf" table="this" />
            <column column="kod_sf_arch" table="ii" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="or">
            <call function="=">
              <column table="kod_sf" column="vid_real" />
              <const>7</const>
            </call>
            <call function="is not null">
              <column table="this" column="dat_entry" />
            </call>
          </call>
          <call function="!=0">
            <column table="this" column="dolg" />
          </call>
          <call function="or" optional="1">
            <call function="and">
              <call function="in">
                <const>0</const>
                <useparam name="arch" />
              </call>
              <call function="is not null">
                <column table="ii" column="kod_sf_arch" />
              </call>
            </call>
            <call function="and">
              <call function="in">
                <const>1</const>
                <useparam name="arch" />
              </call>
              <call function="is null">
                <column table="ii" column="kod_sf_arch" />
              </call>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="48773-isp_info0-old" timestamp="26.03.2019 17:36:22" comment="deprecated" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <call function="coalesce" as="dat" type="date">
          <column table="kod_kazn" column="dat_podachi" />
          <column table="kod_mat_isp" column="dat_podachi" />
          <column table="kod_inkasso" column="dat_podachi" />
        </call>
        <call function="coalesce" as="name" type="string">
          <column table="kod_dog_kazn" column="name" />
          <column table="kod_ssp" column="name" />
          <column table="kodb" column="name" />
        </call>
        <call function="over" as="info">
          <call function="last_value">
            <column table="this" column="name" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_sf" />
          </call>
          <call function="order by rows * *">
            <column table="this" column="dat" />
          </call>
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kod_sf" all-rows="1" />
          <link name="kod_kazn">
            <link name="kod_dog_kazn" />
          </link>
          <link name="kod_mat_isp">
            <link name="kod_ssp" />
          </link>
          <link name="kod_inkasso">
            <link name="kodb" />
          </link>
          <where>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>7</const>
                <const>9</const>
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="is not null">
          <column table="kod_kazn" column="kod_kazn" />
          <column table="kod_mat_isp" column="kod_mat_isp" />
          <column table="kod_inkasso" column="kod_inkasso" />
        </call>
      </where>
    </query>
    <query name="48773-isp_info" timestamp="26.03.2019 17:36:59" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="a" column="kod_sf" group="1" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="info" group="max" as="info" key="0" />
      </select>
      <from>
        <query as="a" name="48773-isp_info0">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="48773-isp_info0" timestamp="23.04.2020 21:20:16" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <call function="greatest" as="dat" type="date">
          <call function="nvl">
            <column table="kod_inkasso" column="dat_podachi" />
            <const>to_date('01/01/1970','mm/dd/yyyy')</const>
          </call>
          <call function="nvl">
            <column table="kod_mat_isp" column="dat_podachi" />
            <const>to_date('01/01/1970','mm/dd/yyyy')</const>
          </call>
          <call function="nvl">
            <column table="kod_kazn" column="dat_podachi" />
            <const>to_date('01/01/1970','mm/dd/yyyy')</const>
          </call>
          <call function="nvl">
            <column table="kod_isp_other" column="dat_event" />
            <const>to_date('01/01/1970','mm/dd/yyyy')</const>
          </call>
        </call>
        <call function="case" as="name" type="string">
          <call function="when">
            <call function="=">
              <column table="this" column="dat" />
              <column table="kod_isp_other" column="dat_event" />
            </call>
            <column table="kod_isp_other" column="name" />
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="dat" />
              <column table="kod_inkasso" column="dat_podachi" />
            </call>
            <column table="kodb" column="name" />
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="dat" />
              <column table="kod_kazn" column="dat_podachi" />
            </call>
            <column table="kod_dog_kazn" column="name" />
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="dat" />
              <column table="kod_mat_isp" column="dat_podachi" />
            </call>
            <column table="kod_ssp" column="name" />
          </call>
          <call function="else">
            <call function="coalesce" type="string">
              <column table="kod_dog_kazn" column="name" />
              <column table="kod_ssp" column="name" />
              <column table="kodb" column="name" />
              <column table="kod_isp_other" column="name" />
            </call>
          </call>
        </call>
        <call function="over" as="info" type="string">
          <call function="last_value">
            <column table="this" column="name" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_sf" />
          </call>
          <call function="order by rows * *">
            <column table="this" column="dat" />
          </call>
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kod_sf" all-rows="1" />
          <link name="kod_kazn">
            <link name="kod_dog_kazn" />
          </link>
          <link name="kod_mat_isp">
            <link name="kod_ssp" />
          </link>
          <link name="kod_inkasso">
            <link name="kodb" />
          </link>
          <link name="kod_isp_other" />
          <where>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>7</const>
                <const>9</const>
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="is not null">
          <column table="kod_kazn" column="kod_kazn" />
          <column table="kod_mat_isp" column="kod_mat_isp" />
          <column table="kod_inkasso" column="kod_inkasso" />
          <column table="kod_isp_other" column="kod_isp_other" />
        </call>
      </where>
    </query>
    <query name="48773-kod_sf_arch" timestamp="14.08.2019 20:04:39" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <select>
        <call as="kod_sf_arch" function="nvl" group="1" key="1" fixed="1">
          <column column="kod_sf" table="a" />
          <column column="kod_sf_dp" table="a" />
        </call>
      </select>
      <from>
        <query name="ur_dogplat" as="a" />
        <query name="ur_folders" as="kod_folders" join="left outer" dname="48773-kod_sf_arch" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query as="kod_mat" join="left outer" name="ur_mat" dname="48773-kod_sf_arch" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query join="left outer" name="ur_hist_mat" as="kod_hist_mat" dname="48773-kod_sf_arch" title="История рассмотрения">
          <call function="=">
            <column column="kod_mat" table="kod_mat" />
            <column table="kod_hist_mat" column="kod_mat" />
          </call>
        </query>
        <query join="left outer" name="ur_isp" as="kod_isp" dname="48773-kod_sf_arch" title="Исполнительный лист">
          <call function="=">
            <column table="kod_isp" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="or">
            <call function="is not null">
              <column table="kod_folders" column="dat_finish" />
            </call>
            <call function="is not null">
              <column table="kod_mat" column="dat_arh" />
            </call>
            <call function="is not null">
              <column table="kod_isp" column="dat_arh" />
            </call>
          </call>
          <call function="or">
            <call function="is not null">
              <column table="a" column="kod_sf" />
            </call>
            <call function="is not null">
              <column table="a" column="kod_sf_dp" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="48773-p12" timestamp="24.04.2020 20:50:33" order="p_dat_id,gp_dat_id" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml" haskeys="1">
      <params>
        <param name="dat_beg" type="date">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" />
        <param name="arch" type="array" />
      </params>
      <select>
        <call function="nvl" as="pkey" key="1">
          <column table="a" column="kod_sf" />
          <column table="b" column="kod_sf" />
        </call>
        <call function="nvl" as="kod_dog">
          <column table="a" column="kod_dog" />
          <column table="b" column="kod_dog" />
        </call>
        <column table="a" column="kod_sf" as="p_kod_sf" />
        <column table="a" column="kod_dog" as="p_kod_dog" reference="48773-p2" refcol="kod_dog" />
        <column table="a" column="dolg" as="p_dolg" is-fact-use="1" />
        <column table="a" column="period" as="p_period" is-fact-use="1" />
        <column table="a" column="dat_id" as="p_dat_id" is-fact-use="1" />
        <column table="a" column="isp_info" as="p_isp_info" />
        <column table="b" column="kod_sf" as="gp_kod_sf" />
        <column table="b" column="kod_dog" as="gp_kod_dog" reference="48773-p2" refcol="kod_dog" />
        <column table="b" column="dolg" as="gp_dolg" is-fact-use="1" />
        <column table="b" column="dat_id" as="gp_dat_id" is-fact-use="1" />
        <column table="b" column="isp_info" as="gp_isp_info" />
      </select>
      <from>
        <query name="48773-p1" as="a">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
        </query>
        <query name="48773-p2" as="b" join="full outer" dname="48773-p12">
          <withparams>
            <useparam name="dat_beg" />
            <useparam name="dat" />
            <useparam name="dep" />
            <useparam name="arch" />
          </withparams>
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dog" />
              <column table="b" column="kod_dog" />
            </call>
            <call function="=">
              <column table="a" column="num_id" />
              <column table="b" column="num_id" />
            </call>
            <call function="=">
              <column table="a" column="sf_num_in_id" />
              <column table="b" column="sf_num_in_id" />
            </call>
          </call>
        </query>
      </from>
      <order>
        <column column="p_dat_id" />
        <column column="gp_dat_id" />
      </order>
    </query>
    <query name="form:48773" haskeys="1">
      <select>
        <column table="u" column="title" title="Параметр" as="title" />
        <column table="u" column="name" key="1" as="name" />
        <column table="u" column="text" title="Значение" as="text" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const type="string" as="title">'Дата с'</const>
                <const type="string" as="name">'dat_beg'</const>
                <const type="string" as="text">NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Дата по'</const>
                <const>'dat'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Отделение'</const>
                <const>'dep'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Активный/Архивный'</const>
                <const>'arch'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id" />
  <views child-name="view" key-name="id" />
  <reports child-name="report" key-name="name">
    <report name="48773" ins-by-loop="1" timestamp="24.04.2020 20:37:55" form="48773" title="Отчет по потребителям - должникам с информацией по судебной работе и исполнительному производству по пеням и госпошлине" nogrid="1" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml">
      <print-templates>
        <excel>
          <template name="48773.xlsx" print-proc="2" print-xlsx="1" title="Работа с должниками пени ГП" />
        </excel>
      </print-templates>
      <params>
        <param name="dat_beg" type="date" part-id="48773-pars">
          <const>TO_DATE('2015/12/10', 'yyyy/mm/dd')</const>
        </param>
        <param name="dat" type="date" part-id="48773-pars">
          <const>sysdate</const>
        </param>
        <param name="dep" type="array" part-id="48773-pars" />
        <param name="arch" type="array" part-id="48773-pars" />
      </params>
      <queries>
        <query name="48773-dog" as="d" title="Договор">
          <withparams>
            <useparam name="dat_beg" part-id="48773-withpars" />
            <useparam name="dat" part-id="48773-withpars" />
            <useparam name="dep" part-id="48773-withpars" />
            <useparam name="arch" part-id="48773-withpars" />
          </withparams>
          <query name="48773-p12" as="p12" title="Блок1">
            <withparams>
              <useparam name="dat_beg" />
              <useparam name="dat" />
              <useparam name="dep" />
              <useparam name="arch" />
            </withparams>
            <call function="=">
              <column table="d" column="kod_dog" />
              <column table="p12" column="kod_dog" />
            </call>
          </query>
          <query name="48773-p3" as="p3" title="Блок3">
            <withparams>
              <useparam name="dat_beg" />
              <useparam name="dat" />
              <useparam name="dep" />
              <useparam name="arch" />
            </withparams>
            <call function="=">
              <column table="d" column="kod_dog" />
              <column table="p3" column="kod_dog" />
            </call>
          </query>
        </query>
      </queries>
    </report>
  </reports>
  <forms child-name="form" key-name="name">
    <form name="48773" timestamp="14.08.2019 17:18:41" file="sql.builder.templates\sql.builder\projects\48773\all\all.xml">
      <content>
        <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat_beg" title="Дата с" mandatory="1">
          <defaultquery>
            <query name="spr_time_date_3_year_before" />
          </defaultquery>
        </field>
        <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat" title="Дата по" mandatory="1">
          <defaultquery>
            <query name="today" />
          </defaultquery>
        </field>
        <field name="dep" controlType="UIList" title="Отделение" type="number" timestamp="13.05.2019 13:13:44" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml">
          <listquery>
            <query name="kr_dep" />
          </listquery>
          <defaultquery>
            <query name="kr_dep_current" />
          </defaultquery>
        </field>
        <field name="arch" controlType="UIList" title="Активный/Архивный" type="number" timestamp="13.04.2017 13:26:17" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml">
          <listquery>
            <query name="prizn_arch_folder" />
          </listquery>
          <defaultquery exclude="1">
            <query name="prizn_arch_folder_act" />
          </defaultquery>
        </field>
      </content>
    </form>
  </forms>
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name" />
  <dimension-packages child-name="dimension-package" key-name="name" />
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id" />
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>