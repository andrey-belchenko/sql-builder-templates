<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-06-29T01:40:55.935412+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="23479-title" pushpred="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym">
          <const>2014.06</const>
        </param>
        <param name="years"></param>
      </params>
      <select>
        <call function="-" as="min_year" key="1" fixed="1">
          <call function="nvl" type="number">
            <query>
              <select>
                <column table="a" column="year" group="min" title="мин. год. " as="year" />
              </select>
              <from>
                <query name="n_year" as="a" />
              </from>
              <where>
                <call function="or">
                  <call function="false" />
                  <call function="in" optional="1">
                    <column table="a" column="year" />
                    <useparam name="years" />
                  </call>
                </call>
              </where>
            </query>
            <call function="trunc">
              <useparam name="ym" />
            </call>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="23479" pushpred="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml">
      <params>
        <param name="ym">
          <const>2014.11</const>
        </param>
        <param name="years">
          <call function="array">
            <const>2010</const>
            <const>2011</const>
          </call>
        </param>
      </params>
      <select>
        <column table="d_payer" column="kodp" as="kodp" key="0" />
        <!--<column table="s_facvip" column="*"/>-->
        <!--<column table="kod_deb" column="date_spis"/>-->
        <column table="voda_par" column="name" as="vod_par_name" key="0" />
        <column table="d_payer" column="dat_udal" as="payer_dat_udal" key="0" />
        <column table="d_payer" column="inn" as="inn" key="0" />
        <column table="d_payer" column="name" as="payer_name" key="0" />
        <column table="kod_ist" column="name" as="ist_name" key="0" />
        <column table="kod_otrasl" column="full_name" as="otrasl_full_name" key="0" />
        <call function="-nvl" as="ostatok_beg" title="Задолженность (руб.)" class-title="Сальдо на начало периода" key="0">
          <column table="this" column="ostatok_deb_beg" />
          <column table="this" column="ostatok_kred_beg" />
        </call>
        <call function="-nvl" as="ostatok_deb_beg" title="Дебеторская задолженность (руб.)" class-title="Сальдо на начало периода" key="0">
          <column table="this" column="ostatok_deb_end" />
          <call function="-nvl">
            <column table="this" column="nachislf" />
            <call function="+nvl">
              <column table="this" column="opl_t0" />
              <column table="this" column="opl_t3t4pr" />
              <column table="this" column="opl_t3t4tek" />
              <column table="this" column="spis" />
            </call>
          </call>
        </call>
        <call function="-nvl" as="ostatok_kred_beg" title="Кредиторская задолженность (руб.)" class-title="Сальдо на начало периода" key="0">
          <column table="this" column="ostatok_kred_end" />
          <call function="-nvl">
            <column table="this" column="opl_t1t2" />
            <call function="+nvl">
              <column table="this" column="opl_t3t4pr" />
              <column table="this" column="opl_t3t4tek" />
            </call>
          </call>
        </call>
        <call function="-nvl" as="spis_beg" title="Списано (руб.)" class-title="Сальдо на начало периода" key="0">
          <column table="this" column="spis_end" />
          <column table="this" column="spis" />
        </call>
        <column table="a" column="nachislf" nvl="0" as="nachislf" key="0" />
        <column table="a" column="nachislf_by_tgr" nvl="0" as="nachislf_by_tgr" key="0" />
        <column table="a" column="cust_by_tgr" nvl="0" as="cust_by_tgr" key="0" />
        <column table="a" column="cust_by_edizm" nvl="0" as="cust_by_edizm" key="0" />
        <column table="a" column="spis" nvl="0" as="spis" key="0" />
        <column table="a" column="oplf" nvl="0" as="oplf" key="0" />
        <column table="a" column="opl_not_ap" nvl="0" as="opl_not_ap" key="0" />
        <column table="a" column="opl_ap" nvl="0" as="opl_ap" key="0" />
        <column table="a" column="opl_t0" nvl="0" as="opl_t0" key="0" />
        <column table="a" column="opl_t3t4pr" nvl="0" as="opl_t3t4pr" key="0" />
        <column table="a" column="opl_t3t4tek" nvl="0" as="opl_t3t4tek" key="0" />
        <column table="a" column="opl_t1t2" nvl="0" as="opl_t1t2" key="0" />
        <call function="-nvl" as="ostatok_end" title="Задолженность (руб.)" key="0">
          <column table="a" column="ostatok_deb_end" />
          <column table="a" column="ostatok_kred_end" />
        </call>
        <column table="a" column="ostatok_deb_end" nvl="0" as="ostatok_deb_end" key="0" />
        <column table="a" column="ostatok_kred_end" nvl="0" as="ostatok_kred_end" key="0" />
        <column table="a" column="ostatok_last" nvl="0" as="ostatok_last" key="0" />
        <column table="a" column="ostatok_last_year" nvl="0" as="ostatok_last_year" key="0" />
        <column table="a" column="ostatok_deb_end_by_god" nvl="0" as="ostatok_deb_end_by_god" key="0" />
        <column table="a" column="ostatok_do" title="Задолженность за [b.min_year] и ранее" nvl="0" as="ostatok_do" key="0" />
        <column table="a" column="ostatok_past" nvl="0" as="ostatok_past" key="0" />
        <call function="+nvl" as="ostatok_no_last" title="Задолженность всего без последнего счета (руб.)" class-title="Сальдо на конец периода" key="0">
          <column table="this" column="ostatok_past" />
          <column table="this" column="ostatok_last_year" />
        </call>
        <column table="a" column="ostatok_dead" nvl="0" as="ostatok_dead" key="0" />
        <call function="-nvl" as="ostatok_no_dead" title="Задолженность без учета мертвой (руб.)" class-title="Сальдо на конец периода" key="0">
          <column table="this" column="ostatok_deb_end" />
          <column table="this" column="ostatok_dead" />
        </call>
        <column table="a" column="spis_end" nvl="0" as="spis_end" key="0" />
        <column table="a" column="dolg_deb_end" nvl="0" as="dolg_deb_end" key="0" />
        <column table="a" column="dolg_last_year" nvl="0" as="dolg_last_year" key="0" />
        <column table="a" column="dolg_isk" nvl="0" as="dolg_isk" key="0" />
        <!--<column table="a" column="dolg_isk_by_god" nvl="0" />-->
      </select>
      <from>
        <query name="23479-dim" as="a">
          <withparams>
            <useparam name="ym" />
            <useparam name="years" />
          </withparams>
        </query>
        <query name="d_payer" as="d_payer" join="left outer" dname="23479">
          <link name="kod_ist" as="kod_ist" table="d_istfin" child="d_payer" field="kod_ist" parent="d_istfin" back="d_payer" />
          <link name="kod_otrasl" as="kod_otrasl" table="k_otrasl" child="d_payer" field="kod_otrasl" parent="k_otrasl" back="d_payer" />
          <link name="voda_par" as="voda_par" table="voda_par" child="d_payer" field="voda_par" parent="voda_par" back="d_payer" />
          <call function="=">
            <column table="d_payer" column="kodp" />
            <column table="a" column="kodp" />
          </call>
        </query>
        <query name="k_vid_real" as="k_vid_real" join="left outer" dname="23479">
          <call function="=">
            <column table="k_vid_real" column="vid_real" />
            <column table="a" column="vid_real" />
          </call>
        </query>
        <query name="s_nachisl" as="s_nachisl" join="left outer" dname="23479">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="s_nachisl" column="k_vid" />
          </call>
        </query>
        <query name="s_facvip" as="s_facvip" join="left outer" dname="23479">
          <link name="kod_deb" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          <call function="=">
            <column table="s_facvip" column="kod_sf" />
            <column table="a" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <!--<call function="in">
            <column table="a" column="vid_real"/>
            <array>2,8</array>
          </call>-->
          <call function="ge">
            <call function="nvl">
              <column table="d_payer" column="dat_udal" />
              <call function="doomsday" />
            </call>
            <call function="ym begin time">
              <useparam name="ym" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="23479-dim" pushpred="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym">
          <const>2014.06</const>
        </param>
        <param name="years"></param>
      </params>
      <select>
        <column table="*" column="vid_real" group="1" as="vid_real" key="1" />
        <column table="*" column="kodp" group="1" as="kodp" key="1" />
        <column table="*" column="vid_t" group="1" as="vid_t" key="1" />
        <column table="*" column="kod_sf" group="1" as="kod_sf" key="1" />
        <!--<column table="c" column="ostatok" as="ostatok_deb_beg" group="sum"/>
        <column table="d" column="ostatok" as="ostatok_kred_beg" group="sum"/>-->
        <column table="a" column="nachislf" group="sum" agg="sum" as="nachislf" key="0" />
        <column table="a" column="nachislf_by_tgr" group="sum" agg="sum" as="nachislf_by_tgr" key="0" />
        <column table="a" column="cust_by_tgr" group="sum" agg="sum" as="cust_by_tgr" key="0" />
        <column table="a" column="cust_by_edizm" group="sum" agg="sum" as="cust_by_edizm" key="0" />
        <column table="a1" column="nachislf" as="spis" group="sum" agg="sum" key="0" />
        <column table="b" column="oplf" group="sum" agg="sum" as="oplf" key="0" />
        <column table="b" column="opl_not_ap" group="sum" agg="sum" as="opl_not_ap" key="0" />
        <column table="b" column="opl_ap" group="sum" agg="sum" as="opl_ap" key="0" />
        <column table="b" column="opl_t0" group="sum" agg="sum" as="opl_t0" key="0" />
        <column table="b" column="opl_t3t4pr" group="sum" agg="sum" as="opl_t3t4pr" key="0" />
        <column table="b" column="opl_t3t4tek" group="sum" agg="sum" as="opl_t3t4tek" key="0" />
        <column table="b" column="opl_t1t2" group="sum" agg="sum" as="opl_t1t2" key="0" />
        <!--<column table="c" column="ostatok_by_ym" group="sum"/>-->
        <column table="e" column="ostatok_do" group="sum" agg="sum" as="ostatok_do" key="0" />
        <column table="e" column="spis" as="spis_end" group="sum" agg="sum" key="0" />
        <column table="e" column="ostatok_last" group="sum" agg="sum" as="ostatok_last" key="0" />
        <column table="e" column="ostatok_past" group="sum" agg="sum" as="ostatok_past" key="0" />
        <column table="e" column="ostatok_last_year" group="sum" agg="sum" as="ostatok_last_year" key="0" />
        <column table="e" column="dolg_last_year" group="sum" agg="sum" as="dolg_last_year" key="0" />
        <column table="g" column="dolg_isk" group="sum" agg="sum" as="dolg_isk" key="0" />
        <!--<column table="g" column="dolg_isk_by_god" group="sum"/>-->
        <column table="e" column="ostatok" as="ostatok_deb_end" group="sum" agg="sum" key="0" />
        <column table="e" column="dolg" as="dolg_deb_end" group="sum" agg="sum" key="0" />
        <column table="e" column="ostatok_by_god" as="ostatok_deb_end_by_god" group="sum" agg="sum" key="0" />
        <column table="f" column="ostatok" as="ostatok_kred_end" group="sum" agg="sum" key="0" />
        <column table="e" column="ostatok_dead" group="sum" agg="sum" as="ostatok_dead" key="0" />
      </select>
      <from>
        <query name="23479-nachisl" as="a" title="Начисления">
          <withparams>
            <useparam name="ym" />
          </withparams>
        </query>
        <query name="23479-spis" as="a1" title="Начисления">
          <withparams>
            <useparam name="ym" />
          </withparams>
        </query>
        <query name="23479-opl" as="b" title="Оплата">
          <withparams>
            <useparam name="ym" />
          </withparams>
        </query>
        <!--<query name="23479-saldo-deb-beg" as="c">
          <withparams>
            <useparam name="ym"/>
          </withparams>
        </query>
        <query name="23479-saldo-kred-beg" as="d">
          <withparams>
            <useparam name="ym"/>
          </withparams>
        </query>-->
        <query name="23479-saldo-deb-end" as="e" title="Сальдо на конец периода">
          <withparams>
            <useparam name="ym" />
            <useparam name="years" />
          </withparams>
        </query>
        <query name="23479-saldo-kred-end" as="f" title="Сальдо на конец периода">
          <withparams>
            <useparam name="ym" />
          </withparams>
        </query>
        <query name="23479-saldo-isk-end" as="g" title="Сальдо на конец периода">
          <withparams>
            <useparam name="ym" />
            <useparam name="years" />
          </withparams>
        </query>
        <!--<where>
          <call function="in">
            <column table="*" column="kodp"/>
            <array>
              '601700082',
              '601700164',
              '602701060',
              '107700018',
              '602700975',
              '322601736',
              '602102604',
              '515101608',
              '602105408',
              '602300600',
              '514100300',
              '322302207',
              '602600475',
              '601100905'

            </array>
          </call>
        </where>-->
        <!--<where>
          <call function="in">
            <column table="*" column="kodp"/>
            <array>
              '630601182'
            </array>
          </call>
        </where>-->
      </from>
    </query>
    <query name="23479-nachisl" pushpred="1" title="Начисления" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym"></param>
      </params>
      <select>
        <column table="a" column="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" key="0" />
        <column table="kod_sf" column="kodp" as="kodp" key="0" />
        <column table="kod_sf" column="vid_real" as="vid_real" key="0" />
        <column table="a" column="vid_t" as="vid_t" key="0" />
        <column table="a" column="nachislf" as="nachislf" key="0" />
        <!--<call function="if" as="dolg_last_year" type="number" title="Просроченная задолженность задолженность текущего года (руб.)">
          <call function="=">
              <column table="kod_sf" column="god"/>
              <call function="trunc">
                <useparam name="ym"/>
              </call>
          </call>
          <column table="this" column="dolg"/>
        </call>-->
        <column table="a" column="nachislf" as="nachislf_by_tgr" dimname="tgr" key="0" pivot="1">
          <pivot title=" по видам товара">
            <column table="vid_t" column="grup" as="grup" />
            <query order="grup">
              <select>
                <column table="a" column="grup" as="grup" />
                <column table="a" column="name" as="name" />
              </select>
              <from>
                <query name="s_nachisl_gr" as="a" />
              </from>
            </query>
          </pivot>
        </column>
        <column table="a" column="cust" as="cust_by_tgr" dimname="tgr" key="0" pivot="1">
          <pivot title=" по видам товара">
            <column table="vid_t" column="grup" as="grup" />
            <query order="grup">
              <select>
                <column table="a" column="grup" as="grup" />
                <column table="a" column="name" as="name" />
              </select>
              <from>
                <query name="s_nachisl_gr" as="a" />
              </from>
            </query>
          </pivot>
        </column>
        <column table="a" column="cust2" as="cust_by_edizm" dimname="edizm" key="0" pivot="1">
          <pivot title=" по единицам измерения">
            <column table="edizm2" column="kod" as="kod" />
            <query order="name">
              <select>
                <column table="a" column="kod" as="kod" />
                <column table="a" column="name" as="name" />
              </select>
              <from>
                <query name="s_edizm_used2" as="a"></query>
              </from>
            </query>
          </pivot>
        </column>
      </select>
      <from>
        <query name="s_facras" as="a">
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras" />
          <link name="vid_t" as="vid_t" table="s_nachisl" child="s_facras" field="vid_t" parent="s_nachisl" back="s_facras" />
          <link name="edizm2" as="edizm2" table="s_edizm" child="s_facras" field="edizm2" parent="s_edizm" back="s_facras" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="pr_osn2" />
            <const>1</const>
          </call>
          <call function="=">
            <column table="kod_sf" column="ym" />
            <useparam name="ym" />
          </call>
        </call>
      </where>
    </query>
    <query name="23479-spis" pushpred="1" title="Начисления" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym"></param>
      </params>
      <select>
        <column table="a" column="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" key="0" />
        <column table="kod_sf" column="kodp" as="kodp" key="0" />
        <column table="kod_sf" column="vid_real" as="vid_real" key="0" />
        <column table="a" column="vid_t" as="vid_t" key="0" />
        <column table="a" column="nachislf" title="Списано (руб.)" as="nachislf" key="0" />
      </select>
      <from>
        <query name="s_facras" as="a">
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
            <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          </link>
          <link name="vid_t" as="vid_t" table="s_nachisl" child="s_facras" field="vid_t" parent="s_nachisl" back="s_facras" />
          <link name="edizm" as="edizm" table="s_edizm" child="s_facras" field="edizm" parent="s_edizm" back="s_facras" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="pr_osn2" />
            <const>1</const>
          </call>
          <call function="=">
            <call function="date to ym">
              <column table="kod_deb" column="date_spis" />
            </call>
            <useparam name="ym" />
          </call>
        </call>
      </where>
    </query>
    <query name="23479-opl" title="Оплата" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym"></param>
      </params>
      <select>
        <column table="s_opl" column="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="s_opl" column="kodp" as="kodp" key="0" />
        <column table="s_opl" column="vid_pl" as="vid_real" key="0" />
        <column table="s_opl" column="oplf" as="oplf" key="0" />
        <column table="s_opl" column="opl_t0" as="opl_t0" key="0" />
        <column table="s_opl" column="opl_t3t4pr" as="opl_t3t4pr" key="0" />
        <column table="s_opl" column="opl_t3t4tek" as="opl_t3t4tek" key="0" />
        <column table="s_opl" column="opl_t1t2" as="opl_t1t2" key="0" />
        <call function="+nvl" as="opl_not_ap" title="Оплачено (без перепл. и ав.)" key="0">
          <column table="this" column="opl_t0" />
          <column table="s_opl" column="opl_t3t4" />
        </call>
        <call function="-nvl" as="opl_ap" title="Переп. и аванс" key="0">
          <column table="this" column="opl_t1t2" />
          <column table="s_opl" column="opl_t3t4" />
        </call>
      </select>
      <from>
        <query name="s_opl" as="s_opl">
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_opl" field="kod_sf" parent="s_facvip" back="s_opl">
            <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="s_opl" column="ym" />
            <useparam name="ym" />
          </call>
          <call function="gt">
            <call function="date to ym">
              <call function="nvl">
                <column table="kod_deb" column="date_spis" />
                <call function="doomsday" />
              </call>
            </call>
            <useparam name="ym" />
          </call>
          <call function="or">
            <call function="=">
              <column table="kod_sf" column="pr_osn2" />
              <const>1</const>
            </call>
            <call function="in">
              <column table="this" column="vid_real" />
              <call function="array">
                <const>2</const>
                <const>0</const>
              </call>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="23479-saldo-deb-end" title="Сальдо на конец периода" timestamp="23.03.2016 11:30:51" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym">
          <const>2014.07</const>
        </param>
        <param name="years" />
      </params>
      <select>
        <column table="a" column="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" key="0" />
        <column table="kod_sf" column="dat_sf" as="dat_sf" key="0" />
        <column table="kod_sf" column="ym" as="ym" key="0" />
        <column table="kod_sf" column="kodp" as="kodp" key="0" />
        <column table="kod_sf" column="vid_real" as="vid_real" key="0" />
        <column table="a" column="vid_t" as="vid_t" key="0" />
        <column table="a" column="ostatok_s" as="ostatok" key="0" />
        <column table="a" column="dolg" as="dolg" key="0" />
        <call function="if" as="dolg_last_year" type="number" title="Просроченная задолженность текущего года (руб.)" key="0">
          <call function="=">
            <column table="kod_sf" column="god" />
            <call function="trunc">
              <useparam name="ym" />
            </call>
          </call>
          <column table="this" column="dolg" />
        </call>
        <column table="a" column="spis" as="spis" key="0" />
        <call function="if" as="ostatok_do" type="number" key="0">
          <call function="le">
            <column table="kod_sf" column="god" />
            <call function="-">
              <call function="nvl" type="number">
                <query>
                  <select>
                    <column table="a" column="year" group="min" title="мин. год. " as="year" />
                  </select>
                  <from>
                    <query name="n_year" as="a" />
                  </from>
                  <where>
                    <call function="or">
                      <call function="false" />
                      <call function="in" optional="1">
                        <column table="a" column="year" />
                        <useparam name="years" />
                      </call>
                    </call>
                  </where>
                </query>
                <call function="trunc">
                  <useparam name="ym" />
                </call>
              </call>
              <const>1</const>
            </call>
          </call>
          <column table="this" column="ostatok" />
        </call>
        <call function="if" as="ostatok_last" type="number" title="Задолженность последнего месяца (руб.)" key="0">
          <call function="=">
            <column table="kod_sf" column="ym" />
            <!--<call function="date to ym">
              <column table="kod_sf" column="dat_sf"/>
            </call>-->
            <useparam name="ym" />
          </call>
          <column table="this" column="ostatok" />
        </call>
        <call function="if" as="ostatok_last_year" type="number" title="Задолженность текущего года без последнего счета (руб.)" key="0">
          <call function="and">
            <call function="=">
              <column table="kod_sf" column="god" />
              <call function="trunc">
                <useparam name="ym" />
              </call>
            </call>
            <call function="!=">
              <column table="kod_sf" column="ym" />
              <useparam name="ym" />
            </call>
          </call>
          <column table="this" column="ostatok" />
        </call>
        <call function="if" as="ostatok_past" type="number" title="Задолженность прошлых лет всего (руб.)" key="0">
          <call function="lt">
            <column table="kod_sf" column="god" />
            <call function="trunc">
              <useparam name="ym" />
            </call>
          </call>
          <column table="this" column="ostatok" />
        </call>
        <column table="a" column="ostatok_s" as="ostatok_by_god" dimname="god" key="0" pivot="1">
          <pivot title=" по годам">
            <column table="kod_sf" column="god" as="god" />
            <query>
              <select>
                <column table="a" column="*" as="*" />
              </select>
              <from>
                <query name="n_year" as="a" />
              </from>
              <where>
                <call function="or">
                  <call function="false" />
                  <call function="in" optional="1">
                    <column table="a" column="year" />
                    <useparam name="years" />
                  </call>
                </call>
              </where>
            </query>
          </pivot>
        </column>
        <call function="if" as="ostatok_dead" type="number" title="Мертвая задолженность (руб.)" key="0">
          <call function="lt">
            <column table="kod_deb" column="date_dead" />
            <call function="ym end time">
              <useparam name="ym" />
            </call>
          </call>
          <column table="this" column="ostatok_s" />
        </call>
      </select>
      <from>
        <query name="s_facras(date)" as="a">
          <withparams>
            <call function="ym end time">
              <useparam name="ym" />
            </call>
          </withparams>
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_facras(date)" field="kod_sf" parent="s_facvip" back="s_facras(date)">
            <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          </link>
        </query>
      </from>
      <where>
        <call function="or">
          <call function="=">
            <column table="kod_sf" column="pr_osn2" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="23479-saldo-isk-end" title="Сальдо на конец периода" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym">
          <const>2014.07</const>
        </param>
        <param name="years"></param>
      </params>
      <select>
        <column table="a" column="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" key="0" />
        <column table="kod_sf" column="dat_sf" as="dat_sf" key="0" />
        <column table="kod_sf" column="ym" as="ym" key="0" />
        <column table="kod_sf" column="kodp" as="kodp" key="0" />
        <column table="kod_sf" column="vid_real" as="vid_real" key="0" />
        <column table="a" column="vid_t" as="vid_t" key="0" />
        <column table="a" column="ostatok_s" as="ostatok_s" key="0" />
        <call function="if" as="dolg_isk" type="number" title="Исковая задолженность (руб.)" key="0">
          <call function="le">
            <column table="kod_sf" column="dat_cr_isp" />
            <call function="ym end time">
              <useparam name="ym" />
            </call>
          </call>
          <column table="a" column="ostatok_s" />
        </call>
        <!--<call function="if" as="dolg_isk_by_god" type="number" title="Исковая задолженность (руб.)">
          <call function="le">
            <column table="kod_sf" column="dat_cr_isp"/>
            <call function="ym end time">
              <useparam name="ym"/>
            </call>
          </call>
          <column table="a" column="ostatok_s">
            <pivot title=" по годам">
              <column table="kod_sf" column="god"/>
              <query>
                <select>
                  <column table="a" column="*"/>
                </select>
                <from>
                  <query name="n_year" as="a"/>
                </from>
                <where>
                  <call function="or">
                    <call function="false"/>
                    <call function="in" optional="1">
                      <column table="a" column="year"/>
                      <useparam name="years"/>
                    </call>
                  </call>
                </where>
              </query>
            </pivot>
          </column>>
        </call>-->
        <!--<call function="if"  type="number" title="Исковая задолженность (руб.)" as="dolg_isk_by_god">
          <call function="le">
            <column table="kod_sf" column="dat_cr_isp"/>
            <call function="ym end time">
              <useparam name="ym"/>
            </call>
          </call>
          <column table="a" column="ostatok_s"/>
         
        </call>-->
      </select>
      <from>
        <query name="s_facras(date)" as="a">
          <withparams>
            <call function="ym end time">
              <useparam name="ym" />
            </call>
          </withparams>
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_facras(date)" field="kod_sf" parent="s_facvip" back="s_facras(date)">
            <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="not 0">
            <column table="this" column="dolg_isk" />
          </call>
          <call function="!=">
            <column table="kod_sf" column="vid_real" />
            <const>0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="23479-saldo-kred-end" title="Сальдо на конец периода" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml" haskeys="1">
      <params>
        <param name="ym"></param>
      </params>
      <select>
        <column table="a" column="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kodp" as="kodp" key="0" />
        <const as="kod_sf" key="0">null</const>
        <column table="a" column="vid_pl" as="vid_real" key="0" />
        <column table="a" column="ostatok" as="ostatok" key="0" />
      </select>
      <from>
        <query name="s_opl_kred(date)" as="a">
          <withparams>
            <call function="ym end time">
              <useparam name="ym" />
            </call>
          </withparams>
        </query>
      </from>
      <!--<where>
        <call function="not 0">
          <column table="a" column="ostatok"/>
        </call>
      </where>-->
    </query>
    <query name="d_payer%tbl" timestamp="10.10.2017 16:09:32" file="sql.builder.templates\sql.builder\projects\asuse1\reports\34759.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" as="kodp" key="1" fixed="1" />
        <column table="a" column="kodp" as="nump" key="0" />
        <column table="a" column="inn" as="inn" key="0" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="dat_udal" as="dat_udal" key="0" />
      </select>
      <from>
        <query name="d_payer" as="a" />
      </from>
    </query>
    <query name="34759-data" title="Оборотная ведомость по видам товара (детализация по СФ)" timestamp="16.12.2016 00:05:50" folder="oborot" is-report="1" form="34759" edit-columns="1" allow-save="1" with-behavior="0" file="sql.builder.templates\sql.builder\projects\asuse1\reports\34759.xml" haskeys="1">
      <params>
        <param name="ym1">
          <const>2016.01</const>
        </param>
        <param name="ym2">
          <const>2016.01</const>
        </param>
        <param name="voda_par" />
        <param name="kodp" />
      </params>
      <customers>
        <customer id="2" />
      </customers>
      <columns>
        <column name="id" />
        <band title="Абонент">
          <column name="voda_par" title="Вода/Пар" />
          <column name="kodp" title="Код" />
          <column name="names" title="Наименование" />
          <column name="dat_udal" title="Дата удаления" />
        </band>
        <band title="Счет-фактура">
          <column name="num_sf" />
          <column name="dat_sf" />
          <column name="ym" />
        </band>
        <band title="Вид товара">
          <column name="name" title="Группа" />
          <column name="k_vid" title="Код" />
          <column name="vid_t_name" title="Наименование" />
          <column name="edizm_name" />
        </band>
        <band title="На начало периода">
          <column name="oborot_beg" title="Деб. задолженность" />
          <column name="spis_beg" title="В т.ч. списанная" />
        </band>
        <band title="За период">
          <column name="s_facras_nachisl_nds_ym" title="Начислено " />
          <column name="s_facras_cust_ym" title="Начислено (нат. показат.)" />
          <column name="s_facopl_opl_nds_ym" title="Оплачено" />
          <column name="s_facras_spis_nachislf_ym" title="Списано" />
        </band>
        <band title="На конец периода">
          <column name="oborot_end" title="Деб. задолженность" />
          <column name="spis_end" title="В т.ч. списанная" />
        </band>
      </columns>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="voda_par" column="name" as="voda_par" />
        <column table="kodp" column="kodp" as="kodp" />
        <column table="kodp" column="dat_udal" title="Дата удаления абонента" as="dat_udal" />
        <column table="kodp" column="names" title="Наименование абонента" as="names" />
        <column table="kod_sf" column="num_sf" as="num_sf" />
        <column table="kod_sf" column="dat_sf" as="dat_sf" />
        <column table="kod_sf" column="ym" title="Отчетный период начисления" agg="" as="ym" />
        <column table="kod_edizm" column="name" title="Наименование нат. показат." as="edizm_name" />
        <column table="vid_t_gr" column="name" title="Вид товара (группа)" as="name" />
        <column table="vid_t" column="k_vid" title="Вид товара (код)" agg="" as="k_vid" />
        <column table="vid_t" column="name" title="Вид товара (наименование)" as="vid_t_name" />
        <fact column="oborot_beg" title="Деб. задолженность на начало периода" as="oborot_beg" is-fact-use="1" />
        <fact column="spis_beg" title="В т.ч. списанная задолженность на начало периода" as="spis_beg" is-fact-use="1" />
        <fact column="s_facras_nachisl_nds_ym" title="Начислено за период" as="s_facras_nachisl_nds_ym" is-fact-use="1" />
        <fact column="s_facras_cust_ym" title="Начислено за период (нат. показат.)" as="s_facras_cust_ym" is-fact-use="1" />
        <fact column="s_facopl_opl_nds_ym" title="Оплачено за период" as="s_facopl_opl_nds_ym" is-fact-use="1" />
        <fact column="s_facras_spis_nachislf_ym" title="Списано за период" as="s_facras_spis_nachislf_ym" is-fact-use="1" />
        <fact column="oborot_end" title="Деб. задолженность на конец периода" as="oborot_end" is-fact-use="1" />
        <fact column="spis_end" title="В т.ч. списанная задолженность на конец периода" as="spis_end" is-fact-use="1" />
      </select>
      <expressions>
        <call function="if" as="s_facopl_opl_nds_ym" group="sum">
          <call function="between" as="cond1">
            <column table="ym" column="val" />
            <useparam name="ym1" />
            <useparam name="ym2" />
          </call>
          <fact column="s_facopl_opl_nds" />
        </call>
        <call function="if" as="s_facras_nachisl_nds_ym" group="sum">
          <call function="between" as="cond1">
            <column table="ym" column="val" />
            <useparam name="ym1" />
            <useparam name="ym2" />
          </call>
          <fact column="s_facras_nachisl_nds" />
        </call>
        <call function="if" as="s_facras_cust_ym" group="sum">
          <call function="between" as="cond1">
            <column table="ym" column="val" />
            <useparam name="ym1" />
            <useparam name="ym2" />
          </call>
          <fact column="s_facras_cust" />
        </call>
        <call function="if" as="s_facras_spis_nachislf_ym" group="sum">
          <call function="between" as="cond1">
            <column table="ym" column="val" />
            <useparam name="ym1" />
            <useparam name="ym2" />
          </call>
          <!--<fact column="s_facras_spis_nachislf" />-->
          <fact column="oborot_spis" />
        </call>
        <call function="if" as="oborot_beg" group="sum">
          <call function="and" as="cond2">
            <call function="lt">
              <column table="ym" column="val" />
              <useparam name="ym1" />
            </call>
          </call>
          <fact column="oborot" />
        </call>
        <call function="if" as="spis_beg" group="sum">
          <call function="and" as="cond2">
            <call function="lt">
              <column table="ym" column="val" />
              <useparam name="ym1" />
            </call>
          </call>
          <fact column="oborot_spis" />
        </call>
        <call function="if" as="oborot_end" group="sum">
          <call function="and" as="cond3">
            <call function="le">
              <column table="ym" column="val" />
              <useparam name="ym2" />
            </call>
          </call>
          <fact column="oborot" />
        </call>
        <call function="if" as="spis_end" group="sum">
          <call function="and" as="cond3">
            <call function="le">
              <column table="ym" column="val" />
              <useparam name="ym2" />
            </call>
          </call>
          <fact column="oborot_spis" />
        </call>
      </expressions>
      <from>
        <qube>
          <link name="kod_sf">
            <link name="dpp_kod_sf" />
          </link>
          <link name="kod_ras" />
          <link name="kodp">
            <link name="voda_par" />
          </link>
          <link name="kod_edizm" />
          <link name="vid_t" />
          <link name="vid_t_gr" />
          <where>
            <call function="and">
              <call function="or">
                <call function="in">
                  <column table="kod_sf" column="vid_real" />
                  <call function="array">
                    <const>2</const>
                  </call>
                </call>
                <call function="=1">
                  <column table="dpp_kod_sf" column="pr_osn2" />
                </call>
              </call>
              <call function="in" optional="1">
                <column table="kodp" column="kodp" />
                <useparam name="kodp" />
                <!--<array>322603183</array>
                <const exclude="1">514600426</const>-->
              </call>
              <call function="in" optional="1">
                <column table="kodp" column="voda_par" />
                <useparam name="voda_par" />
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="!=0">
          <const>0</const>
          <column column="oborot_beg" title="Деб. задолженность на начало периода" table="this" />
          <column column="spis_beg" title="В т.ч. списанная задолженность на начало периода" table="this" />
          <column column="s_facras_nachisl_nds_ym" title="Начислено за период" table="this" />
          <column column="s_facopl_opl_nds_ym" title="Оплачено за период" table="this" />
          <column column="s_facras_spis_nachislf_ym" title="Списано за период" table="this" />
          <column column="oborot_end" title="Деб. задолженность на конец периода" table="this" />
          <column column="spis_end" title="В т.ч. списанная задолженность на конец периода" table="this" />
        </call>
      </where>
    </query>
    <query name="36927" timestamp="22.09.2016 21:48:42" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <expressions>
        <call function="if" as="opl_spis" group="sum" type="number">
          <call function="=1">
            <call function="nvlu">
              <useparam name="use_spis" />
              <const>0</const>
            </call>
          </call>
          <fact column="s_opl_spis_oplf" />
        </call>
        <call function="if" as="nachl_spis" group="sum" type="number">
          <call function="=1">
            <call function="nvlu">
              <useparam name="use_spis" />
              <const>0</const>
            </call>
          </call>
          <fact column="s_facras_spis_nachislf" />
        </call>
        <call function="-nvl" as="opl_pr" group="sum">
          <fact column="s_opl_oplf" />
          <fact column="opl_spis" />
        </call>
        <call function="-nvl" as="nach_pr" group="sum">
          <fact column="s_facras_nachisl_nds" />
          <fact column="nachl_spis" />
        </call>
        <call function="if" as="opl_do" group="sum" type="number">
          <call function="and">
            <call function="lt">
              <column table="dat" column="val" />
              <column table="dat_ur" column="val" />
            </call>
          </call>
          <fact column="opl_pr" />
        </call>
        <call function="if" as="opl_posle" group="sum" type="number">
          <call function="and">
            <call function="ge">
              <column table="dat" column="val" />
              <column table="dat_ur" column="val" />
            </call>
          </call>
          <fact column="opl_pr" />
        </call>
        <call function="-nvl" as="oborot_do" group="sum" title="Задолженность с НДС (руб)" type="number">
          <fact column="nach_pr" />
          <fact column="opl_do" />
        </call>
        <call function="-nvl" as="oborot_ur" group="sum" title="Задолженность с НДС (руб)" type="number">
          <fact column="oborot_do" />
          <fact column="opl_posle" />
        </call>
        <call function="if" as="dolg_beg" group="sum" type="number">
          <call function="lt">
            <column table="dat_ur" column="val" />
            <useparam name="dat1" />
          </call>
          <fact column="oborot_ur" />
        </call>
        <call function="if" as="nach_prizn" group="sum" type="number">
          <call function="and">
            <call function="ge">
              <column table="dat_ur" column="val" />
              <useparam name="dat1" />
            </call>
            <call function="le">
              <column table="dat_ur" column="val" />
              <useparam name="dat2" />
            </call>
          </call>
          <fact column="nach_pr" />
        </call>
        <call function="if" as="opl_prizn" group="sum" type="number">
          <call function="and">
            <call function="ge">
              <column table="dat_ur" column="val" />
              <useparam name="dat1" />
            </call>
            <call function="le">
              <column table="dat_ur" column="val" />
              <useparam name="dat2" />
            </call>
          </call>
          <fact column="opl_do" />
        </call>
        <call function="if" as="opl" group="sum" type="number">
          <call function="and">
            <call function="ge">
              <column table="dat" column="val" />
              <useparam name="dat1" />
            </call>
            <call function="le">
              <column table="dat" column="val" />
              <useparam name="dat2" />
            </call>
          </call>
          <fact column="opl_posle" />
        </call>
        <call function="if" as="dolg_end" group="sum" type="number">
          <call function="le">
            <column table="dat_ur" column="val" />
            <useparam name="dat2" />
          </call>
          <fact column="oborot_ur" />
        </call>
      </expressions>
      <select>
        <column table="kod_ur_sf_isp" column="dat_cr_isp" as="dat_cr_isp" />
        <column table="kod_ur_sf_isp" column="kod_ur_sf_isp" as="kod_invoice" />
        <column table="kod_ur_sf_isp" column="num_isp" title="Номер ИЛ" as="num_isp" />
        <column table="kod_ur_sf_isp" column="num_delo" title="Номер дела" as="num_delo" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <column table="kod_opl" column="kod_opl" as="kod_opl" />
        <column table="kod_opl" column="datao" as="datao" />
        <column table="kodp" column="kodp" as="kodp" />
        <fact column="dolg_beg" nullif="0" as="dolg_beg" is-fact-use="1" />
        <fact column="nach_prizn" nullif="0" as="nach_prizn" is-fact-use="1" />
        <fact column="opl_prizn" table="opl" nullif="0" as="opl_do" is-fact-use="1" />
        <fact column="opl" table="opl" nullif="0" as="opl" is-fact-use="1" />
        <fact column="dolg_end" nullif="0" as="dolg_end" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <dimset as="opl">
            <link name="kod_opl" />
          </dimset>
          <link name="kod_ur_sf_isp" />
          <link name="kodp" />
          <link name="kod_sf" />
          <where>
            <call function="and">
              <call function="is not null">
                <column table="kod_ur_sf_isp" column="kod_ur_sf_isp" />
              </call>
              <call function="is null">
                <column table="kod_sf" column="ym_end_dolg" />
              </call>
              <call function="!=0">
                <column table="kod_sf" column="vid_real" />
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="!=0">
          <fact column="dolg_beg" nullif="0" />
          <fact column="nach_prizn" nullif="0" />
          <fact column="opl" table="opl" nullif="0" />
          <fact column="opl_prizn" table="opl" nullif="0" as="opl_do" thissrc="opl_do" />
        </call>
      </where>
    </query>
    <query name="36927_l1" timestamp="23.09.2016 12:59:41" materialize="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <select>
        <column table="a" column="dat_cr_isp" as="dat_cr_isp" key="0" />
        <column table="a" column="kod_invoice" as="kod_invoice" key="0" />
        <column table="a" column="kod_sf" as="kod_sf" key="0" />
        <column table="a" column="kod_opl" as="kod_opl" key="0" />
        <column table="a" column="num_delo" title="Номер дела" as="num_delo" key="0" />
        <column table="a" column="num_isp" title="Номер ИЛ" as="num_isp" key="0" />
        <column table="a" column="datao" title="Дата оплаты" as="datao" key="0" />
        <column table="a" column="kodp" as="kodp" key="0" />
        <column table="a" column="dolg_beg" as="dolg_beg" key="0" is-fact-use="1" />
        <column table="a" column="nach_prizn" as="nach_prizn" key="0" is-fact-use="1" />
        <column table="a" column="opl_do" as="opl_do" key="0" is-fact-use="1" />
        <column table="a" column="opl" as="opl" key="0" is-fact-use="1" />
        <column table="a" column="dolg_end" as="dolg_end" key="0" is-fact-use="1" />
        <call function="over" as="cnt_nach" type="number" key="0">
          <call function="count">
            <column table="a" column="nach_prizn" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_sf" />
          </call>
        </call>
        <call function="over" as="cnt_dolg_beg" type="number" key="0">
          <call function="count">
            <column table="a" column="dolg_beg" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_sf" />
          </call>
        </call>
        <call function="over" as="cnt_dolg_end" type="number" key="0">
          <call function="count">
            <column table="a" column="dolg_end" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_sf" />
          </call>
        </call>
        <call function="over" as="cnt_opl_do" type="number" key="0">
          <call function="count">
            <column table="a" column="opl_do" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <call function="over" as="cnt_opl" type="number" title="Оплачено" key="0">
          <call function="count">
            <column table="a" column="opl" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <call as="nach_prizn_norm" function="/nvl" key="0">
          <column table="a" column="nach_prizn" is-fact-use="1" />
          <column table="this" column="cnt_nach" />
        </call>
        <call as="opl_do_norm" function="/nvl" title="Оплачено" key="0">
          <column table="a" column="opl_do" is-fact-use="1" />
          <column table="this" column="cnt_opl_do" />
        </call>
        <call function="-nvl" as="nach_norm" nvl="0" title="Начислено" key="0">
          <column table="this" column="nach_prizn_norm" />
          <column table="this" column="opl_do_norm" />
        </call>
        <call as="dolg_end_norm" function="/nvl" nvl="0" title="Задолженность на [:dat2str]" key="0">
          <column table="a" column="dolg_end" is-fact-use="1" />
          <column table="this" column="cnt_dolg_end" />
        </call>
        <call as="dolg_beg_norm" function="/nvl" nvl="0" title="Задолженность на [:dat1str]" key="0">
          <column table="a" column="dolg_beg" is-fact-use="1" />
          <column table="this" column="cnt_dolg_beg" />
        </call>
        <call as="opl_norm" function="/nvl" nvl="0" title="Оплачено" key="0">
          <column table="a" column="opl" is-fact-use="1" />
          <column table="this" column="cnt_opl" />
        </call>
      </select>
      <from>
        <query name="36927" as="a">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="36927_l2" timestamp="19.09.2016 18:21:20" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml" haskeys="1">
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_invoice" group="1" as="kod_invoice" key="1" fixed="1" />
        <column table="a" column="kod_sf" group="1" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="1" fixed="1" />
        <column table="s_facvip" column="vid_real" group="1" as="vid_real" key="1" fixed="1" />
        <column table="a" column="kodp" group="1" as="kodp" key="1" fixed="1" />
        <column table="a" column="dolg_beg_norm" group="sum" as="dolg_beg_norm" key="0" />
        <column table="a" column="nach_norm" group="sum" as="nach_norm" key="0" />
        <column table="a" column="opl_norm" group="sum" as="opl_norm" key="0" />
        <column table="a" column="dolg_end_norm" group="sum" as="dolg_end_norm" key="0" />
      </select>
      <from>
        <query name="36927_l1" as="a">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
        </query>
        <query name="s_facvip" join="left outer" as="s_facvip" dname="36927_l2">
          <call function="=">
            <column table="s_facvip" column="kod_sf" />
            <column table="a" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="36927_abon" timestamp="22.09.2016 19:24:29" order="name" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml" haskeys="1">
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <select>
        <column table="kodp" column="name" group="1" as="name" key="1" fixed="1" />
        <column table="a" column="kodp" group="1" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="inn" group="1" as="inn" key="1" fixed="1" />
        <column table="a" column="dolg_beg_norm" group="sum" as="dolg_beg_norm" key="0" />
        <column table="a" column="nach_norm" group="sum" as="nach_norm" key="0" />
        <column table="a" column="opl_norm" group="sum" as="opl_norm" key="0" />
        <column table="a" column="dolg_end_norm" group="sum" as="dolg_end_norm" key="0" />
      </select>
      <from>
        <query name="36927_l1" as="a">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
        </query>
        <query name="s_facvip" join="left outer" as="s_facvip" dname="36927_abon">
          <link name="kodp" as="kodp" table="d_payer" child="s_facvip" field="kodp" parent="d_payer" back="s_facvip" />
          <call function="=">
            <column table="s_facvip" column="kod_sf" />
            <column table="a" column="kod_sf" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="36927_isp" timestamp="20.09.2016 03:00:55" order="name,num_isp" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml" haskeys="1">
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <select>
        <column table="kodp" column="name" group="1" as="name" key="1" fixed="1" />
        <column table="a" column="kodp" group="1" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="inn" group="1" as="inn" key="1" fixed="1" />
        <column table="a" column="num_delo" group="1" as="num_delo" key="1" fixed="1" />
        <column table="a" column="num_isp" group="1" as="num_isp" key="1" fixed="1" />
        <column table="a" column="datao" group="max" title="Дата оплаты " as="datao" key="0" />
        <column table="a" column="dolg_beg_norm" group="sum" as="dolg_beg_norm" key="0" />
        <column table="a" column="nach_norm" group="sum" as="nach_norm" key="0" />
        <column table="a" column="opl_norm" group="sum" as="opl_norm" key="0" />
        <column table="a" column="dolg_end_norm" group="sum" as="dolg_end_norm" key="0" />
      </select>
      <from>
        <query name="36927_l1" as="a">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
        </query>
        <query name="s_facvip" join="left outer" as="s_facvip" dname="36927_isp">
          <link name="kodp" as="kodp" table="d_payer" child="s_facvip" field="kodp" parent="d_payer" back="s_facvip" />
          <call function="=">
            <column table="s_facvip" column="kod_sf" />
            <column table="a" column="kod_sf" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
        <column column="num_isp" />
      </order>
    </query>
    <query name="36927_dat1_str" timestamp="22.09.2016 22:16:13" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <params>
        <param name="dat1" type="date" />
      </params>
      <select>
        <call function="date to char" as="val" key="0">
          <useparam name="dat1" />
        </call>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="36927_dat2_str" timestamp="22.09.2016 22:20:35" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <params>
        <param name="dat2" type="date" />
      </params>
      <select>
        <call function="date to char" as="val" key="0">
          <useparam name="dat2" />
        </call>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="36927_dat1" timestamp="23.09.2016 12:08:53" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <select>
        <call function="ym begin time" as="val" key="0">
          <call function="date to ym">
            <call function="sysdate" />
          </call>
        </call>
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="36927_dat2" timestamp="23.09.2016 12:11:15" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <select>
        <call function="sysdate" as="val" key="0" />
      </select>
      <from>
        <query name="dual" as="dual" />
      </from>
    </query>
    <query name="38445(20)-all" timestamp="19.12.2016 19:58:10" order="kodp,ym" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml">
      <params>
        <param name="p_kodp_array_id" type="number">
          <const>'list1'</const>
        </param>
      </params>
      <select>
        <column table="c" column="kodp" as="kodp" key="0" />
        <column table="c" column="ym" as="ym" reference="38445(20)-prfl" refcol="ym" key="0" />
        <column table="a" column="nachisl" as="nachisl" key="0" is-fact-use="1" />
        <column table="a" column="opl" as="opl" key="0" is-fact-use="1" />
        <column table="a" column="ob_deb" as="ob_deb" key="0" is-fact-use="1" />
        <call function="over" as="dolg_deb" type="number" key="0">
          <call function="sum">
            <column table="a" column="ob_deb" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="this" column="kodp" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="over" as="dolg_kred" type="number" key="0">
          <call function="sum">
            <column table="a" column="ob_kred" is-fact-use="1" />
          </call>
          <call function="partition by">
            <column table="this" column="kodp" />
          </call>
          <call function="order by 2">
            <column table="this" column="ym" />
          </call>
        </call>
      </select>
      <from>
        <query name="38445(20)-1" as="a">
          <withparams>
            <useparam name="p_kodp_array_id" />
          </withparams>
        </query>
        <query name="38445(20)-prfl" as="c" join="right outer" dname="38445(20)-all">
          <call function="and">
            <call function="=">
              <column table="c" column="ym" />
              <column table="a" column="ym" />
            </call>
            <call function="=">
              <column table="c" column="kodp" />
              <column table="a" column="kodp" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
        </call>
      </where>
      <order>
        <column column="kodp" />
        <column column="ym" />
      </order>
    </query>
    <query name="38445(20)-1" timestamp="19.12.2016 19:58:04" order="kodp,ym" materialize="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
      </params>
      <expressions>
        <call as="vid_real_2_8" function="=1">
          <column table="kod_sf" column="pr_osn2_stored" />
        </call>
        <call as="nachisl" group="sum" function="()" type="number">
          <fact column="s_facras_nachisl_nds" condition="vid_real_2_8" />
        </call>
        <call as="opl_2_8" group="sum" function="if" type="number">
          <call function="in">
            <column table="kod_opl" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <fact column="s_facopl_oplf" condition="vid_real_2_8" />
        </call>
        <call as="opl" group="sum" function="+nvl">
          <fact column="opl_2_8" />
          <fact column="s_opl_kred_oplf" />
        </call>
        <call as="ob_deb" group="sum" function="-nvl" type="number">
          <fact column="oborot" condition="vid_real_2_8" />
          <fact column="oborot_spis" condition="vid_real_2_8" />
        </call>
        <call as="ob_kred" group="sum" function="()" type="number">
          <fact column="oborot_kr" />
        </call>
      </expressions>
      <select>
        <column table="kodp" column="kodp" as="kodp" />
        <column table="ym" column="val" as="ym" />
        <fact column="nachisl" as="nachisl" is-fact-use="1" />
        <fact column="opl" as="opl" is-fact-use="1" />
        <fact column="ob_kred" as="ob_kred" is-fact-use="1" />
        <fact column="ob_deb" as="ob_deb" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="ym" />
          <link name="kodp" />
        </qube>
      </from>
      <order>
        <column column="kodp" />
        <column column="ym" />
      </order>
    </query>
    <query name="38445(20)-prfl" timestamp="19.12.2016 19:57:50" order="kodp,ym" materialize="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml" haskeys="1">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
      </params>
      <select>
        <column table="kodp" column="kodp" as="kodp" key="1" fixed="1" />
        <column table="ym" column="ym" as="ym" key="0" />
      </select>
      <from>
        <query name="d_payer" as="kodp" />
        <query name="n_calc_dist" as="ym" join="cross" />
      </from>
      <order>
        <column column="kodp" />
        <column column="ym" />
      </order>
    </query>
    <query name="qry_38445_20" timestamp="19.12.2016 19:08:02" order="kodp,ym" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml">
      <params>
        <param type="number" name="ym1">
          <const>2007.01</const>
        </param>
        <param type="number" name="ym2">
          <const>2017.08</const>
        </param>
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="38445(20)-all" as="a" />
      </from>
      <where>
        <call function="between">
          <column table="a" column="ym" />
          <useparam name="ym1" />
          <useparam name="ym2" />
        </call>
      </where>
      <order>
        <column column="kodp" />
        <column column="ym" />
      </order>
    </query>
    <query name="38445(20)-test" timestamp="19.12.2016 17:28:53" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
      </params>
      <expressions>
        <call as="vid_real_2_8" function="=1">
          <column table="kod_sf" column="pr_osn2_stored" />
        </call>
        <call as="nachisl" group="sum" function="()" type="number">
          <fact column="s_facras_nachisl_nds" condition="vid_real_2_8" />
        </call>
        <call as="opl_2_8" group="sum" function="if" type="number">
          <call function="in">
            <column table="kod_opl" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <fact column="s_facopl_oplf" condition="vid_real_2_8" />
        </call>
        <call as="opl" group="sum" function="+nvl">
          <fact column="opl_2_8" />
          <fact column="s_opl_kred_oplf" />
        </call>
        <call as="ob_deb" group="sum" function="-nvl" type="number">
          <fact column="oborot" condition="vid_real_2_8" />
          <fact column="oborot_spis" condition="vid_real_2_8" />
        </call>
        <call as="ob_kred" group="sum" function="()" type="number">
          <fact column="oborot_kr" />
        </call>
        <call function="if" as="oborot_end" group="sum">
          <call function="and" as="cond3">
            <call function="le">
              <column table="ym" column="val" />
              <const>2016.10</const>
            </call>
          </call>
          <fact column="oborot" />
        </call>
      </expressions>
      <select>
        <column table="kodp" column="kodp" as="kodp" />
        <column table="ym" column="val" as="ym" />
        <fact column="nachisl" as="nachisl" is-fact-use="1" />
        <fact column="opl" as="opl" is-fact-use="1" />
        <fact column="ob_kred" as="ob_kred" is-fact-use="1" />
        <fact column="ob_deb" as="ob_deb" is-fact-use="1" />
        <fact column="oborot_end" as="oborot_end" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="ym" />
          <link name="kodp" />
          <where>
            <call function="in">
              <column table="kodp" column="kodp" />
              <call function="array">
                <const>102100400</const>
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="38445(20)-test2" timestamp="19.12.2016 17:34:28" order="kodp,ym" file="sql.builder.templates\sql.builder\projects\asuse1\reports\38445(20).xml">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
      </params>
      <expressions>
        <call as="vid_real_2_8" function="=1">
          <column table="kod_sf" column="pr_osn2_stored" />
        </call>
        <call as="nachisl" group="sum" function="()" type="number">
          <fact column="s_facras_nachisl_nds" condition="vid_real_2_8" />
        </call>
        <call as="opl_2_8" group="sum" function="if" type="number">
          <call function="in">
            <column table="kod_opl" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <fact column="s_facopl_oplf" condition="vid_real_2_8" />
        </call>
        <call as="opl" group="sum" function="+nvl">
          <fact column="opl_2_8" />
          <fact column="s_opl_kred_oplf" />
        </call>
        <call as="ob_deb" group="sum" function="-nvl" type="number">
          <fact column="oborot" condition="vid_real_2_8" />
          <fact column="oborot_spis" condition="vid_real_2_8" />
        </call>
        <call as="ob_kred" group="sum" function="()" type="number">
          <fact column="oborot_kr" />
        </call>
      </expressions>
      <select>
        <column table="kodp" column="kodp" as="kodp" />
        <column table="ym" column="val" as="ym" />
        <fact column="nachisl" as="nachisl" is-fact-use="1" />
        <fact column="opl" as="opl" is-fact-use="1" />
        <fact column="ob_kred" as="ob_kred" is-fact-use="1" />
        <fact column="ob_deb" as="ob_deb" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="ym" />
          <link name="kodp" />
          <where>
            <call function="in">
              <column table="kodp" column="kodp" />
              <call function="array">
                <const>102100400</const>
              </call>
            </call>
          </where>
        </qube>
      </from>
      <order>
        <column column="kodp" />
        <column column="ym" />
      </order>
    </query>
    <query name="48118" timestamp="23.08.2018 19:33:25" is-report="1" use-temp="1" file="sql.builder.templates\sql.builder\projects\asuse1\reports\48118.xml" haskeys="1">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
        <param name="p_date" type="date">
          <const>sysdate-10</const>
        </param>
        <param name="p_ym" type="number">
          <const>2018.05</const>
        </param>
      </params>
      <select>
        <column table="a" column="kodp" group="1" as="kodp" key="1" fixed="1" />
        <column table="a" column="ob_deb" as="dz" group="sum" key="0" is-fact-use="1" />
        <column table="a" column="ob_kred" as="kz" group="sum" key="0" is-fact-use="1" />
        <column table="a" column="ym" as="first_dolg_ym" group="min" key="0" />
      </select>
      <from>
        <query name="48118-1" as="a">
          <withparams>
            <useparam name="p_kodp_array_id" />
            <useparam name="p_date" />
            <useparam name="p_ym" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="48118-1" timestamp="27.06.2018 18:51:14" file="sql.builder.templates\sql.builder\projects\asuse1\reports\48118.xml">
      <params>
        <param name="p_kodp_array_id" type="string">
          <const>'list1'</const>
        </param>
        <param name="p_date" type="date">
          <const>sysdate-10</const>
        </param>
        <param name="p_ym" type="number">
          <const>2018.05</const>
        </param>
      </params>
      <expressions>
        <call as="vid_real_2_8" function="=1">
          <column table="kod_sf" column="pr_osn2_stored" />
        </call>
        <call as="nachisl" group="sum" function="()" type="number">
          <fact column="s_facras_nachisl_nds" condition="vid_real_2_8" />
        </call>
        <call as="opl_2_8" group="sum" function="if" type="number">
          <call function="in">
            <column table="kod_opl" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <fact column="s_facopl_oplf" condition="vid_real_2_8" />
        </call>
        <call as="opl" group="sum" function="+nvl">
          <fact column="opl_2_8" />
          <fact column="s_opl_kred_oplf" />
        </call>
        <call as="ob_deb" group="sum" function="()" type="number">
          <fact column="oborot" condition="vid_real_2_8" />
        </call>
        <call as="ob_kred" group="sum" function="()" type="number">
          <fact column="oborot_kr" />
        </call>
      </expressions>
      <select>
        <column table="kodp" column="kodp" as="kodp" />
        <call function="if" type="number" as="ym">
          <call function="!=0">
            <column table="this" column="ob_deb" />
          </call>
          <column as="ym" column="ym" table="kod_sf" />
        </call>
        <column column="kod_sf" table="kod_sf" as="kod_sf" />
        <fact column="ob_kred" as="ob_kred" is-fact-use="1" />
        <fact column="ob_deb" table="sf" as="ob_deb" is-fact-use="1" />
        <fact column="s_facras_nachisl_nds" table="sf" as="s_facras_nachisl_nds" is-fact-use="1" />
        <fact column="s_facopl_opl_nds" table="sf" as="s_facopl_opl_nds" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kodp" />
          <link name="dat" />
          <dimset as="sf">
            <link name="kod_sf" />
            <where>
              <call function="le">
                <column table="kod_sf" column="ym" />
                <useparam name="p_ym" />
              </call>
            </where>
          </dimset>
          <where>
            <call function="and">
              <call function="le">
                <column table="dat" column="val" />
                <useparam name="p_date" />
              </call>
              <call function="in">
                <column table="kodp" column="kodp" />
                <call function="vr_number_array.get">
                  <useparam name="p_kodp_array_id" />
                </call>
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="49496" timestamp="17.09.2018 14:25:47" file="sql.builder.templates\sql.builder\projects\asuse1\reports\49496.xml" haskeys="1">
      <params>
        <param type="date" name="p_date">
          <const>sysdate</const>
        </param>
      </params>
      <select>
        <call function="rownum" key="1" as="rn" />
        <column table="kod_sf" column="kod_deb" as="kod_deb" />
        <column table="kodp" column="kodp" as="kodp" />
        <column table="kodp" column="inn" as="inn" />
        <column table="kodp" column="name" as="name" />
        <call function="-" as="oborot">
          <fact column="oborot_o" />
          <fact column="oborot_o_spis" />
        </call>
        <column table="kod_sf" column="num_sf" title="Номер счета" as="num_sf" />
        <column table="kod_sf" column="dat_sf" title="Дата счета" as="dat_sf" />
        <call function="||" as="vid_real">
          <call function="||">
            <column table="vid_real" column="vid_real" title="Вид реализации" />
            <const>' '</const>
          </call>
          <column table="vid_real" column="name" title="Вид реализации" />
        </call>
        <column table="kod_sf" column="dat_uchet" title="Дата постановки на учет" as="dat_uchet" />
        <fact column="ur_dat_entry_max" title="Дата вступления в законную силу" as="ur_dat_entry_max" is-fact-use="1" />
        <call function="over" as="kod_deb_oborot" type="number">
          <call function="sum">
            <column table="this" column="oborot" />
          </call>
          <call function="partition by">
            <column table="kod_sf" column="kod_deb" />
          </call>
        </call>
        <call function="over" as="kodp_oborot" type="number">
          <call function="sum">
            <column table="this" column="oborot" />
          </call>
          <call function="partition by">
            <column table="kodp" column="kodp" />
          </call>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_sf">
            <link name="vid_real" />
          </link>
          <link name="kodp" />
          <link name="dat" />
          <where>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>4</const>
                <const>7</const>
              </call>
            </call>
            <call function="is null">
              <column table="kod_sf" column="ym_end_dolg" />
            </call>
            <call function="lt">
              <column table="dat" column="val" />
              <useparam name="p_date" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="49496-report" timestamp="17.09.2018 14:13:47" is-report="1" title="Задолженность по санкциям " file="sql.builder.templates\sql.builder\projects\asuse1\reports\49496.xml" haskeys="1">
      <params>
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="p_date" title="Дата" mandatory="1" />
      </params>
      <content>
        <usefield name="p_date" title="Дата" type="date" field="cmn_date_cur" mandatory="1" />
      </content>
      <select>
        <column table="a" column="rn" as="rn" key="1" />
        <column table="a" column="kodp" as="kodp" key="0" />
        <column table="a" column="inn" as="inn" key="0" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="oborot" as="oborot" key="0" />
        <column table="a" column="num_sf" as="num_sf" key="0" />
        <column table="a" column="dat_sf" as="dat_sf" key="0" />
        <column table="a" column="vid_real" as="vid_real" key="0" />
        <column table="a" column="dat_uchet" as="dat_uchet" key="0" />
        <column table="a" column="ur_dat_entry_max" as="ur_dat_entry_max" key="0" is-fact-use="1" />
      </select>
      <from>
        <query name="49496" as="a">
          <withparams>
            <useparam name="p_date" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="!=">
            <column table="a" column="kodp_oborot" />
            <const>0</const>
          </call>
          <call function="!=">
            <column table="a" column="kod_deb_oborot" />
            <const>0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="49496-report_test" timestamp="14.09.2018 20:47:55" is-report="1" title="Задолженность по санкциям " visible="0" file="sql.builder.templates\sql.builder\projects\asuse1\reports\49496.xml" haskeys="1">
      <params>
        <param controlType="UIDate" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="p_date" title="Дата" mandatory="1" />
      </params>
      <content>
        <usefield name="p_date" title="Дата" type="date" field="cmn_date_cur" mandatory="1" />
      </content>
      <select>
        <call function="rownum" key="1" as="rn" />
        <column table="kodp" column="kodp" as="kodp" />
        <column table="kodp" column="inn" as="inn" />
        <column table="kodp" column="name" as="name" />
        <call function="-" as="oborot_o_oborot_o_spis" title="oborot_o_oborot_o_spis">
          <fact column="oborot_o" />
          <fact column="oborot_o_spis" />
        </call>
        <fact column="oborot_o" title="oborot_o" as="oborot_o" is-fact-use="1" />
        <fact column="oborot_o_spis" title="oborot_o_spis" as="oborot_o_spis" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kod_sf" />
          <link name="kodp" />
          <link name="dat" />
          <where>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>4</const>
                <const>7</const>
              </call>
            </call>
            <call function="is null">
              <column table="kod_sf" column="ym_end_dolg" />
            </call>
            <call function="lt">
              <column table="dat" column="val" />
              <useparam name="p_date" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="voda_par" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\d_payer.xml" haskeys="1">
      <select>
        <column table="a" column="voda_par" type="number" as="voda_par" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вода/Пар" as="name" key="0"></column>
      </select>
      <from>
        <table name="voda_par" as="a" view="1"></table>
      </from>
    </query>
    <query name="n_calc" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" type="number" as="ym" key="1" fixed="1" />
        <call function="ym to char" as="name" title="Период" key="0">
          <column table="a" column="ym"></column>
        </call>
      </select>
      <from>
        <table name="n_calc" as="a" view="1"></table>
      </from>
    </query>
    <query name="n_calc_dist" order="1 desc" class="1" timestamp="16.12.2016 17:38:19" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <column table="a" column="name" group="max" as="name" key="0" />
      </select>
      <from>
        <query name="n_calc" as="a" />
      </from>
      <order>
        <column column="1" />
      </order>
    </query>
    <query name="n_year" order="1 desc" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml" haskeys="1">
      <select>
        <call function="trunc" as="year" group="1" key="1" fixed="1">
          <column table="a" column="ym" />
        </call>
        <call function="trunc" as="name" title="Год" group="max" key="0">
          <column table="a" column="ym" />
        </call>
      </select>
      <from>
        <query name="n_calc" as="a"></query>
      </from>
      <order>
        <column column="1" />
      </order>
    </query>
    <query name="n_year_last4" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="n_year" as="a"></query>
      </from>
      <where>
        <call function="between">
          <column table="a" column="year" />
          <call function="-">
            <call function="year">
              <const>sysdate</const>
            </call>
            <const>4</const>
          </call>
          <call function="-">
            <call function="year">
              <const>sysdate</const>
            </call>
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="n_calc_max" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="max" as="ym" key="1" fixed="1"></column>
      </select>
      <from>
        <query name="n_calc" as="a"></query>
      </from>
      <where>
        <call function="lt">
          <column table="a" column="ym"></column>
          <call function="date to ym">
            <const>sysdate</const>
          </call>
        </call>
      </where>
    </query>
    <query name="s_edizm_used" inherit="s_edizm" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_edizm.xml" haskeys="1">
      <links>
        <dlink name="s_nachisl"></dlink>
      </links>
      <where>
        <call function="is not null">
          <column table="s_nachisl" column="grup" dgroup="max" />
        </call>
      </where>
      <select>
        <column table="a" column="kod" type="number" title="" dimension="kod_edizm" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="dat" type="date" title="" as="dat" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kod_okei" type="string" as="kod_okei" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_edizm" as="a">
          <dlink name="s_nachisl" as="s_nachisl" table="s_nachisl" child="s_nachisl" field="izm" parent="s_edizm" back="s_nachisl"></dlink>
        </table>
      </from>
    </query>
    <query name="s_edizm_used2" inherit="s_edizm_used" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_edizm.xml" haskeys="1">
      <links>
        <dlink name="s_nachisl"></dlink>
      </links>
      <where>
        <call function="and">
          <call function="!=">
            <column table="a" column="kod" />
            <const>2</const>
          </call>
          <call function="is not null">
            <column table="s_nachisl" column="grup" dgroup="max" />
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod" type="number" title="" dimension="kod_edizm" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="dat" type="date" title="" as="dat" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kod_okei" type="string" as="kod_okei" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_edizm" as="a">
          <dlink name="s_nachisl" as="s_nachisl" table="s_nachisl" child="s_nachisl" field="izm" parent="s_edizm" back="s_nachisl"></dlink>
          <dlink name="s_nachisl" as="s_nachisl" table="s_nachisl" child="s_nachisl" field="izm" parent="s_edizm" back="s_nachisl"></dlink>
        </table>
      </from>
    </query>
    <query name="s_facopl_spis" timestamp="27.06.2018 16:48:14" class="1" inherit="s_facopl" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fopl" type="number" dimension="kod_fopl" as="kod_fopl" key="1" fixed="1" />
        <column table="a" column="kod_ras" type="number" as="kod_ras" reference="s_facras" refcol="kod_ras" key="0" />
        <column table="a" column="datao" type="date" title="" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="datao" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="opl" type="number" title="Оплачено без НДС (руб)" fact="s_facopl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="nal" type="number" title="Оплачено НДС (руб)" fact="s_facopl_nal" agg="sum" as="nal" key="0" />
        <column table="a" column="datao_vdoc" type="date" title="" as="datao_vdoc" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="cust" type="number" title="" as="cust" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено с НДС (руб)" fact="s_facopl_oplf" agg="sum" key="0">
          <column table="a" column="opl" />
          <column table="a" column="nal" />
        </call>
        <call function="+" as="ym" title="Отчетный период документа оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="oplf" as="oplf_spis" agg="sum" fact="s_facopl_spis_oplf" key="0" />
        <call function="if" as="ym_spis" dimension="ym" key="0">
          <call function="ge">
            <column table="kod_fopl" column="ym" />
            <call function="date to ym">
              <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
            </call>
          </call>
          <column table="kod_fopl" column="ym" />
          <call function="date to ym">
            <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
          </call>
        </call>
        <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" key="0" />
      </select>
      <from>
        <table name="s_facopl" as="a" title="Расшифровка оплаты">
          <link name="kod_opl" as="kod_opl1" table="s_opl" child="s_facopl_spis" field="kod_opl" parent="s_opl" back="s_facopl_spis">
            <elink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
          </link>
          <link name="kod_ras" as="kod_ras1" table="s_facras" child="s_facopl_spis" field="kod_ras" parent="s_facras" back="s_facopl_spis">
            <link name="kod_sf" dimension="1" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
              <link name="kodp" dimension="1" as="kodp" table="d_payer" child="s_facvip" field="kodp" parent="d_payer" back="s_facvip" />
            </link>
          </link>
          <link name="kod_ras" as="kod_ras1" table="s_facras" child="s_facopl_spis" field="kod_ras" parent="s_facras" back="s_facopl_spis">
            <link name="kod_sf" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
              <link name="kod_deb" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
                <link name="spis_kod_deb" as="spis_kod_deb" table="s_debet_spis" child="s_debet" field="spis_kod_deb" parent="s_debet_spis" back="s_debet" />
              </link>
            </link>
          </link>
        </table>
        <query name="s_facras" as="kod_ras" join="left outer" dimension="1" dname="s_facopl_spis">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl" join="left outer" dimension="1" dname="s_facopl_spis">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="s_facopl" dimension="1" as="kod_fopl" join="left outer" dname="s_facopl_spis" title="Расшифровка оплаты">
          <call function="=">
            <column table="a" column="kod_fopl" />
            <column table="kod_fopl" column="kod_fopl" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
        </call>
      </where>
      <links>
        <link name="kod_ras" as="kod_ras1">
          <link name="kod_sf">
            <link name="kod_deb">
              <link name="spis_kod_deb" />
            </link>
          </link>
        </link>
      </links>
    </query>
    <query name="s_opl_spis" timestamp="22.09.2016 21:38:02" class="1" inherit="s_opl" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="vid_opl" type="string" title="" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="" as="datao" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_ist" type="date" title="" as="dat_ist" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="dat_end_dolg" type="date" title="" as="dat_end_dolg" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено (руб.)" fact="s_opl_oplf" agg="sum" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="+" as="ym" title="Отчетный период оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="dat_oper" type="date" dimension="dat" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="datao" />
          <call function="ym end time">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="if" as="opl_t0" type="number" title="Оплата начислений без погашения (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t1t2" type="number" title="Оплата переплат и авансов (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4" type="number" title="Погашение факта переплатами/авансами (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4pr" title="Погашение факта переплатами/авансами прошлого периода (руб.)" key="0">
          <call function="lt">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="if" as="opl_t3t4tek" title="Погашение факта переплатами/авансами текущего периода (руб.)" key="0">
          <call function="=">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="case" as="kod_type_opl" type="number" key="0">
          <!--[11:32] [Данилин Александр] короче
          kod_type_opl
          0 -все остальное
          1- vid_pl=2 and flag_raznos=0 and kod_parent is null
          2- vid_pl=0 and kod_parent is null
          3,4- vid_pl=2 and flag_raznos=1 and kod_parent is not null
          5- vid_pl=2 and flag_raznos=0 and kod_parent is not null
          6- vid_pl=0 and kod_parent is not null-->
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="oplf" as="oplf_spis" agg="sum" fact="s_opl_spis_oplf" key="0" />
        <call function="if" as="ym_spis" dimension="ym" key="0">
          <call function="ge">
            <column table="kod_opl" column="ym" />
            <call function="date to ym">
              <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
            </call>
          </call>
          <column table="kod_opl" column="ym" />
          <call function="date to ym">
            <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
          </call>
        </call>
        <call function="greatest" as="dat_spis" key="0">
          <column table="a" column="datao" />
          <column table="spis_kod_deb" column="dat_spis" dgroup="min" />
        </call>
      </select>
      <from>
        <table name="s_opl" as="a">
          <dlink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
          <link name="kod_sf" as="kod_sf1" table="s_facvip" child="s_opl_spis" field="kod_sf" parent="s_facvip" back="s_opl_spis">
            <link name="kod_deb" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
              <link name="spis_kod_deb" as="spis_kod_deb" table="s_debet_spis" child="s_debet" field="spis_kod_deb" parent="s_debet_spis" back="s_debet" />
            </link>
          </link>
          <dlink name="s_opl_spis_isp" dimension="1" as="s_opl_spis_isp" table="s_opl_spis_isp" child="s_opl_spis_isp" field="kod_opl" parent="s_opl_spis" back="s_opl_spis_isp" />
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-final-dimension="1" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl_prev" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" as="kod_parent" join="left outer" dname="childs">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" dimension="1" as="kod_opl" join="left outer" dname="s_opl_spis">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
        </call>
      </where>
      <links>
        <link name="kod_sf" as="kod_sf1">
          <link name="kod_deb">
            <link name="spis_kod_deb" />
          </link>
        </link>
        <dlink name="s_opl_spis_isp" dimension="1" />
      </links>
    </query>
    <query name="s_opl_kred" timestamp="16.12.2016 17:02:32" class="1" inherit="s_opl" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="vid_opl" type="string" title="" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="" as="datao" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_ist" type="date" title="" as="dat_ist" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="dat_end_dolg" type="date" title="" as="dat_end_dolg" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено (руб.)" fact="s_opl_oplf" agg="sum" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="+" as="ym" title="Отчетный период оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="dat_oper" type="date" dimension="dat" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="datao" />
          <call function="ym end time">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="if" as="opl_t0" type="number" title="Оплата начислений без погашения (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t1t2" type="number" title="Оплата переплат и авансов (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4" type="number" title="Погашение факта переплатами/авансами (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4pr" title="Погашение факта переплатами/авансами прошлого периода (руб.)" key="0">
          <call function="lt">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="if" as="opl_t3t4tek" title="Погашение факта переплатами/авансами текущего периода (руб.)" key="0">
          <call function="=">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="case" as="kod_type_opl" type="number" key="0">
          <!--[11:32] [Данилин Александр] короче
          kod_type_opl
          0 -все остальное
          1- vid_pl=2 and flag_raznos=0 and kod_parent is null
          2- vid_pl=0 and kod_parent is null
          3,4- vid_pl=2 and flag_raznos=1 and kod_parent is not null
          5- vid_pl=2 and flag_raznos=0 and kod_parent is not null
          6- vid_pl=0 and kod_parent is not null-->
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="oplf" as="oplf_kred" agg="sum" fact="s_opl_kred_oplf" key="0" />
      </select>
      <from>
        <table name="s_opl" as="a">
          <dlink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-final-dimension="1" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl_prev" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" as="kod_parent" join="left outer" dname="childs">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" dimension="1" as="kod_opl" join="left outer" dname="s_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" dgroup="min" />
          <call function="array">
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="s_opl_stor" timestamp="16.12.2016 15:52:06" class="1" inherit="s_opl" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="vid_opl" type="string" title="" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="" as="datao" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_ist" type="date" title="" as="dat_ist" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="dat_end_dolg" type="date" title="" as="dat_end_dolg" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено (руб.)" fact="s_opl_oplf" agg="sum" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="+" as="ym" title="Отчетный период оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="dat_oper" type="date" dimension="dat" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="datao" />
          <call function="ym end time">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="if" as="opl_t0" type="number" title="Оплата начислений без погашения (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t1t2" type="number" title="Оплата переплат и авансов (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4" type="number" title="Погашение факта переплатами/авансами (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4pr" title="Погашение факта переплатами/авансами прошлого периода (руб.)" key="0">
          <call function="lt">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="if" as="opl_t3t4tek" title="Погашение факта переплатами/авансами текущего периода (руб.)" key="0">
          <call function="=">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="case" as="kod_type_opl" type="number" key="0">
          <!--[11:32] [Данилин Александр] короче
          kod_type_opl
          0 -все остальное
          1- vid_pl=2 and flag_raznos=0 and kod_parent is null
          2- vid_pl=0 and kod_parent is null
          3,4- vid_pl=2 and flag_raznos=1 and kod_parent is not null
          5- vid_pl=2 and flag_raznos=0 and kod_parent is not null
          6- vid_pl=0 and kod_parent is not null-->
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="oplf" as="oplf_stor" agg="sum" fact="s_opl_stor_oplf" key="0" />
      </select>
      <from>
        <table name="s_opl" as="a">
          <dlink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-final-dimension="1" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl_prev" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" as="kod_parent" join="left outer" dname="childs">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" dimension="1" as="kod_opl" join="left outer" dname="s_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" dgroup="min" />
          <call function="array">
            <const>5</const>
            <const>6</const>
          </call>
        </call>
      </where>
    </query>
    <query name="s_facras(date)" inherit="s_facras" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facras.xml" haskeys="1">
      <params>
        <param name="date" />
      </params>
      <select>
        <column table="a" column="kod_ras" type="number" dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodg" type="number" title="" as="kodg" reference="d_tarif" refcol="kod" key="0" />
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="s_nachisl" refcol="k_vid" key="0" />
        <column table="a" column="okdp" type="string" title="" as="okdp" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="s_edizm" refcol="kod" key="0" />
        <column table="a" column="cust" type="number" title="Начислено нат. пок." fact="s_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено без НДС (руб)" fact="s_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="nds" type="number" title="Начислено НДС (руб)" agg="sum" fact="s_facras_nds" as="nds" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="tip_nds" type="number" title="" as="tip_nds" reference="k_nds" refcol="tip_nds" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="datdog" type="date" title="" as="datdog" key="0" />
        <column table="a" column="k_podvid" type="number" title="" as="k_podvid" reference="s_podnachisl" refcol="k_podvid" key="0" />
        <column table="a" column="kod_rasch_norm" type="number" as="kod_rasch_norm" key="0" />
        <column table="a" column="kod_ras_kor" type="number" comment="код строки корректируемой сф" as="kod_ras_kor" key="0" />
        <column table="a" column="flagstor" type="number" title="" as="flagstor" key="0" />
        <column table="a" column="ktu" type="number" title="" as="ktu" key="0" />
        <column table="a" column="custx" type="number" title="" as="custx" key="0" />
        <call function="+nvl" as="nachislf" title="Начислено с НДС (руб)" key="0">
          <column table="a" column="nachisl"></column>
          <column table="a" column="nds"></column>
        </call>
        <call function="if" as="edizm2" type="number" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <const>-2</const>
          <column table="a" column="edizm" />
        </call>
        <call function="if" as="cust2" type="number" title="Начислено нат. пок." key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <call function="/">
            <column table="a" column="cust" />
            <const>0.98318</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="s_facopl" column="oplf" dgroup="sum" as="oplf" key="0"></column>
        <call function="-nvl" as="ostatok" title="Дебиторская задолженность (руб.)" key="0">
          <column table="this" column="nachislf"></column>
          <column table="this" column="oplf"></column>
        </call>
        <call function="if" as="spis" type="number" title="Списанная задолженность (руб.)" key="0">
          <call function="lt">
            <call function="nvl">
              <column table="kod_deb" column="date_spis" />
              <call function="doomsday" />
            </call>
            <useparam name="date" />
          </call>
          <column table="this" column="ostatok" />
        </call>
        <call function="-nvl" as="ostatok_s" title="Дебиторская задолженность (руб.)" key="0">
          <column table="this" column="ostatok"></column>
          <column table="this" column="spis"></column>
        </call>
        <call function="if" as="dolg" type="number" title="Просроченная задолженность (руб.)" key="0">
          <call function="le">
            <column table="kod_sf" column="dat_bzad" />
            <useparam name="date" />
          </call>
          <column table="this" column="ostatok_s" />
        </call>
      </select>
      <where>
        <call function="and">
          <call function="le">
            <call function="ym end time">
              <column table="kod_sf" column="ym" />
            </call>
            <!--<column table="kod_sf" column="dat_sf"/>-->
            <useparam name="date" />
          </call>
        </call>
      </where>
      <links>
        <link name="kod_sf" usenl="2">
          <link name="kod_deb" usenl="2" />
        </link>
        <dlink name="s_facopl">
          <where>
            <call function="lt">
              <column table="s_facopl" column="datao" />
              <useparam name="date" />
            </call>
          </where>
        </dlink>
      </links>
      <from>
        <table name="s_facras" as="a">
          <link name="kod_sf" usenl="2" as="kod_sf" table="s_facvip" child="s_facras(date)" field="kod_sf" parent="s_facvip" back="s_facras(date)">
            <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip" />
          </link>
          <dlink name="s_facopl" as="s_facopl" table="s_facopl" child="s_facopl" field="kod_ras" parent="s_facras" back="s_facopl" title="Расшифровка оплаты">
            <where>
              <call function="lt">
                <column table="s_facopl" column="datao" />
                <useparam name="date" />
              </call>
            </where>
          </dlink>
        </table>
        <query name="d_tarif" as="kodg" join="left outer" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="kodg" />
            <column table="kodg" column="kod" />
          </call>
        </query>
        <query name="k_nds" as="tip_nds" join="left outer" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="tip_nds" />
            <column table="tip_nds" column="tip_nds" />
          </call>
        </query>
        <query name="s_edizm" as="edizm" join="left outer" dimension="1" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="kod" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_nachisl" as="vid_t" join="left outer" dimension="1" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="k_vid" />
          </call>
        </query>
        <query name="s_podnachisl" as="k_podvid" join="left outer" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="k_podvid" />
            <column table="k_podvid" column="k_podvid" />
          </call>
        </query>
        <query name="s_edizm" as="edizm2" join="left outer" dname="s_facras(date)">
          <call function="=">
            <column table="a" column="edizm2"></column>
            <column table="edizm2" column="kod"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="s_facras_spis" timestamp="22.09.2016 21:03:30" inherit="s_facras" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodg" type="number" title="" as="kodg" reference="d_tarif" refcol="kod" key="0" />
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="s_nachisl" refcol="k_vid" key="0" />
        <column table="a" column="okdp" type="string" title="" as="okdp" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="s_edizm" refcol="kod" key="0" />
        <column table="a" column="cust" type="number" title="Начислено нат. пок." fact="s_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено без НДС (руб)" fact="s_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="nds" type="number" title="Начислено НДС (руб)" agg="sum" fact="s_facras_nds" as="nds" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="tip_nds" type="number" title="" as="tip_nds" reference="k_nds" refcol="tip_nds" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="datdog" type="date" title="" as="datdog" key="0" />
        <column table="a" column="k_podvid" type="number" title="" as="k_podvid" reference="s_podnachisl" refcol="k_podvid" key="0" />
        <column table="a" column="kod_rasch_norm" type="number" as="kod_rasch_norm" key="0" />
        <column table="a" column="kod_ras_kor" type="number" comment="код строки корректируемой сф" as="kod_ras_kor" key="0" />
        <column table="a" column="flagstor" type="number" title="" as="flagstor" key="0" />
        <column table="a" column="ktu" type="number" title="" as="ktu" key="0" />
        <column table="a" column="custx" type="number" title="" as="custx" key="0" />
        <call function="+nvl" as="nachislf" title="Начислено с НДС (руб)" key="0">
          <column table="a" column="nachisl"></column>
          <column table="a" column="nds"></column>
        </call>
        <call function="if" as="edizm2" type="number" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <const>-2</const>
          <column table="a" column="edizm" />
        </call>
        <call function="if" as="cust2" type="number" title="Начислено нат. пок." key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <call function="/">
            <column table="a" column="cust" />
            <const>0.98318</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="nachislf" as="nachislf_spis" fact="s_facras_spis_nachislf" agg="sum" key="0" />
        <call function="date to ym" as="ym" dimension="ym" key="0">
          <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
        </call>
      </select>
      <from>
        <table name="s_facras" as="a">
          <link name="kod_sf" as="kod_sf1" table="s_facvip" child="s_facras_spis" field="kod_sf" parent="s_facvip" back="s_facras_spis">
            <link name="kod_deb" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
              <link name="spis_kod_deb" as="spis_kod_deb" table="s_debet_spis" child="s_debet" field="spis_kod_deb" parent="s_debet_spis" back="s_debet" />
            </link>
          </link>
          <dlink name="s_facras_spis_isp" dimension="1" as="s_facras_spis_isp" table="s_facras_spis_isp" child="s_facras_spis_isp" field="kod_ras" parent="s_facras_spis" back="s_facras_spis_isp" />
        </table>
        <query name="d_tarif" as="kodg" join="left outer" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="kodg" />
            <column table="kodg" column="kod" />
          </call>
        </query>
        <query name="k_nds" as="tip_nds" join="left outer" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="tip_nds" />
            <column table="tip_nds" column="tip_nds" />
          </call>
        </query>
        <query name="s_edizm" as="edizm" join="left outer" dimension="1" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="kod" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_nachisl" as="vid_t" join="left outer" dimension="1" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="k_vid" />
          </call>
        </query>
        <query name="s_podnachisl" as="k_podvid" join="left outer" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="k_podvid" />
            <column table="k_podvid" column="k_podvid" />
          </call>
        </query>
        <query name="s_edizm" as="edizm2" join="left outer" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="edizm2"></column>
            <column table="edizm2" column="kod"></column>
          </call>
        </query>
        <query name="s_facras" as="kod_ras" join="left outer" dimension="1" dname="s_facras_spis">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="spis_kod_deb" column="dat_spis" dgroup="min" as="date_spis" />
        </call>
      </where>
      <links>
        <link name="kod_sf" as="kod_sf1">
          <link name="kod_deb">
            <link name="spis_kod_deb" />
          </link>
        </link>
        <dlink name="s_facras_spis_isp" dimension="1" />
      </links>
    </query>
    <query name="s_facras_spis_isp" timestamp="22.09.2016 21:11:38" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facras.xml" haskeys="1">
      <select>
        <call function="||" as="kod_fr_sp_isp" key="1">
          <column table="this" column="kod_ras" />
          <const>'-'</const>
          <column table="this" column="kod_ur_sf_isp" />
        </call>
        <column table="a" column="kod_ras" as="kod_ras" />
        <column table="v_ur_sf_isp" column="kod_ur_sf_isp" as="kod_ur_sf_isp" />
        <call function="latest" as="dat_ur" dimension="dat_ur">
          <column table="spis_kod_deb" column="dat_spis" />
          <column table="v_ur_sf_isp" column="dat_cr_isp" />
        </call>
      </select>
      <from>
        <query name="s_facras" as="a">
          <link name="kod_sf" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
            <elink name="v_ur_sf_isp" as="v_ur_sf_isp" table="v_ur_sf_isp" child="v_ur_sf_isp" field="kod_sf" parent="s_facvip" back="v_ur_sf_isp" />
            <link name="kod_deb" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
              <link name="spis_kod_deb" as="spis_kod_deb" table="s_debet_spis" child="s_debet" field="spis_kod_deb" parent="s_debet_spis" back="s_debet" />
            </link>
          </link>
        </query>
        <query name="s_facras_spis" as="kod_ras" join="left outer" dname="s_facras_spis_isp">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="v_ur_sf_isp" as="kod_ur_sf_isp" join="left outer" dimension="1" dname="s_facras_spis_isp">
          <call function="=">
            <column table="this" column="kod_ur_sf_isp" />
            <column table="kod_ur_sf_isp" column="kod_ur_sf_isp" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_facvip(date)" inherit="s_facvip" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facvip.xml" haskeys="1">
      <params>
        <param name="date" />
      </params>
      <select>
        <column table="a" column="kod_sf" type="number" dimension="kod_sf" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="num_sf" type="string" title="Номер" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="Дата" as="dat_sf" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" reference="k_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="pr_sv" type="number" title="" as="pr_sv" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="pr_plat" type="number" title="" as="pr_plat" key="0" />
        <column table="a" column="gru_pl" type="number" title="" as="gru_pl" key="0" />
        <column table="a" column="dcalc_peni" type="date" title="" as="dcalc_peni" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" as="dat_bzad" key="0" />
        <column table="a" column="dat_uchet" type="date" title="" as="dat_uchet" key="0" />
        <column table="a" column="promezhut" type="number" title="" as="promezhut" key="0" />
        <column table="a" column="num_sf_uch" type="string" title="" as="num_sf_uch" key="0" />
        <column table="a" column="god_uch" type="number" title="" as="god_uch" key="0" />
        <column table="a" column="mes_uch" type="number" title="" as="mes_uch" key="0" />
        <column table="a" column="ndog_dat_abon" type="string" title="" as="ndog_dat_abon" key="0" />
        <column table="a" column="vid_avans" type="number" title="" as="vid_avans" key="0" />
        <column table="a" column="dat_zs" type="date" title="" as="dat_zs" key="0" />
        <column table="a" column="xdog3" type="string" title="" as="xdog3" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kpp" type="string" title="" as="kpp" key="0" />
        <column table="a" column="name_gru" type="string" title="" as="name_gru" key="0" />
        <column table="a" column="adres_gru" type="string" title="" as="adres_gru" key="0" />
        <column table="a" column="kpp_gru" type="string" title="" as="kpp_gru" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="korr_sf" type="number" title="" as="korr_sf" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="num_perep" type="number" title="" as="num_perep" key="0" />
        <column table="a" column="dat_perep" type="date" title="" as="dat_perep" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="kod_sf_ispr" type="number" as="kod_sf_ispr" key="0" />
        <column table="a" column="kod_vid_dpp" type="number" comment="1- переброска 2- доход 3- убыток" as="kod_vid_dpp" reference="k_vid_dpp" refcol="kod_vid_dpp" key="0" />
        <column table="a" column="ym_end_dolg" type="number" title="" as="ym_end_dolg" key="0" />
        <call function="+" as="ym" title="Отчетный период документа начисления" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <column table="s_facras" column="nachislf" dgroup="sum" as="nachislf" key="0" />
        <column table="s_facras" column="nachisl" dgroup="sum" as="nachisl" key="0" />
        <column table="s_facras" column="cust" dgroup="sum" as="cust" key="0" />
        <call function="if" as="pr_osn2" type="number" key="0">
          <call function="or">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>2</const>
            </call>
            <call function="and">
              <call function="=">
                <column table="this" column="vid_real" />
                <const>8</const>
              </call>
              <call function="or">
                <call function="is not null">
                  <column table="this" column="dat_uchet" />
                </call>
                <call function="and">
                  <call function="is not null">
                    <column table="sf_osn" column="kod_sf" dgroup="sum" />
                  </call>
                  <call function="lt">
                    <column table="this" column="nachisl" />
                    <const>0</const>
                  </call>
                </call>
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="pr_osn2_stored" type="number" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>2</const>
          </call>
          <const>1</const>
          <column table="dpp_kod_sf" column="pr_osn2" />
        </call>
        <call function="earliest" as="dat_cr_isp" key="0">
          <column table="u_opl_isp" column="dat_cr_isp" dgroup="min" />
          <column table="v_ur_sf_isp" column="dat_cr_isp" dgroup="min" />
        </call>
        <call function="if" as="dat_uchet_dat_sf" dimension="dat" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>8</const>
          </call>
          <call function="nvl">
            <column table="a" column="dat_uchet" />
            <column table="a" column="dat_sf" />
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="fr" column="oplf" dgroup="sum" as="oplf" key="0"></column>
        <column table="fr" column="ostatok" dgroup="sum" as="ostatok" key="0"></column>
      </select>
      <where>
        <call function="and">
          <call function="lt">
            <column table="a" column="dat_sf"></column>
            <useparam name="date" />
          </call>
          <call function="not in">
            <column table="a" column="vid_sf" />
            <call function="array">
              <const>2</const>
              <const>9</const>
            </call>
          </call>
        </call>
      </where>
      <links>
        <dlink name="s_facras">
          <slink name="s_facras(date)" as="fr">
            <withparams>
              <useparam name="date" />
            </withparams>
          </slink>
        </dlink>
      </links>
      <from>
        <table name="s_facvip" as="a">
          <dlink name="s_facras" usenl="2" as="s_facras" table="s_facras" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras" />
          <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip(date)" field="kod_deb" parent="s_debet" back="s_facvip(date)">
            <dlink name="s_facvip" usenl="2" as="sf_osn" table="s_facvip" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
              <where>
                <call function="=">
                  <column table="sf_osn" column="vid_real" />
                  <const>2</const>
                </call>
              </where>
            </dlink>
            <dlink name="u_opl_isp" usenl="2" pushpred="1" as="u_opl_isp" table="u_opl_isp" child="u_opl_isp" field="kod_deb" parent="s_debet" back="u_opl_isp">
              <where>
                <call function="=">
                  <column table="u_opl_isp" column="vid_real" />
                  <column table="a" column="vid_real" />
                </call>
              </where>
            </dlink>
          </link>
          <dlink name="v_ur_sf_isp" usenl="2" dimension="1" as="v_ur_sf_isp" table="v_ur_sf_isp" child="v_ur_sf_isp" field="kod_sf" parent="s_facvip" back="v_ur_sf_isp" />
          <dlink name="s_facras" as="s_facras" table="s_facras" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
            <slink name="s_facras(date)" as="fr" table="s_facras(date)">
              <withparams>
                <useparam name="date" />
              </withparams>
            </slink>
          </dlink>
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_vid_pl" as="vid_pl" join="left outer" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_real" join="left outer" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="k_vid_sf" as="vid_sf" join="left outer" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dimension="1" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="k_vid_dpp" as="kod_vid_dpp" join="left outer" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="kod_vid_dpp" />
            <column table="kod_vid_dpp" column="kod_vid_dpp" />
          </call>
        </query>
        <query name="s_facvip_dpp" as="dpp_kod_sf" join="left outer" dname="s_facvip(date)">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="dpp_kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_facvip_dpp_view" timestamp="23.03.2016 15:27:54" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_facvip.xml" haskeys="1">
      <select>
        <column table="s_facvip" column="kod_sf" as="kod_sf" key="1" fixed="1" />
        <column table="s_facvip" column="pr_osn2" as="pr_osn2" key="0" />
      </select>
      <from>
        <query name="s_facvip" as="s_facvip" />
      </from>
      <where>
        <call function="=">
          <column table="s_facvip" column="vid_real" />
          <const>8</const>
        </call>
      </where>
    </query>
    <query name="s_nachisl_gr" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_nachisl.xml" haskeys="1">
      <select>
        <column table="a" column="grup" type="number" as="grup" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="s_nachisl_gr" view="1" as="a" />
      </from>
    </query>
    <query name="s_opl_kred(date)" inherit="s_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_opl.xml" haskeys="1">
      <params>
        <param name="date" />
      </params>
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="vid_opl" type="string" title="" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="" as="datao" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_ist" type="date" title="" as="dat_ist" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="dat_end_dolg" type="date" title="" as="dat_end_dolg" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено (руб.)" fact="s_opl_oplf" agg="sum" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="+" as="ym" title="Отчетный период оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="dat_oper" type="date" dimension="dat" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="datao" />
          <call function="ym end time">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="if" as="opl_t0" type="number" title="Оплата начислений без погашения (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t1t2" type="number" title="Оплата переплат и авансов (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4" type="number" title="Погашение факта переплатами/авансами (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4pr" title="Погашение факта переплатами/авансами прошлого периода (руб.)" key="0">
          <call function="lt">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="if" as="opl_t3t4tek" title="Погашение факта переплатами/авансами текущего периода (руб.)" key="0">
          <call function="=">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="case" as="kod_type_opl" type="number" key="0">
          <!--[11:32] [Данилин Александр] короче
          kod_type_opl
          0 -все остальное
          1- vid_pl=2 and flag_raznos=0 and kod_parent is null
          2- vid_pl=0 and kod_parent is null
          3,4- vid_pl=2 and flag_raznos=1 and kod_parent is not null
          5- vid_pl=2 and flag_raznos=0 and kod_parent is not null
          6- vid_pl=0 and kod_parent is not null-->
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="stor" column="oplf" as="storno" dgroup="sum" key="0" />
        <call function="+nvl" as="ostatok" title="Кредиторская задолженность (руб.)" key="0">
          <column table="this" column="opl" />
          <column table="this" column="storno" />
        </call>
        <call function="" as="dolg" type="number" title="Кредиторская задолженность (руб.)" key="0">
          <column table="this" column="ostatok" />
        </call>
      </select>
      <where>
        <call function="and">
          <call function="le">
            <column table="this" column="datao" />
            <useparam name="date" />
          </call>
          <call function="in">
            <column table="this" column="kod_type_opl"></column>
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
      <links>
        <dlink name="childs" as="stor">
          <where>
            <call function="and">
              <call function="le">
                <column table="stor" column="dat_oper" />
                <useparam name="date" />
              </call>
              <call function="in">
                <column table="stor" column="kod_type_opl" />
                <call function="array">
                  <const>5</const>
                  <const>6</const>
                </call>
              </call>
            </call>
          </where>
        </dlink>
      </links>
      <from>
        <table name="s_opl" as="a">
          <dlink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
          <dlink name="childs" as="stor" table="s_opl" child="s_opl" field="kod_parent" parent="s_opl" back="childs">
            <where>
              <call function="and">
                <call function="le">
                  <column table="stor" column="dat_oper" />
                  <useparam name="date" />
                </call>
                <call function="in">
                  <column table="stor" column="kod_type_opl" />
                  <call function="array">
                    <const>5</const>
                    <const>6</const>
                  </call>
                </call>
              </call>
            </where>
          </dlink>
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-final-dimension="1" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl_prev" join="left outer" dname="s_opl_kred(date)">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" as="kod_parent" join="left outer" dname="childs">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_opl_isp" timestamp="22.09.2016 21:39:35" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_opl_isp.xml" haskeys="1">
      <select>
        <call function="||" as="kod_opl_isp" key="1">
          <column table="this" column="kod_opl" />
          <const>'-'</const>
          <column table="this" column="kod_ur_sf_isp" />
        </call>
        <column table="a" column="kod_opl" as="kod_opl" />
        <column table="v_ur_sf_isp" column="kod_ur_sf_isp" as="kod_ur_sf_isp" />
        <call function="latest" as="dat_ur" dimension="dat_ur">
          <column table="kod_opl" column="dat_oper" />
          <column table="v_ur_sf_isp" column="dat_cr_isp" />
        </call>
      </select>
      <from>
        <query name="s_opl" as="a">
          <link name="kod_sf" as="kod_sf" table="s_facvip" child="s_opl" field="kod_sf" parent="s_facvip" back="s_opl">
            <elink name="v_ur_sf_isp" as="v_ur_sf_isp" table="v_ur_sf_isp" child="v_ur_sf_isp" field="kod_sf" parent="s_facvip" back="v_ur_sf_isp" />
          </link>
        </query>
        <query name="s_opl" as="kod_opl" join="left outer" dname="s_opl_isp">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="v_ur_sf_isp" as="kod_ur_sf_isp" join="left outer" dimension="1" dname="s_opl_isp">
          <call function="=">
            <column table="this" column="kod_ur_sf_isp" />
            <column table="kod_ur_sf_isp" column="kod_ur_sf_isp" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_opl_spis_isp" timestamp="22.09.2016 21:17:12" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_opl_isp.xml" haskeys="1">
      <select>
        <call function="||" as="kod_opl_sp_isp" key="1">
          <column table="this" column="kod_opl" />
          <const>'-'</const>
          <column table="this" column="kod_ur_sf_isp" />
        </call>
        <column table="a" column="kod_opl" as="kod_opl" />
        <column table="v_ur_sf_isp" column="kod_ur_sf_isp" as="kod_ur_sf_isp" />
        <call function="latest" as="dat_ur" dimension="dat_ur">
          <column table="kod_opl" column="dat_spis" />
          <column table="v_ur_sf_isp" column="dat_cr_isp" />
        </call>
      </select>
      <from>
        <query name="s_opl_spis" as="a">
          <link name="kod_sf" as="kod_sf" table="s_facvip" child="s_opl_spis" field="kod_sf" parent="s_facvip" back="s_opl_spis">
            <elink name="v_ur_sf_isp" as="v_ur_sf_isp" table="v_ur_sf_isp" child="v_ur_sf_isp" field="kod_sf" parent="s_facvip" back="v_ur_sf_isp" />
          </link>
        </query>
        <query name="s_opl_spis" as="kod_opl" join="left outer" dname="s_opl_spis_isp">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="v_ur_sf_isp" as="kod_ur_sf_isp" join="left outer" dimension="1" dname="s_opl_spis_isp">
          <call function="=">
            <column table="this" column="kod_ur_sf_isp" />
            <column table="kod_ur_sf_isp" column="kod_ur_sf_isp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_invoice_isp" inherit="ur_invoice" timestamp="13.09.2016 18:58:46" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\ur_invoice.xml" haskeys="1">
      <select>
        <column table="a" column="kod_invoice" type="number" as="kod_invoice" key="1" fixed="1" />
        <column table="a" column="kod_delo" type="number" comment="код дела к которому прикреплены сф" as="kod_delo" key="0" />
        <column table="a" column="kod_sf" type="number" comment="код сф прикрепленный к делу" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_isp" type="number" comment="код исполнительного листа" as="kod_isp" key="0" />
        <column table="a" column="dat_cr_isp" type="date" title="" comment="дата корректировки платежки у сиполнительного листа" as="dat_cr_isp" dimension="dat_ur" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="имя пользователя" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата корректировки пользователям" as="d_m" key="0" />
        <column table="a" column="kod_document" type="number" comment="код сохраненного документа в ur_document" as="kod_document" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_invoice" as="a" />
        <query name="s_facvip" as="kod_sf" join="left inner" dname="ur_invoice_isp">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dname="ur_invoice_isp">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="this" column="kod_isp" />
        </call>
      </where>
    </query>
    <query name="d_istfin" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\d_istfin.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Источник финансирования" as="name" key="0"></column>
        <column table="a" column="mest" type="number" title="" as="mest" key="0"></column>
        <column table="a" column="filename1" type="string" title="" comment="имя файла допсоглашения на лимитное потребление" as="filename1" key="0"></column>
        <column table="a" column="filename2" type="string" title="" comment="имя файла допсоглашения на сверхлимитное потребление" as="filename2" key="0"></column>
        <column table="a" column="kodb_teplo" type="number" title="" as="kodb_teplo" reference="k_bank" refcol="kod" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" comment="аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="d_istfin" as="a"></table>
        <query name="k_bank" as="kodb_teplo" join="left outer" dname="d_istfin">
          <call function="=">
            <column table="a" column="kodb_teplo"></column>
            <column table="kodb_teplo" column="kod"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="d_payer" class="1" timestamp="10.10.2017 16:08:21" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\d_payer.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="string" title="Код абонента" as="kodp" key="1" fixed="1" />
        <column table="a" column="rassh1" type="string" title="" as="rassh1" key="0" />
        <column table="a" column="komit" type="number" title="" as="komit" reference="d_komit" refcol="komit" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" reference="k_bank" refcol="kod" key="0" />
        <column table="a" column="reg_tc" type="number" title="" as="reg_tc" reference="k_raion_ts" refcol="kod" key="0" />
        <column table="a" column="otr_gr" type="number" title="" as="otr_gr" reference="d_otr_gr" refcol="kod" key="0" />
        <column table="a" column="avans" type="number" title="" as="avans" key="0" />
        <column table="a" column="kod_reg" type="number" as="kod_reg" key="0" />
        <column table="a" column="kod_ul" type="number" as="kod_ul" reference="d_strits" refcol="kod" key="0" />
        <column table="a" column="indexx" type="number" title="" as="indexx" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="d_istfin" refcol="kod" key="0" />
        <column table="a" column="kod_m" type="number" as="kod_m" reference="d_ministry" refcol="kod" key="0" />
        <column table="a" column="name" type="string" title="Наименование абонента" as="name" key="0" />
        <column table="a" column="direct" type="string" title="" as="direct" key="0" />
        <column table="a" column="tel_dir" type="string" title="" as="tel_dir" key="0" />
        <column table="a" column="tel_sek" type="string" title="" as="tel_sek" key="0" />
        <column table="a" column="tel_en" type="string" title="" as="tel_en" key="0" />
        <column table="a" column="tel_buh" type="string" title="" as="tel_buh" key="0" />
        <column table="a" column="telet" type="string" title="" as="telet" key="0" />
        <column table="a" column="telfax" type="string" title="" as="telfax" key="0" />
        <column table="a" column="tel_deg" type="string" title="" as="tel_deg" key="0" />
        <column table="a" column="gor_obl" type="number" title="" as="gor_obl" key="0" />
        <column table="a" column="vist_pl" type="number" title="" as="vist_pl" reference="k_vid_doc" refcol="vist_pl" key="0" />
        <column table="a" column="dat_udal" type="date" title="Дата удаления абонента" as="dat_udal" key="0" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" key="0" />
        <column table="a" column="voda_par" type="number" title="" as="voda_par" reference="voda_par" refcol="voda_par" key="0" />
        <column table="a" column="kods" type="number" title="" as="kods" reference="d_station" refcol="kod" key="0" />
        <column table="a" column="okpo" type="string" title="" as="okpo" key="0" />
        <column table="a" column="okonh" type="string" title="" as="okonh" key="0" />
        <column table="a" column="house" type="string" title="" as="house" key="0" />
        <column table="a" column="korpus" type="string" title="" as="korpus" key="0" />
        <column table="a" column="kod_ul_ur" type="number" as="kod_ul_ur" reference="d_strits" refcol="kod" key="0" />
        <column table="a" column="house_ur" type="string" title="" as="house_ur" key="0" />
        <column table="a" column="korpus_ur" type="string" title="" as="korpus_ur" key="0" />
        <column table="a" column="indexx_ur" type="string" title="" as="indexx_ur" key="0" />
        <column table="a" column="kod_avizo" type="number" as="kod_avizo" reference="d_avizo" refcol="kod_avizo" key="0" />
        <column table="a" column="soogu" type="string" title="" as="soogu" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="k_bank" refcol="kod" key="0" />
        <column table="a" column="plat_spos" type="number" title="" as="plat_spos" reference="k_plat_spos" refcol="plat_spos" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" reference="d_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="kod_otrasl" type="number" as="kod_otrasl" reference="k_otrasl" refcol="kod_otrasl" key="0" />
        <column table="a" column="prim1" type="string" title="" as="prim1" key="0" />
        <column table="a" column="room" type="string" title="" as="room" key="0" />
        <column table="a" column="room_ur" type="string" title="" as="room_ur" key="0" />
        <column table="a" column="kod_mm" type="number" as="kod_mm" reference="k_ministry" refcol="kod_m" key="0" />
        <column table="a" column="ndogabon" type="string" title="" as="ndogabon" key="0" />
        <column table="a" column="prim2" type="string" title="" as="prim2" key="0" />
        <column table="a" column="pid" type="number" title="" as="pid" key="0" />
        <column table="a" column="pr_obr" type="number" title="" as="pr_obr" reference="k_state" refcol="pr_obr" key="0" />
        <column table="a" column="day_zad" type="number" title="" as="day_zad" key="0" />
        <column table="a" column="kodbon" type="number" title="" as="kodbon" reference="k_bank" refcol="kod" key="0" />
        <column table="a" column="kodbpol_old" type="number" title="" as="kodbpol_old" key="0" />
        <column table="a" column="kodbpl_old" type="number" title="" as="kodbpl_old" key="0" />
        <column table="a" column="kodbon_old" type="number" title="" as="kodbon_old" key="0" />
        <column table="a" column="kod_dom" type="number" as="kod_dom" key="0" />
        <column table="a" column="plat_kod" type="string" title="" as="plat_kod" key="0" />
        <column table="a" column="country_kod" type="string" title="" as="country_kod" key="0" />
        <column table="a" column="platel" type="number" title="" as="platel" reference="k_platel" refcol="platel" key="0" />
        <column table="a" column="kod_okved" type="number" as="kod_okved" reference="k_okved" refcol="kod_okved" key="0" />
        <column table="a" column="kod_dom_ur" type="number" as="kod_dom_ur" key="0" />
        <column table="a" column="kod_opsp" type="number" as="kod_opsp" reference="k_opsp" refcol="kod_opsp" key="0" />
        <column table="a" column="kpp" type="string" title="" as="kpp" key="0" />
        <column table="a" column="kod_bez_prich" type="number" as="kod_bez_prich" reference="k_bezakcept_prich" refcol="kod_bez_prich" key="0" />
        <column table="a" column="kod_oper" type="number" as="kod_oper" key="0" />
        <column table="a" column="podr" type="number" title="" comment="подр для совместимости. всегда =2" as="podr" key="0" />
        <column table="a" column="adres_gru" type="string" title="" as="adres_gru" key="0" />
        <column table="a" column="kpp_gru" type="string" title="" as="kpp_gru" key="0" />
        <column table="a" column="name_gru" type="string" title="" as="name_gru" key="0" />
        <column table="a" column="nerez" type="number" title="" as="nerez" reference="k_nerezident" refcol="nerez" key="0" />
        <column table="a" column="sogl_beza_sn" type="number" title="" as="sogl_beza_sn" reference="k_sogl_beza_sn" refcol="id" key="0" />
        <column table="a" column="vckp" type="number" title="" as="vckp" key="0" />
        <column table="a" column="names" type="string" title="" as="names" key="0" />
        <column table="a" column="aktpp_razv" type="number" title="" as="aktpp_razv" key="0" />
        <column table="a" column="prich_udal" type="string" title="" as="prich_udal" key="0" />
        <column table="a" column="adr_p" type="string" title="" as="adr_p" key="0" />
        <column table="a" column="kod_kazna" type="number" as="kod_kazna" reference="d_kazna" refcol="kod_kazna" key="0" />
        <column table="a" column="vid_rs_kazna" type="number" title="" as="vid_rs_kazna" key="0" />
        <column table="a" column="podr_p" type="number" title="" as="podr_p" reference="k_podr_p" refcol="podr_p" key="0" />
        <column table="a" column="beza2011" type="number" title="" comment="безакцептное выставление в 2011" as="beza2011" key="0" />
        <column table="a" column="vid_dog" type="number" title="" comment="вид договора" as="vid_dog" reference="k_vid_dog" refcol="vid_dog" key="0" />
        <column table="a" column="ls" type="string" title="" as="ls" key="0" />
        <column table="a" column="mobile_phone" type="string" title="" comment="сотовый телефон" as="mobile_phone" key="0" />
        <const as="cnt" fact="d_payer_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="d_payer" as="a" />
        <query name="d_avizo" as="kod_avizo" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_avizo" />
            <column table="kod_avizo" column="kod_avizo" />
          </call>
        </query>
        <query name="d_istfin" as="kod_ist" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod" />
          </call>
        </query>
        <query name="d_kazn" as="kod_kazn" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="d_kazna" as="kod_kazna" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_kazna" />
            <column table="kod_kazna" column="kod_kazna" />
          </call>
        </query>
        <query name="d_komit" as="komit" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="komit" />
            <column table="komit" column="komit" />
          </call>
        </query>
        <query name="d_ministry" as="kod_m" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod" />
          </call>
        </query>
        <query name="d_otr_gr" as="otr_gr" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="otr_gr" />
            <column table="otr_gr" column="kod" />
          </call>
        </query>
        <query name="d_station" as="kods" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kods" />
            <column table="kods" column="kod" />
          </call>
        </query>
        <query name="d_strits" as="kod_ul_ur" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_ul_ur" />
            <column table="kod_ul_ur" column="kod" />
          </call>
        </query>
        <query name="d_strits" as="kod_ul" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_ul" />
            <column table="kod_ul" column="kod" />
          </call>
        </query>
        <query name="k_bank" as="kodbon" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kodbon" />
            <column table="kodbon" column="kod" />
          </call>
        </query>
        <query name="k_bank" as="kodbpol" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kod" />
          </call>
        </query>
        <query name="k_bank" as="kodbpl" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kodbpl" />
            <column table="kodbpl" column="kod" />
          </call>
        </query>
        <query name="k_bezakcept_prich" as="kod_bez_prich" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_bez_prich" />
            <column table="kod_bez_prich" column="kod_bez_prich" />
          </call>
        </query>
        <query name="k_ministry" as="kod_mm" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_mm" />
            <column table="kod_mm" column="kod_m" />
          </call>
        </query>
        <query name="k_nerezident" as="nerez" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="nerez" />
            <column table="nerez" column="nerez" />
          </call>
        </query>
        <query name="k_okved" as="kod_okved" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_okved" />
            <column table="kod_okved" column="kod_okved" />
          </call>
        </query>
        <query name="k_opsp" as="kod_opsp" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_opsp" />
            <column table="kod_opsp" column="kod_opsp" />
          </call>
        </query>
        <query name="k_otrasl" as="kod_otrasl" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="kod_otrasl" />
            <column table="kod_otrasl" column="kod_otrasl" />
          </call>
        </query>
        <query name="k_platel" as="platel" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="platel" />
            <column table="platel" column="platel" />
          </call>
        </query>
        <query name="k_plat_spos" as="plat_spos" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="plat_spos" />
            <column table="plat_spos" column="plat_spos" />
          </call>
        </query>
        <query name="k_raion_ts" as="reg_tc" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="reg_tc" />
            <column table="reg_tc" column="kod" />
          </call>
        </query>
        <query name="k_state" as="pr_obr" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="pr_obr" />
            <column table="pr_obr" column="pr_obr" />
          </call>
        </query>
        <query name="k_vid_doc" as="vist_pl" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="vist_pl" />
            <column table="vist_pl" column="vist_pl" />
          </call>
        </query>
        <query name="k_podr_p" as="podr_p" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="podr_p" />
            <column table="podr_p" column="podr_p" />
          </call>
        </query>
        <query name="k_sogl_beza_sn" as="sogl_beza_sn" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="sogl_beza_sn" />
            <column table="sogl_beza_sn" column="id" />
          </call>
        </query>
        <query name="k_vid_dog" as="vid_dog" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="vid_dog" />
            <column table="vid_dog" column="vid_dog" />
          </call>
        </query>
        <query name="voda_par" as="voda_par" join="left outer" dname="d_payer">
          <call function="=">
            <column table="a" column="voda_par" />
            <column table="voda_par" column="voda_par" />
          </call>
        </query>
      </from>
    </query>
    <query name="k_otrasl" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\k_otrasl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_otrasl" type="number" as="kod_otrasl" key="1" fixed="1"></column>
        <column table="a" column="okonh" type="string" title="" as="okonh" key="0"></column>
        <column table="a" column="name" type="string" title="Отрасль" as="name" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="dat" type="date" title="" as="dat" key="0"></column>
        <column table="a" column="parent" type="number" title="" as="parent" key="0"></column>
        <call function="||" as="full_name" key="0">
          <column table="this" column="okonh"></column>
          <const>' '</const>
          <column table="this" column="name"></column>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_otrasl" as="a"></table>
      </from>
    </query>
    <query name="k_state" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\k_state.xml" haskeys="1">
      <select>
        <column table="a" column="pr_obr" type="number" title="" as="pr_obr" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="flag_aopl" type="number" title="" as="flag_aopl" key="0"></column>
        <column table="a" column="pr_payer" type="number" title="" as="pr_payer" key="0"></column>
        <column table="a" column="pr_noreestr" type="number" title="" as="pr_noreestr" key="0"></column>
        <column table="a" column="priority" type="number" title="" as="priority" key="0"></column>
        <column table="a" column="pr_nokniga" type="number" title="" as="pr_nokniga" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_state" as="a"></table>
      </from>
    </query>
    <query name="k_vid_real" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\k_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="Код вида реализации" as="vid_real" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вид реализации" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_vid_real" as="a"></table>
      </from>
    </query>
    <query name="s_debet" class="1" timestamp="23.03.2016 19:27:41" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_debet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb" type="number" dimension="kod_deb" as="kod_deb" key="1" fixed="1" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="pr_obr" type="number" title="" as="pr_obr" reference="k_state" refcol="pr_obr" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="num_pl" type="string" title="" as="num_pl" key="0" />
        <column table="a" column="rs" type="string" title="" as="rs" key="0" />
        <column table="a" column="vist_pl" type="number" title="" as="vist_pl" reference="k_vid_doc" refcol="vist_pl" key="0" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" key="0" />
        <column table="a" column="nds" type="number" title="" as="nds" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="k_bank" key="0" />
        <column table="a" column="pr_perep" type="number" title="" as="pr_perep" key="0" />
        <column table="a" column="pr_mor" type="number" title="" as="pr_mor" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" reference="k_bank" key="0" />
        <column table="a" column="pinn" type="string" title="" as="pinn" key="0" />
        <column table="a" column="psch1" type="string" title="" as="psch1" key="0" />
        <column table="a" column="lic_sch" type="string" title="" as="lic_sch" key="0" />
        <column table="a" column="prich_perep" type="string" title="" as="prich_perep" key="0" />
        <column table="a" column="kodbpol_old" type="number" title="" as="kodbpol_old" key="0" />
        <column table="a" column="kodbpl_old" type="number" title="" as="kodbpl_old" key="0" />
        <column table="a" column="dcalc_peni" type="date" title="" as="dcalc_peni" key="0" />
        <column table="a" column="promezhut" type="number" title="" comment="промежуточная выписка" as="promezhut" key="0" />
        <column table="a" column="platel" type="number" title="" as="platel" reference="k_platel" refcol="platel" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="st_spis" column="dat_ust" dgroup="min" as="date_spis" key="0" />
        <column table="st_dead" column="dat_ust" dgroup="min" as="date_dead" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_debet" as="a">
          <dlink name="s_debet_state" as="st_spis" pushpred="1" table="s_debet_state" child="s_debet_state" field="kod_deb" parent="s_debet" back="s_debet_state">
            <link name="pr_obr" as="st_spis_i" table="k_state" child="s_debet_state" field="pr_obr" parent="k_state" back="s_debet_state" />
            <where>
              <call function="=">
                <column table="st_spis_i" column="pr_nokniga" />
                <const>1</const>
              </call>
            </where>
          </dlink>
          <dlink name="s_debet_state" as="st_dead" table="s_debet_state" child="s_debet_state" field="kod_deb" parent="s_debet" back="s_debet_state">
            <where>
              <call function="=">
                <column table="st_dead" column="pr_obr" />
                <const>44</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="d_payer" as="kodp" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_bank" as="kodbpl" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="kodbpl" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="k_bank" as="kodbpol" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="k_platel" as="platel" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="platel" />
            <column table="platel" column="platel" />
          </call>
        </query>
        <query name="k_state" as="pr_obr" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="pr_obr" />
            <column table="pr_obr" column="pr_obr" />
          </call>
        </query>
        <query name="k_vid_doc" as="vist_pl" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="vist_pl" />
            <column table="vist_pl" column="vist_pl" />
          </call>
        </query>
        <query name="k_vid_pl" as="vid_pl" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="s_debet_spis" as="spis_kod_deb" join="left outer" dname="s_debet">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="spis_kod_deb" column="kod_deb" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_debet_spis" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_debet_spis.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb" type="number" as="kod_deb"></column>
        <column table="a" column="dat_spis" type="date" title="" as="dat_spis"></column>
        <call function="rowid" as="s_debet_spis_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="s_debet_spis" as="a"></table>
      </from>
    </query>
    <query name="s_debet_state" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_debet_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb" type="number" as="kod_deb" key="1" fixed="1"></column>
        <column table="a" column="pr_obr" type="number" title="" as="pr_obr" reference="k_state" refcol="pr_obr" key="0"></column>
        <column table="a" column="dat_ust" type="date" title="" as="dat_ust" key="0"></column>
        <column table="a" column="god" type="number" title="" as="god" key="0"></column>
        <column table="a" column="mes" type="number" title="" as="mes" key="0"></column>
        <column table="a" column="kod_reason" type="number" as="kod_reason" reference="k_state_reason" refcol="kod_reason" key="0"></column>
        <column table="a" column="remark" type="string" title="" as="remark" key="0"></column>
        <column table="a" column="editor" type="string" title="" as="editor" key="0"></column>
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0"></column>
        <column table="a" column="barcode" type="string" title="" comment="штрих код, позволяющий идентифицировать платёжное требование" as="barcode" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_debet_state" as="a"></table>
        <query name="k_state" as="pr_obr" join="left outer" dname="s_debet_state">
          <call function="=">
            <column table="a" column="pr_obr"></column>
            <column table="pr_obr" column="pr_obr"></column>
          </call>
        </query>
        <query name="k_state_reason" as="kod_reason" join="left outer" dname="s_debet_state">
          <call function="=">
            <column table="a" column="kod_reason"></column>
            <column table="kod_reason" column="kod_reason"></column>
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_debet_state">
          <call function="=">
            <column table="a" column="kod_deb"></column>
            <column table="kod_deb" column="kod_deb"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="s_edizm" class="1" timestamp="18.03.2016 16:33:07" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_edizm.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" dimension="kod_edizm" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="dat" type="date" title="" as="dat" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kod_okei" type="string" as="kod_okei" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_edizm" as="a" />
      </from>
    </query>
    <query name="s_facopl" title="Расшифровка оплаты" class="1" timestamp="27.06.2018 16:46:32" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fopl" type="number" dimension="kod_fopl" as="kod_fopl" key="1" fixed="1" />
        <column table="a" column="kod_ras" type="number" as="kod_ras" reference="s_facras" refcol="kod_ras" key="0" />
        <column table="a" column="datao" type="date" title="" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="datao" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="opl" type="number" title="Оплачено без НДС (руб)" fact="s_facopl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="nal" type="number" title="Оплачено НДС (руб)" fact="s_facopl_nal" agg="sum" as="nal" key="0" />
        <column table="a" column="datao_vdoc" type="date" title="" as="datao_vdoc" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="cust" type="number" title="" as="cust" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено с НДС (руб)" fact="s_facopl_oplf" agg="sum" key="0">
          <column table="a" column="opl" />
          <column table="a" column="nal" />
        </call>
        <call function="+" as="ym" title="Отчетный период документа оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_facopl" as="a" title="Расшифровка оплаты">
          <link name="kod_opl" as="kod_opl1" table="s_opl" child="s_facopl" field="kod_opl" parent="s_opl" back="s_facopl">
            <elink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
          </link>
          <link name="kod_ras" as="kod_ras1" table="s_facras" child="s_facopl" field="kod_ras" parent="s_facras" back="s_facopl">
            <link name="kod_sf" dimension="1" as="kod_sf" table="s_facvip" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras">
              <link name="kodp" dimension="1" as="kodp" table="d_payer" child="s_facvip" field="kodp" parent="d_payer" back="s_facvip" />
            </link>
          </link>
        </table>
        <query name="s_facras" as="kod_ras" join="left outer" dimension="1" dname="s_facopl">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl" join="left outer" dimension="1" dname="s_facopl">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="s_facras" class="1" timestamp="19.09.2016 01:10:06" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodg" type="number" title="" as="kodg" reference="d_tarif" refcol="kod" key="0" />
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="s_nachisl" refcol="k_vid" key="0" />
        <column table="a" column="okdp" type="string" title="" as="okdp" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="s_edizm" refcol="kod" key="0" />
        <column table="a" column="cust" type="number" title="Начислено нат. пок." fact="s_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено без НДС (руб)" fact="s_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="nds" type="number" title="Начислено НДС (руб)" agg="sum" fact="s_facras_nds" as="nds" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="tip_nds" type="number" title="" as="tip_nds" reference="k_nds" refcol="tip_nds" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="datdog" type="date" title="" as="datdog" key="0" />
        <column table="a" column="k_podvid" type="number" title="" as="k_podvid" reference="s_podnachisl" refcol="k_podvid" key="0" />
        <column table="a" column="kod_rasch_norm" type="number" as="kod_rasch_norm" key="0" />
        <column table="a" column="kod_ras_kor" type="number" comment="код строки корректируемой сф" as="kod_ras_kor" key="0" />
        <column table="a" column="flagstor" type="number" title="" as="flagstor" key="0" />
        <column table="a" column="ktu" type="number" title="" as="ktu" key="0" />
        <column table="a" column="custx" type="number" title="" as="custx" key="0" />
        <call function="+nvl" as="nachislf" title="Начислено с НДС (руб)" key="0">
          <column table="a" column="nachisl"></column>
          <column table="a" column="nds"></column>
        </call>
        <call function="if" as="edizm2" type="number" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <const>-2</const>
          <column table="a" column="edizm" />
        </call>
        <call function="if" as="cust2" type="number" title="Начислено нат. пок." key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>2</const>
          </call>
          <call function="/">
            <column table="a" column="cust" />
            <const>0.98318</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_facras" as="a" />
        <query name="d_tarif" as="kodg" join="left outer" dname="s_facras">
          <call function="=">
            <column table="a" column="kodg" />
            <column table="kodg" column="kod" />
          </call>
        </query>
        <query name="k_nds" as="tip_nds" join="left outer" dname="s_facras">
          <call function="=">
            <column table="a" column="tip_nds" />
            <column table="tip_nds" column="tip_nds" />
          </call>
        </query>
        <query name="s_edizm" as="edizm" join="left outer" dimension="1" dname="s_facras">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="kod" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" dname="s_facras">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_nachisl" as="vid_t" join="left outer" dimension="1" dname="s_facras">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="k_vid" />
          </call>
        </query>
        <query name="s_podnachisl" as="k_podvid" join="left outer" dname="s_facras">
          <call function="=">
            <column table="a" column="k_podvid" />
            <column table="k_podvid" column="k_podvid" />
          </call>
        </query>
        <query name="s_edizm" as="edizm2" join="left outer" dname="s_facras">
          <call function="=">
            <column table="a" column="edizm2"></column>
            <column table="edizm2" column="kod"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="s_facvip" class="1" timestamp="23.08.2018 19:33:23" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_facvip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" dimension="kod_sf" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="num_sf" type="string" title="Номер" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="Дата" as="dat_sf" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" reference="k_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="pr_sv" type="number" title="" as="pr_sv" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="pr_plat" type="number" title="" as="pr_plat" key="0" />
        <column table="a" column="gru_pl" type="number" title="" as="gru_pl" key="0" />
        <column table="a" column="dcalc_peni" type="date" title="" as="dcalc_peni" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" as="dat_bzad" key="0" />
        <column table="a" column="dat_uchet" type="date" title="" as="dat_uchet" key="0" />
        <column table="a" column="promezhut" type="number" title="" as="promezhut" key="0" />
        <column table="a" column="num_sf_uch" type="string" title="" as="num_sf_uch" key="0" />
        <column table="a" column="god_uch" type="number" title="" as="god_uch" key="0" />
        <column table="a" column="mes_uch" type="number" title="" as="mes_uch" key="0" />
        <column table="a" column="ndog_dat_abon" type="string" title="" as="ndog_dat_abon" key="0" />
        <column table="a" column="vid_avans" type="number" title="" as="vid_avans" key="0" />
        <column table="a" column="dat_zs" type="date" title="" as="dat_zs" key="0" />
        <column table="a" column="xdog3" type="string" title="" as="xdog3" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kpp" type="string" title="" as="kpp" key="0" />
        <column table="a" column="name_gru" type="string" title="" as="name_gru" key="0" />
        <column table="a" column="adres_gru" type="string" title="" as="adres_gru" key="0" />
        <column table="a" column="kpp_gru" type="string" title="" as="kpp_gru" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="korr_sf" type="number" title="" as="korr_sf" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="num_perep" type="number" title="" as="num_perep" key="0" />
        <column table="a" column="dat_perep" type="date" title="" as="dat_perep" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="kod_sf_ispr" type="number" as="kod_sf_ispr" key="0" />
        <column table="a" column="kod_vid_dpp" type="number" comment="1- переброска 2- доход 3- убыток" as="kod_vid_dpp" reference="k_vid_dpp" refcol="kod_vid_dpp" key="0" />
        <column table="a" column="ym_end_dolg" type="number" title="" as="ym_end_dolg" key="0" />
        <call function="+" as="ym" title="Отчетный период документа начисления" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <column table="s_facras" column="nachislf" dgroup="sum" as="nachislf" key="0" />
        <column table="s_facras" column="nachisl" dgroup="sum" as="nachisl" key="0" />
        <column table="s_facras" column="cust" dgroup="sum" as="cust" key="0" />
        <call function="if" as="pr_osn2" type="number" key="0">
          <call function="or">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>2</const>
            </call>
            <call function="and">
              <call function="=">
                <column table="this" column="vid_real" />
                <const>8</const>
              </call>
              <call function="or">
                <call function="is not null">
                  <column table="this" column="dat_uchet" />
                </call>
                <call function="and">
                  <call function="is not null">
                    <column table="sf_osn" column="kod_sf" dgroup="sum" />
                  </call>
                  <call function="lt">
                    <column table="this" column="nachisl" />
                    <const>0</const>
                  </call>
                </call>
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="pr_osn2_stored" type="number" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>2</const>
          </call>
          <const>1</const>
          <column table="dpp_kod_sf" column="pr_osn2" />
        </call>
        <call function="earliest" as="dat_cr_isp" key="0">
          <column table="u_opl_isp" column="dat_cr_isp" dgroup="min" />
          <column table="v_ur_sf_isp" column="dat_cr_isp" dgroup="min" />
        </call>
        <call function="if" as="dat_uchet_dat_sf" dimension="dat" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>8</const>
          </call>
          <call function="nvl">
            <column table="a" column="dat_uchet" />
            <column table="a" column="dat_sf" />
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_facvip" as="a">
          <dlink name="s_facras" usenl="2" as="s_facras" table="s_facras" child="s_facras" field="kod_sf" parent="s_facvip" back="s_facras" />
          <link name="kod_deb" usenl="2" as="kod_deb" table="s_debet" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
            <dlink name="s_facvip" usenl="2" as="sf_osn" table="s_facvip" child="s_facvip" field="kod_deb" parent="s_debet" back="s_facvip">
              <where>
                <call function="=">
                  <column table="sf_osn" column="vid_real" />
                  <const>2</const>
                </call>
              </where>
            </dlink>
            <dlink name="u_opl_isp" usenl="2" pushpred="1" as="u_opl_isp" table="u_opl_isp" child="u_opl_isp" field="kod_deb" parent="s_debet" back="u_opl_isp">
              <where>
                <call function="=">
                  <column table="u_opl_isp" column="vid_real" />
                  <column table="a" column="vid_real" />
                </call>
              </where>
            </dlink>
          </link>
          <dlink name="v_ur_sf_isp" usenl="2" dimension="1" as="v_ur_sf_isp" table="v_ur_sf_isp" child="v_ur_sf_isp" field="kod_sf" parent="s_facvip" back="v_ur_sf_isp" />
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_facvip">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_vid_pl" as="vid_pl" join="left outer" dname="s_facvip">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_real" join="left outer" dname="s_facvip">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="k_vid_sf" as="vid_sf" join="left outer" dname="s_facvip">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dimension="1" dname="s_facvip">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="k_vid_dpp" as="kod_vid_dpp" join="left outer" dname="s_facvip">
          <call function="=">
            <column table="a" column="kod_vid_dpp" />
            <column table="kod_vid_dpp" column="kod_vid_dpp" />
          </call>
        </query>
        <query name="s_facvip_dpp" as="dpp_kod_sf" join="left outer" dname="s_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="dpp_kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="not in">
          <column table="a" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="s_facvip_dpp" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_facvip_dpp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" as="kod_sf"></column>
        <column table="a" column="pr_osn2" type="number" title="" as="pr_osn2"></column>
        <call function="rowid" as="s_facvip_dpp_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="s_facvip_dpp" as="a"></table>
      </from>
    </query>
    <query name="s_nachisl" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_nachisl.xml" haskeys="1">
      <select>
        <column table="a" column="k_vid" type="number" title="" as="k_vid" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вид товара" as="name" key="0"></column>
        <column table="a" column="dat_k" type="date" title="" as="dat_k" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="izm" type="number" title="" as="izm" reference="s_edizm" refcol="kod" key="0"></column>
        <column table="a" column="chet" type="string" title="" as="chet" reference="k_account" refcol="account" key="0"></column>
        <column table="a" column="por_pech" type="number" title="" comment="порядок печати начислений в сф" as="por_pech" key="0"></column>
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры" as="vid_sf" reference="k_vid_sf" refcol="vid_sf" key="0"></column>
        <column table="a" column="podr" type="number" title="" comment="0- общие виды начисл 1-энергонадз 2-теплосеть" as="podr" key="0"></column>
        <column table="a" column="peny" type="number" title="" as="peny" key="0"></column>
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0"></column>
        <column table="a" column="pr_ras" type="number" title="" as="pr_ras" key="0"></column>
        <column table="a" column="kod_nds" type="number" as="kod_nds" reference="k_nds" refcol="tip_nds" key="0"></column>
        <column table="a" column="kod_grp" type="number" as="kod_grp" key="0"></column>
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" key="0"></column>
        <column table="a" column="kod_realiz" type="number" as="kod_realiz" reference="k_grp_prov" refcol="kod_grp" key="0"></column>
        <column table="a" column="name_all" type="string" title="" as="name_all" key="0"></column>
        <column table="a" column="grup" type="number" title="" comment="1-110код,2-гкал отопл,3-гкал гвс,4-кубы" as="grup" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_nachisl" as="a"></table>
        <query name="k_account" as="chet" join="left outer" dname="s_nachisl">
          <call function="=">
            <column table="a" column="chet"></column>
            <column table="chet" column="account"></column>
          </call>
        </query>
        <query name="k_grp_prov" as="kod_realiz" join="left outer" dname="s_nachisl">
          <call function="=">
            <column table="a" column="kod_realiz"></column>
            <column table="kod_realiz" column="kod_grp"></column>
          </call>
        </query>
        <query name="k_nds" as="kod_nds" join="left outer" dname="s_nachisl">
          <call function="=">
            <column table="a" column="kod_nds"></column>
            <column table="kod_nds" column="tip_nds"></column>
          </call>
        </query>
        <query name="k_vid_sf" as="vid_sf" join="left outer" dname="s_nachisl">
          <call function="=">
            <column table="a" column="vid_sf"></column>
            <column table="vid_sf" column="vid_sf"></column>
          </call>
        </query>
        <query name="s_edizm" as="izm" join="left outer" dname="s_nachisl">
          <call function="=">
            <column table="a" column="izm"></column>
            <column table="izm" column="kod"></column>
          </call>
        </query>
        <query name="s_nachisl_gr" as="grup" join="left outer" dimension="1" dname="s_nachisl">
          <call function="and">
            <call function="=">
              <column table="grup" column="grup" />
              <column table="a" column="grup" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="s_opl" class="1" timestamp="24.08.2018 15:20:07" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\s_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="k_ist_opl" refcol="kod_ist" key="0" />
        <column table="a" column="kod_stat" type="number" as="kod_stat" reference="k_stat_opl" refcol="kod_stat" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="k_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" reference="d_payer" refcol="kodp" key="0" />
        <column table="a" column="vid_opl" type="string" title="" as="vid_opl" reference="k_vidopl" refcol="vid_opl" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="datao" type="date" title="" as="datao" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="nalp" type="number" title="" as="nalp" key="0" />
        <column table="a" column="flag_raznos" type="number" title="" as="flag_raznos" key="0" />
        <column table="a" column="editor" type="string" title="" as="editor" key="0" />
        <column table="a" column="datesys" type="date" title="" as="datesys" key="0" />
        <column table="a" column="pr_close" type="number" title="" as="pr_close" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="kod_vza" type="number" as="kod_vza" key="0" />
        <column table="a" column="num_sf" type="string" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" key="0" />
        <column table="a" column="kod_opl_prev" type="number" as="kod_opl_prev" reference="s_opl" refcol="kod_opl" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_ist" type="date" title="" as="dat_ist" key="0" />
        <column table="a" column="dat_doc" type="date" title="" as="dat_doc" key="0" />
        <column table="a" column="sprefix" type="string" title="" as="sprefix" key="0" />
        <column table="a" column="spostfix" type="string" title="" as="spostfix" key="0" />
        <column table="a" column="nom_sf" type="string" title="" as="nom_sf" key="0" />
        <column table="a" column="dat_end_dolg" type="date" title="" as="dat_end_dolg" key="0" />
        <call function="+nvl" as="oplf" title="Оплачено (руб.)" fact="s_opl_oplf" agg="sum" key="0">
          <column table="this" column="opl" />
          <column table="this" column="opls" />
        </call>
        <call function="+" as="ym" title="Отчетный период оплаты" dimension="ym" key="0">
          <column table="a" column="god" />
          <call function="/">
            <column table="a" column="mes" />
            <const>100</const>
          </call>
        </call>
        <call function="if" as="dat_oper" type="date" dimension="dat" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="datao" />
          <call function="ym end time">
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="if" as="opl_t0" type="number" title="Оплата начислений без погашения (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t1t2" type="number" title="Оплата переплат и авансов (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4" type="number" title="Погашение факта переплатами/авансами (руб.)" key="0">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <column table="this" column="opl" />
        </call>
        <call function="if" as="opl_t3t4pr" title="Погашение факта переплатами/авансами прошлого периода (руб.)" key="0">
          <call function="lt">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="if" as="opl_t3t4tek" title="Погашение факта переплатами/авансами текущего периода (руб.)" key="0">
          <call function="=">
            <call function="date to ym">
              <column table="a" column="datao" />
            </call>
            <column table="this" column="ym" />
          </call>
          <column table="this" column="opl_t3t4" />
        </call>
        <call function="case" as="kod_type_opl" type="number" key="0">
          <!--[11:32] [Данилин Александр] короче
          kod_type_opl
          0 -все остальное
          1- vid_pl=2 and flag_raznos=0 and kod_parent is null
          2- vid_pl=0 and kod_parent is null
          3,4- vid_pl=2 and flag_raznos=1 and kod_parent is not null
          5- vid_pl=2 and flag_raznos=0 and kod_parent is not null
          6- vid_pl=0 and kod_parent is not null-->
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>1</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="flag_raznos" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="vid_pl" />
                <const>0</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_parent" />
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="s_opl" as="a">
          <dlink name="s_opl_isp" dimension="1" as="s_opl_isp" table="s_opl_isp" child="s_opl_isp" field="kod_opl" parent="s_opl" back="s_opl_isp" />
        </table>
        <query name="d_payer" as="kodp" join="left outer" dimension="1" dname="s_opl">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="k_ist_opl" as="kod_ist" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="k_stat_opl" as="kod_stat" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="kod_stat" />
            <column table="kod_stat" column="kod_stat" />
          </call>
        </query>
        <query name="k_vidopl" as="vid_opl" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="vid_opl" />
            <column table="vid_opl" column="vid_opl" />
          </call>
        </query>
        <query name="k_vid_real" as="vid_pl" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_real" />
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-final-dimension="1" dname="s_opl">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="s_opl" as="kod_opl_prev" join="left outer" dname="s_opl">
          <call function="=">
            <column table="a" column="kod_opl_prev" />
            <column table="kod_opl_prev" column="kod_opl" />
          </call>
        </query>
        <query name="s_opl" as="kod_parent" join="left outer" dname="childs">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_invoice" class="1" timestamp="13.09.2016 17:45:34" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\ur_invoice.xml" haskeys="1">
      <select>
        <column table="a" column="kod_invoice" type="number" as="kod_invoice" key="1" fixed="1" />
        <column table="a" column="kod_delo" type="number" comment="код дела к которому прикреплены сф" as="kod_delo" key="0" />
        <column table="a" column="kod_sf" type="number" comment="код сф прикрепленный к делу" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_isp" type="number" comment="код исполнительного листа" as="kod_isp" key="0" />
        <column table="a" column="dat_cr_isp" type="date" title="" comment="дата корректировки платежки у сиполнительного листа" as="dat_cr_isp" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="имя пользователя" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата корректировки пользователям" as="d_m" key="0" />
        <column table="a" column="kod_document" type="number" comment="код сохраненного документа в ur_document" as="kod_document" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_invoice" as="a" />
        <query name="s_facvip" as="kod_sf" join="left inner" dname="ur_invoice">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="u_opl_isp" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\u_opl_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1"></column>
        <column table="a" column="kod_delo" type="number" as="kod_delo" reference="u_hist_delo" refcol="kod_delo" key="0"></column>
        <column table="a" column="kod_isp" type="number" as="kod_isp" key="0"></column>
        <column table="a" column="podr" type="number" title="" as="podr" key="0"></column>
        <column table="a" column="kod_deb" type="string" as="kod_deb" reference="s_debet" refcol="kod_deb" key="0"></column>
        <column table="a" column="kodp" type="string" title="" as="kodp" key="0"></column>
        <column table="a" column="nashisl" type="number" title="" as="nashisl" key="0"></column>
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="0"></column>
        <column table="a" column="summa" type="number" title="" as="summa" key="0"></column>
        <column table="a" column="vst1" type="number" title="" as="vst1" key="0"></column>
        <column table="a" column="vst2" type="number" title="" as="vst2" key="0"></column>
        <column table="a" column="per_opl1" type="date" title="" as="per_opl1" key="0"></column>
        <column table="a" column="per_opl2" type="date" title="" as="per_opl2" key="0"></column>
        <column table="a" column="data_vhod" type="date" title="" as="data_vhod" key="0"></column>
        <column table="a" column="data" type="date" title="" as="data" key="0"></column>
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0"></column>
        <column table="a" column="kod_doc_graf" type="number" as="kod_doc_graf" reference="u_doc_graf" refcol="kod_doc_graf" key="0"></column>
        <column table="a" column="dpk" type="date" title="" as="dpk" key="0"></column>
        <column table="a" column="tmp" type="string" title="" as="tmp" key="0"></column>
        <column table="a" column="dat_cr_isp" type="date" title="" comment="дата привязки платежкт к исп. листу" as="dat_cr_isp" key="0"></column>
        <column table="a" column="kod_mat" type="number" as="kod_mat" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="u_opl_isp" as="a"></table>
        <query name="u_doc_graf" as="kod_doc_graf" join="left outer" dname="u_opl_isp">
          <call function="=">
            <column table="a" column="kod_doc_graf"></column>
            <column table="kod_doc_graf" column="kod_doc_graf"></column>
          </call>
        </query>
        <query name="u_hist_delo" as="kod_delo" join="left outer" dname="u_opl_isp">
          <call function="=">
            <column table="a" column="kod_delo"></column>
            <column table="kod_delo" column="kod_delo"></column>
          </call>
        </query>
        <query name="s_debet" as="kod_deb" join="left outer" dname="u_opl_isp">
          <call function="=">
            <column table="a" column="kod_deb"></column>
            <column table="kod_deb" column="kod_deb"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="v_ur_sf_isp" class="1" timestamp="14.09.2018 16:10:25" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\original\v_ur_sf_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ur_sf_isp" type="string" as="kod_ur_sf_isp" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="s_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="dat_cr_isp" type="date" title="" dimension="dat_ur" as="dat_cr_isp" key="0" />
        <column table="a" column="num_isp" type="string" as="num_isp" key="0" />
        <column table="a" column="num_delo" type="string" as="num_delo" key="0" />
        <column table="a" column="dat_entry" type="date" title="" is-fact="1" agg="max" fact="ur_dat_entry_max" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_entry" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="v_ur_sf_isp" as="a" />
        <query name="s_facvip" as="kod_sf" join="left outer" dimension="1" is-private-dimension="1" dname="v_ur_sf_isp">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="form:23479" haskeys="1">
      <select>
        <column table="u" column="title" title="Параметр" as="title" />
        <column table="u" column="name" key="1" as="name" />
        <column table="u" column="text" title="Значение" as="text" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const type="string" as="title">'Период'</const>
                <const type="string" as="name">'ym'</const>
                <const type="string" as="text">NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Выделить задолженность по годам'</const>
                <const>'years'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="form:34759" haskeys="1">
      <select>
        <column table="u" column="title" title="Параметр" as="title" />
        <column table="u" column="name" key="1" as="name" />
        <column table="u" column="text" title="Значение" as="text" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const type="string" as="title">'Отчётный период'</const>
                <const type="string" as="name">'ym'</const>
                <const type="string" as="text">NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Вода/Пар'</const>
                <const>'voda_par'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'Абоненты'</const>
                <const>'kodp'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="form:36927" haskeys="1">
      <select>
        <column table="u" column="title" title="Параметр" as="title" />
        <column table="u" column="name" key="1" as="name" />
        <column table="u" column="text" title="Значение" as="text" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const type="string" as="title">'C'</const>
                <const type="string" as="name">'dat1'</const>
                <const type="string" as="text">NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'По'</const>
                <const>'dat2'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>'С учетом списания'</const>
                <const>'use_spis'</const>
                <const>NULL</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id">
    <part id="23479-min-year" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml">
      <call function="-">
        <call function="nvl" type="number">
          <query>
            <select>
              <column table="a" column="year" group="min" title="мин. год. " as="year" />
            </select>
            <from>
              <query name="n_year" as="a" />
            </from>
            <where>
              <call function="or">
                <call function="false" />
                <call function="in" optional="1">
                  <column table="a" column="year" />
                  <useparam name="years" />
                </call>
              </call>
            </where>
          </query>
          <call function="trunc">
            <useparam name="ym" />
          </call>
        </call>
        <const>1</const>
      </call>
    </part>
    <part id="23479-osn-and-dpp" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml">
      <!--<call function="or">
           <call function="=">
             <column table="this" column="vid_real"/>
             <const>2</const>
           </call>
           <call function="and">
             <call function="=">
               <column table="this" column="vid_real"/>
               <const>8</const>
             </call>
             <call function="is not null">
               <column table="kod_sf" column="dat_uchet"/>
             </call>
           </call>
        </call>-->
      <call function="=">
        <column table="kod_sf" column="pr_osn2" />
        <const>1</const>
      </call>
    </part>
    <part id="34759-params" file="sql.builder.templates\sql.builder\projects\asuse1\reports\34759.xml">
      <param name="ym1">
        <const>2016.01</const>
      </param>
      <param name="ym2">
        <const>2016.01</const>
      </param>
      <param name="voda_par" />
      <param name="kodp" />
    </part>
    <part id="34759-withparams" file="sql.builder.templates\sql.builder\projects\asuse1\reports\34759.xml">
      <withparams>
        <useparam name="ym1" />
        <useparam name="ym2" />
        <useparam name="voda_par" />
        <useparam name="kodp" />
      </withparams>
    </part>
    <part id="36927-params" timestamp="22.09.2016 22:22:07" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <param name="dat1">
        <const>to_date('01.08.2016','DD.MM.YYYY')</const>
      </param>
      <param name="dat2">
        <const>to_date('01.09.2016','DD.MM.YYYY')</const>
      </param>
      <param name="use_spis">
        <const>1</const>
      </param>
      <param name="dat1str">
        <const>'начало периода'</const>
      </param>
      <param name="dat2str">
        <const>'конец периода'</const>
      </param>
    </part>
    <part id="36927-withparams" timestamp="22.09.2016 22:18:48" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <useparam name="dat1" />
      <useparam name="dat2" />
      <useparam name="use_spis" />
      <useparam name="dat1str" />
      <useparam name="dat2str" />
    </part>
  </parts>
  <views child-name="view" key-name="id">
    <view name="voda_par" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\d_payer.xml">
      select 0 voda_par,'Вода' name from dual union
      select 1 voda_par ,'Пар'  name  from dual
    </view>
    <view name="n_calc" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\n_calc.xml">
      select to_number(to_char(v,'YYYY.MM')) ym from (
      select sysdate+60-level as v from dual connect by level&lt;sysdate-  to_date ('01.01.1992','DD.MM.YYYY')
      ) group  by to_number(to_char(v,'YYYY.MM'))
    </view>
    <view name="s_nachisl_gr" class="1" file="sql.builder.templates\sql.builder\projects\asuse1\scheme\extension\s_nachisl.xml">
      select 1 as grup, 'По тарифу с теплоносителем' as name from dual union
      select 2 , 'Отопление'  from dual union
      select 3 , 'ГВС'  from dual union
      select 4 , 'Теплоноситель'  from dual
    </view>
  </views>
  <reports child-name="report" key-name="name">
    <report name="23479" title="Отчет для свода управленческой отчетности" form="23479" pushpred="1" autobands="1" folder="oborot" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml">
      <params>
        <param name="ym" />
        <param name="years" />
      </params>
      <customers>
        <customer id="2" />
      </customers>
      <queries>
        <query name="23479" as="a" title="1">
          <withparams>
            <useparam name="ym" />
            <useparam name="years" />
          </withparams>
        </query>
        <query name="23479-title" as="b" title="2">
          <withparams>
            <useparam name="ym" />
            <useparam name="years" />
          </withparams>
        </query>
      </queries>
    </report>
    <report name="36927" title="Исковая задолженность по абонентам" timestamp="22.09.2016 22:35:00" folder="ur_reports" form="36927" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <customers>
        <customer id="2" />
      </customers>
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <queries>
        <query name="36927_abon" as="a" title="По абонентам">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
          <query name="36927_isp" as="b" title="По исп. листам">
            <call function="=">
              <column table="a" column="kodp" />
              <column table="b" column="kodp" />
            </call>
            <withparams>
              <useparam name="dat1" />
              <useparam name="dat2" />
              <useparam name="use_spis" />
              <useparam name="dat1str" />
              <useparam name="dat2str" />
            </withparams>
          </query>
        </query>
      </queries>
    </report>
    <report name="36927_isp" title="Исковая задолженность по исп. листам" timestamp="22.09.2016 22:27:45" folder="ur_reports" form="36927" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <customers>
        <customer id="2" />
      </customers>
      <params>
        <param name="dat1">
          <const>to_date('01.08.2016','DD.MM.YYYY')</const>
        </param>
        <param name="dat2">
          <const>to_date('01.09.2016','DD.MM.YYYY')</const>
        </param>
        <param name="use_spis">
          <const>1</const>
        </param>
        <param name="dat1str">
          <const>'начало периода'</const>
        </param>
        <param name="dat2str">
          <const>'конец периода'</const>
        </param>
      </params>
      <queries>
        <query name="36927_abon" as="a" title="По абонентам">
          <withparams>
            <useparam name="dat1" />
            <useparam name="dat2" />
            <useparam name="use_spis" />
            <useparam name="dat1str" />
            <useparam name="dat2str" />
          </withparams>
          <query name="36927_isp" as="b" title="По исп. листам" main="1">
            <call function="=">
              <column table="a" column="kodp" />
              <column table="b" column="kodp" />
            </call>
            <withparams>
              <useparam name="dat1" />
              <useparam name="dat2" />
              <useparam name="use_spis" />
              <useparam name="dat1str" />
              <useparam name="dat2str" />
            </withparams>
          </query>
        </query>
      </queries>
    </report>
  </reports>
  <forms child-name="form" key-name="name">
    <form name="23479" with-behavior="0" timestamp="16.12.2016 00:05:51" file="sql.builder.templates\sql.builder\projects\asuse1\reports\23479.xml">
      <content>
        <field name="ym" controlType="UICombo" title="Период">
          <listquery>
            <query name="n_calc_dist"></query>
          </listquery>
          <defaultquery>
            <query name="n_calc_max"></query>
          </defaultquery>
        </field>
        <field name="years" controlType="UIList" title="Выделить задолженность по годам">
          <listquery>
            <query name="n_year"></query>
          </listquery>
          <defaultquery>
            <query name="n_year_last4"></query>
          </defaultquery>
        </field>
      </content>
    </form>
    <form name="34759" with-behavior="0" timestamp="16.12.2016 00:05:52" file="sql.builder.templates\sql.builder\projects\asuse1\reports\34759.xml">
      <content>
        <field name="ym" controlType="UIComboRange" title="Отчётный период" file="sql.builder.templates\sql.builder\projects\asuse1\param_fields_asuse.xml">
          <listquery>
            <query name="n_calc_dist"></query>
          </listquery>
          <defaultquery>
            <query name="n_calc_max"></query>
          </defaultquery>
        </field>
        <field name="voda_par" controlType="UIList" title="Вода/Пар">
          <listquery>
            <query name="voda_par"></query>
          </listquery>
        </field>
        <field name="kodp" controlType="UIList" title="Абоненты">
          <listquery>
            <query name="d_payer%tbl"></query>
          </listquery>
        </field>
      </content>
    </form>
    <form name="36927" timestamp="16.12.2016 00:05:52" with-behavior="0" file="sql.builder.templates\sql.builder\projects\asuse1\reports\36927.xml">
      <content>
        <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat1" title="C" mandatory="1">
          <defaultquery>
            <query name="36927_dat1" />
          </defaultquery>
        </field>
        <field controlType="UIDate" type="date" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat2" title="По" mandatory="1">
          <defaultquery>
            <query name="36927_dat2" />
          </defaultquery>
        </field>
        <field controlType="UICheck" checked="0" type="number" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="use_spis" title="С учетом списания" />
        <field controlType="UIText" type="string" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat1str" title="C" column-visible="0">
          <defaultquery>
            <query name="36927_dat1_str" />
          </defaultquery>
        </field>
        <field controlType="UIText" type="string" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="dat2str" title="По" column-visible="0">
          <defaultquery>
            <query name="36927_dat2_str" />
          </defaultquery>
        </field>
      </content>
    </form>
  </forms>
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name">
    <expression-package name="asuse_tgk_fin" timestamp="14.09.2018 13:59:41" file="sql.builder.templates\sql.builder\projects\asuse1\reports\qube\qube.tgk.xml">
      <call function="+nvl" as="s_facras_nachisl_nds" group="sum" title="Начислено с НДС (руб)" type="number">
        <fact column="s_facras_nachisl" />
        <fact column="s_facras_nds" />
      </call>
      <call function="+nvl" as="s_facopl_opl_nds" group="sum" title="Оплачено с НДС (руб)" type="number">
        <fact column="s_facopl_opl" />
        <fact column="s_facopl_nal" />
      </call>
      <call function="-nvl" as="oborot" group="sum" title="Задолженность с НДС (руб)" type="number">
        <fact column="s_facras_nachisl_nds" />
        <fact column="s_facopl_opl_nds" />
      </call>
      <call function="+nvl" as="oborot_kr" group="sum" type="number" title="Оборот по кредиту">
        <fact column="s_opl_kred_oplf" />
        <fact column="s_opl_stor_oplf" />
      </call>
      <call function="-nvl" as="oborot_spis" group="sum" title="Задолженность с НДС (руб)" type="number">
        <fact column="s_facras_spis_nachislf" />
        <fact column="s_facopl_spis_oplf" />
      </call>
      <call function="-nvl" as="oborot_o_spis" group="sum" title="Списание (руб)" type="number">
        <fact column="s_facras_spis_nachislf" />
        <fact column="s_opl_spis_oplf" />
      </call>
      <call function="-nvl" as="oborot_o" group="sum" title="Задолженность с НДС (руб)" type="number">
        <fact column="s_facras_nachisl_nds" />
        <fact column="s_opl_oplf" />
      </call>
    </expression-package>
  </expression-packages>
  <dimension-packages child-name="dimension-package" key-name="name">
    <dimension-package name="main" timestamp="13.09.2016 18:53:37" file="sql.builder.templates\sql.builder\projects\asuse1\qube\dimension.xml" />
    <dimension-package name="asuse_tgk" timestamp="27.06.2018 15:30:17" file="sql.builder.templates\sql.builder\projects\asuse1\reports\qube\qube.tgk.xml">
      <dimension name="kod_sf" class-type="s_facvip" />
      <dimension name="kod_deb" class-type="s_debet" />
      <dimension name="kod_ras" class-type="s_facras" />
      <dimension name="kod_fopl" class-type="s_facopl" />
      <dimension class-type="s_opl" name="kod_opl" />
      <dimension name="kod_edizm" class-type="s_edizm" />
      <dimension name="kodp" class-type="d_payer" />
      <dimension name="dat_ur" time-type="day" timeline="time_ur" />
      <dimension name="vid_t" class-type="s_nachisl" />
      <dimension name="vid_t_gr" class-type="s_nachisl_gr" />
      <dimension class-type="v_ur_sf_isp" name="kod_ur_sf_isp" />
      <dimension class-type="s_opl_isp" name="kod_opl_isp" />
      <dimension class-type="s_opl_kred" name="kod_opl_kred" />
      <dimension class-type="s_opl_stor" name="kod_opl_stor" />
      <dimension class-type="s_facras_spis_isp" name="kod_fr_spis_isp" />
      <dimension class-type="s_opl_spis_isp" name="kod_opl_spis_isp" />
      <dimension class-type="s_facras_spis" name="kod_fr_spis" />
      <dimension class-type="s_opl_spis" name="kod_opl_spis" />
      <dimension name="kod_ym" class-type="n_calc_dist" />
    </dimension-package>
  </dimension-packages>
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id">
    <field id="asuse1_ym12" name="ym" controlType="UIComboRange" title="Отчётный период" file="sql.builder.templates\sql.builder\projects\asuse1\param_fields_asuse.xml">
      <listquery>
        <query name="n_calc_dist"></query>
      </listquery>
      <defaultquery>
        <query name="n_calc_max"></query>
      </defaultquery>
    </field>
  </fields>
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>