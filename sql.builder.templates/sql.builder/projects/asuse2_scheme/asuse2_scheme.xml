<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-06-29T01:41:03.8030922+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="mor_in" timestamp="27.06.2017 03:28:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur.mor.xml" haskeys="1">
      <expressions>
        <call function="le" as="do_mor">
          <column table="dat" column="val" />
          <column table="kod_hist_mat" column="dat_mor" />
        </call>
        <call function="()" type="number" group="sum" as="opl1">
          <fact column="sr_opl_opl_sf" condition="do_mor" />
        </call>
      </expressions>
      <select>
        <call function="||" as="kod_mor_in" key="1">
          <column table="kod_sf" column="kod_sf" />
          <const>'-'</const>
          <column table="kod_hist_mat" column="kod_hist_mat" />
        </call>
        <column table="kod_sf" column="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_sf" column="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="kod_hist_mat" column="kod_hist_mat" dimension="kod_hist_mat_ba" as="kod_hist_mat" />
        <column table="kod_hist_mat" column="dat_mor" dimension="dat" as="dat_mor" />
        <column table="kod_hist_mat" column="dat_mor" as="dat_mor_max" fact="mor_in_dat_max" agg="max" />
        <column table="kod_result" column="name" fact="mor_in_result" agg="max" as="name" />
        <fact column="sr_facras_nachisl" as="nach" fact="mor_in_nach" agg="sum" title="Включено начислений в мораторную задолженность" is-fact-use="1" />
        <fact column="opl1" as="opl" fact="mor_in_opl" agg="sum" title="Оплата начислений на момент включения в мораторную задолженность" is-fact-use="1" />
        <call function="-nvl" as="dolg" fact="mor_in_dolg" agg="sum" title="Включено в мораторную задолженность">
          <column table="this" column="nach" />
          <column table="this" column="opl" />
        </call>
        <column table="kod_hist_mat" column="name" as="hist_mat_name" agg="max" fact="mor_in_osnov" title="Основание для включения" />
        <column table="kod_mat_ba" column="kod_mat" dimension="kod_mat_ba" as="kod_mat" />
      </select>
      <from>
        <qube star-scheme="1">
          <where>
            <call function="is not null">
              <column table="kod_hist_mat" column="dat_mor" />
            </call>
          </where>
          <link name="kod_sf" />
          <link name="kod_dog">
            <link name="kod_dog_fin">
              <link name="kodp">
                <link name="kod_d_ur" />
              </link>
              <link name="kod_dog_dop">
                <link name="kod_group_cust">
                  <link name="kod_group_cust_parent" />
                </link>
              </link>
              <link name="dep" />
            </link>
          </link>
          <link name="kod_hist_mat_ba" as="kod_hist_mat">
            <link name="kod_result" />
            <link name="kod_mat" as="kod_mat_ba" />
          </link>
        </qube>
      </from>
    </query>
    <query name="mor_opl" timestamp="22.04.2021 16:27:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur.mor.xml" haskeys="1">
      <expressions>
        <call function="and" as="while_mor">
          <call function="gt">
            <column table="dat" column="val" />
            <column table="kod_hist_mat" column="dat_mor" />
          </call>
          <call function="le">
            <column table="dat" column="val" />
            <call function="nvl">
              <column table="kod_hist_mat" column="dat_mor_out" />
              <call function="doomsday" />
            </call>
          </call>
        </call>
        <call function="()" type="number" group="sum" as="opl1">
          <fact column="sr_opl_opl_sf" condition="while_mor" />
        </call>
        <call function="()" type="number" group="sum" as="opl_out_spis">
          <fact column="sr_opl_opl_sf_out_spis" condition="while_mor" />
        </call>
        <call function="()" type="number" group="sum" as="opl_spis">
          <fact column="sr_opl_opl_sf_spis" condition="while_mor" />
        </call>
      </expressions>
      <select>
        <call function="||" as="kod_mor_opl" key="1">
          <column table="kod_sf" column="kod_sf" />
          <const>'-'</const>
          <column table="kod_hist_mat" column="kod_hist_mat" />
          <const>'-'</const>
          <column table="kod_opl" column="kod_opl" />
        </call>
        <column table="kod_opl" column="kod_opl" dimension="kod_opl" as="kod_opl" />
        <column table="kod_sf" column="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="kod_sf" column="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="dat" column="val" as="dat" dimension="dat" />
        <column table="kod_mat_ba" column="kod_mat" dimension="kod_mat_ba" as="kod_mat" />
        <column table="kod_hist_mat" column="kod_hist_mat" dimension="kod_hist_mat_ba" as="kod_hist_mat" />
        <fact column="opl1" as="opl" agg="sum" fact="mor_opl_opl" title="Оплата мораторной задолженности" is-fact-use="1" />
        <fact column="opl_out_spis" as="opl_out_spis" agg="sum" fact="mor_opl_opl_out_spis" title="Оплата мораторной задолженности" is-fact-use="1" />
        <fact column="opl_spis" as="opl_spis" agg="sum" fact="mor_opl_opl_spis" title="Оплата мораторной задолженности" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="dat" />
          <link name="kod_opl" />
          <link name="kod_sf" />
          <link name="kod_hist_mat_ba" as="kod_hist_mat">
            <link name="kod_mat" as="kod_mat_ba" />
          </link>
        </qube>
      </from>
    </query>
    <query name="mor_out" timestamp="27.06.2017 03:28:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur.mor.xml" haskeys="1">
      <expressions>
        <call function="le" as="do_mor">
          <column table="dat" column="val" />
          <column table="kod_hist_mat" column="dat_mor_out" />
        </call>
        <call function="()" type="number" group="sum" as="opl1">
          <fact column="sr_opl_opl_sf" condition="do_mor" />
        </call>
      </expressions>
      <select>
        <call function="||" as="kod_mor_out" key="1">
          <column table="kod_sf" column="kod_sf" />
          <const>'-'</const>
          <column table="kod_hist_mat" column="kod_hist_mat" />
        </call>
        <column table="kod_sf" column="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_sf" column="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="kod_hist_mat" column="kod_hist_mat" dimension="kod_hist_mat_ba" as="kod_hist_mat" />
        <column table="kod_hist_mat" column="dat_mor_out" dimension="dat" as="dat_mor_out" />
        <column table="kod_mat_ba" column="kod_mat" dimension="kod_mat_ba" as="kod_mat" />
        <fact column="sr_facras_nachisl" as="nach" fact="mor_out_nach" agg="sum" title="Исключено начислений из мораторной задолженности" is-fact-use="1" />
        <fact column="opl1" as="opl" fact="mor_out_opl" agg="sum" title="Оплата начислений на момен исключения из мораторной задолженность" is-fact-use="1" />
        <call function="-nvl" as="dolg" fact="mor_out_dolg" agg="sum" title="Исключено из мораторной задолженности">
          <column table="this" column="nach" />
          <column table="this" column="opl" />
        </call>
        <column table="kod_hist_mat" column="dat_mor_out" as="dat_mor_out_max" fact="mor_out_dat_max" agg="max" />
        <column table="kod_hist_mat" column="name" as="hist_mat_name" agg="max" fact="mor_out_osnov" title="Основание для исключения" />
      </select>
      <from>
        <qube star-scheme="1">
          <where>
            <call function="is not null">
              <column table="kod_hist_mat" column="dat_mor_out" />
            </call>
          </where>
          <link name="kod_sf" />
          <link name="kod_dog">
            <link name="kod_dog_fin">
              <link name="kodp">
                <link name="kod_d_ur" />
              </link>
              <link name="kod_dog_dop">
                <link name="kod_group_cust">
                  <link name="kod_group_cust_parent" />
                </link>
              </link>
              <link name="dep" />
            </link>
          </link>
          <link name="kod_hist_mat_ba" as="kod_hist_mat">
            <link name="kod_mat" as="kod_mat_ba" />
          </link>
        </qube>
      </from>
    </query>
    <query name="adr_m_list" class="1" order="k_npw nulls first,name_p" timestamp="30.08.2017 16:24:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml" haskeys="1">
      <select>
        <column table="adr_m" column="kod_m" as="kod_m" key="1" fixed="1" />
        <call function="trim" as="name_p" key="0">
          <column table="adr_m" column="name_p" />
        </call>
        <column table="adr_m" column="k_npw" as="k_npw" key="0" />
      </select>
      <from>
        <query name="adr_m" as="adr_m" title="Административно территориальная единица" />
      </from>
      <order>
        <column column="k_npwnullsfirst" />
        <column column="name_p" />
      </order>
    </query>
    <query name="adr_m_list2" class="1" order="k_npw nulls first,name_p" timestamp="07.08.2024 14:00:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml" haskeys="1">
      <select>
        <column table="adr_m_by_esys" column="kod_m" as="kod_m" key="1" fixed="1" />
        <call function="trim" as="name_p" key="0">
          <column table="adr_m_by_esys" column="name_p" />
        </call>
        <column table="adr_m_by_esys" column="k_npw" as="k_npw" key="0" />
      </select>
      <from>
        <query name="adr_m_by_esys" as="adr_m_by_esys" title="Административно территориальная единица" />
      </from>
      <order>
        <column column="k_npwnullsfirst" />
        <column column="name_p" />
      </order>
    </query>
    <query name="adr_m_subject_list" order="name_p" class="1" timestamp="04.05.2023 12:10:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml" haskeys="1">
      <select>
        <column table="adr_m" column="kod_m" key="1" as="kod_m" />
        <call function="trim" as="name_p" title="Наименование">
          <column table="adr_m" column="name_p" />
        </call>
      </select>
      <from>
        <query name="adr_m" as="adr_m" title="Административно территориальная единица" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="adr_m" column="k_npw" />
          </call>
          <call function="like2">
            <column table="adr_m" column="okato" />
            <const>'__000000000'</const>
          </call>
        </call>
      </where>
      <order>
        <column column="name_p" />
      </order>
    </query>
    <query name="adr_m_subject_list_dep" class="1" order="name_p" timestamp="06.08.2024 10:09:59" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml" haskeys="1">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <column table="adr_m" column="kod_m" as="kod_m" key="1" fixed="1" />
        <call function="trim" as="name_p" key="0">
          <column table="adr_m" column="name_p" />
        </call>
        <column table="adr_m" column="k_npw" as="k_npw" key="0" />
      </select>
      <from>
        <query name="adr_m" as="adr_m" title="Административно территориальная единица" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="adr_m" column="k_npw" />
          </call>
          <call function="in">
            <column table="adr_m" column="kod_m" />
            <query>
              <select>
                <column table="b" column="adress_sf" as="adress_sf" />
              </select>
              <from>
                <query name="kr_dogovor_list_adr_m(dep)" as="b">
                  <withparams>
                    <useparam name="p_dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="name_p" />
      </order>
    </query>
    <query name="adr_m_obj_list_dep" class="1" order="name_p" timestamp="19.06.2023 12:36:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml" haskeys="1">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <column table="adr_m" column="kod_m" group="1" as="kod_m" key="1" fixed="1" />
        <call function="trim" as="name_p" group="max" key="0">
          <column table="adr_m" column="name_p" />
        </call>
      </select>
      <from>
        <query name="adr_m" as="adr_m" title="Административно территориальная единица" />
        <query name="kr_dogovor_list_adr_m_obj(dep)" as="b" join="inner" dname="adr_m_obj_list_dep">
          <withparams>
            <useparam name="p_dep" />
          </withparams>
          <call function="=">
            <column table="adr_m" column="kod_m" />
            <column table="b" column="adress_region" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="adr_m" column="k_npw" />
        </call>
      </where>
      <order>
        <column column="name_p" />
      </order>
    </query>
    <query name="adr_m_obj_list_dep_empty" class="1" order="name_p" comment="Сделано для примера, если не используется можно удалить (Бельченко)" timestamp="13.09.2023 17:24:18" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\adr_m.xml">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <call function="()" type="number" as="kod_m" key="0">
          <const>1</const>
        </call>
        <call function="()" type="string" as="name_p" key="0">
          <const>''</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
      <where>
        <call function="false" />
      </where>
      <order>
        <column column="name_p" />
      </order>
    </query>
    <query name="all_deb_sf" class="1" timestamp="08.06.2017 11:21:25" intrval="FREQ=HOURLY; INTERVAL=1" stored="vv_all_deb_sf" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\all_deb_sf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb_sf" type="number" key="1" index="1" as="kod_deb_sf" />
        <column table="a" column="kod_sf" type="number" index="1" as="kod_sf" />
      </select>
      <from>
        <table name="all_deb_sf" as="a" view="1" />
      </from>
    </query>
    <query name="dr_point_ex" class="1" timestamp="23.11.2016 17:49:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\dr_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" as="kod_point" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" comment="v1;v2: код потребителя" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="prizn_sa" type="number" title="" comment="неактуален (вычисляется)" as="prizn_sa" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="v1;v2:" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="v1;v2:" as="dat_po" key="0" />
        <column table="a" column="nomer" type="number" title="" comment="v1;v2:" as="nomer" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="v1;v2:" as="name" key="0" />
        <column table="a" column="prim" type="string" title="" comment="v1;v2:" as="prim" key="0" />
        <column table="a" column="kod" type="number" title="" comment="v1:" as="kod" reference="qr_schema" refcol="kod" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="v1;v2:" as="pr_active" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="pr_balrasch" type="number" title="" comment="v1;v2:" as="pr_balrasch" key="0" />
        <column table="a" column="kod_tn" type="number" comment="v1:" as="kod_tn" key="0" />
        <column table="a" column="otkr_zakr" type="number" title="" comment="схема откр/закр временно до подключения к схеме" as="otkr_zakr" key="0" />
        <column table="a" column="kod_point_to" type="number" comment="код ту, на которую переоформлена данная точка учёта" as="kod_point_to" key="0" />
        <column table="a" column="kod_point_parent" type="number" as="kod_point_parent" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_point" as="a" />
        <query name="qr_schema" as="kod" join="left outer" dname="dr_point_ex">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="dr_point_ex">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
      </from>
    </query>
    <query name="ds_naznhouse_list" class="1" timestamp="22.11.2016 16:56:28" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ds_naznhouse.xml" haskeys="1">
      <select>
        <column table="a" column="kodnaznteplo" type="number" title="" as="kodnaznteplo" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
      </select>
      <from>
        <query name="ds_naznhouse" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="f46_razdel" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <select>
        <column table="a" column="*" as="*" key="0"></column>
      </select>
      <from>
        <query as="a">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="string" key="1" fixed="1">'I'</const>
                <const as="name" type="string" title="Раздел Ф46" key="0">'I. Полезный отпуск электроэнергии и мощности, реализуемой по регулируемым тарифам (ценам)'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
            <query>
              <select>
                <const as="id">'II'</const>
                <const as="name">'II. Полезный отпуск электроэнергии и мощности, реализуемой по нерегулируемым ценам'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="f46_podrazdel" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <select>
        <column table="a" column="*" as="*" key="0"></column>
      </select>
      <from>
        <query as="a">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="string" key="1" fixed="1">'А'</const>
                <const as="name" type="string" title="Подраздел Ф46" key="0">'А. по Договору энергоснабжения'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
            <query>
              <select>
                <const as="id" forcustomers="8">'Б'</const>
                <const as="name" forcustomers="8">'А. по Договору энергоснабжения'</const>
                <const as="id" notforcustomers="8">'Б'</const>
                <const as="name" notforcustomers="8">'Б. по Договору купли-продажи'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
            <query>
              <select>
                <const as="id">'В'</const>
                <const as="name">'В. населению и приравненным к нему категориям потребителей'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="hk_voltage_fact" timestamp="10.09.2017 03:04:06" inherit="hk_voltage" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hk_voltage.xml" haskeys="1">
      <select>
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" key-dimension="voltage" as="voltage" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Уровень напряжения" comment="уровень напряжения (высокое, среднее низкое)" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Уровень напряжения" as="abbr" key="0" />
        <column table="a" column="kod_sort" type="number" comment="определяет порядок вывода в окне договорных значений (в дереве), а также как уникальный код идентификации для работы с деревом. определяет полрядок вывода значений по уровням напряжений в приложенииях 2.1 и 2.2" as="kod_sort" key="0" />
        <column table="a" column="tgf" type="number" title="" comment="нормативный коэффициент реактивной мощности" as="tgf" key="0" />
        <column table="a" column="pr_fict" type="number" title="" comment="признак фиктивной строки - обеспечивает отдельные режимы программы. (1/0 да/нет)" as="pr_fict" key="0" />
        <column table="a" column="pr_gener" type="number" title="" comment="признак &quot;с шин&quot; - 1" as="pr_gener" key="0" />
        <column table="a" column="kod_parent" type="number" comment="для родительского(физического) уровня" as="kod_parent" reference="hk_voltage" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="признак &quot;удалённый&quot; - 1" as="pr_active" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_voltage" as="a" title="Уровень напряжения" />
        <query name="hk_voltage" as="kod_parent" join="left outer" dname="hk_voltage_fact" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
      <links />
    </query>
    <query name="voltage_all" title="Уровень напряжения" order="kod_sort" timestamp="13.09.2023 11:10:33" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hk_voltage.xml" haskeys="1">
      <select>
        <column table="a" column="voltage" as="voltage" key="1" fixed="1" />
        <column table="a" column="abbr" as="voltage_abbr" title="Уровень напряжения" type="string" key="0" />
        <column table="a" column="kod_sort" as="kod_sort" key="0" />
      </select>
      <from>
        <query name="hk_voltage" as="a" title="Уровень напряжения" />
      </from>
      <order>
        <column column="kod_sort" />
      </order>
    </query>
    <query name="hr_bal_point_har_all" class="1" timestamp="23.10.2017 22:06:01" inherit="hr_bal_point_har" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_bal_point_har.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_har" type="number" as="kod_bal_point_har" key="1" fixed="1" />
        <column table="a" column="kod_bal_point" type="number" comment="Код точки технического учета" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="method" type="number" title="" comment="Метод учета" as="method" reference="hk_method" refcol="method" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата начала действия" as="dat_s" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата окончания действия" as="dat_po" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="pr_poteri" type="number" title="" comment="Признак указывать потери вручную ( 1 )" as="pr_poteri" key="0" />
        <column table="a" column="rkoeff" type="number" title="" comment="Расчетный коэффициент - не используется (перенесен в hr_bal_point_en)." as="rkoeff" key="0" />
        <column table="a" column="remark" type="string" title="" comment="Примечания" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="prizn_parent" type="number" title="" comment="Признак дочерности точки - не используется (введено понятие старшей точки)" as="prizn_parent" key="0" />
        <column table="a" column="kod_sp" type="number" comment="Не используется.. устарело" as="kod_sp" reference="hr_sp" refcol="kod_sp" key="0" />
        <column table="a" column="pr_sp" type="number" title="" comment="Признак принадлежности к сечению поставки" as="pr_sp" key="0" />
        <column table="a" column="pr_commerce" type="number" title="" comment="Указывет, что техническая точка одновременно является и коммерческой" as="pr_commerce" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="Код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="voltage" column="abbr" as="volt_abbr" is-fact="1" agg="list" fact="hr_bal_pnt_h_all_volt_abbr" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_har" as="a">
          <link name="kod_bal_point" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_har_all" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_har_all">
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_har_all" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_har_all">
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_method" as="method" join="left inner" dname="hr_bal_point_har_all">
          <call function="=">
            <column table="a" column="method" />
            <column table="method" column="method" />
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left inner" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_har_all">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="hr_sp" as="kod_sp" join="left outer" dname="hr_bal_point_har_all">
          <call function="=">
            <column table="a" column="kod_sp" />
            <column table="kod_sp" column="kod_sp" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_har_all" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_bal_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="hr_bal_point_pu_all" timestamp="23.10.2017 22:06:03" inherit="hr_bal_point_pu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_bal_point_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_pu" type="number" as="kod_bal_point_pu" key="1" fixed="1" />
        <column table="a" column="kod_bal_point" type="number" comment="Код точки технического учета" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата установки" dimension="dat_s" as="dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата снятия" dimension="dat_po" as="dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="razr" type="number" title="" comment="Разрядность целой части" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" comment="Разрядность дробной части" as="razr2" key="0" />
        <column table="a" column="kod_tippu" type="number" comment="код типа Сч осн" as="kod_tippu" reference="hs_tippu" refcol="kod_tippu" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="prim" type="string" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="nom_pu" type="string" title="" comment="Номер прибора учета" is-fact="1" agg="list" as="nom_pu" fact="hr_bal_pnt_pu_all_nom_pu" key="0" />
        <column table="a" column="kod_pu_u" type="number" comment="Код счетчика индивид" as="kod_pu_u" reference="hr_pu_u" refcol="kod_pu_u" key="0" />
        <column table="a" column="doc_attach" type="string" title="" comment="наименования присоединенных файлов" as="doc_attach" key="0" />
        <column table="a" column="pr_ikk" type="number" title="" comment="наличие ИКК  1-есть" as="pr_ikk" key="0" />
        <column table="a" column="plomba_ikk" type="string" title="" comment="номер пломбы ИКК" as="plomba_ikk" key="0" />
        <column table="a" column="dat_plomba_ikk" type="date" title="" comment="дата опломбирования ИКК" as="dat_plomba_ikk" key="0" />
        <column table="a" column="kodsx" type="number" title="" comment="схема подключения" as="kodsx" reference="hk_sx" refcol="kodsx" key="0" />
        <column table="a" column="poteri_u_fact" type="number" title="" comment="фактические потери напряжения в цепи счетчик -&gt; ТН" as="poteri_u_fact" key="0" />
        <column table="a" column="vkl_aiis" type="string" title="" comment="Т-телеметрический; Ц-цифровой; Т,Ц-телеметрич и цифровой; пусто-отсутствует" as="vkl_aiis" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="kod_pktippu" column="name_pk" is-fact="1" agg="list" as="name_pk" fact="hr_bal_point_pu_all_name_pk" key="0" />
        <call function="||" title="interval_existence" as="interval_existence" is-fact="1" fact="hr_bal_pnt_pu_all_existint" agg="list" key="0">
          <call function="to_char">
            <column table="this" column="dat_s" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <call function="decode">
            <column table="this" column="dat_po" />
            <call function="null">NULL</call>
            <const>''</const>
            <const>'-'</const>
          </call>
          <call function="to_char">
            <column table="this" column="dat_po" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <const>','</const>
          <call function="decode">
            <column table="this" column="dat_po" />
            <call function="null">NULL</call>
            <const>'А'</const>
            <const>'У'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="hr_bal_point_pu" as="a">
          <link name="kod_tippu" as="kod_tippu" table="hs_tippu" child="hr_bal_point_pu_all" field="kod_tippu" parent="hs_tippu" back="hr_bal_point_pu_all">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_bal_point" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_pu_all" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_pu_all">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_pu_all" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_pu_all">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_tippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_sx" as="kodsx" join="left outer" dname="hr_bal_point_pu_all">
          <call function="=">
            <column table="a" column="kodsx" />
            <column table="kodsx" column="kodsx" />
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_pu_all">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="hs_tippu" as="kod_tippu" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_pu_all">
          <call function="=">
            <column table="a" column="kod_tippu" />
            <column table="kod_tippu" column="kod_tippu" />
          </call>
        </query>
        <query name="hr_pu_u" as="kod_pu_u" join="left outer" dname="hr_bal_point_pu_all">
          <call function="=">
            <column table="a" column="kod_pu_u" />
            <column table="kod_pu_u" column="kod_pu_u" />
          </call>
        </query>
        <query join="left outer" name="hs_pktippu" as="kod_pktippu" dname="hr_bal_point_pu_all">
          <call function="=">
            <column table="kod_tippu" column="kod_pktippu" />
            <column table="kod_pktippu" column="kod_pktippu" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_tippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" is-final-dimension="1" dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="hr_eobject_src" title="Энергообъекты" inherit="hr_eobject" timestamp="26.10.2017 17:55:48" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_eobject.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" is-fact="1" agg="list" as="name" fact="hr_eobject_name" key="0" />
        <column table="a" column="bal_id" type="number" title="" as="bal_id" reference="kr_org_group" refcol="kod_org" key="0" />
        <column table="a" column="expl_id" type="number" title="" as="expl_id" reference="kr_org" key="0" />
        <column table="a" column="parent_id" type="number" title="" as="parent_id" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" reference="hk_eoseparator" refcol="kod_separator" key="0" />
        <column table="a" column="deleted" type="number" title="" comment="признак того что объект удален. (можно считать перенесен в архив)" as="deleted" key="0" />
        <column table="a" column="synchronized" type="number" title="" comment="признак того, что рассинхронизации по этой строке нет" as="synchronized" key="0" />
        <column table="a" column="imported" type="number" title="" comment="признак того, что объект импортирован" as="imported" key="0" />
        <column table="a" column="coment" type="string" title="" comment="комментарий" as="coment" key="0" />
        <column table="a" column="kod_v" type="number" comment="первичный ключ" as="kod_v" reference="hk_v" refcol="kod_v" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_eobject" as="a">
          <link name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_v" table="hk_v" child="hr_eobject_src" field="kod_v" parent="hk_v" back="hr_eobject_src" title="Фактическое напряжение">
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="parent_id_ext" dimension="1" is-final-dimension="1" is-private-dimension="1" as="parent_id_ext" table="hr_eosrc" child="hr_eobject_src" field="parent_id_ext" parent="hr_eosrc" back="hr_eobject_src">
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_org_group" as="kod_org_group" table="kr_org_group" child="hr_eobject_src" field="kod_org_group" parent="kr_org_group" back="hr_eobject_src" />
          <dlink name="hr_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_bal_point" table="hr_bal_point" child="hr_bal_point" field="eobj_id" parent="hr_eobject" back="hr_bal_point" />
          <dlink name="hr_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="eobj_id" parent="hr_eobject" back="hr_point_har" title="Характеристика ТУ">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="parent_id" parent="hr_eobject" back="hr_eobject">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="kr_org" as="kod_org" join="left outer" dname="hr_eobject_src">
          <call function="=">
            <column table="a" column="expl_id" />
            <column table="expl_id" column="kodp" />
          </call>
        </query>
        <query name="hk_eoseparator" as="kod_separator" join="left outer" dname="hr_eobject_src">
          <call function="=">
            <column table="a" column="kod_separator" />
            <column table="kod_separator" column="kod_separator" />
          </call>
        </query>
        <query name="hk_v" as="kod_v" join="left outer" dname="hr_eobject_src" title="Фактическое напряжение">
          <call function="=">
            <column table="a" column="kod_v" />
            <column table="kod_v" column="kod_v" />
          </call>
        </query>
        <query name="hr_eobject" as="parent_id" join="left outer" dname="hr_eobject_src">
          <call function="=">
            <column table="a" column="parent_id" />
            <column table="parent_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eosrc" as="parent_id_ext" join="left outer" dname="hr_eobject_src">
          <call function="=">
            <column table="a" column="parent_id" />
            <column table="parent_id_ext" column="eobj_id" />
          </call>
        </query>
        <query name="kr_org_group" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_org_group" dname="hr_eobject_src">
          <call function="=">
            <column table="a" column="bal_id" />
            <column table="kod_org_group" column="kod_org" />
          </call>
        </query>
        <query name="hv_eobject_senter_nut" as="kod_eobject_senter_nut" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_eobject_src" title="Центры питания ЭО">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="kod_eobject_senter_nut" column="eobj_id" />
          </call>
        </query>
        <query name="kr_org_elter" as="expl_id" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_eobject_src" title="Эксплуатационная организация">
          <call function="=">
            <column table="a" column="expl_id" />
            <column table="expl_id" column="kodp" />
          </call>
        </query>
        <query name="kr_org_bal" as="bal_id" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_eobject_src" title="Балансовая организация">
          <call function="=">
            <column table="a" column="bal_id" />
            <column table="bal_id" column="kodp" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="hr_point_tree" inherit="hr_point" timestamp="24.09.2016 00:49:23" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" comment="код потребителя" as="kod_obj" key="0" />
        <column table="a" column="nomer" type="number" title="Номер ТУ" comment="номер точки учета" as="nomer" key="0" />
        <column table="a" column="mesto" type="string" title="" comment="место расположения" as="mesto" key="0" />
        <column table="a" column="dat_s" type="date" title="" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата удаления точки учета" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="prizn_sa" type="number" title="" as="prizn_sa" key="0" />
        <column table="a" column="kod_pointmain" type="number" comment="код ту" as="kod_pointmain" key="0" />
        <column table="a" column="tpoint" type="number" title="" comment=" 0  - основная&#xA; 1  - прочее потребление&#xA; 2  - субабонент&#xA; 3  - транзит" as="tpoint" reference="hk_tpoint" refcol="tpoint" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0" />
        <column table="a" column="kod_point_dost" type="number" as="kod_point_dost" reference="ts_point_dost" refcol="kod_point_dost" key="0" />
        <column table="a" column="mop" type="number" title="" comment="признак &quot;вариант расчета моп&quot; в точке учета:&#xA;0 - не участвует&#xA;1 - расход распределяется по квартирам&#xA;2 - с расхода снимается расход населения&#xA;имеет смысл для быт. и пром. потребителей." as="mop" key="0" />
        <column table="a" column="nagruz_type" type="number" title="" comment="тип назначения нагузки (для расчёта вдр):&#xA;0 - не указана&#xA;1 - общая&#xA;2 - вдр (моп)&#xA;3 - бытовая&#xA;4 - юл" as="nagruz_type" key="0" />
        <column table="a" column="kod_vid_kpt" type="number" as="kod_vid_kpt" reference="hk_vid_kpt" refcol="kod_vid_kpt" key="0" />
        <column table="a" column="kod_pr_kind" type="number" comment="код типа присоединения" as="kod_pr_kind" reference="ak_pr_kind" refcol="kod_pr_kind" key="0" />
        <column table="a" column="kod_algpoint" type="number" as="kod_algpoint" reference="hk_algpoint" refcol="kod_algpoint" key="0" />
        <column table="a" column="kod_obj_vdr" type="number" comment="код объекта вдр" dimension="kod_obj_vdr" as="kod_obj_vdr" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="pr_view" type="number" title="" comment="признак &quot;точка проекция&quot; (1 | 0)&#xA;1 - точка является проекцией точки (транзит - абонент) другого потребителя." as="pr_view" key="0" />
        <column table="a" column="typetu" type="number" title="" comment="тип ту (жилая=1, нежилая=0)" as="typetu" key="0" />
        <column table="a" column="sn_isp" type="number" title="" comment="учет в расчетах соц.норм (1-учет)" as="sn_isp" key="0" />
        <column table="a" column="id_askue" type="number" title="" comment="идентификатор системы аскуэ" as="id_askue" key="0" />
        <column table="a" column="kodp_net" type="number" title="" comment="Код организации к сетям которой выполнено присоединение" as="kodp_net" reference="kr_org_group" refcol="kod_org" key="0" />
        <column table="a" column="kodp_rsk" type="number" title="" comment="Код РЭС, в зоне которого находится точка учета" as="kodp_rsk" reference="hv_elter_org" refcol="kodp" key="0" />
        <column table="a" column="kodp_fsk" type="number" title="" comment="Код ТСО (филиал териториальной сетевой организации) в зоне которого находится точка" as="kodp_fsk" reference="hv_seti" refcol="kod" key="0" />
        <column table="a" column="kodp_pwrcompany" type="number" title="" comment="Код сетевой организации (РСК, ССО, ПЭЭ), в группу потребителей которой входит точка рассматриваемого потребителя. Потребители входят одну группу, если они присоединены к данной сети непосредственно или опосредовано (через сети ИВС и безхозяйные сети)." as="kodp_pwrcompany" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="pr_gkh" type="number" title="" comment="признак принадлежности точки к выгрузке в ГИС ЖКХ." as="pr_gkh" reference="hk_gisgkh" refcol="pr_gkh" key="0" />
        <column table="a" column="kod_attpoint" type="number" comment="Код точки присоединения" as="kod_attpoint" key="0" />
        <column table="tpoint" column="name" as="type_point" key="0" />
        <column table="kod_net" column="name" as="net_point" title="Признак присоединения к сетям" key="0" />
        <column table="kod_net" column="kod_org_group" as="kod_org_group" key="0" />
        <column table="dover" column="dover" as="dover" key="0" />
        <call function="decode" type="string" as="use_maket" key="0">
          <column table="grs" column="kod_rpoint" />
          <const>null</const>
          <const>0</const>
          <const>1</const>
        </call>
        <const type="number" as="cnt" fact="hr_point_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point" as="a">
          <dlink name="nr_calc" dimension="1" as="nr_calc" table="nr_calc" child="nr_calc" field="kod_point" parent="hr_point" back="nr_calc" />
          <dlink name="hr_point_pu" dimension="1" as="hr_point_pu" table="hr_point_pu" child="hr_point_pu" field="kod_point" parent="hr_point" back="hr_point_pu">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_ini" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point_tar" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_tar" table="hr_point_tar" child="hr_point_tar" field="kod_point" parent="hr_point" back="hr_point_tar">
            <dimlink name="kod_point_rasx" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point_har" dimension="1" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="kod_point" parent="hr_point" back="hr_point_har" title="Характеристика ТУ">
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_obj" dimension="1" as="kod_obj" table="kr_object" child="hr_point_tree" field="kod_obj" parent="kr_object" back="hr_point_tree">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ak_pr_kind" as="kod_pr_kind" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_pr_kind" />
            <column table="kod_pr_kind" column="kod_pr_kind" />
          </call>
        </query>
        <query name="hk_algpoint" as="kod_algpoint" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_algpoint" />
            <column table="kod_algpoint" column="kod_algpoint" />
          </call>
        </query>
        <query name="hk_tpoint" as="tpoint" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="tpoint" />
            <column table="tpoint" column="tpoint" />
          </call>
        </query>
        <query name="hk_vid_kpt" as="kod_vid_kpt" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_vid_kpt" />
            <column table="kod_vid_kpt" column="kod_vid_kpt" />
          </call>
        </query>
        <query name="hk_vid_point_calc" as="mop" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="mop" />
            <column table="mop" column="kod" />
          </call>
        </query>
        <query name="hr_point" as="kod_pointmain" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_pointmain" />
            <column table="kod_pointmain" column="kod_point" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj_vdr" join="left outer" dname="hr_point_vdr">
          <call function="=">
            <column table="a" column="kod_obj_vdr" />
            <column table="kod_obj_vdr" column="kod_obj" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="ts_point_dost" as="kod_point_dost" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_point_dost" />
            <column table="kod_point_dost" column="kod_point_dost" />
          </call>
        </query>
        <query name="ts_id_askue" as="id_askue" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="id_askue" />
            <column table="id_askue" column="id" />
          </call>
        </query>
        <query name="hk_gisgkh" as="pr_gkh" join="left inner" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="pr_gkh" />
            <column table="pr_gkh" column="pr_gkh" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kodp_pwrcompany" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="hk_vid_point_calc" as="kod" join="left inner" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="mop" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="ts_id_askue" as="id" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="id_askue" />
            <column table="id" column="id" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_pointmain" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hv_elter_org" as="kod_elter" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_tree" title="Огранизации , которые явл. эксплуатац. подразделением">
          <call function="=">
            <column table="a" column="kodp_rsk" />
            <column table="kod_elter" column="kodp" />
          </call>
        </query>
        <query name="hv_seti" as="kod_seti" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_tree">
          <call function="=">
            <call function="nvl">
              <column table="a" column="kodp_fsk" />
              <const>0</const>
            </call>
            <column table="kod_seti" column="kod" />
          </call>
        </query>
        <query name="hv_nugruzpotreb2" as="kod_nugruz" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_nugruz" column="kod_obj" />
          </call>
        </query>
        <query name="hv_point_prov" as="prov" join="left outer" dimension="1" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="prov" column="kod_point" />
          </call>
        </query>
        <query name="kr_org_group" as="kod_net" join="left outer" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kodp_net" />
            <column table="kod_net" column="kod_org" />
          </call>
        </query>
        <query name="hv_point_dover" join="left outer" as="dover" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="dover" column="kod_point" />
          </call>
        </query>
        <query name="hv_point_in_group_schema" join="left outer" as="grs" comment="Точка используется в макете" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="grs" column="kod_rpoint" />
          </call>
        </query>
        <query name="hr_point_tree" as="kod_point_tree" join="left outer" dimension="1" dname="hr_point_tree">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point_tree" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_har_pu" timestamp="30.03.2017 16:35:22" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_point_har_pu.xml">
      <select>
        <column table="hr_point_pu" column="kod_point_pu" as="kod_point_pu" key="0" />
        <column table="hr_point_har" column="kod_point_har" as="kod_point_har" key="0" />
        <call function="latest" as="dat_s" key="0">
          <column table="hr_point_har" column="dat_s" />
          <column table="hr_point_pu" column="dat_s" />
        </call>
        <call function="earliest" as="dat_po" key="0">
          <call function="nvl">
            <column table="hr_point_har" column="dat_po" />
            <call function="doomsday" />
          </call>
          <call function="nvl">
            <column table="hr_point_pu" column="dat_po" />
            <call function="doomsday" />
          </call>
        </call>
        <call function="over" as="last_dat_for_pu" type="date" key="0">
          <call function="max">
            <column table="this" column="dat_s" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_point_pu" />
          </call>
        </call>
        <call function="if" type="number" as="pr_last_har_for_pu" key="0">
          <call function="=">
            <column table="this" column="last_dat_for_pu" />
            <column table="this" column="dat_s" />
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="hr_point" as="hr_point">
          <elink name="hr_point_pu" as="hr_point_pu" table="hr_point_pu" child="hr_point_pu" field="kod_point" parent="hr_point" back="hr_point_pu" />
          <elink name="hr_point_har" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="kod_point" parent="hr_point" back="hr_point_har" title="Характеристика ТУ" />
        </query>
        <query name="hr_point_har" as="kod_point_har" join="left outer" dname="hr_point_har_pu" title="Характеристика ТУ">
          <call function="=">
            <column table="this" column="kod_point_har" />
            <column table="kod_point_har" column="kod_point_har" />
          </call>
        </query>
        <query name="hr_point_pu" as="kod_point_pu" join="left outer" dname="hr_point_har_pu">
          <call function="=">
            <column table="this" column="kod_point_pu" />
            <column table="kod_point_pu" column="kod_point_pu" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="le">
            <column table="this" column="dat_s" />
            <column table="this" column="dat_po" />
          </call>
          <call function="in">
            <column table="hr_point_har" column="method" />
            <call function="array">
              <const>1</const>
              <const>4</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="hr_point_pu_list" timestamp="01.06.2017 13:45:09" class="1" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_point_pu.xml" haskeys="1">
      <params>
        <param type="array" name="kod_m" />
        <param type="array" name="kod_s" />
        <param type="array" name="kodd" />
      </params>
      <select>
        <column table="a" column="kod_point_pu" key="1" as="kod_point_pu" />
        <column table="a" column="nom_pu" as="name" />
        <column table="kodd" column="kf_adress_o" as="kf_adress_o" />
      </select>
      <from>
        <query name="hr_point_pu" as="a">
          <link name="kod_point_link" as="kod_point_link" table="tv_point_link" child="hr_point_pu" field="kod_point_link" parent="tv_point_link" back="hr_point_pu">
            <link name="kod_point" as="kod_point" table="hr_point" child="tv_point_link" field="kod_point" parent="hr_point" back="tv_point_link">
              <link name="kod_obj" as="kod_obj" table="kr_object" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
                <link name="kodd" as="kodd" table="k_house" child="kr_object" field="kodd" parent="k_house" back="kr_object">
                  <link name="kod_s" as="kod_s" table="k_strits" child="k_house" field="kod_s" parent="k_strits" back="k_house">
                    <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
                  </link>
                </link>
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="in" optional="1">
          <column table="kod_m" column="kod_m" />
          <useparam name="kod_m" />
        </call>
        <call function="in" optional="1">
          <column table="kod_s" column="kod" />
          <useparam name="kod_s" />
        </call>
        <call function="or" optional="1">
          <call function="in">
            <column table="kodd" column="kod_r" />
            <useparam name="kodd" />
          </call>
          <call function="in">
            <column table="kodd" column="kodd" />
            <useparam name="kodd" />
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="hr_point_pu_all" timestamp="27.11.2017 23:56:44" inherit="hr_point_pu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hr_point_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_pu" type="number" comment="код сч" as="kod_point_pu" key="1" fixed="1" />
        <column table="a" column="kod_tippu" type="number" comment="код типа сч осн" as="kod_tippu" reference="hs_tippu" refcol="kod_tippu" key="0" />
        <column table="a" column="kod_point" type="number" comment="код точки учета" title="Код точки учёта" as="kod_point" key="0" />
        <column table="a" column="nom_pu" type="string" title="Заводской номер" comment="номер прибора учета" is-fact="1" agg="list" as="nom_pu" reference="hr_point_pu" refcol="kod_point" fact="hr_pnt_pu_all_nom_pu" key="0" />
        <column table="a" column="kod_bal" type="number" comment="код балансовой принадлежности" title="Код балансовой принадлежности" as="kod_bal" reference="kk_bal" refcol="kod_bal" key="0" />
        <column table="a" column="kod_expl" type="number" comment="код эксплуатационной принадлежности" as="kod_expl" reference="kk_bal" refcol="kod_bal" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата установки" dimension="dat_s" as="dat_s" reference="hr_point_pu" refcol="kod_point" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата снятия" dimension="dat_po" as="dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="razr" type="number" title="" comment="разрядность целой части" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" comment="разрядность дробной части" as="razr2" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_pover" type="date" title="" as="dat_pover" key="0" />
        <column table="a" column="kod_pu_u" type="number" comment="код счетчика индивид" as="kod_pu_u" reference="hr_pu_u" refcol="kod_pu_u" key="0" />
        <column table="a" column="kodsx" type="number" title="" comment="код вида схемы включения" as="kodsx" reference="hk_sx" refcol="kodsx" key="0" />
        <column table="a" column="glubina" type="number" title="" comment="глубина хранения (сут)" as="glubina" key="0" />
        <column table="a" column="interval" type="string" title="" comment="интервалы записи" as="interval" key="0" />
        <column table="a" column="elem_fact" type="number" title="" comment="элементность фактическая" as="elem_fact" key="0" />
        <column table="a" column="provodn_fact" type="number" title="" comment="проводность фактическая" as="provodn_fact" key="0" />
        <column table="a" column="obogrev" type="number" title="" comment="наличие обогрева 1-есть обогрев" as="obogrev" key="0" />
        <column table="a" column="doc_attach" type="string" title="" comment="наименования присоединенных файлов" as="doc_attach" key="0" />
        <column table="a" column="kodp_sobstv" type="number" title="" comment="код собственника (фл)" as="kodp_sobstv" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="cel_plomb" type="number" title="" comment="целостность пломб: 1-целые, 0-нарушена целостность (для планшетов ленэнерго)" as="cel_plomb" key="0" />
        <column table="a" column="plomba_yes" type="number" title="" comment="наличие пломбы (только для ленэнерго): 1-пломба есть, 0-пломбы нет" as="plomba_yes" key="0" />
        <const as="cnt" type="number" fact="hr_point_pu_count" agg="sum" key="0">1</const>
        <column table="kod_point_pu_zamen" column="kod_point_pu" as="kod_point_pu_zamen" title="Код заменённого ПУ" dgroup="max" reference="hr_point_pu" refcol="kod_point" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="||" title="interval_existence" as="interval_existence" is-fact="1" fact="hr_pnt_pu_all_existint" agg="list" key="0">
          <call function="to_char">
            <column table="this" column="dat_s" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <call function="decode">
            <column table="this" column="pr_active" />
            <const function="null">1</const>
            <const>'-'</const>
            <const>''</const>
          </call>
          <call function="to_char">
            <column table="this" column="dat_po" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <const>','</const>
          <call function="decode">
            <column table="this" column="pr_active" />
            <const function="null">0</const>
            <const>'А'</const>
            <const function="null">1</const>
            <const>'У'</const>
            <const function="null">2</const>
            <const>'Н'</const>
          </call>
        </call>
        <column table="kod_pktippu" column="name_pk" is-fact="1" agg="list" fact="hr_pnt_pu_all_name_pk" as="name_pk" key="0" />
      </select>
      <from>
        <table name="hr_point_pu" as="a">
          <link name="kod_point_pu_zamen" as="kod_point_pu_zamen" table="hr_point_pu" child="hr_point_pu_all" field="kod_point_pu_zamen" parent="hr_point_pu" back="hr_point_pu_zamen" />
          <dlink name="hr_point_en" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_en" table="hr_point_en" child="hr_point_en" field="kod_point_pu_all" parent="hr_point_pu_all" back="hr_point_en">
            <dimlink name="kod_point_ini" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_tippu" as="kod_tippu" table="hs_tippu" child="hr_point_pu_all" field="kod_tippu" parent="hs_tippu" back="hr_point_pu_all">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_point" as="kod_point" table="hr_point" child="hr_point_pu_all" field="kod_point" parent="hr_point" back="hr_point_pu_all">
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_prov" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="hv_point_plombs" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hv_point_plombs" table="hv_point_plombs" child="hv_point_plombs" field="kod_pu" parent="hr_point_pu" back="hv_point_plombs" />
          <dlink name="mv_point_plombs" dimension="1" is-final-dimension="1" is-private-dimension="1" as="mv_point_plombs" table="mv_point_plombs" child="mv_point_plombs" field="kod_pu" parent="hr_point_pu" back="mv_point_plombs" />
          <link name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_point" table="hr_point" child="hr_point_pu_all" field="kod_point" parent="hr_point" back="hr_point_pu_all">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_sx" as="kodsx" join="left outer" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="kodsx" />
            <column table="kodsx" column="kodsx" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dimension="1" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hr_pu_u" as="kod_pu_u" join="left outer" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="kod_pu_u" />
            <column table="kod_pu_u" column="kod_pu_u" />
          </call>
        </query>
        <query name="hs_tippu" as="kod_tippu" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="kod_tippu" />
            <column table="kod_tippu" column="kod_tippu" />
          </call>
        </query>
        <query join="left outer" name="hs_pktippu" as="kod_pktippu" dname="hr_point_pu_all">
          <call function="=">
            <column table="kod_tippu" column="kod_pktippu" />
            <column table="kod_pktippu" column="kod_pktippu" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_bal" as="kod_bal" join="left outer" dname="hr_point_pu_all" title="Балансовая принадлежность">
          <call function="=">
            <column table="a" column="kod_bal" />
            <column table="kod_bal" column="kod_bal" />
          </call>
        </query>
        <query name="kk_bal" as="kod_expl" join="left outer" dname="hr_point_pu_all" title="Балансовая принадлежность">
          <call function="=">
            <column table="a" column="kod_expl" />
            <column table="kod_expl" column="kod_bal" />
          </call>
        </query>
        <query name="kr_org" as="kodp_sobstv" join="left outer" dname="hr_point_pu_all">
          <call function="=">
            <column table="a" column="kodp_sobstv" />
            <column table="kodp_sobstv" column="kodp" />
          </call>
        </query>
        <query name="hr_point_pu" as="kod_point_pu_zamen" join="left outer" comment="по подобию kg_find.f_pu" dname="hr_point_pu_zamen">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_point" />
              <column table="kod_point_pu_zamen" column="kod_point" />
            </call>
            <call function="!=">
              <column table="a" column="nom_pu" />
              <column table="kod_point_pu_zamen" column="nom_pu" />
            </call>
            <call function="!=">
              <column table="a" column="kod_point_pu" />
              <column table="kod_point_pu_zamen" column="kod_point_pu" />
            </call>
            <call function="=">
              <call function="date to ym">
                <column table="a" column="dat_s" />
              </call>
              <call function="date to ym">
                <column table="kod_point_pu_zamen" column="dat_po" />
              </call>
            </call>
            <call function="ge">
              <column table="a" column="dat_s" />
              <column table="kod_point_pu_zamen" column="dat_po" />
            </call>
          </call>
        </query>
        <query name="tv_point_link" as="kod_point_link" join="left outer" dname="hr_point_pu_all">
          <call function="=">
            <column table="kod_point_link" column="kod_point_link" />
            <column table="a" column="kod_point" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="hs_23_list" class="1" timestamp="19.06.2017 12:53:27" title="Принадлежность объектов" order="npp" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hs_23.xml" haskeys="1">
      <select>
        <column table="a" column="kod_f23" type="number" key="1" as="kod_f23" />
        <column table="a" column="npp" type="number" title="№" as="npp" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="kod_r" type="number" as="kod_r" />
      </select>
      <from>
        <query name="hs_23" as="a" title="Принадлежность объектов" />
      </from>
      <order>
        <column column="npp" />
      </order>
    </query>
    <query name="hv_eosrc-list" class="1" title="Список центров питания" timestamp="19.06.2017 12:35:53" order="dnum" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_eosrc_x.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" comment="код. энергообъект (pk)" key="1" as="eobj_id" />
        <column table="a" column="kindname" type="string" title="Вид" comment="вид энергообъекта (пс, рп, ...)" as="kindname" />
        <column table="a" column="dnum" type="string" title="Дисп.№" comment="дисп. № энергообъекта" as="dnum" />
        <column table="a" column="bname" type="string" title="Балансовая принадлежность" comment="балансовая принадлежность. наименование юр.лица." as="bname" />
        <column table="a" column="nv" type="number" title="Напряжение, кВ" comment="напряжение энергообъекта (кв). определяется, как максимальное напряжение старших ру" as="nv" />
        <column table="a" column="adr" type="string" title="Адрес" as="adr" />
      </select>
      <from>
        <query name="hv_eosrc_x" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_srckind" />
          <const>3</const>
        </call>
      </where>
      <order>
        <column column="dnum" />
      </order>
    </query>
    <query name="hv_eosrc-list2" class="1" title="Список источников питания" timestamp="19.06.2017 12:46:10" order="dnum" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_eosrc_x.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" comment="код. энергообъект (pk)" key="1" as="eobj_id" />
        <column table="a" column="kindname" type="string" title="Вид" comment="вид энергообъекта (пс, рп, ...)" as="kindname" />
        <column table="a" column="dnum" type="string" title="Дисп.№" comment="дисп. № энергообъекта" as="dnum" />
        <column table="a" column="bname" type="string" title="Балансовая принадлежность" comment="балансовая принадлежность. наименование юр.лица." as="bname" />
        <column table="a" column="nv" type="number" title="Напряжение, кВ" comment="напряжение энергообъекта (кв). определяется, как максимальное напряжение старших ру" as="nv" />
        <column table="a" column="adr" type="string" title="Адрес" as="adr" />
      </select>
      <from>
        <query name="hv_eosrc_x" as="a" />
      </from>
      <order>
        <column column="dnum" />
      </order>
    </query>
    <query name="hg_controlpoint_net_pl_getorgs" order="sname" class="1" timestamp="12.01.2021 11:56:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_org.xml" haskeys="1">
      <params>
        <param name="cond" type="string" param-type="condition" />
      </params>
      <select>
        <column table="a" column="kodp" type="number" key="1" as="kodp" />
        <column table="a" column="enscope_name" type="string" title="Сфера деят. в энергетике" as="enscope_name" />
        <column table="a" column="sname" type="string" title="Код" as="sname" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" />
        <column table="a" column="adr_ur" type="string" title="Юридический адрес" as="adr_ur" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="(select * from table(hg_controlpoint_net.pl_getorgs(:cond)))" as="a" />
      </from>
      <order>
        <column column="sname" />
      </order>
    </query>
    <query name="hg_controlpoint_net_pl_getorgs2" class="1" timestamp="10.05.2016 15:29:58" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_org.xml">
      <params>
        <param name="cond" type="string" param-type="condition" />
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="hg_controlpoint_net_pl_getorgs" as="a">
          <withparams>
            <useparam name="cond" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="hg_controlpoint_net_pl_getrsk" order="sname" class="1" timestamp="12.01.2021 11:56:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_org.xml" haskeys="1">
      <params>
        <param name="cond" type="string" param-type="condition" />
      </params>
      <select>
        <column table="a" column="kodp" type="number" key="1" as="kodp" />
        <column table="a" column="sname" type="string" title="Кратк. наименование" as="sname" />
        <column table="a" column="name" type="string" title="Филиал" as="name" />
        <column table="a" column="altername" type="string" title="Наименование" as="altername" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="(select * from table(hg_controlpoint_net.pl_getrsk(:cond)))" as="a" />
      </from>
      <order>
        <column column="sname" />
      </order>
    </query>
    <query name="hv_typepu_list" timestamp="07.06.2016 13:20:51" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\hv_typepu.xml">
      <select>
        <column table="a" column="kod_tippu" as="kod_tippu" key="0" />
        <column table="a" column="fullname" title="Тип ПУ" as="fullname" key="0" />
      </select>
      <from>
        <query name="hv_typepu" as="a" />
      </from>
    </query>
    <query name="is_customer10_flag" timestamp="12.10.2018 13:22:32" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\is_customer10_flag.xml">
      <select>
        <call function="if" as="val" type="number" key="0">
          <call function="=">
            <column table="a" column="customer_id" />
            <const type="number">10</const>
          </call>
          <const type="number">1</const>
          <const type="number">0</const>
        </call>
      </select>
      <from>
        <query name="rs_rep_sets" as="a" />
      </from>
    </query>
    <query name="qube_sf_ur_prizn_info" timestamp="07.10.2016 04:52:35" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\iv_sf_ur_prizn_info.xml">
      <select>
        <column table="kod_sf" column="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_hist_mat_dec" column="kod_mat" as="kod_mat" />
        <column table="kod_hist_mat_dec" column="dat_entry_st" as="dat_entry_st" />
        <column table="kod_mat_pp" column="num_delo" fact="iv_sf_ur_prizn_info_num_delo" agg="max" as="num_delo" />
      </select>
      <from>
        <qube>
          <link name="kod_mat_pp" />
          <link name="kod_sf">
            <link name="kod_dog">
              <link name="kod_dog_fin">
                <link name="dep" />
                <link name="kodp" />
              </link>
            </link>
          </link>
          <link name="kod_hist_mat_dec" all-rows="1" />
          <where>
            <call function="and">
              <call function="is not null">
                <column table="kod_sf" column="kod_sf" />
              </call>
              <call function="is not null">
                <column table="kod_mat_pp" column="kod_mat" />
              </call>
              <call function="is not null">
                <column table="kod_hist_mat_dec" column="kod_mat" />
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_sf_ur_astr_info" timestamp="07.10.2016 04:52:06" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\iv_sf_ur_prizn_info.xml">
      <select>
        <column table="kod_sf" column="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_hist_mat_dec" column="kod_mat" as="kod_mat" />
        <column table="kod_hist_mat_dec" column="dat_entry_st" as="dat_entry_st" />
        <fact column="ur_mat_num_delo" fact="iv_sf_astr_info_num_delo" agg="max" as="ur_mat_num_delo" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kod_sf_astr" as="kod_sf">
            <link name="kod_dog">
              <link name="kod_dog_fin">
                <link name="dep" />
                <link name="kodp" />
              </link>
            </link>
          </link>
          <link name="kod_hist_mat_dec" />
          <where>
            <call function="and">
              <call function="is not null">
                <column table="kod_sf" column="kod_sf" />
              </call>
              <call function="is not null">
                <column table="kod_hist_mat_dec" column="kod_mat" />
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="kk_active_list" order="pr_active" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_active.xml" haskeys="1">
      <select>
        <column table="a" column="pr_active" as="pr_active" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="abbr" as="abbr" key="0" />
      </select>
      <from>
        <query name="kk_active" as="a" />
      </from>
      <order>
        <column column="pr_active" />
      </order>
    </query>
    <query name="kk_active_list_default" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_active.xml" haskeys="1">
      <select>
        <column table="a" column="pr_active" as="pr_active" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <table name="kk_active_list_default_view" as="a" view="1" />
      </from>
    </query>
    <query name="kk_dolzhfun_list" order="name_fun" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_dolzhfun.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dolzhfun" type="number" as="kod_dolzhfun" key="1" fixed="1"></column>
        <column table="a" column="name_fun" type="string" title="Функция" as="name_fun" key="0"></column>
      </select>
      <from>
        <query name="kk_dolzhfun" as="a"></query>
      </from>
      <order>
        <column column="name_fun" />
      </order>
    </query>
    <query name="kk_edo_list" class="1" timestamp="18.11.2016 17:50:29" order="name_edo" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_edo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_edo" type="number" comment="код оператора электронного документооборота (оэдо)" key="1" as="kod_edo" />
        <column table="a" column="id_edo" type="string" title="Идентификатор" comment="идентификатор оэдо (присваивается фнс)" as="id_edo" />
        <column table="a" column="name_edo" type="string" title="Наименование" comment="наименование организации (оэдо)" as="name_edo" />
        <column table="a" column="inn_edo" type="string" title="ИНН" comment="инн организации (оэдо)" as="inn_edo" />
      </select>
      <from>
        <query name="kk_edo" as="a" />
      </from>
      <order>
        <column column="name_edo" />
      </order>
    </query>
    <query name="kk_orgseparator_list" class="1" order="name" timestamp="23.11.2016 11:17:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_orgseparator.xml" haskeys="1">
      <select>
        <column table="a" column="kod_separator" type="number" comment="1- организация 2- отд эсбыта 3- подразделение эсбыта 50 -рэс" key="1" as="kod_separator" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="sname" type="string" title="" as="sname" />
      </select>
      <from>
        <query name="kk_orgseparator" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kk_tep_el_ur_folders" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tep_el.xml" haskeys="1">
      <select>
        <column table="a" column="tep_el" type="number" key="1" as="tep_el"></column>
        <column table="a" column="name" type="string" title="Вид энергии" vid="1" as="name"></column>
      </select>
      <from>
        <query name="kk_tep_el" as="a"></query>
      </from>
      <where>
        <call function="in">
          <column table="a" column="tep_el" type="number"></column>
          <call function="array">
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="kk_tep_el_list" order="name" class="1" timestamp="03.04.2017 10:51:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tep_el.xml" haskeys="1">
      <select>
        <column table="a" column="tep_el" type="number" key="1" as="tep_el" />
        <column table="a" column="name" type="string" title="Вид услуг" vid="1" as="name" />
      </select>
      <from>
        <query name="kk_tep_el" as="a" />
        <query name="rs_esys" join="cross" as="b" />
      </from>
      <where>
        <call function="or">
          <call function="and">
            <call function="=">
              <column table="b" column="teplo" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="b" column="electro" />
              <const>0</const>
            </call>
            <call function="not in">
              <column table="a" column="tep_el" />
              <call function="array">
                <const>0</const>
                <const>1</const>
                <const>8</const>
                <const>9</const>
              </call>
            </call>
          </call>
          <call function="and">
            <call function="=">
              <column table="b" column="teplo" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="b" column="electro" />
              <const>1</const>
            </call>
            <call function="not in">
              <column table="a" column="tep_el" />
              <call function="array">
                <const>0</const>
                <const>2</const>
              </call>
            </call>
          </call>
          <call function="and">
            <call function="=">
              <column table="b" column="teplo" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="b" column="electro" />
              <const>1</const>
            </call>
            <call function="not in">
              <column table="a" column="tep_el" />
              <call function="array">
                <const>8</const>
                <const>9</const>
              </call>
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kk_tipdoc_ur" order="prioritet" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tipdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tipdoc" type="number" as="kod_tipdoc" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="srok" type="number" title="Срок действия мес." editor="spin" as="srok" key="0"></column>
        <column table="a" column="ur_prizn" type="number" title="Вид док-та" editor="combo" as="ur_prizn" reference="kk_tipdoc_ur_prizn" refcol="kod" key="0"></column>
        <column table="a" column="prioritet" type="number" title="Приоритет" editor="spin" as="prioritet" key="0"></column>
      </select>
      <from>
        <query name="kk_tipdoc" as="a" title="Тип документа" />
        <query name="kk_tipdoc_ur_prizn" as="ur_prizn" join="left outer" dname="kk_tipdoc_ur" title="Тип доп. документа">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <column table="a" column="ur_prizn" />
          </call>
        </query>
      </from>
      <where>
        <call function="gt">
          <column table="a" column="ur_prizn" />
          <const>0</const>
        </call>
      </where>
      <order>
        <column column="prioritet" />
      </order>
    </query>
    <query name="kk_tipdoc_ur_1" inherit="kk_tipdoc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tipdoc.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="ur_prizn" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_tipdoc" type="number" as="kod_tipdoc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Тип документа" vid="1" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="srok" type="number" title="Срок действия мес." editor="spin" as="srok" key="0" />
        <column table="a" column="ur_prizn" type="number" title="Вид док-та" as="ur_prizn" reference="kk_tipdoc_ur_prizn" refcol="kod" key="0" />
        <column table="a" column="prioritet" type="number" title="Приоритет" editor="spin" as="prioritet" key="0" />
        <column table="a" column="doc_one" type="number" title="0- много док на дог,1-только один" as="doc_one" key="0" />
        <column table="a" column="template" type="string" title="путь и имя шаблона документа" as="template" key="0" />
        <column table="a" column="pr_val" type="number" title="признак привязки расчета [ тепло2 ]" as="pr_val" key="0" />
        <column table="a" column="prizn_ur" type="number" comment="1 - документ относится только к юл&#xA;2 - документ относится к договору&#xA;0,null - годится для всего" as="prizn_ur" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_tipdoc" as="a" title="Тип документа" />
        <query name="kk_tipdoc_ur_prizn" as="ur_prizn" join="left outer" dname="kk_tipdoc_ur_1" title="Тип доп. документа">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <column table="a" column="ur_prizn" />
          </call>
        </query>
      </from>
    </query>
    <query name="kk_tipdoc_ur_prizn" class="1" title="Тип доп. документа" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tipdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" vid="1" as="name" key="0" />
        <query as="kod_tipdoc" type="number" key="0">
          <select>
            <column table="td" column="kod_tipdoc" as="kod_tipdoc" />
          </select>
          <from>
            <query name="kk_tipdoc" as="td" group="max" title="Тип документа" />
          </from>
          <where>
            <call function="and">
              <call function="gt">
                <column table="a" column="kod" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="td" column="ur_prizn" />
                <column table="a" column="kod" />
              </call>
            </call>
          </where>
        </query>
      </select>
      <from>
        <table name="kk_tipdoc_prizn" view="1" as="a" />
        <!--<query name="kk_tipdoc" as="kod_tipdoc" join="left outer">
          <call function="=">
            <column table="this" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>-->
      </from>
    </query>
    <query name="kk_tipdoc_dog_list" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tipdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tipdoc" as="kod_tipdoc" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="abbr" as="abbr" key="0" />
      </select>
      <from>
        <query name="kk_tipdoc" as="a" title="Тип документа" />
      </from>
      <where>
        <call function="in">
          <call function="nvl">
            <column table="a" column="prizn_ur" />
            <const>0</const>
          </call>
          <call function="array">
            <const>0</const>
            <const>2</const>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kk_zak_avans_list" class="1" title="Постановления по авансам" timestamp="23.11.2016 19:23:58" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_zak_avans.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zak_avans" type="number" as="kod_zak_avans" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="kk_zak_avans" as="a" title="Постановления по авансам" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_calc_list" order="ym desc" class="1" timestamp="04.09.2023 05:05:12" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" key="1" as="ym" />
        <call function="trim" as="name" group="max" title="Период" is-name="1" vid="1">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_list_with_cur" order="ym desc" class="1" timestamp="11.10.2017 19:40:13" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a">
          <union all="0">
            <query as="a">
              <select>
                <column table="a" column="ym" as="ym" />
              </select>
              <from>
                <query name="kr_calc" as="a" />
              </from>
            </query>
            <query as="b">
              <select>
                <column table="a" column="ym" as="ym" />
              </select>
              <from>
                <query name="kr_calc_cur" as="a" />
              </from>
            </query>
          </union>
        </query>
      </from>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_max" class="1" timestamp="22.11.2021 13:52:53" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="max" as="ym" key="1" fixed="1" />
      </select>
      <from>
        <query as="a" name="kr_calc" />
      </from>
    </query>
    <query name="kr_calc_dep_max" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="podr" as="dep" group="1" key="1" fixed="1"></column>
        <column table="a" column="ym" group="max" as="ym" key="0"></column>
      </select>
      <from>
        <query name="kr_calc" as="a"></query>
        <query name="kr_dep" as="kod_dep" join="left outer" dname="kr_calc_dep_max">
          <call function="=">
            <column table="this" column="dep"></column>
            <column table="kod_dep" column="kodp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_calc_cur" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="date to ym" type="number" as="ym" key="1" fixed="1">
          <const>sysdate</const>
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="kr_calc_year_begin" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="date to ym" type="number" as="ym" key="1" fixed="1">
          <call function="year begin time">
            <call function="year">
              <const>sysdate</const>
            </call>
          </call>
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="kr_calc_cur2" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="" as="ym" key="1" fixed="1">
          <useglobparam name="ym" />
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
      <params />
    </query>
    <query name="kr_calc_year_list" order="year desc" class="1" timestamp="24.05.2022 16:09:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="year" as="year" group="1" key="1" fixed="1">
          <call function="ym begin time">
            <column table="a" column="ym" />
          </call>
        </call>
        <call function="to_char" as="name" group="max" title="Год" key="0">
          <call function="year" as="year">
            <call function="ym begin time">
              <column table="a" column="ym" />
            </call>
          </call>
          <const>'9999'</const>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
      <order>
        <column column="year" />
      </order>
    </query>
    <query name="kr_calc_year_max" class="1" timestamp="25.05.2022 16:01:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml">
      <select>
        <call function="trunc" as="year" group="max" key="0">
          <column table="a" column="ym" />
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
    </query>
    <query name="months_max" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml">
      <select>
        <call function="mes" as="month" key="0">
          <column table="a" column="ym" group="max"></column>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a"></query>
      </from>
    </query>
    <query name="n_calc_dist" order="ym desc" class="1" timestamp="18.05.2017 23:37:51" comment="используется в старой схеме" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_year_list_since_2010" order="year desc" class="1" timestamp="02.11.2022 18:02:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="year" as="year" group="1" key="1" fixed="1">
          <call function="ym begin time">
            <column table="a" column="ym" />
          </call>
        </call>
        <call function="to_char" as="name" group="max" title="Год" key="0">
          <call function="year" as="year">
            <call function="ym begin time">
              <column table="a" column="ym" />
            </call>
          </call>
          <const>'9999'</const>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
      <where>
        <call function="ge">
          <column table="a" column="ym" />
          <const type="number">2010.01</const>
        </call>
      </where>
      <order>
        <column column="year" />
      </order>
    </query>
    <query name="kr_calc_list_tek" order="ym desc" class="1" timestamp="22.05.2023 10:39:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a">
          <select>
            <column table="v0" column="ym" type="number" as="ym" />
          </select>
          <from>
            <query name="kr_calc_list" as="v0" />
          </from>
        </query>
      </from>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_max_tek" class="1" timestamp="05.03.2022 10:56:13" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" as="ym" key="1" fixed="1" />
      </select>
      <from>
        <query as="a" name="kr_calc_list_tek" />
      </from>
    </query>
    <query name="kr_calc_year_list_plus1" order="year desc" class="1" timestamp="25.05.2022 15:11:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column as="year" table="a" column="year" key="1" fixed="1" />
        <column as="name" title="Год" table="a" column="name" key="0" />
      </select>
      <from>
        <query as="a" name="kv_calc_year_plus1" />
      </from>
      <order>
        <column column="year" />
      </order>
    </query>
    <query name="kr_calc_max_tek_dep" class="1" timestamp="05.06.2023 14:55:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <column table="a" column="ym" group="max" as="ym" key="1" fixed="1" />
      </select>
      <from>
        <query as="a" name="kr_calc_list_tek_dep">
          <withparams>
            <useparam name="p_dep" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="kr_calc_list_tek_dep" order="ym desc" class="1" timestamp="05.06.2023 15:06:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a">
          <select>
            <column table="v0" column="ym" type="number" as="ym" />
            <column table="v0" column="podr" as="dep" type="number" />
          </select>
          <from>
            <query name="kr_calc" as="v0" />
          </from>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
        </call>
      </where>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_prev_year_begin" class="1" timestamp="01.11.2022 00:15:35" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <call function="date to ym" type="number" as="ym" key="1" fixed="1">
          <call function="year begin time">
            <call function="-">
              <call function="year">
                <const>sysdate</const>
              </call>
              <const>1</const>
            </call>
          </call>
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="kr_calc_max_pre_dep" class="1" title="Предыдущий максимальному период отделения (текущий -1)" timestamp="30.03.2023 10:43:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <call function="ym add month" as="ym" key="0">
          <column table="a" column="ym" group="max" />
          <const>-1</const>
        </call>
      </select>
      <from>
        <query as="a" name="kr_calc_list_tek_dep">
          <withparams>
            <useparam name="p_dep" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="kr_calc_list_tek_dep_1" order="ym desc" class="1" timestamp="06.06.2023 15:00:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a">
          <union>
            <query comment="периоды в базе">
              <select>
                <column table="v0" column="ym" type="number" as="ym" />
                <column table="v0" column="podr" as="dep" type="number" />
              </select>
              <from>
                <query name="kr_calc" as="v0" />
              </from>
            </query>
            <query comment="текущий период ">
              <select>
                <call table="v1" column="dep_name" function="ym add month" as="ym">
                  <column table="v1" column="ym" type="number" />
                  <const function="sysdate">1</const>
                </call>
                <call function="null" />
              </select>
              <from>
                <query name="kr_calc_max" as="v1" />
              </from>
            </query>
          </union>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
        </call>
      </where>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_list_tek_1" order="ym desc" class="1" timestamp="05.06.2023 16:18:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1" />
        <call function="trim" as="name" group="max" title="Период" key="0">
          <call function="to_char">
            <column table="a" column="ym" />
            <const>'9999.99'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a">
          <union>
            <query comment="периоды в базе">
              <select>
                <column table="v0" column="ym" type="number" as="ym" />
              </select>
              <from>
                <query name="kr_calc_list" as="v0" />
              </from>
            </query>
            <query comment="текущий период ">
              <select>
                <call table="v1" column="dep_name" function="ym add month" as="ym">
                  <column table="v1" column="ym" type="number" />
                  <const function="sysdate">1</const>
                </call>
              </select>
              <from>
                <query name="kr_calc_max" as="v1" />
              </from>
            </query>
          </union>
        </query>
      </from>
      <order>
        <column column="ym" />
      </order>
    </query>
    <query name="kr_calc_year_max_1" class="1" comment="Максимальный год минус 1" timestamp="19.08.2024 13:40:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml">
      <select>
        <call function="-" as="year" group="max" key="0">
          <call table="a" column="ym" function="trunc">
            <column table="a" column="ym" />
          </call>
          <const type="number">1</const>
        </call>
      </select>
      <from>
        <query name="kr_calc" as="a" />
      </from>
    </query>
    <query name="kr_calc_first_month_year_tek_dep" class="1" title="Первый месяц года максимального периода в отделении." timestamp="08.06.2025 18:56:24" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_calc.xml">
      <params>
        <param name="p_dep" type="array" />
      </params>
      <select>
        <call function="+" as="ym" key="0">
          <call function="trunc">
            <column table="a" column="ym" group="max" />
          </call>
          <const type="number">0.01</const>
        </call>
      </select>
      <from>
        <query as="a" name="kr_calc_max_tek_dep">
          <withparams>
            <useparam name="p_dep" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="kr_dogovor_list(dep)" class="1" timestamp="21.11.2016 19:52:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_org-list" title="Управляющие компании" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="kodd" type="array" />
        <param name="kod_vid_upr" type="array" />
        <param name="kod_upr_house" type="array" />
      </params>
      <select>
        <column table="a" column="kod_dog_org" type="number" group="1" as="kod_dog_org" key="1" fixed="1" />
        <column table="kod_dog_org" column="ndog" type="string" group="max" title="Договор" as="ndog" key="0" />
        <column table="kodp" column="name" type="string" group="max" title="Управляющая компания" as="name" key="0" />
      </select>
      <from>
        <query name="tr_his_upr" as="a">
          <link name="kod_dog_org" as="kod_dog_org" table="kr_dogovor" child="tr_his_upr" field="kod_dog_org" parent="kr_dogovor" back="tr_his_upr" title="Договор">
            <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <link name="kod_obj" as="kod_obj" table="kr_object" child="tr_his_upr" field="kod_obj" parent="kr_object" back="tr_his_upr" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="tip_org" />
            <const>1</const>
          </call>
          <call function="=">
            <column table="kod_obj" column="tep_el" />
            <const>4</const>
          </call>
          <call function="=">
            <column table="kod_obj" column="tep_el_byt" />
            <const>1</const>
          </call>
          <call function="in" optional="1">
            <column table="kod_obj" column="kodd" />
            <useparam name="kodd" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_vid_upr" />
            <useparam name="kod_vid_upr" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_typ_upr" />
            <useparam name="kod_upr_house" />
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_dogovor_teplo_list(dep)" inherit="kr_dogovor_list(dep)" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>2</const>
          </call>
          <call function="and">
            <call function="true" />
            <call function="in" optional="1">
              <column table="a" column="dep" />
              <useparam name="dep" />
            </call>
            <call function="in" optional="1">
              <column table="a" column="kodp" />
              <useparam name="kodp" />
            </call>
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
    </query>
    <query name="kr_dogovor_list_cur_dep" class="1" timestamp="25.03.2016 12:13:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="dep" optional="1" />
          <useglobparam name="dep" />
        </call>
      </where>
      <params />
    </query>
    <query name="kr_dogovor_el_list(dep)" inherit="kr_dogovor_list(dep)" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>1</const>
          </call>
          <call function="and">
            <call function="true" />
            <call function="in" optional="1">
              <column table="a" column="dep" />
              <useparam name="dep" />
            </call>
            <call function="in" optional="1">
              <column table="a" column="kodp" />
              <useparam name="kodp" />
            </call>
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
    </query>
    <query name="kr_dogovor(kodp)" timestamp="15.03.2016 18:24:50" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param type="number" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_rassh_list" class="1" order="1" timestamp="21.11.2016 12:42:48" title="Список расчётных счетов по договорам" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param type="array" name="dep" />
        <param type="array" name="tep_el" />
      </params>
      <select>
        <column table="a" column="rassh1" type="string" group="1" key="1" is-name="1" as="id" />
        <column table="a" column="rassh1" type="string" group="1" title="Расчётный счёт" as="name" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор" />
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="rassh1" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1" comment="Вид энергии">
            <column table="a" column="tep_el" />
            <useparam name="tep_el" />
          </call>
        </call>
      </where>
      <order>
        <column column="1" />
      </order>
    </query>
    <query name="kr_dogovor_list_active" class="1" timestamp="31.01.2017 13:37:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="inn" as="inn" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in">
            <column table="a" column="pr_active" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_lic_kazn_list" class="1" order="1" timestamp="21.11.2016 17:49:25" title="Список счетов казначейства по договорам" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param type="array" name="dep" />
        <param type="array" name="tep_el" />
      </params>
      <select>
        <column table="a" column="lic_kazn" type="string" group="1" key="1" is-name="1" as="id" />
        <column table="a" column="lic_kazn" type="string" group="1" title="Счет в казначействе" as="name" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор" />
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="lic_kazn" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1" comment="Вид энергии">
            <column table="a" column="tep_el" />
            <useparam name="tep_el" />
          </call>
        </call>
      </where>
      <order>
        <column column="1" />
      </order>
    </query>
    <query name="kr_dogovor_list(dep_sng)" timestamp="23.08.2023 15:22:34" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="number">
          <const>null</const>
        </param>
      </params>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="d" column="kod_dog" as="kod_dog" />
        <column table="p" column="kodp" as="kodp" reference="kr_payer" refcol="kodp" />
        <column table="d" column="ndog" title="Номер договора" as="ndog" />
        <column table="p" column="nump" title="Код абонента" as="nump" />
        <column table="p" column="name" as="payer_name" title="Наименование абонента" />
        <column table="p" column="inn" title="ИНН" as="inn" />
        <column table="d" column="dat_sign" title="Дата подписания" as="dat_sign" />
        <column table="dep" column="sname" as="dep_name" title="Отделение" />
        <column table="d" column="dep" as="dep" reference="kr_org" refcol="kodp" />
      </select>
      <from>
        <query name="kr_dogovor" as="d" title="Договор" />
        <query name="kr_payer" as="p" join="inner" dname="kr_dogovor_list(dep_sng)" title="Абонент">
          <call function="=">
            <column table="p" column="kodp" />
            <column table="d" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="inner" dname="kr_dogovor_list(dep_sng)">
          <call function="=">
            <column table="dep" column="kodp" />
            <column table="d" column="dep" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="d" column="tep_el" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="or">
            <call function="=">
              <column table="d" column="dep" />
              <useparam name="dep" />
            </call>
            <call function="is null">
              <useparam name="dep" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_list2" class="1" timestamp="04.07.2017 14:33:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="inn" as="inn" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
        <column table="pr_active" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
          <link name="pr_active" as="pr_active" table="kk_active" child="kr_dogovor" field="pr_active" parent="kk_active" back="kr_dogovor" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_fin" class="1" timestamp="30.10.2018 16:46:08" inherit="kr_dogovor" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" key-dimension="kod_dog" fact="kr_dogovor_kod_dog" agg="max" fact-dimension="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="kod_vdog" type="number" comment="код вида договора" as="kod_vdog" reference="ks_vdog" refcol="kod_vdog" key="0" />
        <column table="a" column="podr" type="number" title="" comment="код подразделения" as="podr" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="состояние договора&#xA;0 - действующий&#xA;1- удаленный&#xA;2-новый" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (для договоров услуг - сторона1 - кому платят )" vid="1" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="признак&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodbpl" type="number" title="" comment="код банка плательщика" as="kodbpl" reference="ks_bank" key="0" />
        <column table="a" column="vid_pl" type="number" title="" comment="код вида основного плат.документа" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="ndog" type="string" title="Номер договора" comment="номер договора" fact="kr_dog_ndog" agg="stragg_dist" vid="1" as="ndog" key="0" />
        <column table="a" column="dat_fin" type="date" title="Дата прекращения договора" comment="дата прекращения договора" is-final-dimension="1" dimension="dat_po" is-private-dimension="1" as="dat_fin" key="0" />
        <column table="a" column="rassh1" type="string" title="" comment="расчетный счет" as="rassh1" key="0" />
        <column table="a" column="dat_dog" type="date" comment="дата начала договора" title="Дата начала действия" vid="1" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_dog" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="последняя корректировка - пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="последняя корректировка - дата" as="d_m" key="0" />
        <column table="a" column="kod_parent_dog" type="number" comment="код договора , на который переоформили данный договор" as="kod_parent_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_srok" type="date" title="Планируемый срок окончания действия договора" comment="планируемый срок окончания действия договора" as="dat_srok" key="0" />
        <column table="a" column="dat_prolong" type="date" title="" comment="дата пролонгации" as="dat_prolong" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="dat_sign" type="date" title="" as="dat_sign" key="0" />
        <column table="a" column="prn_elved" type="number" title="" comment="признак наличия вед электропотр." as="prn_elved" key="0" />
        <column table="a" column="pref_fac" type="number" title="" as="pref_fac" key="0" />
        <column table="a" column="kod_state" type="number" comment="префикс счета фактуры. формируется автоматически из №№ отделения эсб, отдела и сектора эсб, ведущих договор." as="kod_state" key="0" />
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="dep" type="number" title="" vid="1" as="dep" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="lic_kazn" type="string" title="" comment="лицевой счет в казначействе" as="lic_kazn" key="0" />
        <column table="a" column="kodp_plat" type="number" title="" as="kodp_plat" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="pr_sh" type="number" title="" comment="признак начисления электрических штрафов:&#xA;0- по уровням напр в объекте, 1-по договору, 2-в целом по объекту" as="pr_sh" key="0" />
        <column table="a" column="kol_kom" type="number" title="" as="kol_kom" key="0" />
        <column table="a" column="kol_chel" type="number" title="" comment="кол. комнат(быт)" as="kol_chel" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="dat_numdog" type="date" title="" as="dat_numdog" key="0" />
        <column table="a" column="kod_bez_prich" type="number" as="kod_bez_prich" reference="ks_bezakcept_prich" refcol="kod_bez_prich" key="0" />
        <column table="a" column="kod_spos_opl" type="number" as="kod_spos_opl" reference="ks_spos_opl" refcol="kod_spos_opl" key="0" />
        <column table="a" column="kodp_uch" type="number" title="" as="kodp_uch" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="pr_avans_umen" type="number" title="" as="pr_avans_umen" key="0" />
        <column table="a" column="day_pokaz" type="number" title="" comment="указывается 1 из участков , отвечающих за договор.&#xA;для юр. лиц - null , если участков нет." as="day_pokaz" reference="kk_day_pokaz" refcol="day_pokaz" key="0" />
        <column table="a" column="tep_el_byt" type="number" title="" as="tep_el_byt" reference="kk_tep_el" key="0" />
        <column table="a" column="pr_sf_schet" type="number" title="" comment="признак расчета уменьшения аванса, если пусто- используется значение по умолчанию." as="pr_sf_schet" key="0" />
        <column table="a" column="kodp_gruz" type="number" title="" as="kodp_gruz" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="byt_period_obh" type="number" title="" as="byt_period_obh" key="0" />
        <column table="a" column="byt_ocher_obh" type="number" title="" as="byt_ocher_obh" key="0" />
        <column table="a" column="rast_dog" type="string" title="" as="rast_dog" key="0" />
        <column table="a" column="kod_dog_fin" type="number" is-final-dimension="kod_dog_fin" dimension="kod_dog_fin" as="kod_dog_fin" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kodp2" type="number" title="" comment="периодичность обходов" as="kodp2" key="0" />
        <column table="a" column="kodp_sbyt" type="number" title="" comment="очередь обходов" as="kodp_sbyt" key="0" />
        <column table="a" column="kod_tipdoc" type="number" comment="причина расторжения дог-ра" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0" />
        <column table="a" column="deliv_izv" type="number" title="" comment="код дог-ра для финансов" as="deliv_izv" reference="tk_delivery" key="0" />
        <column table="a" column="kod_letter_mem" type="number" comment="признак необх-ти печати напомин.по авансам" as="kod_letter_mem" reference="kk_letter_mem" refcol="kod_letter_mem" key="0" />
        <column table="a" column="kodbpol_ds" type="number" title="" comment="код банка получателя (для договора услуг ленэнерго)" as="kodbpol_ds" reference="ks_bank" key="0" />
        <column table="a" column="rassh2" type="string" title="" comment="расчётный счёт получателя (для договора услуг ленэнерго)" as="rassh2" key="0" />
        <column table="a" column="kod_zak_avans" type="number" comment="постановления по авансам" as="kod_zak_avans" reference="kk_zak_avans" refcol="kod_zak_avans" key="0" />
        <column table="a" column="kod_way_delivery" type="number" comment="cпособ доставки платежных документов абоненту" as="kod_way_delivery" reference="ks_way_delivery" refcol="kod_way_delivery" key="0" />
        <column table="a" column="vid_tn" type="number" title="" comment="вид теплоносителя  2 - вода; 3- пар; 5 - вода+пар" as="vid_tn" key="0" />
        <column table="a" column="dat_postavka" type="date" title="" as="dat_postavka" key="0" />
        <column table="a" column="kod_d_dog" type="number" title="" as="kod_d_dog" key="0" />
        <call function="||" title="interval_existence_dog" as="interval_existence_dog" is-fact="1" fact="kr_dog_interval_exist" agg="list" key="0">
          <call function="to_char">
            <column table="a" column="dat_dog" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">1</const>
            <const>'-'</const>
            <const>''</const>
          </call>
          <call function="to_char">
            <column table="a" column="dat_fin" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <const>','</const>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">0</const>
            <const>'А'</const>
            <const function="null">1</const>
            <const>'У'</const>
            <const function="null">2</const>
            <const>'Н'</const>
          </call>
        </call>
        <call function="||" title="date_readings" as="date_readings" is-fact="1" agg="list" fact="kr_dog_date_readings" key="0">
          <column table="day_pokaz" column="name" />
          <call function="decode">
            <column table="day_pokaz" column="day_pokaz" />
            <const function="null">0</const>
            <const>''</const>
            <const>'-ого числа след.мес.'</const>
          </call>
        </call>
        <column table="kod_org_sbyt" column="fname" is-fact="1" agg="list" fact="kr_dog_sbyt" as="fname" key="0" />
        <column table="dog_arch_date" column="archive_date" comment="дата архивации" as="dat_archive" key="0" />
        <column as="pref_dog" table="zbd" column="pref_dog" title="Префикс к номеру договора" key="0" />
        <call function="||" as="name" title="Договор" is-name="1" fact="kr_dog_name" agg="stragg_dist" key="0">
          <column table="a" column="ndog" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_dog" />
          </call>
        </call>
        <call function="if" as="kod_abon_type" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call function="if" as="abon_type_name" title="Тип абонента" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>'Физические лица'</const>
          <const>'Юридические лица'</const>
        </call>
        <column table="rr_refprop_dog_103" column="kod_refcode" as="kod_gr_potr_nas" key="0" />
        <column table="rr_refprop_dog_62" column="kod_refcode" as="kod_gr_potr_dog" key="0" />
        <column table="rr_refprop_dog_102" column="kod_refcode" as="kod_state_dog" key="0" />
        <call function="case" type="string" as="potr_cat" title="Категория потребителя" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Промышленность'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>3</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Сельское хозяйство'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>8</const>
              </call>
              <call function="=">
                <column table="okonh" column="p2" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Управляющие организации'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>8</const>
              </call>
              <call function="!=">
                <column table="okonh" column="p2" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'ЖКХ'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="kod_ist_ag" column="p3" />
                <call function="array">
                  <const>1</const>
                  <const>2</const>
                  <const>3</const>
                  <const>4</const>
                  <const>5</const>
                </call>
              </call>
            </call>
            <const>'Бюджет'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="okonh" column="p1" />
                <call function="array">
                  <const>4</const>
                  <const>5</const>
                  <const>6</const>
                  <const>9</const>
                </call>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Прочие потребители'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>7</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Население'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Энергосбытовые компании'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>9</const>
              </call>
              <call function="=">
                <column table="okonh" column="p2" />
                <const>4</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Компенсация потерь'</const>
          </call>
          <call function="else">
            <const>'-'</const>
          </call>
        </call>
        <call function="if" as="ndog_bar5" type="string" key="0">
          <call function="gt">
            <call function="length">
              <call function="replace">
                <column table="a" column="ndog" />
                <const>'.'</const>
                <const>''</const>
              </call>
            </call>
            <const>4</const>
          </call>
          <column table="a" column="ndog" />
          <call function="||">
            <call function="lpad">
              <call function="replace">
                <column table="a" column="ndog" />
                <const>'.'</const>
                <const>''</const>
              </call>
              <call function="greatest">
                <const>4</const>
                <call function="length">
                  <call function="replace">
                    <column table="a" column="ndog" />
                    <const>'.'</const>
                    <const>''</const>
                  </call>
                </call>
              </call>
              <const>'0'</const>
            </call>
            <const>'Э'</const>
          </call>
        </call>
        <call function="case" as="ndog_bar6" type="string" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>1172</const>
            </call>
            <call function="||">
              <const>'1'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>2199</const>
            </call>
            <call function="if">
              <call function="=">
                <column table="a" column="kodp_uch" />
                <const>2199</const>
              </call>
              <call function="||">
                <const>'1'</const>
                <column table="this" column="ndog_bar5" />
              </call>
              <call function="||">
                <const>'4'</const>
                <column table="this" column="ndog_bar5" />
              </call>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15210</const>
            </call>
            <call function="||">
              <const>'5'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15223</const>
            </call>
            <call function="||">
              <const>'8'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15225</const>
            </call>
            <call function="||">
              <const>'7'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15227</const>
            </call>
            <call function="||">
              <const>'Ж'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15229</const>
            </call>
            <call function="||">
              <const>'М'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15231</const>
            </call>
            <call function="||">
              <const>'Д'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15232</const>
            </call>
            <call function="||">
              <const>'6'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15235</const>
            </call>
            <call function="||">
              <const>'О'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>26912</const>
            </call>
            <call function="||">
              <const>'А'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="else">
            <column table="this" column="ndog_bar5" />
          </call>
        </call>
        <column table="kr_vist_day" column="name" dgroup="stragg" as="avans_info" title="Условия оплаты по договору (аванс)" key="0" />
        <column table="kr_vist_day" column="perc" dgroup="sum" as="avans_proc" key="0" />
        <call function="||" as="postplat_info" title="Условия оплаты по договору (постоплата)" key="0">
          <column table="kod_bzad" column="name" />
        </call>
        <call function="if" as="tep_el_fact" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <column table="a" column="tep_el_byt" />
          <column table="a" column="tep_el" />
        </call>
        <call function="case" type="string" title="Группа потребителей для ФО" comment="алгоритм описан 40745 " as="cust_fo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="kod_ist" />
              <call function="array">
                <const>2</const>
                <const>3</const>
                <const>4</const>
                <const>5</const>
              </call>
            </call>
            <column table="kod_ist" column="name" />
          </call>
          <call function="else">
            <column table="kod_group_cust" column="fin_name" />
          </call>
        </call>
        <column table="kod_group_cust" column="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" key="0" />
        <column table="kod_group_cust" column="kod_gr_parent" dimension="kod_group_cust_parent" as="kod_gr_parent" key="0" />
        <call function="if" as="dat_active_sign" is-fact="1" agg="min" fact="kr_dogovor_dat_active_sign" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="a" column="dat_sign" />
        </call>
        <call function="if" as="ndog_active" is-fact="1" agg="stragg_dist" fact="kr_dogovor_ndog_active" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="a" column="ndog" />
        </call>
        <call function="if" as="name_group_cust" is-fact="1" agg="min" fact="kr_dogovor_name_group_cust" type="string" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="kod_group_cust" column="name" />
        </call>
        <call function="adress_region" as="adress_region" title="Регион" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_sf" as="adress_sf" title="СФ (Субъект Федерации)" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_region2" as="adress_region_name" title="Регион" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_district" as="adress_district" title="Район" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <!--Номер договора - Барнаул (ф-я в файле по 28660)-->
      </select>
      <from>
        <table name="kr_dogovor" as="a" title="Договор">
          <slink name="rr_refprop_dog_103" as="rr_refprop_dog_103" table="rr_refprop_dog_103" />
          <slink name="rr_refprop_dog_62" as="rr_refprop_dog_62" table="rr_refprop_dog_62" />
          <slink name="rr_refprop_dog_102" as="rr_refprop_dog_102" table="rr_refprop_dog_102" />
          <link name="kod_ist" as="kod_ist1" table="ks_istfin" child="kr_dogovor_fin" field="kod_ist" parent="ks_istfin" back="kr_dogovor_fin" title="Источники финансирования">
            <link name="kod_ist_ag" as="kod_ist_ag" table="ag_istfin" child="ks_istfin" field="kod_ist_ag" parent="ag_istfin" back="ks_istfin" />
          </link>
          <link name="kodp" as="kodp1" dimension="1" table="kr_payer" child="kr_dogovor_fin" field="kodp" parent="kr_payer" back="kr_dogovor_fin" title="Абонент">
            <link name="kod_m" as="kod_m" table="ks_ministry" child="kr_payer" field="kod_m" parent="ks_ministry" back="kr_payer" title="Министерство">
              <link name="kod_m_ag" as="kod_m_ag" table="ag_ministry" child="ks_ministry" field="kod_m_ag" parent="ag_ministry" back="ks_ministry" />
            </link>
            <link name="kod_otrasl" as="kod_otrasl" table="ks_otrasl" child="kr_payer" field="kod_otrasl" parent="ks_otrasl" back="kr_payer" title="Отрасли">
              <link name="okonh" as="okonh" table="ag_okonh" child="ks_otrasl" field="okonh" parent="ag_okonh" back="ks_otrasl" />
            </link>
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dlink name="ur_dogplat" dimension="1" is-private-dimension="1" is-final-dimension="1" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_dog" parent="kr_dogovor" back="ur_dogplat">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dlink name="ur_dp_graf" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_graf">
              <link name="kod_graf" as="kod_graf1" table="ur_graf" child="ur_dp_graf" field="kod_graf" parent="ur_graf" back="ur_dp_graf">
                <dlink name="ur_graf_for_dog" dimension="1" as="ur_graf_for_dog1" is-final-dimension="1" table="ur_graf_for_dog" child="ur_graf_for_dog" field="kod_graf" parent="ur_graf" back="ur_graf_for_dog" />
              </link>
            </dlink>
          </dlink>
          <dlink name="kr_vist_day" pushpred="1" as="kr_vist_day" table="kr_vist_day" child="kr_vist_day" field="kod_dog" parent="kr_dogovor" back="kr_vist_day" />
          <dlink name="kr_dogpodr" dimension="1" as="kr_dogpodr" table="kr_dogpodr" child="kr_dogpodr" field="kod_dog" parent="kr_dogovor" back="kr_dogpodr" />
          <dlink name="kr_dogobj_emp" dimension="1" is-final-dimension="1" as="kr_dogobj_emp" table="kr_dogobj_emp" child="kr_dogobj_emp" field="kod_dog" parent="kr_dogovor" back="kr_dogobj_emp" />
          <dlink name="kr_numobj" dimension="1" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_dog" parent="kr_dogovor" back="kr_numobj" />
          <dlink name="kr_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_numobj_mn" table="kr_numobj_mn" child="kr_numobj_mn" field="kod_dog" parent="kr_dogovor" back="kr_numobj_mn">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="kr_dopdoc" dimension="1" as="kr_dopdoc" table="kr_dopdoc" child="kr_dopdoc" field="kod_dog" parent="kr_dogovor" back="kr_dopdoc" />
          <dlink name="tr_izv_dolg" dimension="1" as="tr_izv_dolg" table="tr_izv_dolg" child="tr_izv_dolg" field="kod_dog" parent="kr_dogovor" back="tr_izv_dolg" />
          <dlink name="kr_predabon" dimension="1" is-final-dimension="1" as="kr_predabon" table="kr_predabon" child="kr_predabon" field="kod_dog" parent="kr_dogovor" back="kr_predabon" />
          <dlink name="kr_vist_day" dimension="1" is-final-dimension="1" as="kr_vist_day" table="kr_vist_day" child="kr_vist_day" field="kod_dog" parent="kr_dogovor" back="kr_vist_day" />
          <link name="kod_dog_dop" as="kod_dog_dop" table="kr_dogovor_dop" child="kr_dogovor_fin" field="kod_dog_dop" parent="kr_dogovor_dop" back="kr_dogovor_fin">
            <link name="kod_group_cust" as="kod_group_cust" table="ks_group_cust" child="kr_dogovor_dop" field="kod_group_cust" parent="ks_group_cust" back="kr_dogovor_dop" />
          </link>
          <link name="kod_ist" as="kod_ist" table="ks_istfin" child="kr_dogovor_fin" field="kod_ist" parent="ks_istfin" back="kr_dogovor_fin" title="Источники финансирования" />
          <link name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" as="day_pokaz" table="kk_day_pokaz" child="kr_dogovor_fin" field="day_pokaz" parent="kk_day_pokaz" back="kr_dogovor_fin" />
        </table>
        <query name="ks_istfin" as="kod_ist" join="left outer" title="Источники финансирования" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_gruz" join="left outer" dname="kr_dogovor_gruz" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_gruz" />
            <column table="kodp_gruz" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_plat" join="left outer" dname="kr_dogovor_plat" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_plat" />
            <column table="kodp_plat" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="kr_dogovor_fin" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="kr_dogovor_fin" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_spos_opl" as="kod_spos_opl" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_spos_opl" />
            <column table="kod_spos_opl" column="kod_spos_opl" />
          </call>
        </query>
        <query name="tk_delivery" as="deliv_izv" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="deliv_izv" />
            <column table="id" column="id" />
          </call>
        </query>
        <query name="kk_zak_avans" as="kod_zak_avans" join="left outer" dname="kr_dogovor_fin" title="Постановления по авансам">
          <call function="=">
            <column table="a" column="kod_zak_avans" />
            <column table="kod_zak_avans" column="kod_zak_avans" />
          </call>
        </query>
        <query name="kr_org" as="kodp_sbyt" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kodp_sbyt" />
            <column table="kodp_sbyt" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_uch" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kodp_uch" />
            <column table="kodp_uch" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" title="Отделение" dname="kr_dog_dep">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="podr" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="podr" />
            <column table="podr" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodbpol_ds" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kodbpol_ds" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ks_bank" as="kodbpl" join="left outer" dimension="1" dname="kr_dogovor-dim" is-final-dimension="1" is-private-dimension="1">
          <call function="=">
            <column table="a" column="kodbpl" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ks_vdog" as="kod_vdog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor_fin" title="Вид договора">
          <call function="=">
            <column table="a" column="kod_vdog" />
            <column table="kod_vdog" column="kod_vdog" />
          </call>
        </query>
        <query name="kk_letter_mem" as="kod_letter_mem" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_letter_mem" />
            <column table="kod_letter_mem" column="kod_letter_mem" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="kr_dogovor_fin" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ks_way_delivery" as="kod_way_delivery" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_way_delivery" />
            <column table="kod_way_delivery" column="kod_way_delivery" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="ks_bezakcept_prich" as="kod_bez_prich" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_bez_prich" />
            <column table="kod_bez_prich" column="kod_bez_prich" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_fin" join="left outer" dname="kr_dogovor_fin" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_fin" />
            <column table="kod_dog_fin" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_parent_dog" join="left outer" dname="kr_dogovor_fin" title="Договор">
          <call function="=">
            <column table="a" column="kod_parent_dog" />
            <column table="kod_parent_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor_dop" as="kod_dog_dop" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog_dop" column="kod_dog" />
          </call>
        </query>
        <query name="kk_day_pokaz" as="day_pokaz" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="day_pokaz" />
            <column table="day_pokaz" column="day_pokaz" />
          </call>
        </query>
        <query name="kv_org_sbyt" as="kod_org_sbyt" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kodp_sbyt" />
            <column table="kod_org_sbyt" column="kodp" />
          </call>
        </query>
        <query name="dog_arch_date" join="left outer" as="dog_arch_date" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="dog_arch_date" column="kod_dog" />
          </call>
        </query>
        <query name="ks_zbd" as="zbd" join="left outer" title="Общие настроечные константы" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="dep" />
            <column table="zbd" column="kodp" />
          </call>
        </query>
        <query name="p_gr_potr_nas" as="kod_gr_potr_nas" join="left outer" dname="kr_dogovor_fin" title="Группа потребления население э/э (польз.спр.)">
          <call function="=">
            <column table="this" column="kod_gr_potr_nas" />
            <column table="kod_gr_potr_nas" column="kod_gr_potr_nas" />
          </call>
        </query>
        <query name="rs_refcode" as="kod_gr_potr_dog" join="left outer" dname="kr_dogovor_fin">
          <call function="=">
            <column table="this" column="kod_gr_potr_dog" />
            <column table="kod_gr_potr_dog" column="kod_refcode" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_podr" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kr_podr" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="podr" />
            <column table="kr_podr" column="kodp" />
          </call>
        </query>
        <query name="rr_gen_codes_t" as="kod_rr_gen" join="left outer" dimension="1" dname="kr_dogovor_fin">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_rr_gen" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dogovor_list_fin(dep)" class="1" timestamp="30.10.2018 18:07:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="a" column="kod_dog_fin" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_list_adr_m(dep)" class="1" timestamp="06.08.2024 10:08:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="adress_region" as="adress_region" key="0" />
        <column table="a" column="adress_sf" as="adress_sf" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_list_adr_m_obj(dep)" class="1" timestamp="06.08.2024 09:27:55" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <call function="if" as="adress_region" key="0">
          <call function="=">
            <column table="kod_obj" column="kodd" />
            <const>-1</const>
          </call>
          <call table="a" column="adress_region" function="adress_sf">
            <column table="kod_dog" column="kod_d_dog" />
          </call>
          <call table="a" column="adress_region" function="adress_sf">
            <column table="kod_obj" column="kodd" />
          </call>
        </call>
      </select>
      <from>
        <query name="kr_numobj" as="a">
          <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="kr_numobj" field="kod_dog" parent="kr_dogovor" back="kr_numobj" title="Договор" />
          <link name="kod_obj" as="kod_obj" table="kr_object" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="kod_dog" column="dep" />
            <useparam name="dep" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_list(dep)_A" class="1" timestamp="14.06.2023 14:54:24" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
        <param type="array" name="kodp" />
      </params>
      <select>
        <column table="a" column="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="ndog" as="ndog" key="0" />
        <column table="pr_active" column="name" title="Статус" as="name" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kodp" column="nump" as="nump" key="0" />
        <column table="kodp" column="name" as="payer_name" key="0" />
      </select>
      <from>
        <query name="kr_dogovor" as="a" title="Договор">
          <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          <link name="dep" as="dep" table="kr_org" child="kr_dogovor" field="dep" parent="kr_org" back="kr_dog_dep" />
          <link name="pr_active" as="pr_active" table="kk_active" child="kr_dogovor" field="pr_active" parent="kk_active" back="kr_dogovor" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="dep" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_dopdoc_arhiv" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dopdoc.xml" haskeys="1">
      <select>
        <column table="a" column="arhiv" as="arhiv" key="1" fixed="1" />
        <column table="a" column="name" title="Статус" as="name" key="0" />
      </select>
      <from>
        <table name="kr_dopdoc_arhiv_view" as="a" view="1" />
      </from>
    </query>
    <query name="kr_employee_urists" order="fio" class="1" timestamp="25.05.2016 17:02:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <params>
        <param name="dep" type="array">
          <!--<const>(102276621)</const>-->
        </param>
      </params>
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="a" column="fio" title="Юрист" vid="1" as="fio" />
      </select>
      <from>
        <query name="kr_employee" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kodp" />
            <query>
              <select>
                <column table="b" column="kodp" as="kodp" />
              </select>
              <from>
                <query name="kr_org_branch3" as="b">
                  <withparams>
                    <useparam name="dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
          <call function="=">
            <column table="a" column="kod_dolzhfun" />
            <const>-1</const>
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_contr" order="fio" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <params>
        <param name="kod_podr" type="array">
          <call function="array">
            <const>null</const>
          </call>
        </param>
      </params>
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="a" column="fio" title="Контроллёр" vid="1" as="fio" />
      </select>
      <from>
        <query name="kr_employee" as="a">
          <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kod_emp" parent="kr_employee" back="kr_dogovor" title="Договор" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_dolzhfun" />
            <const>11</const>
          </call>
          <call function="=">
            <column table="kr_dogovor" column="tep_el" dgroup="max" />
            <const>4</const>
          </call>
          <call function="in" optional="1">
            <column table="kr_dogovor" column="podr" dgroup="max" />
            <useparam name="kod_podr" />
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_dolzh" order="fio" class="1" timestamp="18.11.2016 15:53:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="kr_payer" column="kodp" as="kodp" />
        <call function="trim" as="fio">
          <column table="a" column="fio" title="ФИО" vid="1" />
        </call>
        <call function="nvl" as="namedolzh" title="Должность">
          <column table="kod_namedolzh" column="name" />
          <column table="a" column="namedolzh" />
        </call>
        <column table="kod_dolzhfun" column="name_fun" title="Должностная функция" as="name_fun" />
      </select>
      <from>
        <query name="kr_employee" as="a">
          <link name="kodp_payer" as="kr_payer" table="kr_payer" child="kr_employee" field="kodp_payer" parent="kr_payer" back="kr_employee" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <link name="kod_dolzhfun" as="kod_dolzhfun" table="kk_dolzhfun" child="kr_employee" field="kod_dolzhfun" parent="kk_dolzhfun" back="kr_employee" />
          <link name="kod_namedolzh" as="kod_namedolzh" table="ks_namedolzh" child="kr_employee" field="kod_namedolzh" parent="ks_namedolzh" back="kr_employee" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <call function="trim">
              <column table="a" column="fio" />
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_otv" order="fio" class="1" timestamp="18.11.2016 15:47:30" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <params>
        <param name="tep_el" type="array" />
        <param name="kodp_resp" type="array" />
      </params>
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="kr_payer" column="kodp" as="kodp" />
        <call function="trim" as="fio">
          <column table="a" column="fio" title="ФИО" vid="1" />
        </call>
        <call function="nvl" as="namedolzh" title="Должность">
          <column table="kod_namedolzh" column="name" />
          <column table="a" column="namedolzh" />
        </call>
        <column table="kod_dolzhfun" column="name_fun" title="Должностная функция" as="name_fun" />
      </select>
      <from>
        <query name="kr_employee" as="a">
          <link name="kodp_payer" as="kr_payer" table="kr_payer" child="kr_employee" field="kodp_payer" parent="kr_payer" back="kr_employee" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <link name="kod_dolzhfun" as="kod_dolzhfun" table="kk_dolzhfun" child="kr_employee" field="kod_dolzhfun" parent="kk_dolzhfun" back="kr_employee" />
          <link name="kod_namedolzh" as="kod_namedolzh" table="ks_namedolzh" child="kr_employee" field="kod_namedolzh" parent="ks_namedolzh" back="kr_employee" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <call function="trim">
              <column table="a" column="fio" />
            </call>
          </call>
          <call function="in" optional="1">
            <column table="kr_dogovor" column="tep_el" dgroup="max" />
            <useparam name="tep_el" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp_resp" />
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_otv_2" order="fio" class="1" timestamp="13.08.2024 17:56:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <params>
        <param name="kodp_resp" type="array" />
      </params>
      <select>
        <column table="e" column="kod_emp" key="1" as="kod_emp" />
        <column table="e" column="fio" title="ФИО" as="fio" />
        <call function="decode" type="string" as="act" title="Статус">
          <column table="e" column="pr_active" />
          <const>1</const>
          <const>'Уволен'</const>
          <const>''</const>
        </call>
        <column table="dl" column="name" as="dolzh" title="Должность" />
        <column table="f" column="name_fun" title="Должностная функция" as="name_fun" />
        <column table="o" column="name" as="name_org" title="Подразделение" />
      </select>
      <from>
        <query name="kr_employee" as="e" />
        <query name="ks_namedolzh" join="inner" as="dl" dname="kr_employee_otv_2">
          <call function="=">
            <column table="dl" column="kod_namedolzh" />
            <column table="e" column="kod_namedolzh" />
          </call>
        </query>
        <query name="kk_dolzhfun" join="inner" as="f" dname="kr_employee_otv_2">
          <call function="=">
            <column table="f" column="kod_dolzhfun" />
            <column table="e" column="kod_dolzhfun" />
          </call>
        </query>
        <query name="kr_org" join="inner" as="o" dname="kr_employee_otv_2">
          <call function="=">
            <column table="o" column="kodp" />
            <column table="e" column="kodp" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="e" column="kodp" />
            <useparam name="kodp_resp" />
          </call>
          <call function="in">
            <column table="e" column="kod_emp" />
            <query>
              <select>
                <column table="de" column="kod_emp" as="kod_emp" />
              </select>
              <from>
                <query name="kr_dogobj_emp" as="de" />
                <query name="kr_dogovor" join="inner" as="d" title="Договор">
                  <call function="=">
                    <column table="de" column="kod_dog" />
                    <column table="d" column="kod_dog" />
                  </call>
                </query>
                <query name="kr_dogpodr" join="inner" as="dp">
                  <call function="=">
                    <column table="dp" column="kod_dogpodr" />
                    <column table="de" column="kod_dogpodr" />
                  </call>
                </query>
              </from>
              <where>
                <call function="or">
                  <call function="is null">
                    <useglobparam name="dep" />
                  </call>
                  <call function="=">
                    <column table="d" column="dep" />
                    <useglobparam name="dep" />
                  </call>
                </call>
              </where>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_ruk" inherit="kr_employee" timestamp="28.03.2016 18:17:47" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (организации)" as="kodp" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта договора" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_dolzhfun" type="number" comment="код должностной функции" as="kod_dolzhfun" reference="kk_dolzhfun" refcol="kod_dolzhfun" key="0" />
        <column table="a" column="kod_namedolzh" type="number" comment="код должности" as="kod_namedolzh" reference="ks_namedolzh" refcol="kod_namedolzh" key="0" />
        <column table="a" column="fio" type="string" title="ФИО" comment="фио" vid="1" as="fio" key="0" />
        <column table="a" column="fax" type="string" title="" comment="номер факса" as="fax" key="0" />
        <column table="a" column="tel" type="string" title="" comment="телефон" as="tel" key="0" />
        <column table="a" column="place" type="string" title="" comment="место расположения факса" as="place" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="serial" type="string" title="" comment="серия паспорта (для хозяев чп)" as="serial" key="0" />
        <column table="a" column="nomer" type="string" title="" comment="номер паспорта  (для хозяев чп)" as="nomer" key="0" />
        <column table="a" column="kem" type="string" title="" comment="кем выдан паспорт  (для хозяев чп)" as="kem" key="0" />
        <column table="a" column="num_dover" type="string" title="" comment="№ доверенности . заполн.для руководителя&#xA;исп при печати договора" as="num_dover" key="0" />
        <column table="a" column="fio_r" type="string" title="" as="fio_r" key="0" />
        <column table="a" column="e_mail" type="string" title="" as="e_mail" key="0" />
        <column table="a" column="tab_nomer" type="string" title="" comment="табельный номер" as="tab_nomer" key="0" />
        <column table="a" column="fio_f" type="string" title="" as="fio_f" key="0" />
        <column table="a" column="fio_i" type="string" title="" as="fio_i" key="0" />
        <column table="a" column="fio_o" type="string" title="" as="fio_o" key="0" />
        <column table="a" column="d_pasp" type="date" title="" as="d_pasp" key="0" />
        <column table="a" column="d_birth" type="date" title="" as="d_birth" key="0" />
        <column table="a" column="pref" type="number" title="" as="pref" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0" />
        <column table="a" column="fio_d" type="string" title="" as="fio_d" key="0" />
        <column table="a" column="namedolzh" type="string" title="" comment="наименование должности" as="namedolzh" key="0" />
        <column table="a" column="namedolzh_r" type="string" title="" comment="наименование должности в родительном падеже" as="namedolzh_r" key="0" />
        <column table="a" column="pr_ctrl" type="number" title="" comment="для быта. признак разрешения съема контрольных показаний.&#xA;1 - разрешено&#xA;0 - запрещено" as="pr_ctrl" key="0" />
        <column table="a" column="m_birth" type="string" title="" comment="место рождения (для хозяев чп)" as="m_birth" key="0" />
        <column table="a" column="adres_p" type="string" title="" comment="почтовый адрес" as="adres_p" key="0" />
        <column table="a" column="inn" type="string" title="" comment="инн должностного лица" as="inn" key="0" />
        <column table="a" column="namedolzh_d" type="string" title="" comment="наименование должности в дательном падеже" as="namedolzh_d" key="0" />
        <column table="a" column="rel_ship" type="string" title="" comment="степень родства" as="rel_ship" key="0" />
        <column table="a" column="dat_beg_reg" type="date" title="" comment="дата регистрации:" as="dat_beg_reg" key="0" />
        <column table="a" column="dat_end_reg" type="date" title="" comment="дата выписки" as="dat_end_reg" key="0" />
        <column table="a" column="russian_tel" type="number" title="" comment="флаг: должны ли номера долж. лиц соответствовать шаблону российского номера" as="russian_tel" key="0" />
        <call function="date to char" as="d_birth_str" key="0">
          <column table="a" column="d_birth" />
        </call>
        <call function="if" as="active_ruk" is-fact="1" agg="max" fact="kr_employee_active_ruk" key="0">
          <call function="and">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="a" column="kod_dolzhfun" />
              <const>14</const>
            </call>
          </call>
          <call function="||">
            <column table="kod_namedolzh" column="name" />
            <const type="string">' '</const>
            <column table="a" column="fio" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_emp" as="kod_emp_ruk" fact="kr_emp_ruk_kod_emp" agg="max" fact-dimension="kod_emp" key="0" />
      </select>
      <where>
        <call function="=">
          <column table="this" column="kod_dolzhfun" />
          <const>14</const>
        </call>
      </where>
      <from>
        <table name="kr_employee" as="a">
          <dlink name="kr_employee_ruk" dimension="1" as="kr_employee_ruk" table="kr_employee_ruk" child="kr_employee_ruk" field="kod_emp" parent="kr_employee" back="kr_employee_ruk" />
        </table>
        <query name="kk_dolzhfun" as="kod_dolzhfun" join="left outer" dname="kr_employee_ruk">
          <call function="=">
            <column table="a" column="kod_dolzhfun" />
            <column table="kod_dolzhfun" column="kod_dolzhfun" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="kr_employee_ruk">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dimension="1" dname="kr_employee_ruk">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_payer" join="left outer" dimension="1" dname="kr_employee_ruk" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp_payer" column="kodp" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_namedolzh" join="left outer" dname="kr_employee_ruk">
          <call function="=">
            <column table="a" column="kod_namedolzh" />
            <column table="kod_namedolzh" column="kod_namedolzh" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dimension="1" dname="kr_employee_ruk">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_employee_buh" inherit="kr_employee" timestamp="05.10.2016 23:56:26" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (организации)" as="kodp" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта договора" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_dolzhfun" type="number" comment="код должностной функции" as="kod_dolzhfun" reference="kk_dolzhfun" refcol="kod_dolzhfun" key="0" />
        <column table="a" column="kod_namedolzh" type="number" comment="код должности" as="kod_namedolzh" reference="ks_namedolzh" refcol="kod_namedolzh" key="0" />
        <column table="a" column="fio" type="string" title="ФИО" comment="фио" vid="1" as="fio" key="0" />
        <column table="a" column="fax" type="string" title="" comment="номер факса" as="fax" key="0" />
        <column table="a" column="tel" type="string" title="" comment="телефон" as="tel" key="0" />
        <column table="a" column="place" type="string" title="" comment="место расположения факса" as="place" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="serial" type="string" title="" comment="серия паспорта (для хозяев чп)" as="serial" key="0" />
        <column table="a" column="nomer" type="string" title="" comment="номер паспорта  (для хозяев чп)" as="nomer" key="0" />
        <column table="a" column="kem" type="string" title="" comment="кем выдан паспорт  (для хозяев чп)" as="kem" key="0" />
        <column table="a" column="num_dover" type="string" title="" comment="№ доверенности . заполн.для руководителя&#xA;исп при печати договора" as="num_dover" key="0" />
        <column table="a" column="fio_r" type="string" title="" as="fio_r" key="0" />
        <column table="a" column="e_mail" type="string" title="" as="e_mail" key="0" />
        <column table="a" column="tab_nomer" type="string" title="" comment="табельный номер" as="tab_nomer" key="0" />
        <column table="a" column="fio_f" type="string" title="" as="fio_f" key="0" />
        <column table="a" column="fio_i" type="string" title="" as="fio_i" key="0" />
        <column table="a" column="fio_o" type="string" title="" as="fio_o" key="0" />
        <column table="a" column="d_pasp" type="date" title="" as="d_pasp" key="0" />
        <column table="a" column="d_birth" type="date" title="" as="d_birth" key="0" />
        <column table="a" column="pref" type="number" title="" as="pref" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0" />
        <column table="a" column="fio_d" type="string" title="" as="fio_d" key="0" />
        <column table="a" column="namedolzh" type="string" title="" comment="наименование должности" as="namedolzh" key="0" />
        <column table="a" column="namedolzh_r" type="string" title="" comment="наименование должности в родительном падеже" as="namedolzh_r" key="0" />
        <column table="a" column="pr_ctrl" type="number" title="" comment="для быта. признак разрешения съема контрольных показаний.&#xA;1 - разрешено&#xA;0 - запрещено" as="pr_ctrl" key="0" />
        <column table="a" column="m_birth" type="string" title="" comment="место рождения (для хозяев чп)" as="m_birth" key="0" />
        <column table="a" column="adres_p" type="string" title="" comment="почтовый адрес" as="adres_p" key="0" />
        <column table="a" column="inn" type="string" title="" comment="инн должностного лица" as="inn" key="0" />
        <column table="a" column="namedolzh_d" type="string" title="" comment="наименование должности в дательном падеже" as="namedolzh_d" key="0" />
        <column table="a" column="rel_ship" type="string" title="" comment="степень родства" as="rel_ship" key="0" />
        <column table="a" column="dat_beg_reg" type="date" title="" comment="дата регистрации:" as="dat_beg_reg" key="0" />
        <column table="a" column="dat_end_reg" type="date" title="" comment="дата выписки" as="dat_end_reg" key="0" />
        <column table="a" column="russian_tel" type="number" title="" comment="флаг: должны ли номера долж. лиц соответствовать шаблону российского номера" as="russian_tel" key="0" />
        <call function="date to char" as="d_birth_str" key="0">
          <column table="a" column="d_birth" />
        </call>
        <call function="if" as="active_ruk" is-fact="1" agg="max" fact="kr_employee_active_ruk" key="0">
          <call function="and">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="a" column="kod_dolzhfun" />
              <const>14</const>
            </call>
          </call>
          <call function="||">
            <column table="kod_namedolzh" column="name" />
            <const type="string">' '</const>
            <column table="a" column="fio" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_emp" as="kod_emp_buh" fact="kr_emp_buh_kod_emp" agg="max" fact-dimension="kod_emp" key="0" />
      </select>
      <where>
        <call function="=">
          <column table="this" column="kod_dolzhfun" />
          <const>1</const>
        </call>
      </where>
      <from>
        <table name="kr_employee" as="a">
          <dlink name="kr_employee_ruk" dimension="1" as="kr_employee_ruk" table="kr_employee_ruk" child="kr_employee_ruk" field="kod_emp" parent="kr_employee" back="kr_employee_ruk" />
        </table>
        <query name="kk_dolzhfun" as="kod_dolzhfun" join="left outer" dname="kr_employee_buh">
          <call function="=">
            <column table="a" column="kod_dolzhfun" />
            <column table="kod_dolzhfun" column="kod_dolzhfun" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="kr_employee_buh">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dimension="1" dname="kr_employee_buh">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_payer" join="left outer" dimension="1" dname="kr_employee_buh" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp_payer" column="kodp" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_namedolzh" join="left outer" dname="kr_employee_buh">
          <call function="=">
            <column table="a" column="kod_namedolzh" />
            <column table="kod_namedolzh" column="kod_namedolzh" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dimension="1" dname="kr_employee_buh">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_employee_urists_singl_dep" order="fio" class="1" timestamp="13.02.2017 19:36:42" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <params>
        <param name="dep" type="number">
          <!--<const>(102276621)</const>-->
        </param>
      </params>
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="a" column="fio" as="fio" />
      </select>
      <from>
        <query name="kr_employee_urists" as="a">
          <withparams>
            <call function="array">
              <useparam name="dep" />
            </call>
          </withparams>
        </query>
      </from>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_employee_email" order="fio" timestamp="17.05.2017 15:45:22" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_employee.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" key="1" as="kod_emp" />
        <column table="a" column="fio" key="1" as="fio" />
        <column table="kod_namedolzh" column="name" title="Должность" as="name" />
        <column table="ks_user" column="puser" title="Аккаунт" dgroup="max" as="puser" />
        <column table="a" column="e_mail" title="e-mail" as="e_mail" />
      </select>
      <from>
        <query name="kr_employee" as="a">
          <link name="kod_namedolzh" as="kod_namedolzh" table="ks_namedolzh" child="kr_employee" field="kod_namedolzh" parent="ks_namedolzh" back="kr_employee" />
          <dlink name="ks_user" as="ks_user" table="ks_user" child="ks_user" field="kod_emp" parent="kr_employee" back="ks_user" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kod_namedolzh" />
            <call function="array">
              <const>29</const>
              <const>46</const>
            </call>
          </call>
          <call function="is not null">
            <column table="a" column="fio" />
          </call>
          <call function="is not null">
            <column table="ks_user" column="puser" dgroup="max" />
          </call>
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="kr_numobj_list" class="1" timestamp="22.11.2016 15:57:44" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_numobj.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" key-dimension="kod_numobj" key="1" as="kod_numobj" />
        <column table="a" column="name" type="string" title="Наименование объекта договора" comment="наименование объекта в текущем договоре" as="name" />
        <column table="a" column="num_obj" type="number" title="Номер объекта договора" comment="номер объекта в списке объектов договора" as="num_obj" />
        <column table="a" column="dat_create" type="date" title="Дата  создания" comment="дата  создания объекта в списке" as="dat_create" />
        <column table="a" column="dat_fin" type="date" title="Дата окончания действия" comment="дата перевода объекта в архив в текущем договоре" as="dat_fin" />
      </select>
      <from>
        <query name="kr_numobj" as="a">
          <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="kr_numobj" field="kod_dog" parent="kr_dogovor" back="kr_numobj" title="Договор" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="kod_dog" column="dep" />
            <useparam name="dep" />
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_numobj_mn" timestamp="30.11.2017 08:23:50" class="1" inherit="kr_numobj" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_numobj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" key-dimension="kod_numobj" fact="kr_numobj_kod_numobj" agg="max" as="kod_numobj" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="kod_f23" type="number" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="объект тепловой ,электрический или единый" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="код тарифа" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_parent_sa" type="number" comment="код объекта договора которому принадлежит субабонет (если он not null, значит объект договора - субабонент )" as="kod_parent_sa" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kodagent" type="number" title="" comment="код субъекта деятельности" as="kodagent" reference="hk_agent" refcol="kodagent" key="0" />
        <column table="a" column="num_obj" type="number" title="Номер объекта договора" comment="номер объекта в списке объектов договора" is-fact="1" agg="list" as="num_obj" fact="kr_numobj_mn_num_obj" key="0" />
        <column table="a" column="name" type="string" title="Наименование объекта договора" comment="наименование объекта в текущем договоре" as="name" key="0" />
        <column table="a" column="dat_create" type="date" title="" comment="дата  создания объекта в списке" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_create" key="0" />
        <column table="a" column="dat_fin" type="date" title="" comment="дата перевода объекта в архив в текущем договоре" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_fin" key="0" />
        <column table="a" column="prizn_prn" type="number" title="" comment="признак печати (определяет вид приложения)" as="prizn_prn" key="0" />
        <column table="a" column="kod_parent_obj" type="number" comment="код родительского объекта договора (от него наследуется система учета, схема энергоснабжения и т.д.)" as="kod_parent_obj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="корректировал пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата корректировки" as="d_m" key="0" />
        <column table="a" column="dat_replace" type="date" title="" comment="дата замены объекта (изменение принадлежности к договору)" as="dat_replace" key="0" />
        <column table="a" column="tel_ruk" type="string" title="" as="tel_ruk" key="0" />
        <column table="a" column="tel_glen" type="string" title="" as="tel_glen" key="0" />
        <column table="a" column="tel_deghen" type="string" title="" as="tel_deghen" key="0" />
        <column table="a" column="tel_degh" type="string" title="" as="tel_degh" key="0" />
        <column table="a" column="p" type="number" title="" comment="разрешенная к использованию нагрузка ( для субабонентов)" as="p" key="0" />
        <column table="a" column="kod_obj_fs" type="number" as="kod_obj_fs" reference="ks_obj_fs" refcol="kod_obj_fs" key="0" />
        <column table="a" column="kod_uslotkl" type="number" as="kod_uslotkl" reference="ks_uslotkl" refcol="kod_uslotkl" key="0" />
        <column table="a" column="algp" type="number" title="" comment="алгоритм расчета мощности ( 1 - 1-ставочный, 2 - двуставочный, 0 или null - по тарифу)" as="algp" key="0" />
        <column table="a" column="tlg_och" type="number" title="" comment="очередь откл. для тф" as="tlg_och" key="0" />
        <column table="a" column="kod_dopdoc" type="number" comment="код доп.док-та по принадл.эл.обор." as="kod_dopdoc" reference="kr_dopdoc" refcol="kod_dopdoc" key="0" />
        <column table="a" column="kodnaznhouse" type="number" title="" comment="назначение сооружения суба" as="kodnaznhouse" reference="hs_naznhouse" refcol="kodnaznhouse" key="0" />
        <column table="a" column="vkl530" type="number" title="" comment="эл. вкл. в перечень по огр. по пост.530" as="vkl530" key="0" />
        <column table="a" column="bezdog" type="number" title="" comment="бездоговорное использование" as="bezdog" key="0" />
        <column table="a" column="pr_sv_price" type="number" title="" comment="признак расчета по свободным ценам" as="pr_sv_price" key="0" />
        <column table="a" column="fio_ruk" type="string" title="" as="fio_ruk" key="0" />
        <column table="a" column="fio_deghen" type="string" title="" as="fio_deghen" key="0" />
        <column table="a" column="fio_degh" type="string" title="" as="fio_degh" key="0" />
        <column table="a" column="fio_glen" type="string" title="" as="fio_glen" key="0" />
        <column table="a" column="dat_plan_fin" type="date" title="" comment="планирумая дата окончания объекта" as="dat_plan_fin" key="0" />
        <column table="a" column="point_sale" type="string" title="" comment="описание точки поставки" as="point_sale" key="0" />
        <column table="a" column="divergence_percent" type="number" title="" comment="отклонение факт. расхода %" as="divergence_percent" key="0" />
        <column table="a" column="pr_avans" type="number" title="" comment="участие в авансах" as="pr_avans" key="0" />
        <column table="a" column="gr_point" type="number" title="" comment="0 - субабонент, 1 - группа точек, 2- одновременно и то и другое" as="gr_point" key="0" />
        <column table="a" column="inn_sa" type="string" title="" comment="инн субабонента" as="inn_sa" key="0" />
        <column table="a" column="russian_tel" type="number" title="" comment="флаг: должны ли номера долж. лиц по объекту соответствовать шаблону российского номера" as="russian_tel" key="0" />
        <column table="a" column="kodp_holder" type="number" title="" comment="код потребителя-держателя объекта" as="kodp_holder" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="dat_postav_obj" type="date" title="" as="dat_postav_obj" key="0" />
        <call function="nvl" as="kod_numobj_main" key="0">
          <column table="a" column="kod_parent_sa" />
          <column table="a" column="kod_numobj" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="||" as="int_exst_inf" is-fact="1" agg="list" type="string" fact="kr_numobj_mn_int_exst_inf" key="0">
          <call function="to_char">
            <column table="a" column="dat_create" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">1</const>
            <const>'-'</const>
            <const>''</const>
          </call>
          <call function="to_char">
            <column table="a" column="dat_fin" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <const>','</const>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">0</const>
            <const>'А'</const>
            <const function="null">1</const>
            <const>'У'</const>
            <const function="null">2</const>
            <const>'Н'</const>
          </call>
        </call>
        <column table="kodd" column="kf_adress_o" as="saddr" title="numobj_addr" type="string" is-fact="1" agg="list" fact="kr_numobj_mn_saddr" key="0" />
        <column table="kod_f23" column="name" is-fact="1" agg="list" as="f23_name" title="dover_sps" fact="kr_numobj_mn_f23_name" key="0" />
      </select>
      <from>
        <table name="kr_numobj" as="a">
          <link name="kod_obj" dimension="1" as="kod_obj" table="kr_object" child="kr_numobj_mn" field="kod_obj" parent="kr_object" back="kr_numobj_mn">
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="kr_dogovor" child="kr_numobj_mn" field="kod_dog" parent="kr_dogovor" back="kr_numobj_mn" title="Договор">
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="dr_point_rasx" dimension="1" as="dr_point_rasx" table="dr_point_rasx" child="dr_point_rasx" field="kod_numobj" parent="kr_numobj" back="dr_point_rasx" />
          <dlink name="hr_point_tar" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_tar" table="hr_point_tar" child="hr_point_tar" field="kod_numobj" parent="kr_numobj" back="hr_point_tar">
            <dimlink name="kod_point_ini" dimension="1" />
            <dimlink name="kod_point_rasx" dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="kr_dogovor" child="kr_numobj_mn" field="kod_dog" parent="kr_dogovor" back="kr_numobj_mn" title="Договор">
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_obj" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_obj" table="kr_object" child="kr_numobj_mn" field="kod_obj" parent="kr_object" back="kr_numobj_mn">
            <dimlink name="kod_point_ini" dimension="1" />
            <dimlink name="kod_point_rasx" dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dimlink>
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="kr_object" as="kod_obj" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="kod_obj" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_holder" join="left outer" dname="kr_numobj_mn" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_holder" />
            <column table="kodp_holder" column="kodp" />
          </call>
        </query>
        <query name="hk_agent" as="kodagent" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kodagent" />
            <column table="kodagent" column="kodagent" />
          </call>
        </query>
        <query name="hs_23" as="kod_f23" join="left outer" dname="kr_numobj_mn" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23" />
            <column table="kod_f23" column="kod_f23" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dopdoc" as="kod_dopdoc" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_dopdoc" />
            <column table="kod_dopdoc" column="kod_dopdoc" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_parent_obj" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_parent_obj" />
            <column table="kod_parent_obj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_parent_sa" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_parent_sa" />
            <column table="kod_parent_sa" column="kod_numobj" />
          </call>
        </query>
        <query name="ks_obj_fs" as="kod_obj_fs" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_obj_fs" />
            <column table="kod_obj_fs" column="kod_obj_fs" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="ks_uslotkl" as="kod_uslotkl" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_uslotkl" />
            <column table="kod_uslotkl" column="kod_uslotkl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="kr_numobj_mn" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="hs_naznhouse" as="kodnaznhouse" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kodnaznhouse" />
            <column table="kodnaznhouse" column="kodnaznhouse" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj_main" join="left outer" dname="kr_numobj_main">
          <call function="=">
            <column table="a" column="kod_numobj_main" />
            <column table="kod_numobj_main" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_numobj_mn" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="kr_numobj_mn">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
        <link name="kod_obj" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_point_ini" dimension="1" />
          <dimlink name="kod_point_rasx" dimension="1" />
          <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </link>
      </links>
      <where>
        <call function="and">
          <call function="is null">
            <column table="this" column="kod_parent_sa" />
          </call>
          <call function="=">
            <column table="this" column="tep_el" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="kr_object_id_adres_list" class="1" timestamp="27.09.2017 14:45:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_object.xml" haskeys="1">
      <select>
        <column table="a" column="id_adres" title="Лицевой счёт" key="1" group="1" as="id_adres" />
      </select>
      <from>
        <query name="kr_object" as="a" />
      </from>
      <where>
        <call function="is not null">
          <column table="a" column="id_adres" />
        </call>
      </where>
    </query>
    <query name="id_adres_like" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_object.xml" haskeys="1">
      <params>
        <param name="id_adres_s" type="string" />
        <param name="id_adres_po" type="string" />
      </params>
      <select>
        <call function="if" as="value" key="1" fixed="1">
          <call function="and">
            <call function="is not null">
              <call function="nvlu" as="value">
                <useparam name="id_adres_s" />
                <const>null</const>
              </call>
            </call>
            <call function="is null">
              <call function="nvlu" as="value">
                <useparam name="id_adres_po" />
                <const>null</const>
              </call>
            </call>
          </call>
          <useparam name="id_adres_s" />
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="kr_object_vdr" timestamp="28.03.2016 18:36:31" inherit="kr_object" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_object.xml" haskeys="1">
      <from>
        <table name="kr_object" as="a">
          <link name="kodd" dimension="1" as="kodd" table="k_house" child="kr_object_vdr" field="kodd" parent="k_house" back="kr_object_vdr" />
          <dlink name="kr_numobj" dimension="kod_numobj" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
          <dlink name="kr_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_numobj_mn" table="kr_numobj_mn" child="kr_numobj_mn" field="kod_obj" parent="kr_object" back="kr_numobj_mn">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point" dimension="1" as="hr_point" table="hr_point" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
            <dimlink name="kod_point_ini" dimension="1" />
            <dimlink name="kod_point_rasx" dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="tr_his_upr" dimension="1" as="tr_his_upr" table="tr_his_upr" child="tr_his_upr" field="kod_obj" parent="kr_object" back="tr_his_upr" />
        </table>
        <query name="adr_m" as="kod_tzone" join="left outer" dname="kr_object_vdr" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="kod_tzone" />
            <column table="kod_tzone" column="kod_m" />
          </call>
        </query>
        <query name="tk_stobj" as="kod_stobj" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kod_stobj" />
            <column table="kod_stobj" column="kod_stobj" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kr_buil" as="kod_buil" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kod_buil" />
            <column table="kod_buil" column="kod_buil" />
          </call>
        </query>
        <query name="kr_org" as="kodp_seti" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kodp_seti" />
            <column table="kodp_seti" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="k_house" as="kodd_house" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kodd_house" />
            <column table="kodd_house" column="kodd" />
          </call>
        </query>
        <query name="ds_naznhouse" as="kodnaznteplo" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kodnaznteplo" />
            <column table="kodnaznteplo" column="kodnaznteplo" />
          </call>
        </query>
        <query name="ds_tipprn" as="kod_tipprnsw" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kod_tipprnsw" />
            <column table="kod_tipprnsw" column="kod_tipprn" />
          </call>
        </query>
        <query name="ds_tipprn" as="kod_tipprn" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kod_tipprn" />
            <column table="kod_tipprn" column="kod_tipprn" />
          </call>
        </query>
        <query name="hs_naznhouse" as="kodnaznhouse" join="left outer" dname="kr_object_vdr">
          <call function="=">
            <column table="a" column="kodnaznhouse" />
            <column table="kodnaznhouse" column="kodnaznhouse" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dimension="kod_obj" dname="kr_object_vdr">
          <call function="=">
            <column table="this" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="tr_his_upr" dimension="1" />
      </links>
      <select>
        <column table="a" column="kod_obj" type="number" comment="код потребителя" key-dimension="kod_obj" as="kod_obj" key="1" fixed="1" />
        <column table="a" column="kodd" type="number" title="" as="kodd" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kodnaznhouse" type="number" title="" as="kodnaznhouse" reference="hs_naznhouse" refcol="kodnaznhouse" key="0" />
        <column table="a" column="askue" type="number" title="" as="askue" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodnaznteplo" type="number" title="" as="kodnaznteplo" reference="ds_naznhouse" refcol="kodnaznteplo" key="0" />
        <column table="a" column="volume" type="number" title="" as="volume" key="0" />
        <column table="a" column="god_zd" type="number" title="" comment="1- до 1958 года; 0 - после 1958 года" as="god_zd" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="tvr" type="number" title="" as="tvr" key="0" />
        <column table="a" column="kod_tipprn" type="number" as="kod_tipprn" reference="ds_tipprn" refcol="kod_tipprn" key="0" />
        <column table="a" column="kod_tipprnsw" type="number" as="kod_tipprnsw" reference="ds_tipprn" refcol="kod_tipprn" key="0" />
        <column table="a" column="square" type="number" title="Общая площадь жилого помещения" comment="общая площадь кв.м." as="square" key="0" />
        <column table="a" column="askute" type="number" title="" as="askute" key="0" />
        <column table="a" column="kod_buil" type="number" comment="для коми" as="kod_buil" reference="kr_buil" refcol="kod_buil" key="0" />
        <column table="a" column="id_adres" type="string" title="" comment="быт : идентификатор адреса" as="id_adres" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="признак&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="tep_el_byt" type="number" title="" comment="признак для быта&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_tjil" type="number" as="kod_tjil" key="0" />
        <column table="a" column="kod_stobj" type="number" as="kod_stobj" reference="tk_stobj" refcol="kod_stobj" key="0" />
        <column table="a" column="kol_kom" type="number" title="Количество комнат" as="kol_kom" key="0" />
        <column table="a" column="square_corn" type="number" title="" as="square_corn" key="0" />
        <column table="a" column="kod_tzone" type="number" comment="код зоны температур. зоной является район сф или город районного значения. информация получена из справочника &quot;населенных пунктов&quot;" as="kod_tzone" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="pref_nump" type="string" title="" comment="для казани - код рпу, для остальных код отделения" as="pref_nump" key="0" />
        <column table="a" column="kodp_seti" type="number" title="" comment="филиал ск" as="kodp_seti" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="square_odn" type="number" title="" comment="площадь одн кв.м." as="square_odn" key="0" />
        <column table="a" column="square_gil" type="number" title="" comment="жилая площадь кв.м." as="square_gil" key="0" />
        <column table="a" column="square_ngl" type="number" title="" comment="нежилая площадь кв.м." as="square_ngl" key="0" />
        <column table="a" column="num_book" type="string" title="" comment="№ книги" as="num_book" key="0" />
        <column table="a" column="square_oi" type="number" title="" comment="площадь общего имущества кв.м." as="square_oi" key="0" />
        <column table="a" column="kodd_house" type="number" title="" comment="содержит ключ &quot;дома&quot; из таблицы k_house. в столбце kodd может быть как ключ дома, так и ключ помещения, подъезда, квартиры." as="kodd_house" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="guid" type="string" title="" as="guid" key="0" />
        <const type="number" as="cnt" fact="kr_object_count" agg="sum" key="0">1</const>
        <call function="t_vl_vdr.get_vdr_calc_by_kod_obj" as="prizn_calc_cur_ym" key="0">
          <column table="a" column="kod_obj" />
          <useglobparam name="ym" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <params />
    </query>
    <query name="kr_object_odn" timestamp="26.05.2017 12:07:05" comment="дома со схемой ОДН" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_object.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj" as="kod_obj" key="1" fixed="1" />
        <column table="a" column="kodd" as="kodd" reference="k_house" refcol="kodd" key="0" />
      </select>
      <from>
        <query name="kr_object" as="a">
          <dlink name="hr_point" as="hr_point" table="hr_point" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
            <where>
              <call function="and">
                <call function="is null">
                  <column table="hr_point" column="kod_pointmain" />
                </call>
                <call function="=">
                  <column table="hr_point" column="nagruz_type" />
                  <const>1</const>
                </call>
              </call>
            </where>
          </dlink>
          <dlink name="kr_numobj" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_object_odn">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <call function="in">
            <column table="a" column="tep_el_byt" />
            <const>(0,1)</const>
          </call>
          <call function="is not null">
            <column table="hr_point" column="kod_point" dgroup="max" />
          </call>
          <call function="is null">
            <column table="kr_numobj" column="kod_numobj" dgroup="max" />
          </call>
        </call>
      </where>
    </query>
    <query name="kr_org_branch" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      <params>
        <param name="kodp" type="array" />
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="kr_org" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kodp" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="in">
          <column table="a" column="kodp" />
          <useparam name="kodp" />
        </call>
      </start>
    </query>
    <query name="kr_org_branch2" comment="+ 1 уровень вверх" class="1" timestamp="17.11.2016 19:01:03" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      <params>
        <param name="kodp" type="array" />
      </params>
      <select>
        <column table="b" column="kodp" as="kodp" key="0" />
      </select>
      <from>
        <query as="b">
          <union all="0">
            <query>
              <select>
                <column table="c" column="kodp" as="kodp" key="0" />
              </select>
              <from>
                <query name="kr_org_branch" as="c">
                  <withparams>
                    <useparam name="kodp" />
                  </withparams>
                </query>
              </from>
            </query>
            <query>
              <select>
                <column table="d" column="kod_parent" as="kodp" />
              </select>
              <from>
                <query name="kr_org" as="d" />
              </from>
              <where>
                <call function="in">
                  <column table="d" column="kodp" />
                  <useparam name="kodp" />
                </call>
              </where>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="kr_org_branch3" comment="возвращает все kodp, которые не относятся к отделению либо относятся к отделению из параметра kodp" class="1" timestamp="12.03.2019 16:19:02" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      <params>
        <param name="kodp" type="array">
          <const>1172</const>
        </param>
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="kr_org" as="a" />
      </from>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kodp" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
          <call function="not" optional="1">
            <call function="and">
              <call function="=">
                <column column="kod_separator" table="a" />
                <const>2</const>
              </call>
              <call function="=">
                <call function="case">
                  <call function="when">
                    <call function="not in">
                      <column column="kodp" table="a" />
                      <useparam name="kodp" />
                    </call>
                    <const>1</const>
                  </call>
                  <call function="else">
                    <const>0</const>
                  </call>
                </call>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
      </connect>
      <start>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_separator" />
            <const>1</const>
          </call>
          <call function="=">
            <column table="a" column="kod_ecls" />
            <const>4</const>
          </call>
        </call>
      </start>
    </query>
    <query name="kr_org_podr" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <params>
        <param name="dep" type="array">
          <!--<const>1172</const>-->
        </param>
      </params>
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Участок" as="name" key="0"></column>
      </select>
      <from>
        <query name="kr_podr" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kodp" />
            <query>
              <select>
                <column table="b" column="kodp" as="kodp" />
              </select>
              <from>
                <query name="kr_org_branch" as="b">
                  <withparams>
                    <useparam name="dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_org_podr_byt" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <params>
        <param name="dep" type="array">
          <!--<const>1172</const>-->
        </param>
      </params>
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Участок" as="name" key="0"></column>
      </select>
      <from>
        <query name="kr_podr_byt" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kodp" />
            <query>
              <select>
                <column table="b" column="kodp" as="kodp" />
              </select>
              <from>
                <query name="kr_org_branch" as="b">
                  <withparams>
                    <useparam name="dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_org_resp" order="name" title="Ответственное подразделение" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <params>
        <param name="dep" type="array"></param>
      </params>
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1"></column>
        <column table="kodp" column="kod_parent" type="number" title="" as="kod_parent" key="0"></column>
        <column table="kodp" column="name" type="string" title="Подразделение" as="name" key="0"></column>
      </select>
      <from>
        <query name="kr_org_ecls4" as="a">
          <link name="kodp" as="kodp" table="kr_org" child="kr_org_ecls4" field="kodp" parent="kr_org" back="kr_org_ecls4" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <query>
              <select>
                <column table="b" column="kodp" as="kodp" />
              </select>
              <from>
                <query name="kr_org_branch" as="b">
                  <withparams>
                    <useparam name="dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_dep" order="name" class="1" timestamp="04.02.2019 16:26:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="name" title="Отделение" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" fact="kr_dep_sname" agg="stragg" as="sname" key="0" />
        <const type="number" as="cnt" fact="kr_dep_count" agg="sum" key="0">1</const>
      </select>
      <from>
        <table name="kr_dep" as="a" view="1">
          <dlink name="kr_dogovor" dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" title="Договор" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep">
            <link name="kod_link" dimension="1" as="kod_link" table="sr_opl_bank" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep" />
          </dlink>
          <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" title="Договор">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_folders" table="ur_folders" child="ur_folders" field="kod_dep" parent="kr_dep" back="ur_folders" title="Папка">
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="kr_org" as="kodp" join="left outer" dname="kr_dep">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" as="kr_calc_dep_max" dname="kr_dep">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_podr" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="name" title="Участок" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" as="sname" key="0" />
      </select>
      <from>
        <table name="kr_podr" as="a" view="1" />
        <query name="kr_org" as="kodp" join="left outer" dname="kr_podr">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_dep_byt" order="name" class="1" timestamp="20.07.2016 01:27:02" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="name" title="Отделение" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" agg="stragg" as="sname" key="0" />
      </select>
      <from>
        <table name="kr_dep_byt" as="a" view="1" />
        <query name="kr_org" as="kodp" join="left outer" dname="kr_dep_byt">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_podr_byt" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="name" title="Участок" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" as="sname" key="0" />
      </select>
      <from>
        <table name="kr_podr_byt" as="a" view="1" />
        <query name="kr_org" as="kodp" join="left outer" dname="kr_podr_byt">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_org_ecls4" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="kodp" column="name" title="Участок" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" as="sname" key="0" />
      </select>
      <from>
        <table name="kr_org_ecls4" as="a" view="1" />
        <query name="kr_org" as="kodp" join="left outer" dname="kr_org_ecls4">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_dep_current" inherit="kr_dep" class="1" timestamp="28.09.2017 20:34:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="kodp" />
            <useglobparam name="dep" />
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kodp" type="number" as="kodp" key="1" fixed="1" />
        <column table="kodp" column="name" title="Отделение" as="name" key="0" />
        <column table="kodp" column="sname" title="Аббревиатура" fact="kr_dep_sname" agg="stragg" as="sname" key="0" />
        <const type="number" as="cnt" fact="kr_dep_count" agg="sum" key="0">1</const>
      </select>
      <from>
        <table name="kr_dep" as="a" view="1">
          <dlink name="kr_dogovor" dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" title="Договор" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep">
            <link name="kod_link" dimension="1" as="kod_link" table="sr_opl_bank" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep" />
          </dlink>
          <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" title="Договор">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_folders" table="ur_folders" child="ur_folders" field="kod_dep" parent="kr_dep" back="ur_folders" title="Папка">
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="kr_org" as="kodp" join="left outer" dname="kr_dep_current">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" as="kr_calc_dep_max" dname="kr_dep_current">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
      </from>
      <params />
    </query>
    <query name="kr_dep_is_single" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <call function="" as="val" type="number" key="1" fixed="1">
          <useglobparam name="is_single_dep" />
        </call>
      </select>
      <from>
        <table name="dual" />
      </from>
      <params />
    </query>
    <query name="kr_dep_is_multi" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <call function="true if 0" as="val" key="1" fixed="1">
          <useglobparam name="is_single_dep" />
        </call>
      </select>
      <from>
        <table name="dual" />
      </from>
      <params />
    </query>
    <query name="kr_dep_all" order="kod_separator, name" class="1" timestamp="17.05.2017 16:03:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" key="1" as="kodp" />
        <column table="a" column="name" title="Отделение" as="name" />
        <column table="a" column="sname" title="Аббревиатура" as="sname" />
        <column table="a" column="kod_separator" as="kod_separator" />
      </select>
      <from>
        <query name="kr_org" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_ecls" />
            <const>4</const>
          </call>
          <call function="in">
            <column table="a" column="kod_separator" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="kod_separator" />
        <column column="name" />
      </order>
    </query>
    <query name="kr_org_bal" title="Балансовая организация" inherit="kr_org" timestamp="26.10.2017 17:55:46" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Отделение" as="name" is-fact="1" agg="list" fact="kr_org_bal_name" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" reference="kk_orgseparator" refcol="kod_separator" key="0" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="gruppa" type="number" title="" as="gruppa" key="0" />
        <column table="a" column="pref_fac" type="number" title="" comment="префикс № счета фактуры для данного&#xA;префикс № счета фактуры для данного подразделения эсб" as="pref_fac" key="0" />
        <column table="a" column="pref_doc" type="string" title="" comment="префикс к № док-тов для подразд" as="pref_doc" key="0" />
        <column table="a" column="tel" type="string" title="" as="tel" key="0" />
        <column table="a" column="fax" type="string" title="" as="fax" key="0" />
        <column table="a" column="email" type="string" title="" as="email" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="place" type="string" title="" as="place" key="0" />
        <column table="a" column="kod_org" type="number" comment="код подразделения" as="kod_org" key="0" />
        <column table="a" column="site" type="string" title="" comment="имя сайта" as="site" key="0" />
        <column table="a" column="info" type="string" title="" comment="информация для вывода в подвале извещения для бытовиков" as="info" key="0" />
        <column table="a" column="dog_service" type="number" title="" comment="может ли юл участвовать в договоре услуг: 1- да, 0 -нет" as="dog_service" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <call function="true if not null" as="is_filial" title="Является филиалом" key="0">
          <column table="a" column="kod_parent" />
        </call>
        <call function="if" as="kodp_dep" key="0">
          <call function="le">
            <column table="a" column="kod_separator" />
            <const>2</const>
          </call>
          <column table="a" column="kodp" />
          <call function="podr_dep">
            <column table="a" column="kodp" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_org" as="a">
          <dlink name="kr_payer" dimension="1" as="kr_payer" table="kr_payer" child="kr_payer" field="kodp" parent="kr_org" back="kr_payer" title="Абонент" />
          <dlink name="hr_eobject_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject_src" table="hr_eobject_src" child="hr_eobject_src" field="bal_id" parent="kr_org_bal" back="hr_eobject_src" title="Энергообъекты">
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="kod_ecls" />
            <column table="kod_ecls" column="kod_ecls" />
          </call>
        </query>
        <query name="kk_orgseparator" as="kod_separator" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="kod_separator" />
            <column table="kod_separator" column="kod_separator" />
          </call>
        </query>
        <query name="kr_org" as="kod_parent" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kodp" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kr_org" as="kodp_dep" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="kodp_dep" />
            <column table="kodp_dep" column="kodp" />
          </call>
        </query>
        <query name="rr_uaa_read" as="rr_uaa_read" join="left outer" dname="kr_org_bal">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="rr_uaa_read" column="podr" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" as="kr_calc_dep_max" dname="kr_org_bal">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="hr_eobject_src" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="kr_org_elter" title="Эксплуатационная организация" inherit="kr_org" timestamp="26.10.2017 17:56:08" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Отделение" as="name" is-fact="1" agg="list" fact="kr_org_elter_name" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" reference="kk_orgseparator" refcol="kod_separator" key="0" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="gruppa" type="number" title="" as="gruppa" key="0" />
        <column table="a" column="pref_fac" type="number" title="" comment="префикс № счета фактуры для данного&#xA;префикс № счета фактуры для данного подразделения эсб" as="pref_fac" key="0" />
        <column table="a" column="pref_doc" type="string" title="" comment="префикс к № док-тов для подразд" as="pref_doc" key="0" />
        <column table="a" column="tel" type="string" title="" as="tel" key="0" />
        <column table="a" column="fax" type="string" title="" as="fax" key="0" />
        <column table="a" column="email" type="string" title="" as="email" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="place" type="string" title="" as="place" key="0" />
        <column table="a" column="kod_org" type="number" comment="код подразделения" as="kod_org" key="0" />
        <column table="a" column="site" type="string" title="" comment="имя сайта" as="site" key="0" />
        <column table="a" column="info" type="string" title="" comment="информация для вывода в подвале извещения для бытовиков" as="info" key="0" />
        <column table="a" column="dog_service" type="number" title="" comment="может ли юл участвовать в договоре услуг: 1- да, 0 -нет" as="dog_service" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <call function="true if not null" as="is_filial" title="Является филиалом" key="0">
          <column table="a" column="kod_parent" />
        </call>
        <call function="if" as="kodp_dep" key="0">
          <call function="le">
            <column table="a" column="kod_separator" />
            <const>2</const>
          </call>
          <column table="a" column="kodp" />
          <call function="podr_dep">
            <column table="a" column="kodp" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_org" as="a">
          <dlink name="kr_payer" dimension="1" as="kr_payer" table="kr_payer" child="kr_payer" field="kodp" parent="kr_org" back="kr_payer" title="Абонент" />
          <dlink name="hr_eobject_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject_src" table="hr_eobject_src" child="hr_eobject_src" field="expl_id" parent="kr_org_elter" back="hr_eobject_src" title="Энергообъекты">
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="kod_ecls" />
            <column table="kod_ecls" column="kod_ecls" />
          </call>
        </query>
        <query name="kk_orgseparator" as="kod_separator" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="kod_separator" />
            <column table="kod_separator" column="kod_separator" />
          </call>
        </query>
        <query name="kr_org" as="kod_parent" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kodp" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kr_org" as="kodp_dep" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="kodp_dep" />
            <column table="kodp_dep" column="kodp" />
          </call>
        </query>
        <query name="rr_uaa_read" as="rr_uaa_read" join="left outer" dname="kr_org_elter">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="rr_uaa_read" column="podr" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" as="kr_calc_dep_max" dname="kr_org_elter">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="hr_eobject_src" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="kr_org_one" order="name" class="1" timestamp="06.11.2024 15:29:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml" haskeys="1">
      <params>
        <param name="dep" type="number">
          <const type="number">0</const>
          <!--<const>1172</const>-->
        </param>
      </params>
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="sname" as="sname" key="0" />
      </select>
      <from>
        <query name="kr_org" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kodp" />
          <useparam name="dep" />
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="kr_payer_prizn_activ" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" as="kod" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Статус абонента" vid="1" as="name" key="0"></column>
      </select>
      <from>
        <table name="payer_prizn_activ" view="1" as="a"></table>
      </from>
    </query>
    <query name="kr_payer_abon_type" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <select>
        <column table="a" column="kod_abon_type" type="number" as="kod_abon_type" key="1" fixed="1"></column>
        <column table="a" column="abon_type_name" type="string" title="Тип абонентов" as="abon_type_name" key="0"></column>
      </select>
      <from>
        <table name="payer_abon_type" view="1" as="a"></table>
      </from>
    </query>
    <query name="abon_type_current" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <select>
        <!--<column table="a" column="kod_abon_type"/>-->
        <call function="if" as="kod_abon_type" type="number" key="1" fixed="1">
          <call function="=">
            <useglobparam name="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <column table="a" column="abon_type_name" type="string" as="abon_type_name" key="0" />
      </select>
      <from>
        <table name="payer_abon_type" view="1" as="a"></table>
      </from>
      <where>
        <call function="=">
          <call function="if">
            <call function="=">
              <useglobparam name="tep_el" />
              <const>4</const>
            </call>
            <const>1</const>
            <const>2</const>
          </call>
          <column table="a" column="kod_abon_type" />
        </call>
      </where>
      <params />
    </query>
    <query name="kr_payer_list" class="1" timestamp="21.03.2017 01:52:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <params>
        <param type="array" name="kod_abon_type" />
      </params>
      <select>
        <column table="kr_payer" column="kodp" as="kodp" key="1" fixed="1" />
        <column table="kr_payer" column="nump" as="nump" key="0" />
        <column table="kr_payer" column="name" as="name" key="0" />
        <column table="kr_payer" column="inn" as="inn" key="0" />
      </select>
      <from>
        <query name="kr_payer" as="kr_payer" title="Абонент" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="kr_payer" column="kod_abon_type" />
            <useparam name="kod_abon_type" />
          </call>
        </call>
      </where>
    </query>
    <query name="nump_like" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <params>
        <param name="nump_s" type="string" />
        <param name="nump_po" type="string" />
      </params>
      <select>
        <call function="if" as="value" key="1" fixed="1">
          <call function="and">
            <call function="is not null">
              <call function="nvlu" as="value">
                <useparam name="nump_s" />
                <const>null</const>
              </call>
            </call>
            <call function="is null">
              <call function="nvlu" as="value">
                <useparam name="nump_po" />
                <const>null</const>
              </call>
            </call>
          </call>
          <useparam name="nump_s" />
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="kr_payer_nump_list" timestamp="27.09.2017 12:22:57" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <select>
        <column table="a" column="nump" group="1" key="1" as="id" />
        <column table="a" column="name" group="stragg" as="name" />
      </select>
      <from>
        <query name="kr_payer" as="a" title="Абонент" />
      </from>
    </query>
    <query name="tco_net_dep" class="1" timestamp="15.04.2025 14:33:58" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml" haskeys="1">
      <params>
        <param name="p_dep" type="number" />
      </params>
      <select>
        <column table="a" column="kodp" type="number" as="tco_net_kodp" key="1" fixed="1" />
        <column table="a" column="tco_net_name" type="string" as="tco_net_name" key="0" />
      </select>
      <from>
        <table name="tco_net_dep" as="a" view="1" />
      </from>
    </query>
    <query name="kr_pret_list_for_abon" class="1" title="Претензия" timestamp="07.08.2018 17:31:48" order="dat_form" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_pret.xml" haskeys="1">
      <params>
        <param name="kodp" type="number" />
      </params>
      <select>
        <column table="a" column="kod_pret" as="kod_pret" key="1" fixed="1" />
        <column table="a" column="name" vid="1" as="name" key="0" />
        <column table="a" column="dat_form" title="-" as="dat_form" key="0" />
      </select>
      <from>
        <query name="kr_pret" as="a" title="Претензия">
          <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="kr_pret" field="kod_dog" parent="kr_dogovor" back="kr_pret" title="Договор" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_dog" column="kodp" />
          <useparam name="kodp" />
        </call>
      </where>
      <order>
        <column column="dat_form" />
      </order>
    </query>
    <query name="kr_spras_vid_tehn" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_spras.xml" haskeys="1">
      <select>
        <column table="a" column="vid_tehn" type="number" as="vid_tehn" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Технология обработки" as="name" key="0" />
      </select>
      <from>
        <table name="kr_spras_vid_tehn" view="1" as="a" />
      </from>
    </query>
    <query name="kr_vist_day_pr_vist_av" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_vist_day.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" key="1" as="id" />
        <column table="a" column="name" title="Признак выставления аванса" type="string" as="name" />
      </select>
      <from>
        <table name="kr_vist_day_pr_vist_av" view="1" as="a" />
      </from>
    </query>
    <query name="ks_bank_list" order="name" class="1" timestamp="21.11.2016 17:18:13" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kodb" type="number" title="" key="1" as="kodb" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" />
        <call function="nvl" as="name" title="Наименование">
          <column table="a" column="name" />
          <column table="a" column="filial" />
        </call>
        <column table="a" column="bic" type="string" title="БИК" vid="1" as="bic" />
        <column table="a" column="adr" type="string" title="Адрес" as="adr" />
        <column table="a" column="ks" type="string" title="Корреспондентский счёт" as="ks" />
        <column table="a" column="p_ind" type="string" title="Индекс" as="p_ind" />
        <column table="a" column="telefon" type="string" title="Телефон" comment="телефон" as="telefon" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" />
        <column table="a" column="prim" type="string" title="Примечание" comment="примечание" as="prim" />
      </select>
      <from>
        <query name="ks_bank" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_bankpol_list" order="3,2" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_bankpol.xml" haskeys="1">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="kodbpol" as="kodbpol" key="1" fixed="1" />
        <column table="a" column="rs" as="rs" key="0" />
        <column table="kodb" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ks_bankpol" as="a">
          <link name="kodb" as="kodb" table="ks_bank" child="ks_bankpol" field="kodb" parent="ks_bank" back="ks_bankpol" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="pr_active" />
            <const>0</const>
          </call>
          <call function="or" optional="1">
            <call function="is null">
              <column table="a" column="dep" />
            </call>
            <call function="in">
              <column table="a" column="dep" />
              <useparam name="dep" />
            </call>
          </call>
        </call>
      </where>
      <order>
        <column column="3" />
        <column column="2" />
      </order>
    </query>
    <query name="ks_group_cust_parent_list" title="Группа потребителей" order="n_num_cust" class="1" timestamp="12.03.2019 11:17:33" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_group_cust.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group_cust" as="kod_group_cust" key="1" fixed="1" />
        <column table="a" column="num_gr" title="№" as="num_cust" key="0" />
        <column table="a" column="name" title="Группа потребителей" as="name" key="0" />
        <column table="a" column="prim" title="Примечание" as="prim" key="0" />
        <column table="a" column="num_cust" as="n_num_cust" key="0" />
      </select>
      <from>
        <query name="ks_group_cust" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="kod_gr_parent" />
          </call>
        </call>
      </where>
      <order>
        <column column="n_num_cust" />
      </order>
    </query>
    <query name="ks_group_cust_list" title="Подгруппа потребителей" class="1" timestamp="11.05.2017 22:24:33" order="num_cust" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_group_cust.xml" haskeys="1">
      <params>
        <param name="kod_group_cust_parent" type="array" />
      </params>
      <select>
        <column table="a" column="kod_group_cust" as="kod_group_cust" key="1" fixed="1" />
        <call function="trim" as="num_cust_str" title="№" vid="1" key="0">
          <call function="to_char" title="№">
            <column table="a" column="num_cust" />
          </call>
        </call>
        <column table="a" column="num_cust" format="F1" vid="1" as="num_cust" key="0" />
        <column table="a" column="name" title="Подгруппа потребителей" vid="1" as="name" key="0" />
        <column table="kod_group_cust_parent" column="name" as="parent_name" title="Группа" vid="1" key="0" />
        <column table="a" column="prim" title="Примечание" vid="1" as="prim" key="0" />
      </select>
      <from>
        <query name="ks_group_cust" as="a">
          <link name="kod_group_cust_parent" as="kod_group_cust_parent" table="ks_group_cust" child="ks_group_cust" field="kod_group_cust_parent" parent="ks_group_cust" back="ks_group_cust" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_gr_parent" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_gr_parent" />
            <useparam name="kod_group_cust_parent" />
          </call>
        </call>
      </where>
      <order>
        <column column="num_cust" />
      </order>
    </query>
    <query name="ks_group_cust_list_recursive" title="Подгруппа потребителей" class="1" timestamp="11.03.2019 22:19:26" order="num_cust" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_group_cust.xml" haskeys="1">
      <params>
        <param name="kod_group_cust_parent" type="array" />
      </params>
      <select>
        <column table="a" column="kod_group_cust" as="kod_group_cust" key="1" fixed="1" />
        <call function="trim" as="num_cust_str" title="№" vid="1" key="0">
          <call function="to_char" title="№">
            <column table="a" column="num_cust" />
          </call>
        </call>
        <column table="a" column="num_cust" format="F1" vid="1" as="num_cust" key="0" />
        <column table="a" column="name" title="Подгруппа потребителей" vid="1" as="name" key="0" />
        <column table="a" column="prim" title="Примечание" vid="1" as="prim" key="0" />
        <call function="connect_by_root" as="root_kod_group" key="0">
          <column table="a" column="kod_group_cust" />
        </call>
      </select>
      <from>
        <query name="ks_group_cust" as="a" />
      </from>
      <start>
        <call function="and">
          <call function="is null">
            <column table="a" column="kod_gr_parent" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_group_cust" />
            <useparam name="kod_group_cust_parent" />
          </call>
        </call>
      </start>
      <connect>
        <call function="=">
          <column table="a" column="kod_group_cust" prior="1" />
          <column table="a" column="kod_gr_parent" />
        </call>
      </connect>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_gr_parent" />
          </call>
        </call>
      </where>
      <order>
        <column column="num_cust" />
      </order>
    </query>
    <query name="ks_istfin_list" title="Источники финансирования" class="1" order="name" timestamp="18.11.2016 18:37:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_istfin.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ist" type="number" key="1" as="kod_ist" />
        <column table="a" column="name" type="string" title="Источники финансирования" as="name" />
      </select>
      <from>
        <query name="ks_istfin" as="a" title="Источники финансирования" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_kazn_list" order="name" class="1" timestamp="21.11.2016 12:51:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_kazn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kazn" type="number" key="1" as="kod_kazn" />
        <column table="a" column="name" type="string" title="Казначейство" comment="наименование" as="name" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" />
        <column table="a" column="rs" type="string" title="Расчётный счёт" as="rs" />
      </select>
      <from>
        <query name="ks_kazn" as="a" title="Казначейство" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_namedolzh_list" class="1" timestamp="17.11.2016 13:26:51" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_namedolzh.xml" haskeys="1">
      <select>
        <column table="a" column="kod_namedolzh" type="number" as="kod_namedolzh" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="ks_namedolzh" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_obj_fs_list" class="1" timestamp="22.11.2016 14:19:20" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_obj_fs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj_fs" type="number" as="kod_obj_fs" key="1" fixed="1" />
        <call function="||" as="name" key="0">
          <call function="if">
            <call function="=">
              <column table="a" column="tep_el" />
              <const>1</const>
            </call>
            <const>'Э '</const>
            <const>'Т '</const>
          </call>
          <column table="a" column="name" />
        </call>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="2-тепло/1-электр" as="tep_el" key="0" />
      </select>
      <from>
        <query name="ks_obj_fs" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_okved_tree" class="1" timestamp="08.08.2020 05:04:06" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_okved.xml" haskeys="1">
      <select>
        <column table="a" column="kod_okved" type="number" key="1" vid="1" column-visible="0" as="kod_okved" />
        <column table="a" column="okved" type="string" title="ОКВЭД" vid="1" as="okved" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" vid="1" as="name" />
        <column table="a" column="parent_kod_okved" type="number" comment="родительский оквед" vid="1" column-visible="0" as="parent_kod_okved" />
      </select>
      <from>
        <query name="ks_okved" as="a" />
      </from>
    </query>
    <query name="ks_otrasl_tree" class="1" timestamp="20.07.2018 16:19:12" title="Дерево отраслей" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_otrasl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_otrasl" as="kod_otrasl" key="1" fixed="1" />
        <call function="connect_by_root" as="root_kod_otrasl" key="0">
          <column table="a" column="kod_otrasl" />
        </call>
        <call function="connect_by_root" as="root_name" key="0">
          <column table="a" column="name" />
        </call>
      </select>
      <from>
        <query name="ks_otrasl" as="a" title="Отрасли" />
      </from>
      <start>
        <call function="=">
          <column table="a" column="parent" />
          <const type="number">-1</const>
        </call>
      </start>
      <connect>
        <call function="=">
          <column table="a" column="kod_otrasl" prior="1" />
          <column table="a" column="parent" />
        </call>
      </connect>
    </query>
    <query name="ks_otrasl_root" class="1" timestamp="20.07.2018 16:21:23" title="Дерево отраслей" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_otrasl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_otrasl" as="kod_otrasl" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ks_otrasl" as="a" title="Отрасли" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="parent" />
          <const type="number">-1</const>
        </call>
      </where>
    </query>
    <query name="ks_tarif_bu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tarif_bu" type="number" as="kod_tarif_bu" key="1" fixed="1" />
        <column table="a" column="kod_tarif_bu_gr" type="number" as="kod_tarif_bu_gr" reference="ks_tarif_bu" refcol="kod_tarif_bu" key="0" />
        <column table="a" column="npp" type="string" as="npp" key="0" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="ks_tarif_bu" as="a" view="1" />
        <query name="ks_tarif_bu" as="kod_tarif_bu_gr" join="left outer" dname="ks_tarif_bu">
          <call function="=">
            <column table="kod_tarif_bu_gr" column="kod_tarif_bu" />
            <column table="a" column="kod_tarif_bu_gr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tarif_ext" stored="vr_ks_tarif_ext" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml" haskeys="1">
      <select>
        <column table="a" column="tarif" as="tarif" key="1" fixed="1" />
        <call function="case" type="number" as="kod_tarif_bu" key="0">
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>557</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>557</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>830</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>830</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1330</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1330</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1331</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1331</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1342</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1342</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>3339</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>3339</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>3349</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>3349</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>5641</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>5641</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>5677</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>5677</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6065</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6065</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6071</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6071</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6077</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6077</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6083</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6083</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6123</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6123</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6124</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>6124</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170008</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170008</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170014</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170014</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170020</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170020</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180068</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180068</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in" name="npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180144</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180144</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180182</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180182</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180144</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180144</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180182</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180182</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180201</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180201</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180220</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180220</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7005</const>
                </call>
                <call function="array">
                  <const>7030</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7005</const>
                </call>
                <call function="array">
                  <const>7030</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7105</const>
                </call>
                <call function="array">
                  <const>7130</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7105</const>
                </call>
                <call function="array">
                  <const>7130</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7205</const>
                </call>
                <call function="array">
                  <const>7230</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7205</const>
                </call>
                <call function="array">
                  <const>7230</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7505</const>
                </call>
                <call function="array">
                  <const>7330</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7505</const>
                </call>
                <call function="array">
                  <const>7330</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7605</const>
                </call>
                <call function="array">
                  <const>7615</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7605</const>
                </call>
                <call function="array">
                  <const>7615</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7705</const>
                </call>
                <call function="array">
                  <const>7730</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7705</const>
                </call>
                <call function="array">
                  <const>7730</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7805</const>
                </call>
                <call function="array">
                  <const>7830</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7805</const>
                </call>
                <call function="array">
                  <const>7830</const>
                </call>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>730</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>730</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>829</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>829</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1321</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>1321</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>4635</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>4635</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>4941</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>4941</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180163</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180163</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7035</const>
                </call>
                <call function="array">
                  <const>7090</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7035</const>
                </call>
                <call function="array">
                  <const>7090</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7135</const>
                </call>
                <call function="array">
                  <const>7190</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7135</const>
                </call>
                <call function="array">
                  <const>7190</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7235</const>
                </call>
                <call function="array">
                  <const>7290</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7235</const>
                </call>
                <call function="array">
                  <const>7290</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7335</const>
                </call>
                <call function="array">
                  <const>7390</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7335</const>
                </call>
                <call function="array">
                  <const>7390</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7535</const>
                </call>
                <call function="array">
                  <const>7560</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7535</const>
                </call>
                <call function="array">
                  <const>7560</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7635</const>
                </call>
                <call function="array">
                  <const>7675</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7635</const>
                </call>
                <call function="array">
                  <const>7675</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7735</const>
                </call>
                <call function="array">
                  <const>7760</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7735</const>
                </call>
                <call function="array">
                  <const>7760</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="between">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7835</const>
                </call>
                <call function="array">
                  <const>7860</const>
                </call>
              </call>
              <call function="is child between npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7835</const>
                </call>
                <call function="array">
                  <const>7860</const>
                </call>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7401</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="is null">
                    <column table="a" column="tip_tarif_sost" />
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>7401</const>
                </call>
              </call>
            </call>
            <const>4</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>150000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>150000</const>
                </call>
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>160000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>160000</const>
                </call>
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>170000</const>
                </call>
              </call>
            </call>
            <const>5</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>130000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>130000</const>
                </call>
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>140000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>140000</const>
                </call>
              </call>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>110000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>110000</const>
                </call>
              </call>
            </call>
            <const>7</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180000</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>180000</const>
                </call>
              </call>
            </call>
            <const>8</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>120000</const>
                </call>
              </call>
              <call function="and">
                <call function="is child npp">
                  <call function="if">
                    <call function="=">
                      <column table="a" column="tip_tarif_sost" />
                      <const>2</const>
                    </call>
                    <column table="a" column="npp" />
                  </call>
                  <call function="array">
                    <const>120000</const>
                  </call>
                </call>
                <call function="is not child npp">
                  <call function="if">
                    <call function="=">
                      <column table="a" column="tip_tarif_sost" />
                      <const>2</const>
                    </call>
                    <column table="a" column="npp" />
                  </call>
                  <call function="array">
                    <const>120005</const>
                  </call>
                </call>
              </call>
            </call>
            <const>10</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>120005</const>
                </call>
              </call>
              <call function="is child npp">
                <call function="if">
                  <call function="=">
                    <column table="a" column="tip_tarif_sost" />
                    <const>2</const>
                  </call>
                  <column table="a" column="npp" />
                </call>
                <call function="array">
                  <const>120005</const>
                </call>
              </call>
            </call>
            <const>11</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
      </select>
      <from>
        <query name="ks_tarif" as="a" />
        <query name="ks_tarif_bu" as="kod_tarif_bu" join="left outer" dname="ks_tarif_ext">
          <call function="=">
            <column table="kod_tarif_bu" column="kod_tarif_bu" />
            <column table="this" column="kod_tarif_bu" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tarif_list" class="1" timestamp="12.09.2018 14:43:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml" haskeys="1">
      <select>
        <column table="a" column="tarif" as="tarif" key="1" fixed="1" />
        <column table="a" column="npp" as="npp" key="0" />
        <column table="tip_tarif_sost" column="abbr" as="abbr" key="0" />
        <column table="a" column="sname" as="sname" key="0" />
        <column table="a" column="tarif_parent" as="tarif_parent" key="0" />
      </select>
      <from>
        <query name="ks_tarif" as="a">
          <link name="tip_tarif_sost" as="tip_tarif_sost" table="kk_tarif_sost" child="ks_tarif" field="tip_tarif_sost" parent="kk_tarif_sost" back="ks_tarif" />
        </query>
      </from>
    </query>
    <query name="ks_tarif_list_ul" class="1" timestamp="23.11.2016 13:02:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml" haskeys="1">
      <select>
        <column table="a" column="tarif" as="tarif" key="1" fixed="1" />
        <column table="a" column="sname" as="sname" key="0" />
        <column table="a" column="npp" as="npp" key="0" />
        <column table="tip_tarif_sost" column="abbr" as="abbr" key="0" />
        <column table="a" column="tarif_parent" as="tarif_parent" key="0" />
      </select>
      <from>
        <query name="ks_tarif" as="a">
          <link name="tip_tarif_sost" as="tip_tarif_sost" table="kk_tarif_sost" child="ks_tarif" field="tip_tarif_sost" parent="kk_tarif_sost" back="ks_tarif" />
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="a" column="byt" />
        </call>
      </where>
    </query>
    <query name="ks_tar_free_rate_gtp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="g" column="kod_gtp" as="kod_gtp" key="1"></column>
        <column table="g" column="ym" as="ym" key="0"></column>
        <call function="nvl" type="number" as="rsv_nebalans" title="Цена РСВ небаланс руб./квтч." key="0">
          <column table="a" column="rsv_nebalans"></column>
          <column table="b" column="rsv_nebalans"></column>
        </call>
        <call function="nvl" type="number" as="br_nebalans" title="Цена БР небаланс руб./квтч." key="0">
          <column table="a" column="br_nebalans"></column>
          <column table="b" column="br_nebalans"></column>
        </call>
        <call function="nvl" type="number" as="rate_cfr" title="Иные услуги руб./квтч." key="0">
          <column table="a" column="rate_cfr"></column>
          <column table="b" column="rate_cfr"></column>
        </call>
      </select>
      <from>
        <query name="ks_tar_free_rate_gtp_ym" as="g" />
        <query name="ks_tar_free_rate_gtp_val" as="a" join="left outer" dname="ks_tar_free_rate_gtp">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_gtp" />
              <column table="g" column="kod_gtp" />
            </call>
            <call function="=">
              <column table="a" column="ym" />
              <column table="g" column="ym" />
            </call>
          </call>
        </query>
        <query name="ks_tar_free_rate_gtp_null" as="b" join="left outer" dname="ks_tar_free_rate_gtp">
          <call function="=">
            <column table="b" column="ym" />
            <column table="g" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tar_free_rate_gtp_ym" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="a" column="kod_gtp" as="kod_gtp" key="1"></column>
        <column table="b" column="ym" as="ym" key="0"></column>
      </select>
      <from>
        <query name="hs_gtp" as="a" />
        <query name="ks_tar_free_rate_ym" as="b" join="cross" />
      </from>
    </query>
    <query name="ks_tar_free_rate_ym" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1"></column>
      </select>
      <from>
        <query name="ks_tar_free_rate" as="a" />
      </from>
    </query>
    <query name="ks_tar_free_rate_gtp_val" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="b" column="kod_gtp" group="1" as="kod_gtp" key="1" fixed="1"></column>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1"></column>
        <column table="a" column="rsv_nebalans" group="max" as="rsv_nebalans" key="0"></column>
        <column table="a" column="br_nebalans" group="max" as="br_nebalans" key="0"></column>
        <column table="a" column="rate_cfr" group="max" as="rate_cfr" key="0"></column>
      </select>
      <from>
        <query name="ks_tar_free_rate" as="a">
          <link name="kod_tar_free" as="b" table="ks_tar_free" child="ks_tar_free_rate" field="kod_tar_free" parent="ks_tar_free" back="ks_tar_free_rate"></link>
        </query>
      </from>
    </query>
    <query name="ks_tar_free_rate_gtp_null" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="a" column="ym" group="1" as="ym" key="1" fixed="1"></column>
        <column table="a" column="rsv_nebalans" group="max" as="rsv_nebalans" key="0"></column>
        <column table="a" column="br_nebalans" group="max" as="br_nebalans" key="0"></column>
        <column table="a" column="rate_cfr" group="max" as="rate_cfr" key="0"></column>
      </select>
      <from>
        <query name="ks_tar_free_rate" as="a">
          <link name="kod_tar_free" as="b" table="ks_tar_free" child="ks_tar_free_rate" field="kod_tar_free" parent="ks_tar_free" back="ks_tar_free_rate"></link>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="b" column="kod_gtp" />
        </call>
      </where>
    </query>
    <query name="ks_tf_nastr_rep_uved" class="1" timestamp="18.08.2017 15:03:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tf_nastr_rep.xml" haskeys="1">
      <select>
        <column table="a" column="dep" type="number" title="" comment="код подразделения" group="1" key="1" as="dep" />
        <column table="a" column="virt_avans" type="number" title="Использование в расчетах задолженности виртуальных авансов" comment="использование в расчетах задолженности виртуальных авансов (казань эл-во): 1-использовать" group="max" agg="max" controlType="UICheck" as="virt_avans" />
        <column table="a" column="pereplata" type="number" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" group="max" agg="max" title="Учитывать переплаты прошлых периодов" controlType="UICheck" as="pereplata" />
        <column table="a" column="pereplata_current" type="number" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" group="max" agg="max" title="Учитывать переплаты текущего периода" controlType="UICheck" as="pereplata_current" />
        <column table="a" column="pereplata_future" type="number" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" group="max" agg="max" title="Учитывать переплаты будущих периодов" controlType="UICheck" as="pereplata_future" />
        <column table="a" column="oplata_virt_avans" type="number" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" group="max" agg="max" title="Вычислять оплату для вирт. авансов" controlType="UICheck" as="oplata_virt_avans" />
        <column table="nastr_rasch" column="is_opl_virt_av" as="opl_virt_av" group="max" />
        <call function="()" type="number" as="opl_virt_av" group="max" agg="max">
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="ks_tf_nastr_rep" as="a" />
        <query name="kr_org" as="dep" join="left outer" dname="ks_tf_nastr_rep_uved">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="vr_nastr_uved" as="nastr_rasch" join="left outer" dname="ks_tf_nastr_rep_uved">
          <call function="=">
            <column table="nastr_rasch" column="dep" />
            <column table="this" column="dep" group="" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="!=nvl">
            <column table="a" column="pr_byt" />
            <const>1</const>
          </call>
          <call function="=nvl">
            <column table="a" column="tep_el" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ks_vdog_list" class="1" timestamp="17.11.2016 18:13:32" order="name_ext" comment="like centura" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_vdog.xml" haskeys="1">
      <params>
        <param type="array" name="tep_el" />
        <param type="array" name="dep">
          <call function="array">
            <const>102276621</const>
          </call>
        </param>
      </params>
      <select>
        <column table="a" column="kod_vdog" type="number" comment="код вида договора" as="kod_vdog" key="1" />
        <call function="||" as="name_ext" title="Вид документа" key="0">
          <call function="nvl">
            <column table="kod_parent" column="sname" />
            <column table="podr" column="sname" />
          </call>
          <const type="string">' '</const>
          <column table="tep_el" column="sname" />
          <const type="string">' '</const>
          <column table="a" column="name" />
        </call>
      </select>
      <from>
        <query name="ks_vdog" as="a" title="Вид договора">
          <link name="tep_el" as="tep_el" table="kk_tep_el" child="ks_vdog" field="tep_el" parent="kk_tep_el" back="ks_vdog" />
          <link name="podr" as="podr" table="kr_org" child="ks_vdog" field="podr" parent="kr_org" back="ks_vdog">
            <link name="kod_parent" as="kod_parent" table="kr_org" child="kr_org" field="kod_parent" parent="kr_org" back="kr_org" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="tep_el" />
            <useparam name="tep_el" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="podr" />
            <query>
              <select>
                <column table="a" column="kodp" as="kodp" />
              </select>
              <from>
                <query name="kr_org_branch2" as="a">
                  <withparams>
                    <useparam name="dep" />
                  </withparams>
                </query>
              </from>
            </query>
          </call>
        </call>
      </where>
      <order>
        <column column="name_ext" />
      </order>
    </query>
    <query name="k_house-list" class="1" timestamp="01.08.2017 18:10:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <params>
        <param name="kod_adr_m" type="array" />
        <param name="kod_street" type="array" />
        <param name="kod_chet" type="array" />
      </params>
      <select>
        <column table="a" column="kodd" as="kodd" key="1" fixed="1" />
        <column table="a" column="house_ext_name" as="house_ext_name" key="0" />
        <column table="a" column="house_name" as="house_name" key="0" />
        <column table="kod_m" column="name_p" title="Населенный пункт" as="name_p" key="0" />
      </select>
      <from>
        <query name="k_house" as="a">
          <link name="kod_s" as="kod_s" table="k_strits" child="k_house" field="kod_s" parent="k_strits" back="k_house">
            <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="kod_r" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_s" />
            <useparam name="kod_street" />
          </call>
          <call function="in" optional="1">
            <column table="kod_s" column="kod_m" />
            <useparam name="kod_adr_m" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_chet" />
            <useparam name="kod_chet" />
          </call>
        </call>
      </where>
    </query>
    <query name="adress_type_fiz" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <select>
        <column table="a" column="kod_adress_type" type="number" as="kod_adress_type" key="1" fixed="1"></column>
        <column table="a" column="adress_type_name" type="string" title="Тип адреса" as="adress_type_name" key="0"></column>
      </select>
      <from>
        <table name="adress_type_fiz_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="k_house_chet" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <select>
        <column table="a" column="kod_chet" type="number" as="kod_chet" key="1" fixed="1"></column>
        <column table="a" column="chet_name" type="string" title="Сторона улицы" as="chet_name" key="0"></column>
      </select>
      <from>
        <table name="k_house_chet_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="k_house-flats-list" class="1" timestamp="14.06.2017 11:33:35" order="npp" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <params>
        <param name="kod_adr_m" type="array" />
        <param name="kod_street" type="array" />
        <param name="kod_chet" type="array" />
        <param name="kodd" type="array" />
      </params>
      <select>
        <column table="a" column="kodd" as="kodd" key="1" fixed="1" />
        <column table="a" column="flat" title="Квартира" as="flat" key="0" />
        <column table="a" column="house_ext_name" as="house_ext_name" key="0" />
        <column table="a" column="nd" as="nd" key="0" />
        <column table="kod_m" column="name_p" title="Населенный пункт" as="name_p" key="0" />
        <call function="row_number" as="npp" title="-" key="0">
          <call function="order by simple">
            <column table="kod_m" column="name_p" title="Населенный пункт" />
            <column table="kod_s" column="name" title=" " />
            <column table="a" column="nd" />
            <column table="a" column="flat" />
          </call>
        </call>
      </select>
      <from>
        <query name="k_house" as="a">
          <link name="kod_r" as="kod_r" table="k_house" child="k_house" field="kod_r" parent="k_house" back="k_house">
            <link name="kod_s" as="kod_s" table="k_strits" child="k_house" field="kod_s" parent="k_strits" back="k_house">
              <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_r" />
          </call>
          <call function="=">
            <column table="a" column="kod_td" />
            <const>30</const>
          </call>
          <call function="in" optional="1">
            <column table="kod_r" column="kod_s" />
            <useparam name="kod_street" />
          </call>
          <call function="in" optional="1">
            <column table="kod_s" column="kod_m" />
            <useparam name="kod_adr_m" />
          </call>
          <call function="in" optional="1">
            <column table="kod_r" column="kod_chet" />
            <useparam name="kod_chet" />
          </call>
          <call function="in" optional="1">
            <column table="kod_r" column="kodd" />
            <useparam name="kodd" />
          </call>
        </call>
      </where>
      <order>
        <column column="npp" />
      </order>
    </query>
    <query name="k_house-list2" class="1" timestamp="02.08.2017 13:10:56" comment="с сортировкой для Барнаула 41439(16)" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <params>
        <param name="kod_adr_m" type="array" />
        <param name="kod_street" type="array" />
        <param name="kod_chet" type="array" />
      </params>
      <select>
        <column table="a" column="kodd" as="kodd" key="1" fixed="1" />
        <column table="a" column="house_ext_name" as="house_ext_name" key="0" />
        <column table="a" column="house_name" as="house_name" key="0" />
        <column table="kod_m" column="name_p" title="Населенный пункт" as="name_p" key="0" />
        <call function="row_number" as="npp" title="-" key="0">
          <call function="order by simple">
            <column table="kod_m" column="name_p" />
            <column table="kod_s" column="name" />
            <column table="a" column="nd" />
          </call>
        </call>
      </select>
      <from>
        <query name="k_house" as="a">
          <link name="kod_s" as="kod_s" table="k_strits" child="k_house" field="kod_s" parent="k_strits" back="k_house">
            <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="kod_r" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_s" />
            <useparam name="kod_street" />
          </call>
          <call function="in" optional="1">
            <column table="kod_s" column="kod_m" />
            <useparam name="kod_adr_m" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_chet" />
            <useparam name="kod_chet" />
          </call>
        </call>
      </where>
    </query>
    <query name="k_house-list3" class="1" timestamp="29.01.2019 16:36:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml" haskeys="1">
      <select>
        <column table="a" column="kodd" as="kodd" key="1" fixed="1" />
        <column table="a" column="house_ext_name" as="house_ext_name" key="0" />
        <column table="a" column="house_name" as="house_name" key="0" />
        <column table="kod_s" column="name" as="name" key="0" />
        <column table="kod_m" column="name_p" title="Населенный пункт" as="name_p" key="0" />
      </select>
      <from>
        <query name="k_house" as="a">
          <link name="kod_s" as="kod_s" table="k_strits" child="k_house" field="kod_s" parent="k_strits" back="k_house">
            <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
          </link>
        </query>
      </from>
    </query>
    <query name="k_strits-list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_strits.xml" haskeys="1">
      <params>
        <param name="kod_adr_m" type="array" />
      </params>
      <select>
        <column table="a" column="kod" as="kod" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
        <column table="kod_m" column="name_p" title="Населенный пункт" as="name_p" key="0" />
      </select>
      <from>
        <query name="k_strits" as="a">
          <link name="kod_m" as="kod_m" table="adr_m" child="k_strits" field="kod_m" parent="adr_m" back="k_strits" title="Административно территориальная единица" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="kod_m" />
            <useparam name="kod_adr_m" />
          </call>
        </call>
      </where>
    </query>
    <query name="nk_tcalc_byt-list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\nk_tcalc.xml" haskeys="1">
      <select>
        <column table="a" column="calctype" type="number" title="" as="calctype" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Тип расчёта" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
      </select>
      <from>
        <query name="nk_tcalc" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="tep_el" />
            <const>(0,4)</const>
          </call>
        </call>
      </where>
    </query>
    <query name="price_cat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\nr_account.xml" haskeys="1">
      <select>
        <column table="a" column="category" type="number" as="category" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Ценовая категория" as="name" key="0" />
      </select>
      <from>
        <table name="price_cat" as="a" view="1" />
      </from>
    </query>
    <query name="qk_vidtn_list" class="1" order="name" timestamp="23.11.2016 17:55:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\qk_vidtn.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="qk_vidtn" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="rr_refprop_dog_103" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook"></column>
            <const>103</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_62" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook"></column>
            <const>62</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_102" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook"></column>
            <const>102</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_81" class="1" timestamp="09.03.2022 22:00:13" title="Группы потребителей" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>81</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_101" class="1" timestamp="09.03.2022 22:00:34" title="Группы потребителей по реализации" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>101</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_127" class="1" timestamp="17.02.2022 16:20:46" title="Группа клиентов" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>127</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_123" class="1" timestamp="17.02.2022 16:36:47" title="Отрасль" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>123</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_125" class="1" timestamp="17.02.2022 19:45:26" title="Тип учета ЮЛ" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>125</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_141" class="1" title="Группы договоров к макету 4.41" timestamp="22.09.2022 11:57:33" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>141</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_102_7" class="1" comment="Пользовательский спр-к: Текущее состояние по договору =&gt; Крупный" timestamp="05.11.2024 18:46:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_dog" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>102</const>
          </call>
          <call function="=">
            <column table="kod_refcode" column="num" />
            <const>7</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_refprop_dog_81_ryaz" class="1" title="Группы потребителей" comment="Группы потребителей для отчета 47а" timestamp="05.01.2025 16:39:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="objid" as="kod_numobj" group="1" key="1" fixed="1" />
        <column table="a" column="kod_refcode" group="max" as="kod_refcode" key="0" />
        <column table="kod_refcode" column="num" group="max" as="num" key="0" />
      </select>
      <from>
        <query name="rr_refprop" as="a">
          <link name="kod_refcode" as="kod_refcode" table="rs_refcode" child="rr_refprop" field="kod_refcode" parent="rs_refcode" back="rr_refprop" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_refcode" column="kod_refbook" />
            <const>81</const>
          </call>
          <call function="=">
            <column table="a" column="kod_refobject" />
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="rr_uaa_read" timestamp="05.06.2017 13:29:58" class="1" comment="Емцов - переписал и проверил" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rr_userarea_access.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" as="podr" group="1" key="1" fixed="1" />
        <call function="if" as="pr_5_acc" type="number" key="0">
          <call function="!=0">
            <call function="if" type="number" group="max">
              <call function="=">
                <column table="a" column="kod_area" />
                <const>5</const>
              </call>
              <column table="a" column="kod_access" />
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query as="a">
          <union>
            <query>
              <select>
                <column table="a" column="kod_area" as="kod_area" />
                <column table="a" column="kodp" as="kodp" />
                <column table="a" column="kod_access" as="kod_access" />
              </select>
              <from>
                <query name="rr_userarea_access" as="a" />
              </from>
              <where>
                <call function="!=">
                  <column table="a" column="kodp" />
                  <const>0</const>
                </call>
              </where>
            </query>
            <query>
              <select>
                <column table="a" column="kod_area" as="kod_area" />
                <column table="kodp" column="kodp" as="kodp" />
                <column table="a" column="kod_access" as="kod_access" />
              </select>
              <from>
                <query name="rr_userarea_access" as="a" />
                <query name="kr_org" join="inner" as="kodp">
                  <call function="=">
                    <column table="kodp" column="kod_ecls" />
                    <const>4</const>
                  </call>
                </query>
              </from>
              <where>
                <call function="=">
                  <column table="a" column="kodp" />
                  <const>0</const>
                </call>
              </where>
            </query>
          </union>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="this" column="podr" />
        </call>
      </where>
    </query>
    <query name="rs_esys_tepel" timestamp="09.06.2016 17:58:39" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rs_esys.xml">
      <select>
        <call function="decode" as="value" type="number" key="0">
          <column table="rs_esys" column="teplo" />
          <const>1</const>
          <const>2</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="rs_esys" as="rs_esys" />
      </from>
    </query>
    <query name="rs_esys_is_1" timestamp="17.05.2021 16:10:21" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rs_esys.xml">
      <select>
        <call function="decode" as="value" type="number" key="0">
          <column table="rs_esys" column="kod_esys" />
          <const>1</const>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="rs_esys" as="rs_esys" />
      </from>
    </query>
    <query name="rs_esys_is_23" timestamp="04.07.2017 17:08:21" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rs_esys.xml">
      <select>
        <call function="decode" as="value" type="number" key="0">
          <column table="rs_esys" column="kod_esys" />
          <const>23</const>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="rs_esys" as="rs_esys" />
      </from>
    </query>
    <query name="p_gr_potr_nas" title="Группа потребления население э/э (польз.спр.)" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rs_refcode.xml" haskeys="1">
      <select>
        <column table="a" column="kod_refcode" as="kod_gr_potr_nas" key="1" />
        <column table="a" column="name" as="name"></column>
        <call function="if" as="pr_iku_rso" type="number">
          <call function="in">
            <column table="a" column="kod_refcode" />
            <call function="array">
              <const>356</const>
              <const>359</const>
              <const>354</const>
              <const>355</const>
            </call>
          </call>
          <const>1</const>
          <call function="if">
            <call function="in">
              <column table="a" column="kod_refcode" />
              <call function="array">
                <const>363</const>
                <const>364</const>
                <const>361</const>
                <const>362</const>
              </call>
            </call>
            <const>2</const>
            <const>0</const>
          </call>
        </call>
      </select>
      <from>
        <query name="rs_refcode" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_refbook"></column>
          <const>103</const>
        </call>
      </where>
    </query>
    <query name="sk_edizm_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_edizm.xml" haskeys="1">
      <select>
        <column table="a" column="edizm" type="number" title="" as="edizm" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
      </select>
      <from>
        <query name="sk_edizm" as="a"></query>
      </from>
    </query>
    <query name="sk_nachisl_teplo" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml" haskeys="1">
      <select>
        <column table="a" column="vid_t_teplo" type="number" as="vid_t_teplo" key="1" fixed="1" />
        <column table="a" column="vid_t_gr" type="number" as="vid_t_gr" reference="sk_nachisl_gr_teplo" refcol="vid_t_gr" key="0" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="sk_nachisl_teplo" as="a" view="1" />
        <query name="sk_nachisl_gr_teplo" as="vid_t_gr" join="left outer" dname="sk_nachisl_teplo">
          <call function="=">
            <column table="a" column="vid_t_gr"></column>
            <column table="vid_t_gr" column="vid_t_gr"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="sk_nachisl_gr_teplo" class="1" timestamp="21.12.2016 21:30:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml" haskeys="1">
      <select>
        <column table="a" column="vid_t_gr" type="number" as="vid_t_gr" key="1" fixed="1" />
        <column table="a" column="name" type="string" as="name" key="0" />
      </select>
      <from>
        <table name="sk_nachisl_gr_teplo" as="a" view="1" />
      </from>
    </query>
    <query name="sk_nachisl(vidreal)" class="1" timestamp="11.06.2016 14:01:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml" haskeys="1">
      <params>
        <param name="vid_real" type="array" />
      </params>
      <select>
        <column table="a" column="vid_t" as="vid_t" key="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
      </select>
      <from>
        <query name="sk_nachisl" as="a" title="Вид начисления" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="vid_real" />
            <useparam name="vid_real" />
          </call>
        </call>
      </where>
    </query>
    <query name="sk_type_opl_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_type_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
      </select>
      <from>
        <query name="sk_type_opl" as="a" title="Тип оплаты"></query>
      </from>
    </query>
    <query name="sk_vid_avans_list" class="1" timestamp="22.11.2016 11:23:00" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_vid_avans.xml" haskeys="1">
      <select>
        <column table="a" column="vid_avans" type="number" title="" comment="код аванса" as="vid_avans" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="наимен.промеж.платежа или аванса" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
      </select>
      <from>
        <query name="sk_vid_avans" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="sk_vid_real_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="1" fixed="1"></column>
        <column table="a" column="sname" type="string" title="Вид реализации" as="sname" key="0"></column>
      </select>
      <from>
        <query name="sk_vid_real" as="a" title="Вид реализации"></query>
      </from>
    </query>
    <query name="sk_vid_real_list_no_avans" class="1" timestamp="31.01.2017 13:25:55" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" key="1" as="vid_real" />
        <column table="a" column="sname" type="string" title="Вид реализации" as="sname" />
      </select>
      <from>
        <query name="sk_vid_real" as="a" title="Вид реализации" />
      </from>
      <where>
        <call function="not in">
          <column table="a" column="vid_real" type="number" title="" />
          <call function="array">
            <const>1</const>
            <const>0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sk_vid_real_list_main" class="1" timestamp="03.10.2016 23:50:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="1" fixed="1" />
        <column table="a" column="sname" type="string" title="Вид реализации" as="sname" key="0" />
      </select>
      <from>
        <query name="sk_vid_real" as="a" title="Вид реализации" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="vid_real" type="number" title="" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sk_vid_real_2" class="1" timestamp="03.10.2016 23:50:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="1" fixed="1" />
        <column table="a" column="sname" type="string" title="Вид реализации" as="sname" key="0" />
      </select>
      <from>
        <query name="sk_vid_real" as="a" title="Вид реализации" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="vid_real" type="number" title="" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="spr_mvt_3" title="Группы мощности" comment="Деление на 3 группы" timestamp="19.09.2023 15:24:21" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\spr_mvt_3.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="id" type="number" key="1" fixed="1">1</const>
                <const as="name" type="string" key="0">'не менее 10 МВт '</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'от 670 кВт до 10 МВт'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>3</const>
                <const>'до 670 кВт'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="sr_aotch_norm_av_av" timestamp="25.02.2018 20:27:32" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <call function="ym end time" as="dat_dolg_norm" dimension="dat_dolg_norm">
          <column table="kod_sf" column="rym" />
        </call>
        <call function="ym end time" as="dat_vozn_norm" dimension="dat_vozn_norm">
          <column table="kod_sf" column="rym" />
        </call>
        <column table="a" column="nach_av_norm" agg="sum" is-fact="1" fact="sr_aotch_norm_av_nach" as="nach_av_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" />
        <call function="if" as="ym_vist" type="number" dimension="ym_vist">
          <call function="in">
            <column table="a" column="perc" />
            <call function="array">
              <const>80</const>
              <const>90</const>
              <const>100</const>
            </call>
          </call>
          <call function="ym add month">
            <column table="kod_sf" column="ym" />
            <const>-1</const>
          </call>
          <column table="kod_sf" column="ym" />
        </call>
      </select>
      <from>
        <query name="sr_aotch_norm_av" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_aotch_norm_av_av">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_aotch_norm_av1" timestamp="11.03.2021 12:22:34" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml">
      <select>
        <column table="kod_dog" column="kod_dog" as="kod_dog" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <column table="vid_real" column="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" />
        <fact column="sr_avans_otch_avans" as="nach_av" table="av" is-fact-use="1" />
        <fact column="fin_ul_nachisl_osn_rm" as="nach_osn" table="osn" is-fact-use="1" />
        <call function="if" as="nach_osn_bez_per" type="number">
          <call function="=">
            <column table="kod_sf" column="ym" />
            <column table="ym_vozn" column="val" as="ym_vozn" />
          </call>
          <column table="this" column="nach_osn" />
        </call>
        <call function="row_number" type="number" as="pr_first_sf">
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
          <call function="order by 2">
            <call function="asc">
              <call function="if" type="number">
                <call function="=">
                  <column table="kod_sf" column="ym" />
                  <column table="ym_vozn" column="val" as="ym_vozn" />
                </call>
                <column table="this" column="kod_sf" />
              </call>
            </call>
          </call>
        </call>
        <call function="over" as="nach_av_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="over" as="nach_osn_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_osn_bez_per" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="if" as="nach_av_for_first_sf" type="number">
          <call function="and">
            <call function="=1">
              <column table="this" column="pr_first_sf" />
            </call>
            <call function="=">
              <column table="kod_sf" column="ym" />
              <column table="ym_vozn" column="val" as="ym_vozn" />
            </call>
          </call>
          <column table="this" column="nach_av_cm" />
        </call>
        <call function="greatest" as="nach_av_norm">
          <call function="smallest nvl" type="number">
            <column table="this" column="nach_av_for_first_sf" />
            <column table="this" column="nach_osn_cm" />
          </call>
          <const>0</const>
        </call>
        <call function="-nvl" as="nach_osn_norm">
          <column table="this" column="nach_osn" />
          <column table="this" column="nach_av_norm" />
        </call>
        <call function="over" as="perc" type="number">
          <call function="sum">
            <fact column="sr_avans_otch_perc" table="av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <dimset as="osn">
            <link name="kod_dog" />
            <link name="kod_sf" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>2</const>
                  <const>3</const>
                </call>
              </call>
            </where>
          </dimset>
          <dimset as="av">
            <link name="kod_dog" />
            <link name="vid_real" />
            <link name="ym_vozn" />
          </dimset>
        </qube>
      </from>
    </query>
    <query name="sr_aotch_norm_av" timestamp="11.03.2021 12:28:26" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" intrval="FREQ=DAILY; INTERVAL=1" class="1" stored="vv_sr_aotch_norm_av" use-repository="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml">
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="0" />
        <column table="a" column="nach_av_norm" as="nach_av_norm" key="0" />
        <column table="a" column="nach_osn_norm" as="nach_osn_norm" key="0" />
        <column table="a" column="perc" as="perc" key="0" />
      </select>
      <from>
        <query name="sr_aotch_norm_av1" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_aotch_norm_av">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="a" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_aotch_norm_av_osn" timestamp="25.02.2018 20:33:12" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <column table="kod_sf" column="dat_dolg_norm" dimension="dat_dolg_norm" as="dat_dolg_norm" />
        <column table="kod_sf" column="dat_dolg_norm" dimension="dat_vozn_norm" as="dat_vozn_norm" />
        <column table="a" column="nach_osn_norm" fact="sr_aotch_norm_osn_nach" agg="sum" as="nach_osn_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" is-final-dimension="1" is-private-dimension="1" />
        <call as="ym_vist" function="ym add month" dimension="ym_vist" is-final-dimension="1" is-private-dimension="1">
          <column table="kod_sf" column="ym" />
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="sr_aotch_norm_av" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_aotch_norm_av_osn">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_aotch_norm_av_no1" timestamp="24.02.2021 15:14:42" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml">
      <select>
        <column table="kod_dep" column="kodp" as="dep" />
        <column table="kod_dog" column="kod_dog" as="kod_dog" />
        <column table="sr_avans_otch" column="kod_av" as="kod_av" />
        <column table="sr_avans_otch" column="ym" as="ym" />
        <column table="sr_avans_otch" column="rym" as="rym" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <column table="vid_real" column="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" />
        <fact column="sr_avans_otch_avans" as="nach_av" table="av" is-fact-use="1" />
        <fact column="sr_facvip_ym_max" table="osn" as="pr_osn" is-fact-use="1" />
        <call function="over" as="pr_osn_cm" type="number">
          <call function="max">
            <column table="this" column="pr_osn" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="over" as="perc" type="number">
          <call function="sum">
            <fact column="sr_avans_otch_perc" table="av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="over" as="pr_close" type="number">
          <call function="max">
            <fact table="cl" column="kr_calc_pr_close" />
          </call>
          <call function="partition by">
            <column table="kod_dep" column="kodp" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <dimset as="osn">
            <link name="kod_dog" />
            <link name="kod_dep" />
            <link name="kod_sf" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>2</const>
                  <const>3</const>
                </call>
              </call>
            </where>
          </dimset>
          <dimset as="av">
            <link name="kod_dog" />
            <link name="ym_vozn" />
            <link name="kod_dep" />
            <link name="sr_avans_otch" />
          </dimset>
          <dimset as="cl">
            <link name="ym_vozn" />
            <link name="kod_dep" />
          </dimset>
        </qube>
      </from>
    </query>
    <query name="sr_aotch_norm_av_no" timestamp="26.02.2018 16:08:39" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" intrval="FREQ=DAILY; INTERVAL=1" class="1" use-repository="1" stored="vv_sr_aotch_norm_av_no" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml">
      <select>
        <column table="a" column="kod_av" as="kod_av" key="0" />
        <column table="a" column="kod_dog" as="kod_dog" key="0" />
        <column table="a" column="nach_av" as="nach_av" key="0" is-fact-use="1" />
        <column table="a" column="perc" as="perc" key="0" />
        <column table="a" column="rym" as="rym" key="0" />
        <column table="a" column="pr_close" as="pr_close" key="0" />
      </select>
      <from>
        <query name="sr_aotch_norm_av_no1" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="a" column="pr_osn_cm" />
          </call>
          <call function="is null">
            <call function="nullif">
              <column table="a" column="pr_close" />
              <const>0</const>
            </call>
          </call>
          <call function="is not null">
            <column table="a" column="kod_av" />
          </call>
        </call>
      </where>
    </query>
    <query name="sr_aotch_norm_av_no_av" timestamp="25.02.2018 20:38:02" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_aotch_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_av" key="1" as="kod_av" />
        <column table="a" column="kod_dog" is-private-dimension="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="a" column="nach_av" fact="sr_aotch_norm_av_no_nach" agg="sum" as="nach_av" is-fact-use="1" />
        <column table="a" column="rym" as="ym_potr" dimension="ym_potr" />
        <call function="if" as="ym_vist" type="number" dimension="ym_vist">
          <call function="in">
            <column table="a" column="perc" />
            <call function="array">
              <const>80</const>
              <const>90</const>
              <const>100</const>
            </call>
          </call>
          <call function="ym add month">
            <column table="a" column="rym" />
            <const>-1</const>
          </call>
          <column table="a" column="rym" />
        </call>
      </select>
      <from>
        <query name="sr_aotch_norm_av_no" as="a" />
      </from>
    </query>
    <query name="sr_debet(date)" inherit="sr_debet" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_debet.xml" haskeys="1">
      <params>
        <param name="date" type="date" />
      </params>
      <select>
        <column table="a" column="kod_deb" type="number" key-dimension="kod_deb" as="kod_deb" key="1" fixed="1" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="num_pl" type="number" title="Номер документа на оплату" format="F0" as="num_pl" key="0" />
        <column table="a" column="dat_deb" type="date" title="Дата документа на оплату" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_deb" key="0" />
        <column table="a" column="ym" type="number" title="Период" format="F2" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" title="" as="dat_priem" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="pr_perep" type="number" title="" as="pr_perep" key="0" />
        <column table="a" column="den" type="number" title="" as="den" key="0" />
        <column table="a" column="dat_bzad" type="date" title="Дата возникновения обязательства по погашению задолженности" as="dat_bzad" key="0" />
        <column table="a" column="kodp_plat" type="number" title="" comment="код плательщика" as="kodp_plat" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0" />
        <column table="a" column="kod_deb_konsol" type="number" comment="код фиктивной консолид. платежки" as="kod_deb_konsol" key="0" />
        <column table="a" column="u_c" type="string" title="" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <call function="||" as="name" title="Документ на оплату" key="0">
          <const>'п/д '</const>
          <const>' № '</const>
          <column table="a" column="num_pl" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_deb" />
          </call>
        </call>
        <call function="||" as="name1" title="Документ на оплату" key="0">
          <const>'№ '</const>
          <column table="a" column="num_pl" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_deb" />
          </call>
        </call>
        <const type="number" as="cnt" fact="sr_debet_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="sf_date" column="ostatok" dgroup="sum" as="ostatok" key="0" />
      </select>
      <links>
        <dlink name="sr_facvip">
          <slink name="sr_facvip(date)" as="sf_date">
            <withparams>
              <useparam name="date" />
            </withparams>
          </slink>
        </dlink>
      </links>
      <from>
        <table name="sr_debet" as="a">
          <dlink name="qube_debet_state_last" as="qube_debet_state_last" table="qube_debet_state_last" child="qube_debet_state_last" field="kod_deb" parent="sr_debet" back="qube_debet_state_last">
            <link name="kod_state_lst" dimension="1" is-final-dimension="1" as="kod_state_lst" table="ss_state_lst" child="qube_debet_state_last" field="kod_state_lst" parent="ss_state_lst" back="qube_debet_state_last" />
          </dlink>
          <dlink name="sr_facvip" as="sr_facvip" table="sr_facvip" child="sr_facvip" field="kod_deb" parent="sr_debet" back="sr_facvip">
            <slink name="sr_facvip(date)" as="sf_date" table="sr_facvip(date)">
              <withparams>
                <useparam name="date" />
              </withparams>
            </slink>
          </dlink>
        </table>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_debet(date)" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_debet(date)">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="sr_debet(date)">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_debet(date)" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="qube_debet_state_last" timestamp="14.06.2017 14:07:26" class="1" materialize="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_debet_state.xml" haskeys="1">
      <select>
        <column table="kod_debet_state" column="kod_deb" group="1" as="kod_deb" key="1" fixed="1" />
        <call function="over" as="kod_state_lst" group="max" key="0">
          <call function="last_value">
            <column table="kod_debet_state" column="kod_state" />
          </call>
          <call function="partition by">
            <column table="kod_debet_state" column="kod_deb" />
          </call>
          <call function="order by 2">
            <column table="kod_debet_state" column="dat_ust" />
          </call>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_debet_state" all-rows="1" />
          <link name="dat" />
          <link name="kod_dog" />
        </qube>
        <query name="ss_state_lst" as="kod_state_lst" join="left outer" dname="qube_debet_state_last">
          <call function="=">
            <column table="this" column="kod_state_lst" />
            <column table="kod_state_lst" column="kod_state" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dname="qube_debet_state_last">
          <call function="=">
            <column table="this" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facras_astr" inherit="sr_facras" class="1" timestamp="19.03.2021 17:11:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_ras" as="kod_ras_astr" key-dimension="kod_ras_astr" key="0" />
        <column table="this" column="nachisl" as="nachisl_astr" fact="fin_ul_nach_astr" agg="sum" title="Начислено астрент" key="0" />
        <column table="kod_sf_astr" column="dat_ur" as="dat" dimension="dat" key="0" />
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_astr" field="kod_sf" parent="sr_facvip" back="sr_facras_astr">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_sf_astr" as="kod_sf_astr1" table="sr_facvip_astr" child="sr_facras_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_facras_astr">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="dat_ur" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras_astr" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras_astr">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras_astr">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras_astr" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras_astr">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
        <query name="sr_facvip_astr" as="kod_sf_astr" join="left outer" dimension="kod_sf_astr" dname="sr_facras_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_astr" column="kod_sf" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_sf_astr" as="kod_sf_astr1">
          <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="dat_ur" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <where>
        <call function="not in">
          <column table="kod_sf" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facras_undo_av" class="1" timestamp="12.09.2017 03:12:52" inherit="sr_facras" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="0-" as="undo_av_nach" fact="undo_av_nach" agg="sum" key="0">
          <column table="a" column="nachisl" />
        </call>
        <call as="dat_ezad_norm" function="if" type="date" dimension="dat_dolg_norm" key="0">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <call function="ym add month">
              <column table="a" column="rym" />
              <const>1</const>
            </call>
          </call>
        </call>
        <call function="nvl" as="dat_ezad" type="date" dimension="dat_dolg" key="0">
          <column table="kod_sf" column="dat_ezad" />
          <column table="this" column="dat_ezad_norm" />
        </call>
        <call function="to_date" as="dat_ezad_uved_kaz_el" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="||">
            <const>'18.'</const>
            <call function="ym to char">
              <call function="ym add month">
                <column table="a" column="rym" />
                <const>1</const>
              </call>
            </call>
          </call>
          <const>'DD.YYYY.MM'</const>
        </call>
        <call function="if" type="number" as="ym_vozn" dimension="ym_vozn" key="0">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>0</const>
          </call>
          <column table="this" column="rym" />
          <call function="nvl">
            <column table="kod_sf" column="sf_old_ym" />
            <column table="kod_sf" column="ym" />
          </call>
        </call>
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_undo_av" field="kod_sf" parent="sr_facvip" back="sr_facras_undo_av">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras_undo_av" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras_undo_av">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras_undo_av">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras_undo_av" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras_undo_av">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="kod_sf_astr" dname="sr_facras_undo_av">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>0</const>
          </call>
          <call function="not in">
            <column table="kod_sf" column="vid_sf" />
            <call function="array">
              <const>2</const>
              <const>9</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_undo_av" inherit="sr_opl" class="1" timestamp="02.11.2022 18:04:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="0-" as="undo_av_opl" fact="undo_av_opl" agg="sum" key="0">
          <column table="this" column="oplf" />
        </call>
        <call function="latest" as="dat_ezad_norm" dimension="dat_dolg_norm" key="0">
          <column table="this" column="dat_uch" />
          <column table="kod_sf" column="dat_ezad_norm" />
        </call>
        <call function="latest" as="dat_ezad" dimension="dat_dolg" key="0">
          <column table="this" column="dat_uch" />
          <column table="kod_sf" column="dat_ezad" />
        </call>
        <column table="kod_sf" column="ym_vozn" dimension="ym_vozn" as="ym_vozn" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_undo_av" field="kod_parent" parent="sr_opl" back="sr_opl_undo_av" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_undo_av" field="kod_link" parent="sr_opl_bank" back="sr_opl_undo_av">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_undo_av" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_undo_av" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_undo_av" field="kod_sf" parent="sr_facvip" back="sr_opl_undo_av">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_undo_av" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_undo_av">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_undo_av" field="kod_dog" parent="kr_dogovor" back="sr_opl_undo_av" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_undo_av" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_undo_av" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_undo_av" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_undo_av" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_undo_av">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="kod_sf_astr" dname="sr_opl_undo_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>0</const>
          </call>
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facras_rsrv_nal_45" inherit="sr_facras" class="1" timestamp="22.12.2016 01:29:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="kod_sf" column="dat_res_nal_45" dimension="dat" as="dat_res_nal_45" key="0" />
        <call function="/" as="nachisl_res" fact="sr_facras_rsrv_nal_45_nach" agg="sum" key="0">
          <column table="a" column="nachisl" />
          <const>2</const>
        </call>
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_rsrv_nal_45" field="kod_sf" parent="sr_facvip" back="sr_facras_rsrv_nal_45">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_rsrv_nal_45" field="kod_sf" parent="sr_facvip" back="sr_facras_rsrv_nal_45">
            <link name="kod_sf_main" as="kod_sf_main" table="sr_facvip_main" child="sr_facvip" field="kod_sf_main" parent="sr_facvip_main" back="sr_facvip" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras_rsrv_nal_45" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_45">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras_rsrv_nal_45" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="kod_sf_astr" dname="sr_facras_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_sf" as="kod_sf1">
          <link name="kod_sf_main" />
        </link>
      </links>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>2</const>
          </call>
          <call function="not in">
            <column table="kod_sf" column="vid_sf" />
            <call function="array">
              <const>2</const>
              <const>9</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facras_rsrv_nal_90" inherit="sr_facras" class="1" timestamp="22.12.2016 01:29:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="kod_sf" column="dat_res_nal_90" dimension="dat" as="dat_res_nal_90" key="0" />
        <call function="/" as="nachisl_res" fact="sr_facras_rsrv_nal_90_nach" agg="sum" key="0">
          <column table="a" column="nachisl" />
          <const>2</const>
        </call>
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_rsrv_nal_90" field="kod_sf" parent="sr_facvip" back="sr_facras_rsrv_nal_90">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras_rsrv_nal_90" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_90">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras_rsrv_nal_90" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="kod_sf_astr" dname="sr_facras_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>2</const>
          </call>
          <call function="not in">
            <column table="kod_sf" column="vid_sf" />
            <call function="array">
              <const>2</const>
              <const>9</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facras_rsrv_buh" inherit="sr_facras" class="1" timestamp="22.12.2016 03:30:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="kod_sf" column="dat_res_buh" dimension="dat" as="dat_res_buh" key="0" />
        <column table="a" column="nachisl" as="nachisl_res" agg="sum" fact="sr_facras_rsrv_buh_nach" key="0" />
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras_rsrv_buh" field="kod_sf" parent="sr_facvip" back="sr_facras_rsrv_buh">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras_rsrv_buh" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras_rsrv_buh">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras_rsrv_buh" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="kod_sf_astr" dname="sr_facras_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_sf" column="vid_real" />
            <const>2</const>
          </call>
          <call function="not in">
            <column table="kod_sf" column="vid_sf" />
            <call function="array">
              <const>2</const>
              <const>9</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_dolg_av" inherit="sr_opl" class="1" timestamp="31.01.2017 18:04:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="sr_opl_opl_dolg_av" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="if" as="dat_dolg_norm" dimension="dat_dolg_norm" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <call function="latest" as="dat_dolg_norm" dimension="dat_dolg_norm">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_dolg_norm" />
          </call>
          <column table="this" column="dat_uch" />
        </call>
        <column table="kod_sf" column="ym_vozn" dimension="ym_vozn" as="ym_vozn" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_dolg_av" field="kod_parent" parent="sr_opl" back="sr_opl_dolg_av" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_dolg_av" field="kod_link" parent="sr_opl_bank" back="sr_opl_dolg_av">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_dolg_av" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_dolg_av" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_dolg_av" field="kod_sf" parent="sr_facvip" back="sr_opl_dolg_av">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_dolg_av" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_dolg_av">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_dolg_av" field="kod_dog" parent="kr_dogovor" back="sr_opl_dolg_av" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_dolg_av" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_dolg_av" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_dolg_av" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_dolg_av" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="kod_sf_astr" dname="sr_opl_dolg_av">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="kod_sf" column="vid_real" />
            <call function="array">
              <const>0</const>
              <const>2</const>
            </call>
          </call>
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facvip_astr" inherit="sr_facvip" class="1" timestamp="19.03.2021 17:09:13" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" key-dimension="kod_sf" as="kod_sf" key="1" fixed="1" />
        <const type="number" as="cnt" fact="sr_facvip_count" agg="sum" key="0">1</const>
        <column table="a" column="tep_el" type="number" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="vid_real" type="number" fact="sf_vid_real" agg="max" as="vid_real" reference="sk_vid_real" refcol="vid_real" dimension="vid_real" key="0" />
        <column table="a" column="vid_sf" type="number" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер документа начисления" format="F0" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="Дата документа начисления" as="dat_sf" key="0" />
        <call function="if" as="dat_rep" type="date" comment="59495 " dimension="dat" key="0">
          <call function="and">
            <call function="lt">
              <call function="date to ym">
                <column table="this" column="dat_sf" />
              </call>
              <column table="this" column="ym" />
            </call>
            <call function="!=">
              <column table="this" column="vid_real" />
              <const>0</const>
            </call>
          </call>
          <call function="ym end day">
            <column table="this" column="ym" />
          </call>
          <column table="this" column="dat_sf" />
        </call>
        <column table="a" column="ym" type="number" title="Отчетный период начисления" dimension="ym" format="F2" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" as="dat_priem" key="0" />
        <column table="a" column="pr_old" type="number" as="pr_old" key="0" />
        <column table="a" column="pr_sv" type="number" as="pr_sv" key="0" />
        <column table="a" column="pr_osn" type="number" as="pr_osn" key="0" />
        <column table="a" column="gru_pl" type="number" as="gru_pl" key="0" />
        <column table="a" column="den" type="number" as="den" key="0" />
        <column table="a" column="kod_dog_r" type="number" comment="код договора при объединении в sr_debet" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_uchet" type="date" as="dat_uchet" key="0" />
        <column table="a" column="dat_ezad" type="date" as="dat_ezad" key="0" />
        <call function="date add days" as="dat_dolg_out" is-private-dimension="dat_dolg_out" is-final-dimension="dat_dolg_out" dimension="dat_dolg_out" key="0">
          <column table="this" column="dat_ezad" />
          <const>-1</const>
        </call>
        <column table="a" column="vist_day" type="number" comment="день выставления промежути" as="vist_day" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="num_sf_uch" type="number" comment="номер сф при постановке на учет" as="num_sf_uch" key="0" />
        <column table="a" column="ym_uch" type="number" comment="период постановки на учет" as="ym_uch" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="pr_hand" type="number" as="pr_hand" key="0" />
        <column table="a" column="vid_avans" type="number" as="vid_avans" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="prim_uo" type="string" comment="заполняется при погашении любым периодом" as="prim_uo" key="0" />
        <column table="a" column="kod_sf_old" type="number" comment="kod_sf перерасчитываемой сф" as="kod_sf_old" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodp_plat" type="number" comment="код плательщика" as="kodp_plat" key="0" />
        <column table="a" column="kod_sf_konsol" type="number" comment="код консолидированной сф" as="kod_sf_konsol" key="0" />
        <column table="a" column="vid_recalc" type="number" comment="вид перерасчета из спр-ка ss_vid_recalc" as="vid_recalc" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0" />
        <column table="a" column="pr_uch_av" type="number" comment="учитывать 0/1-по факту оплаты/на сумму начисления" as="pr_uch_av" key="0" />
        <column table="a" column="kod_bu_akt" type="number" comment="код безучетки" as="kod_bu_akt" reference="hr_bu_akt" refcol="kod_bu_akt" key="0" />
        <column table="a" column="kod_sf_first" type="number" comment="при перерасчете самый исходный kod_sf" as="kod_sf_first" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tip_bu_akt" type="number" comment="0\1-пром./ок. расчет" as="tip_bu_akt" key="0" />
        <column table="a" column="kniga" type="number" as="kniga" key="0" />
        <column table="a" column="dat_pen_ezad" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_pen_ezad" key="0" />
        <column table="a" column="dat_zadol" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_zadol" key="0" />
        <column table="a" column="nom_sf" type="string" comment="полный номер док-та для печати" title="Номер документа начисления" as="nom_sf" key="0" />
        <column table="a" column="proc" type="number" comment="процент аванса" as="proc" key="0" />
        <call function="||" as="name" title="Документ начисления" key="0">
          <column table="vid_sf" column="abbr" />
          <const>' № '</const>
          <column table="a" column="num_sf" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_sf" />
          </call>
        </call>
        <call function="coalesce" as="dat_bzad" type="date" title="Дата возникновения обязательства по погашению задолженности" dimension="dat_dolg" key="0">
          <column table="kod_deb" column="dat_bzad" />
          <column table="this" column="dat_zadol" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="if" as="dat_bzad_ksf" type="date" title="Дата возникновения обязательства по погашению задолженности" key="0">
          <call function="is null">
            <column table="this" column="kod_sf_old" />
          </call>
          <column table="this" column="dat_bzad" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_45" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>45</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_90" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>90</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="earliest" as="dat_res_buh" key="0">
          <call function="latest">
            <column table="kod_sf_main" column="dat_bzad" />
            <column table="this" column="dat_sf" />
          </call>
          <call function="if">
            <call function="is not null">
              <call function="egr_payer_sulst">
                <column table="kodp" column="kodp" />
              </call>
            </call>
            <call function="latest">
              <call function="egr_payer_sulst_dat">
                <column table="kodp" column="kodp" />
              </call>
              <column table="this" column="dat_sf" />
            </call>
          </call>
        </call>
        <column table="this" column="dat_bzad" as="dat_bzad_max" fact="sr_facvip_dat_bzad_max" agg="max" key="0" />
        <call function="case" as="dat_bzad_uved_kaz_el" type="date" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>30</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'10.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>40</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'25.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>0</const>
            </call>
            <call function="earliest">
              <call function="latest">
                <call function="nvl">
                  <call function="latest">
                    <column table="kod_deb" column="dat_deb" />
                    <column table="kod_deb" column="dat_bzad" />
                  </call>
                  <call function="ym end day">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <call function="ym begin time">
                  <column table="kod_sf_dop" column="rym" />
                </call>
              </call>
              <call function="ym end day">
                <column table="kod_sf_dop" column="rym" />
              </call>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>2</const>
            </call>
            <call function="latest">
              <column table="kod_deb" column="dat_bzad" />
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="else">
            <call function="nvl">
              <column table="kod_deb" column="dat_bzad" />
              <call function="ym end day">
                <call function="ym add month">
                  <column table="a" column="ym" />
                  <const>1</const>
                </call>
              </call>
            </call>
          </call>
        </call>
        <call as="is_big_avans" function="if" type="number" title="Признак аванс больше чем 30, 40" comment="см. заявку 25547 " key="0">
          <call function="and">
            <call function="=0">
              <column table="this" column="vid_real" />
            </call>
            <call function="not in">
              <column table="kod_sf_dop" column="perc" />
              <call function="array">
                <const>30</const>
                <const>40</const>
              </call>
            </call>
            <call function="=1">
              <column table="kod_sf_dop" column="day" />
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="dat_ezad_kaz" function="case" type="date" title="Дата возникновения задолженности с учетом авансов 30,40% " comment="старый вариант, название неправильное, кое где используется, заменить на dat_bzad_uved_kaz_el?" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="perc" />
                <const>30</const>
              </call>
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="to_date">
              <call function="||">
                <call function="to_char">
                  <const>25</const>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="mes">
                    <column table="this" column="rym" />
                  </call>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="year">
                    <call function="ym begin time">
                      <column table="this" column="rym" />
                    </call>
                  </call>
                </call>
              </call>
              <const>'dd.mm.yyyy'</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="ym end time">
              <column table="this" column="rym" />
            </call>
          </call>
          <call function="else">
            <call function="ym end time">
              <call function="ym add month">
                <column table="this" column="ym" />
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <column table="sr_facras" column="nachisl" dgroup="sum" as="nachisl" key="0" />
        <column table="kod_sf_dop" column="rym" dgroup="min" dimension="ym_vozn2" as="rym" key="0" />
        <column table="kod_sf_dop" column="vid_t" dgroup="min" as="vid_t" key="0" />
        <call function="if" type="number" as="ym_vozn" dimension="ym_vozn" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <column table="this" column="rym" />
          <call function="nvl">
            <column table="kod_sf_old_neg" column="ym" />
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="add_months" type="date" as="dat_vozn_otch" comment="Еще одна вариация при исправлении по 67698(1) " key="0">
          <call function="ym end time">
            <call function="nvl">
              <column table="kod_sf_old_neg" column="ym" />
              <column table="this" column="ym" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="nachisl_p" key="0">
          <call function="ge">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <call function="if" as="nachisl_m" key="0">
          <call function="lt">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <column table="this" column="ym" fact="sr_facvip_ym_min" as="ym_min" agg="min" title="Период начисления с" key="0" />
        <column table="this" column="ym" fact="sr_facvip_ym_max" as="ym_max" agg="max" title="Период начисления по" key="0" />
        <call as="dat_dolg_norm" function="if" type="date" dimension="dat_dolg_norm" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <column table="this" column="rym" />
          </call>
          <call type="" function="if">
            <call function="=">
              <column table="this" column="dat_zadol" />
              <call function="to_date">
                <call function="||">
                  <const>'31.12.'</const>
                  <call function="year">
                    <column table="this" column="dat_sf" />
                  </call>
                </call>
                <const>'DD.MM.YYYY'</const>
              </call>
            </call>
            <call function="ym end time">
              <call function="date to ym">
                <column table="this" column="dat_zadol" />
              </call>
            </call>
            <call function="if" as="" type="">
              <call function="and">
                <call function="=">
                  <column table="this" column="ym_vozn" />
                  <column table="this" column="ym" />
                </call>
                <call function="or">
                  <call function="gt">
                    <column table="kod_sf_dop" column="nachisl" />
                    <const>0</const>
                  </call>
                  <call function="is not null">
                    <column table="this" column="kod_sf_first" />
                  </call>
                </call>
              </call>
              <call function="ym end time">
                <call function="ym add month">
                  <column table="this" column="ym" />
                  <const>1</const>
                </call>
              </call>
              <call function="ym end time">
                <column table="this" column="ym" />
              </call>
            </call>
          </call>
        </call>
        <column table="this" column="dat_dolg_norm" dimension="dat_vozn_norm" as="dat_vozn_norm" key="0" />
        <call as="dat_ezad_norm" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <call function="ym add month">
              <column table="this" column="rym" />
              <const>1</const>
            </call>
          </call>
        </call>
        <call as="dat_ezad_uved_kaz_el" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="date add days">
            <call function="ym end day">
              <column table="this" column="rym" />
            </call>
            <const>18</const>
          </call>
        </call>
        <call function="nvl" fact="sr_facvip_perc_sum" agg="sum" as="perc" key="0">
          <column table="kod_sf_dop" column="perc" />
          <column table="a" column="proc" />
        </call>
        <column table="kr_vist_day" column="perc" dgroup="min" as="perc1" comment="только для проверки расчета в sg_tel" key="0" />
        <column table="kod_sf_old" column="ym" as="sf_old_ym" key="0" />
        <call as="vid_real_no_av" function="if" type="date" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <const>null</const>
          <column table="this" column="vid_real" />
        </call>
        <call function="nvl" as="kod_sf_main" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="kod_sf_old_neg" column="kod_sf" />
          <column table="this" column="kod_sf" />
        </call>
        <column table="kod_sf_norm_av" column="kod_ur_state" dimension="kod_ur_state" as="kod_ur_state" key="0" is-fact-use="1" />
        <column table="kod_sf_dop" column="period" as="period" key="0" />
        <column table="kod_sf_dop" column="name" as="ras_name" key="0" />
        <call function="nvl" as="kod_sf_fm" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="this" column="kod_sf_first" />
          <column table="this" column="kod_sf" />
        </call>
        <call as="kod_peni_sf" function="if" is-fact="1" fact="kod_peni_sf" agg="max" type="number" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>7</const>
          </call>
          <column table="a" column="kod_sf" />
        </call>
        <call as="dat_sf_recalc" function="if" type="date" is-private-dimension="dat_recalc" is-final-dimension="dat_recalc" dimension="dat_recalc" key="0">
          <call function="in">
            <column table="this" column="kniga" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
              <const>4</const>
            </call>
          </call>
          <query>
            <select>
              <column group="max" table="sqsr" column="dat_recalc" as="dat_recalc" />
            </select>
            <from>
              <query name="sr_recalc_sf" as="sqsrs">
                <link name="kod_recalc" as="sqsr" table="sr_recalc" child="sr_recalc_sf" field="kod_recalc" parent="sr_recalc" back="sr_recalc_sf" />
              </query>
            </from>
            <where>
              <call function="=">
                <column table="sqsrs" column="kod_sf" />
                <column table="a" column="kod_sf" />
              </call>
            </where>
          </query>
          <column table="this" column="dat_sf" />
        </call>
        <column table="kod_sf_text" column="data_gpz" as="data_gpz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="dat_sf" as="dat_ur" dimension="dat_ur" key="0" />
        <column table="this" column="dat_sf" as="dat_ur_ent" dimension="dat_ur_ent" key="0" />
        <column table="this" column="kod_sf" as="kod_sf_astr" key-dimension="kod_sf_astr" key="0" />
      </select>
      <links>
        <dlink name="sr_penni_astr" dimension="kod_pen_astr">
          <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
        </dlink>
        <link name="kod_dog" as="kod_dog1" dimension="1">
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <from>
        <table name="sr_facvip" as="a">
          <dlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vr_pret_dolg_sf" table="vr_pret_dolg_sf" child="vr_pret_dolg_sf" field="kod_sf" parent="sr_facvip" back="vr_pret_dolg_sf">
            <dimlink name="vr_pret_dolg_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_facras" pushpred="1" as="sr_facras" table="sr_facras" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras" />
          <dlink name="vv_all_deb_sf" as="vv_all_deb_sf" table="vv_all_deb_sf" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
            <dlink name="ur_dogplat" dimension="1" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat" />
          </dlink>
          <link name="kod_sf_dop" as="kod_sf_dop" table="sr_facvip_dop" child="sr_facvip_astr" field="kod_sf_dop" parent="sr_facvip_dop" back="sr_facvip_astr" />
          <link name="kod_dog" as="kod_dog1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dogovor" child="sr_facvip_astr" field="kod_dog" parent="kr_dogovor" back="sr_facvip_astr" title="Договор">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink title="Банк плательщика" is-private-dimension="1" is-final-dimension="1" dimension="1" name="kodb" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" title="Подразделение" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dimlink name="kod_dogplat">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_stage_bk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
          <dlink name="qube_sf_graf" dimension="1" is-final-dimension="1" as="qube_sf_graf" table="qube_sf_graf" child="qube_sf_graf" field="kod_sf" parent="sr_facvip" back="qube_sf_graf" />
          <dlink name="sr_recalc_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="sr_recalc_sf" table="sr_recalc_sf" child="sr_recalc_sf" field="kod_sf" parent="sr_facvip" back="sr_recalc_sf">
            <dimlink name="sr_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_penni_astr" dimension="kod_pen_astr" as="sr_penni_astr" table="sr_penni_astr" child="sr_penni_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_penni_astr">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
          </dlink>
          <link name="kod_dog" as="kod_dog1" dimension="1" table="kr_dogovor" child="sr_facvip_astr" field="kod_dog" parent="kr_dogovor" back="sr_facvip_astr" title="Договор">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="sr_facvip_text" as="kod_sf_text" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_text" column="kod_sf" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_facvip_astr" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" dname="sr_facvip_r" join="left outer" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf_old" />
            <column table="kod_sf_old" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_first" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf_first" />
            <column table="kod_sf_first" column="kod_sf" />
          </call>
        </query>
        <query name="hr_bu_akt" as="kod_bu_akt" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_bu_akt" />
            <column table="kod_bu_akt" column="kod_bu_akt" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_facvip_astr" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_facvip_astr" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" title="Вид документа" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dimension="kod_deb" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip_dop" as="kod_sf_dop" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_dop" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_ret_inf" as="kod_sf_ret_inf" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_ret_inf" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_rec_info_m" as="kod_sf_rec_info" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_rec_info" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old_neg" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="kod_sf_rec_info" column="kod_sf_old_neg" />
            <column table="kod_sf_old_neg" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_main" as="kod_sf_main" join="left outer" dimension="1" dname="sr_facvip_astr">
          <call function="=">
            <column table="this" column="kod_sf_main" />
            <column table="kod_sf_main" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_norm_av" as="kod_sf_norm_av" join="left outer" dname="sr_facvip_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_norm_av" column="kod_sf" />
          </call>
        </query>
        <query name="kr_vist_day" as="kr_vist_day" join="left outer" comment="только для проверки расчета в sg_tel" dname="sr_facvip_astr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dog" />
              <column table="kr_vist_day" column="kod_dog" />
            </call>
            <call function="=">
              <column table="a" column="vist_day" />
              <column table="kr_vist_day" column="day" />
            </call>
            <call function="=">
              <column table="a" column="vid_avans" />
              <column table="kr_vist_day" column="vid_avans" />
            </call>
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_fm" join="left outer" dname="sr_facvip_fm">
          <call function="=">
            <column table="this" column="kod_sf_fm" />
            <column table="kod_sf_fm" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="not in">
          <column table="a" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facvip_dop" timestamp="27.12.2018 19:41:14" class="1" stored="vv_sr_facvip_dop" intrval="FREQ=DAILY; INTERVAL=1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml" haskeys="1">
      <select>
        <column table="sr_facras" column="kod_sf" group="1" index="1" as="kod_sf" key="1" fixed="1" />
        <column table="kod_av" column="perc" group="max" as="perc" key="0" />
        <column table="kod_av" column="day" group="min" as="day" key="0" />
        <column table="kod_av" column="period" group="min" as="period" key="0" />
        <column table="sr_facras" column="rym" group="min" as="rym" key="0" />
        <column table="kod_ras_text" column="name" group="min" as="name" key="0" />
        <column table="sr_facras" column="vid_t" group="min" as="vid_t" key="0" />
        <column table="sr_facras" column="nachisl" group="sum" as="nachisl" key="0" />
      </select>
      <from>
        <query name="sr_facras" as="sr_facras">
          <link name="kod_ras_text" as="kod_ras_text" table="sr_facras_text" child="sr_facras" field="kod_ras_text" parent="sr_facras_text" back="sr_facras">
            <link name="kod_av" as="kod_av" table="sr_avans" child="sr_facras_text" field="kod_av" parent="sr_avans" back="sr_facras_text" />
          </link>
        </query>
      </from>
    </query>
    <query name="sr_facvip_main" class="1" timestamp="21.12.2016 22:01:01" inherit="sr_facvip" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" key-dimension="kod_sf" as="kod_sf" key="1" fixed="1" />
        <const type="number" as="cnt" fact="sr_facvip_count" agg="sum" key="0">1</const>
        <column table="a" column="tep_el" type="number" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="vid_real" type="number" fact="sf_vid_real" agg="max" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="vid_sf" type="number" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер документа начисления" format="F0" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="Дата документа начисления" as="dat_sf" key="0" />
        <call function="if" as="dat_rep" type="date" comment="59495 " dimension="dat" key="0">
          <call function="and">
            <call function="lt">
              <call function="date to ym">
                <column table="this" column="dat_sf" />
              </call>
              <column table="this" column="ym" />
            </call>
            <call function="!=">
              <column table="this" column="vid_real" />
              <const>0</const>
            </call>
          </call>
          <call function="ym end day">
            <column table="this" column="ym" />
          </call>
          <column table="this" column="dat_sf" />
        </call>
        <column table="a" column="ym" type="number" title="Отчетный период начисления" dimension="ym" format="F2" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" as="dat_priem" key="0" />
        <column table="a" column="pr_old" type="number" as="pr_old" key="0" />
        <column table="a" column="pr_sv" type="number" as="pr_sv" key="0" />
        <column table="a" column="pr_osn" type="number" as="pr_osn" key="0" />
        <column table="a" column="gru_pl" type="number" as="gru_pl" key="0" />
        <column table="a" column="den" type="number" as="den" key="0" />
        <column table="a" column="kod_dog_r" type="number" comment="код договора при объединении в sr_debet" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_uchet" type="date" as="dat_uchet" key="0" />
        <column table="a" column="dat_ezad" type="date" as="dat_ezad" key="0" />
        <call function="date add days" as="dat_dolg_out" is-private-dimension="dat_dolg_out" is-final-dimension="dat_dolg_out" dimension="dat_dolg_out" key="0">
          <column table="this" column="dat_ezad" />
          <const>-1</const>
        </call>
        <column table="a" column="vist_day" type="number" comment="день выставления промежути" as="vist_day" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="num_sf_uch" type="number" comment="номер сф при постановке на учет" as="num_sf_uch" key="0" />
        <column table="a" column="ym_uch" type="number" comment="период постановки на учет" as="ym_uch" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="pr_hand" type="number" as="pr_hand" key="0" />
        <column table="a" column="vid_avans" type="number" as="vid_avans" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="prim_uo" type="string" comment="заполняется при погашении любым периодом" as="prim_uo" key="0" />
        <column table="a" column="kod_sf_old" type="number" comment="kod_sf перерасчитываемой сф" as="kod_sf_old" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodp_plat" type="number" comment="код плательщика" as="kodp_plat" key="0" />
        <column table="a" column="kod_sf_konsol" type="number" comment="код консолидированной сф" as="kod_sf_konsol" key="0" />
        <column table="a" column="vid_recalc" type="number" comment="вид перерасчета из спр-ка ss_vid_recalc" as="vid_recalc" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0" />
        <column table="a" column="pr_uch_av" type="number" comment="учитывать 0/1-по факту оплаты/на сумму начисления" as="pr_uch_av" key="0" />
        <column table="a" column="kod_bu_akt" type="number" comment="код безучетки" as="kod_bu_akt" reference="hr_bu_akt" refcol="kod_bu_akt" key="0" />
        <column table="a" column="kod_sf_first" type="number" comment="при перерасчете самый исходный kod_sf" as="kod_sf_first" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tip_bu_akt" type="number" comment="0\1-пром./ок. расчет" as="tip_bu_akt" key="0" />
        <column table="a" column="kniga" type="number" as="kniga" key="0" />
        <column table="a" column="dat_pen_ezad" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_pen_ezad" key="0" />
        <column table="a" column="dat_zadol" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_zadol" key="0" />
        <column table="a" column="nom_sf" type="string" comment="полный номер док-та для печати" title="Номер документа начисления" as="nom_sf" key="0" />
        <column table="a" column="proc" type="number" comment="процент аванса" as="proc" key="0" />
        <call function="||" as="name" title="Документ начисления" key="0">
          <column table="vid_sf" column="abbr" />
          <const>' № '</const>
          <column table="a" column="num_sf" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_sf" />
          </call>
        </call>
        <call function="coalesce" as="dat_bzad" type="date" title="Дата возникновения обязательства по погашению задолженности" dimension="dat_dolg" key="0">
          <column table="kod_deb" column="dat_bzad" />
          <column table="this" column="dat_zadol" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="if" as="dat_bzad_ksf" type="date" title="Дата возникновения обязательства по погашению задолженности" key="0">
          <call function="is null">
            <column table="this" column="kod_sf_old" />
          </call>
          <column table="this" column="dat_bzad" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_45" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>45</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_90" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>90</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="earliest" as="dat_res_buh" key="0">
          <call function="latest">
            <column table="kod_sf_main" column="dat_bzad" />
            <column table="this" column="dat_sf" />
          </call>
          <call function="if">
            <call function="is not null">
              <call function="egr_payer_sulst">
                <column table="kodp" column="kodp" />
              </call>
            </call>
            <call function="latest">
              <call function="egr_payer_sulst_dat">
                <column table="kodp" column="kodp" />
              </call>
              <column table="this" column="dat_sf" />
            </call>
          </call>
        </call>
        <column table="this" column="dat_bzad" as="dat_bzad_max" fact="sr_facvip_dat_bzad_max" agg="max" key="0" />
        <call function="case" as="dat_bzad_uved_kaz_el" type="date" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>30</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'10.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>40</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'25.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>0</const>
            </call>
            <call function="earliest">
              <call function="latest">
                <call function="nvl">
                  <call function="latest">
                    <column table="kod_deb" column="dat_deb" />
                    <column table="kod_deb" column="dat_bzad" />
                  </call>
                  <call function="ym end day">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <call function="ym begin time">
                  <column table="kod_sf_dop" column="rym" />
                </call>
              </call>
              <call function="ym end day">
                <column table="kod_sf_dop" column="rym" />
              </call>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>2</const>
            </call>
            <call function="latest">
              <column table="kod_deb" column="dat_bzad" />
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="else">
            <call function="nvl">
              <column table="kod_deb" column="dat_bzad" />
              <call function="ym end day">
                <call function="ym add month">
                  <column table="a" column="ym" />
                  <const>1</const>
                </call>
              </call>
            </call>
          </call>
        </call>
        <call as="is_big_avans" function="if" type="number" title="Признак аванс больше чем 30, 40" comment="см. заявку 25547 " key="0">
          <call function="and">
            <call function="=0">
              <column table="this" column="vid_real" />
            </call>
            <call function="not in">
              <column table="kod_sf_dop" column="perc" />
              <call function="array">
                <const>30</const>
                <const>40</const>
              </call>
            </call>
            <call function="=1">
              <column table="kod_sf_dop" column="day" />
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="dat_ezad_kaz" function="case" type="date" title="Дата возникновения задолженности с учетом авансов 30,40% " comment="старый вариант, название неправильное, кое где используется, заменить на dat_bzad_uved_kaz_el?" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="perc" />
                <const>30</const>
              </call>
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="to_date">
              <call function="||">
                <call function="to_char">
                  <const>25</const>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="mes">
                    <column table="this" column="rym" />
                  </call>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="year">
                    <call function="ym begin time">
                      <column table="this" column="rym" />
                    </call>
                  </call>
                </call>
              </call>
              <const>'dd.mm.yyyy'</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="ym end time">
              <column table="this" column="rym" />
            </call>
          </call>
          <call function="else">
            <call function="ym end time">
              <call function="ym add month">
                <column table="this" column="ym" />
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <column table="sr_facras" column="nachisl" dgroup="sum" as="nachisl" key="0" />
        <column table="kod_sf_dop" column="rym" dgroup="min" dimension="ym_vozn2" as="rym" key="0" />
        <column table="kod_sf_dop" column="vid_t" dgroup="min" as="vid_t" key="0" />
        <call function="if" type="number" as="ym_vozn" dimension="ym_vozn" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <column table="this" column="rym" />
          <call function="nvl">
            <column table="kod_sf_old_neg" column="ym" />
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="add_months" type="date" as="dat_vozn_otch" comment="Еще одна вариация при исправлении по 67698(1) " key="0">
          <call function="ym end time">
            <call function="nvl">
              <column table="kod_sf_old_neg" column="ym" />
              <column table="this" column="ym" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="nachisl_p" key="0">
          <call function="ge">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <call function="if" as="nachisl_m" key="0">
          <call function="lt">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <column table="this" column="ym" fact="sr_facvip_ym_min" as="ym_min" agg="min" title="Период начисления с" key="0" />
        <column table="this" column="ym" fact="sr_facvip_ym_max" as="ym_max" agg="max" title="Период начисления по" key="0" />
        <call as="dat_dolg_norm" function="if" type="date" dimension="dat_dolg_norm" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <column table="this" column="rym" />
          </call>
          <call type="" function="if">
            <call function="=">
              <column table="this" column="dat_zadol" />
              <call function="to_date">
                <call function="||">
                  <const>'31.12.'</const>
                  <call function="year">
                    <column table="this" column="dat_sf" />
                  </call>
                </call>
                <const>'DD.MM.YYYY'</const>
              </call>
            </call>
            <call function="ym end time">
              <call function="date to ym">
                <column table="this" column="dat_zadol" />
              </call>
            </call>
            <call function="if" as="" type="">
              <call function="and">
                <call function="=">
                  <column table="this" column="ym_vozn" />
                  <column table="this" column="ym" />
                </call>
                <call function="or">
                  <call function="gt">
                    <column table="kod_sf_dop" column="nachisl" />
                    <const>0</const>
                  </call>
                  <call function="is not null">
                    <column table="this" column="kod_sf_first" />
                  </call>
                </call>
              </call>
              <call function="ym end time">
                <call function="ym add month">
                  <column table="this" column="ym" />
                  <const>1</const>
                </call>
              </call>
              <call function="ym end time">
                <column table="this" column="ym" />
              </call>
            </call>
          </call>
        </call>
        <column table="this" column="dat_dolg_norm" dimension="dat_vozn_norm" as="dat_vozn_norm" key="0" />
        <call as="dat_ezad_norm" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <call function="ym add month">
              <column table="this" column="rym" />
              <const>1</const>
            </call>
          </call>
        </call>
        <call as="dat_ezad_uved_kaz_el" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="date add days">
            <call function="ym end day">
              <column table="this" column="rym" />
            </call>
            <const>18</const>
          </call>
        </call>
        <call function="nvl" fact="sr_facvip_perc_sum" agg="sum" as="perc" key="0">
          <column table="kod_sf_dop" column="perc" />
          <column table="a" column="proc" />
        </call>
        <column table="kr_vist_day" column="perc" dgroup="min" as="perc1" comment="только для проверки расчета в sg_tel" key="0" />
        <column table="kod_sf_old" column="ym" as="sf_old_ym" key="0" />
        <call as="vid_real_no_av" function="if" type="date" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <const>null</const>
          <column table="this" column="vid_real" />
        </call>
        <call function="nvl" as="kod_sf_main" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="kod_sf_old_neg" column="kod_sf" />
          <column table="this" column="kod_sf" />
        </call>
        <column table="kod_sf_norm_av" column="kod_ur_state" dimension="kod_ur_state" as="kod_ur_state" key="0" is-fact-use="1" />
        <column table="kod_sf_dop" column="period" as="period" key="0" />
        <column table="kod_sf_dop" column="name" as="ras_name" key="0" />
        <call function="nvl" as="kod_sf_fm" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="this" column="kod_sf_first" />
          <column table="this" column="kod_sf" />
        </call>
        <call as="kod_peni_sf" function="if" is-fact="1" fact="kod_peni_sf" agg="max" type="number" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>7</const>
          </call>
          <column table="a" column="kod_sf" />
        </call>
        <call as="dat_sf_recalc" function="if" type="date" is-private-dimension="dat_recalc" is-final-dimension="dat_recalc" dimension="dat_recalc" key="0">
          <call function="in">
            <column table="this" column="kniga" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
              <const>4</const>
            </call>
          </call>
          <query>
            <select>
              <column group="max" table="sqsr" column="dat_recalc" as="dat_recalc" />
            </select>
            <from>
              <query name="sr_recalc_sf" as="sqsrs">
                <link name="kod_recalc" as="sqsr" table="sr_recalc" child="sr_recalc_sf" field="kod_recalc" parent="sr_recalc" back="sr_recalc_sf" />
              </query>
            </from>
            <where>
              <call function="=">
                <column table="sqsrs" column="kod_sf" />
                <column table="a" column="kod_sf" />
              </call>
            </where>
          </query>
          <column table="this" column="dat_sf" />
        </call>
        <column table="kod_sf_text" column="data_gpz" as="data_gpz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facvip" as="a">
          <dlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vr_pret_dolg_sf" table="vr_pret_dolg_sf" child="vr_pret_dolg_sf" field="kod_sf" parent="sr_facvip" back="vr_pret_dolg_sf">
            <dimlink name="vr_pret_dolg_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_facras" pushpred="1" as="sr_facras" table="sr_facras" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras" />
          <dlink name="vv_all_deb_sf" as="vv_all_deb_sf" table="vv_all_deb_sf" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
            <dlink name="ur_dogplat" dimension="1" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat" />
          </dlink>
          <link name="kod_sf_dop" as="kod_sf_dop" table="sr_facvip_dop" child="sr_facvip_main" field="kod_sf_dop" parent="sr_facvip_dop" back="sr_facvip_main" />
          <link name="kod_dog" as="kod_dog1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dogovor" child="sr_facvip_main" field="kod_dog" parent="kr_dogovor" back="sr_facvip_main" title="Договор">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink title="Банк плательщика" is-private-dimension="1" is-final-dimension="1" dimension="1" name="kodb" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" title="Подразделение" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dimlink name="kod_dogplat">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_stage_bk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
          <dlink name="qube_sf_graf" dimension="1" is-final-dimension="1" as="qube_sf_graf" table="qube_sf_graf" child="qube_sf_graf" field="kod_sf" parent="sr_facvip" back="qube_sf_graf" />
          <dlink name="sr_recalc_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="sr_recalc_sf" table="sr_recalc_sf" child="sr_recalc_sf" field="kod_sf" parent="sr_facvip" back="sr_recalc_sf">
            <dimlink name="sr_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="sr_facvip_text" as="kod_sf_text" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_text" column="kod_sf" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_facvip_main" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" dname="sr_facvip_r" join="left outer" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf_old" />
            <column table="kod_sf_old" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_first" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf_first" />
            <column table="kod_sf_first" column="kod_sf" />
          </call>
        </query>
        <query name="hr_bu_akt" as="kod_bu_akt" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_bu_akt" />
            <column table="kod_bu_akt" column="kod_bu_akt" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_facvip_main" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_facvip_main" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" title="Вид документа" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dimension="kod_deb" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip_dop" as="kod_sf_dop" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_dop" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_ret_inf" as="kod_sf_ret_inf" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_ret_inf" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_rec_info_m" as="kod_sf_rec_info" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_rec_info" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old_neg" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="kod_sf_rec_info" column="kod_sf_old_neg" />
            <column table="kod_sf_old_neg" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_main" as="kod_sf_main" join="left outer" dimension="1" dname="sr_facvip_main">
          <call function="=">
            <column table="this" column="kod_sf_main" />
            <column table="kod_sf_main" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_norm_av" as="kod_sf_norm_av" join="left outer" dname="sr_facvip_main">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_norm_av" column="kod_sf" />
          </call>
        </query>
        <query name="kr_vist_day" as="kr_vist_day" join="left outer" comment="только для проверки расчета в sg_tel" dname="sr_facvip_main">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dog" />
              <column table="kr_vist_day" column="kod_dog" />
            </call>
            <call function="=">
              <column table="a" column="vist_day" />
              <column table="kr_vist_day" column="day" />
            </call>
            <call function="=">
              <column table="a" column="vid_avans" />
              <column table="kr_vist_day" column="vid_avans" />
            </call>
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_fm" join="left outer" dname="sr_facvip_fm">
          <call function="=">
            <column table="this" column="kod_sf_fm" />
            <column table="kod_sf_fm" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="not in">
          <column table="a" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_fv_ur_state" timestamp="08.06.2017 12:07:48" stored="vv_sr_fv_ur_state" class="1" intrval="FREQ=DAILY; INTERVAL=1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml" haskeys="1">
      <select>
        <column table="kod_sf" column="kod_sf" group="1" index="1" as="kod_sf" key="1" fixed="1" />
        <column table="dat_ur" column="val" group="1" index="1" dimension="dat_ur" as="dat_ur" is-final-dimension="1" is-private-dimension="1" key="1" fixed="1" />
        <column table="dat_ur" column="val" group="1" index="1" dimension="dat" as="dat" is-final-dimension="1" is-private-dimension="1" key="1" fixed="1" />
        <fact column="kod_ur_state" group="1" index="1" is-fact="1" agg="max" fact="sr_fv_ur_st_kod_ur_st_max" fact-dimension="kod_ur_state_dt" as="kod_ur_state" is-fact-use="1" key="1" fixed="1" />
      </select>
      <from>
        <qube star-scheme="1" merge-dimsets="1">
          <link name="kod_sf">
            <link name="kod_dog">
              <link name="dep" />
              <link name="kodp" />
            </link>
          </link>
          <link name="dat_ur" />
          <where>
            <call function="is not null">
              <column table="kod_sf" column="kod_sf" />
            </call>
          </where>
        </qube>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" is-private-dimension="1" is-final-dimension="1" dname="sr_fv_ur_state">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="ur_state_dt" as="kod_ur_state" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_fv_ur_state" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
      </from>
      <links>
        <dimlink name="kod_sf">
          <dimlink name="dat_dolg_norm" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </dimlink>
      </links>
      <where>
        <call function="is not null">
          <column table="this" column="kod_ur_state" group="" />
        </call>
      </where>
      <!--<where>
        <call function="and">
          <call function="=">
            <column column="kod_folders" table="ur_mat" />
            <useparam name="fk_kod_folders" />
          </call>
        </call>
      </where>-->
    </query>
    <query name="sr_facvip_norm_av_av" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" timestamp="20.08.2023 15:28:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <call function="ym end time" as="dat_dolg_norm" dimension="dat_dolg_norm">
          <column table="kod_sf" column="ym_vozn" />
        </call>
        <column table="kod_sf" column="dat_vozn_otch" dimension="dat_vozn_norm" as="dat_vozn_norm" />
        <column table="a" column="nach_av_norm" fact="sr_facvip_norm_av_av_nach" agg="sum" as="nach_av_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" />
        <call function="if" as="ym_vist" type="number" dimension="ym_vist">
          <call function="in">
            <column table="a" column="perc" />
            <call function="array">
              <const>80</const>
              <const>90</const>
              <const>100</const>
            </call>
          </call>
          <call function="ym add month">
            <column table="kod_sf" column="ym" />
            <const>-1</const>
          </call>
          <column table="kod_sf" column="ym" />
        </call>
        <column table="a" column="pfact_opl_used" fact="sr_facvip_norm_av_av_fact" agg="sum" as="pfact_opl_used" />
        <column table="a" column="nach_av_norm_v2" fact="sr_facvip_norm_av_av_nach_v2" agg="sum" as="nach_av_norm_v2" />
      </select>
      <from>
        <query name="sr_facvip_norm_av" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facvip_norm_av_av">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facvip_norm_av1" use-repository="1" class="1" timestamp="29.06.2023 18:30:19" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml">
      <expressions>
        <call function="if" type="number" group="sum" as="pfact_opl">
          <call function="in">
            <column table="kod_type_opl" column="kod_type_opl" />
            <call function="array">
              <const>3</const>
            </call>
          </call>
          <fact column="sr_opl_opl_sf" />
        </call>
      </expressions>
      <select>
        <column table="kod_dog" column="kod_dog" as="kod_dog" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <column table="vid_real" column="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" />
        <fact column="fin_ul_nachisl_av" as="nach_av" table="av" is-fact-use="1" />
        <fact column="fin_ul_nachisl_osn_rm" as="nach_osn" table="osn" is-fact-use="1" />
        <fact column="kod_ur_state" table="osn" as="kod_ur_state" is-fact-use="1" />
        <call function="if" as="nach_osn_bez_per" type="number">
          <call function="=">
            <column table="kod_sf" column="ym" />
            <column table="ym_vozn" column="val" as="ym_vozn" />
          </call>
          <column table="this" column="nach_osn" />
        </call>
        <call function="row_number" type="number" as="pr_first_sf">
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
          <call function="order by 2">
            <call function="asc">
              <call function="if" type="number">
                <call function="=">
                  <column table="kod_sf" column="ym" />
                  <column table="ym_vozn" column="val" as="ym_vozn" />
                </call>
                <column table="this" column="kod_sf" />
              </call>
            </call>
          </call>
        </call>
        <call function="over" as="nach_av_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="over" as="nach_osn_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_osn_bez_per" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="if" as="nach_av_for_first_sf" type="number">
          <call function="and">
            <call function="=1">
              <column table="this" column="pr_first_sf" />
            </call>
            <call function="=">
              <column table="kod_sf" column="ym" />
              <column table="ym_vozn" column="val" as="ym_vozn" />
            </call>
          </call>
          <column table="this" column="nach_av_cm" />
        </call>
        <call function="greatest" as="nach_av_norm">
          <call function="smallest nvl" type="number">
            <column table="this" column="nach_av_for_first_sf" />
            <column table="this" column="nach_osn_cm" />
          </call>
          <const>0</const>
        </call>
        <call function="-nvl" as="nach_osn_norm">
          <column table="this" column="nach_osn" />
          <column table="this" column="nach_av_norm" />
        </call>
        <call function="over" as="perc" type="number">
          <call function="sum">
            <fact column="sr_facvip_perc_sum" table="av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <fact column="pfact_opl" as="pfact_opl" table="osn" is-fact-use="1" />
        <call as="pfact_opl_used" type="" function="if">
          <call function="is null">
            <column table="this" column="nach_av_cm" />
          </call>
          <column table="this" column="pfact_opl" />
          <const>0</const>
        </call>
        <call as="nach_av_norm_v2" type="" function="if">
          <call function="is null">
            <column table="this" column="nach_av_cm" />
          </call>
          <column table="this" column="pfact_opl" />
          <call function="greatest" as="" type="">
            <call function="smallest nvl" type="number">
              <column table="this" column="nach_av_for_first_sf" />
              <column table="this" column="nach_osn_cm" />
            </call>
            <const>0</const>
          </call>
        </call>
        <call function="-nvl" as="nach_osn_norm_v2">
          <column table="this" column="nach_osn" />
          <column table="this" column="nach_av_norm_v2" />
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <dimset as="osn">
            <link name="kod_dog" />
            <link name="kod_sf" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>2</const>
                  <const>3</const>
                </call>
              </call>
            </where>
          </dimset>
          <dimset as="av">
            <link name="kod_dog" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>0</const>
                </call>
              </call>
            </where>
          </dimset>
        </qube>
      </from>
    </query>
    <query name="sr_facvip_norm_av" stored="vv_sr_facvip_norm_av" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" intrval="FREQ=HOURLY; INTERVAL=1" class="1" timestamp="20.08.2023 15:32:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml">
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="0" />
        <column table="a" column="nach_av_norm_v2" as="nach_av_norm" key="0" />
        <column table="a" column="nach_osn_norm_v2" as="nach_osn_norm" key="0" />
        <column table="a" column="kod_ur_state" as="kod_ur_state" key="0" is-fact-use="1" />
        <column table="a" column="perc" as="perc" key="0" />
        <column table="a" column="nach_av_norm_v2" as="nach_av_norm_v2" key="0" />
        <column table="a" column="nach_osn_norm_v2" comment="Набор выражений с суффиксом v2 заведен для проверки новой версии алгоритма по заявке 67698. Сейчас не используются, алгоритм применен для основных выражений. Оставил этот набор на случай если понадобится организовать аналогичную проверку в будущем" as="nach_osn_norm_v2" key="0" />
        <column table="a" column="pfact_opl_used" as="pfact_opl_used" key="0" />
      </select>
      <from>
        <query name="sr_facvip_norm_av1" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_facvip_norm_av">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="a" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facvip_norm_av_osn" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" timestamp="29.06.2023 23:19:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <column table="kod_sf" column="dat_dolg_norm" dimension="dat_dolg_norm" as="dat_dolg_norm" />
        <column table="kod_sf" column="dat_vozn_otch" dimension="dat_vozn_norm" as="dat_vozn_norm" />
        <column table="a" column="nach_osn_norm" fact="sr_facvip_norm_av_osn_nach" agg="sum" as="nach_osn_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" is-final-dimension="1" is-private-dimension="1" />
        <call as="ym_vist" function="ym add month" dimension="ym_vist" is-final-dimension="1" is-private-dimension="1">
          <column table="kod_sf" column="ym" />
          <const>1</const>
        </call>
        <column table="a" column="nach_osn_norm_v2" fact="sr_facvip_norm_av_osn_nach_v2" agg="sum" as="nach_osn_norm_v2" />
      </select>
      <from>
        <query name="sr_facvip_norm_av" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facvip_norm_av_osn">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facvip_norm_av1_rm" timestamp="09.03.2021 18:07:31" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml">
      <select>
        <column table="kod_dog" column="kod_dog" as="kod_dog" />
        <column table="kod_sf" column="kod_sf" as="kod_sf" />
        <column table="vid_real" column="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" />
        <fact column="fin_ul_nachisl_av" as="nach_av" table="av" is-fact-use="1" />
        <fact column="fin_ul_nachisl_osn_rm" as="nach_osn" table="osn" is-fact-use="1" />
        <fact column="kod_ur_state" table="osn" as="kod_ur_state" is-fact-use="1" />
        <call function="if" as="nach_osn_bez_per" type="number">
          <call function="=">
            <column table="kod_sf" column="ym" />
            <column table="ym_vozn" column="val" as="ym_vozn" />
          </call>
          <column table="this" column="nach_osn" />
        </call>
        <call function="row_number" type="number" as="pr_first_sf">
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
          <call function="order by 2">
            <call function="asc nulls last">
              <call function="if" type="number">
                <call function="=">
                  <column table="kod_sf" column="ym" />
                  <column table="ym_vozn" column="val" as="ym_vozn" />
                </call>
                <column table="this" column="kod_sf" />
              </call>
            </call>
          </call>
        </call>
        <call function="over" as="nach_av_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="over" as="nach_osn_cm" type="number">
          <call function="sum">
            <column table="this" column="nach_osn_bez_per" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
        <call function="if" as="nach_av_for_first_sf" type="number">
          <call function="and">
            <call function="=1">
              <column table="this" column="pr_first_sf" />
            </call>
            <call function="=">
              <column table="kod_sf" column="ym" />
              <column table="ym_vozn" column="val" as="ym_vozn" />
            </call>
          </call>
          <column table="this" column="nach_av_cm" />
        </call>
        <call function="greatest" as="nach_av_norm">
          <call function="smallest nvl" type="number">
            <column table="this" column="nach_av_for_first_sf" />
            <column table="this" column="nach_osn_cm" />
          </call>
          <const>0</const>
        </call>
        <call function="-nvl" as="nach_osn_norm">
          <column table="this" column="nach_osn" />
          <column table="this" column="nach_av_norm" />
        </call>
        <call function="over" as="perc" type="number">
          <call function="sum">
            <fact column="sr_facvip_perc_sum" table="av" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_dog" />
            <column table="this" column="ym_vozn" />
          </call>
        </call>
      </select>
      <from>
        <qube star-scheme="1">
          <dimset as="osn">
            <link name="kod_dog" />
            <link name="kod_sf" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>2</const>
                  <const>3</const>
                </call>
              </call>
            </where>
          </dimset>
          <dimset as="av">
            <link name="kod_dog" />
            <link name="vid_real" />
            <link name="ym_vozn" />
            <where>
              <call function="in">
                <column table="vid_real" column="vid_real" />
                <call function="array">
                  <const>0</const>
                </call>
              </call>
            </where>
          </dimset>
        </qube>
      </from>
    </query>
    <query name="sr_facvip_norm_av_av_rm" timestamp="05.05.2021 11:39:34" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" class="1" use-repository="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <call function="ym end time" as="dat_dolg_norm" dimension="dat_dolg_norm">
          <column table="kod_sf" column="ym_vozn" />
        </call>
        <call function="ym end time" as="dat_vozn_norm" dimension="dat_vozn_norm">
          <column table="kod_sf" column="ym_vozn" />
        </call>
        <column table="a" column="nach_av_norm" fact="sr_facvip_norm_av_av_nach_rm" agg="sum" as="nach_av_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" />
        <call function="if" as="ym_vist" type="number" dimension="ym_vist">
          <call function="in">
            <column table="a" column="perc" />
            <call function="array">
              <const>80</const>
              <const>90</const>
              <const>100</const>
            </call>
          </call>
          <call function="ym add month">
            <column table="kod_sf" column="ym" />
            <const>-1</const>
          </call>
          <column table="kod_sf" column="ym" />
        </call>
      </select>
      <from>
        <query name="sr_facvip_norm_av_rm" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facvip_norm_av_av_rm">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facvip_norm_av_rm" stored="vv_sr_facvip_norm_av" timestamp="09.03.2021 15:01:26" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" intrval="FREQ=HOURLY; INTERVAL=1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml">
      <select>
        <column table="a" column="kod_sf" as="kod_sf" key="0" />
        <column table="a" column="nach_av_norm" as="nach_av_norm" key="0" />
        <column table="a" column="nach_osn_norm" as="nach_osn_norm" key="0" />
        <column table="a" column="kod_ur_state" as="kod_ur_state" key="0" is-fact-use="1" />
        <column table="a" column="perc" as="perc" key="0" />
      </select>
      <from>
        <query name="sr_facvip_norm_av1_rm" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_facvip_norm_av_rm">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="a" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facvip_norm_av_osn_rm" timestamp="05.05.2021 11:43:16" comment="Уменьшение начислений авансов чтобы они не превышали осн реал. для сверхнорм" use-repository="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" key="1" as="kod_sf" />
        <column table="kod_sf" column="dat_dolg_norm" dimension="dat_dolg_norm" as="dat_dolg_norm" />
        <column table="kod_sf" column="dat_dolg_norm" dimension="dat_vozn_norm" as="dat_vozn_norm" />
        <column table="a" column="nach_osn_norm" fact="sr_facvip_norm_av_osn_nach_rm" agg="sum" as="nach_osn_norm" />
        <column table="kod_sf" column="ym" as="ym_potr" dimension="ym_potr" is-final-dimension="1" is-private-dimension="1" />
        <call as="ym_vist" function="ym add month" dimension="ym_vist" is-final-dimension="1" is-private-dimension="1">
          <column table="kod_sf" column="ym" />
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="sr_facvip_norm_av_rm" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facvip_norm_av_osn_rm">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl_sf" class="1" inherit="sr_opl" timestamp="21.12.2022 21:18:45" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" dimension="dat_dolg_uved_kaz_el" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" fact="sr_opl_opl_sf_out_spis" agg="sum" title="Оплата начислений" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" fact="sr_opl_opl_sf_spis" agg="sum" title="Оплата начислений" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_sf_dat_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" is-private-dimension="pr_spis_tt" is-final-dimension="pr_spis_tt" dimension="pr_spis_tt" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_sf" table="this" column="oplf" fact="sr_opl_opl_sf" agg="sum" title="Оплата начислений" key="0" />
        <column table="this" column="num_opl" as="num_opl_d" is-private-dimension="asuse_num" is-final-dimension="asuse_num" dimension="asuse_num" key="0" />
        <column table="kod_sf" column="ym_vozn" dimension="ym_vozn" as="ym_vozn" key="0" />
        <column table="kod_sf" column="rym" dimension="ym_vozn2" as="ym_vozn2" key="0" />
        <call function="latest" as="dat_oper_dolg" type="date" title="Дата операции оплаты задолженности" dimension="dat_dolg" key="0">
          <column table="kod_sf" column="dat_bzad" />
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" as="dat_oper_dolg_out" type="date" title="Дата операции оплаты задолженности" dimension="dat_dolg_out" is-private-dimension="dat_dolg_out" is-final-dimension="dat_dolg_out" key="0">
          <call function="is not null">
            <column table="kod_sf" column="dat_ezad" />
          </call>
          <call function="latest">
            <column table="kod_sf" column="dat_ezad" />
            <column table="this" column="dat_uch" />
          </call>
        </call>
        <column table="this" column="dat_oper" as="dat_norm" dimension="dat_dolg_norm" key="0" />
        <column table="kod_sf" column="dat_dolg_norm" as="dat_norm_sf" key="0" />
        <column table="this" column="dat_oper" as="dat" dimension="dat" key="0" />
        <column table="this" column="dat_oper" as="dat_recalc" dimension="dat_recalc" is-private-dimension="dat_recalc" is-final-dimension="dat_recalc" key="0" />
        <column table="kod_sf" column="vid_real_no_av" dimension="vid_real_no_av" as="vid_real_no_av1" key="0" />
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_sf" field="kod_parent" parent="sr_opl" back="sr_opl_sf" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_sf" field="kod_link" parent="sr_opl_bank" back="sr_opl_sf">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_sf" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_sf" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_sf" field="kod_sf" parent="sr_facvip" back="sr_opl_sf">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_sf" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_sf">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_sf" field="kod_dog" parent="kr_dogovor" back="sr_opl_sf" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_sf" field="kod_sf" parent="sr_facvip" back="sr_opl_sf">
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_stage_bk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_opl" as="kod_opl1" table="sr_opl" child="sr_opl_sf" field="kod_opl" parent="sr_opl" back="sr_opl_sf">
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_type_opl" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_sf" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_sf" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_sf" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_sf" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_sf">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="1" dname="sr_opl_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_type_opl" join="left outer" dimension="1" as="sk_type_opl" dname="sr_opl_sf" title="Тип оплаты">
          <call function="=">
            <column table="sk_type_opl" column="kod_type_opl" />
            <column table="this" column="kod_type_opl" />
          </call>
        </query>
        <query name="ss_vidopl" join="left outer" dimension="1" as="ss_vidopl" dname="sr_opl_sf">
          <call function="=">
            <column table="kod_vidopl" column="kod_vidopl" />
            <column table="this" column="kod_vidopl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" />
          <call function="array">
            <const>0</const>
            <const>2</const>
            <const>3</const>
            <const>4</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_sf" as="kod_sf1">
          <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
          <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_mat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_kazn" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_isp_other" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
          <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
          <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
          <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_stage_bk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
        <link name="kod_opl" as="kod_opl1">
          <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="dat_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_type_opl" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="sr_opl_kred" class="1" inherit="sr_opl" timestamp="04.07.2021 18:37:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" fact="sr_opl_opl_kred" agg="sum" title="Оплата (кредит)" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="ym_root" dimension="ym_vozn" as="ym_vozn" key="0" />
        <column table="this" column="ym_root" dimension="ym_vozn2" as="ym_vozn2" key="0" />
        <column table="this" column="dat_oper" as="dat_norm" dimension="dat_dolg_norm" key="0" />
        <column table="this" column="dat_oper" as="dat_dolg" dimension="dat_dolg" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" type="date" as="dat_dolg_uved_kaz_el" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <call function="latest">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_ezad_uved_kaz_el" />
          </call>
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" type="date" as="dat_kred" title="когда авансы становятся кредитом" dimension="dat_kred" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <call function="latest">
            <column table="this" column="dat_uch" />
            <call function="nvl">
              <column table="kod_sf" column="dat_ezad" />
              <call function="doomsday" />
            </call>
          </call>
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" type="number" as="kod_sf_kred" dimension="kod_sf" is-final-dimension="1" is-private-dimension="1" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <column table="this" column="kod_sf" />
        </call>
        <const type="number" as="cnt" fact="sr_opl_kred_count" agg="sum" key="0">1</const>
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_kred" field="kod_parent" parent="sr_opl" back="sr_opl_kred" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_kred" field="kod_link" parent="sr_opl_bank" back="sr_opl_kred">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_kred" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_kred" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_kred" field="kod_sf" parent="sr_facvip" back="sr_opl_kred">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_kred" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_kred">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_kred" field="kod_dog" parent="kr_dogovor" back="sr_opl_kred" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="sr_opl_kred" field="kod_dog" parent="kr_dogovor" back="sr_opl_kred" title="Договор">
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kod_opl" as="kod_opl" table="sr_opl" child="sr_opl_kred" field="kod_opl" parent="sr_opl" back="sr_opl_kred">
            <dimlink name="ym" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="dat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
          </link>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_kred" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_kred" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_kred" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_kred" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_kred">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" is-final-dimension="1" is-private-dimension="1" dname="sr_opl_kred" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ss_vidopl" join="left outer" dimension="1" as="ss_vidopl" dname="sr_opl_kred">
          <call function="=">
            <column table="kod_vidopl" column="kod_vidopl" />
            <column table="this" column="kod_vidopl" />
          </call>
        </query>
        <query name="sk_type_opl" join="left outer" dimension="1" as="sk_type_opl" dname="sr_opl_kred" title="Тип оплаты">
          <call function="=">
            <column table="sk_type_opl" column="kod_type_opl" />
            <column table="this" column="kod_type_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" />
          <call function="array">
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_dog">
          <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
        <link name="kod_opl">
          <dimlink name="ym" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="dat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="vid_real" dimension="1" />
        </link>
      </links>
    </query>
    <query name="sr_opl_stor" class="1" inherit="sr_opl" timestamp="25.07.2018 18:42:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_stor" table="this" column="oplf" fact="sr_opl_opl_stor" agg="sum" title="Оплата (сторно)" key="0" />
        <column table="this" column="dat_oper" dimension="dat" as="dat_oper1" key="0" />
        <column table="kod_opl_kred" column="ym_root" dimension="ym_vozn" as="ym_vozn" key="0" />
        <column table="kod_opl_kred" column="ym_root" dimension="ym_vozn2" as="ym_vozn2" key="0" />
        <column table="this" column="dat_oper" as="dat_norm" dimension="dat_dolg_norm" key="0" />
        <column table="this" column="dat_oper" as="dat_dolg" dimension="dat_dolg" key="0" />
        <call function="latest" dimension="dat_dolg_uved_kaz_el" as="dat_dolg_uved_kaz_el" key="0">
          <column table="a" column="dat_uch" />
          <column table="kod_opl_kred" column="dat_dolg_uved_kaz_el" />
        </call>
        <call function="latest" as="dat_kred" dimension="dat_kred" key="0">
          <column table="a" column="dat_uch" />
          <column table="kod_opl_kred" column="dat_kred" />
        </call>
        <column table="kod_opl_kred" column="kod_sf_kred" dimension="kod_sf" is-final-dimension="1" is-private-dimension="1" as="kod_sf_kred" key="0" />
        <column table="kod_opl_kred" column="vid_real_no_av" dimension="vid_real_no_av" is-final-dimension="1" is-private-dimension="1" as="vid_real_no_av1" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_stor" field="kod_parent" parent="sr_opl" back="sr_opl_stor" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_stor" field="kod_link" parent="sr_opl_bank" back="sr_opl_stor">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_stor" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_stor" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_stor" field="kod_sf" parent="sr_facvip" back="sr_opl_stor">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_stor" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_stor">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_stor" field="kod_dog" parent="kr_dogovor" back="sr_opl_stor" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <link name="kod_opl_kred" as="kod_opl_kred" table="sr_opl_kred" child="sr_opl_stor" field="kod_opl_kred" parent="sr_opl_kred" back="sr_opl_stor">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_vidopl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_type_opl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_stor" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_stor" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_stor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_stor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_stor">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_kred" as="kod_opl_kred" join="left outer" dimension="1" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl_kred" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" />
          <call function="array">
            <const>5</const>
            <const>6</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_opl_kred">
          <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_vidopl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_type_opl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="sr_opl_kassa" class="1" inherit="sr_opl" timestamp="11.08.2017 13:31:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" dimension="dat" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_kassa" table="this" column="oplf" fact="sr_opl_opl_kassa" agg="sum" title="Оплата в кассу" key="0" />
        <call as="opl_kassa_cash" function="if" fact="sr_opl_opl_kassa_cash" agg="sum" key="0">
          <call function="=">
            <column table="kod_vidopl" column="alg" />
            <const>1</const>
          </call>
          <column table="this" column="opl_kassa" />
        </call>
        <call as="opl_kassa_card" function="if" fact="sr_opl_opl_kassa_card" agg="sum" key="0">
          <call function="=">
            <column table="kod_vidopl" column="alg" />
            <const>2</const>
          </call>
          <column table="this" column="opl_kassa" />
        </call>
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_kassa" field="kod_parent" parent="sr_opl" back="sr_opl_kassa" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_kassa" field="kod_link" parent="sr_opl_bank" back="sr_opl_kassa">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_kassa" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_kassa" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_kassa" field="kod_sf" parent="sr_facvip" back="sr_opl_kassa">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_kassa" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_kassa">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_kassa" field="kod_dog" parent="kr_dogovor" back="sr_opl_kassa" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_kassa" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_kassa" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_kassa" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_kassa" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_kassa">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_kassa">
          <call function="=">
            <column table="this" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="kod_vidopl" column="alg" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="is null" comment="33324(48)">
            <column table="sr_recalc_opl" column="kod_recalc" />
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl(date)" inherit="sr_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <params>
        <param name="date" type="date" />
      </params>
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="storno" column="oplf" as="storno" dgroup="sum" title="Сторно аванса/переплаты (руб.)" key="0" />
        <call function="+nvl" as="ostatok_kred" title="Кредиторская задолженность(руб.)" key="0">
          <column table="this" column="opl_kred" />
          <column table="this" column="storno" />
        </call>
      </select>
      <links>
        <dlink name="storno"></dlink>
      </links>
      <where>
        <call function="le">
          <column table="a" column="ym" />
          <call function="date to ym">
            <useparam name="date" />
          </call>
        </call>
      </where>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl(date)" field="kod_parent" parent="sr_opl" back="sr_opl(date)" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl(date)" field="kod_link" parent="sr_opl_bank" back="sr_opl(date)">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl(date)" field="kod_opl_text" parent="sr_opl_text" back="sr_opl(date)" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl(date)" field="kod_sf" parent="sr_facvip" back="sr_opl(date)">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl(date)" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl(date)">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl(date)" field="kod_dog" parent="kr_dogovor" back="sr_opl(date)" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <dlink name="storno" as="storno" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno"></dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl(date)" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl(date)" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl(date)" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl(date)" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl(date)">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="tsr_opl_izv" class="1" inherit="tsr_opl" timestamp="04.02.2016 16:49:58" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl_byt" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" comment="1" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" comment="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="num_opl" type="string" title="" comment="1" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Оплата" fact="tsr_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="" dimension="ym" fact="tsr_opl_ym_max" agg="max" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_dest" type="number" comment="1" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" comment="1" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="" fact="tsr_opl_dat_opl_max" agg="max" dimension="dat_dolg" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="казань: код объекта, указывается для переплаты по объекту" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="казань: тип тарифной зоны (0 - ночная, 1 - дневная или суточная, 2 - моп), указывается только для переплаты, как уточнение к kod_point_tar. nb: для преплат не по счётчикам и не по моп = 1." as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="t_zona" type="number" title="" as="t_zona" key="0" />
        <column table="a" column="dat_bal" type="date" title="" comment="дата балансировки" as="dat_bal" key="0" />
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep" key="0" />
        <call function="if" as="dat_oper" type="date" title="Дата операции" dimension="dat" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="dat_opl" />
          <call function="ym end time">
            <column table="a" column="ym" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_izv" table="this" column="opl" fact="tsr_opl_opl_izv" agg="sum" title="Оплата начислений" key="0" />
        <call function="if" as="dat_oper_dolg" type="date" title="Дата операции оплаты задолженности" dimension="dat_dolg" key="0">
          <call function="gt">
            <column table="kod_izv" column="dat_bzad" />
            <column table="this" column="dat_oper" />
          </call>
          <column table="kod_izv" column="dat_bzad" />
          <column table="this" column="dat_oper" />
        </call>
      </select>
      <from>
        <table name="tsr_opl" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dname="tsr_opl_izv" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="kod_izv" dname="tsr_opl_izv" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="tsr_opl_izv" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="tsr_opl_izv" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent_kred" dname="storno">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="tsr_opl" as="kod_opl" join="left outer" dimension="1" dname="tsr_opl_izv">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" />
          <call function="array">
            <const>0</const>
            <const>3</const>
            <const>4</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_astr" inherit="sr_opl" class="1" timestamp="23.06.2021 02:57:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" is-private-dimension="pr_spis_tt" is-final-dimension="pr_spis_tt" dimension="pr_spis_tt" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="oplf" as="opl_astr" fact="fin_ul_opl_astr" agg="sum" title="Оплачено астрент" key="0" />
        <column table="this" column="dat_opl" as="dat" dimension="dat" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_astr" field="kod_parent" parent="sr_opl" back="sr_opl_astr" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_astr" field="kod_link" parent="sr_opl_bank" back="sr_opl_astr">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_astr" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_astr" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_astr" field="kod_sf" parent="sr_facvip" back="sr_opl_astr">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_astr" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_astr">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_astr" field="kod_dog" parent="kr_dogovor" back="sr_opl_astr" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <link name="kod_sf_astr" as="kod_sf_astr1" table="sr_facvip_astr" child="sr_opl_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_opl_astr">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" />
          </link>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_astr" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_astr" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_astr" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_astr" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_astr">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip_astr" as="kod_sf_astr" join="left outer" dimension="kod_sf_astr" dname="sr_opl_astr">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_astr" column="kod_sf" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_sf_astr" as="kod_sf_astr1">
          <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" />
        </link>
      </links>
    </query>
    <query name="sr_opl_kred_ur" class="1" inherit="sr_opl" timestamp="19.03.2021 17:21:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" is-private-dimension="pr_spis_tt" is-final-dimension="pr_spis_tt" dimension="pr_spis_tt" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_kred_ur" table="this" column="oplf" fact="sr_opl_kred_ur" agg="sum" title="Оплата (кредит)" key="0" />
        <column table="this" column="dat_opl" as="dat" dimension="dat" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_kred_ur" field="kod_parent" parent="sr_opl" back="sr_opl_kred_ur" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_kred_ur" field="kod_link" parent="sr_opl_bank" back="sr_opl_kred_ur">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_kred_ur" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_kred_ur" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_kred_ur" field="kod_sf" parent="sr_facvip" back="sr_opl_kred_ur">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_kred_ur" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_kred_ur">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_kred_ur" field="kod_dog" parent="kr_dogovor" back="sr_opl_kred_ur" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_kred_ur" field="kod_link" parent="sr_opl_bank" back="sr_opl_kred_ur">
            <link name="kod_mat" dimension="1" as="kod_mat" table="ur_mat" child="sr_opl_bank" field="kod_mat" parent="ur_mat" back="sr_opl_bank" title="Материалы переданные в суд" />
            <link name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_mat_pp" table="ur_mat_pp" child="sr_opl_bank" field="kod_mat_pp" parent="ur_mat_pp" back="sr_opl_bank" title="Иск">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_hist_mat_dec" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_folders" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_folders_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_dogplat" is-final-dimension="1" is-private-dimension="1" dimension="1" />
              <dimlink name="kod_hist_mat" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            </link>
          </link>
          <link name="kod_opl" as="kod_opl1" table="sr_opl" child="sr_opl_kred_ur" field="kod_opl" parent="sr_opl" back="sr_opl_kred_ur">
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_kred_ur" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_kred_ur" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_kred_ur" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_kred_ur" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_kred_ur">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_link" as="kod_link1">
          <link name="kod_mat" dimension="1" />
          <link name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1">
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_dec" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_folders" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_folders_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dogplat" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </link>
        </link>
        <link name="kod_opl" as="kod_opl1">
          <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <where>
        <call function="and">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
              <const>5</const>
              <const>6</const>
            </call>
          </call>
          <call function="is not null">
            <column table="kod_link" column="kod_mat" />
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_bnk" class="1" inherit="sr_opl" timestamp="11.01.2018 08:55:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_bnk" table="this" column="oplf" fact="sr_opl_opl_bnk" agg="sum" title="Оплата (поступление на счет)" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_bnk" field="kod_parent" parent="sr_opl" back="sr_opl_bnk" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_bnk" field="kod_link" parent="sr_opl_bank" back="sr_opl_bnk">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_bnk" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_bnk" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_bnk" field="kod_sf" parent="sr_facvip" back="sr_opl_bnk">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_bnk" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_bnk">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_bnk" field="kod_dog" parent="kr_dogovor" back="sr_opl_bnk" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_bnk" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_bnk" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_bnk" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_bnk" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_bnk">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_bnk">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="this" column="kod_type_opl" />
          <call function="array">
            <const>0</const>
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_sf_stor" class="1" inherit="sr_opl" timestamp="12.09.2017 02:36:39" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column as="opl_sf" table="this" column="oplf" fact="sr_opl_opl_sf_stor" agg="sum" title="Оплата начислений" key="0" />
        <column table="kod_sf" column="ym_vozn" dimension="ym_vozn" as="ym_vozn" key="0" />
        <column table="kod_sf" column="rym" dimension="ym_vozn2" as="ym_vozn2" key="0" />
        <call function="latest" as="dat_oper_dolg" type="date" title="Дата операции оплаты задолженности" dimension="dat_dolg" key="0">
          <column table="kod_sf" column="dat_bzad" />
          <column table="this" column="dat_uch" />
        </call>
        <column table="this" column="dat_oper" as="dat_norm" dimension="dat_dolg_norm" key="0" />
        <column table="this" column="dat_oper" as="dat_dolg_uved_kaz_el" dimension="dat_dolg_uved_kaz_el" key="0" />
        <column table="this" column="dat_oper" as="dat" dimension="dat" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_sf_stor" field="kod_parent" parent="sr_opl" back="sr_opl_sf_stor" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_sf_stor" field="kod_link" parent="sr_opl_bank" back="sr_opl_sf_stor">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_sf_stor" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_sf_stor" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_sf_stor" field="kod_sf" parent="sr_facvip" back="sr_opl_sf_stor">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_sf_stor" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_sf_stor">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_sf_stor" field="kod_dog" parent="kr_dogovor" back="sr_opl_sf_stor" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_sf_stor" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_sf_stor" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_sf_stor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_sf_stor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_sf_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>6</const>
            </call>
          </call>
          <call function="in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_rsrv_nal_45" class="1" inherit="sr_opl" timestamp="22.12.2016 05:03:21" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="latest" as="dat_res" type="date" dimension="dat" key="0">
          <column table="kod_sf" column="dat_res_nal_45" />
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" type="number" as="nachisl_rsrv" fact="sr_opl_rsrv_nal_45_nach" agg="sum" key="0">
          <call function="le">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_nal_45" />
          </call>
          <call function="/">
            <call function="0-">
              <column table="this" column="opl" />
            </call>
            <const>2</const>
          </call>
        </call>
        <call function="if" type="number" as="opl_rsrv" fact="sr_opl_rsrv_nal_45_opl" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_nal_45" />
          </call>
          <call function="/">
            <column table="this" column="opl" />
            <const>2</const>
          </call>
        </call>
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_rsrv_nal_45" field="kod_parent" parent="sr_opl" back="sr_opl_rsrv_nal_45" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_rsrv_nal_45" field="kod_link" parent="sr_opl_bank" back="sr_opl_rsrv_nal_45">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_rsrv_nal_45" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_rsrv_nal_45" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_rsrv_nal_45" field="kod_sf" parent="sr_facvip" back="sr_opl_rsrv_nal_45">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_rsrv_nal_45" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_rsrv_nal_45">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_rsrv_nal_45" field="kod_dog" parent="kr_dogovor" back="sr_opl_rsrv_nal_45" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_rsrv_nal_45" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_45" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_rsrv_nal_45" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_rsrv_nal_45" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_45">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <call function="in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>2</const>
            </call>
          </call>
          <call function="le">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_nal_90" />
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_rsrv_nal_90" class="1" inherit="sr_opl" timestamp="22.12.2016 05:02:29" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="latest" as="dat_res" type="date" dimension="dat" key="0">
          <column table="kod_sf" column="dat_res_nal_90" />
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" type="number" as="nachisl_rsrv" fact="sr_opl_rsrv_nal_90_nach" agg="sum" key="0">
          <call function="le">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_nal_90" />
          </call>
          <call function="/">
            <call function="0-">
              <column table="this" column="opl" />
            </call>
            <const>2</const>
          </call>
        </call>
        <call function="if" type="number" as="opl_rsrv" fact="sr_opl_rsrv_nal_90_opl" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_nal_90" />
          </call>
          <column table="this" column="opl" />
        </call>
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_rsrv_nal_90" field="kod_parent" parent="sr_opl" back="sr_opl_rsrv_nal_90" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_rsrv_nal_90" field="kod_link" parent="sr_opl_bank" back="sr_opl_rsrv_nal_90">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_rsrv_nal_90" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_rsrv_nal_90" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_rsrv_nal_90" field="kod_sf" parent="sr_facvip" back="sr_opl_rsrv_nal_90">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_rsrv_nal_90" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_rsrv_nal_90">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_rsrv_nal_90" field="kod_dog" parent="kr_dogovor" back="sr_opl_rsrv_nal_90" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_rsrv_nal_90" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_90" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_rsrv_nal_90" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_rsrv_nal_90" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_rsrv_nal_90">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <call function="in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_rsrv_buh" class="1" inherit="sr_opl" timestamp="22.12.2016 03:30:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="latest" as="dat_res" type="date" dimension="dat" key="0">
          <column table="kod_sf" column="dat_res_buh" />
          <column table="this" column="dat_uch" />
        </call>
        <call function="if" type="number" as="nachisl_rsrv" fact="sr_opl_rsrv_buh_nach" agg="sum" key="0">
          <call function="le">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_buh" />
          </call>
          <call function="0-">
            <column table="this" column="opl" />
          </call>
        </call>
        <call function="if" type="number" as="opl_rsrv" fact="sr_opl_rsrv_buh_opl" agg="sum" key="0">
          <call function="gt">
            <column table="this" column="dat_uch" />
            <column table="kod_sf" column="dat_res_buh" />
          </call>
          <column table="this" column="opl" />
        </call>
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl_rsrv_buh" field="kod_parent" parent="sr_opl" back="sr_opl_rsrv_buh" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl_rsrv_buh" field="kod_link" parent="sr_opl_bank" back="sr_opl_rsrv_buh">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl_rsrv_buh" field="kod_opl_text" parent="sr_opl_text" back="sr_opl_rsrv_buh" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl_rsrv_buh" field="kod_sf" parent="sr_facvip" back="sr_opl_rsrv_buh">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl_rsrv_buh" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl_rsrv_buh">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl_rsrv_buh" field="kod_dog" parent="kr_dogovor" back="sr_opl_rsrv_buh" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl_rsrv_buh" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl_rsrv_buh" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl_rsrv_buh" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl_rsrv_buh" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="1" dname="sr_opl_rsrv_buh">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="this" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>3</const>
              <const>4</const>
            </call>
          </call>
          <call function="in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_sf_dp" timestamp="20.11.2017 19:41:16" class="1" order="dat_opl, num_opl" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml">
      <params>
        <param name="kod_dogplat" type="number">
          <const>1000000908</const>
        </param>
      </params>
      <select>
        <column table="kod_opl_sf" column="kod_opl" as="kod_opl" />
        <column table="kod_opl_sf" column="num_opl" column-editable="0" as="num_opl" />
        <fact column="sr_opl_opl_sf" title="Оплачено с налогом, руб." as="opl" is-fact-use="1" />
        <column table="kod_opl_sf" column="dat_opl" column-editable="0" as="dat_opl" />
        <column table="vid_real" column="sname" title="Вид реализации" column-editable="0" as="vid_real_name" />
        <column table="kod_vidopl" column="full_name" title="Вид оплаты" column-editable="0" as="vid_opl_name" />
        <column table="kod_type_opl" column="name" title="Тип оплаты" column-editable="0" as="type_opl_name" />
        <column table="kod_link" column="remark" title="Примечания к банк. оплате" column-editable="0" as="prim_bank" />
        <column table="sr_opl_text" column="prim" dgroup="max" title="Примечания к разносу оплаты" column-editable="0" as="prim_raznos" />
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kod_opl_sf">
            <link name="kod_opl">
              <link name="vid_real" />
              <link name="kod_vidopl" />
              <link name="kod_type_opl" />
              <link name="kod_link" />
              <dlink name="sr_opl_text" />
            </link>
          </link>
          <link name="kod_dogplat" only-for-cond="1" />
          <where>
            <call function="and">
              <call function="=">
                <column table="kod_dogplat" column="kod_dogplat" />
                <useparam name="kod_dogplat" />
              </call>
            </call>
          </where>
        </qube>
      </from>
      <order>
        <column column="dat_opl" />
        <column column="num_opl" />
      </order>
    </query>
    <query name="sr_opl_sf_isp" timestamp="23.06.2021 04:12:27" class="1" order="dat_opl, num_opl" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl.xml">
      <params>
        <param name="kod_isp" type="number">
          <const>85</const>
        </param>
      </params>
      <select>
        <column table="kod_opl" column="kod_opl" as="kod_opl" />
        <column table="kod_isp" column="num_reg" as="num_reg" />
        <column table="kodp" column="nump" as="nump" />
        <column table="kod_dog" column="ndog" as="ndog" />
        <call function="ym to char" as="sym" title="Период оплаты">
          <column table="kod_opl" column="ym" />
        </call>
        <column table="kod_opl" column="dat_opl" as="dat_opl" />
        <column table="kod_opl" column="num_opl" column-editable="0" title="Номер документа оплаты" as="num_opl" />
        <call function="decode" as="type_opl" type="string" title="Тип оплаты">
          <column table="kod_type_opl" column="kod_type_opl" />
          <const>0</const>
          <const>'Разнесено на плат.док-ты'</const>
          <column table="kod_type_opl" column="name" />
        </call>
        <column table="vid_real" column="name" as="vid_real" />
        <fact column="ur_opl_posl_il" title="Оплата, руб." as="opl" is-fact-use="1" />
        <column table="kod_sf" column="nom_sf" title="Номер документа на оплату" as="num_sf" />
        <column table="kod_sf" column="dat_sf" title="Дата документа на оплату" as="dat_sf" />
        <column table="kod_sf" column="nachisl" title="Начисления, руб." as="nachisl" />
        <call function="ym to char" as="sf_sym" title="Период начисления">
          <column table="kod_sf" column="ym" />
        </call>
        <column table="kodbps" column="name" title="Банк получателя" as="kodbpol_name" />
        <column table="kodbpol" column="rs" title="Р/сч" as="rs" />
        <column table="kod_link" column="pname" title="Информация о плательщике" controlType="UITextEx" as="pname" />
        <column table="kodb" column="name" as="kodb_name" title="Банк плательщика" />
        <column table="kod_link" column="remark" title="Примечание 1" controlType="UITextEx" as="remark" />
        <column table="kod_link" column="prim" title="Примечание 2" controlType="UITextEx" as="prim" />
      </select>
      <from>
        <qube star-scheme="1">
          <link name="kod_opl">
            <link name="kod_sf" />
            <link name="vid_real" />
            <link name="kod_vidopl" />
            <link name="kod_type_opl" />
            <link name="kod_link">
              <link name="kodbpol">
                <link name="kodb" as="kodbps" />
              </link>
              <link name="kodb" />
            </link>
            <link name="vid_real" />
          </link>
          <link name="kod_isp" />
          <link name="kod_dog" />
          <link name="kodp" />
          <where>
            <call function="and">
              <call function="=">
                <column table="kod_isp" column="kod_isp" />
                <useparam name="kod_isp" />
              </call>
            </call>
          </where>
        </qube>
      </from>
      <where>
        <call function="!=nvl">
          <column table="this" column="opl" />
          <const>0</const>
        </call>
      </where>
      <order>
        <column column="dat_opl" />
        <column column="num_opl" />
      </order>
    </query>
    <query name="sr_opl_bank_main" inherit="sr_opl_bank" timestamp="12.04.2019 16:15:32" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" as="kod_link" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="pname" type="string" title="Плательщик" as="pname" key="0" />
        <column table="a" column="paccount" type="string" title="" as="paccount" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата оплаты" dimension="dat" comment="дата поступления оплаты (т. е. момент когда об оплате стало известно энергосбыту)" as="dat_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер документа оплаты" as="num_opl" key="0" />
        <column table="a" column="ndog" type="string" title="" comment="номер договора" as="ndog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_pl" type="number" title="" as="num_pl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" as="pr_raznos" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="remark" type="string" title="Назначение платежа" as="remark" key="0" />
        <column table="a" column="ym_vyp" type="number" title="" comment="период выписки (yyyy.mm)" as="ym_vyp" key="0" />
        <column table="a" column="tek_pok" type="number" title="" as="tek_pok" key="0" />
        <column table="a" column="pred_pok" type="number" title="" as="pred_pok" key="0" />
        <column table="a" column="rashod" type="number" title="" as="rashod" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="pr_kvit" type="number" title="" comment="исключить из выписки (юл)" as="pr_kvit" key="0" />
        <column table="a" column="kod_pach" type="number" as="kod_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="ym_vyp_po" type="number" title="" as="ym_vyp_po" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="владелец записи" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда создано" as="d_c" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kodb" type="number" title="" comment="банк-источник " as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_fact" type="date" title="Дата платежа" comment="фактическая дата оплаты (т.к. момент когда абонент перечислил деньги)" as="dat_fact" key="0" />
        <column table="a" column="pr_imported" type="number" title="" comment="признак импортированной оплаты. 1 - строка была импортирована; 0 - заведена в асусэ" as="pr_imported" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер по порядку оплаты внутри выписки" as="npp" key="0" />
        <column table="a" column="kod_kazn" type="number" comment="код казначейства, если абонент платит через казначейство" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="kod_sr_pach" type="number" comment="ссылка на код пачки (юрлица). это не совсем пачка, а скорее файл с оплатами - по ним надо держать кое-какую статистику" as="kod_sr_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="тариф, на который должна быть повешена оплата" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="num_delo" type="string" title="" comment="номер судебного приказа для оплат судебной задолженности (служба судебных приставов)" as="num_delo" key="0" />
        <column table="a" column="raznos_type" type="number" title="" comment="тип разноса: null - не разнесено, 0 - неизвестный, 1 - автоматический разнос, 2 - ручной разнос, 3 - автоматическая балансировка, 4 - ручная балансировка" as="raznos_type" key="0" />
        <column table="a" column="check_num" type="number" title="" comment="номер фискального чека" as="check_num" key="0" />
        <column table="a" column="kod_mat" type="number" comment="связь с иском (переплаты по гп, владивосток)" as="kod_mat" key="0" />
        <column table="a" column="parse_result" type="clob" title="" comment="результат разбора назначения платежа в виде xml" as="parse_result" key="0" />
        <column table="a" column="num_isp" type="string" title="" comment="номер исполнительного листа, распарсенный из назначения платежа" as="num_isp" key="0" />
        <column table="a" column="ym_vyp_txt" type="string" title="" comment="период выписки (текст)" as="ym_vyp_txt" key="0" />
        <call function="date to ym" as="ym_opl" key="0">
          <column table="this" column="dat_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="opl" agg="sum" fact="sr_opl_bank_main_opl" as="opl" key="0" />
        <call function="if" as="nds" title="Сумма НДС оплаты (руб.)" type="number" agg="sum" fact="sr_opl_bank_main_nds" key="0">
          <call function="ge">
            <column table="a" column="dat_fact" />
            <call function="to_date">
              <const type="date">'01.01.2019'</const>
              <const>'dd.mm.yyyy'</const>
            </call>
          </call>
          <call function="*">
            <call function="/">
              <column table="a" column="opl" />
              <const>120</const>
            </call>
            <const>20</const>20</call>
          <call function="*">
            <call function="/">
              <column table="a" column="opl" />
              <const>118</const>
            </call>
            <const>18</const>20</call>
        </call>
      </select>
      <from>
        <table name="sr_opl_bank" as="a">
          <dlink name="sr_opl_bank_main" dimension="1" as="sr_opl_bank_main" table="sr_opl_bank_main" child="sr_opl_bank_main" field="kod_opl_bank" parent="sr_opl_bank" back="sr_opl_bank_main" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep">
            <link name="dep" dimension="1" as="dep" table="kr_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep" />
          </dlink>
          <link name="kodp" as="kodp" table="kr_payer" child="sr_opl_bank_main" field="kodp" parent="kr_payer" back="sr_opl_bank_main" title="Абонент">
            <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <dlink name="sr_opl_bank_child" dimension="1" as="sr_opl_bank_child" table="sr_opl_bank_child" child="sr_opl_bank_child" field="kod_parent" parent="sr_opl_bank_main" back="sr_opl_bank_child" />
        </table>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dimension="1" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="sr_opl_bank_main" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_parent" join="left outer" dname="sr_opl_bank_parent">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_link" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="sr_opl_bank_main" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="sr_pach" as="kod_sr_pach" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_sr_pach" />
            <column table="kod_sr_pach" column="kod_pach" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="sr_opl_bank_main" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="sr_pach" as="kod_pach" join="left outer" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_pach" />
            <column table="kod_pach" column="kod_pach" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_opl_bank_main" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_opl_bank" join="left outer" dimension="1" dname="sr_opl_bank_main">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_opl_bank" column="kod_link" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="this" column="kod_parent" />
        </call>
      </where>
      <links>
        <dlink name="sr_opl_bank_child" dimension="1" />
      </links>
    </query>
    <query name="sr_opl_bank_child" inherit="sr_opl_bank" timestamp="12.04.2019 16:15:32" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" as="kod_link" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="pname" type="string" title="Плательщик" as="pname" key="0" />
        <column table="a" column="paccount" type="string" title="" as="paccount" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата оплаты" dimension="dat" comment="дата поступления оплаты (т. е. момент когда об оплате стало известно энергосбыту)" as="dat_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер документа оплаты" as="num_opl" key="0" />
        <column table="a" column="ndog" type="string" title="" comment="номер договора" as="ndog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_pl" type="number" title="" as="num_pl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" as="pr_raznos" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="remark" type="string" title="Назначение платежа" as="remark" key="0" />
        <column table="a" column="ym_vyp" type="number" title="" comment="период выписки (yyyy.mm)" as="ym_vyp" key="0" />
        <column table="a" column="tek_pok" type="number" title="" as="tek_pok" key="0" />
        <column table="a" column="pred_pok" type="number" title="" as="pred_pok" key="0" />
        <column table="a" column="rashod" type="number" title="" as="rashod" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="pr_kvit" type="number" title="" comment="исключить из выписки (юл)" as="pr_kvit" key="0" />
        <column table="a" column="kod_pach" type="number" as="kod_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="ym_vyp_po" type="number" title="" as="ym_vyp_po" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="владелец записи" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда создано" as="d_c" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kodb" type="number" title="" comment="банк-источник " as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_fact" type="date" title="Дата платежа" comment="фактическая дата оплаты (т.к. момент когда абонент перечислил деньги)" as="dat_fact" key="0" />
        <column table="a" column="pr_imported" type="number" title="" comment="признак импортированной оплаты. 1 - строка была импортирована; 0 - заведена в асусэ" as="pr_imported" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер по порядку оплаты внутри выписки" as="npp" key="0" />
        <column table="a" column="kod_kazn" type="number" comment="код казначейства, если абонент платит через казначейство" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="kod_sr_pach" type="number" comment="ссылка на код пачки (юрлица). это не совсем пачка, а скорее файл с оплатами - по ним надо держать кое-какую статистику" as="kod_sr_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="тариф, на который должна быть повешена оплата" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="num_delo" type="string" title="" comment="номер судебного приказа для оплат судебной задолженности (служба судебных приставов)" as="num_delo" key="0" />
        <column table="a" column="raznos_type" type="number" title="" comment="тип разноса: null - не разнесено, 0 - неизвестный, 1 - автоматический разнос, 2 - ручной разнос, 3 - автоматическая балансировка, 4 - ручная балансировка" as="raznos_type" key="0" />
        <column table="a" column="check_num" type="number" title="" comment="номер фискального чека" as="check_num" key="0" />
        <column table="a" column="kod_mat" type="number" comment="связь с иском (переплаты по гп, владивосток)" as="kod_mat" key="0" />
        <column table="a" column="parse_result" type="clob" title="" comment="результат разбора назначения платежа в виде xml" as="parse_result" key="0" />
        <column table="a" column="num_isp" type="string" title="" comment="номер исполнительного листа, распарсенный из назначения платежа" as="num_isp" key="0" />
        <column table="a" column="ym_vyp_txt" type="string" title="" comment="период выписки (текст)" as="ym_vyp_txt" key="0" />
        <call function="date to ym" as="ym_opl" key="0">
          <column table="this" column="dat_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="opl" agg="sum" fact="sr_opl_bank_child_opl" as="opl" key="0" />
        <column table="kod_vidopl" column="kod_tvidopl" as="kod_tvidopl" key="0" />
        <call function="if" as="nds" title="Сумма НДС оплаты (руб.)" type="number" agg="sum" fact="sr_opl_bank_child_nds" key="0">
          <call function="ge">
            <column table="a" column="dat_fact" />
            <call function="to_date">
              <const type="date">'01.01.2019'</const>
              <const>'dd.mm.yyyy'</const>
            </call>
          </call>
          <call function="*">
            <call function="/">
              <column table="a" column="opl" />
              <const>120</const>
            </call>
            <const>20</const>20</call>
          <call function="*">
            <call function="/">
              <column table="a" column="opl" />
              <const>118</const>
            </call>
            <const>18</const>20</call>
        </call>
      </select>
      <from>
        <table name="sr_opl_bank" as="a">
          <dlink name="sr_opl_bank_main" dimension="1" as="sr_opl_bank_main" table="sr_opl_bank_main" child="sr_opl_bank_main" field="kod_opl_bank" parent="sr_opl_bank" back="sr_opl_bank_main" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep">
            <link name="dep" dimension="1" as="dep" table="kr_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep" />
          </dlink>
          <link name="kodp" as="kodp" table="kr_payer" child="sr_opl_bank_child" field="kodp" parent="kr_payer" back="sr_opl_bank_child" title="Абонент">
            <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
        </table>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dimension="1" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="sr_opl_bank_child" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_parent" join="left outer" dname="sr_opl_bank_parent">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_link" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="sr_opl_bank_child" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="sr_pach" as="kod_sr_pach" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_sr_pach" />
            <column table="kod_sr_pach" column="kod_pach" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="sr_opl_bank_child" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="sr_pach" as="kod_pach" join="left outer" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_pach" />
            <column table="kod_pach" column="kod_pach" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_opl_bank_child" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
        <query name="sr_opl_bank_main" as="kod_parent" join="left outer" dimension="1" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl_bank_child">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl_bank_bro" as="kod_link_bro" join="left outer" dimension="1" dname="sr_opl_bank_child">
          <call function="and">
            <call function="=">
              <column table="kod_link_bro" column="kod_parent" />
              <column table="a" column="kod_parent" />
            </call>
            <call function="!=">
              <column table="kod_link_bro" column="kod_link" />
              <column table="a" column="kod_link" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="this" column="kod_parent" />
        </call>
      </where>
    </query>
    <query name="sr_opl_bank_bro" inherit="sr_opl_bank" timestamp="07.09.2016 13:31:48" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" as="kod_link" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="pname" type="string" title="Плательщик" as="pname" key="0" />
        <column table="a" column="paccount" type="string" title="" as="paccount" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата оплаты" dimension="dat" comment="дата поступления оплаты (т. е. момент когда об оплате стало известно энергосбыту)" as="dat_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер документа оплаты" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Сумма оплаты (руб.)" fact="sr_opl_bank_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ndog" type="string" title="" comment="номер договора" as="ndog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_pl" type="number" title="" as="num_pl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" as="pr_raznos" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="remark" type="string" title="Назначение платежа" as="remark" key="0" />
        <column table="a" column="ym_vyp" type="number" title="" comment="период выписки (yyyy.mm)" as="ym_vyp" key="0" />
        <column table="a" column="tek_pok" type="number" title="" as="tek_pok" key="0" />
        <column table="a" column="pred_pok" type="number" title="" as="pred_pok" key="0" />
        <column table="a" column="rashod" type="number" title="" as="rashod" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="pr_kvit" type="number" title="" comment="исключить из выписки (юл)" as="pr_kvit" key="0" />
        <column table="a" column="kod_pach" type="number" as="kod_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="ym_vyp_po" type="number" title="" as="ym_vyp_po" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="владелец записи" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда создано" as="d_c" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kodb" type="number" title="" comment="банк-источник " as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_fact" type="date" title="Дата платежа" comment="фактическая дата оплаты (т.к. момент когда абонент перечислил деньги)" as="dat_fact" key="0" />
        <column table="a" column="pr_imported" type="number" title="" comment="признак импортированной оплаты. 1 - строка была импортирована; 0 - заведена в асусэ" as="pr_imported" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер по порядку оплаты внутри выписки" as="npp" key="0" />
        <column table="a" column="kod_kazn" type="number" comment="код казначейства, если абонент платит через казначейство" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="kod_sr_pach" type="number" comment="ссылка на код пачки (юрлица). это не совсем пачка, а скорее файл с оплатами - по ним надо держать кое-какую статистику" as="kod_sr_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="тариф, на который должна быть повешена оплата" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="num_delo" type="string" title="" comment="номер судебного приказа для оплат судебной задолженности (служба судебных приставов)" as="num_delo" key="0" />
        <column table="a" column="raznos_type" type="number" title="" comment="тип разноса: null - не разнесено, 0 - неизвестный, 1 - автоматический разнос, 2 - ручной разнос, 3 - автоматическая балансировка, 4 - ручная балансировка" as="raznos_type" key="0" />
        <column table="a" column="check_num" type="number" title="" comment="номер фискального чека" as="check_num" key="0" />
        <column table="a" column="kod_mat" type="number" comment="связь с иском (переплаты по гп, владивосток)" as="kod_mat" key="0" />
        <column table="a" column="parse_result" type="clob" title="" comment="результат разбора назначения платежа в виде xml" as="parse_result" key="0" />
        <column table="a" column="num_isp" type="string" title="" comment="номер исполнительного листа, распарсенный из назначения платежа" as="num_isp" key="0" />
        <column table="a" column="ym_vyp_txt" type="string" title="" comment="период выписки (текст)" as="ym_vyp_txt" key="0" />
        <call function="date to ym" as="ym_opl" key="0">
          <column table="this" column="dat_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_opl_bank" as="a">
          <dlink name="sr_opl_bank_main" dimension="1" as="sr_opl_bank_main" table="sr_opl_bank_main" child="sr_opl_bank_main" field="kod_opl_bank" parent="sr_opl_bank" back="sr_opl_bank_main" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep">
            <link name="dep" dimension="1" as="dep" table="kr_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep" />
          </dlink>
          <link name="kodp" as="kodp" table="kr_payer" child="sr_opl_bank_bro" field="kodp" parent="kr_payer" back="sr_opl_bank_bro" title="Абонент">
            <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
        </table>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dimension="1" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="sr_opl_bank_bro" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_parent" join="left outer" dname="sr_opl_bank_parent">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_link" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="sr_opl_bank_bro" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="sr_pach" as="kod_sr_pach" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_sr_pach" />
            <column table="kod_sr_pach" column="kod_pach" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="sr_opl_bank_bro" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="sr_pach" as="kod_pach" join="left outer" dname="sr_opl_bank_bro">
          <call function="=">
            <column table="a" column="kod_pach" />
            <column table="kod_pach" column="kod_pach" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_opl_bank_bro" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl_nal_kred" timestamp="02.10.2016 15:06:15" inherit="sr_opl_nal" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" dimension="kod_opl_kred" />
        <column table="a" column="tax" type="number" title="" as="tax" />
        <column table="a" column="nal" type="number" title="" as="nal" fact="sr_opl_nal_kred" agg="sum" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" />
        <call function="||-" as="sr_opl_nal_id" key="1">
          <call function="to_char">
            <column table="a" column="kod_naltax" />
          </call>
          <call function="to_char">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_opl_nal" as="a" />
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_opl_nal_kred">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_opl_nal_kred">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_opl_nal_kred">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="kod_opl" column="kod_type_opl" />
          <call function="array">
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_nal_stor" timestamp="02.10.2016 15:07:17" inherit="sr_opl_nal" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" dimension="kod_opl_stor" />
        <column table="a" column="tax" type="number" title="" as="tax" />
        <column table="a" column="nal" type="number" title="" as="nal" fact="sr_opl_nal_stor" agg="sum" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" />
        <call function="||-" as="sr_opl_nal_id" key="1">
          <call function="to_char">
            <column table="a" column="kod_naltax" />
          </call>
          <call function="to_char">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_opl_nal" as="a" />
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_opl_nal_stor">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_opl_nal_stor">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_opl_nal_stor">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="kod_opl" column="kod_type_opl" />
          <call function="array">
            <const>5</const>
            <const>6</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_sf_nal" timestamp="29.12.2017 12:02:21" inherit="sr_opl_nal" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" />
        <column table="a" column="tax" type="number" title="" as="tax" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" />
        <call function="||-" as="sr_opl_nal_id" key="1">
          <call function="to_char">
            <column table="a" column="kod_naltax" />
          </call>
          <call function="to_char">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
        <column table="a" column="nal" fact="sr_opl_sf_nal" agg="sum" as="nal" />
        <column table="a" column="kod_opl" as="kod_opl_sf" />
      </select>
      <from>
        <table name="sr_opl_nal" as="a">
          <link name="kod_opl_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_opl_sf" table="sr_opl_sf" child="sr_opl_sf_nal" field="kod_opl_sf" parent="sr_opl_sf" back="sr_opl_sf_nal">
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_opl_sf_nal">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_opl_sf_nal">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_opl_sf_nal">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
        <query name="sr_opl_sf" as="kod_opl_sf" join="left outer" dname="sr_opl_sf_nal">
          <call function="=">
            <column table="this" column="kod_opl_sf" />
            <column table="kod_opl_sf" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="in">
          <column table="kod_opl" column="kod_type_opl" />
          <call function="array">
            <const>0</const>
            <const>2</const>
            <const>3</const>
            <const>4</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_opl_sf" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_mat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_kazn" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" />
          <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
          <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
          <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="sr_opl_recalc_tree_info_pre1" timestamp="05.08.2016 11:49:40" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_recalc_tree_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="kod_opl_par_rec" column="kod_opl" as="kod_opl_par_rec" key="0" />
      </select>
      <from>
        <query name="sr_opl" as="a">
          <link name="sr_recalc_opl" as="sr_recalc_opl" table="sr_recalc_opl" child="sr_opl" field="sr_recalc_opl" parent="sr_recalc_opl" back="sr_opl">
            <link name="kod_recalc" as="kod_recalc" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="kod_opl" as="kod_opl_par_rec" table="sr_opl" child="sr_recalc" field="kod_opl" parent="sr_opl" back="sr_recalc" />
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_opl_recalc_tree_info_pre2" timestamp="05.08.2016 11:49:06" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_recalc_tree_info.xml" haskeys="1">
      <select>
        <call function="connect_by_root" as="kod_opl_root" key="0">
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_opl_par_rec" as="kod_opl_par_rec" key="0" />
      </select>
      <from>
        <query name="sr_opl_recalc_tree_info_pre1" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_opl" prior="1" />
          <column table="a" column="kod_opl_par_rec" />
        </call>
      </connect>
      <start>
        <call function="is null">
          <column table="a" column="kod_opl_par_rec" />
        </call>
      </start>
    </query>
    <query name="sr_opl_recalc_tree_info" timestamp="21.02.2018 19:35:47" class="1" intrval="FREQ=DAILY; INTERVAL=1" materialize="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_opl_recalc_tree_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl_root" index="1" as="kod_opl_root" key="0" />
        <column table="a" column="kod_opl" index="1" as="kod_opl" key="1" fixed="1" />
      </select>
      <from>
        <query name="sr_opl_recalc_tree_info_pre2" as="a" />
        <query name="sr_opl" as="kod_opl_root" join="left outer" dname="sr_opl_recalc_tree_info">
          <call function="=">
            <column table="a" column="kod_opl_root" />
            <column table="kod_opl_root" column="kod_opl" />
          </call>
        </query>
      </from>
      <where>
        <call function="!=">
          <column table="a" column="kod_opl_root" />
          <column table="a" column="kod_opl" />
        </call>
      </where>
    </query>
    <query name="sr_penni_mat" class="1" timestamp="17.06.2016 03:02:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_penni.xml" haskeys="1">
      <select>
        <column table="a" column="kod_delo" group="max" comment="в старом варианте на 2 дела может быть один счет - суммы выводим по одному делу - так себе решение" as="kod_delo" key="1" fixed="1" />
        <column table="a" column="kod_sf" group="1" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="kod_delo" />
          </call>
          <call function="is not null">
            <column table="a" column="kod_sf" />
          </call>
        </call>
      </where>
      <from>
        <table name="sr_penni" as="a" />
        <query name="ur_mat" as="kod_mat" join="left outer" dname="sr_penni_mat" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_delo" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_penni_mat">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_penni_astr" class="1" timestamp="29.04.2019 20:52:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_penni.xml" haskeys="1">
      <select>
        <call function="||-" as="id" key="1">
          <column table="this" column="kod_pen_astr" />
          <column table="this" column="kod_sf_astr" />
        </call>
        <column table="a" column="kod_pen" as="kod_pen_astr" key-dimension="kod_pen_astr" />
        <call function="nvl" as="kod_sf_astr">
          <column table="kod_sf" column="kod_sf_first" />
          <column table="kod_sf" column="kod_sf" />
        </call>
        <column table="a" column="kod_delo" as="kod_delo" />
      </select>
      <from>
        <query name="sr_penni" as="a">
          <link name="kod_sf" as="kod_sf" table="sr_facvip" child="sr_penni" field="kod_sf" parent="sr_facvip" back="sr_penni" />
        </query>
        <query name="sr_facvip_astr" as="kod_sf_astr" join="left outer" dname="sr_penni_astr">
          <call function="=">
            <column table="this" column="kod_sf_astr" />
            <column table="kod_sf_astr" column="kod_sf" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_delo_pp" join="left outer" dimension="kod_mat" dname="sr_penni_astr" title="Иск">
          <call function="=">
            <column table="this" column="kod_delo" />
            <column table="kod_delo_pp" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" as="kod_delo1" join="left outer" dname="sr_penni_astr1" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_delo" />
            <column table="kod_delo1" column="kod_mat" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="a" column="kod_delo" />
        </call>
      </where>
      <links>
        <link name="kod_delo_pp" as="kod_delo_pp">
          <dimlink name="kod_mat" dimension="1" is-final-dimension="1">
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
          </dimlink>
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
          <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
        </link>
      </links>
    </query>
    <query name="ss_state_lst" inherit="ss_state" timestamp="14.06.2017 12:33:31" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ss_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_state" type="number" as="kod_state" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="pr_dog" type="number" title="" as="pr_dog" key="0"></column>
        <column table="a" column="vid_state" type="number" title="" comment="вид состояния: 1-списание 2-просроченная задолж, иначе 0" as="vid_state" key="0"></column>
        <column table="a" column="pr_aopl" type="number" title="" comment="включать(1) или не включать(0) документы с таким состоянием в автоматический разнос оплат" as="pr_aopl" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_state" as="a"></table>
      </from>
    </query>
    <query name="ss_vidopl_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ss_vidopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vidopl" as="kod_vidopl" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
        <column table="a" column="kod_parent" as="kod_parent" key="0" />
      </select>
      <from>
        <query name="ss_vidopl" as="a"></query>
      </from>
    </query>
    <query name="ss_vidopl_list_cash" inherit="ss_vidopl_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ss_vidopl.xml" haskeys="1">
      <where>
        <call function="like">
          <column table="a" column="full_name" />
          <const>'%касс%'</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod_vidopl" as="kod_vidopl" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
        <column table="a" column="kod_parent" as="kod_parent" key="0" />
      </select>
      <from>
        <query name="ss_vidopl" as="a"></query>
      </from>
    </query>
    <query name="ss_zadol_day_list" order="day_type, days_bzad" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ss_zadol_day.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bzad" as="kod_bzad" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
        <column table="a" column="day_type" as="day_type" key="0" />
        <column table="a" column="days_bzad" as="days_bzad" key="0" />
      </select>
      <from>
        <query name="ss_zadol_day" as="a" />
      </from>
      <order>
        <column column="day_type" />
        <column column="days_bzad" />
      </order>
    </query>
    <query name="tr_izv_selection-list" class="1" title="Список ответственных специалистов (групп)" timestamp="19.06.2017 16:17:56" order="name" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_izv_selection.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" title="" key="1" as="id" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование выборки" as="name" />
      </select>
      <from>
        <query name="tr_izv_selection" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="tr_prop_n" inherit="tr_prop" class="1" timestamp="22.08.2017 16:48:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_prop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_prop" type="number" as="kod_prop" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="datevv" type="date" title="" comment="дата" as="datevv" key="0" />
        <column table="a" column="kol_chel" type="number" title="" comment="количество человек" as="kol_chel" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="pr_prop" type="number" title="" comment="0-проживающие, 1-прописанные" as="pr_prop" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="kod_pereras" type="number" comment="код перерасчета, если введено через перерасчет" as="kod_pereras" key="0" />
        <column table="a" column="pr_error" type="number" title="" comment="признак, что данные показания не действительны" as="pr_error" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="datedeyst" type="date" title="" as="datedeyst" key="0" />
        <column table="a" column="datenedeyst" type="date" title="" as="datenedeyst" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="kod_prop" as="kod_prop_i" key-dimension="kod_prop_n" key="0" />
        <column table="a" column="datevv" as="datevv_i" dimension="dat" key="0" />
        <column table="a" column="kol_chel" as="kol_chel_i" fact="tr_prop_n_kol_chel" title="Количество зарегистрированных" agg-cml="last_value" agg="max" key="0" />
      </select>
      <from>
        <table name="tr_prop" as="a">
          <link name="kod_obj" as="kod_obj" table="kr_object" child="tr_prop_n" field="kod_obj" parent="kr_object" back="tr_prop_n">
            <dlink name="kr_numobj" dimension="1" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
          </link>
        </table>
        <query name="kr_object" as="kod_obj" join="left outer" dname="tr_prop_n">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="tr_prop_n">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj_i" join="left outer" dimension="kod_obj" dname="tr_prop_n">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj_i" column="kod_obj" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="ge">
            <column table="a" column="pr_error" />
            <const>0</const>
          </call>
          <call function="=">
            <column table="a" column="pr_prop" />
            <const>1</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_obj">
          <dlink name="kr_numobj" dimension="1" />
        </link>
      </links>
    </query>
    <query name="tr_prop_f" inherit="tr_prop" class="1" timestamp="22.08.2017 16:48:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_prop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_prop" type="number" as="kod_prop" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="datevv" type="date" title="" comment="дата" as="datevv" key="0" />
        <column table="a" column="kol_chel" type="number" title="" comment="количество человек" as="kol_chel" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="pr_prop" type="number" title="" comment="0-проживающие, 1-прописанные" as="pr_prop" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="kod_pereras" type="number" comment="код перерасчета, если введено через перерасчет" as="kod_pereras" key="0" />
        <column table="a" column="pr_error" type="number" title="" comment="признак, что данные показания не действительны" as="pr_error" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="datedeyst" type="date" title="" as="datedeyst" key="0" />
        <column table="a" column="datenedeyst" type="date" title="" as="datenedeyst" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="kod_prop" as="kod_prop_i" key-dimension="kod_prop_f" key="0" />
        <column table="a" column="datevv" as="datevv_i" dimension="dat" key="0" />
        <column table="a" column="kol_chel" as="kol_chel_i" fact="tr_prop_f_kol_chel" title="Количество проживающих" agg-cml="last_value" agg="max" key="0" />
      </select>
      <from>
        <table name="tr_prop" as="a">
          <link name="kod_obj" as="kod_obj" table="kr_object" child="tr_prop_f" field="kod_obj" parent="kr_object" back="tr_prop_f">
            <dlink name="kr_numobj" dimension="1" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
          </link>
        </table>
        <query name="kr_object" as="kod_obj" join="left outer" dname="tr_prop_f">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="tr_prop_f">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj_i" join="left outer" dimension="kod_obj" dname="tr_prop_f">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj_i" column="kod_obj" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="ge">
            <column table="a" column="pr_error" />
            <const>0</const>
          </call>
          <call function="=">
            <column table="a" column="pr_prop" />
            <const>0</const>
          </call>
        </call>
      </where>
      <links>
        <link name="kod_obj">
          <dlink name="kr_numobj" dimension="1" />
        </link>
      </links>
    </query>
    <query name="max_tr_prop_datavv" class="1" timestamp="18.02.2025 19:20:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_prop.xml" haskeys="1">
      <select>
        <column table="t" column="kod_obj" key="1" as="kod_obj" />
        <column group="max" table="t" column="datevv" as="datevv" />
        <call group="max" as="datevv_n" type="date" function="if">
          <call function="=">
            <column table="t" column="pr_prop" />
            <const type="number">1</const>
          </call>
          <column table="t" column="datevv" type="date" />
        </call>
        <call group="max" as="datevv_f" type="date" function="if">
          <call function="=">
            <column table="t" column="pr_prop" />
            <const type="number">0</const>
          </call>
          <column table="t" column="datevv" type="date" />
        </call>
      </select>
      <from>
        <query name="tr_prop" as="t" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="le">
            <column table="t" column="datevv" />
            <call function="kg_ym_last_day">
              <useglobparam name="ym" />
            </call>
          </call>
        </call>
      </where>
      <grouping>
        <grset>
          <group>
            <column table="this" column="kod_obj" />
          </group>
        </grset>
      </grouping>
      <params />
    </query>
    <query name="tr_prop_n_1" class="1" timestamp="18.02.2025 19:56:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_prop.xml" haskeys="1">
      <select>
        <column table="t" column="kod_obj" as="kod_obj" key="1" />
        <column table="t" column="kol_chel" as="tr_prop_n_kol_chel" />
        <column table="tt" column="datevv_n" as="datevv_i" />
      </select>
      <from>
        <query name="max_tr_prop_datavv" as="tt" />
        <query name="tr_prop" join="inner" as="t" dname="tr_prop_n_1">
          <call function="and">
            <call function="=">
              <column table="tt" column="kod_obj" />
              <column table="t" column="kod_obj" />
            </call>
            <call function="=">
              <column column="datevv" table="tt" />
              <column column="datevv" table="t" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="ge">
            <column column="pr_error" table="t" />
            <const>0</const>
          </call>
          <call function="=">
            <column column="pr_prop" table="t" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="tr_prop_f_1" class="1" timestamp="21.02.2025 18:50:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tr_prop.xml" haskeys="1">
      <select>
        <column table="t" column="kod_obj" as="kod_obj" key="1" />
        <column table="t" column="kol_chel" as="tr_prop_f_kol_chel" />
        <column table="tt" column="datevv_n" as="datevv_i" />
      </select>
      <from>
        <query name="max_tr_prop_datavv" as="tt" />
        <query name="tr_prop" as="t" join="inner" dname="tr_prop_f_1">
          <call function="and">
            <call function="=">
              <column table="tt" column="kod_obj" />
              <column table="t" column="kod_obj" />
            </call>
            <call function="=">
              <column column="datevv" table="tt" />
              <column column="datevv" table="t" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="ge">
            <column table="t" column="pr_error" />
            <const>0</const>
          </call>
          <call function="=">
            <column table="t" column="pr_prop" />
            <const>0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="tsr_opl_kred" inherit="tsr_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tsr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl_byt" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" comment="1" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" comment="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="num_opl" type="string" title="" comment="1" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Оплата" fact="tsr_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="" dimension="ym" fact="tsr_opl_ym_max" agg="max" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_dest" type="number" comment="1" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" comment="1" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="" fact="tsr_opl_dat_opl_max" agg="max" dimension="dat_dolg" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="казань: код объекта, указывается для переплаты по объекту" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="казань: тип тарифной зоны (0 - ночная, 1 - дневная или суточная, 2 - моп), указывается только для переплаты, как уточнение к kod_point_tar. nb: для преплат не по счётчикам и не по моп = 1." as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="t_zona" type="number" title="" as="t_zona" key="0" />
        <column table="a" column="dat_bal" type="date" title="" comment="дата балансировки" as="dat_bal" key="0" />
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep" key="0" />
        <call function="if" as="dat_oper" type="date" title="Дата операции" dimension="dat" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="dat_opl" />
          <call function="ym end time">
            <column table="a" column="ym" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="kod_opl" as="kod_opl_kr" key-dimension="kod_opl_byt_kr" key="0" />
        <column table="a" column="opl" as="opl_kred" fact="tsr_opl_opl_kred" agg="sum" key="0" />
        <column table="a" column="ym" as="ym_max" fact="tsr_opl_ym_max_kred" agg="max" key="0" />
      </select>
      <where>
        <call function="in">
          <column table="a" column="kod_type_opl" />
          <call function="array">
            <const>1</const>
            <const>2</const>
          </call>
        </call>
      </where>
      <from>
        <table name="tsr_opl" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dname="tsr_opl_kred" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="kod_izv" dname="tsr_opl_kred" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="tsr_opl_kred" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="tsr_opl_kred" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="tsr_opl_kred">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent_kred" dname="storno">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="tsr_opl_stor" inherit="tsr_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\tsr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl_byt" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" comment="1" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" comment="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="num_opl" type="string" title="" comment="1" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Оплата" fact="tsr_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="" dimension="ym" fact="tsr_opl_ym_max" agg="max" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_dest" type="number" comment="1" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" comment="1" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="" fact="tsr_opl_dat_opl_max" agg="max" dimension="dat_dolg" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="казань: код объекта, указывается для переплаты по объекту" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="казань: тип тарифной зоны (0 - ночная, 1 - дневная или суточная, 2 - моп), указывается только для переплаты, как уточнение к kod_point_tar. nb: для преплат не по счётчикам и не по моп = 1." as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="t_zona" type="number" title="" as="t_zona" key="0" />
        <column table="a" column="dat_bal" type="date" title="" comment="дата балансировки" as="dat_bal" key="0" />
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep" key="0" />
        <call function="if" as="dat_oper" type="date" title="Дата операции" dimension="dat" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="dat_opl" />
          <call function="ym end time">
            <column table="a" column="ym" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="kod_opl" as="kod_opl_kr" key-dimension="kod_opl_byt_stor" key="0" />
        <column table="a" column="opl" as="opl_stor" fact="tsr_opl_opl_stor" agg="sum" key="0" />
        <column table="a" column="ym" as="ym_max" fact="tsr_opl_ym_max_stor" agg="max" key="0" />
      </select>
      <where>
        <call function="in">
          <column table="a" column="kod_type_opl" />
          <call function="array">
            <const>5</const>
            <const>6</const>
          </call>
        </call>
      </where>
      <from>
        <table name="tsr_opl" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dname="tsr_opl_stor" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="kod_izv" dname="tsr_opl_stor" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="tsr_opl_stor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="tsr_opl_stor" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent_kred" dname="storno">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="tsr_opl_kred" as="kod_opl_kr" dimension="kod_opl_byt_kr" join="left outer" dname="tsr_opl_stor">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl_kr" column="kod_opl_kr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ts_point_dost_list" timestamp="03.06.2016 18:44:53" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ts_point_dost.xml" haskeys="1">
      <select>
        <column type="number" as="a" table="ts_point_dost" column="kod_point_dost" key="1" fixed="1">1</column>
        <column table="ts_point_dost" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ts_point_dost" as="ts_point_dost" />
      </from>
    </query>
    <query name="udo_t_fedresurs-gr" grouplevel="1" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\udo_t_fedresurs.xml" haskeys="1">
      <select>
        <column table="a" column="inn" group="1" as="inn" key="1" fixed="1" />
        <call function="trunc" as="datepublic" group="min" title="Дата публикации банкротства" type="date" key="0">
          <column table="a" column="datepublic" />
        </call>
      </select>
      <from>
        <query name="udo_t_fedresurs" as="a" />
      </from>
    </query>
    <query name="uk_sdp_pir_kod" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_sdp.xml" haskeys="1">
      <select>
        <const as="val" key="1" fixed="1">1</const>
      </select>
      <from>
        <table name="dual" as="a"></table>
      </from>
    </query>
    <query name="uk_sdp_pretenz_kod" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_sdp.xml" haskeys="1">
      <select>
        <const as="val" key="1" fixed="1">4</const>
      </select>
      <from>
        <table name="dual" as="a"></table>
      </from>
    </query>
    <query name="uk_sdp_isp_kod" class="1" timestamp="11.03.2016 23:42:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_sdp.xml" haskeys="1">
      <select>
        <const as="val" key="1" fixed="1">2</const>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="uk_sdp_bnk_kod" class="1" timestamp="24.09.2018 14:41:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_sdp.xml" haskeys="1">
      <select>
        <const as="val" key="1" fixed="1">9</const>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="uk_sdp_prior_docs" order="3,5" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_sdp_prior_docs.xml" haskeys="1">
      <select>
        <column table="s" column="kod_sdp" type="number" as="kod_sdp" key="1" fixed="1"></column>
        <column table="s" column="name_parent" type="string" as="name_parent" key="0"></column>
        <column table="s" column="kod_parent" type="number" as="kod_parent" key="0"></column>
        <column table="s" column="name" type="string" as="name" key="0"></column>
        <column table="s" column="prioritet" type="number" as="prioritet" key="0"></column>
      </select>
      <from>
        <query name="uk_sdp" as="s"></query>
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="s" column="kod_parent" />
          </call>
          <call function="=">
            <call function="nvl">
              <column table="s" column="doc_close" />
              <const>0</const>
            </call>
            <const>0</const>
          </call>
        </call>
      </where>
      <order>
        <column column="3" />
        <column column="5" />
      </order>
    </query>
    <query name="uk_vi_ish_kod" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\uk_vi.xml" haskeys="1">
      <select>
        <const as="val" key="1" fixed="1">1</const>
      </select>
      <from>
        <table name="dual" as="a"></table>
      </from>
    </query>
    <query name="us_au_duty_control_an_done" title="Анализ проведен" timestamp="04.12.2023 15:25:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_au_duty_control.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Анализ проведен">'Не проведен'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'Проведен'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_au_duty_control_work_done" title="Работа проведена" timestamp="04.12.2023 15:25:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_au_duty_control.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Работа проведена">'Не проведена'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'Проведена'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_type" title="Собрание/Комитет кредиторов" timestamp="15.11.2023 17:35:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">1</const>
                <const type="string" as="name" title="Собрание/Комитет кредиторов">'собрание'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'комитет'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_num" title="Первое или последующее собрание/комитет кредиторов" timestamp="15.11.2023 18:10:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">1</const>
                <const type="string" as="name" title="Первое или последующее">'первое'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'последующее'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_in_time" title="Своевременность проведения собрания/комитета кредиторов" timestamp="15.11.2023 17:35:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Своевременность проведения">'несвоевременно'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'своевременно'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_corresp" title="Соответствие" timestamp="15.11.2023 18:25:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Соответствие">'не соответствует'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'соответствует'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_rep_provide" title="Отчет предоставлен" timestamp="15.11.2023 18:35:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Соответствие">'не предоставлен'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'предоставлен'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="us_cred_meeting_info_true" title="Информация достоверна" timestamp="15.11.2023 18:50:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_cred_meeting.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const type="number" as="kod" key="1">0</const>
                <const type="string" as="name" title="Соответствие">'не достоверна'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'достоверна'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ur_dogplat_kodps" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <params>
        <param name="kod_podr" type="number" />
      </params>
      <select>
        <call function="distinct" as="kodp" key="0">
          <column table="kr_dogovor_a" column="kodp" />
        </call>
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat_a">
          <link name="kod_dog" as="kr_dogovor_a" table="kr_dogovor" child="ur_dogplat" field="kod_dog" parent="kr_dogovor" back="ur_dogplat" title="Договор" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ur_dogplat_a" column="kod_sdp" />
            <const>4</const>
          </call>
          <call function="=">
            <column table="kr_dogovor_a" column="tep_el" />
            <const>4</const>
          </call>
          <call function="=">
            <column table="kr_dogovor_a" column="podr" />
            <useparam name="kod_podr" />
          </call>
        </call>
      </where>
    </query>
    <query name="prizn_zadol_dogplat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_zadol_dogplat" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_zadol_dogplat" type="string" title="Наличие задолженности" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_zadol_dogplat_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="un_dogplat_test" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <select>
        <column table="a" column="row_type" type="string" as="row_type" />
        <column table="a" column="kod_abon_type" type="number" as="kod_abon_type" />
        <column table="a" column="dep" type="number" as="dep" />
        <column table="a" column="kodp" type="number" as="kodp" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <!--Документ-->
        <column table="a" column="kod_folders" as="kod_folders" />
        <column table="a" column="kod_sogl" as="kod_sogl" />
        <column table="a" column="kod_pretenz" as="kod_pretenz" />
        <column table="a" column="kod_mat_pp" as="kod_mat_pp" />
        <column table="a" column="kod_inkasso" as="kod_inkasso" />
        <column table="a" column="kod_kazn" as="kod_kazn" />
        <column table="a" column="kod_mat_ssp" as="kod_mat_ssp" />
        <column table="a" column="kod_mat_ip" as="kod_mat_ip" />
        <column table="a" column="kod_mat_ba" as="kod_mat_ba" />
        <column table="a" column="kod_stage_bk" as="kod_stage_bk" />
        <column table="a" column="kod_likvid" as="kod_likvid" />
        <column table="a" column="kod_dead" as="kod_dead" />
        <!--Связь-->
        <column table="a" column="kod_dogplat" type="number" as="kod_dogplat" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" />
        <column table="a" column="kod" type="number" as="kod" />
        <column table="a" column="vid_real" type="number" as="vid_real" />
        <column table="a" column="dat_form" type="date" as="dat_form" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" />
        <column table="a" column="dat_izv" type="number" as="dat_izv" />
        <column table="a" column="dat_sf" type="number" as="dat_sf" />
        <column table="a" column="dat_deb" type="number" as="dat_deb" />
        <column table="a" column="ym" type="number" as="ym" />
        <!--Начисления-->
        <column table="a" column="kod_account" type="number" as="kod_account" />
        <column table="a" column="kod_ras" type="number" as="kod_ras" />
        <column table="a" column="vid_t" type="number" as="vid_t" />
        <column table="a" column="dat_priem" type="date" as="dat_priem" />
        <column table="a" column="ym_nach" type="number" as="ym_nach" />
        <!--Оплаты-->
        <column table="a" column="kod_opl_fl" type="number" as="kod_opl_fl" />
        <column table="a" column="kod_opl_ul" type="number" as="kod_opl_ul" />
        <column table="a" column="dat_deb_bank" type="date" as="dat_deb_bank" />
        <column table="a" column="dat_opl_bank" type="date" as="dat_opl_bank" />
        <column table="a" column="dat_bal" type="date" as="dat_bal" />
        <column table="a" column="dat_opl" type="date" as="dat_opl" />
        <column table="a" column="ym_opl" type="number" as="ym_opl" />
        <column table="a" column="sum_gp_otv" type="number" as="sum_gp_otv" />
        <column table="a" column="summa" type="number" as="summa" />
        <column table="a" column="sum_v" type="number" as="sum_v" />
        <column table="a" column="pr_recalc_opl" type="number" as="pr_recalc_opl" />
        <column table="a" column="un_sogl" as="un_sogl" />
        <column table="a" column="un_pretenz" as="un_pretenz" />
        <column table="a" column="un_mat_pp" as="un_mat_pp" />
        <column table="a" column="un_hist_mat_pp" as="un_hist_mat_pp" />
        <column table="a" column="un_isp_pp" as="un_isp_pp" />
        <column table="a" column="un_inkasso" as="un_inkasso" />
        <column table="a" column="un_kazn" as="un_kazn" />
        <column table="a" column="un_mat_ssp" as="un_mat_ssp" />
        <column table="a" column="un_mat_ip" as="un_mat_ip" />
        <column table="a" column="un_mat_ba" as="un_mat_ba" />
        <column table="a" column="un_stage_bk" as="un_stage_bk" />
        <column table="a" column="un_likvid" as="un_likvid" />
        <column table="a" column="un_dead" as="un_dead" />
        <column table="a" column="nachisl" as="nachisl" />
        <column table="a" column="opl" as="opl" />
      </select>
      <from>
        <query name="un-dogplat" as="a">
          <extendwhere>
            <!--<call function="=">
              <column table="*" column="row_type" />
              <const>'mat-pp'</const>
            </call>-->
            <!--<call function="=">
              <column table="*" column="kod_folders" />
              <const>1000000882</const>
            </call>-->
            <call function="=">
              <column table="*" column="kod_mat_pp" />
              <const>118</const>
            </call>
          </extendwhere>
        </query>
      </from>
      <!--<where>
        <call function="=">
          <column table="a" column="kod_mat_pp"/>
          <const>8477</const>
        </call>
      </where>-->
    </query>
    <query name="ur_dogplat_insert_sf" class="1" update-target="ur_dogplat" timestamp="16.01.2018 16:54:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
        <param name="kod" type="number" />
        <param name="kod_sf" type="number" />
        <param name="summa" type="number" />
        <param name="dat" type="date" />
        <param name="summa_prizn" type="number" />
        <param name="is_auto" type="number" />
      </params>
      <select>
        <call function="()" as="kod_sdp" key="0">
          <useparam name="kod_sdp" />
        </call>
        <call function="()" as="kod" key="0">
          <useparam name="kod" />
        </call>
        <call function="nvl0" as="summa" comment="nvl0 16.01.18" key="0">
          <useparam name="summa" />
        </call>
        <call function="()" as="sum_v" key="0">
          <useparam name="summa_prizn" />
        </call>
        <call function="()" as="dat_form" key="0">
          <useparam name="dat" />
        </call>
        <call function="()" as="prizn_konv" key="0">
          <useparam name="is_auto" />
        </call>
        <column table="a" column="kod_sf" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="vid_real" as="vid_real" key="0" />
      </select>
      <from>
        <query name="sr_facvip" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sf" />
          <useparam name="kod_sf" />
        </call>
      </where>
    </query>
    <query name="ur_dogplat_insert_pd" class="1" update-target="ur_dogplat" timestamp="16.01.2018 16:52:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
        <param name="kod" type="number" />
        <param name="kod_deb" type="number" />
        <param name="summa" type="number" />
        <param name="dat" type="date" />
        <param name="summa_prizn" type="number" />
        <param name="is_auto" type="number" />
        <param name="kod_sf_dp" type="number" comment="kod_sf первого счета в платежке" />
      </params>
      <select>
        <call function="()" as="kod_sdp" key="0">
          <useparam name="kod_sdp" />
        </call>
        <call function="()" as="kod" key="0">
          <useparam name="kod" />
        </call>
        <call function="nvl0" as="summa" key="0">
          <useparam name="summa" />
        </call>
        <call function="()" as="sum_v" key="0">
          <useparam name="summa_prizn" />
        </call>
        <call function="()" as="dat_form" key="0">
          <useparam name="dat" />
        </call>
        <call function="()" as="prizn_konv" key="0">
          <useparam name="is_auto" />
        </call>
        <call function="()" as="kod_sf_dp" key="0">
          <useparam name="kod_sf_dp" />
        </call>
        <column table="a" column="kod_deb" as="kod_deb" key="1" fixed="1" />
        <fact column="sf_vid_real" as="vid_real" is-fact-use="1" key="0" />
      </select>
      <from>
        <query name="sr_debet" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_deb" />
          <useparam name="kod_deb" />
        </call>
      </where>
    </query>
    <query name="ur_dogplat_insert_izv" class="1" update-target="ur_dogplat" timestamp="16.01.2018 16:53:18" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
        <param name="kod" type="number" />
        <param name="kod_izv" type="number" />
        <param name="summa" type="number" />
        <param name="dat" type="date" />
      </params>
      <select>
        <call function="()" as="kod_sdp" key="0">
          <useparam name="kod_sdp" />
        </call>
        <call function="()" as="kod" key="0">
          <useparam name="kod" />
        </call>
        <call function="nvl0" as="summa" key="0">
          <useparam name="summa" />
        </call>
        <call function="()" as="dat_form" key="0">
          <useparam name="dat" />
        </call>
        <column table="a" column="kod_izv" as="kod_izv" key="1" fixed="1" />
        <fact column="tnr_acc_vid_real" as="vid_real" is-fact-use="1" key="0" />
      </select>
      <from>
        <query name="tnr_izv" as="a" title="Счет" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_izv" />
          <useparam name="kod_izv" />
        </call>
      </where>
    </query>
    <query name="ur_dogplat_bnk" class="1" timestamp="02.06.2017 17:56:08" inherit="ur_dogplat" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dogplat" type="number" key-dimension="kod_dogplat" as="kod_dogplat" key="1" fixed="1" />
        <column table="a" column="kod" type="number" title="" as="kod" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_form" type="date" title="Дата расч. задолж." editable="is_doc" editable-invert="1" as="dat_form" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="summa" type="number" fact="ur_dp_summa" title="Выставленно по юр. документу" agg="sum" column-mandatory="1" editable="is_doc" editable-invert="1" as="summa" key="0" />
        <column table="a" column="vid_real" type="number" title="" column-mandatory="1" editable="is_doc" editable-invert="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="sum_v" type="number" fact="ur_dp_sum_v" title="Признано по юр. документу" agg="sum" as="sum_v" key="0" />
        <call function="nvl" as="dat" dimension="dat" key="0">
          <column table="a" column="dat_doc" />
          <column table="a" column="dat_bzad" />
        </call>
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="dat_form_v" type="date" title="" as="dat_form_v" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="по долговому док-ту" as="tep_el" key="0" />
        <column table="a" column="ym" type="number" comment="отчетный период" title="Отчетный период" as="ym" key="0" />
        <column table="a" column="num_doc" type="number" title="" comment="номер документа" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата док-та по долговому док-ту" as="dat_doc" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" comment="дата возникновения задолж" as="dat_bzad" key="0" />
        <column table="a" column="dat_mor" type="date" title="" comment="дата мораторной зад-ти" as="dat_mor" key="0" />
        <column table="a" column="dat_priem" type="date" title="" comment="дата снятия показаний прибора учета" as="dat_priem" key="0" />
        <column table="a" column="prizn_konv" type="number" title="" comment="Бельченко: не знаю для чего создавалась будет признаком автоматического счета" is-fact="1" agg="max" as="prizn_konv" fact="ur_dogplat_prizn_konv" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kod_sogl" type="number" as="kod_sogl" key="0" />
        <column table="a" column="kod_pretenz" type="number" as="kod_pretenz" reference="ur_pretenz" refcol="kod_pretenz" key="0" />
        <column table="a" column="kod_mat" type="number" as="kod_mat" key="0" />
        <column table="a" column="kod_inkasso" type="number" as="kod_inkasso" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" key="0" />
        <column table="a" column="kod_stage_bk" type="number" as="kod_stage_bk" key="0" />
        <column table="a" column="kod_likvid" type="number" as="kod_likvid" key="0" />
        <column table="a" column="kod_dead" type="number" as="kod_dead" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" key="0" />
        <column table="a" column="kod_sf_dp" type="number" comment="kod_sf единственного счёта на платёжке - заполняется при привязке через kod_deb" as="kod_sf_dp" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_deb_sf" type="number" comment="связь с СФ через VV_ALL_DEB_SF" as="kod_deb_sf" reference="vv_all_deb_sf" refcol="kod_deb_sf" key="0" />
        <const type="number" as="cnt" fact="ur_dogplat_count" agg="sum" key="0">1</const>
        <call function="if" as="kod_mat_pp" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>6</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ssp" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>13</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ip" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>14</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ba" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>15</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="has_no_prizn" agg="max" fact="ur_dp_has_no_priz" type="number" key="0">
          <call function="is null">
            <column table="this" column="sum_v" />
          </call>
          <const>1</const>
        </call>
        <call function="if" as="ym_min" agg="min" fact="ur_dogplat_ym_min" title="Период начисления с" type="number" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="if" as="ym_max" agg="max" fact="ur_dogplat_ym_max" title="Период начисления по" type="number" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="if" as="ym_all" agg="stragg" fact="ur_dogplat_ym_all" type="string" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="ym to char" as="ym_str" fact="ur_dogplat_ym_str" agg="stragg" title="Период начисления" key="0">
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_min_priz" agg="min" fact="ur_dp_ym_min_priz" type="number" title="Период начисления с (призн.)" format="F2" key="0">
          <call function="!=0">
            <column table="this" column="sum_v" />
          </call>
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_max_priz" agg="max" fact="ur_dp_ym_max_priz" type="number" title="Период начисления по (призн.)" format="F2" key="0">
          <call function="!=0">
            <column table="this" column="sum_v" />
          </call>
          <column table="this" column="ym_max" />
        </call>
        <call function="case" type="string" as="name_doc" key="0">
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_sf" />
            </call>
            <column table="kod_sf" column="name" />
          </call>
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_deb" />
            </call>
            <column table="kod_deb" column="name" />
          </call>
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_izv" />
            </call>
            <column table="kod_izv" column="name" />
          </call>
        </call>
        <call function="coalesce" as="is_doc" key="0">
          <column table="this" column="kod_sf" />
          <column table="this" column="kod_deb" />
          <column table="this" column="kod_izv" />
        </call>
        <column table="ur_hist_mat_dec" column="dat_entry_st" dgroup="max" dimension="dat_ur" as="dat_entry_st" key="0" />
        <column table="ur_hist_mat_dec" column="dat_entry_dec" dgroup="max" dimension="dat_ur_ent" as="dat_entry_dec" key="0" />
        <call function="if" agg="min" fact="ur_dp_pr_sch_gp" type="number" title="Признак наличия счета на ГП" as="pr_sch_gp" controlType="UICheck" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>9</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_sch_peni" agg="min" fact="ur_dp_pr_sch_peni" type="number" title="Признак наличия счета на проценты(пени)" controlType="UICheck" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>7</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_sch_shtr" agg="min" fact="ur_dp_pr_sch_shtr" type="number" title="Признак наличия счета на штраф" controlType="UICheck" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>4</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_gp" type="date" title="Дата формирования счета на ГП" as="dat_sch_gp" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>9</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_shtr" type="date" title="Дата формирования счета на штраф" as="dat_sch_shtr" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>4</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_pn" type="date" title="Дата формирования счета на проценты(пени)" as="dat_sch_pn" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>7</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="nvl" as="kod_sf2" key="0">
          <column table="a" column="kod_sf" />
          <column table="a" column="kod_sf_dp" />
        </call>
        <call function="if" as="ym_min_mat" format="F2" type="number" title="Период начисления с (для материалов дела)" is-fact="1" agg="min" fact="ur_dp_ym_min_mat" key="0">
          <call function="is not null">
            <column table="a" column="kod_mat" />
          </call>
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_max_mat" format="F2" type="number" title="Период начисления по (для материалов дела)" is-fact="1" agg="max" fact="ur_dp_ym_max_mat" key="0">
          <call function="is not null">
            <column table="a" column="kod_mat" />
          </call>
          <column table="this" column="ym_max" />
        </call>
        <call function="if" type="string" as="sum_v_valid" key="0">
          <call function="gt">
            <column table="this" column="sum_v" />
            <column table="this" column="summa" />
          </call>
          <const>'Признанная сумма больше предъявленной.'</const>
        </call>
        <const as="kod_sdp_6" type="number" key="0">6</const>
        <column table="kod_sf" column="vid_real" as="sf_vid_real" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="a" column="kod_dog" is-final-dimension="1" dimension="kod_dog" is-private-dimension="1" as="kod_dog_bnk" key="0" />
        <column table="a" column="vid_real" is-final-dimension="1" dimension="vid_real" is-private-dimension="1" as="vid_real_bnk" key="0" />
      </select>
      <from>
        <table name="ur_dogplat" as="a">
          <link name="kod_deb_sf" as="kod_deb_sf1" table="vv_all_deb_sf" child="ur_dogplat_bnk" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat_bnk">
            <link name="kod_sf" dimension="1" as="kod_sf1" table="sr_facvip" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
              <dlink name="sr_opl" dimension="1" as="sr_opl" table="sr_opl" child="sr_opl" field="kod_sf" parent="sr_facvip" back="sr_opl" />
              <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </link>
          </link>
          <link name="kod_izv" as="kod_izv1" table="tnr_izv" child="ur_dogplat_bnk" field="kod_izv" parent="tnr_izv" back="ur_dogplat_bnk" title="Счет">
            <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="tnr_izv" field="kod_dog" parent="kr_dogovor" back="tnr_izv" title="Договор" />
          </link>
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_dogplat_bnk" field="kod_mat" parent="ur_mat" back="ur_dogplat_bnk" title="Материалы переданные в суд">
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_ba" table="ur_mat_ba" child="ur_mat_ba" field="kod_mat" parent="ur_mat" back="ur_mat_ba">
              <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_folders_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat" comment="поменятл местами c dec, может сломаться арбитраж" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения">
              <dlink name="ur_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_hist_mat" parent="ur_hist_mat" back="ur_hist_mat_dec" title="Решение по делу" />
            </dlink>
          </link>
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_dogplat_bnk" field="kod_folders" parent="ur_folders" back="ur_dogplat_bnk" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="ur_dp_isp" dimension="1" as="ur_dp_isp" table="ur_dp_isp" child="ur_dp_isp" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_isp">
            <dimlink name="kod_mat_isp" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-private-dimension="1" is-final-dimension="1" />
          </dlink>
          <dlink name="ur_dp_inkasso" dimension="1" as="ur_dp_inkasso" table="ur_dp_inkasso" child="ur_dp_inkasso" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_inkasso">
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_kazn" dimension="1" as="ur_dp_kazn" table="ur_dp_kazn" child="ur_dp_kazn" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_kazn">
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_isp_other" dimension="1" as="ur_dp_isp_other" table="ur_dp_isp_other" child="ur_dp_isp_other" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_isp_other">
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_graf" dimension="1" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_graf">
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" />
          </dlink>
          <link name="kod_deb_sf" as="kod_deb_sf2" table="vv_all_deb_sf" child="ur_dogplat_bnk" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat_bnk">
            <link name="kod_sf" dimension="1" as="kod_sf2" is-final-dimension="1" is-private-dimension="1" table="sr_facvip" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
              <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </link>
          </link>
        </table>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="ur_dogplat_bnk" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="1" dname="ur_dogplat_bnk" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_dogplat_bnk" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_dogplat_bnk" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_dp" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_sf_dp" />
            <column table="kod_sf_dp" column="kod_sf" />
          </call>
        </query>
        <query name="vv_all_deb_sf" as="kod_deb_sf" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_deb_sf" />
            <column table="kod_deb_sf" column="kod_deb_sf" />
          </call>
        </query>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dimension="kod_sogl" dname="ur_dogplat_bnk" title="Доп. документ (арбитраж)">
          <call function="=">
            <column table="this" column="kod_sogl" />
            <column table="kod_sogl" column="kod_sogl" />
          </call>
        </query>
        <query name="ur_pretenz" as="kod_pretenz" join="left outer" dimension="kod_pretenz" dname="ur_dogplat_bnk" title="Претензия">
          <call function="=">
            <column table="a" column="kod_pretenz" />
            <column table="kod_pretenz" column="kod_pretenz" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_dogplat_bnk" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_pp" as="kod_mat_pp" join="left outer" comment="Претензионно-исковая работа" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_pp" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
        <query name="ur_inkasso" as="kod_inkasso" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="this" column="kod_inkasso" />
            <column table="kod_inkasso" column="kod_inkasso" />
          </call>
        </query>
        <query name="ur_kazn" as="kod_kazn" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="this" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ssp" as="kod_mat_ssp" join="left outer" comment="ССП" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ssp" />
            <column table="kod_mat_ssp" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ip" as="kod_mat_ip" join="left outer" comment="Исполнительное производство" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ip" />
            <column table="kod_mat_ip" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ba" as="kod_mat_ba" join="left outer" comment="Банкротство" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ba" />
            <column table="kod_mat_ba" column="kod_mat" />
          </call>
        </query>
        <query name="ur_stage_bk" as="kod_stage_bk" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="this" column="kod_stage_bk" />
            <column table="kod_stage_bk" column="kod_stage_bk" />
          </call>
        </query>
        <query name="ur_likvid" as="kod_likvid" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="this" column="kod_likvid" />
            <column table="kod_likvid" column="kod_likvid" />
          </call>
        </query>
        <query name="ur_dead" as="kod_dead" join="left outer" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="this" column="kod_dead" />
            <column table="kod_dead" column="kod_dead" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" allow-back-reference="1" dname="ur_dogplat_bnk" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="kod_folders" dname="ur_dogplat_bnk" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_mat_ba" as="kod_mat_bnk" join="left outer" comment="Банкротство" dname="ur_dogplat_bnk">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_bnk" column="kod_mat" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_deb_sf" as="kod_deb_sf2">
          <link name="kod_sf" dimension="1" as="kod_sf2" is-final-dimension="1" is-private-dimension="1">
            <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </link>
      </links>
    </query>
    <query name="ur_dogplat-sum-upd" timestamp="29.07.2016 19:50:56" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <params>
        <param name="kod_dogplat" type="number" class-type="ur_dogplat" />
        <param name="dat" type="date" />
      </params>
      <select>
        <call function="if" as="dat_form" key="0">
          <call function="is not null">
            <column table="ur_dogplat" column="is_doc" />
          </call>
          <useparam name="dat" />
          <const>null</const>
        </call>
        <call function="if" as="summa" key="0">
          <call function="is not null">
            <column table="ur_dogplat" column="is_doc" />
          </call>
          <fact column="fin_ul_ob_on_date" title="Посроченная задолженность">
            <withparams>
              <useparam name="dat" />
            </withparams>
          </fact>
          <column table="ur_dogplat" column="summa" />
        </call>
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_dogplat-sum_v-upd" timestamp="27.05.2016 21:11:10" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <params>
        <param name="kod_dogplat" type="number">
          <const>1</const>
        </param>
        <param name="dat" type="date" />
      </params>
      <select>
        <fact column="ur_dolg_on_dat" as="sum_v" is-fact-use="1">
          <withparams>
            <useparam name="dat" />
          </withparams>
        </fact>
        <column table="ur_dogplat" column="kod_dogplat" as="kod_dogplat" />
      </select>
      <from>
        <qube>
          <link name="kod_dogplat" as="ur_dogplat" />
          <where>
            <call function="=">
              <column table="ur_dogplat" column="kod_dogplat" />
              <useparam name="kod_dogplat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_dogplat-sum_v-to-zero" timestamp="27.05.2016 21:03:52" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <params>
        <param name="kod_dogplat" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <const as="sum_v" type="number">0</const>
        <column table="ur_dogplat" column="kod_dogplat" as="kod_dogplat" />
      </select>
      <from>
        <qube>
          <link name="kod_dogplat" as="ur_dogplat" all-rows="1" />
          <where>
            <call function="=">
              <column table="ur_dogplat" column="kod_dogplat" />
              <useparam name="kod_dogplat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_dp_graf_insert_all" timestamp="29.12.2017 12:09:42" class="1" update-target="ur_dp_graf" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_graf.xml" haskeys="1">
      <params>
        <param type="number" name="kod_graf">
          <const>83</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_graf" type="number" as="kod_graf" key="1" fixed="1" />
        <column column="kod_dogplat" table="a" type="number" as="kod_dogplat" key="0" />
      </select>
      <from>
        <!--<query name="ur_graf">
          <link name="kod_folders">
            <link name="kod_isp">
              <link name="kod_hist_mat">
                <link name="kod_mat">
                  <elink name="ur_dogplat" />
                </link>
              </link>
            </link>
          </link>
        </query>-->
        <query as="a">
          <union>
            <query title="Соглашения" haskeys="1">
              <select>
                <column table="ur_graf" column="kod_graf" as="kod_graf" key="1" fixed="1" />
                <column table="ur_dogplat" column="kod_dogplat" as="kod_dogplat" key="0" />
              </select>
              <from>
                <query name="ur_graf" as="ur_graf">
                  <link name="kod_sogl" as="kod_sogl" table="ur_sogl" child="ur_graf" field="kod_sogl" parent="ur_sogl" back="ur_graf" title="Доп. документ (арбитраж)">
                    <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_sogl" parent="ur_sogl" back="ur_dogplat" />
                  </link>
                </query>
              </from>
            </query>
            <query title="История">
              <select>
                <column table="ur_graf" column="kod_graf" as="kod_graf" />
                <column table="ur_dogplat" column="kod_dogplat" as="kod_dogplat" />
              </select>
              <from>
                <query name="ur_graf" as="ur_graf">
                  <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_graf" field="kod_hist_mat" parent="ur_hist_mat" back="ur_graf" title="История рассмотрения">
                    <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                      <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
                    </link>
                  </link>
                </query>
              </from>
            </query>
            <query title="Исп лист">
              <select>
                <column table="ur_graf" column="kod_graf" as="kod_graf" />
                <column table="ur_dogplat" column="kod_dogplat" as="kod_dogplat" />
              </select>
              <from>
                <query name="ur_graf" as="ur_graf">
                  <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_graf" field="kod_isp" parent="ur_isp" back="ur_graf" title="Исполнительный лист">
                    <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
                      <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                        <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
                      </link>
                    </link>
                  </link>
                </query>
              </from>
            </query>
          </union>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_graf" />
            <useparam name="kod_graf" />
          </call>
          <call function="is not null">
            <column table="a" column="kod_dogplat" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_dp_graf_insert_single" timestamp="29.12.2017 12:46:11" class="1" update-target="ur_dp_graf" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_graf.xml" haskeys="1">
      <params>
        <param type="number" name="kod_dogplat" />
        <param type="number" name="kod_graf" />
      </params>
      <select>
        <call function="()" as="kod_graf" type="number" key="0">
          <useparam name="kod_graf" />
        </call>
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_dp_inkasso_insert_all" class="1" update-target="ur_dp_inkasso" timestamp="09.09.2022 15:10:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_inkasso.xml">
      <params>
        <param name="kod_folders" type="number" />
        <param name="kod_inkasso" type="number" />
      </params>
      <select>
        <call function="()" as="kod_inkasso" type="number" key="0">
          <useparam name="kod_inkasso" />
        </call>
        <column table="ur_dogplat" column="kod_dogplat" type="number" as="kod_dogplat" key="0" />
      </select>
      <from>
        <query name="ur_folders" as="ur_folders" title="Папка">
          <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист">
            <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
              <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_folders" column="kod_folders" />
          <useparam name="kod_folders" />
        </call>
      </where>
    </query>
    <query name="ur_dp_inkasso_insert_single" timestamp="23.06.2016 02:31:02" class="1" update-target="ur_dp_inkasso" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_inkasso.xml" haskeys="1">
      <params>
        <param name="kod_dogplat" type="number" />
        <param name="kod_inkasso" type="number" />
      </params>
      <select>
        <call function="()" as="kod_inkasso" type="number" key="0">
          <useparam name="kod_inkasso" />
        </call>
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_dp_isp_insert_all" timestamp="23.06.2016 00:36:02" class="1" update-target="ur_dp_isp" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_isp.xml" haskeys="1">
      <params>
        <param type="number" name="kod_mat">
          <const>83</const>
        </param>
      </params>
      <select>
        <column table="ur_mat_isp" column="kod_mat" type="number" as="kod_mat" key="1" fixed="1" />
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="0" />
      </select>
      <from>
        <query name="ur_mat_isp" as="ur_mat_isp">
          <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat_isp" field="kod_folders" parent="ur_folders" back="ur_mat_isp" title="Папка">
            <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист">
              <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
                <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                  <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
                </link>
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_mat_isp" column="kod_mat" />
          <useparam name="kod_mat" />
        </call>
      </where>
    </query>
    <query name="ur_dp_isp_insert_single" timestamp="23.06.2016 00:54:36" class="1" update-target="ur_dp_isp" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_isp.xml" haskeys="1">
      <params>
        <param type="number" name="kod_dogplat" />
        <param name="kod_mat_isp" type="number" />
      </params>
      <select>
        <call function="()" as="kod_mat" type="number" key="0">
          <useparam name="kod_mat_isp" />
        </call>
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_dp_isp_other_insert_all" timestamp="04.04.2019 16:10:03" class="1" update-target="ur_dp_isp_other" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_isp_other.xml" haskeys="1">
      <params>
        <param type="number" name="kod_isp_other">
          <const>83</const>
        </param>
      </params>
      <select>
        <column table="ur_isp_other" column="kod_isp_other" type="number" as="kod_isp_other" key="1" fixed="1" />
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="0" />
      </select>
      <from>
        <query name="ur_isp_other" as="ur_isp_other">
          <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_isp_other" field="kod_folders" parent="ur_folders" back="ur_isp_other" title="Папка">
            <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист">
              <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
                <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                  <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
                </link>
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_isp_other" column="kod_isp_other" />
          <useparam name="kod_isp_other" />
        </call>
      </where>
    </query>
    <query name="ur_dp_isp_other_insert_single" timestamp="04.04.2019 16:10:48" class="1" update-target="ur_dp_isp_other" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_isp_other.xml" haskeys="1">
      <params>
        <param type="number" name="kod_dogplat" />
        <param name="kod_isp_other" type="number" />
      </params>
      <select>
        <call function="()" as="kod_isp_other" type="number" key="0">
          <useparam name="kod_isp_other" />
        </call>
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_dp_kazn_insert_all" timestamp="23.06.2016 02:31:19" class="1" update-target="ur_dp_kazn" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_kazn.xml" haskeys="1">
      <params>
        <param type="number" name="kod_kazn">
          <const>83</const>
        </param>
      </params>
      <select>
        <column table="ur_kazn" column="kod_kazn" type="number" as="kod_kazn" key="1" fixed="1" />
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="0" />
      </select>
      <from>
        <query name="ur_kazn" as="ur_kazn">
          <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_kazn" field="kod_folders" parent="ur_folders" back="ur_kazn" title="Папка">
            <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист">
              <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
                <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
                  <elink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" />
                </link>
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_kazn" column="kod_kazn" />
          <useparam name="kod_kazn" />
        </call>
      </where>
    </query>
    <query name="ur_dp_kazn_insert_single" timestamp="23.06.2016 02:38:52" class="1" update-target="ur_dp_kazn" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dp_kazn.xml" haskeys="1">
      <params>
        <param type="number" name="kod_dogplat" />
        <param name="kod_kazn" type="number" />
      </params>
      <select>
        <call function="()" as="kod_kazn" type="number" key="0">
          <useparam name="kod_kazn" />
        </call>
        <column column="kod_dogplat" table="ur_dogplat" type="number" as="kod_dogplat" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_dogplat" as="ur_dogplat" />
      </from>
      <where>
        <call function="=">
          <column table="ur_dogplat" column="kod_dogplat" />
          <useparam name="kod_dogplat" />
        </call>
      </where>
    </query>
    <query name="ur_folders_isp" inherit="ur_folders" class="1" title="Папка исполнительного производства" timestamp="22.09.2023 14:24:59" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folders" type="number" fact="count_ur_folders" agg="count" as="kod_folders" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" new-val="kodp_new_val" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_vi" type="number" as="kod_vi" reference="uk_vi" refcol="kod_vi" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_create" type="date" title="Дата создания папки" column-mandatory="1" column-default="today" as="dat_create" key="0" />
        <column table="a" column="zadol" type="number" title="" as="zadol" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ur_folders" key="0" />
        <column table="a" column="kod_isp" type="number" valid="qube.ur_fld_isp_kod_isp_vld" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <buttons>
            <uicommand action-type="dynamic-form-for-select" call="ur_isp_list" />
          </buttons>
        </column>
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" column-default="rs_esys_tepel" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" column-mandatory="1" column-default="ur_folders_vvod_default" column-editable="0" as="vvod" reference="ur_folders_vvod" refcol="kod" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата сброса папки в архив" comment="дата сброса папки в архив" visible="is_not_new" as="dat_finish" key="0" />
        <column table="a" column="num_doc" type="string" title="Документ (основание для сброса папки в архив)" comment="док-т - основание для архивации папки" visible="is_not_new" as="num_doc" key="0" />
        <column table="a" column="kod_podr" type="number" comment="код подразделения" column-editable="kr_dep_is_multi" column-mandatory="1" column-default="kr_dep_current" as="kod_podr" key="0">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="tep_el_byt" type="number" title="" comment="1-электр,2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="замена ответчика - новый код" visible="is_not_new" as="kodp_new" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kodps" type="string" title="" comment="код абонента строка" as="kodps" key="0" />
        <column table="a" column="namep" type="string" title="" comment="имя абонета" as="namep" key="0" />
        <column table="a" column="kod_category" type="number" comment="категория абонента" title="Категория потребителя" as="kod_category" reference="us_category" refcol="kod_category" key="0">
          <listquery>
            <query name="us_category" />
          </listquery>
        </column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <call function="if" as="kod_abon_type" type="number" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call as="kodp_new_val" function="()" type="number" key="0">
          <column table="kod_isp" column="kodp" />
        </call>
        <column table="kod_dog" column="ndog" is-fact="1" fact="ur_folders_ndog" agg="max" as="ndog" key="0" />
        <column table="kod_dog" column="name" is-fact="1" fact="ur_folders_dog_name" agg="max" as="name" key="0" />
        <call function="true if null" as="is_active" title="Статус папки" key="0">
          <column table="this" column="dat_finish" dgroup="max" />
        </call>
        <call function="true if 0" as="not_vvod" key="0">
          <column table="this" column="vvod" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="font_color" function="case" title="Цвет текста" type="string" key="0">
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder1" dgroup="max" />
            </call>
            <const>'102,51,99'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder2" dgroup="max" />
            </call>
            <const>'139,0,0'</const>
          </call>
        </call>
        <call function="||" as="info_reminder" title="Напоминание" key="0">
          <column table="ur_mat" column="mat_reminder1" />
          <column table="ur_mat" column="mat_reminder2" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_folders" as="kod_folders_isp" key="0" />
        <column table="this" column="dat_create" is-fact="1" agg="max" fact="ur_folders_isp_dat_create" as="isp_dt_create" key="0" />
        <const type="number" as="cnt" fact="ur_folders_isp_count" agg="sum" key="0">1</const>
        <call function="if" as="isp_date" type="date" key="0">
          <call function="=">
            <column table="kod_esys" column="kod_esys" />
            <const>1</const>
          </call>
          <call function="ug_isp.get_isp_date" type="date">
            <column table="a" column="kod_folders" />
          </call>
          <const>NULL</const>
        </call>
        <call function="if" as="isp_place" type="string" key="0">
          <call function="=">
            <column table="kod_esys" column="kod_esys" />
            <const>1</const>
          </call>
          <call function="ug_isp.get_isp_place" type="string">
            <column table="a" column="kod_folders" />
          </call>
          <const>NULL</const>
        </call>
      </select>
      <from>
        <table name="ur_folders" as="a" title="Папка">
          <dlink name="ur_mat" dimension="1" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
            <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </dlink>
          <link name="kod_isp" as="kod_isp1" table="ur_isp" child="ur_folders_isp" field="kod_isp" parent="ur_isp" back="ur_folders_isp" title="Исполнительный лист">
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="ur_mat_isp" dimension="1" is-private-dimension="1" as="ur_mat_isp" table="ur_mat_isp" child="ur_mat_isp" field="kod_folders_isp" parent="ur_folders_isp" back="ur_mat_isp">
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_kazn_isp" dimension="1" is-private-dimension="1" as="ur_kazn_isp" table="ur_kazn" child="ur_kazn" field="kod_folders_isp" parent="ur_folders_isp" back="ur_kazn_isp" />
          <dlink name="ur_isp_other_isp" dimension="1" is-private-dimension="1" as="ur_isp_other_isp" table="ur_isp_other" child="ur_isp_other" field="kod_folders_isp" parent="ur_folders_isp" back="ur_isp_other_isp" />
          <dlink name="ur_inkasso_isp" dimension="1" is-private-dimension="1" as="ur_inkasso_isp" table="ur_inkasso" child="ur_inkasso" field="kod_folders_isp" parent="ur_folders_isp" back="ur_inkasso_isp" />
        </table>
        <query name="kr_employee" as="kod_emp" join="left outer" title="Юрист" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kod_podr" join="left outer" title="Отделение" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_podr" column="kodp" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" is-final-dimension="1" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="ur_folders_isp" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="uk_vi" as="kod_vi" join="left outer" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_vi" />
            <column table="kod_vi" column="kod_vi" />
          </call>
        </query>
        <query name="ur_folders" as="kod_parent" join="left outer" dname="ur_folders_isp" title="Папка">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_folders_isp" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_new" join="left outer" title="Абонент" dname="ur_folders_new">
          <call function="=">
            <column table="a" column="kodp_new" />
            <column table="kodp_new" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="us_category" as="kod_category" join="left outer" dname="ur_folders_isp" title="Категория потребителей (юристы)">
          <call function="=">
            <column table="a" column="kod_category" />
            <column table="kod_category" column="kod_category" />
          </call>
        </query>
        <query name="ur_folders_ba" join="left outer" as="kod_folders_ba" dname="ur_folders_isp">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_folders_new" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer_abon_type" as="kod_abon_type" join="left outer" dname="ur_folders_isp">
          <call function="=">
            <column table="kod_abon_type" column="kod_abon_type" />
            <column table="this" column="kod_abon_type" />
          </call>
        </query>
        <query name="ur_folders_vvod" as="vvod" join="left outer" dname="ur_folders_isp" title="Способ учета задолженности">
          <call function="=">
            <column table="a" column="vvod" />
            <column table="vvod" column="kod" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_folders_isp" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_isp">
          <call function="true" />
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dimension="kod_isp" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_isp" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_isp">
          <call function="true" />
        </query>
      </from>
      <actions>
        <action action-type="dynamic-form" name="form_ur_folders_isp_main_el" call="ur_folders_isp_main_el" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_main" call="ur_folders_isp_main" />
        <action action-type="dynamic-form-create" name="create_form_ur_folders_isp_main" call="ur_folders_isp_main" />
        <action action-type="dynamic-form-create" name="create_form_ur_folders_isp_main_el" call="ur_folders_isp_main_el" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_rsp" call="ur_folders_rsp" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_vvod" call="ur_folders_rsp_vvod" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_inkasso" call="ur_folders_inkasso" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_kazn" call="ur_folders_kazn" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_other" call="ur_folders_other" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_other_vvod" call="ur_folders_other_vvod" />
        <action action-type="dynamic-form" name="form_ur_folders_isp_har_fi" call="ur_folders_har_fi" />
      </actions>
      <where>
        <call function="=">
          <column table="this" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
      <links>
        <link name="kod_isp" as="kod_isp1">
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
        <dlink name="ur_mat_isp" dimension="1" is-private-dimension="1">
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </dlink>
        <dlink name="ur_kazn_isp" dimension="1" is-private-dimension="1" />
        <dlink name="ur_isp_other_isp" dimension="1" is-private-dimension="1" />
        <dlink name="ur_inkasso_isp" dimension="1" is-private-dimension="1" />
      </links>
    </query>
    <query name="ur_folders_ba" inherit="ur_folders" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folders" type="number" fact="count_ur_folders" agg="count" as="kod_folders" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" new-val="kodp_new_val" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_vi" type="number" as="kod_vi" reference="uk_vi" refcol="kod_vi" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_create" type="date" title="Дата создания папки" column-mandatory="1" column-default="today" as="dat_create" key="0" />
        <column table="a" column="zadol" type="number" title="" as="zadol" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ur_folders" key="0" />
        <column table="a" column="kod_isp" type="number" valid="qube.ur_fld_isp_kod_isp_vld" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <buttons>
            <uicommand action-type="dynamic-form-for-select" call="ur_isp_list" />
          </buttons>
        </column>
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" column-default="rs_esys_tepel" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" column-mandatory="1" column-default="ur_folders_vvod_default" column-editable="0" as="vvod" reference="ur_folders_vvod" refcol="kod" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата сброса папки в архив" comment="дата сброса папки в архив" visible="is_not_new" as="dat_finish" key="0" />
        <column table="a" column="num_doc" type="string" title="Документ (основание для сброса папки в архив)" comment="док-т - основание для архивации папки" visible="is_not_new" as="num_doc" key="0" />
        <column table="a" column="kod_podr" type="number" comment="код подразделения" column-editable="kr_dep_is_multi" column-mandatory="1" column-default="kr_dep_current" as="kod_podr" key="0">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="tep_el_byt" type="number" title="" comment="1-электр,2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="замена ответчика - новый код" visible="is_not_new" as="kodp_new" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kodps" type="string" title="" comment="код абонента строка" as="kodps" key="0" />
        <column table="a" column="namep" type="string" title="" comment="имя абонета" as="namep" key="0" />
        <column table="a" column="kod_category" type="number" comment="категория абонента" title="Категория потребителя" as="kod_category" reference="us_category" refcol="kod_category" key="0">
          <listquery>
            <query name="us_category" />
          </listquery>
        </column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <call function="if" as="kod_abon_type" type="number" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call as="kodp_new_val" function="()" type="number" key="0">
          <column table="kod_isp" column="kodp" />
        </call>
        <const type="number" as="cnt" fact="ur_folders_count" agg="sum" key="0">1</const>
        <column table="kod_dog" column="ndog" is-fact="1" fact="ur_folders_ndog" agg="max" as="ndog" key="0" />
        <column table="kod_dog" column="name" is-fact="1" fact="ur_folders_dog_name" agg="max" as="name" key="0" />
        <call function="true if null" as="is_active" title="Статус папки" key="0">
          <column table="this" column="dat_finish" dgroup="max" />
        </call>
        <call function="true if 0" as="not_vvod" key="0">
          <column table="this" column="vvod" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="font_color" function="case" title="Цвет текста" type="string" key="0">
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder1" dgroup="max" />
            </call>
            <const>'102,51,99'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder2" dgroup="max" />
            </call>
            <const>'139,0,0'</const>
          </call>
        </call>
        <call function="||" as="info_reminder" title="Напоминание" key="0">
          <column table="ur_mat" column="mat_reminder1" />
          <column table="ur_mat" column="mat_reminder2" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_folders" as="kod_folders_ba" key="0" />
      </select>
      <where>
        <call function="=">
          <column table="this" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
      <from>
        <table name="ur_folders" as="a" title="Папка">
          <dlink name="ur_mat" dimension="1" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
            <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </dlink>
        </table>
        <query name="kr_employee" as="kod_emp" join="left outer" title="Юрист" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kod_podr" join="left outer" title="Отделение" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_podr" column="kodp" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" is-final-dimension="1" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="ur_folders_ba" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="uk_vi" as="kod_vi" join="left outer" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_vi" />
            <column table="kod_vi" column="kod_vi" />
          </call>
        </query>
        <query name="ur_folders" as="kod_parent" join="left outer" dname="ur_folders_ba" title="Папка">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_folders_ba" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_new" join="left outer" title="Абонент" dname="ur_folders_new">
          <call function="=">
            <column table="a" column="kodp_new" />
            <column table="kodp_new" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="us_category" as="kod_category" join="left outer" dname="ur_folders_ba" title="Категория потребителей (юристы)">
          <call function="=">
            <column table="a" column="kod_category" />
            <column table="kod_category" column="kod_category" />
          </call>
        </query>
        <query name="ur_folders_ba" join="left outer" as="kod_folders_ba" dname="ur_folders_ba">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_folders_new" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer_abon_type" as="kod_abon_type" join="left outer" dname="ur_folders_ba">
          <call function="=">
            <column table="kod_abon_type" column="kod_abon_type" />
            <column table="this" column="kod_abon_type" />
          </call>
        </query>
        <query name="ur_folders_vvod" as="vvod" join="left outer" dname="ur_folders_ba" title="Способ учета задолженности">
          <call function="=">
            <column table="a" column="vvod" />
            <column table="vvod" column="kod" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_folders_ba" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_ba">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="ur_folders_vvod" class="1" title="Способ учета задолженности" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Вид суммы" vid="1" as="name" key="0" />
      </select>
      <from>
        <table name="folders_vvod" view="1" as="a" />
      </from>
    </query>
    <query name="prizn_arch_folder" class="1" title="Статус" timestamp="14.05.2017 02:02:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_folder" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_folder" type="string" title="Статус" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_folder_view" view="1" as="a" />
      </from>
    </query>
    <query name="prizn_arch_folder_act" inherit="prizn_arch_folder" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_folder" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_folder" type="string" title="Статус" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_folder_view" view="1" as="a" />
      </from>
    </query>
    <query name="ur_folders_isp_sync_dat_arh" update-target="ur_folders" timestamp="10.05.2016 00:46:34" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <params>
        <param type="number" name="kod_isp" />
      </params>
      <select>
        <column table="ur_folders" column="kod_folders" as="kod_folders" key="1" fixed="1" />
        <column table="kod_isp" column="dat_arh" as="dat_finish" key="0" />
      </select>
      <from>
        <query name="ur_folders" as="ur_folders" title="Папка">
          <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_isp" column="kod_isp" />
          <useparam name="kod_isp" />
        </call>
      </where>
    </query>
    <query name="ur_folders_vvod_default" timestamp="27.05.2016 01:56:15" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      <select>
        <const as="val" key="0">0</const>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="ur_folders_isp_othr" inherit="ur_folders" class="1" timestamp="20.06.2016 19:03:09" title="Папка исполнительного производства" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folders" type="number" fact="count_ur_folders" agg="count" as="kod_folders" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" new-val="kodp_new_val" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_vi" type="number" as="kod_vi" reference="uk_vi" refcol="kod_vi" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_create" type="date" title="Дата создания папки" column-mandatory="1" column-default="today" as="dat_create" key="0" />
        <column table="a" column="zadol" type="number" title="" as="zadol" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ur_folders" key="0" />
        <column table="a" column="kod_isp" type="number" valid="qube.ur_fld_isp_kod_isp_vld" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <buttons>
            <uicommand action-type="dynamic-form-for-select" call="ur_isp_list" />
          </buttons>
        </column>
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" column-default="rs_esys_tepel" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" column-mandatory="1" column-default="ur_folders_vvod_default" column-editable="0" as="vvod" reference="ur_folders_vvod" refcol="kod" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата сброса папки в архив" comment="дата сброса папки в архив" visible="is_not_new" as="dat_finish" key="0" />
        <column table="a" column="num_doc" type="string" title="Документ (основание для сброса папки в архив)" comment="док-т - основание для архивации папки" visible="is_not_new" as="num_doc" key="0" />
        <column table="a" column="kod_podr" type="number" comment="код подразделения" column-editable="kr_dep_is_multi" column-mandatory="1" column-default="kr_dep_current" as="kod_podr" key="0">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="tep_el_byt" type="number" title="" comment="1-электр,2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="замена ответчика - новый код" visible="is_not_new" as="kodp_new" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kodps" type="string" title="" comment="код абонента строка" as="kodps" key="0" />
        <column table="a" column="namep" type="string" title="" comment="имя абонета" as="namep" key="0" />
        <column table="a" column="kod_category" type="number" comment="категория абонента" title="Категория потребителя" as="kod_category" reference="us_category" refcol="kod_category" key="0">
          <listquery>
            <query name="us_category" />
          </listquery>
        </column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <call function="if" as="kod_abon_type" type="number" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call as="kodp_new_val" function="()" type="number" key="0">
          <column table="kod_isp" column="kodp" />
        </call>
        <column table="kod_dog" column="ndog" is-fact="1" fact="ur_folders_ndog" agg="max" as="ndog" key="0" />
        <column table="kod_dog" column="name" is-fact="1" fact="ur_folders_dog_name" agg="max" as="name" key="0" />
        <call function="true if null" as="is_active" title="Статус папки" key="0">
          <column table="this" column="dat_finish" dgroup="max" />
        </call>
        <call function="true if 0" as="not_vvod" key="0">
          <column table="this" column="vvod" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="font_color" function="case" title="Цвет текста" type="string" key="0">
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder1" dgroup="max" />
            </call>
            <const>'102,51,99'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder2" dgroup="max" />
            </call>
            <const>'139,0,0'</const>
          </call>
        </call>
        <call function="||" as="info_reminder" title="Напоминание" key="0">
          <column table="ur_mat" column="mat_reminder1" />
          <column table="ur_mat" column="mat_reminder2" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const type="number" as="cnt" fact="ur_folders_isp_othr_count" agg="sum" key="0">1</const>
      </select>
      <links>
        <link name="kod_isp">
          <dlink name="ur_folders_isp" dimension="1" />
        </link>
      </links>
      <from>
        <table name="ur_folders" as="a" title="Папка">
          <dlink name="ur_mat" dimension="1" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
            <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </dlink>
          <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders_isp_othr" field="kod_isp" parent="ur_isp" back="ur_folders_isp_othr" title="Исполнительный лист">
            <dlink name="ur_folders_isp" dimension="1" as="ur_folders_isp" table="ur_folders_isp" child="ur_folders_isp" field="kod_isp" parent="ur_isp" back="ur_folders_isp" title="Папка исполнительного производства" />
          </link>
        </table>
        <query name="kr_employee" as="kod_emp" join="left outer" title="Юрист" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kod_podr" join="left outer" title="Отделение" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_podr" column="kodp" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" is-final-dimension="1" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="ur_folders_isp_othr" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="uk_vi" as="kod_vi" join="left outer" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_vi" />
            <column table="kod_vi" column="kod_vi" />
          </call>
        </query>
        <query name="ur_folders" as="kod_parent" join="left outer" dname="ur_folders_isp_othr" title="Папка">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_folders_isp_othr" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_new" join="left outer" title="Абонент" dname="ur_folders_new">
          <call function="=">
            <column table="a" column="kodp_new" />
            <column table="kodp_new" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="us_category" as="kod_category" join="left outer" dname="ur_folders_isp_othr" title="Категория потребителей (юристы)">
          <call function="=">
            <column table="a" column="kod_category" />
            <column table="kod_category" column="kod_category" />
          </call>
        </query>
        <query name="ur_folders_ba" join="left outer" as="kod_folders_ba" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_folders_new" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer_abon_type" as="kod_abon_type" join="left outer" dname="ur_folders_isp_othr">
          <call function="=">
            <column table="kod_abon_type" column="kod_abon_type" />
            <column table="this" column="kod_abon_type" />
          </call>
        </query>
        <query name="ur_folders_vvod" as="vvod" join="left outer" dname="ur_folders_isp_othr" title="Способ учета задолженности">
          <call function="=">
            <column table="a" column="vvod" />
            <column table="vvod" column="kod" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_folders_isp_othr" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_isp_othr">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="ur_folders_abon_info" class="1" timestamp="28.04.2020 19:13:37" title="Информация по абоненту в папке" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      <params>
        <param name="kodp" type="number">
          <const>52274955</const>
        </param>
      </params>
      <select>
        <column table="kodp" column="kodp" as="kod" title="кодп" />
        <column table="kodp" column="inn" as="inn" />
        <fact column="kr_dogovor_dat_active_sign" title="Дата подписания активного договора" as="kr_dogovor_dat_active_sign" is-fact-use="1" />
        <fact column="kr_dogovor_ndog_active" title="Номер активного договора" as="kr_dogovor_ndog_active" is-fact-use="1" />
        <fact column="kr_employee_active_ruk" title="Должность и ФИО руководителя" as="kr_employee_active_ruk" is-fact-use="1" />
        <column table="kod_d_p" column="kf_adress_o" title="Адрес для переписки" as="adress_p" />
        <column table="kod_d_ur" column="kf_adress_o" title="Адрес юридический" as="adress_ur" />
        <fact column="kr_dogovor_name_group_cust" title="Группа потребления" as="kr_dogovor_name_group_cust" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kodp">
            <link name="kod_d_p" />
            <link name="kod_d_ur" />
          </link>
          <link name="kod_dog">
            <link name="kod_dog_dop">
              <link name="kod_group_cust" />
            </link>
          </link>
          <where>
            <call function="=">
              <column table="kodp" column="kodp" />
              <useparam name="kodp" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_folders_kodp" inherit="ur_folders" class="1" timestamp="30.08.2018 02:51:15" comment="Связь с документами через абонента" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folders" type="number" fact="count_ur_folders" agg="count" as="kod_folders" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" new-val="kodp_new_val" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_vi" type="number" as="kod_vi" reference="uk_vi" refcol="kod_vi" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_create" type="date" title="Дата создания папки" column-mandatory="1" column-default="today" as="dat_create" key="0" />
        <column table="a" column="zadol" type="number" title="" as="zadol" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ur_folders" key="0" />
        <column table="a" column="kod_isp" type="number" valid="qube.ur_fld_isp_kod_isp_vld" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <buttons>
            <uicommand action-type="dynamic-form-for-select" call="ur_isp_list" />
          </buttons>
        </column>
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" column-default="rs_esys_tepel" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" column-mandatory="1" column-default="ur_folders_vvod_default" column-editable="0" as="vvod" reference="ur_folders_vvod" refcol="kod" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата сброса папки в архив" comment="дата сброса папки в архив" visible="is_not_new" as="dat_finish" key="0" />
        <column table="a" column="num_doc" type="string" title="Документ (основание для сброса папки в архив)" comment="док-т - основание для архивации папки" visible="is_not_new" as="num_doc" key="0" />
        <column table="a" column="kod_podr" type="number" comment="код подразделения" column-editable="kr_dep_is_multi" column-mandatory="1" column-default="kr_dep_current" as="kod_podr" key="0">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="tep_el_byt" type="number" title="" comment="1-электр,2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="замена ответчика - новый код" visible="is_not_new" as="kodp_new" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kodps" type="string" title="" comment="код абонента строка" as="kodps" key="0" />
        <column table="a" column="namep" type="string" title="" comment="имя абонета" as="namep" key="0" />
        <column table="a" column="kod_category" type="number" comment="категория абонента" title="Категория потребителя" as="kod_category" reference="us_category" refcol="kod_category" key="0">
          <listquery>
            <query name="us_category" />
          </listquery>
        </column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <call function="if" as="kod_abon_type" type="number" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call as="kodp_new_val" function="()" type="number" key="0">
          <column table="kod_isp" column="kodp" />
        </call>
        <const type="number" as="cnt" fact="ur_folders_count" agg="sum" key="0">1</const>
        <column table="kod_dog" column="ndog" is-fact="1" fact="ur_folders_ndog" agg="max" as="ndog" key="0" />
        <column table="kod_dog" column="name" is-fact="1" fact="ur_folders_dog_name" agg="max" as="name" key="0" />
        <call function="true if null" as="is_active" title="Статус папки" key="0">
          <column table="this" column="dat_finish" dgroup="max" />
        </call>
        <call function="true if 0" as="not_vvod" key="0">
          <column table="this" column="vvod" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="font_color" function="case" title="Цвет текста" type="string" key="0">
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder1" dgroup="max" />
            </call>
            <const>'102,51,99'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder2" dgroup="max" />
            </call>
            <const>'139,0,0'</const>
          </call>
        </call>
        <call function="||" as="info_reminder" title="Напоминание" key="0">
          <column table="ur_mat" column="mat_reminder1" />
          <column table="ur_mat" column="mat_reminder2" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_folders" as="a" title="Папка">
          <dlink name="ur_mat" dimension="1" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
            <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </dlink>
        </table>
        <query name="kr_employee" as="kod_emp" join="left outer" title="Юрист" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kod_podr" join="left outer" title="Отделение" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_podr" column="kodp" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" is-final-dimension="1" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="ur_folders_kodp" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="uk_vi" as="kod_vi" join="left outer" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_vi" />
            <column table="kod_vi" column="kod_vi" />
          </call>
        </query>
        <query name="ur_folders" as="kod_parent" join="left outer" dname="ur_folders_kodp" title="Папка">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_folders_kodp" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_new" join="left outer" title="Абонент" dname="ur_folders_new">
          <call function="=">
            <column table="a" column="kodp_new" />
            <column table="kodp_new" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="us_category" as="kod_category" join="left outer" dname="ur_folders_kodp" title="Категория потребителей (юристы)">
          <call function="=">
            <column table="a" column="kod_category" />
            <column table="kod_category" column="kod_category" />
          </call>
        </query>
        <query name="ur_folders_ba" join="left outer" as="kod_folders_ba" dname="ur_folders_kodp">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_folders_new" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer_abon_type" as="kod_abon_type" join="left outer" dname="ur_folders_kodp">
          <call function="=">
            <column table="kod_abon_type" column="kod_abon_type" />
            <column table="this" column="kod_abon_type" />
          </call>
        </query>
        <query name="ur_folders_vvod" as="vvod" join="left outer" dname="ur_folders_kodp" title="Способ учета задолженности">
          <call function="=">
            <column table="a" column="vvod" />
            <column table="vvod" column="kod" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_folders_kodp" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders_kodp">
          <call function="true" />
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_folders_kodp" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_folders_sync_dat_arh" update-target="ur_folders" timestamp="30.10.2019 14:01:31" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <params>
        <param type="number" name="kod_folders" />
      </params>
      <select>
        <column table="ur_folders" column="kod_folders" as="kod_folders" key="1" fixed="1" />
        <column table="ur_folders_isp" column="dat_finish" as="dat_finish" key="0" />
      </select>
      <from>
        <query name="ur_folders" as="ur_folders" title="Папка">
          <elink name="ur_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_folders" parent="ur_folders" back="ur_isp" title="Исполнительный лист">
            <elink name="ur_folders_isp" as="ur_folders_isp" table="ur_folders_isp" child="ur_folders_isp" field="kod_isp" parent="ur_isp" back="ur_folders_isp" title="Папка исполнительного производства" />
          </elink>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="ur_folders_isp" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
          <call function="or">
            <call function="=0">
              <query>
                <select>
                  <column table="ur_isp_sq" column="kod_isp" group="count" as="kod_isp" />
                </select>
                <from>
                  <query name="ur_isp" as="ur_isp_sq" title="Исполнительный лист" />
                </from>
                <where>
                  <call function="and">
                    <call function="=">
                      <column column="kod_folders" table="ur_isp_sq" />
                      <column column="kod_folders" table="ur_folders" />
                    </call>
                    <call function="is null">
                      <column table="ur_isp_sq" column="dat_arh" />
                    </call>
                  </call>
                </where>
              </query>
            </call>
            <call function="and">
              <call function="=1">
                <query>
                  <select>
                    <column table="ur_isp_sq" column="kod_isp" group="count" as="kod_isp" />
                  </select>
                  <from>
                    <query name="ur_isp" as="ur_isp_sq" title="Исполнительный лист" />
                  </from>
                  <where>
                    <call function="and">
                      <call function="=">
                        <column column="kod_folders" table="ur_isp_sq" />
                        <column column="kod_folders" table="ur_folders" />
                      </call>
                      <call function="is null">
                        <column table="ur_isp_sq" column="dat_arh" />
                      </call>
                    </call>
                  </where>
                </query>
              </call>
              <call function="is null">
                <column table="ur_folders_isp" column="dat_finish" />
              </call>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="ur_isp_folders_sync_dat_arh" update-target="ur_isp" timestamp="29.10.2019 12:34:42" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      <params>
        <param type="number" name="kod_folders" />
      </params>
      <select>
        <column table="kod_isp" column="kod_isp" as="kod_isp" key="0" />
        <column table="ur_folders" column="dat_finish" as="dat_arh" key="0" />
      </select>
      <from>
        <query name="ur_folders" as="ur_folders" title="Папка">
          <link name="kod_isp" as="kod_isp" table="ur_isp" child="ur_folders" field="kod_isp" parent="ur_isp" back="ur_folders" title="Исполнительный лист" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_folders" column="kod_folders" />
          <useparam name="kod_folders" />
        </call>
      </where>
    </query>
    <query name="ur_folders_pir_sync_dat_arh" update-target="ur_folders" timestamp="30.10.2019 14:19:29" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <params>
        <param type="number" name="kod_isp" />
      </params>
      <select>
        <column table="ur_folders" column="kod_folders" as="kod_folders" key="1" fixed="1" />
        <column table="ur_isp" column="dat_arh" as="dat_finish" key="0" />
      </select>
      <from>
        <query name="ur_folders" as="ur_folders" title="Папка">
          <elink name="ur_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_folders" parent="ur_folders" back="ur_isp" title="Исполнительный лист" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column column="kod_isp" table="ur_isp" />
            <useparam name="kod_isp" />
          </call>
          <call function="or">
            <call function="=0">
              <query>
                <select>
                  <column table="ur_isp_sq" column="kod_isp" group="count" as="kod_isp" />
                </select>
                <from>
                  <query name="ur_isp" as="ur_isp_sq" title="Исполнительный лист" />
                </from>
                <where>
                  <call function="and">
                    <call function="=">
                      <column column="kod_folders" table="ur_isp_sq" />
                      <column column="kod_folders" table="ur_folders" />
                    </call>
                    <call function="is null">
                      <column table="ur_isp_sq" column="dat_arh" />
                    </call>
                  </call>
                </where>
              </query>
            </call>
            <call function="and">
              <call function="=1">
                <query>
                  <select>
                    <column table="ur_isp_sq" column="kod_isp" group="count" as="kod_isp" />
                  </select>
                  <from>
                    <query name="ur_isp" as="ur_isp_sq" title="Исполнительный лист" />
                  </from>
                  <where>
                    <call function="and">
                      <call function="=">
                        <column column="kod_folders" table="ur_isp_sq" />
                        <column column="kod_folders" table="ur_folders" />
                      </call>
                      <call function="is null">
                        <column table="ur_isp_sq" column="dat_arh" />
                      </call>
                    </call>
                  </where>
                </query>
              </call>
              <call function="is null">
                <column table="ur_isp" column="dat_arh" />
              </call>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="prizn_arch_folder_all" inherit="prizn_arch_folder" class="1" timestamp="08.05.2020 16:56:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml" haskeys="1">
      <where>
        <call function="in">
          <column table="a" column="kod" />
          <call function="array">
            <const>1</const>
            <const>0</const>
          </call>
        </call>
      </where>
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_folder" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_folder" type="string" title="Статус" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_folder_view" view="1" as="a" />
      </from>
    </query>
    <query name="ur_gp_opl_type" timestamp="08.06.2018 00:39:39" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_gp_opl_type.xml">
      <select>
        <column table="u" column="*" as="*" key="0" />
      </select>
      <from>
        <query as="u">
          <union>
            <query haskeys="1">
              <select>
                <const as="payer_type" type="number" key="1" fixed="1">0</const>
                <const as="name" type="string" key="0">'в бюджет'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>1</const>
                <const>'от ответчика'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const>2</const>
                <const>'из бюджета'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ur_graf_for_dog" class="1" timestamp="20.07.2016 03:08:06" inherit="ur_graf" comment="Для проверки наличия гпз по договоре. Для получения инф по СФ не включенным в гпз по договорам с гпз" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml" haskeys="1">
      <from>
        <table name="ur_graf" as="a">
          <dlink name="ur_graf_for_dog" dimension="1" as="ur_graf_for_dog" table="ur_graf_for_dog" child="ur_graf_for_dog" field="kod_graf" parent="ur_graf" back="ur_graf_for_dog" />
          <link name="kod_isp" as="kod_isp1" table="ur_isp" child="ur_graf_for_dog" field="kod_isp" parent="ur_isp" back="ur_graf_for_dog" title="Исполнительный лист">
            <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
              <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд" />
            </link>
          </link>
          <link name="kod_sogl" as="kod_sogl1" table="ur_sogl" child="ur_graf_for_dog" field="kod_sogl" parent="ur_sogl" back="ur_graf_for_dog" title="Доп. документ (арбитраж)" />
          <link name="kod_hist_mat" as="kod_hist_mat2" table="ur_hist_mat" child="ur_graf_for_dog" field="kod_hist_mat" parent="ur_hist_mat" back="ur_graf_for_dog" title="История рассмотрения">
            <link name="kod_mat" as="kod_mat2" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд" />
          </link>
          <dlink name="ur_graf_opl" pushpred="1" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_graf_opl" table="ur_graf_opl" child="ur_graf_opl" field="kod_graf" parent="ur_graf" back="ur_graf_opl" title="График оплат" />
          <dlink name="ur_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_graf" parent="ur_graf" back="ur_dp_graf">
            <dimlink is-private-dimension="1" is-final-dimension="1" dimension="1" name="kod_dogplat" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1">
              <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dimlink>
          </dlink>
        </table>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dname="ur_graf_for_dog" title="Доп. документ (арбитраж)">
          <call function="=">
            <column table="a" column="kod_sogl" />
            <column table="kod_sogl" column="kod_sogl" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_graf_for_dog" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dname="ur_graf_for_dog" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" dname="ur_graf_for_dog" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="ur_graf_for_dog" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_graf_for_dog" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_graf_for_dog">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="us_graf_status" as="kod_graf_status" join="left outer" dname="ur_graf_for_dog">
          <call function="=">
            <column table="a" column="kod_graf_status" />
            <column table="kod_graf_status" column="kod_graf_status" />
          </call>
        </query>
        <query name="kk_tipdoc_ur_prizn" as="ur_prizn" join="left outer" dname="ur_graf_for_dog" title="Тип доп. документа">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <column table="this" column="ur_prizn" />
          </call>
        </query>
        <query name="qube_ur_graf" as="qube_ur_graf" join="left outer" dname="ur_graf_for_dog">
          <call function="=">
            <column table="this" column="kod_graf" />
            <column table="qube_ur_graf" column="kod_graf" />
          </call>
        </query>
        <query name="ur_graf" as="kod_graf" join="left outer" dname="ur_graf_for_dog">
          <call function="=">
            <column table="a" column="kod_graf" />
            <column table="kod_graf" column="kod_graf" />
          </call>
        </query>
      </from>
      <select>
        <column table="a" column="kod_graf" type="number" key-dimension="kod_graf" is-fact="1" agg="max" as="kod_graf" fact="ur_graf_kod_graf" key="1" fixed="1" />
        <column table="a" column="kod_hist_mat" type="number" mandatory="is_mat" title="Решение" exists="is_mat" as="kod_hist_mat" reference="ur_hist_mat" refcol="kod_hist_mat" key="0">
          <listquery>
            <query name="ur_hist_mat_dec_list_for_graf">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_sogl" type="number" mandatory="is_dop" exists="is_dop" as="kod_sogl" reference="ur_sogl" refcol="kod_sogl" key="0">
          <listquery>
            <query name="ur_sogl_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_isp" type="number" mandatory="is_isp" exists="is_isp" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <listquery>
            <query name="ur_isp_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="status" type="number" title="" as="status" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_tipdoc" type="number" new-val="kod_tipdoc_new_val" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0" />
        <column table="a" column="kod_graf_status" type="number" comment="Статус графика" as="kod_graf_status" reference="us_graf_status" refcol="kod_graf_status" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата окончания действия графика" mandatory="dat_finish_val" as="dat_finish" key="0" />
        <column table="a" column="dat_opl_beg" type="date" title="Начало учета фактической оплаты" as="dat_opl_beg" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="4000" as="prim" key="0" />
        <column table="a" column="proc_opl_potr" type="number" format="F2" title="Требуемый объем оплаты тек. потр %" as="proc_opl_potr" key="0" />
        <column table="kod_tipdoc" column="ur_prizn" column-editable="1" title="Тип документа" column-mandatory="1" as="ur_prizn" key="0" />
        <call as="doc_type_name" function="case" type="string" title="Тип документа" key="0">
          <call function="when">
            <call function="is not null">
              <column table="a" column="kod_isp" />
            </call>
            <const>'Исполнительный лист'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="a" column="kod_hist_mat" />
            </call>
            <const>'Мировое соглашение (судебное)'</const>
          </call>
          <call function="else">
            <column table="kod_tipdoc" column="name" />
          </call>
        </call>
        <call function="||" as="doc_name" title="Документ" is-name="1" vid="1" key="0">
          <column table="kod_sogl" column="full_name" />
          <column table="kod_isp" column="full_name" />
          <column table="kod_hist_mat2" column="name" />
        </call>
        <call function="coalesce" as="doc_date" type="date" title="Дата документа" key="0">
          <column table="kod_sogl" column="dat_doc" />
          <column table="kod_hist_mat2" column="dat_post" />
          <column table="kod_isp" column="dat_doc" />
        </call>
        <call function="coalesce" as="dat_do" type="date" key="0">
          <column table="kod_sogl" column="dat_do" />
          <column table="kod_isp" column="dat_srok" />
        </call>
        <call function="date to ym" as="ym_do" key="0">
          <column table="this" column="dat_do" />
        </call>
        <column table="kod_folders" column="is_active" as="is_active" key="0" />
        <call function="nvl" as="kod_mat_doc" key="0">
          <column table="kod_mat" column="kod_mat" />
          <column table="kod_mat2" column="kod_mat" />
        </call>
        <call function="nvl" as="dat_opl_beg_nvl" key="0">
          <column table="this" column="dat_opl_beg" />
          <column table="this" column="doc_date" />
        </call>
        <column table="qube_ur_graf" column="ym_min" as="ym_min" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_max" as="ym_max" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_p_min" as="ym_p_min" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_p_max" as="ym_p_max" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="sum_graf" as="sum_graf" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="dolg_doc" as="dolg_doc" key="0" is-fact-use="1" />
        <call as="is_isp" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="is_mat" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="is_dop" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>1</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="kod_tipdoc_new_val" function="if" type="number" key="0">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <const>1</const>
          </call>
          <column table="kod_sogl" column="kod_tipdoc" />
          <column table="ur_prizn" column="kod_tipdoc" />
        </call>
        <call as="dat_finish_val" function="if" type="number" key="0">
          <call function="gt">
            <column table="a" column="kod_graf_status" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
    </query>
    <query name="qube_sf_graf" timestamp="15.07.2021 02:29:40" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml" haskeys="1">
      <select>
        <column table="kod_dogplat" column="kod_dogplat" group="1" key="1" as="kod_dogplat" />
        <column table="kod_graf" column="kod_graf" group="1" as="kod_graf" />
        <column table="kod_sf" column="kod_sf" group="1" as="kod_sf" reference="sr_facvip" refcol="kod_sf" />
        <column table="kod_graf" column="doc_date" group="1" as="doc_date" />
        <column table="kod_graf" column="dat_finish" group="1" as="dat_finish" />
        <column table="kod_graf" column="dat_opl_beg_nvl" group="1" as="dat_opl_beg_nvl" />
      </select>
      <from>
        <qube>
          <link name="kod_graf" all-rows="1" />
          <link name="kod_dogplat" />
          <link name="kod_sf">
            <link name="kod_dog" />
          </link>
        </qube>
        <query join="left outer" name="sr_facvip" as="kod_sf" dname="qube_sf_graf">
          <call function="=">
            <column table="this" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="kod_dogplat" column="kod_dogplat" group="1" />
        </call>
        <call function="is not null">
          <column table="kod_sf" column="kod_sf" group="1" />
        </call>
      </where>
    </query>
    <query name="qube_ur_graf" timestamp="08.05.2018 17:59:32" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml">
      <expressions>
        <call function="lt" as="is_do" dontpushpred="1">
          <column table="dat" column="val" />
          <column table="kod_graf" column="dat_opl_beg_nvl" />
        </call>
        <call function="()" type="number" as="dolg_doc" group="sum">
          <fact column="fin_ul_ob" condition="is_do" />
        </call>
      </expressions>
      <select>
        <column table="kod_graf" column="kod_graf" as="kod_graf" />
        <fact column="ur_graf_opl_ym_min" as="ym_min" is-fact-use="1" />
        <fact column="ur_graf_opl_ym_max" as="ym_max" is-fact-use="1" />
        <fact column="ur_dogplat_ym_min" as="ym_p_min" is-fact-use="1" />
        <fact column="ur_dogplat_ym_max" as="ym_p_max" is-fact-use="1" />
        <fact column="ur_graf_opl_sum" as="sum_graf" is-fact-use="1" />
        <fact column="dolg_doc" as="dolg_doc" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kod_graf" all-rows="1" />
          <link name="kod_dep" />
          <where>
            <call function="is not null">
              <column table="kod_graf" column="kod_graf" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_graf_in" class="1" use-repository="1" materialize="1" timestamp="29.06.2023 14:34:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml">
      <select>
        <column table="kod_graf" column="kod_graf" is-private-dimension="kod_graf" is-final-dimension="kod_graf" dimension="kod_graf" as="kod_graf" />
        <column table="kod_sf" column="kod_sf" is-private-dimension="kod_sf" is-final-dimension="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_dep" column="kodp" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="kod_dep" />
        <column table="kod_group_cust" column="kod_group_cust" is-private-dimension="kod_group_cust" is-final-dimension="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" />
        <column table="kod_group_cust_parent" column="kod_group_cust" is-private-dimension="kod_group_cust_parent" is-final-dimension="kod_group_cust_parent" dimension="kod_group_cust_parent" as="kod_group_cust_parent" />
        <column table="kod_sf" column="vid_real" is-private-dimension="vid_real" is-final-dimension="vid_real" dimension="vid_real" as="vid_real" />
        <column table="kod_dog" column="kodp" is-private-dimension="kodp" is-final-dimension="kodp" dimension="kodp" as="kodp" />
        <column table="kod_dog" column="kod_dog" is-private-dimension="kod_dog" is-final-dimension="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="ym_vozn" column="val" as="ym_vozn" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" />
        <column table="dat_vozn_norm" column="val" as="dat_vozn_norm" is-private-dimension="dat_vozn_norm" is-final-dimension="dat_vozn_norm" dimension="dat_vozn_norm" />
        <fact column="fin_ul_ob_os_av_norm" as="ob" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_in_ob" />
        <fact column="fin_ul_ob_os_av_norm_v2" as="ob_v2" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_in_ob_v2" />
        <call function="latest" as="dat" is-private-dimension="dat" is-final-dimension="dat" dimension="dat">
          <column table="dat" column="val" />
          <column table="kod_graf" column="doc_date" />
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_graf" />
          <link name="kod_sf" />
          <link name="kodp" />
          <link name="kod_dog">
            <link name="kod_dog_fin" />
          </link>
          <link name="kod_dep" />
          <link name="kod_group_cust" />
          <link name="kod_group_cust_parent" />
          <link name="ym_vozn" />
          <link name="dat_vozn_norm" />
          <link name="dat" />
          <link name="ym" />
          <where>
            <call function="is not null">
              <column table="kod_graf" column="kod_graf" />
            </call>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <call function="le">
              <column table="dat" column="val" />
              <call function="nvl">
                <column table="kod_graf" column="dat_finish" />
                <call function="doomsday" />
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_graf_out" class="1" use-repository="1" materialize="1" timestamp="29.06.2023 14:36:14" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml">
      <select>
        <column table="kod_graf" column="kod_graf" as="kod_graf" />
        <column table="kod_sf" column="kod_sf" is-private-dimension="kod_sf" is-final-dimension="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_dep" column="kodp" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="kod_dep" />
        <column table="kod_group_cust" column="kod_group_cust" is-private-dimension="kod_group_cust" is-final-dimension="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" />
        <column table="kod_group_cust_parent" column="kod_group_cust" is-private-dimension="kod_group_cust_parent" is-final-dimension="kod_group_cust_parent" dimension="kod_group_cust_parent" as="kod_group_cust_parent" />
        <column table="kod_dog" column="kod_dog" is-private-dimension="kod_dog" is-final-dimension="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="kod_dog" column="kodp" is-private-dimension="kodp" is-final-dimension="kodp" dimension="kodp" as="kodp" />
        <column table="kod_sf" column="vid_real" is-private-dimension="vid_real" is-final-dimension="vid_real" dimension="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" />
        <column table="dat_vozn_norm" column="val" as="dat_vozn_norm" is-private-dimension="dat_vozn_norm" is-final-dimension="dat_vozn_norm" dimension="dat_vozn_norm" />
        <fact column="fin_ul_ob_os_av_norm" as="ob" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_out_ob" />
        <fact column="fin_ul_ob_os_av_norm_v2" as="ob_v2" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_out_ob_v2" />
        <column table="kod_graf" column="dat_finish" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_finish" />
      </select>
      <from>
        <qube>
          <link name="kod_graf" />
          <link name="kod_sf" />
          <link name="kodp" />
          <link name="kod_dog">
            <link name="kod_dog_fin" />
          </link>
          <link name="kod_dep" />
          <link name="kod_group_cust" />
          <link name="kod_group_cust_parent" />
          <link name="ym_vozn" />
          <link name="dat_vozn_norm" />
          <link name="dat" />
          <link name="ym" />
          <where>
            <call function="is not null">
              <column table="kod_graf" column="kod_graf" />
            </call>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <call function="is not null">
              <column table="kod_graf" column="dat_finish" />
            </call>
            <call function="le">
              <column table="dat" column="val" />
              <column table="kod_graf" column="dat_finish" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_graf_in_rm" timestamp="09.03.2021 15:26:51" class="1" use-repository="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml">
      <select>
        <column table="kod_graf" column="kod_graf" is-private-dimension="kod_graf" is-final-dimension="kod_graf" dimension="kod_graf" as="kod_graf" />
        <column table="kod_sf" column="kod_sf" is-private-dimension="kod_sf" is-final-dimension="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_dep" column="kodp" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="kod_dep" />
        <column table="kod_group_cust" column="kod_group_cust" is-private-dimension="kod_group_cust" is-final-dimension="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" />
        <column table="kod_group_cust_parent" column="kod_group_cust" is-private-dimension="kod_group_cust_parent" is-final-dimension="kod_group_cust_parent" dimension="kod_group_cust_parent" as="kod_group_cust_parent" />
        <column table="kod_sf" column="vid_real" is-private-dimension="vid_real" is-final-dimension="vid_real" dimension="vid_real" as="vid_real" />
        <column table="kod_dog" column="kodp" is-private-dimension="kodp" is-final-dimension="kodp" dimension="kodp" as="kodp" />
        <column table="kod_dog" column="kod_dog" is-private-dimension="kod_dog" is-final-dimension="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="ym_vozn" column="val" as="ym_vozn" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" />
        <column table="dat_vozn_norm" column="val" as="dat_vozn_norm" is-private-dimension="dat_vozn_norm" is-final-dimension="dat_vozn_norm" dimension="dat_vozn_norm" />
        <fact column="fin_ul_ob_os_av_norm_rm" as="ob" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_in_rm_ob" />
        <call function="latest" as="dat" is-private-dimension="dat" is-final-dimension="dat" dimension="dat">
          <column table="dat" column="val" />
          <column table="kod_graf" column="doc_date" />
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_graf" />
          <link name="kod_sf" />
          <link name="kodp" />
          <link name="kod_dog">
            <link name="kod_dog_fin" />
          </link>
          <link name="kod_dep" />
          <link name="kod_group_cust" />
          <link name="kod_group_cust_parent" />
          <link name="ym_vozn" />
          <link name="dat_vozn_norm" />
          <link name="dat" />
          <link name="ym" />
          <where>
            <call function="is not null">
              <column table="kod_graf" column="kod_graf" />
            </call>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>2</const>
                <const>3</const>
              </call>
            </call>
            <call function="le">
              <column table="dat" column="val" />
              <call function="nvl">
                <column table="kod_graf" column="dat_finish" />
                <call function="doomsday" />
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_graf_out_rm" timestamp="09.03.2021 15:28:19" class="1" use-repository="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_graf.xml">
      <select>
        <column table="kod_graf" column="kod_graf" as="kod_graf" />
        <column table="kod_sf" column="kod_sf" is-private-dimension="kod_sf" is-final-dimension="kod_sf" dimension="kod_sf" as="kod_sf" />
        <column table="kod_dep" column="kodp" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="kod_dep" />
        <column table="kod_group_cust" column="kod_group_cust" is-private-dimension="kod_group_cust" is-final-dimension="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" />
        <column table="kod_group_cust_parent" column="kod_group_cust" is-private-dimension="kod_group_cust_parent" is-final-dimension="kod_group_cust_parent" dimension="kod_group_cust_parent" as="kod_group_cust_parent" />
        <column table="kod_dog" column="kod_dog" is-private-dimension="kod_dog" is-final-dimension="kod_dog" dimension="kod_dog" as="kod_dog" />
        <column table="kod_dog" column="kodp" is-private-dimension="kodp" is-final-dimension="kodp" dimension="kodp" as="kodp" />
        <column table="kod_sf" column="vid_real" is-private-dimension="vid_real" is-final-dimension="vid_real" dimension="vid_real" as="vid_real" />
        <column table="ym_vozn" column="val" as="ym_vozn" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" />
        <column table="dat_vozn_norm" column="val" as="dat_vozn_norm" is-private-dimension="dat_vozn_norm" is-final-dimension="dat_vozn_norm" dimension="dat_vozn_norm" />
        <fact column="fin_ul_ob_os_av_norm_rm" as="ob" is-fact="1" agg="sum" is-fact-use="1" fact="qube_graf_out_rm_ob" />
        <column table="kod_graf" column="dat_finish" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_finish" />
      </select>
      <from>
        <qube>
          <link name="kod_graf" />
          <link name="kod_sf" />
          <link name="kodp" />
          <link name="kod_dog">
            <link name="kod_dog_fin" />
          </link>
          <link name="kod_dep" />
          <link name="kod_group_cust" />
          <link name="kod_group_cust_parent" />
          <link name="ym_vozn" />
          <link name="dat_vozn_norm" />
          <link name="dat" />
          <link name="ym" />
          <where>
            <call function="is not null">
              <column table="kod_graf" column="kod_graf" />
            </call>
            <call function="in">
              <column table="kod_sf" column="vid_real" />
              <call function="array">
                <const>2</const>
                <const>3</const>
              </call>
            </call>
            <call function="is not null">
              <column table="kod_graf" column="dat_finish" />
            </call>
            <call function="le">
              <column table="dat" column="val" />
              <column table="kod_graf" column="dat_finish" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_hist_mat_decision" class="1" timestamp="27.09.2017 01:31:02" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat" type="number" as="kod_mat" key="0" />
        <column table="a" column="kod_hist_mat" type="number" as="kod_hist_mat" key="1" fixed="1" />
        <call function="over" as="kod_hist_mat_last_decision" key="0">
          <call function="first_value">
            <column table="a" column="kod_hist_mat" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_mat" />
          </call>
          <!--Бельченко 27.10.14: переделать , колонка "dat_rassm desc nulls last" - не корректно, не понятно как работает-->
          <call function="order by rows * *">
            <column table="kod_result" column="decision" />
            <call function="desc nulls last">
              <column table="a" column="dat_post" />
            </call>
            <call function="desc nulls last">
              <column table="a" column="dat_rassm" />
            </call>
            <call function="desc nulls last">
              <column table="a" column="d_m" />
            </call>
          </call>
        </call>
        <column table="a" column="dat_post" type="number" as="dat_post" key="0" />
      </select>
      <from>
        <query name="ur_hist_mat" as="a" title="История рассмотрения" />
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_hist_mat_decision" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" dname="ur_hist_mat_decision">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_result" column="decision" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="prizn_has_isp_hist" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_has_isp_hist" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_has_isp_hist" type="string" title="Наличие исполнительного листа" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_has_isp_hist_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="prizn_has_astrent_hist" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_has_astrent_hist" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_has_astrent_hist" type="string" title="Взыскан астрент" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_has_astrent_hist_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="ur_hist_mat_dec" inherit="ur_hist_mat" class="1" title="Решение по делу" timestamp="17.09.2023 16:21:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" agg="sum" is-fact="1" fact="ur_hist_mat_dec_gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" agg="sum" is-fact="1" fact="ur_hist_mat_dec_gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" fact="ur_hist_mat_dec_sud_izd" agg="sum" key="0" />
        <column table="a" column="astrent" type="number" comment="факты для работы в режиме ручного ввода" title="Астрент (ручной ввод)" exists="decision" as="astrent" agg="sum" is-fact="1" fact="ur_hist_mat_astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="факты для работы в режиме ручного ввода" as="opl_peni" is-fact="1" agg="sum" fact="ur_hist_mat_opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="факты для работы в режиме ручного ввода" exists="decision" as="opl_astrent" is-fact="1" agg="sum" fact="ur_hist_mat_opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="факты для работы в режиме ручного ввода" as="opl_osnreal" is-fact="1" agg="sum" fact="ur_hist_mat_opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="факты для работы в режиме ручного ввода" title="Оплачено ГП" as="opl_gpotv" is-fact="1" agg="sum" fact="ur_hist_mat_opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" fact="ur_hist_mat_dec_ogr" agg="sum" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="факты для работы в режиме ручного ввода" as="osnreal" is-fact="1" agg="sum" fact="ur_hist_mat_osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" agg="sum" is-fact="1" fact="ur_hist_mat_dec_peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" agg="sum" is-fact="1" fact="ur_hist_mat_dec_gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" fact="ur_hist_mat_dec_opl_ogr" agg="sum" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" fact="ur_hist_mat_dec_opl_sud_izd" agg="sum" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_osnreal" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_peni" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_gp_otv" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_ogr" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_sud_izd" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" is-fact="1" agg="sum" fact="ur_hist_mat_ostatok_astrent" comment="факты для работы в режиме ручного ввода" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <const type="number" as="cnt" fact="ur_hist_mat_count" agg="sum" key="0">1</const>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." fact="ur_hist_mat_dec_ost_ogr" agg="sum" key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." fact="ur_hist_mat_dec_ost_sud_izd" agg="sum" key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_hist_mat" as="kod_hist_mat_desc" key-dimension="kod_hist_mat_dec" key="0" />
        <column table="a" column="dat_post" as="dat_resh" agg="max" title="Дата принятия решения" dimension="dat" is-final-dimension="1" is-private-dimension="1" is-fact="1" fact="ur_hist_mat_dec_dat_resh" key="0" />
        <column table="this" column="dat_post" as="dat_entry_st" dimension="dat_ur" comment="раньше была dat_entry" is-fact="1" fact="ur_hist_mat_dat_entry_st" key="0" />
        <column table="this" column="dat_entry" as="dat_entry_dec" fact="ur_hist_mat_dec_dat_entry" agg="max" dimension="dat_ur_ent" key="0" />
        <column table="this" column="dat_send_il" as="dat_send_il_dec" fact="ur_hist_mat_dec_dat_send_il" agg="max" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_2" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_entry" />
          </call>
          <const>2</const>
        </call>
        <column table="this" column="info" as="dec_info" fact="ur_h_m_dec_info" agg="max" key="0" />
        <call function="+nvl" as="hand_sum" fact="ur_hist_mat_dec_hand_sum" agg="sum" key="0">
          <column table="this" column="ogr" />
          <column table="this" column="sud_izd" />
        </call>
        <call function="+nvl" as="hand_opl" fact="ur_hist_mat_dec_hand_opl" agg="sum" key="0">
          <column table="this" column="opl_ogr" />
          <column table="this" column="opl_sud_izd" />
        </call>
        <call function="+nvl" as="hand_ost" fact="ur_hist_mat_dec_hand_ost" agg="sum" key="0">
          <column table="this" column="ost_ogr" />
          <column table="this" column="ost_sud_izd" />
        </call>
        <column table="this" column="resh" as="pr_resh" is-fact="1" agg="max" fact="ur_hist_mat_dec_pr_resh" key="0" />
        <call function="()" as="pr_spis_tt" type="number" is-private-dimension="pr_spis_tt" is-final-dimension="pr_spis_tt" dimension="pr_spis_tt" key="0">
          <const>0</const>
        </call>
        <column table="kod_result" column="kod_not_edit" as="kod_not_edit" key="0" />
        <column table="this" column="gp_otv" as="gp_otv_dubl" agg="sum" is-fact="1" fact="ur_hist_mat_gp_otv" comment="факты для работы в режиме ручного ввода" key="0" />
        <column table="this" column="sud_izd" as="sud_izd_dubl" is-fact="1" agg="sum" fact="ur_hist_mat_sud_izd" comment="факты для работы в режиме ручного ввода" key="0" />
        <column table="this" column="ogr" as="ogr_dubl" agg="sum" is-fact="1" fact="ur_hist_mat_ogr" comment="факты для работы в режиме ручного ввода" key="0" />
        <column table="this" column="peni" as="peni_dubl" is-fact="1" agg="sum" fact="ur_hist_mat_peni" comment="факты для работы в режиме ручного ввода" key="0" />
        <column table="this" column="opl_ogr" as="opl_ogr_dubl" is-fact="1" agg="sum" fact="ur_hist_mat_opl_ogr" comment="факты для работы в режиме ручного ввода" key="0" />
        <column table="this" column="opl_sud_izd" as="opl_sud_izd_dubl" is-fact="1" agg="sum" fact="ur_hist_mat_opl_sud_izd" comment="факты для работы в режиме ручного ввода" key="0" />
      </select>
      <where>
        <call function="=">
          <column table="kod_result" column="decision" />
          <const>1</const>
        </call>
      </where>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat_dec" parent="ur_hist_mat_dec" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat_dec" parent="ur_hist_mat_dec" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
          <dlink name="ur_isp" dimension="1" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat_dec" parent="ur_hist_mat_dec" back="ur_isp" title="Исполнительный лист">
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <link name="kod_mat_pp" as="kod_mat_pp1" table="ur_mat_pp" child="ur_hist_mat_dec" field="kod_mat_pp" parent="ur_mat_pp" back="ur_hist_mat_dec" title="Иск">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dimlink>
            <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_hist_mat" as="kod_hist_mat1" table="ur_hist_mat" child="ur_hist_mat_dec" field="kod_hist_mat" parent="ur_hist_mat" back="ur_hist_mat_dec" title="История рассмотрения">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat_dec" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat_dec" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat_dec">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat_dec" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat_dec">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat_dec" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat_dec" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat_dec" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat_dec" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_hist_mat_dec" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat_dec" join="left outer" dname="ur_hist_mat_dec" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_dec" column="kod_mat" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dimension="1" dname="ur_hist_mat_dec" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dimension="kod_mat" dname="ur_hist_mat_dec" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="ur_isp" dimension="1">
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </dlink>
        <link name="kod_mat_pp" as="kod_mat_pp1">
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
            <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
          <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
        <link name="kod_hist_mat" as="kod_hist_mat1">
          <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="ur_hist_mat_ba" inherit="ur_hist_mat" class="1" timestamp="09.03.2025 11:51:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" fact="ur_hist_mat_ba_prim" agg="stragg" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" key="0" />
        <column table="a" column="astrent" type="number" comment="судебные издержки" title="Астрент (ручной ввод)" exists="decision" as="astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="Оплачено пени до выдачи исп листа (ручной ввод)" as="opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="Оплачено астрент до выдачи исп листа (ручной ввод)" exists="decision" as="opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="Оплачено осн реал до выдачи исп листа (ручной ввод)" as="opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="оплата гп отв - руками" title="Оплачено ГП" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="основная реализация" as="osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." is-fact="1" agg="sum" fact="ur_hist_mat_ba_ost_ogr" key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_hist_mat" as="kod_hist_mat_ba" key-dimension="kod_hist_mat_ba" key="0" />
        <column table="this" column="dat_mor" as="dat_mor_st" dimension="dat_ur" key="0" />
        <column table="this" column="dat_mor" as="dat_mor_st_ent" dimension="dat_ur_ent" key="0" />
        <column table="this" column="osnreal" as="osnreal_ba" is-fact="1" agg="sum" fact="ur_hist_mat_ba_osnreal_ba" key="0" />
        <column table="this" column="ogr" as="ogr_ba" is-fact="1" agg="max" fact="ur_hist_mat_ba_ogr_ba" key="0" />
        <column table="this" column="peni" as="peni_ba" title="Пени" is-fact="1" agg="sum" fact="ur_hist_mat_ba_peni_ba" key="0" />
        <column table="this" column="gosposhlina" as="gosposhlina_ba" is-fact="1" agg="max" fact="ur_hist_mat_ba_gp_ba" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_6" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_mor" />
          </call>
          <const>6</const>
        </call>
        <const type="number" as="cnt" fact="ur_hist_mat_ba_count" agg="sum" key="0">1</const>
        <call function="if" as="is_in_reestr" is-fact="1" agg="max" type="number" fact="ur_hist_mat_ba_is_in_reestr" key="0">
          <call function="=">
            <column table="this" column="kod_result" />
            <const>61</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="kod_mat_ba" column="kod_folders" dimension="kod_folders" as="kod_folders" key="0" />
        <column table="this" column="opl_osnreal" title="Осн. реал." editable="1" as="opl_osnreal_ba" is-fact="1" agg="sum" fact="ur_hist_mat_ba_opl_osnreal_ba" key="0" />
        <column table="this" column="opl_peni" title="Проценты (пени)" editable="1" as="opl_peni_ba" is-fact="1" agg="sum" fact="ur_hist_mat_ba_opl_peni_ba" key="0" />
        <column table="this" column="opl_gpotv" title="ГП" editable="1" as="opl_gpotv_ba" is-fact="1" agg="sum" fact="ur_hist_mat_ba_opl_gpotv_ba" key="0" />
        <column table="this" column="opl_ogr" title="Расх. за введ. огр. реж. энергопотр." editable="1" as="opl_ogr_ba" is-fact="1" agg="sum" fact="ur_hist_mat_ba_opl_ogr_ba" key="0" />
      </select>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat_ba" field="kod_mat" parent="ur_mat" back="ur_hist_mat_ba" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
          <link name="kod_mat_ba" as="kod_mat_ba1" table="ur_mat_ba" child="ur_hist_mat_ba" field="kod_mat_ba" parent="ur_mat_ba" back="ur_hist_mat_ba">
            <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat_ba" field="kod_folders" parent="ur_folders" back="ur_mat_ba" title="Папка" />
            <dimlink name="kod_dogplat_bnk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="ur_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" as="ur_stage_bk" table="ur_stage_bk" child="ur_stage_bk" field="kod_hist_mat" parent="ur_hist_mat_ba" back="ur_stage_bk" />
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat_ba" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat_ba" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat_ba">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat_ba" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat_ba">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat_ba" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat_ba" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat_ba" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat_ba" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_hist_mat_ba" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="ur_mat_ba" as="kod_mat_ba" join="left outer" dimension="kod_mat_ba" dname="ur_hist_mat_ba">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_ba" column="kod_mat_ba" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_folders" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
      <links>
        <link name="kod_mat_ba" as="kod_mat_ba1">
          <link name="kod_folders" />
          <dimlink name="kod_dogplat_bnk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
        <dlink name="ur_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="ur_hist_mat_calc_gp" class="1" timestamp="14.05.2017 22:54:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <params>
        <param type="number" name="kod_hist_mat">
          <const>984</const>
        </param>
      </params>
      <select>
        <call function="ur_read_bd.f_gp_doc" as="gp_otv">
          <const>1</const>
          <fact column="ur_dp_priz_all" />
        </call>
        <!--<call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами">
          <column table="a" column="proc" nvl="0"></column>
          <column table="a" column="opl_proc" nvl="0"></column>
        </call>-->
        <!--<call function="-" as="ost_ogr" title="Остаток задолженности: расходы за ограничение энергопотребления" nvl="0">
          <column table="a" column="ogr" nvl="0"></column>
          <column table="a" column="opl_ogr" nvl="0"></column>
        </call>-->
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <qube>
          <link name="kod_hist_mat" as="a" />
          <where>
            <call function="=">
              <column table="a" column="kod_hist_mat" />
              <useparam name="kod_hist_mat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_hist_mat_dec_list_for_il" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <params>
        <param name="kod_folders" type="number" />
      </params>
      <select>
        <column table="a" column="kod_hist_mat" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ur_hist_mat_dec" as="a" title="Решение по делу">
          <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Материалы переданные в суд" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="kod_mat" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_hist_mat_dec_list_for_graf" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <params>
        <param name="kod_folders" type="number" />
      </params>
      <select>
        <column table="a" column="kod_hist_mat" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ur_hist_mat_dec" as="a" title="Решение по делу">
          <link name="kod_result" as="kod_result" table="us_result" child="ur_hist_mat_dec" field="kod_result" parent="us_result" back="ur_hist_mat_dec" />
          <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Материалы переданные в суд" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="kod_mat" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
          <call function="=">
            <column table="kod_result" column="kod_not_edit" />
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ur_hist_mat_calc_gp_otv" comment="Расчёт gp_otv" class="1" timestamp="31.05.2016 00:18:42" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <params>
        <param type="number" name="kod_hist_mat" />
      </params>
      <select>
        <call function="-" as="gp_otv" title="Гос. пошлина с ответчика">
          <call function="nvl0">
            <column table="kod_mat" column="sum_gp" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_es" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_hist_mat" as="a" all-rows="1" />
          <link name="kod_mat" all-rows="1" />
          <where>
            <call function="=">
              <column table="a" column="kod_hist_mat" />
              <useparam name="kod_hist_mat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_hist_mat_calc_gp_es" comment="Расчёт gp_es" class="1" timestamp="31.05.2016 00:18:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <params>
        <param type="number" name="kod_hist_mat" />
      </params>
      <select>
        <call function="-" as="gp_es" title="Гос. пошлина с исца">
          <call function="nvl0">
            <column table="kod_mat" column="sum_gp" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_otv" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_hist_mat" as="a" all-rows="1" />
          <link name="kod_mat" all-rows="1" />
          <where>
            <call function="=">
              <column table="a" column="kod_hist_mat" />
              <useparam name="kod_hist_mat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_hist_mat_calc_gp_ret" comment="Расчёт gp_ret" class="1" timestamp="31.05.2016 00:18:30" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <params>
        <param type="number" name="kod_hist_mat" />
      </params>
      <select>
        <call function="-" as="gp_ret" title="Возврат из бюджета">
          <call function="nvl0">
            <column table="kod_mat" column="sum_gp" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_otv" />
          </call>
          <call function="nvl0">
            <column table="a" column="gp_es" />
          </call>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_hist_mat" as="a" all-rows="1" />
          <link name="kod_mat" all-rows="1" />
          <where>
            <call function="=">
              <column table="a" column="kod_hist_mat" />
              <useparam name="kod_hist_mat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_hist_mat_dec_othr" inherit="ur_hist_mat" class="1" timestamp="06.07.2016 20:38:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" key="0" />
        <column table="a" column="astrent" type="number" comment="судебные издержки" title="Астрент (ручной ввод)" exists="decision" as="astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="Оплачено пени до выдачи исп листа (ручной ввод)" as="opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="Оплачено астрент до выдачи исп листа (ручной ввод)" exists="decision" as="opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="Оплачено осн реал до выдачи исп листа (ручной ввод)" as="opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="оплата гп отв - руками" title="Оплачено ГП" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="основная реализация" as="osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const type="number" as="cnt" fact="ur_hist_mat_dec_othr_cnt" agg="sum" key="0">1</const>
      </select>
      <where>
        <call function="=">
          <column table="kod_result" column="decision" />
          <const>1</const>
        </call>
      </where>
      <links>
        <link name="kod_mat" dimension="1">
          <dlink name="ur_hist_mat" dimension="1" />
        </link>
      </links>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat_dec_othr" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec_othr" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
          <link name="kod_mat" dimension="1" as="kod_mat" table="ur_mat" child="ur_hist_mat_dec_othr" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec_othr" title="Материалы переданные в суд">
            <dlink name="ur_hist_mat" dimension="1" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения" />
          </link>
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat_dec_othr" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat_dec_othr" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat_dec_othr">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat_dec_othr" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat_dec_othr">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat_dec_othr" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat_dec_othr" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat_dec_othr" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat_dec_othr" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_hist_mat_isp" inherit="ur_hist_mat" class="1" timestamp="24.06.2020 23:01:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" key="0" />
        <column table="a" column="astrent" type="number" comment="судебные издержки" title="Астрент (ручной ввод)" exists="decision" as="astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="Оплачено пени до выдачи исп листа (ручной ввод)" as="opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="Оплачено астрент до выдачи исп листа (ручной ввод)" exists="decision" as="opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="Оплачено осн реал до выдачи исп листа (ручной ввод)" as="opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="оплата гп отв - руками" title="Оплачено ГП" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="основная реализация" as="osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const as="cnt" type="number" is-fact="1" agg="sum" fact="ur_hist_mat_isp_cnt" key="0">1</const>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_isp_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
      </select>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat_isp" field="kod_mat" parent="ur_mat" back="ur_hist_mat_isp" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
          <link name="kod_mat_isp" as="kod_mat_isp1" table="ur_mat_isp" child="ur_hist_mat_isp" field="kod_mat_isp" parent="ur_mat_isp" back="ur_hist_mat_isp">
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat_isp" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat_isp" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat_isp">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat_isp" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat_isp">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat_isp" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat_isp" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat_isp" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat_isp" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
        <query name="ur_mat_isp" as="kod_mat_isp" join="left outer" dimension="kod_mat_ba" dname="ur_hist_mat_isp">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_isp" column="kod_mat_isp" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_folders" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
      <links>
        <link name="kod_mat_isp" as="kod_mat_isp1">
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="ur_hist_mat_dec_ba" inherit="ur_hist_mat" class="1" timestamp="29.12.2017 12:05:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" key="0" />
        <column table="a" column="astrent" type="number" comment="судебные издержки" title="Астрент (ручной ввод)" exists="decision" as="astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="Оплачено пени до выдачи исп листа (ручной ввод)" as="opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="Оплачено астрент до выдачи исп листа (ручной ввод)" exists="decision" as="opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="Оплачено осн реал до выдачи исп листа (ручной ввод)" as="opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="оплата гп отв - руками" title="Оплачено ГП" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="основная реализация" as="osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <const type="number" as="cnt" fact="ur_hist_mat_count" agg="sum" key="0">1</const>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_hist_mat" as="kod_hist_mat_desc" key-dimension="kod_hist_mat_dec" key="0" />
        <column table="this" column="dat_post" as="dat_post_ba" key-dimension="kod_hist_mat_dec" dimension="dat_ur" key="0" />
        <column table="this" column="info" as="dec_info" fact="ur_h_m_dec_ba_info" agg="max" key="0" />
      </select>
      <where>
        <call function="=">
          <column table="kod_result" column="decision" />
          <const>1</const>
        </call>
      </where>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat_dec_ba" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec_ba" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
          <link name="kod_mat_ba" as="kod_mat_ba1" table="ur_mat_ba" child="ur_hist_mat_dec_ba" field="kod_mat_ba" parent="ur_mat_ba" back="ur_hist_mat_dec_ba">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat_dec_ba" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat_dec_ba" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat_dec_ba">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat_dec_ba" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat_dec_ba">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat_dec_ba" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat_dec_ba" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat_dec_ba" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat_dec_ba" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dimension="1" dname="ur_hist_mat_dec_ba" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="ur_mat_ba" as="kod_mat_ba" join="left outer" dimension="kod_mat" dname="ur_hist_mat_dec_ba">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_ba" column="kod_mat" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_mat_ba" as="kod_mat_ba1">
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
    </query>
    <query name="ur_hist_mat_ba_list" class="1" timestamp="03.09.2018 03:05:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml" haskeys="1">
      <params>
        <param name="kod_flders" type="number" />
      </params>
      <select>
        <column table="a" column="kod_hist_mat" as="kod_hist_mat" key="1" fixed="1" />
        <column table="kod_doc" column="name" as="doc_name" key="0" />
        <column table="kod_mat" column="num_delo" as="num_delo" key="0" />
        <column table="a" column="dat_post" as="dat_post" key="0" />
        <column table="kod_result" column="name" as="result_name" key="0" />
        <column table="kod_stage" column="name" as="stage_name" key="0" />
      </select>
      <from>
        <query name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
          </link>
          <link name="kod_result" as="kod_result" table="us_result" child="ur_hist_mat" field="kod_result" parent="us_result" back="ur_hist_mat" />
          <link name="kod_stage" as="kod_stage" table="uk_stage" child="ur_hist_mat" field="kod_stage" parent="uk_stage" back="ur_hist_mat" title="Стадия процедуры банкротства" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="kod_mat" column="kod_folders" />
            <useparam name="kod_flders" />
          </call>
          <call function="=1">
            <column table="kod_result" column="decision" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_inkasso_upd_num_reg" class="1" timestamp="23.06.2016 03:08:25" update-target="ur_inkasso" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_inkasso.xml" haskeys="1">
      <params>
        <param type="number" name="kod" />
      </params>
      <select>
        <column table="a" column="kod_inkasso" as="kod_inkasso" key="1" fixed="1" />
        <call function="ur_save.f_num_reg_s" as="num_reg" key="0">
          <const>11</const>
        </call>
        <!--<call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами">
          <column table="a" column="proc" nvl="0"></column>
          <column table="a" column="opl_proc" nvl="0"></column>
        </call>-->
        <!--<call function="-" as="ost_ogr" title="Остаток задолженности: расходы за ограничение энергопотребления" nvl="0">
          <column table="a" column="ogr" nvl="0"></column>
          <column table="a" column="opl_ogr" nvl="0"></column>
        </call>-->
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <query name="ur_inkasso" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_inkasso" />
            <useparam name="kod" />
          </call>
          <call function="is null">
            <column table="a" column="num_reg" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_inkasso_kodb_def" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_inkasso.xml" haskeys="1">
      <params>
        <param name="kod_isp" type="number" />
      </params>
      <select>
        <column table="a" column="kodb" type="number" as="kodb" key="1" fixed="1" />
      </select>
      <from>
        <table name="ur_inkasso_kodb_def" as="a" view="1" />
      </from>
    </query>
    <query name="ur_isp_lists_ul" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml">
      <params>
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="ur_isp_lists" as="a">
          <withparams>
            <const>2</const>
            <useparam name="dep" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="ur_isp_lists" order="num_isp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <params>
        <param name="kod_abon_type" type="array" />
        <param name="dep" type="array" />
      </params>
      <select>
        <column table="a" column="kod_isp" as="kod_isp" key="1" fixed="1" />
        <call function="||" as="num_isp" title="Исполнительный лист" key="0">
          <column table="a" column="num_reg" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_hist_mat" column="dat_entry" />
          </call>
        </call>
        <column table="kodp" column="name" as="abon_name" title="Абонент" key="0" />
        <column table="dep" column="name" as="dep_name" title="Отделение" key="0" />
        <column table="kod_mat" column="num_delo" title="Номер дела" as="num_delo" key="0" />
      </select>
      <from>
        <query name="ur_isp" as="a" title="Исполнительный лист">
          <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
            <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
              <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка">
                <link name="kodp" as="kodp" table="kr_payer" child="ur_folders" field="kodp" parent="kr_payer" back="ur_folders" title="Абонент" />
                <link name="kod_podr" as="dep" table="kr_org" child="ur_folders" field="kod_podr" parent="kr_org" back="ur_folders" />
              </link>
            </link>
          </link>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="dep" column="kodp" />
            <useparam name="dep" />
          </call>
          <call function="in" optional="1">
            <column table="kodp" column="kod_abon_type" />
            <useparam name="kod_abon_type" />
          </call>
        </call>
      </where>
      <order>
        <column column="num_isp" />
      </order>
    </query>
    <query name="ur_isp_current" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml">
      <select>
        <column table="a" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="ur_isp_lists_ul" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_isp" />
          <useglobparam name="kod_isp" />
        </call>
      </where>
      <params />
    </query>
    <query name="ur_isp_in_folder" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml">
      <params>
        <param name="kod_folders" type="number" class-type="ur_folders" />
      </params>
      <select>
        <column table="ur_isp" column="*" as="*" key="0" />
      </select>
      <from>
        <query name="ur_isp" as="ur_isp" title="Исполнительный лист" />
      </from>
      <where>
        <call function="=">
          <column table="ur_isp" column="kod_folders" />
          <useparam name="kod_folders" />
        </call>
      </where>
    </query>
    <query name="ur_isp_for_mat" inherit="ur_isp" class="1" timestamp="20.06.2016 20:19:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp" type="number" key-dimension="kod_isp" as="kod_isp" key="1" fixed="1" />
        <column table="a" column="num_reg" type="string" title="Номер исп. листа" column-mandatory="1" as="num_reg" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата выдачи исп. листа" fact="ur_isp_dat_doc" agg="max" dimension="dat_ur" as="dat_doc" key="0" />
        <column table="a" column="gp_es" type="number" title="" as="gp_es" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="gp_otv" type="number" title="" as="gp_otv" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления исп.листа в отделение" comment="дата поступл.исп.листа в отделение" as="dat_post" key="0" />
        <column table="a" column="dat_function" type="date" title="Дата вступления в силу акта" comment="дата начала срока действия исп.листа" column-mandatory="1" as="dat_function" key="0" />
        <column table="a" column="dat_srok" type="date" title="Дата отсрочки исп. листа" comment="срок предоставления отсрочки / рассрочки по исп. листу" as="dat_srok" key="0" />
        <column table="a" column="kod_emp" type="number" comment="юрист" title="Юрист отв. за получ. ИЛ, учет, пердачу принуд. исп." column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_hist_mat" type="number" valid="qube.isp_kod_hist_mat_vld" column-mandatory="1" as="kod_hist_mat" key="0">
          <listquery>
            <query name="ur_hist_mat_dec_list_for_il">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="opl_proc" type="number" title="" comment="оплата процентов - руками" as="opl_proc" key="0" />
        <column table="a" column="opl_gpotv" type="number" title="" comment="оплата гп отв - руками" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="osnr" type="number" title="" comment="основная реализация" as="osnr" key="0" />
        <column table="a" column="peni" type="number" title="" comment="пени" as="peni" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="dat_present" type="date" title="" comment="дата предъявления" as="dat_present" key="0" />
        <column table="a" column="sum_present" type="number" title="" comment="сумма продъявления" as="sum_present" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" comment="примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="kod_isp_type" type="number" comment="тип листа: основной/дополнительный" as="kod_isp_type" reference="ur_isp_type" refcol="kod_isp_type" key="0" />
        <column table="a" column="kod_info_potr" type="number" comment="код ответчика (владивосток)" as="kod_info_potr" reference="tr_info_potr" refcol="kod_info_potr" key="0" />
        <column table="a" column="opl_ogr" type="number" title="" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="work_done" type="string" title="" comment="татэнерго 38754 - проделанная работа" as="work_done" key="0" />
        <column table="a" column="dat_post_upr" type="date" title="Дата поступления исп.листа в управление" comment="дата поступл.исп.листа в управление" as="dat_post_upr" key="0" />
        <column table="a" column="incoming_number" type="string" data-size="20" comment="Вхoдящий номер (ТатЭнергосбыт 64630)" as="incoming_number" key="0" />
        <column table="a" column="number_sz" type="string" data-size="20" comment="Номер служебной записки о направлении ИД в филиал (ТатЭнергосбыт 64630)" as="number_sz" key="0" />
        <column table="a" column="date_sz" type="date" comment="Дата служебной записки о направлении ИД в филиал (ТатЭнергосбыт 64630)" as="date_sz" key="0" />
        <column table="a" column="opl_sud_izd_vvod" type="number" comment="Оплачено судебные издержки по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_sud_izd_vvod" fact="ur_isp_opl_sud_izd_vvod" key="0" />
        <column table="a" column="opl_astrent_vvod" type="number" comment="Оплачено астрент по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_astrent_vvod" fact="ur_isp_opl_astrent_vvod" key="0" />
        <column table="a" column="opl_gp_vvod" type="number" comment="Оплачено ГП по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_gp_vvod" fact="ur_isp_opl_gp_vvod" key="0" />
        <column table="a" column="opl_ogr_vvod" type="number" comment="Оплачено ограничение режима по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_ogr_vvod" fact="ur_isp_opl_ogr_vvod" key="0" />
        <column table="a" column="opl_peni_vvod" type="number" comment="Оплачено пени по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_peni_vvod" fact="ur_isp_opl_peni_vvod" key="0" />
        <column table="a" column="opl_osnreal_vvod" type="number" comment="Оплачено осн реал по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_osnreal_vvod" fact="ur_isp_opl_osnreal_vvod" key="0" />
        <call function="||" as="full_name" title="Исполнительный лист" is-name="1" key="0">
          <column table="this" column="num_reg" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_doc" />
          </call>
        </call>
        <call function="||" as="info" title="Исполнительный лист" fact="ur_isp_info" agg="max" key="0">
          <const>'ИЛ № '</const>
          <column table="this" column="num_reg" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_doc" />
          </call>
        </call>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_folders" column="kod_podr" as="kod_podr" key="0" />
        <column table="this" column="dat_doc" type="date" title="Дата выдачи исп. листа" dimension="dat" as="dat_doc1" key="0" />
        <call function="if" type="string" as="dat_doc_vld" is-fact="1" agg="max" fact="ur_isp_dat_doc_vld" title=" " key="0">
          <call function="and">
            <call function="is not null">
              <column table="kod_hist_mat_dec" column="dat_entry" />
            </call>
            <call function="is null">
              <column table="a" column="dat_doc" />
            </call>
            <call function="gt">
              <call function="sysdate" />
              <call function="date add days">
                <column table="kod_hist_mat_dec" column="dat_entry" />
                <const>14</const>
              </call>
            </call>
          </call>
          <const>'[inf]Не заполнена дата выдачи исп. листа. Прошло более 14-ти дней с момента вступления решения в законную силу'</const>
        </call>
        <column table="kod_isp_q" column="kod_status_opl" as="kod_status_opl" key="0" />
        <column table="kod_isp_q" column="dolg_on_il_hnd" as="dolg_on_il_hnd" key="0" is-fact-use="1" />
        <column table="kod_isp_q" column="ur_opl_posl_il_hnd" as="ur_opl_posl_il_hnd" key="0" is-fact-use="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const type="number" as="cnt" fact="ur_isp_for_mat_count" agg="sum" key="0">1</const>
      </select>
      <links>
        <link name="kod_hist_mat" as="kod_hist_mat1">
          <dlink name="ur_isp" dimension="1" />
        </link>
      </links>
      <from>
        <table name="ur_isp" as="a" title="Исполнительный лист">
          <link name="kod_hist_mat" as="kod_hist_mat1" table="ur_hist_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" title="История рассмотрения">
            <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
              <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
            </link>
          </link>
          <dlink name="ur_folders_isp" dimension="1" as="ur_folders_isp" table="ur_folders_isp" child="ur_folders_isp" field="kod_isp" parent="ur_isp" back="ur_folders_isp" title="Папка исполнительного производства">
            <dimlink name="kod_mat_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <link name="kod_hist_mat_dec" as="kod_hist_mat_dec1" table="ur_hist_mat_dec" child="ur_isp_for_mat" field="kod_hist_mat_dec" parent="ur_hist_mat_dec" back="ur_isp_for_mat" title="Решение по делу">
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_isp_for_mat" field="kod_folders" parent="ur_folders" back="ur_isp_for_mat" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_hist_mat" as="kod_hist_mat1" table="ur_hist_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" title="История рассмотрения">
            <dlink name="ur_isp" dimension="1" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          </link>
        </table>
        <query name="ur_isp_type" as="kod_isp_type" join="left outer" dname="ur_isp_for_mat">
          <call function="=">
            <column table="a" column="kod_isp_type" />
            <column table="kod_isp_type" column="kod_isp_type" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_isp_for_mat">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dimension="kod_hist_mat" dname="ur_isp_for_mat" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="tr_info_potr" as="kod_info_potr" join="left outer" dname="ur_isp_for_mat">
          <call function="=">
            <column table="a" column="kod_info_potr" />
            <column table="kod_info_potr" column="kod_info_potr" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_isp_for_mat" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_isp_for_mat" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_hist_mat_dec" as="kod_hist_mat_dec" join="left outer" dimension="kod_hist_mat" dname="ur_isp_for_mat" title="Решение по делу">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat_dec" column="kod_hist_mat" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_isp_for_mat" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="ur_isp_qube" as="kod_isp_q" join="left outer" dname="ur_isp_for_mat">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp_q" column="kod_isp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp_in_folder_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <params>
        <param type="number" name="kod_folders" />
      </params>
      <select>
        <column table="a" column="kod_isp" as="kod_isp" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
      </select>
      <from>
        <query name="ur_isp" as="a" title="Исполнительный лист" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=">
            <column table="a" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_isp_last" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" as="kod_hist_mat" key="0" />
        <column table="a" column="kod_isp" type="number" as="kod_isp" key="1" fixed="1" />
        <call function="over" as="kod_isp_last" key="0">
          <call function="first_value">
            <column table="a" column="kod_isp" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_hist_mat" />
          </call>
          <call function="order by rows * *">
            <call function="desc nulls last">
              <column table="a" column="dat_doc" />
            </call>
            <call function="desc nulls last">
              <column table="a" column="dat_function" />
            </call>
            <call function="desc">
              <column table="a" column="kod_isp" />
            </call>
          </call>
        </call>
      </select>
      <from>
        <query name="ur_isp" as="a" title="Исполнительный лист" />
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dname="ur_isp_last" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_isp_type" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="prizn_arch_isp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_isp" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_isp" type="string" title="Статус исп. листа" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_isp_view" view="1" as="a" />
      </from>
    </query>
    <query name="prizn_arch_isp_act" inherit="prizn_arch_isp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_isp" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_isp" type="string" title="Статус исп. листа" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_isp_view" view="1" as="a" />
      </from>
    </query>
    <query name="ur_isp_qube" timestamp="11.01.2018 18:54:30" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml">
      <select>
        <column table="kod_isp" column="kod_isp" as="kod_isp" />
        <call function="case" as="kod_status_opl" title="Статус оплаты ИЛ" comment="0 - Неоплаченный, 1 - Частично оплаченный, 2 - Полностью оплаченный" type="number">
          <call function="when">
            <call function="and">
              <call function="gt">
                <column column="dolg_on_il_hnd" table="this" />
                <const>0</const>
              </call>
              <call function="=">
                <column column="ur_opl_posl_il_hnd" table="this" />
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="gt">
                <column column="ur_opl_posl_il_hnd" table="this" />
                <const>0</const>
              </call>
              <call function="lt">
                <column column="ur_opl_posl_il_hnd" table="this" />
                <column column="dolg_on_il_hnd" table="this" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="else">
            <const>2</const>
          </call>
        </call>
        <fact column="dolg_on_il_hnd" nvl="0" as="dolg_on_il_hnd" is-fact-use="1" />
        <fact column="ur_opl_posl_il_hnd" nvl="0" as="ur_opl_posl_il_hnd" is-fact-use="1" />
      </select>
      <from>
        <qube>
          <link name="kod_isp" />
          <where>
            <call function="is not null">
              <column table="kod_isp" column="kod_isp" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_isp_other_prim_calc" comment="Сделано по SD 71135" timestamp="15.08.2024 14:50:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp_other_prim_calc.xml" haskeys="1">
      <customers>
        <customer id="10" />
      </customers>
      <params>
        <param name="p_kod_folders" type="number" />
        <param name="p_kod_isp_other" type="number" />
        <param name="p_dat_beg" type="date" />
        <param name="p_dat_end" type="date" />
      </params>
      <select>
        <call function="rownum" type="number" as="rn" key="1" />
        <column table="iop" column="kod_isp_other_prim" type="number" as="kod_isp_other_prim" />
        <column table="iop" column="kod_isp_other" type="number" as="kod_isp_other" reference="ur_isp_other" refcol="kod_isp_other" />
        <column table="iop" column="prim" type="string" as="prim" />
        <column table="iop" column="date_dept_reduction" type="date" as="date_dept_reduction" />
        <column table="iop" column="amount" type="number" as="amount" />
        <column table="iop" column="reason" type="number" as="reason" reference="ur_isp_other_reason" refcol="id" />
        <column table="iop" column="prim2" type="string" as="prim2" />
        <column table="iop" column="u_m" type="string" as="u_m" />
        <column table="iop" column="d_m" type="date" as="d_m" />
        <column table="iop" column="is_new" type="number" sys="1" as="is_new" />
        <column table="iop" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="TABLE(ug_isp.get_isp_other_prim(:p_kod_folders, :p_kod_isp_other, :p_dat_beg, :p_dat_end))" as="iop" />
        <query name="ur_isp_other_reason" as="reason" join="left outer" dname="ur_isp_other_prim_calc">
          <call function="=">
            <column table="iop" column="reason" />
            <column table="reason" column="id" />
          </call>
        </query>
        <query name="ur_isp_other" as="kod_isp_other" join="left outer" dname="ur_isp_other_prim_calc">
          <call function="=">
            <column table="iop" column="kod_isp_other" />
            <column table="kod_isp_other" column="kod_isp_other" />
          </call>
        </query>
      </from>
      <events>
        <useaction event-name="instead-object-delete" name="ur_isp_other_prim_delete">
          <column table="iop" column="kod_isp_other_prim" />
        </useaction>
        <useaction event-name="instead-object-save" name="ur_isp_other_prim_save">
          <column table="iop" column="kod_isp_other_prim" />
          <column table="iop" name="kod_isp_other" />
          <column table="iop" name="prim" />
          <column table="iop" name="date_dept_reduction" />
          <column table="iop" name="amount" />
          <column table="iop" name="reason" />
          <column table="iop" name="prim2" />
        </useaction>
      </events>
    </query>
    <query name="ur_kazn_upd_num_reg" class="1" timestamp="23.06.2016 18:23:14" update-target="ur_kazn" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_kazn.xml" haskeys="1">
      <params>
        <param type="number" name="kod" />
      </params>
      <select>
        <column table="a" column="kod_kazn" as="kod_kazn" key="1" fixed="1" />
        <call function="ur_save.f_num_reg_s" as="num_reg" key="0">
          <const>12</const>
        </call>
        <!--<call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами">
          <column table="a" column="proc" nvl="0"></column>
          <column table="a" column="opl_proc" nvl="0"></column>
        </call>-->
        <!--<call function="-" as="ost_ogr" title="Остаток задолженности: расходы за ограничение энергопотребления" nvl="0">
          <column table="a" column="ogr" nvl="0"></column>
          <column table="a" column="opl_ogr" nvl="0"></column>
        </call>-->
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <query name="ur_kazn" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <useparam name="kod" />
          </call>
          <call function="is null">
            <column table="a" column="num_reg" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_mat_isp" inherit="ur_mat" class="1" timestamp="24.01.2018 13:47:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat" type="number" key-dimension="kod_mat" fact="ur_mat_kod_mat" agg="max" as="kod_mat" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" reference="us_doc" refcol="kod_doc" key="0">
          <listquery>
            <query name="us_doc_list">
              <withparams>
                <column table="this" column="kod_sdp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_ssp" type="number" as="kod_ssp" reference="us_ssp" refcol="kod_ssp" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер иска" vid="1" as="num_reg" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата отправки документов ответчику" as="dat_otv" key="0" />
        <column table="a" column="kod_ret_isk" type="number" mandatory="dat_otz" as="kod_ret_isk" reference="uk_ret_isk" refcol="kod_ret_isk" key="0" />
        <column table="a" column="dat_prin" type="date" title="Дата принятия документов в суде" mandatory="qube.ur_hist_mat_count" as="dat_prin" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_otz" type="string" title="№ документа возврата" mandatory="dat_otz" as="num_otz" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата возврата" as="dat_otz" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата подачи в суд" mandatory="dat_otz" fact="ur_mat_dat_doc_max" agg="max" as="dat_doc" key="0" />
        <column table="a" column="fio_otz" type="string" title="За чьей подписью возврат" mandatory="dat_otz" as="fio_otz" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="prichina_otz" type="string" title="Основание для возврата" mandatory="dat_otz" as="prichina_otz" key="0" />
        <column table="a" column="sum_gp" type="number" title="Оплачено госпошлины при подаче" is-fact="1" agg="sum" as="sum_gp" fact="ur_mat_sum_gp" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="dat_gp" type="date" title="Дата перечисления ГП" as="dat_gp" key="0" />
        <column table="a" column="kod_sud" type="number" rows-limit="100" as="kod_sud" reference="us_sud" refcol="kod_sud" key="0">
          <listquery>
            <query name="us_sud_list" />
          </listquery>
        </column>
        <column table="a" column="num_pp_gp" type="string" title="№ пл. пор. ГП" comment="№ плат пор по гп" as="num_pp_gp" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительского иска д/аппеляции,кассации,надзор" as="kod_parent" reference="ur_mat" refcol="kod_mat" key="0">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr" type="number" nvl="0" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" is-fact="1" agg="sum" as="ogr" fact="ur_mat_ogr" key="0" />
        <column table="a" column="kod_dispute" type="number" as="kod_dispute" key="0" />
        <column table="a" column="type_claim_template" type="number" as="type_claim_template" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="tep_el" type="number" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_emp" type="number" comment="Исполнитель ПИО" as="kod_emp" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish" type="date" as="dat_finish" key="0" />
        <column table="a" column="prim_mor_dz" type="string" title="Причина исключения/изменения мораторной задолженности" comment="примечание по мораторной задолженности" as="prim_mor_dz" key="0" />
        <column table="a" column="osnreal" type="number" comment="основная реализация" is-fact="1" agg="sum" as="osnreal" fact="ur_mat_osnreal" key="0" />
        <column table="a" column="period_zadol_s_vvod" type="number" comment="Период задолженности с (ручной ввод)" is-fact="1" agg="min" as="period_zadol_s_vvod" fact="ur_mat_period_zadol_s_vvod" key="0" />
        <column table="a" column="period_zadol_po_vvod" type="number" comment="Период задолженности по (ручной ввод)" is-fact="1" agg="max" as="period_zadol_po_vvod" fact="ur_mat_period_zadol_po_vvod" key="0" />
        <column table="a" column="ur_opl_do_resh_vvod" type="number" comment="Оплата до решения суда (ручной ввод)" is-fact="1" agg="sum" as="ur_opl_do_resh_vvod" fact="ur_mat_ur_opl_do_resh_vvod" key="0" />
        <column table="a" column="shtraf" type="number" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" comment="пени" is-fact="1" agg="sum" as="peni" fact="ur_mat_peni" key="0" />
        <column table="a" column="otvetch_info" type="string" comment="информация об ответчиках" as="otvetch_info" key="0" />
        <column table="a" column="link_delo" type="string" comment="ссылка на дело в интернете" title="Гиперссылка" controlType="UILink" as="link_delo" key="0" />
        <column table="a" column="sum_zach_gp" type="number" comment="сумма, зачтенной гп, руб" as="sum_zach_gp" key="0" />
        <column table="a" column="num_zach_doc" type="string" comment="определение суда/решение налогового органа о зачете госпошлины" as="num_zach_doc" key="0" />
        <column table="a" column="dat_zach" type="date" comment="дата документа о зачете" as="dat_zach" key="0" />
        <column table="a" column="sum_ifns_gp" type="number" comment="сумма гп, погашенной  ифнс" as="sum_ifns_gp" key="0" />
        <column table="a" column="num_ifns_doc" type="string" comment="№ извещ.  ифнс" as="num_ifns_doc" key="0" />
        <column table="a" column="dat_ifns" type="date" comment="дата извещ ифнс" as="dat_ifns" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="astrent_exists" type="number" comment="ручной признак наличия процентов за несвоевременную оплату по решению (для журналов)" title="Есть астрент (ручн. признак)" controlType="UICheck" as="astrent_exists" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления документов к иску" comment="дата передачи документов от финансистов - юристам (35926)" as="dat_post" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="type_rassm" title="Порядок рассмотрения" type="number" as="type_rassm" reference="vr_type_rassm" refcol="kod_type_rassm" key="0" />
        <column table="a" column="pio_date" type="date" comment="Дата поступления материалов в ПИО (для эл. Казани по 65149 и 69413 в SD)" as="pio_date" key="0" />
        <column table="a" column="num_zap_post_mat" type="string" comment="№ с/з о поступления материалов в ПИО (для эл. Казани по 65149 в SD)" as="num_zap_post_mat" key="0" />
        <column table="a" column="zayavitel" type="string" comment="Заявитель (для эл. Казани по 72275 в SD)" as="zayavitel" key="0" />
        <column table="ur_hist_mat_decision" column="kod_hist_mat_last_decision" as="kod_hist_mat_last" dgroup="max" key="0" />
        <column table="kod_folders" column="kod_sdp" as="kod_sdp" key="0" />
        <column table="this" column="num_delo" as="num_delo_max" agg="list" fact="ur_mat_num_delo_max" key="0" />
        <call function="case" as="kod_sdp_mat" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>1</const>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_folders" column="kod_sdp" />
                <const>2</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_ssp" />
              </call>
            </call>
            <const>13</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>9</const>
            </call>
            <const>15</const>
          </call>
        </call>
        <call function="if" as="prizn_activ" type="number" key="0">
          <call function="is not null">
            <column table="a" column="dat_doc" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="has_isp_list" type="number" title="Наличие исполнительного листа" key="0">
          <call function="gt">
            <column table="ur_hist_mat" column="kod_isp_last" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_mat_reminder" column="mat_reminder1" as="mat_reminder1" key="0" />
        <column table="kod_mat_reminder" column="mat_reminder2" as="mat_reminder2" key="0" />
        <call function="||" as="name" title="Иск" vid="1" is-name="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>'  '</const>
          <column table="a" column="num_delo" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_doc" />
          </call>
        </call>
        <column table="ur_hist_mat_decision" column="dat_post" as="last_dat_post" dgroup="max" key="0" />
        <call function="case" title="Примерный срок рассмотрения" as="date_rassm_approx" type="date" is-fact="1" agg="min" fact="ur_mat_date_rassm_approx" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <call function="nvl">
                  <column table="a" column="type_rassm" />
                  <const type="number">2</const>
                </call>
                <const type="number">1</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_doc" />
              </call>
            </call>
            <call function="date add days" type="date">
              <call function="add_months">
                <column table="a" column="dat_doc" />
                <const type="number">2</const>
              </call>
              <const type="date">7</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="type_rassm" />
                <const type="number">3</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_prin" />
              </call>
            </call>
            <call function="date add days">
              <column table="a" column="dat_prin" />
              <const type="number">15</const>
            </call>
          </call>
        </call>
        <column table="kr_dogovor" column="kod_dog" dgroup="max" column-editable="1" as="kod_dog" key="0">
          <listquery>
            <query name="kr_dogovor(kodp)">
              <withparams>
                <column table="this" column="kodp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call function="true if null" as="is_active" title="Статус иска" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="type_rassm" column="name" is-fact="1" agg="stragg_dist" fact="ur_mat_type_rassm_name" as="type_rassm_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_mat" as="kod_mat_isp" key-dimension="kod_mat_isp" is-fact="1" agg="max" fact="ur_mat_isp_kod_mat_isp" key="0" />
        <const as="cnt" type="number" agg="sum" is-fact="1" fact="ur_mat_isp_count" key="0">1</const>
        <column table="this" column="dat_doc" as="dat_doc_st" dimension="dat_ur" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_st_ent" dimension="dat_ur_ent" key="0" />
        <column table="this" column="dat_doc" as="dat_podachi" dimension="isp_dat_podachi" is-private-dimension="isp_dat_podachi" is-final-dimension="isp_dat_podachi" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_min" fact="ur_ssp_dat_doc_min" agg="min" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_3" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_doc" />
          </call>
          <const>3</const>
        </call>
        <column table="a" column="num_delo" type="string" title="Номер дела" agg="stragg" as="num_delo" key="0" />
      </select>
      <from>
        <table name="ur_mat" as="a" title="Материалы переданные в суд">
          <dlink name="ur_hist_mat_decision" as="ur_hist_mat_decision" table="ur_hist_mat_decision" child="ur_hist_mat_decision" field="kod_mat" parent="ur_mat" back="ur_hist_mat_decision" />
          <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
          <dlink name="ur_hist_mat" dimension="kod_hist_mat" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения" />
          <dlink name="ur_hist_mat_dec" dimension="kod_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_penni_astr1" as="sr_penni_astr1" table="sr_penni_astr" child="sr_penni_astr" field="kod_delo1" parent="ur_mat" back="sr_penni_astr1">
            <link name="kod_sf_astr" dimension="1" is-final-dimension="1" as="kod_sf_astr" table="sr_facvip_astr" child="sr_penni_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_penni_astr" />
          </dlink>
          <link name="kod_mat_reminder" as="kod_mat_reminder" table="uv_mat_reminders" child="ur_mat_isp" field="kod_mat_reminder" parent="uv_mat_reminders" back="ur_mat_isp" />
          <link name="kodp" as="kodp" table="kr_payer" child="ur_mat_isp" field="kodp" parent="kr_payer" back="ur_mat_isp" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <dlink name="ur_hist_mat_isp" dimension="1" is-final-dimension="1" as="ur_hist_mat_isp" table="ur_hist_mat_isp" child="ur_hist_mat_isp" field="kod_mat_isp" parent="ur_mat_isp" back="ur_hist_mat_isp" />
          <dlink name="ur_dp_isp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_dp_isp_isp" table="ur_dp_isp" child="ur_dp_isp" field="kod_mat_isp" parent="ur_mat_isp" back="ur_dp_isp_isp">
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="vid_real" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="ym_vozn" />
            </dimlink>
          </dlink>
          <link name="kod_folders_isp" as="kod_folders_isp1" table="ur_folders_isp" child="ur_mat_isp" field="kod_folders_isp" parent="ur_folders_isp" back="ur_mat_isp" title="Папка исполнительного производства">
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="us_sud" as="kod_sud" join="left outer" dname="ur_mat_isp" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_sud" />
            <column table="kod_sud" column="kod_sud" />
          </call>
        </query>
        <query name="ur_mat" as="kod_parent" join="left outer" dname="ur_mat_child" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_mat" />
          </call>
        </query>
        <query name="us_doc" as="kod_doc" join="left outer" dname="ur_mat_isp" title="Документ">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="us_ssp" as="kod_ssp" join="left outer" dname="ur_mat_isp" title="Подразделение судебных приставов">
          <call function="=">
            <column table="a" column="kod_ssp" />
            <column table="kod_ssp" column="kod_ssp" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_mat_isp" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="uk_ret_isk" as="kod_ret_isk" join="left outer" dname="ur_mat_isp" title="Причина возврата документа">
          <call function="=">
            <column table="a" column="kod_ret_isk" />
            <column table="kod_ret_isk" column="kod_ret_isk" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" dimension="kod_folders" join="left outer" dname="ur_mat_isp" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_mat_isp" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_mat_isp" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="vr_type_rassm" join="left outer" as="type_rassm" dname="ur_mat_isp" title="Типы судебного производства">
          <call function="=">
            <column table="type_rassm" column="kod_type_rassm" />
            <column table="a" column="type_rassm" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_last" join="left outer" dname="-" title="История рассмотрения">
          <call function="=">
            <column table="this" column="kod_hist_mat_last" />
            <column table="kod_hist_mat_last" column="kod_hist_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_isp" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_mat_isp" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="uv_mat_reminders" as="kod_mat_reminder" join="left outer" dimension="kod_mat" dname="ur_mat_isp">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_reminder" column="kod_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_isp" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_mat_isp">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_mat_isp" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="ur_folders_isp" as="kod_folders_isp" join="left outer" dimension="kod_folders_isp" dname="ur_mat_isp" title="Папка исполнительного производства">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_isp" column="kod_folders_isp" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="ur_hist_mat_isp" dimension="1" is-final-dimension="1" />
        <dlink name="ur_dp_isp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
            <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="vid_real" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="ym_vozn" />
          </dimlink>
        </dlink>
        <link name="kod_folders_isp" as="kod_folders_isp1">
          <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <where>
        <call function="=">
          <column table="kod_folders" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
    </query>
    <query name="ur_mat_ba" inherit="ur_mat" class="1" timestamp="20.09.2023 22:47:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat" type="number" key-dimension="kod_mat" fact="ur_mat_kod_mat" agg="max" as="kod_mat" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" reference="us_doc" refcol="kod_doc" key="0">
          <listquery>
            <query name="us_doc_list">
              <withparams>
                <column table="this" column="kod_sdp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_ssp" type="number" as="kod_ssp" reference="us_ssp" refcol="kod_ssp" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер иска" vid="1" as="num_reg" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата отправки документов ответчику" as="dat_otv" key="0" />
        <column table="a" column="kod_ret_isk" type="number" mandatory="dat_otz" as="kod_ret_isk" reference="uk_ret_isk" refcol="kod_ret_isk" key="0" />
        <column table="a" column="num_delo" type="string" title="Номер дела" fact="ur_mat_num_delo" agg="stragg" mandatory="qube.ur_hist_mat_count" as="num_delo" key="0" />
        <column table="a" column="dat_prin" type="date" title="Дата принятия документов в суде" mandatory="qube.ur_hist_mat_ba_count" as="dat_prin" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_otz" type="string" title="№ документа возврата" mandatory="dat_otz" as="num_otz" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата возврата" as="dat_otz" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата подачи в суд" mandatory="dat_otz" fact="ur_mat_dat_doc_max" agg="max" as="dat_doc" key="0" />
        <column table="a" column="fio_otz" type="string" title="За чьей подписью возврат" mandatory="dat_otz" as="fio_otz" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="prichina_otz" type="string" title="Основание для возврата" mandatory="dat_otz" as="prichina_otz" key="0" />
        <column table="a" column="sum_gp" type="number" title="Оплачено госпошлины при подаче" is-fact="1" agg="sum" as="sum_gp" fact="ur_mat_sum_gp" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="dat_gp" type="date" title="Дата перечисления ГП" as="dat_gp" key="0" />
        <column table="a" column="kod_sud" type="number" rows-limit="100" as="kod_sud" reference="us_sud" refcol="kod_sud" key="0">
          <listquery>
            <query name="us_sud_list" />
          </listquery>
        </column>
        <column table="a" column="num_pp_gp" type="string" title="№ пл. пор. ГП" comment="№ плат пор по гп" as="num_pp_gp" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительского иска д/аппеляции,кассации,надзор" as="kod_parent" reference="ur_mat" refcol="kod_mat" key="0">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr" type="number" nvl="0" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" is-fact="1" agg="sum" as="ogr" fact="ur_mat_ogr" key="0" />
        <column table="a" column="kod_dispute" type="number" as="kod_dispute" key="0" />
        <column table="a" column="type_claim_template" type="number" as="type_claim_template" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="tep_el" type="number" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_emp" type="number" comment="Исполнитель ПИО" as="kod_emp" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish" type="date" as="dat_finish" key="0" />
        <column table="a" column="prim_mor_dz" type="string" title="Причина исключения/изменения мораторной задолженности" comment="примечание по мораторной задолженности" as="prim_mor_dz" key="0" />
        <column table="a" column="osnreal" type="number" comment="основная реализация" is-fact="1" agg="sum" as="osnreal" fact="ur_mat_osnreal" key="0" />
        <column table="a" column="period_zadol_s_vvod" type="number" comment="Период задолженности с (ручной ввод)" is-fact="1" agg="min" as="period_zadol_s_vvod" fact="ur_mat_period_zadol_s_vvod" key="0" />
        <column table="a" column="period_zadol_po_vvod" type="number" comment="Период задолженности по (ручной ввод)" is-fact="1" agg="max" as="period_zadol_po_vvod" fact="ur_mat_period_zadol_po_vvod" key="0" />
        <column table="a" column="ur_opl_do_resh_vvod" type="number" comment="Оплата до решения суда (ручной ввод)" is-fact="1" agg="sum" as="ur_opl_do_resh_vvod" fact="ur_mat_ur_opl_do_resh_vvod" key="0" />
        <column table="a" column="shtraf" type="number" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" comment="пени" is-fact="1" agg="sum" as="peni" fact="ur_mat_peni" key="0" />
        <column table="a" column="otvetch_info" type="string" comment="информация об ответчиках" as="otvetch_info" key="0" />
        <column table="a" column="link_delo" type="string" comment="ссылка на дело в интернете" title="Гиперссылка" controlType="UILink" as="link_delo" key="0" />
        <column table="a" column="sum_zach_gp" type="number" comment="сумма, зачтенной гп, руб" as="sum_zach_gp" key="0" />
        <column table="a" column="num_zach_doc" type="string" comment="определение суда/решение налогового органа о зачете госпошлины" as="num_zach_doc" key="0" />
        <column table="a" column="dat_zach" type="date" comment="дата документа о зачете" as="dat_zach" key="0" />
        <column table="a" column="sum_ifns_gp" type="number" comment="сумма гп, погашенной  ифнс" as="sum_ifns_gp" key="0" />
        <column table="a" column="num_ifns_doc" type="string" comment="№ извещ.  ифнс" as="num_ifns_doc" key="0" />
        <column table="a" column="dat_ifns" type="date" comment="дата извещ ифнс" as="dat_ifns" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="astrent_exists" type="number" comment="ручной признак наличия процентов за несвоевременную оплату по решению (для журналов)" title="Есть астрент (ручн. признак)" controlType="UICheck" as="astrent_exists" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления документов к иску" comment="дата передачи документов от финансистов - юристам (35926)" as="dat_post" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="type_rassm" title="Порядок рассмотрения" type="number" as="type_rassm" reference="vr_type_rassm" refcol="kod_type_rassm" key="0" />
        <column table="a" column="pio_date" type="date" comment="Дата поступления материалов в ПИО (для эл. Казани по 65149 и 69413 в SD)" as="pio_date" key="0" />
        <column table="a" column="num_zap_post_mat" type="string" comment="№ с/з о поступления материалов в ПИО (для эл. Казани по 65149 в SD)" as="num_zap_post_mat" key="0" />
        <column table="a" column="zayavitel" type="string" comment="Заявитель (для эл. Казани по 72275 в SD)" as="zayavitel" key="0" />
        <const type="number" as="cnt" fact="ur_mat_count" agg="sum" key="0">1</const>
        <column table="ur_hist_mat_decision" column="kod_hist_mat_last_decision" as="kod_hist_mat_last" dgroup="max" key="0" />
        <column table="kod_folders" column="kod_sdp" as="kod_sdp" key="0" />
        <column table="this" column="num_delo" as="num_delo_max" agg="list" fact="ur_mat_num_delo_max" key="0" />
        <call function="case" as="kod_sdp_mat" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>1</const>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_folders" column="kod_sdp" />
                <const>2</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_ssp" />
              </call>
            </call>
            <const>13</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>9</const>
            </call>
            <const>15</const>
          </call>
        </call>
        <call function="if" as="prizn_activ" type="number" key="0">
          <call function="is not null">
            <column table="a" column="dat_doc" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="has_isp_list" type="number" title="Наличие исполнительного листа" key="0">
          <call function="gt">
            <column table="ur_hist_mat" column="kod_isp_last" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_mat_reminder" column="mat_reminder1" as="mat_reminder1" key="0" />
        <column table="kod_mat_reminder" column="mat_reminder2" as="mat_reminder2" key="0" />
        <call function="||" as="name" title="Иск" vid="1" is-name="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>'  '</const>
          <column table="a" column="num_delo" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_doc" />
          </call>
        </call>
        <column table="ur_hist_mat_decision" column="dat_post" as="last_dat_post" dgroup="max" key="0" />
        <call function="case" title="Примерный срок рассмотрения" as="date_rassm_approx" type="date" is-fact="1" agg="min" fact="ur_mat_date_rassm_approx" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <call function="nvl">
                  <column table="a" column="type_rassm" />
                  <const type="number">2</const>
                </call>
                <const type="number">1</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_doc" />
              </call>
            </call>
            <call function="date add days" type="date">
              <call function="add_months">
                <column table="a" column="dat_doc" />
                <const type="number">2</const>
              </call>
              <const type="date">7</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="type_rassm" />
                <const type="number">3</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_prin" />
              </call>
            </call>
            <call function="date add days">
              <column table="a" column="dat_prin" />
              <const type="number">15</const>
            </call>
          </call>
        </call>
        <column table="kr_dogovor" column="kod_dog" dgroup="max" column-editable="1" as="kod_dog" key="0">
          <listquery>
            <query name="kr_dogovor(kodp)">
              <withparams>
                <column table="this" column="kodp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call function="true if null" as="is_active" title="Статус иска" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="type_rassm" column="name" is-fact="1" agg="stragg_dist" fact="ur_mat_type_rassm_name" as="type_rassm_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_mat" as="kod_mat_ba" key-dimension="kod_mat_ba" key="0" />
        <column table="this" column="osnreal" type="date" as="osnreal_ba" is-fact="1" agg="sum" fact="ur_mat_ba_osnreal_ba" key="0" />
        <column table="this" column="peni" type="date" as="peni_ba" is-fact="1" agg="sum" fact="ur_mat_ba_peni_ba" key="0" />
        <column table="this" column="ogr" type="date" as="ogr_ba" is-fact="1" agg="sum" fact="ur_mat_ba_ogr_ba" key="0" />
        <column table="this" column="ur_opl_do_resh_vvod" type="number" as="ur_opl_do_resh_vvod_ba" agg="sum" is-fact="1" fact="ur_mat_ba_ur_opl_do_resh_vvod_ba" key="0" />
      </select>
      <from>
        <table name="ur_mat" as="a" title="Материалы переданные в суд">
          <dlink name="ur_hist_mat_decision" as="ur_hist_mat_decision" table="ur_hist_mat_decision" child="ur_hist_mat_decision" field="kod_mat" parent="ur_mat" back="ur_hist_mat_decision" />
          <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
          <dlink name="ur_hist_mat" dimension="kod_hist_mat" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения" />
          <dlink name="ur_hist_mat_dec" dimension="kod_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_penni_astr1" as="sr_penni_astr1" table="sr_penni_astr" child="sr_penni_astr" field="kod_delo1" parent="ur_mat" back="sr_penni_astr1">
            <link name="kod_sf_astr" dimension="1" is-final-dimension="1" as="kod_sf_astr" table="sr_facvip_astr" child="sr_penni_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_penni_astr" />
          </dlink>
          <link name="kod_mat_reminder" as="kod_mat_reminder" table="uv_mat_reminders" child="ur_mat_ba" field="kod_mat_reminder" parent="uv_mat_reminders" back="ur_mat_ba" />
          <link name="kodp" as="kodp" table="kr_payer" child="ur_mat_ba" field="kodp" parent="kr_payer" back="ur_mat_ba" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <dlink name="ur_dogplat_bnk" dimension="kod_dogplat" is-final-dimension="1" is-private-dimension="1" as="ur_dogplat_bnk" table="ur_dogplat_bnk" child="ur_dogplat_bnk" field="kod_mat_bnk" parent="ur_mat_ba" back="ur_dogplat_bnk">
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_ba" table="ur_hist_mat_ba" child="ur_hist_mat_ba" field="kod_mat_ba" parent="ur_mat_ba" back="ur_hist_mat_ba">
            <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="ur_hist_mat_dec_ba" dimension="1" is-final-dimension="1" as="ur_hist_mat_dec_ba" table="ur_hist_mat_dec_ba" child="ur_hist_mat_dec_ba" field="kod_mat_ba" parent="ur_mat_ba" back="ur_hist_mat_dec_ba" />
        </table>
        <query name="us_sud" as="kod_sud" join="left outer" dname="ur_mat_ba" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_sud" />
            <column table="kod_sud" column="kod_sud" />
          </call>
        </query>
        <query name="ur_mat" as="kod_parent" join="left outer" dname="ur_mat_child" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_mat" />
          </call>
        </query>
        <query name="us_doc" as="kod_doc" join="left outer" dname="ur_mat_ba" title="Документ">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="us_ssp" as="kod_ssp" join="left outer" dname="ur_mat_ba" title="Подразделение судебных приставов">
          <call function="=">
            <column table="a" column="kod_ssp" />
            <column table="kod_ssp" column="kod_ssp" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_mat_ba" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="uk_ret_isk" as="kod_ret_isk" join="left outer" dname="ur_mat_ba" title="Причина возврата документа">
          <call function="=">
            <column table="a" column="kod_ret_isk" />
            <column table="kod_ret_isk" column="kod_ret_isk" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" dimension="kod_folders" join="left outer" dname="ur_mat_ba" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_mat_ba" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_mat_ba" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="vr_type_rassm" join="left outer" as="type_rassm" dname="ur_mat_ba" title="Типы судебного производства">
          <call function="=">
            <column table="type_rassm" column="kod_type_rassm" />
            <column table="a" column="type_rassm" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_last" join="left outer" dname="-" title="История рассмотрения">
          <call function="=">
            <column table="this" column="kod_hist_mat_last" />
            <column table="kod_hist_mat_last" column="kod_hist_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_ba" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_mat_ba" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="uv_mat_reminders" as="kod_mat_reminder" join="left outer" dimension="kod_mat" dname="ur_mat_ba">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_reminder" column="kod_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_ba" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_mat_ba">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_folders_ba" as="kod_folders_ba" join="left outer" dimension="kod_folders_ba" dname="ur_mat_ba">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_mat_ba" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="ur_dogplat_bnk" dimension="kod_dogplat" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </dlink>
        <dlink name="ur_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1">
          <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </dlink>
        <dlink name="ur_hist_mat_dec_ba" dimension="1" is-final-dimension="1" />
      </links>
      <where>
        <call function="=">
          <column table="kod_folders" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
    </query>
    <query name="ur_mat_pp" inherit="ur_mat" class="1" timestamp="04.04.2019 15:34:21" title="Иск" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat" type="number" key-dimension="kod_mat" fact="ur_mat_kod_mat" agg="max" as="kod_mat" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" reference="us_doc" refcol="kod_doc" key="0">
          <listquery>
            <query name="us_doc_list">
              <withparams>
                <column table="this" column="kod_sdp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_ssp" type="number" as="kod_ssp" reference="us_ssp" refcol="kod_ssp" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер иска" vid="1" as="num_reg" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата отправки документов ответчику" as="dat_otv" key="0" />
        <column table="a" column="kod_ret_isk" type="number" mandatory="dat_otz" as="kod_ret_isk" reference="uk_ret_isk" refcol="kod_ret_isk" key="0" />
        <column table="a" column="num_delo" type="string" title="Номер дела" fact="ur_mat_num_delo" agg="stragg" mandatory="qube.ur_hist_mat_count" as="num_delo" key="0" />
        <column table="a" column="dat_prin" type="date" title="Дата принятия документов в суде" mandatory="qube.ur_hist_mat_count" as="dat_prin" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_otz" type="string" title="№ документа возврата" mandatory="dat_otz" as="num_otz" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата возврата" as="dat_otz" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата подачи в суд" mandatory="dat_otz" fact="ur_mat_dat_doc_max" agg="max" as="dat_doc" key="0" />
        <column table="a" column="fio_otz" type="string" title="За чьей подписью возврат" mandatory="dat_otz" as="fio_otz" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="prichina_otz" type="string" title="Основание для возврата" mandatory="dat_otz" as="prichina_otz" key="0" />
        <column table="a" column="sum_gp" type="number" title="Оплачено госпошлины при подаче" is-fact="1" agg="sum" as="sum_gp" fact="ur_mat_pp_sum_gp" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="dat_gp" type="date" title="Дата перечисления ГП" as="dat_gp" key="0" />
        <column table="a" column="kod_sud" type="number" rows-limit="100" as="kod_sud" reference="us_sud" refcol="kod_sud" key="0">
          <listquery>
            <query name="us_sud_list" />
          </listquery>
        </column>
        <column table="a" column="num_pp_gp" type="string" title="№ пл. пор. ГП" comment="№ плат пор по гп" as="num_pp_gp" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительского иска д/аппеляции,кассации,надзор" as="kod_parent" reference="ur_mat" refcol="kod_mat" key="0">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr" type="number" nvl="0" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" is-fact="1" agg="sum" as="ogr" fact="ur_mat_pp_ogr" key="0" />
        <column table="a" column="kod_dispute" type="number" as="kod_dispute" key="0" />
        <column table="a" column="type_claim_template" type="number" as="type_claim_template" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="tep_el" type="number" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_emp" type="number" comment="Исполнитель ПИО" as="kod_emp" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish" type="date" as="dat_finish" key="0" />
        <column table="a" column="prim_mor_dz" type="string" title="Причина исключения/изменения мораторной задолженности" comment="примечание по мораторной задолженности" as="prim_mor_dz" key="0" />
        <column table="a" column="osnreal" type="number" comment="основная реализация" is-fact="1" agg="sum" as="osnreal" fact="ur_mat_osnreal" key="0" />
        <column table="a" column="period_zadol_s_vvod" type="number" comment="Период задолженности с (ручной ввод)" is-fact="1" agg="min" as="period_zadol_s_vvod" fact="ur_mat_period_zadol_s_vvod" key="0" />
        <column table="a" column="period_zadol_po_vvod" type="number" comment="Период задолженности по (ручной ввод)" is-fact="1" agg="max" as="period_zadol_po_vvod" fact="ur_mat_period_zadol_po_vvod" key="0" />
        <column table="a" column="ur_opl_do_resh_vvod" type="number" comment="Оплата до решения суда (ручной ввод)" is-fact="1" agg="sum" as="ur_opl_do_resh_vvod" fact="ur_mat_ur_opl_do_resh_vvod" key="0" />
        <column table="a" column="shtraf" type="number" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" comment="пени" is-fact="1" agg="sum" as="peni" fact="ur_mat_peni" key="0" />
        <column table="a" column="otvetch_info" type="string" comment="информация об ответчиках" as="otvetch_info" key="0" />
        <column table="a" column="link_delo" type="string" comment="ссылка на дело в интернете" title="Гиперссылка" controlType="UILink" as="link_delo" key="0" />
        <column table="a" column="sum_zach_gp" type="number" comment="сумма, зачтенной гп, руб" as="sum_zach_gp" key="0" />
        <column table="a" column="num_zach_doc" type="string" comment="определение суда/решение налогового органа о зачете госпошлины" as="num_zach_doc" key="0" />
        <column table="a" column="dat_zach" type="date" comment="дата документа о зачете" as="dat_zach" key="0" />
        <column table="a" column="sum_ifns_gp" type="number" comment="сумма гп, погашенной  ифнс" as="sum_ifns_gp" key="0" />
        <column table="a" column="num_ifns_doc" type="string" comment="№ извещ.  ифнс" as="num_ifns_doc" key="0" />
        <column table="a" column="dat_ifns" type="date" comment="дата извещ ифнс" as="dat_ifns" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="astrent_exists" type="number" comment="ручной признак наличия процентов за несвоевременную оплату по решению (для журналов)" title="Есть астрент (ручн. признак)" controlType="UICheck" as="astrent_exists" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления документов к иску" comment="дата передачи документов от финансистов - юристам (35926)" as="dat_post" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="type_rassm" title="Порядок рассмотрения" type="number" as="type_rassm" reference="vr_type_rassm" refcol="kod_type_rassm" key="0" />
        <column table="a" column="pio_date" type="date" comment="Дата поступления материалов в ПИО (для эл. Казани по 65149 и 69413 в SD)" as="pio_date" key="0" />
        <column table="a" column="num_zap_post_mat" type="string" comment="№ с/з о поступления материалов в ПИО (для эл. Казани по 65149 в SD)" as="num_zap_post_mat" key="0" />
        <column table="a" column="zayavitel" type="string" comment="Заявитель (для эл. Казани по 72275 в SD)" as="zayavitel" key="0" />
        <const type="number" as="cnt" fact="ur_mat_count" agg="sum" key="0">1</const>
        <column table="ur_hist_mat_decision" column="kod_hist_mat_last_decision" as="kod_hist_mat_last" dgroup="max" key="0" />
        <column table="kod_folders" column="kod_sdp" as="kod_sdp" key="0" />
        <column table="this" column="num_delo" as="num_delo_max" agg="list" fact="ur_mat_num_delo_max" key="0" />
        <call function="case" as="kod_sdp_mat" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>1</const>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_folders" column="kod_sdp" />
                <const>2</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_ssp" />
              </call>
            </call>
            <const>13</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>9</const>
            </call>
            <const>15</const>
          </call>
        </call>
        <call function="if" as="prizn_activ" type="number" key="0">
          <call function="is not null">
            <column table="a" column="dat_doc" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="has_isp_list" type="number" title="Наличие исполнительного листа" key="0">
          <call function="gt">
            <column table="ur_hist_mat" column="kod_isp_last" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_mat_reminder" column="mat_reminder1" as="mat_reminder1" key="0" />
        <column table="kod_mat_reminder" column="mat_reminder2" as="mat_reminder2" key="0" />
        <call function="||" as="name" title="Иск" vid="1" is-name="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>'  '</const>
          <column table="a" column="num_delo" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_doc" />
          </call>
        </call>
        <column table="ur_hist_mat_decision" column="dat_post" as="last_dat_post" dgroup="max" key="0" />
        <call function="case" title="Примерный срок рассмотрения" as="date_rassm_approx" type="date" is-fact="1" agg="max" fact="ur_mat_pp_dt_ras_apr" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <call function="nvl">
                  <column table="a" column="type_rassm" />
                  <const type="number">2</const>
                </call>
                <const type="number">1</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_doc" />
              </call>
            </call>
            <call function="date add days" type="date">
              <call function="add_months">
                <column table="a" column="dat_doc" />
                <const type="number">2</const>
              </call>
              <const type="date">7</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="type_rassm" />
                <const type="number">3</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_prin" />
              </call>
            </call>
            <call function="date add days">
              <column table="a" column="dat_prin" />
              <const type="number">15</const>
            </call>
          </call>
        </call>
        <column table="kr_dogovor" column="kod_dog" dgroup="max" column-editable="1" as="kod_dog" key="0">
          <listquery>
            <query name="kr_dogovor(kodp)">
              <withparams>
                <column table="this" column="kodp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call function="true if null" as="is_active" title="Статус иска" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <column table="this" column="kod_mat" as="kod_mat_pp" key-dimension="kod_mat_pp" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_st" dimension="dat_ur" is-fact="1" fact="ur_mat_pp_dat_doc" agg="max" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_d" dimension="dat" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_st_ent" dimension="dat_ur_ent" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_1" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_doc" />
          </call>
          <const>1</const>
        </call>
        <call as="name_isk" function="||" fact="ur_mat_pp_name_isk" agg="max" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' № '</const>
          <column table="this" column="num_delo" />
          <const>' от  '</const>
          <call function="date to char">
            <column table="this" column="dat_doc" />
          </call>
        </call>
        <column table="this" column="cnt" as="cnt_pp" is-fact="1" agg="sum" fact="ur_mat_pp_cnt_pp" key="0" />
        <column table="type_rassm" column="name" as="type_rassm_name" is-fact="1" agg="max" fact="ur_mat_pp_tp_ras_name" key="0" />
      </select>
      <from>
        <table name="ur_mat" as="a" title="Материалы переданные в суд">
          <dlink name="ur_hist_mat_decision" as="ur_hist_mat_decision" table="ur_hist_mat_decision" child="ur_hist_mat_decision" field="kod_mat" parent="ur_mat" back="ur_hist_mat_decision" />
          <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
          <dlink name="ur_hist_mat" dimension="kod_hist_mat" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения" />
          <dlink name="ur_hist_mat_dec" dimension="kod_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat_pp" parent="ur_mat_pp" back="ur_hist_mat_dec" title="Решение по делу">
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_penni_astr1" as="sr_penni_astr1" table="sr_penni_astr" child="sr_penni_astr" field="kod_delo1" parent="ur_mat" back="sr_penni_astr1">
            <link name="kod_sf_astr" dimension="1" is-final-dimension="1" as="kod_sf_astr" table="sr_facvip_astr" child="sr_penni_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_penni_astr" />
          </dlink>
          <link name="kod_mat_reminder" as="kod_mat_reminder" table="uv_mat_reminders" child="ur_mat_pp" field="kod_mat_reminder" parent="uv_mat_reminders" back="ur_mat_pp" />
          <link name="kodp" as="kodp" table="kr_payer" child="ur_mat_pp" field="kodp" parent="kr_payer" back="ur_mat_pp" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_hist_mat_dec" dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat_pp" parent="ur_mat_pp" back="ur_hist_mat_dec" title="Решение по делу">
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="ur_hist_mat" is-final-dimension="1" is-private-dimension="1" dimension="1" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения">
            <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <link name="kod_folders" as="kod_folders1" dimension="1" table="ur_folders" child="ur_mat_pp" field="kod_folders" parent="ur_folders" back="ur_mat_pp" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="us_sud" as="kod_sud" join="left outer" dname="ur_mat_pp" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_sud" />
            <column table="kod_sud" column="kod_sud" />
          </call>
        </query>
        <query name="ur_mat" as="kod_parent" join="left outer" dname="ur_mat_child" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_mat" />
          </call>
        </query>
        <query name="us_doc" as="kod_doc" join="left outer" dname="ur_mat_pp" title="Документ">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="us_ssp" as="kod_ssp" join="left outer" dname="ur_mat_pp" title="Подразделение судебных приставов">
          <call function="=">
            <column table="a" column="kod_ssp" />
            <column table="kod_ssp" column="kod_ssp" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_mat_pp" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="uk_ret_isk" as="kod_ret_isk" join="left outer" dname="ur_mat_pp" title="Причина возврата документа">
          <call function="=">
            <column table="a" column="kod_ret_isk" />
            <column table="kod_ret_isk" column="kod_ret_isk" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" dimension="kod_folders" join="left outer" dname="ur_mat_pp" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_mat_pp" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_mat_pp" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="vr_type_rassm" join="left outer" as="type_rassm" dname="ur_mat_pp" title="Типы судебного производства">
          <call function="=">
            <column table="type_rassm" column="kod_type_rassm" />
            <column table="a" column="type_rassm" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_last" join="left outer" dname="-" title="История рассмотрения">
          <call function="=">
            <column table="this" column="kod_hist_mat_last" />
            <column table="kod_hist_mat_last" column="kod_hist_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_pp" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_mat_pp" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="uv_mat_reminders" as="kod_mat_reminder" join="left outer" dimension="kod_mat" dname="ur_mat_pp">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_reminder" column="kod_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_pp" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_mat_pp">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_mat_pp" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_mat_pp" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="ur_dogplat" dimension="kod_dogplat">
          <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
          <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </dlink>
        <dlink name="ur_hist_mat_dec" dimension="1">
          <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
        </dlink>
        <dlink name="ur_hist_mat" is-final-dimension="1" is-private-dimension="1" dimension="1">
          <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </dlink>
        <link name="kod_folders" as="kod_folders1" dimension="1">
          <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
        </link>
      </links>
      <where>
        <call function="=">
          <column table="kod_folders" column="kod_sdp" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ur_mat_dog" class="1" timestamp="17.06.2016 03:02:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="ur_mat" column="kod_mat" as="kod_mat" group="1" key="1" fixed="1" />
        <column table="ur_dogplat" column="kod_dog" as="kod_dog" group="1" key="1" fixed="1" />
      </select>
      <from>
        <query name="ur_mat" as="ur_mat" title="Материалы переданные в суд">
          <elink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat_dog" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_mat_dog" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="ur_dogplat" column="kod_dog" />
        </call>
      </where>
    </query>
    <query name="prizn_activ_mat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_activ_mat" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_activ_mat" type="string" title="Состояние документов" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_activ_mat_view" view="1" as="a"></table>
      </from>
    </query>
    <query name="ur_mat_calc_gp" class="1" timestamp="01.11.2019 19:26:14" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <params>
        <param type="number" name="kod_mat" />
      </params>
      <select>
        <call function="ur_read_bd.f_gp_doc" as="sum_gp" key="0">
          <const>1</const>
          <fact column="ur_dp_sum_all" />
        </call>
        <!--<call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами">
          <column table="a" column="proc" nvl="0"></column>
          <column table="a" column="opl_proc" nvl="0"></column>
        </call>-->
        <!--<call function="-" as="ost_ogr" title="Остаток задолженности: расходы за ограничение энергопотребления" nvl="0">
          <column table="a" column="ogr" nvl="0"></column>
          <column table="a" column="opl_ogr" nvl="0"></column>
        </call>-->
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <query name="ur_mat" as="a" title="Материалы переданные в суд" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_mat" />
          <useparam name="kod_mat" />
        </call>
      </where>
    </query>
    <query name="prizn_arch_mat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_mat" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_mat" type="string" title="Статус иска" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_mat_view" view="1" as="a" />
      </from>
    </query>
    <query name="prizn_arch_mat_act" inherit="prizn_arch_mat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_mat" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_mat" type="string" title="Статус иска" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_mat_view" view="1" as="a" />
      </from>
    </query>
    <query name="ur_mat_upd_num_reg" update-target="ur_mat" timestamp="13.08.2024 15:15:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <params>
        <param name="p_kod_mat" type="number" />
      </params>
      <select>
        <column table="m" column="kod_mat" key="1" as="kod_mat" />
        <call function="ur_save.f_num_reg_s" as="num_reg">
          <const>6</const>
        </call>
      </select>
      <from>
        <query name="ur_mat" as="m" title="Материалы переданные в суд" />
        <query name="ur_folders" join="inner" as="f" dname="ur_mat_upd_num_reg" title="Папка">
          <call function="=">
            <column table="m" column="kod_folders" />
            <column table="f" column="kod_folders" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="m" column="kod_mat" />
            <useparam name="p_kod_mat" />
          </call>
          <call function="is null">
            <column table="m" column="num_reg" />
          </call>
          <call function="=">
            <column table="f" column="kod_sdp" />
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="uv_mat_reminders" timestamp="05.06.2017 21:02:59" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <select>
        <column table="a" column="kod_mat" as="kod_mat" />
        <call function="if" as="mat_reminder1" title="Напоминание 1" type="string">
          <call function="and">
            <call function="lt">
              <column table="a" column="dat_doc" />
              <call table="a" column="dat_doc" function="add_months">
                <const type="date">sysdate</const>
                <const type="number">-1</const>
              </call>
            </call>
            <call function="=">
              <call function="nvl0">
                <fact column="ur_hist_mat_count" />
              </call>
              <const type="number">0</const>
            </call>
          </call>
          <const>'История не заполнена. '</const>
        </call>
        <call function="if" as="mat_reminder2" title="Напоминание 2" type="string">
          <call function="and">
            <call function="!=0" comment="Емцов - добавил условие по 38755">
              <fact column="ur_hist_mat_dec_pr_resh" />
            </call>
            <call function="is null">
              <fact column="ur_hist_mat_dec_dat_entry" />
            </call>
            <call function="lt">
              <fact column="ur_hist_mat_dec_dat_resh" />
              <call function="-">
                <const type="date">sysdate</const>
                <const type="number">40</const>
              </call>
            </call>
            <call function="=">
              <call function="nvl">
                <fact column="qube_mat_pp_cld_inf_cnt_nd" />
                <const>0</const>
              </call>
              <const>0</const>
            </call>
          </call>
          <const>'Не введена дата вступления решения в законную силу. '</const>
        </call>
      </select>
      <from>
        <qube merge-dimsets="1" star-scheme="1">
          <link name="kod_mat_pp" as="a" all-rows="1" />
          <where>
            <call function="is not null" dont-push="1">
              <column table="a" column="kod_mat" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="ur_mat_in_folder_list" class="1" timestamp="05.06.2017 19:40:30" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml" haskeys="1">
      <params>
        <param type="number" name="p_kod_fold" />
      </params>
      <select>
        <column table="a" column="kod_mat" as="kod_mat" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="ur_mat" as="a" title="Материалы переданные в суд" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_folders" />
          <useparam name="p_kod_fold" />
        </call>
      </where>
    </query>
    <query name="qube_mat_pp_cld_inf" class="1" timestamp="05.06.2017 20:51:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <select>
        <column table="kod_mat_pp" column="kod_parent" as="kod_mat_pp" key-dimension="kod_mat_pp" dimension="kod_mat_pp" />
        <call function="()" as="cnt" type="number" agg="sum">
          <const>1</const>
        </call>
        <fact column="ur_hist_mat_dec_pr_resh" as="cnt_dec" agg="sum" is-fact-use="1" />
        <call function="-nvl" as="cnt_nd" agg="sum" is-fact="1" fact="qube_mat_pp_cld_inf_cnt_nd">
          <column table="this" column="cnt" />
          <column table="this" column="cnt_dec" />
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_mat_pp" all-rows="1" />
          <where>
            <call function="is not null">
              <column table="kod_mat_pp" column="kod_parent" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="qube_ur_mat" class="1" timestamp="20.10.2017 16:21:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <select>
        <column table="kod_mat_pp" column="kod_mat" dimension="kod_mat" is-private-dimension="1" as="kod_mat" />
        <column table="kod_mat_pp" column="kod_folders" dimension="kod_folders" is-private-dimension="1" as="kod_folders" />
        <fact column="ur_hist_mat_dec_dat_resh" as="dat_resh" is-fact-use="1" />
        <fact column="ur_hist_mat_dat_pst_k_rsm" as="dat_k_rsm" is-fact-use="1" />
        <call function="if" type="string" as="dat_resh_vld" is-fact="1" agg="max" fact="qube_ur_mat_dat_resh_vld">
          <call function="and">
            <call function="is null">
              <column table="this" column="dat_resh" />
            </call>
            <call function="gt">
              <call function="sysdate" />
              <call function="add_months">
                <column table="this" column="dat_k_rsm" />
                <const>2</const>
              </call>
            </call>
          </call>
          <const>'[inf]Не вынесено решение. Прошло более 2-х месяцев с момента принятия к рассмотрению'</const>
        </call>
      </select>
      <from>
        <qube>
          <link name="kod_mat_pp" all-rows="1" />
          <link name="kod_folders" all-rows="1" />
          <link name="kod_folders" all-rows="1" as="a" comment="линки для проталкивания условий , без этого не работает, не доделано">
            <link name="kodp" />
            <link name="kod_podr" />
            <dlink name="ur_mat">
              <dlink name="ur_hist_mat">
                <dlink name="ur_isp" />
              </dlink>
            </dlink>
            <dlink name="ur_mat" as="ur_mat1" />
          </link>
          <link name="kod_mat" all-rows="1" />
        </qube>
      </from>
    </query>
    <query name="ur_pret_pr_imp" class="1" timestamp="01.04.2021 13:27:10" title="Признак импорта в ПК &quot;Юрист&quot;" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_pret.xml" haskeys="1">
      <select>
        <column table="a" column="pr_imp" type="number" key="1" as="pr_imp" />
        <column table="a" column="name" type="string" vid="1" as="name" />
      </select>
      <from>
        <query as="a">
          <union>
            <query>
              <select>
                <const as="pr_imp" type="number">0</const>
                <const as="name" type="string">'Не передавать'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
            <query>
              <select>
                <const as="pr_imp" type="number">1</const>
                <const as="name" type="string">'Передавать'</const>
              </select>
              <from>
                <table name="dual" as="a" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="ur_pret_pr_imp_default" class="1" timestamp="01.04.2021 14:40:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_pret.xml">
      <select>
        <call function="decode" as="value" type="number" key="0">
          <column table="rs_esys" column="kod_esys" />
          <const>23</const>
          <const>1</const>
          <const>NULL</const>
        </call>
      </select>
      <from>
        <query name="rs_esys" as="rs_esys" />
      </from>
    </query>
    <query name="prizn_arch_pretenz" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_pretenz.xml" haskeys="1">
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_pretenz" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_pretenz" type="string" title="Статус претензии" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_pretenz_view" view="1" as="a" />
      </from>
    </query>
    <query name="prizn_arch_pretenz_act" inherit="prizn_arch_pretenz" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_pretenz.xml" haskeys="1">
      <where>
        <call function="=">
          <column table="a" column="kod" />
          <const>1</const>
        </call>
      </where>
      <select>
        <column table="a" column="kod" as="kod_prizn_arch_pretenz" type="number" key="1" fixed="1" />
        <column table="a" column="name" as="name_prizn_arch_pretenz" type="string" title="Статус претензии" vid="1" key="0" />
      </select>
      <from>
        <table name="prizn_arch_pretenz_view" view="1" as="a" />
      </from>
    </query>
    <query name="ur_sogl_in_folder_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_sogl.xml" haskeys="1">
      <params>
        <param type="number" name="kod_folders" />
      </params>
      <select>
        <column table="a" column="kod_sogl" as="kod_sogl" key="1" fixed="1" />
        <column table="a" column="full_name" as="full_name" key="0" />
      </select>
      <from>
        <query name="ur_sogl" as="a" title="Доп. документ (арбитраж)" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=">
            <column table="a" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_sogl_upd_num_reg" class="1" timestamp="23.06.2016 03:09:31" update-target="ur_sogl" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_sogl.xml" haskeys="1">
      <params>
        <param type="number" name="kod_sogl" />
      </params>
      <select>
        <column table="a" column="kod_sogl" as="kod_sogl" key="1" fixed="1" />
        <call function="ur_save.f_num_reg_s" as="num_reg" key="0">
          <const>3</const>
        </call>
        <!--<call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами">
          <column table="a" column="proc" nvl="0"></column>
          <column table="a" column="opl_proc" nvl="0"></column>
        </call>-->
        <!--<call function="-" as="ost_ogr" title="Остаток задолженности: расходы за ограничение энергопотребления" nvl="0">
          <column table="a" column="ogr" nvl="0"></column>
          <column table="a" column="opl_ogr" nvl="0"></column>
        </call>-->
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <query name="ur_sogl" as="a" title="Доп. документ (арбитраж)" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_sogl" />
            <useparam name="kod_sogl" />
          </call>
          <call function="is null">
            <column table="a" column="num_reg" />
          </call>
        </call>
      </where>
    </query>
    <query name="ur_stage_bk_rn" class="1" timestamp="02.03.2023 11:50:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_stage_bk.xml" haskeys="1">
      <select>
        <column table="a" column="kod_stage_bk" key="1" as="kod_stage_bk" />
        <column table="a" column="kod_folders" as="kod_folders" />
        <call function="row_number" type="number" as="rn">
          <call function="partition by">
            <column table="a" column="kod_folders" />
          </call>
          <call function="order by 2">
            <call function="desc">
              <column table="a" column="dat_create" />
            </call>
          </call>
        </call>
        <column table="a" column="num_dela" as="num_dela" />
        <call function="if" type="date" as="dat_z_b_reestr">
          <call function="=">
            <column table="kod_hist_mat" column="is_in_reestr" />
            <const>1</const>
          </call>
          <column table="a" column="dat_zayav_bankrot" />
        </call>
        <column table="kod_stage" column="name" as="stage_name" />
        <column table="a" column="dat_create" as="dat_create" />
        <column table="a" column="dat_srok_proc" as="dat_srok_proc" />
        <column table="a" column="dat_finish" as="dat_finish" />
      </select>
      <from>
        <query name="ur_stage_bk" as="a">
          <link name="kod_stage" as="kod_stage" table="uk_stage" child="ur_stage_bk" field="kod_stage" parent="uk_stage" back="ur_stage_bk" title="Стадия процедуры банкротства" />
          <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat_ba" child="ur_stage_bk" field="kod_hist_mat" parent="ur_hist_mat_ba" back="ur_stage_bk" />
        </query>
      </from>
    </query>
    <query name="ur_stage_bk_rn_1" class="1" title="Банкротство по максимальной дате введения процедуры" timestamp="02.03.2023 11:59:24" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_stage_bk.xml">
      <select>
        <column table="a" column="kod_folders" as="kod_folders" key="0" />
        <column table="a" column="num_dela" is-fact="1" agg="max" as="num_dela" fact="ur_stage_bk_rn_1_num_dela" key="0" />
        <column table="a" column="dat_z_b_reestr" is-fact="1" agg="max" fact="ur_stage_bk_rn_1_dat_z_b" as="dat_z_b_reestr" key="0" />
        <column table="a" column="stage_name" is-fact="1" agg="max" as="stage_name" fact="ur_stage_bk_rn_1_stage_name" key="0" />
        <column table="a" column="dat_create" agg="max" is-fact="1" as="dat_create" fact="ur_stage_bk_rn_1_dat_create" key="0" />
        <column table="a" column="dat_srok_proc" agg="max" is-fact="1" as="dat_srok_proc" fact="ur_stage_bk_rn_1_dat_srok_proc" key="0" />
        <column table="a" column="dat_finish" is-fact="1" agg="max" as="dat_finish" fact="ur_stage_bk_rn_1_dat_finish" key="0" />
        <!--Пока лучше не придумал-->
      </select>
      <from>
        <query name="ur_stage_bk_rn" as="a" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_stage_bk_rn_1" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="rn" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="ur_state" title="Юр. статус" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ur_state" type="number" key-dimension="kod_ur_sate" as="kod_ur_state" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Юр. статус" vid="1" as="name" key="0" />
      </select>
      <from>
        <table name="ur_sate" view="1" as="a"></table>
      </from>
    </query>
    <query name="ur_state_dt" title="Юр. статус" class="1" timestamp="01.06.2017 16:54:53" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ur_state" type="number" key-dimension="kod_ur_sate" as="kod_ur_state" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Юр. статус" vid="1" as="name" key="0" />
      </select>
      <from>
        <table name="ur_sate" view="1" as="a" />
      </from>
    </query>
    <query name="us_doc_sdp1" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="name" title="Вид документа" vid="1" as="name" key="0" />
        <column table="a" column="abbr" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="inst_name" title="Инстанция" as="inst_name" key="0" />
      </select>
      <from>
        <query name="us_doc" as="a" title="Документ" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_doc_sdp2" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="name" title="Вид документа" vid="1" as="name" key="0" />
        <column table="a" column="abbr" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="inst_name" title="Инстанция" as="inst_name" key="0" />
      </select>
      <from>
        <query name="us_doc" as="a" title="Документ" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_doc_sdp9" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="name" title="Вид документа" vid="1" as="name" key="0" />
        <column table="a" column="abbr" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="inst_name" title="Инстанция" as="inst_name" key="0" />
      </select>
      <from>
        <query name="us_doc" as="a" title="Документ" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_doc_list" class="1" title="Документ" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_doc.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
      </params>
      <select>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="name" type="string" title="Вид документа" as="name" key="0" />
      </select>
      <from>
        <query name="us_doc" as="a" title="Документ" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="kod_sdp" />
            <useparam name="kod_sdp" />
          </call>
        </call>
      </where>
    </query>
    <query name="us_post_sdp1" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_post.xml" haskeys="1">
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="0"></column>
        <column table="a" column="name" type="string" title="Судебный акт" as="name" key="0"></column>
      </select>
      <from>
        <query name="us_post" as="a" title="Судебный акт" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_post_sdp2" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_post.xml" haskeys="1">
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="0"></column>
        <column table="a" column="name" type="string" title="Постановление" as="name" key="0"></column>
      </select>
      <from>
        <query name="us_post" as="a" title="Судебный акт" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_post_sdp9" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_post.xml" haskeys="1">
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="0"></column>
        <column table="a" column="name" type="string" as="name" key="0"></column>
      </select>
      <from>
        <query name="us_post" as="a" title="Судебный акт" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_post_sdp36" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_post.xml" haskeys="1">
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="0"></column>
        <column table="a" column="name" type="string" as="name" key="0"></column>
      </select>
      <from>
        <query name="us_post" as="a" title="Судебный акт" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_sdp" />
          <const>36</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_post_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_post.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
      </params>
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="us_post" as="a" title="Судебный акт" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="kod_sdp" />
            <useparam name="kod_sdp" />
          </call>
        </call>
      </where>
    </query>
    <query name="us_property_type_list" timestamp="22.06.2016 23:39:14" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_property_type.xml" haskeys="1">
      <params>
        <param type="number" name="kod_property" />
      </params>
      <select>
        <column table="a" column="kod_property_type" as="kod_property_type" key="1" fixed="1" />
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="us_property_type" as="a" title="Вид имущества" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_property" />
          <useparam name="kod_property" />
        </call>
      </where>
    </query>
    <query name="us_result_sdp1" order="name_post, name" class="1" timestamp="11.05.2017 22:34:41" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod_result" as="kod_result" key="1" fixed="1" />
        <column table="a" column="kod_post" as="kod_post" key="0" />
        <column table="a" column="name" title="Результат рассмотрения" as="name" key="0" />
        <column table="ur_post" column="name" as="name_post" title="Судебный акт" key="0" />
        <call function="if" as="decision" type="string" title="Решение" key="0">
          <call function="=">
            <call function="nvl0">
              <column table="a" column="decision" />
            </call>
            <const>1</const>
          </call>
          <const>'Окончательное'</const>
          <const>'Не окончательное'</const>
        </call>
      </select>
      <from>
        <query name="us_result" as="a">
          <link name="kod_post" as="ur_post" table="us_post" child="us_result" field="kod_post" parent="us_post" back="us_result" title="Судебный акт" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_post" column="kod_sdp" />
          <const>1</const>
        </call>
      </where>
      <order>
        <column column="name_post" />
        <column column="name" />
      </order>
    </query>
    <query name="us_result_sdp2" order="name_post, name" class="1" timestamp="11.05.2017 22:35:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod_result" as="kod_result" key="1" fixed="1" />
        <column table="a" column="kod_post" as="kod_post" key="0" />
        <column table="a" column="name" title="Результат рассмотрения" as="name" key="0" />
        <column table="ur_post" column="name" as="name_post" title="Постановление" key="0" />
        <call function="if" as="decision" type="string" title="Решение" key="0">
          <call function="=">
            <call function="nvl0">
              <column table="a" column="decision" />
            </call>
            <const>1</const>
          </call>
          <const>'Окончательное'</const>
          <const>'Не окончательное'</const>
        </call>
      </select>
      <from>
        <query name="us_result" as="a">
          <link name="kod_post" as="ur_post" table="us_post" child="us_result" field="kod_post" parent="us_post" back="us_result" title="Судебный акт" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_post" column="kod_sdp" />
          <const>2</const>
        </call>
      </where>
      <order>
        <column column="name_post" />
        <column column="name" />
      </order>
    </query>
    <query name="us_result_sdp9" order="ur_post.name, name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod_result" as="kod_result" key="1" fixed="1" />
        <column table="a" column="kod_post" as="kod_post" key="0" />
        <column table="a" column="name" title="Результат рассмотрения" as="name" key="0" />
        <column table="ur_post" column="name" as="name_post" title="Судебный акт" key="0" />
        <call function="if" as="decision" type="string" title="Решение" key="0">
          <call function="=">
            <call function="nvl0">
              <column table="a" column="decision" />
            </call>
            <const>1</const>
          </call>
          <const>'Окончательное'</const>
          <const>'Не окончательное'</const>
        </call>
      </select>
      <from>
        <query name="us_result" as="a">
          <link name="kod_post" as="ur_post" table="us_post" child="us_result" field="kod_post" parent="us_post" back="us_result" title="Судебный акт" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_post" column="kod_sdp" />
          <const>9</const>
        </call>
      </where>
      <order>
        <column column="ur_post.name" />
        <column column="name" />
      </order>
    </query>
    <query name="us_result_sdp36" order="ur_post.name, name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod_result" as="kod_result" key="1" fixed="1" />
        <column table="a" column="kod_post" as="kod_post" key="0" />
        <column table="a" column="name" title="Результат рассмотрения" as="name" key="0" />
        <column table="ur_post" column="name" as="name_post" title="Судебный акт" key="0" />
        <call function="if" as="decision" type="string" title="Решение" key="0">
          <call function="=">
            <call function="nvl0">
              <column table="a" column="decision" />
            </call>
            <const>1</const>
          </call>
          <const>'Окончательное'</const>
          <const>'Не окончательное'</const>
        </call>
      </select>
      <from>
        <query name="us_result" as="a">
          <link name="kod_post" as="ur_post" table="us_post" child="us_result" field="kod_post" parent="us_post" back="us_result" title="Судебный акт" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="ur_post" column="kod_sdp" />
          <const>36</const>
        </call>
      </where>
      <order>
        <column column="ur_post.name" />
        <column column="name" />
      </order>
    </query>
    <query name="us_result_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_result.xml" haskeys="1">
      <params>
        <param name="kod_post" type="number" />
      </params>
      <select>
        <column table="a" column="kod_result" as="kod_result" key="1" fixed="1" />
        <column table="a" column="name" title="Результат рассмотрения" as="name" key="0" />
      </select>
      <from>
        <query name="us_result" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="kod_post" />
            <useparam name="kod_post" />
          </call>
        </call>
      </where>
    </query>
    <query name="us_sud_list" class="1" title="Суд / судебный участок" order="name, kod_sud" timestamp="13.09.2023 15:45:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_sud.xml" haskeys="1">
      <select>
        <column table="us_sud" column="kod_sud" key="1" as="kod_sud" />
        <column table="us_sud" column="kod_parent" as="kod_parent" />
        <column table="us_sud" column="name" title="Судебный участок" as="name" />
      </select>
      <from>
        <query name="us_sud" as="us_sud" title="Суд / судебный участок" />
      </from>
      <order>
        <column column="name" />
        <column column="kod_sud" />
      </order>
    </query>
    <query name="us_zased_sud" title="Судьи" order="fio, kod_zased" class="1" timestamp="13.09.2023 12:50:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_zased.xml" haskeys="1">
      <select>
        <column table="us_zased" column="kod_zased" key="1" as="kod_zased" />
        <column table="us_zased" column="fio" title="Судья" vid="1" as="fio" />
        <column table="us_sud" column="name" as="sud_name" title="Судебный участок" vid="1" />
      </select>
      <from>
        <query name="us_zased" as="us_zased" />
        <query name="us_sud" as="us_sud" join="inner" dname="us_zased_sud" title="Суд / судебный участок">
          <call function="=">
            <column table="us_sud" column="kod_sud" />
            <column table="us_zased" column="kod_sud" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="us_zased" column="kod_ssp" />
        </call>
      </where>
      <order>
        <column column="fio" />
        <column column="kod_zased" />
      </order>
    </query>
    <query name="us_zased_ssp" title="Судебные приставы" order="fio, kod_zased" class="1" timestamp="13.09.2023 14:35:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_zased.xml" haskeys="1">
      <select>
        <column table="us_zased" column="kod_zased" key="1" as="kod_zased" />
        <column table="us_zased" column="fio" title="Суд. пристав" vid="1" as="fio" />
        <column table="us_ssp" column="name" as="ssp_name" title="Служба суд. приставов" vid="1" />
      </select>
      <from>
        <query name="us_zased" as="us_zased" />
        <query name="us_ssp" as="us_ssp" join="inner" dname="us_zased_ssp" title="Подразделение судебных приставов">
          <call function="=">
            <column table="us_ssp" column="kod_ssp" />
            <column table="us_zased" column="kod_ssp" />
          </call>
        </query>
      </from>
      <order>
        <column column="fio" />
        <column column="kod_zased" />
      </order>
    </query>
    <query name="us_zased_org" order="pr_active DESC, fio, kod_zased" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_zased.xml" haskeys="1">
      <params>
        <param name="kod_sdp" type="number" />
        <param type="number" name="kod_sud" />
        <param type="number" name="kod_ssp" />
      </params>
      <select>
        <column table="a" column="kod_zased" key="1" as="kod_zased" />
        <column table="a" column="kod_ssp" as="kod_ssp" />
        <column table="a" column="pr_active" as="pr_active" />
        <column table="a" column="fio" title="Судья" as="fio" />
        <column table="us_sud" column="name" as="sud_name" title="Судебный участок" />
        <call function="decode" type="string" as="status" title="Статус">
          <column table="a" column="pr_active" />
          <const>1</const>
          <const>'Дейст.'</const>
          <const>0</const>
          <const>'Увол.'</const>
        </call>
      </select>
      <from>
        <query name="us_zased" as="a">
          <link name="kod_sud" as="us_sud" table="us_sud" child="us_zased" field="kod_sud" parent="us_sud" back="us_zased" title="Суд / судебный участок" />
        </query>
      </from>
      <where>
        <call function="or">
          <call function="and">
            <call function="=">
              <useparam name="kod_sdp" />
              <const>6</const>
            </call>
            <call function="is not null">
              <column table="a" column="kod_sud" />
            </call>
            <call function="or" optional="1">
              <call function="in">
                <column table="a" column="kod_sud" />
                <query>
                  <select>
                    <column table="s" column="kod_sud" as="kod_sud" />
                  </select>
                  <from>
                    <query name="us_sud" as="s" title="Суд / судебный участок" />
                  </from>
                  <start>
                    <call function="=">
                      <column table="s" column="kod_sud" />
                      <useparam name="kod_sud" />
                    </call>
                  </start>
                  <connect>
                    <call function="=">
                      <column table="s" column="kod_sud" prior="1" />
                      <column table="s" column="kod_parent" />
                    </call>
                  </connect>
                </query>
              </call>
              <call function="is null">
                <useparam name="kod_sud" />
              </call>
            </call>
          </call>
          <!--добавить условие для ssp-->
        </call>
      </where>
      <order>
        <column column="pr_activeDESC" />
        <column column="fio" />
        <column column="kod_zased" />
      </order>
    </query>
    <query name="us_zased_by_ssp" order="fio" class="1" timestamp="22.06.2016 21:13:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_zased.xml" haskeys="1">
      <params>
        <param type="number" name="kod_ssp" />
      </params>
      <select>
        <column table="a" column="kod_zased" as="kod_zased" key="1" />
        <column table="a" column="fio" title="Судья" as="fio" key="0" />
      </select>
      <from>
        <query name="us_zased" as="a">
          <link name="kod_ssp" as="kod_ssp" table="us_ssp" child="us_zased" field="kod_ssp" parent="us_ssp" back="us_zased" title="Подразделение судебных приставов" />
        </query>
      </from>
      <where>
        <call function="=">
          <column table="kod_ssp" column="kod_ssp" />
          <useparam name="kod_ssp" />
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="us_zased_bnk" order="fio" class="1" timestamp="24.09.2018 15:12:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_zased.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zased" as="kod_zased" key="1" />
        <column table="a" column="kod_ssp" as="kod_ssp" key="0" />
        <column table="a" column="fio" title="Судья" as="fio" key="0" />
        <column table="us_sud" column="name" as="sud_name" title="Судебный участок" key="0" />
      </select>
      <from>
        <query name="us_zased" as="a">
          <link name="kod_sud" as="us_sud" table="us_sud" child="us_zased" field="kod_sud" parent="us_sud" back="us_zased" title="Суд / судебный участок" />
        </query>
      </from>
      <where>
        <call function="or">
          <call function="and">
            <call function="is null">
              <column table="a" column="kod_ssp" />
            </call>
            <call function="is not null">
              <column table="a" column="kod_sud" />
            </call>
          </call>
          <!--добавить условие для ssp-->
        </call>
      </where>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="vv_day_mor_in" timestamp="06.02.2017 14:52:35" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\vv_day_mor.xml" haskeys="1">
      <select>
        <column table="a" column="dat_day" key="1" as="dat_day" />
      </select>
      <from>
        <query name="vv_day" as="a" />
      </from>
    </query>
    <query name="vv_day_mor_out" timestamp="07.02.2017 16:41:02" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\vv_day_mor.xml" haskeys="1">
      <select>
        <column table="a" column="dat_day" key="1" as="dat_day" />
      </select>
      <from>
        <query name="vv_day" as="a" />
      </from>
    </query>
    <query name="sr_facvip_rec_info_m" class="1" timestamp="08.06.2017 12:03:03" intrval="FREQ=HOURLY; INTERVAL=1" stored="vv_sr_facvip_rec_info_m" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\vv_sr_facvip_rec_info_m.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" index="1" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="kod_sf_old_neg" type="number" index="1" as="kod_sf_old_neg" key="0" />
      </select>
      <from>
        <table name="sr_facvip_rec_info_m" as="a" view="1" />
      </from>
    </query>
    <query name="adr_m" class="1" title="Административно территориальная единица" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\adr_m.xml" haskeys="1">
      <select>
        <column table="a" column="kod_m" type="number" as="kod_m" key="1" fixed="1" />
        <column table="a" column="okato" type="string" title="" comment="атавизм  для связи с окато" as="okato" key="0" />
        <column table="a" column="name_p" type="string" comment="полное наименование" title="Административно-территориальная единица" as="name_p" key="0" />
        <column table="a" column="name_s" type="string" title="" comment="сокращенное наименование" as="name_s" key="0" />
        <column table="a" column="name_mp" type="string" title="" comment="атавизм" as="name_mp" key="0" />
        <column table="a" column="name_ms" type="string" title="" comment="атавизм" as="name_ms" key="0" />
        <column table="a" column="ur" type="number" title="" comment="код типа мп из тбл. kk_tnp новый" as="ur" reference="kk_tnp" refcol="kod_tnp" key="0" />
        <column table="a" column="tp" type="number" title="" comment="атавизм" as="tp" key="0" />
        <column table="a" column="k_npw" type="number" title="" comment="код родителя" as="k_npw" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="np" type="number" title="" comment="0 - нет улиц; 1- нет районов; 2- улица в n районах" as="np" key="0" />
        <column table="a" column="t_np" type="number" title="" comment="оставлен для приемнственности" as="t_np" key="0" />
        <column table="a" column="kodar" type="number" title="" comment="код региона старый" as="kodar" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата модификации" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="пользователь" as="u_m" key="0" />
        <column table="a" column="checked" type="number" title="" as="checked" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="adr_m" as="a" title="Административно территориальная единица" />
        <query name="adr_m" as="k_npw" join="left outer" dname="adr_m" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="k_npw" />
            <column table="k_npw" column="kod_m" />
          </call>
        </query>
        <query name="kk_tnp" as="ur" join="left outer" dname="adr_m">
          <call function="=">
            <column table="a" column="ur" />
            <column table="ur" column="kod_tnp" />
          </call>
        </query>
      </from>
    </query>
    <query name="adr_m_by_esys" class="1" title="Административно территориальная единица" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\adr_m_by_esys.xml" haskeys="1">
      <select>
        <column table="a" column="kod_m" type="number" as="kod_m" key="1" fixed="1" />
        <column table="a" column="okato" type="string" title="" comment="атавизм  для связи с окато" as="okato" key="0" />
        <column table="a" column="name_p" type="string" comment="полное наименование" title="Административно-территориальная единица" as="name_p" key="0" />
        <column table="a" column="name_s" type="string" title="" comment="сокращенное наименование" as="name_s" key="0" />
        <column table="a" column="name_mp" type="string" title="" comment="атавизм" as="name_mp" key="0" />
        <column table="a" column="name_ms" type="string" title="" comment="атавизм" as="name_ms" key="0" />
        <column table="a" column="ur" type="number" title="" comment="код типа мп из тбл. kk_tnp новый" as="ur" reference="kk_tnp" refcol="kod_tnp" key="0" />
        <column table="a" column="tp" type="number" title="" comment="атавизм" as="tp" key="0" />
        <column table="a" column="k_npw" type="number" title="" comment="код родителя" as="k_npw" reference="adr_m_by_esys" refcol="kod_m" key="0" />
        <column table="a" column="np" type="number" title="" comment="0 - нет улиц; 1- нет районов; 2- улица в n районах" as="np" key="0" />
        <column table="a" column="t_np" type="number" title="" comment="оставлен для приемнственности" as="t_np" key="0" />
        <column table="a" column="kodar" type="number" title="" comment="код региона старый" as="kodar" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата модификации" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="пользователь" as="u_m" key="0" />
        <column table="a" column="checked" type="number" title="" as="checked" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="adr_m_by_esys" as="a" title="Административно территориальная единица" />
        <query name="adr_m_by_esys" as="k_npw" join="left outer" dname="adr_m_by_esys" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="k_npw" />
            <column table="k_npw" column="kod_m" />
          </call>
        </query>
        <query name="kk_tnp" as="ur" join="left outer" dname="adr_m_by_esys">
          <call function="=">
            <column table="a" column="ur" />
            <column table="ur" column="kod_tnp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ag_istfin" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ag_istfin.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ist" type="number" as="kod_ist" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="p3" type="number" title="Бюджет" as="p3" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ag_istfin" as="a"></table>
      </from>
    </query>
    <query name="ag_ministry" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ag_ministry.xml" haskeys="1">
      <select>
        <column table="a" column="kod_m" type="number" as="kod_m" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="p4" type="number" title="Категория" as="p4" key="0"></column>
        <column table="a" column="p4new" type="number" title="" as="p4new" key="0"></column>
        <column table="a" column="p4_fed" type="number" title="" as="p4_fed" key="0"></column>
        <column table="a" column="p4_mest" type="number" title="" as="p4_mest" key="0"></column>
        <column table="a" column="p4_old" type="number" title="" as="p4_old" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ag_ministry" as="a"></table>
      </from>
    </query>
    <query name="ag_okonh" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ag_okonh.xml" haskeys="1">
      <select>
        <column table="a" column="okonh" type="string" title="" as="okonh" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="p1" type="number" title="Группа" as="p1" key="0" />
        <column table="a" column="p2" type="number" title="Подгруппа" as="p2" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ag_okonh" as="a" />
      </from>
    </query>
    <query name="ail_tippu" class="1" timestamp="22.03.2017 13:02:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ail_tippu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ktippu" type="number" title="Код типа" as="kod_ktippu" />
        <column table="a" column="kod_namekpu" type="number" title="Код наименования типа" as="kod_namekpu" />
        <column table="a" column="nametype" type="string" title="Наименование типа" as="nametype" />
        <column table="a" column="fazn" type="number" title="Количество фаз" as="fazn" />
        <column table="a" column="kod_system" type="number" title="Код принципа измерения" as="kod_system" />
        <column table="a" column="izm" type="string" title="Принцип измерения" as="izm" />
        <column table="a" column="inom" type="string" title="Номинальные токи типа" as="inom" />
        <column table="a" column="unom" type="string" title="Номинальное напряжение типа" as="unom" />
        <column table="a" column="kod_pktippu" type="number" title="Код модели" key="1" as="kod_pktippu" />
        <column table="a" column="kod_namepkpu" type="number" title="Код наименования модели" as="kod_namepkpu" />
        <column table="a" column="name_pk" type="string" title="Наименование модели" as="name_pk" />
        <column table="a" column="class_t" type="string" title="Класс точности по Акт. энергии" as="class_t" />
        <column table="a" column="class_t_r" type="string" title="Класс точности по реактивной энергии" as="class_t_r" />
        <column table="a" column="mpi" type="number" title="МПИ лет" as="mpi" />
        <column table="a" column="gost_sk" type="string" title="Номера гост ТУ модели" as="gost_sk" />
        <column table="a" column="reestr_sk" type="string" title="Номера госреестра модели" as="reestr_sk" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ail_tippu" as="a" />
      </from>
    </query>
    <query name="ar_point" class="1" timestamp="04.10.2021 12:20:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ar_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" key-dimension="kod_ar_point" column-mandatory="1" as="kod_point" key="1" fixed="1" />
        <column table="a" column="kind_en" type="string" title="" comment="измеряемый вид энергии" column-mandatory="1" data-size="1" as="kind_en" key="0" />
        <column table="a" column="direct_en" type="string" title="" comment="измеряемое направление энергии" column-mandatory="1" data-size="1" as="direct_en" key="0" />
        <column table="a" column="kod_num" type="number" comment="код точки учета" column-mandatory="1" as="kod_num" reference="nr_priem" refcol="kod_priem" key="0" />
        <column table="a" column="kod_outeris" type="number" comment="код внешней ис" column-mandatory="1" as="kod_outeris" reference="ak_outeris" refcol="kod_outeris" key="0" />
        <column table="a" column="kod_pr_kind" type="number" comment="код вида присоединения" column-mandatory="1" as="kod_pr_kind" reference="ak_pr_kind" refcol="kod_pr_kind" key="0" />
        <column table="a" column="info" type="string" title="" comment="порция информации" data-size="12" as="info" key="0" />
        <column table="a" column="pr_ul_fl" type="number" title="" comment="признак юл-фл" column-mandatory="1" as="pr_ul_fl" key="0" />
        <column table="a" column="name_es" type="string" title="" comment="наименование отделения энергосбыта" column-mandatory="1" data-size="150" as="name_es" key="0" />
        <column table="a" column="name_uch_es" type="string" title="" comment="наименование участка (рпу) энергосбыта" data-size="150" as="name_uch_es" key="0" />
        <column table="a" column="name_fsk" type="string" title="" comment="наименование филиала оао &quot;ск&quot;" column-mandatory="1" data-size="150" as="name_fsk" key="0" />
        <column table="a" column="name_rsk" type="string" title="" comment="наименование рэс филиала оао &quot;ск&quot;" column-mandatory="1" data-size="150" as="name_rsk" key="0" />
        <column table="a" column="src_kodeo" type="number" title="" comment="уникальный код энергообъекта ( тэц или пс) -источника питания по классификатору асусэ" as="src_kodeo" key="0" />
        <column table="a" column="src_nameeo" type="string" title="" comment="название энергообъекта ( тэц или пс) по классификатору асусэ" column-mandatory="1" data-size="200" as="src_nameeo" key="0" />
        <column table="a" column="src_kodfider" type="number" title="" comment="уникальный код энергообъекта -питающего фидера источника питания по классификатору асусэ" as="src_kodfider" key="0" />
        <column table="a" column="src_namefider" type="string" title="" comment="название питающего фидера источника питания по классификатору асусэ" column-mandatory="1" data-size="200" as="src_namefider" key="0" />
        <column table="a" column="place_kodfider" type="number" title="" comment="место присоединения точки к сети (ру,ячейка,линия,фидер) - код энергообъекта" as="place_kodfider" key="0" />
        <column table="a" column="place_namefider" type="string" title="" comment="место присоединения точки к сети (ру,ячейка,линия,фидер) - наименование энергообъекта" data-size="100" as="place_namefider" key="0" />
        <column table="a" column="place_kodeo" type="number" title="" comment="место присоединения точки к сети ( пс,рп,тп)- код энергообъекта" as="place_kodeo" key="0" />
        <column table="a" column="place_nameeo" type="string" title="" comment="место присоединения точки к сети (пс,рп,тп) - наименование энергообъекта" column-mandatory="1" data-size="200" as="place_nameeo" key="0" />
        <column table="a" column="dog_num" type="string" title="" comment="номер договора энергоснабжения" data-size="50" as="dog_num" key="0" />
        <column table="a" column="user_name" type="string" title="" comment="наименование потребителя" column-mandatory="1" data-size="255" as="user_name" key="0" />
        <column table="a" column="eobj_num" type="string" title="" comment="номер объекта энергоснабжения" data-size="20" as="eobj_num" key="0" />
        <column table="a" column="eobj_name" type="string" title="" comment="наименование объекта энергоснабжения" data-size="200" as="eobj_name" key="0" />
        <column table="a" column="pnum" type="number" title="" comment="номер точки в объекте энергоснабжения" column-mandatory="1" as="pnum" key="0" />
        <column table="a" column="cnt_num" type="string" title="" comment="номер счетчика" data-size="20" as="cnt_num" key="0" />
        <column table="a" column="pname" type="string" title="" comment="наименование точки учета" column-mandatory="1" data-size="210" as="pname" key="0" />
        <column table="a" column="cnt_type" type="string" title="" comment="тип счетчика" data-size="100" as="cnt_type" key="0" />
        <column table="a" column="cnt_rkoef" type="number" title="" comment="расчетный коэффициент счетчика" as="cnt_rkoef" key="0" />
        <column table="a" column="r_pwrlev" type="string" title="" comment="расчетный уровень напряжения ( по тарифу договора энергоснабжения в точке учета)" data-size="5" as="r_pwrlev" key="0" />
        <column table="a" column="pr_mkd" type="string" title="" comment="признак &quot;мкд&quot;" data-size="3" as="pr_mkd" key="0" />
        <column table="a" column="pr_rasch" type="number" title="" comment="признак &quot;прямые расчеты с энергосбытом&quot;" as="pr_rasch" key="0" />
        <column table="a" column="kod_sech" type="number" comment="код сечения" as="kod_sech" key="0" />
        <column table="a" column="kodinterval" type="number" title="" comment="код периода" column-mandatory="1" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <column table="a" column="kind_read" type="number" title="" comment="вид съема показаний ( аскуэ или нет)" as="kind_read" key="0" />
        <column table="a" column="pr_bal" type="string" title="" comment="балансовая принадлежность  присоединения  - наименование юридического лица" data-size="150" as="pr_bal" key="0" />
        <column table="a" column="pwr_lev" type="number" title="" comment="представлен значениями напряжений (кв). например, 0.4,10, 35, 110 …" as="pwr_lev" key="0" />
        <column table="a" column="type_ttr" type="string" title="" comment="обязательно к заполнению при наличии трансформатора в точке." data-size="100" as="type_ttr" key="0" />
        <column table="a" column="type_ntr" type="string" title="" comment="обязательно к заполнению при наличии трансформатора в точке." data-size="100" as="type_ntr" key="0" />
        <column table="a" column="status" type="number" title="" comment="статус" column-mandatory="1" as="status" key="0" />
        <column table="a" column="rpower" type="number" title="" comment="разрешенная мощность" as="rpower" key="0" />
        <column table="a" column="declare_power" type="number" title="" comment="заявленная мощность" as="declare_power" key="0" />
        <column table="a" column="pris_power" type="number" title="" comment="присоединенная мощность" as="pris_power" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код договора энергоснабжения" as="kod_dog" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код потребителя" as="kodp" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта договора" as="kod_numobj" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта энергоснабжения" as="kod_obj" key="0" />
        <column table="a" column="kod_rpoint" type="number" comment="код реальной (r) точки внешней системы" as="kod_rpoint" key="0" />
        <column table="a" column="gener" type="number" title="" comment="пр &quot;отпуск с шин&quot;" column-mandatory="1" as="gener" key="0" />
        <column table="a" column="kod_net" type="number" comment="код сетей к которым присоединен потреб или со" as="kod_net" reference="hg_controlpoint_net_pl_getorgs" refcol="kodp" key="0" />
        <column table="a" column="name_net" type="string" title="" comment="наименование сетей, к которым присоединен потреб (со)" fact="ar_point_name_net" agg="max" data-size="200" as="name_net" key="0" />
        <column table="a" column="name_consgr" type="string" title="" comment="наимен группы потребителей" data-size="100" as="name_consgr" key="0" />
        <column table="a" column="kod_rsk" type="number" comment="код района сетей ск" as="kod_rsk" reference="hg_controlpoint_net_pl_getrsk" refcol="kodp" key="0" />
        <column table="a" column="kod_es" type="number" comment="код отделения энергосбыта" as="kod_es" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="potery" type="number" title="" comment="потери, квт*ч" as="potery" key="0" />
        <column table="a" column="outcounter" type="number" title="" comment="расход по счетчику, квтч" as="outcounter" key="0" />
        <column table="a" column="readprev" type="number" title="" comment="предыдущие показания. квтч" as="readprev" key="0" />
        <column table="a" column="readlast" type="number" title="" comment="текущие показания. квтч" as="readlast" key="0" />
        <column table="a" column="outadd" type="number" title="" comment="дополнительный расход, квтч" as="outadd" key="0" />
        <column table="a" column="out" type="number" title="" comment="итоговый расход по ту, квтч" as="out" key="0" />
        <column table="a" column="calctype" type="number" title="" as="calctype" key="0" />
        <column table="a" column="kod_fsk" type="number" comment="код филиала ск" as="kod_fsk" key="0" />
        <column table="a" column="schema_pit" type="string" title="" comment="схема питания" data-size="300" as="schema_pit" key="0" />
        <column table="a" column="cust" type="number" title="" comment="количество, квт*ч" fact="ar_point_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="tpoint_abbr" type="string" title="" comment="тип точки" data-size="3" as="tpoint_abbr" key="0" />
        <column table="a" column="gen_ul_fl" type="number" title="" comment="общая точка юл-фл" column-mandatory="1" as="gen_ul_fl" key="0" />
        <column table="a" column="gen_ul_bal" type="number" title="" comment="общая точка юл-балансы" column-mandatory="1" as="gen_ul_bal" key="0" />
        <column table="a" column="place_bal_id" type="number" title="" comment="баланс места установки точки" as="place_bal_id" key="0" />
        <column table="a" column="vid_t" type="number" title="" comment="вид начисления" as="vid_t" key="0" />
        <column table="a" column="kod_consgr" type="number" comment="код группы потребителей" as="kod_consgr" key="0" />
        <column table="a" column="place_bal_name" type="string" title="" comment="наим.баланса места установки точки" data-size="400" as="place_bal_name" key="0" />
        <column table="a" column="dep" type="number" title="" comment="уровень доступа(отделение)" as="dep" key="0" />
        <column table="a" column="kod_gdirecten" type="number" comment="код направления измеряемой энергии относительно сечения (границы). см. hk_directen.gname" column-mandatory="1" as="kod_gdirecten" key="0" />
        <column table="a" column="potery_prc" type="number" title="" comment="величина потерь в %" as="potery_prc" key="0" />
        <column table="a" column="cnt_bal" type="string" title="" comment="балансовая принадлежность пу" data-size="30" as="cnt_bal" key="0" />
        <column table="a" column="i1" type="string" title="" comment="трансформация тт" data-size="100" as="i1" key="0" />
        <column table="a" column="i2" type="string" title="" comment="трансформация тт" data-size="100" as="i2" key="0" />
        <column table="a" column="u1" type="string" title="" comment="трансформация тн" data-size="100" as="u1" key="0" />
        <column table="a" column="u2" type="string" title="" comment="трансформация тн" data-size="100" as="u2" key="0" />
        <column table="a" column="eobj_adress" type="string" title="" comment="адрес объекта энергоснабжения" data-size="250" as="eobj_adress" key="0" />
        <column table="a" column="editable" type="number" title="" comment="индикатор возможности редактирования приёмки" column-mandatory="1" as="editable" key="0" />
        <column table="a" column="power" type="number" title="" comment="фактическая мощность по точке, квт" as="power" key="0" />
        <column table="a" column="kod_pwrcompany" type="number" comment="код организации, от сетей которой (непосредственно, опосредовано)осуществляется питание потребителя" as="kod_pwrcompany" reference="hg_controlpoint_net_pl_getorgs2" refcol="kodp" key="0" />
        <column table="a" column="name_pwrcompany" type="string" title="" comment="наименование организации, от сетей которой (непосредственно, опосредовано) осуществляется питание потребителя." data-size="200" as="name_pwrcompany" key="0" />
        <column table="a" column="price_category" type="number" title="" comment="Ценовая категория" as="price_category" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="Код тарифа" as="tarif" key="0" />
        <column table="a" column="sname_tarif" type="string" title="" comment="Примененный тариф наим" data-size="100" as="sname_tarif" key="0" />
        <column table="a" column="kod_vdog" type="number" comment="Код вида договора" as="kod_vdog" key="0" />
        <column table="a" column="name_vdog" type="string" title="" comment="Наим вида договора" data-size="100" as="name_vdog" key="0" />
        <column table="a" column="unit" type="string" title="" comment="Ед.изм." data-size="10" as="unit" key="0" />
        <column table="a" column="kod_f46" type="number" comment="Код ф46" as="kod_f46" key="0" />
        <column table="a" column="name_f46" type="string" title="" comment="Наим ф46" data-size="200" as="name_f46" key="0" />
        <column table="a" column="point_kod_v" type="number" comment="код напряжения в ТУ" as="point_kod_v" key="0" />
        <column table="a" column="point_nv" type="number" title="" comment="напряжение в ТУ" as="point_nv" key="0" />
        <column table="a" column="kod_calclev" type="number" comment="Код уровня расчета" column-mandatory="1" as="kod_calclev" key="0" />
        <column table="a" column="name_calclev" type="string" title="" comment="Уровень расчета" data-size="20" as="name_calclev" key="0" />
        <column table="a" column="kod_account" type="number" as="kod_account" key="0" />
        <column table="a" column="kod_tipdog2" type="number" comment="KS_VDOG.KOD_TIPDOG2" as="kod_tipdog2" key="0" />
        <column table="a" column="is_powersupply" type="number" column-mandatory="1" title="" comment="Полезный отпуск" as="is_powersupply" key="0" />
        <column table="a" column="datagroup1" type="number" column-mandatory="1" title="" comment="Группа данных 1:0-осн.объем ЭЭ,1-безучетн.потребл." as="datagroup1" key="0" />
        <column table="a" column="cnt_checkdate" type="date" title="" comment="Дата проверки Счетчика" as="cnt_checkdate" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ar_point" as="a" />
        <query name="ak_outeris" as="kod_outeris" join="left outer" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_outeris" />
            <column table="kod_outeris" column="kod_outeris" />
          </call>
        </query>
        <query name="ak_pr_kind" as="kod_pr_kind" join="left outer" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_pr_kind" />
            <column table="kod_pr_kind" column="kod_pr_kind" />
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="ar_point">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
        <query name="nr_priem" as="kod_priem" join="left outer" dimension="kod_priem" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_num" />
            <column table="kod_priem" column="kod_priem" />
          </call>
        </query>
        <query name="hg_controlpoint_net_pl_getrsk" as="kod_rsk" join="left outer" dimension="kod_priem" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_rsk" />
            <column table="kod_rsk" column="kodp" />
          </call>
        </query>
        <query name="hg_controlpoint_net_pl_getorgs" as="kod_net" join="left outer" dimension="kod_priem" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_net" />
            <column table="kod_net" column="kodp" />
          </call>
        </query>
        <query name="hg_controlpoint_net_pl_getorgs2" as="kod_pwrcompany" join="left outer" dimension="1" dname="ar_point">
          <call function="=">
            <column table="a" column="kod_pwrcompany" />
            <column table="kod_pwrcompany" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_adr_map_f" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\asuse.kr_adr_map_f.xml" haskeys="1">
      <select>
        <call function="rowid" as="kr_adr_map_f_id" key="1" />
        <column table="a" column="kod_asuse" type="number" column-mandatory="1" comment="Код адресного объекта АСУСЭ" as="kod_asuse" />
        <column table="a" column="kind" type="number" column-mandatory="1" title="" comment="Тип адресного объекта: 1-НП, 2-улица, 3-дом" as="kind" />
        <column table="a" column="aoguid" type="raw" title="" comment="GUID адресного объекта ФИАС" as="aoguid" />
        <column table="a" column="recid" type="raw" title="" as="recid" />
        <column table="a" column="status" type="number" title="" comment="Статус сопоставления: 1 - автоматич., 4 - руками, 5 - импорт из ФИАС" as="status" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" />
        <column table="a" column="lat" type="string" data-size="30" title="" comment="Широта" as="lat" />
        <column table="a" column="lon" type="string" data-size="30" title="" comment="Долгота" as="lon" />
        <column table="a" column="geopoint" type="string" data-size="52" title="" comment="Геокод" as="geopoint" />
        <column table="a" column="guid" type="string" data-size="36" title="" comment="GUID адресного объекта ФИАС в формате ФНС" as="guid" />
        <column table="a" column="fl_diff" type="number" column-mandatory="1" title="" comment="Признак отличий в данных связанного с ФИАС дома в соответствии с перечнем в RS_ESYS.house_attr_for_edit" as="fl_diff" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_adr_map_f" as="a" />
      </from>
    </query>
    <query name="br_oto_nach" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\br_oto_nach.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0"></column>
        <column table="a" column="prim_dog" type="string" title="" comment="примечание филиала(договорная работа)" as="prim_dog" key="0"></column>
        <column table="a" column="remark_dog" type="string" title="" comment="замечания к абоненту(договорная работа)" as="remark_dog" key="0"></column>
        <column table="a" column="flag_dog" type="number" title="" comment="замечания отсутствуют(договорная работа)" as="flag_dog" key="0"></column>
        <column table="a" column="nach_dopsch" type="number" title="" comment="начислено абоненту по дополнительным счетам(реализация т/э)" as="nach_dopsch" key="0"></column>
        <column table="a" column="opl_dopsch" type="number" title="" comment="оплата по дополнительным счетам(реализация т/э)" as="opl_dopsch" key="0"></column>
        <column table="a" column="prim_real" type="string" title="" comment="примечание филиала(реализация т/э)" as="prim_real" key="0"></column>
        <column table="a" column="remark_real" type="string" title="" comment="замечания к абоненту(реализация т/э)" as="remark_real" key="0"></column>
        <column table="a" column="flag_real" type="number" title="" comment="замечания отсутствуют(реализация т/э)" as="flag_real" key="0"></column>
        <column table="a" column="grafik_zad" type="string" title="" comment="наличие графика погашения задолженности" as="grafik_zad" key="0"></column>
        <column table="a" column="garant_pismo" type="string" title="" comment="предмет гарантийного письма (расчеты с потреб.)" as="garant_pismo" key="0"></column>
        <column table="a" column="garant_isp" type="string" title="" comment="исполнение гарантийного письма (расчеты с потреб.)" as="garant_isp" key="0"></column>
        <column table="a" column="sum_proc" type="number" title="" comment="сумма начисленных процентов за пользование чужими денежными средствами" as="sum_proc" key="0"></column>
        <column table="a" column="opl_proc" type="number" title="" comment="оплата процентов за пользование чужими денежными средствами" as="opl_proc" key="0"></column>
        <column table="a" column="akt_postav" type="string" title="" comment="подписание актов поставки" as="akt_postav" key="0"></column>
        <column table="a" column="akt_sum" type="string" title="" comment="наличие разногласий(сумма,предмет разногласий) в актах сверок" as="akt_sum" key="0"></column>
        <column table="a" column="prim_rasch" type="string" title="" comment="примечание филиала(расчеты с потребителями т/э)" as="prim_rasch" key="0"></column>
        <column table="a" column="remark_rasch" type="string" title="" comment="замечания к абоненту(расчеты с потребителями т/э)" as="remark_rasch" key="0"></column>
        <column table="a" column="u_rasch" type="string" title="" comment="пользователь(расчеты с потребителями т/э)" as="u_rasch" key="0"></column>
        <column table="a" column="d_rasch" type="date" title="" comment="дата,когда была сделана пометка(расчеты с потребителями т/э)" as="d_rasch" key="0"></column>
        <column table="a" column="u_dog" type="string" title="" comment="пользователь(договорная работа)" as="u_dog" key="0"></column>
        <column table="a" column="d_dog" type="date" title="" comment="дата,когда была сделана пометка(договорная работа)" as="d_dog" key="0"></column>
        <column table="a" column="u_real" type="string" title="" comment="пользователь(реализация т/э)" as="u_real" key="0"></column>
        <column table="a" column="d_real" type="date" title="" comment="дата,когда была сделана пометка(реализация т/э)" as="d_real" key="0"></column>
        <column table="a" column="isp_sud_ur" type="string" title="" comment="исполнение решения суда" as="isp_sud_ur" key="0"></column>
        <column table="a" column="zad_osn_ur" type="number" title="" comment="информация о наличии задолженности по основной задолженности" as="zad_osn_ur" key="0"></column>
        <column table="a" column="zad_proc_ur" type="number" title="" comment="----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  -- по процентам за пользование чужими денежными средствами" as="zad_proc_ur" key="0"></column>
        <column table="a" column="zad_gp_ur" type="number" title="" comment="----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  ----  &quot;  -- по госпошлине" as="zad_gp_ur" key="0"></column>
        <column table="a" column="prim_ur" type="string" title="" comment="примечание филиала(юридический блок)" as="prim_ur" key="0"></column>
        <column table="a" column="remark_ur" type="string" title="" comment="замечания к абоненту(юридический блок)" as="remark_ur" key="0"></column>
        <column table="a" column="flag_ur" type="number" title="" comment="замечания отсутствуют(юридический блок)" as="flag_ur" key="0"></column>
        <column table="a" column="u_ur" type="string" title="" comment="пользователь(юридический блок)" as="u_ur" key="0"></column>
        <column table="a" column="d_ur" type="date" title="" comment="дата,когда была сделана пометка(юридический блок)" as="d_ur" key="0"></column>
        <column table="a" column="flag_rasch" type="number" title="" comment="замечания отсутствуют(расчеты с потребителями т/э)" as="flag_rasch" key="0"></column>
        <column table="a" column="flag_akt" type="number" title="" comment="подписание актов сверки" as="flag_akt" key="0"></column>
        <column table="a" column="zatrat_kontrol" type="number" title="" comment="затраты по калькуляции на возобновление подачи тепловой энергии(контроль режимов потребления)" as="zatrat_kontrol" key="0"></column>
        <column table="a" column="opl_kontrol" type="number" title="" comment="оплата по калькуляции на возобновление подачи тепловой энергии(контроль режимов потребления)" as="opl_kontrol" key="0"></column>
        <column table="a" column="prim_kontrol" type="string" title="" comment="примечание филиала(контроль режимов потребления)" as="prim_kontrol" key="0"></column>
        <column table="a" column="flag_garant" type="number" title="" comment="наличие гарантийного письма" as="flag_garant" key="0"></column>
        <column table="a" column="godn" type="number" title="" comment="год начала ос" as="godn" key="0"></column>
        <column table="a" column="godk" type="number" title="" comment="год окончания ос" as="godk" key="0"></column>
        <column table="a" column="u_kontrol" type="string" title="" comment="пользователь (контроль режимов)" as="u_kontrol" key="0"></column>
        <column table="a" column="d_kontrol" type="date" title="" comment="дата отметки (контроль режимов) " as="d_kontrol" key="0"></column>
        <column table="a" column="pu_heat" type="number" title="" comment="наличие пу (отопление) 1/0 - да/нет " as="pu_heat" key="0"></column>
        <column table="a" column="pu_gvs" type="number" title="" comment="наличие пу (гвс) 1/0 - да/нет " as="pu_gvs" key="0"></column>
        <column table="a" column="cutoff" type="date" title="" comment="дата установки глушки, отсечение " as="cutoff" key="0"></column>
        <column table="a" column="remark_kontrol" type="string" title="" comment="замечания к абоненту(контроль режимов ) " as="remark_kontrol" key="0"></column>
        <column table="a" column="flag_kontrol" type="number" title="" comment="замечания отсутствуют(контроль режимов) " as="flag_kontrol" key="0"></column>
        <column table="a" column="garant_pismo_dog" type="string" title="" comment="предмет гарантийного письма (дог. работа)" as="garant_pismo_dog" key="0"></column>
        <column table="a" column="garant_isp_dog" type="string" title="" comment="исполнение гар. письма (дог. работа)" as="garant_isp_dog" key="0"></column>
        <column table="a" column="flag_akt_postav" type="number" title="" comment="подписание актов поставки (в .net)" as="flag_akt_postav" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="br_oto_nach" as="a"></table>
      </from>
    </query>
    <query name="br_oto_obj" class="1" timestamp="07.10.2016 00:56:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\br_oto_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" />
        <column table="a" column="d_zayav" type="date" title="" comment="дата поступления заявки на включение объекта от абонента" as="d_zayav" />
        <column table="a" column="dakt_gotov" type="date" title="" comment="наличие акта готовности(дата)" as="dakt_gotov" />
        <column table="a" column="dakt_go" type="date" title="" comment="наличие акта гидравлической опрессовки" as="dakt_go" />
        <column table="a" column="dakt_gpp" type="date" title="" comment="наличие акта гидропневмопромывки" as="dakt_gpp" />
        <column table="a" column="nn" type="string" title="" comment="номер наряда(заявки)" as="nn" />
        <column table="a" column="dat_n" type="date" title="" comment="дата наряда(заявки)" as="dat_n" />
        <column table="a" column="pusk_tep" type="date" title="" comment="фактическое время и дата отпуска тепла" as="pusk_tep" />
        <column table="a" column="otkl_tep" type="date" title="" comment="фактическое время и дата отключения тепла" as="otkl_tep" />
        <column table="a" column="remark" type="string" title="" comment="замечания по объекту" as="remark" />
        <column table="a" column="flag" type="number" title="" comment="замечания по объекту отсутствуют" as="flag" />
        <column table="a" column="u_m" type="string" title="" comment="пользователь" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="дата,когда была сделана пометка" as="d_m" />
        <column table="a" column="dat_upr" type="date" title="" comment="дата согласования управлением" as="dat_upr" />
        <column table="a" column="dat_dir" type="date" title="" comment="дата согласования заместителем директора" as="dat_dir" />
        <column table="a" column="kod" type="number" title="" as="kod" reference="br_oto_nach" refcol="kod" />
        <column table="a" column="dpassp_gotov" type="date" title="" as="dpassp_gotov" />
        <column table="a" column="nn_off" type="string" title="" as="nn_off" />
        <column table="a" column="dat_n_off" type="date" title="" as="dat_n_off" />
        <column table="a" column="so_plan" type="number" title="" as="so_plan" />
        <column table="a" column="sv_plan" type="number" title="" as="sv_plan" />
        <column table="a" column="st_plan" type="number" title="" as="st_plan" />
        <column table="a" column="gvs_plan" type="number" title="" as="gvs_plan" />
        <column table="a" column="action_point" type="string" title="" as="action_point" />
        <call function="rowid" as="br_oto_obj_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="(select * from br_oto_obj oc  union select * from br_oto_obj_arc oa)" as="a" comment="лень" />
        <query name="br_oto_nach" as="kod" join="left outer" dname="br_oto_obj">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="br_oto_obj">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
      </from>
    </query>
    <query name="br_oto_order" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\br_oto_order.xml" haskeys="1">
      <select>
        <call function="rowid" as="br_oto_order_id" key="1" />
        <column table="a" column="on_off" type="number" title="" comment="тип: 0 - на откл.; 1 - на вкл." as="on_off" />
        <column table="a" column="ordnum" type="string" data-size="10" title="" comment="номер наряда" as="ordnum" />
        <column table="a" column="orddat" type="date" title="" comment="дата наряда" as="orddat" />
        <column table="a" column="kod_numobj" type="number" column-mandatory="1" comment="вн. ключ на объект BR_OTO_OBJ" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" />
        <column table="a" column="kod" type="number" column-mandatory="1" title="" comment="вн. ключ на договор BR_OTO_NACH для привязки к сезону" as="kod" reference="br_oto_nach" refcol="kod" />
        <column table="a" column="u_m" type="string" data-size="20" title="" comment="user" as="u_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="br_oto_order" as="a" />
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="br_oto_order">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="br_oto_nach" as="kod" join="left outer" dname="br_oto_order">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="br_oto_tu" class="1" timestamp="07.12.2020 13:46:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\br_oto_tu.xml" haskeys="1">
      <select>
        <call function="rowid" as="br_oto_tu_id" key="1" />
        <column table="a" column="kod_point_rasx" type="number" comment="FK на dr_point_rasx - не используется, см. kod_point" as="kod_point_rasx" />
        <column table="a" column="kod_numobj" type="number" comment="FK на kr_numobj" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" />
        <column table="a" column="remark" type="string" data-size="256" title="" comment="Замечания к ТУ" as="remark" />
        <column table="a" column="d_zayav" type="date" title="" comment="Дата поступления заявки на включение" as="d_zayav" />
        <column table="a" column="so_plan" type="number" title="" comment="Нагрузка по ТУ план. Вкл./Откл. (Гкал/ч), СО " as="so_plan" />
        <column table="a" column="st_plan" type="number" title="" comment="Нагрузка по ТУ план. Вкл./Откл. (Гкал/ч), СТ" as="st_plan" />
        <column table="a" column="sv_plan" type="number" title="" comment="Нагрузка по ТУ план. Вкл./Откл. (Гкал/ч), СВ" as="sv_plan" />
        <column table="a" column="gv_plan" type="number" title="" comment="Нагрузка по ТУ план. Вкл./Откл. (Гкал/ч), ГВС" as="gv_plan" />
        <column table="a" column="pusk_tep" type="date" title="" comment="Фактическая дата включения" as="pusk_tep" />
        <column table="a" column="pr_samovol" type="number" title="" comment="Самовольное вкл." as="pr_samovol" />
        <column table="a" column="otkl_tep" type="date" title="" comment="Фактическая дата отключения" as="otkl_tep" />
        <column table="a" column="pu" type="number" title="" comment="Наличие ПУ" as="pu" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="kod_point" type="number" comment="FK на dr_point" as="kod_point" reference="dr_point" refcol="kod_point" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="br_oto_tu" as="a" />
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="br_oto_tu">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="dr_point_rasx" as="kod_point_rasx" join="left outer" dname="br_oto_tu">
          <call function="=">
            <column table="a" column="kod_point_rasx" />
            <column table="kod_point_rasx" column="kod_point_rasx" />
          </call>
        </query>
        <query name="dr_point" as="kod_point" join="left outer" dname="br_oto_tu">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="c_rab_tmp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\c_rab_tmp.xml" haskeys="1">
      <select>
        <column table="a" column="polzov" type="string" title="" as="polzov"></column>
        <column table="a" column="n1" type="number" title="" as="n1"></column>
        <column table="a" column="n2" type="number" title="" as="n2"></column>
        <column table="a" column="n3" type="number" title="" as="n3"></column>
        <column table="a" column="n4" type="number" title="" as="n4"></column>
        <column table="a" column="n5" type="number" title="" as="n5"></column>
        <column table="a" column="n6" type="number" title="" as="n6"></column>
        <column table="a" column="n7" type="number" title="" as="n7"></column>
        <column table="a" column="n8" type="number" title="" as="n8"></column>
        <column table="a" column="n9" type="number" title="" as="n9"></column>
        <column table="a" column="n10" type="number" title="" as="n10"></column>
        <column table="a" column="n11" type="number" title="" as="n11"></column>
        <column table="a" column="n12" type="number" title="" as="n12"></column>
        <column table="a" column="n13" type="number" title="" as="n13"></column>
        <column table="a" column="n14" type="number" title="" as="n14"></column>
        <column table="a" column="n15" type="number" title="" as="n15"></column>
        <column table="a" column="n16" type="number" title="" as="n16"></column>
        <column table="a" column="n17" type="number" title="" as="n17"></column>
        <column table="a" column="n18" type="number" title="" as="n18"></column>
        <column table="a" column="n19" type="number" title="" as="n19"></column>
        <column table="a" column="n20" type="number" title="" as="n20"></column>
        <column table="a" column="n21" type="number" title="" as="n21"></column>
        <column table="a" column="n22" type="number" title="" as="n22"></column>
        <column table="a" column="n23" type="number" title="" as="n23"></column>
        <column table="a" column="n24" type="number" title="" as="n24"></column>
        <column table="a" column="n25" type="number" title="" as="n25"></column>
        <column table="a" column="s1" type="string" title="" as="s1"></column>
        <column table="a" column="s2" type="string" title="" as="s2"></column>
        <column table="a" column="s3" type="string" title="" as="s3"></column>
        <column table="a" column="s4" type="string" title="" as="s4"></column>
        <column table="a" column="s5" type="string" title="" as="s5"></column>
        <column table="a" column="d1" type="date" title="" as="d1"></column>
        <column table="a" column="d2" type="date" title="" as="d2"></column>
        <column table="a" column="d3" type="date" title="" as="d3"></column>
        <column table="a" column="l1" type="string" title="" as="l1"></column>
        <column table="a" column="l2" type="string" title="" as="l2"></column>
        <column table="a" column="mes" type="number" title="" as="mes"></column>
        <column table="a" column="god" type="number" title="" as="god"></column>
        <column table="a" column="s6" type="string" title="" as="s6"></column>
        <column table="a" column="s7" type="string" title="" as="s7"></column>
        <column table="a" column="s8" type="string" title="" as="s8"></column>
        <column table="a" column="s9" type="string" title="" as="s9"></column>
        <column table="a" column="s10" type="string" title="" as="s10"></column>
        <column table="a" column="kod" type="number" title="" as="kod"></column>
        <column table="a" column="d4" type="date" title="" as="d4"></column>
        <column table="a" column="d5" type="date" title="" as="d5"></column>
        <column table="a" column="d6" type="date" title="" as="d6"></column>
        <column table="a" column="d7" type="date" title="" as="d7"></column>
        <column table="a" column="d8" type="date" title="" as="d8"></column>
        <column table="a" column="d9" type="date" title="" as="d9"></column>
        <column table="a" column="d10" type="date" title="" as="d10"></column>
        <column table="a" column="s11" type="string" title="" as="s11"></column>
        <column table="a" column="s12" type="string" title="" as="s12"></column>
        <column table="a" column="s13" type="string" title="" as="s13"></column>
        <column table="a" column="s14" type="string" title="" as="s14"></column>
        <column table="a" column="s15" type="string" title="" as="s15"></column>
        <column table="a" column="s16" type="string" title="" as="s16"></column>
        <column table="a" column="s17" type="string" title="" as="s17"></column>
        <column table="a" column="s18" type="string" title="" as="s18"></column>
        <column table="a" column="s19" type="string" title="" as="s19"></column>
        <column table="a" column="s20" type="string" title="" as="s20"></column>
        <column table="a" column="sl1" type="string" title="" as="sl1"></column>
        <column table="a" column="sl2" type="string" title="" as="sl2"></column>
        <column table="a" column="sl3" type="string" title="" as="sl3"></column>
        <column table="a" column="sl4" type="string" title="" as="sl4"></column>
        <column table="a" column="sl5" type="string" title="" as="sl5"></column>
        <column table="a" column="sl6" type="string" title="" as="sl6"></column>
        <column table="a" column="d11" type="date" title="" as="d11"></column>
        <column table="a" column="d12" type="date" title="" as="d12"></column>
        <column table="a" column="d13" type="date" title="" as="d13"></column>
        <column table="a" column="d14" type="date" title="" as="d14"></column>
        <column table="a" column="d15" type="date" title="" as="d15"></column>
        <column table="a" column="d16" type="date" title="" as="d16"></column>
        <column table="a" column="d17" type="date" title="" as="d17"></column>
        <column table="a" column="d18" type="date" title="" as="d18"></column>
        <column table="a" column="d19" type="date" title="" as="d19"></column>
        <column table="a" column="d20" type="date" title="" as="d20"></column>
        <column table="a" column="n26" type="number" title="" as="n26"></column>
        <column table="a" column="n27" type="number" title="" as="n27"></column>
        <column table="a" column="n28" type="number" title="" as="n28"></column>
        <column table="a" column="n29" type="number" title="" as="n29"></column>
        <column table="a" column="n30" type="number" title="" as="n30"></column>
        <column table="a" column="n31" type="number" title="" as="n31"></column>
        <column table="a" column="n32" type="number" title="" as="n32"></column>
        <column table="a" column="n33" type="number" title="" as="n33"></column>
        <column table="a" column="n34" type="number" title="" as="n34"></column>
        <column table="a" column="n35" type="number" title="" as="n35"></column>
        <column table="a" column="n36" type="number" title="" as="n36"></column>
        <column table="a" column="n37" type="number" title="" as="n37"></column>
        <column table="a" column="n38" type="number" title="" as="n38"></column>
        <column table="a" column="n39" type="number" title="" as="n39"></column>
        <column table="a" column="n40" type="number" title="" as="n40"></column>
        <column table="a" column="s21" type="string" title="" as="s21"></column>
        <column table="a" column="s22" type="string" title="" as="s22"></column>
        <column table="a" column="s23" type="string" title="" as="s23"></column>
        <column table="a" column="s24" type="string" title="" as="s24"></column>
        <column table="a" column="s25" type="string" title="" as="s25"></column>
        <column table="a" column="s26" type="string" title="" as="s26"></column>
        <column table="a" column="s27" type="string" title="" as="s27"></column>
        <column table="a" column="s28" type="string" title="" as="s28"></column>
        <column table="a" column="s29" type="string" title="" as="s29"></column>
        <column table="a" column="s30" type="string" title="" as="s30"></column>
        <column table="a" column="s31" type="string" title="" as="s31"></column>
        <column table="a" column="s32" type="string" title="" as="s32"></column>
        <column table="a" column="s33" type="string" title="" as="s33"></column>
        <column table="a" column="s34" type="string" title="" as="s34"></column>
        <column table="a" column="s35" type="string" title="" as="s35"></column>
        <column table="a" column="s36" type="string" title="" as="s36"></column>
        <column table="a" column="s37" type="string" title="" as="s37"></column>
        <column table="a" column="s38" type="string" title="" as="s38"></column>
        <column table="a" column="s39" type="string" title="" as="s39"></column>
        <column table="a" column="s40" type="string" title="" as="s40"></column>
        <column table="a" column="d21" type="date" title="" as="d21"></column>
        <column table="a" column="d22" type="date" title="" as="d22"></column>
        <column table="a" column="d23" type="date" title="" as="d23"></column>
        <column table="a" column="d24" type="date" title="" as="d24"></column>
        <column table="a" column="d25" type="date" title="" as="d25"></column>
        <column table="a" column="d26" type="date" title="" as="d26"></column>
        <column table="a" column="d27" type="date" title="" as="d27"></column>
        <column table="a" column="d28" type="date" title="" as="d28"></column>
        <column table="a" column="d29" type="date" title="" as="d29"></column>
        <column table="a" column="d30" type="date" title="" as="d30"></column>
        <column table="a" column="d31" type="date" title="" as="d31"></column>
        <column table="a" column="d32" type="date" title="" as="d32"></column>
        <column table="a" column="d33" type="date" title="" as="d33"></column>
        <column table="a" column="d34" type="date" title="" as="d34"></column>
        <column table="a" column="d35" type="date" title="" as="d35"></column>
        <column table="a" column="d36" type="date" title="" as="d36"></column>
        <column table="a" column="d37" type="date" title="" as="d37"></column>
        <column table="a" column="d38" type="date" title="" as="d38"></column>
        <column table="a" column="d39" type="date" title="" as="d39"></column>
        <column table="a" column="d40" type="date" title="" as="d40"></column>
        <column table="a" column="sl7" type="string" title="" as="sl7"></column>
        <column table="a" column="sl8" type="string" title="" as="sl8"></column>
        <column table="a" column="sl9" type="string" title="" as="sl9"></column>
        <column table="a" column="sl10" type="string" title="" as="sl10"></column>
        <column table="a" column="sl11" type="string" title="" as="sl11"></column>
        <column table="a" column="sl12" type="string" title="" as="sl12"></column>
        <column table="a" column="sl13" type="string" title="" as="sl13"></column>
        <column table="a" column="sl14" type="string" title="" as="sl14"></column>
        <column table="a" column="sl15" type="string" title="" as="sl15"></column>
        <column table="a" column="sl16" type="string" title="" as="sl16"></column>
        <column table="a" column="sl17" type="string" title="" as="sl17"></column>
        <column table="a" column="sl18" type="string" title="" as="sl18"></column>
        <column table="a" column="sl19" type="string" title="" as="sl19"></column>
        <column table="a" column="sl20" type="string" title="" as="sl20"></column>
        <column table="a" column="n0" type="number" title="" as="n0"></column>
        <column table="a" column="sl21" type="string" title="" as="sl21"></column>
        <column table="a" column="sl22" type="string" title="" as="sl22"></column>
        <column table="a" column="sl23" type="string" title="" as="sl23"></column>
        <column table="a" column="sl24" type="string" title="" as="sl24"></column>
        <column table="a" column="sl25" type="string" title="" as="sl25"></column>
        <column table="a" column="sl26" type="string" title="" as="sl26"></column>
        <column table="a" column="sl27" type="string" title="" as="sl27"></column>
        <column table="a" column="sl28" type="string" title="" as="sl28"></column>
        <column table="a" column="sl29" type="string" title="" as="sl29"></column>
        <column table="a" column="sl30" type="string" title="" as="sl30"></column>
        <column table="a" column="sl31" type="string" title="" as="sl31"></column>
        <column table="a" column="sl32" type="string" title="" as="sl32"></column>
        <column table="a" column="sl33" type="string" title="" as="sl33"></column>
        <column table="a" column="sl34" type="string" title="" as="sl34"></column>
        <column table="a" column="sl35" type="string" title="" as="sl35"></column>
        <column table="a" column="sl36" type="string" title="" as="sl36"></column>
        <column table="a" column="sl37" type="string" title="" as="sl37"></column>
        <column table="a" column="sl38" type="string" title="" as="sl38"></column>
        <column table="a" column="sl39" type="string" title="" as="sl39"></column>
        <column table="a" column="sl40" type="string" title="" as="sl40"></column>
        <column table="a" column="n41" type="number" title="" as="n41"></column>
        <column table="a" column="n42" type="number" title="" as="n42"></column>
        <column table="a" column="n43" type="number" title="" as="n43"></column>
        <column table="a" column="n44" type="number" title="" as="n44"></column>
        <column table="a" column="n45" type="number" title="" as="n45"></column>
        <column table="a" column="n46" type="number" title="" as="n46"></column>
        <column table="a" column="n47" type="number" title="" as="n47"></column>
        <column table="a" column="n48" type="number" title="" as="n48"></column>
        <column table="a" column="n49" type="number" title="" as="n49"></column>
        <column table="a" column="n50" type="number" title="" as="n50"></column>
        <column table="a" column="s41" type="string" title="" as="s41"></column>
        <column table="a" column="s42" type="string" title="" as="s42"></column>
        <column table="a" column="s43" type="string" title="" as="s43"></column>
        <column table="a" column="s44" type="string" title="" as="s44"></column>
        <column table="a" column="s45" type="string" title="" as="s45"></column>
        <column table="a" column="s46" type="string" title="" as="s46"></column>
        <column table="a" column="s47" type="string" title="" as="s47"></column>
        <column table="a" column="s48" type="string" title="" as="s48"></column>
        <column table="a" column="s49" type="string" title="" as="s49"></column>
        <column table="a" column="s50" type="string" title="" as="s50"></column>
        <column table="a" column="d41" type="date" title="" as="d41"></column>
        <column table="a" column="d42" type="date" title="" as="d42"></column>
        <column table="a" column="d43" type="date" title="" as="d43"></column>
        <column table="a" column="d44" type="date" title="" as="d44"></column>
        <column table="a" column="d45" type="date" title="" as="d45"></column>
        <column table="a" column="d46" type="date" title="" as="d46"></column>
        <column table="a" column="d47" type="date" title="" as="d47"></column>
        <column table="a" column="d48" type="date" title="" as="d48"></column>
        <column table="a" column="d49" type="date" title="" as="d49"></column>
        <column table="a" column="d50" type="date" title="" as="d50"></column>
        <column table="a" column="sl41" type="string" title="" as="sl41"></column>
        <column table="a" column="sl42" type="string" title="" as="sl42"></column>
        <column table="a" column="sl43" type="string" title="" as="sl43"></column>
        <column table="a" column="sl44" type="string" title="" as="sl44"></column>
        <column table="a" column="sl45" type="string" title="" as="sl45"></column>
        <column table="a" column="sl46" type="string" title="" as="sl46"></column>
        <column table="a" column="sl47" type="string" title="" as="sl47"></column>
        <column table="a" column="sl48" type="string" title="" as="sl48"></column>
        <column table="a" column="sl49" type="string" title="" as="sl49"></column>
        <column table="a" column="sl50" type="string" title="" as="sl50"></column>
        <column table="a" column="n51" type="number" title="" as="n51"></column>
        <column table="a" column="n52" type="number" title="" as="n52"></column>
        <column table="a" column="n53" type="number" title="" as="n53"></column>
        <column table="a" column="n54" type="number" title="" as="n54"></column>
        <column table="a" column="n55" type="number" title="" as="n55"></column>
        <column table="a" column="n56" type="number" title="" as="n56"></column>
        <column table="a" column="n57" type="number" title="" as="n57"></column>
        <column table="a" column="n58" type="number" title="" as="n58"></column>
        <column table="a" column="n59" type="number" title="" as="n59"></column>
        <column table="a" column="n60" type="number" title="" as="n60"></column>
        <column table="a" column="n61" type="number" title="" as="n61"></column>
        <column table="a" column="n62" type="number" title="" as="n62"></column>
        <column table="a" column="n63" type="number" title="" as="n63"></column>
        <column table="a" column="n64" type="number" title="" as="n64"></column>
        <column table="a" column="n65" type="number" title="" as="n65"></column>
        <column table="a" column="n66" type="number" title="" as="n66"></column>
        <column table="a" column="n67" type="number" title="" as="n67"></column>
        <column table="a" column="n68" type="number" title="" as="n68"></column>
        <column table="a" column="n69" type="number" title="" as="n69"></column>
        <column table="a" column="n70" type="number" title="" as="n70"></column>
        <column table="a" column="n71" type="number" title="" as="n71"></column>
        <column table="a" column="n72" type="number" title="" as="n72"></column>
        <column table="a" column="n73" type="number" title="" as="n73"></column>
        <column table="a" column="n74" type="number" title="" as="n74"></column>
        <column table="a" column="n75" type="number" title="" as="n75"></column>
        <column table="a" column="n76" type="number" title="" as="n76"></column>
        <column table="a" column="n77" type="number" title="" as="n77"></column>
        <column table="a" column="n78" type="number" title="" as="n78"></column>
        <column table="a" column="n79" type="number" title="" as="n79"></column>
        <column table="a" column="n80" type="number" title="" as="n80"></column>
        <column table="a" column="s51" type="string" title="" as="s51"></column>
        <column table="a" column="s52" type="string" title="" as="s52"></column>
        <column table="a" column="s53" type="string" title="" as="s53"></column>
        <column table="a" column="s54" type="string" title="" as="s54"></column>
        <column table="a" column="s55" type="string" title="" as="s55"></column>
        <column table="a" column="s56" type="string" title="" as="s56"></column>
        <column table="a" column="s57" type="string" title="" as="s57"></column>
        <column table="a" column="s58" type="string" title="" as="s58"></column>
        <column table="a" column="s59" type="string" title="" as="s59"></column>
        <column table="a" column="s60" type="string" title="" as="s60"></column>
        <column table="a" column="s61" type="string" title="" as="s61"></column>
        <column table="a" column="s62" type="string" title="" as="s62"></column>
        <column table="a" column="s63" type="string" title="" as="s63"></column>
        <column table="a" column="s64" type="string" title="" as="s64"></column>
        <column table="a" column="s65" type="string" title="" as="s65"></column>
        <column table="a" column="s66" type="string" title="" as="s66"></column>
        <column table="a" column="s67" type="string" title="" as="s67"></column>
        <column table="a" column="s68" type="string" title="" as="s68"></column>
        <column table="a" column="s69" type="string" title="" as="s69"></column>
        <column table="a" column="s70" type="string" title="" as="s70"></column>
        <column table="a" column="s71" type="string" title="" as="s71"></column>
        <column table="a" column="s72" type="string" title="" as="s72"></column>
        <column table="a" column="s73" type="string" title="" as="s73"></column>
        <column table="a" column="s74" type="string" title="" as="s74"></column>
        <column table="a" column="s75" type="string" title="" as="s75"></column>
        <column table="a" column="s76" type="string" title="" as="s76"></column>
        <column table="a" column="s77" type="string" title="" as="s77"></column>
        <column table="a" column="s78" type="string" title="" as="s78"></column>
        <column table="a" column="s79" type="string" title="" as="s79"></column>
        <column table="a" column="s80" type="string" title="" as="s80"></column>
        <column table="a" column="d51" type="date" title="" as="d51"></column>
        <column table="a" column="d52" type="date" title="" as="d52"></column>
        <column table="a" column="d53" type="date" title="" as="d53"></column>
        <column table="a" column="d54" type="date" title="" as="d54"></column>
        <column table="a" column="d55" type="date" title="" as="d55"></column>
        <column table="a" column="d56" type="date" title="" as="d56"></column>
        <column table="a" column="d57" type="date" title="" as="d57"></column>
        <column table="a" column="d58" type="date" title="" as="d58"></column>
        <column table="a" column="d59" type="date" title="" as="d59"></column>
        <column table="a" column="d60" type="date" title="" as="d60"></column>
        <column table="a" column="d61" type="date" title="" as="d61"></column>
        <column table="a" column="d62" type="date" title="" as="d62"></column>
        <column table="a" column="d63" type="date" title="" as="d63"></column>
        <column table="a" column="d64" type="date" title="" as="d64"></column>
        <column table="a" column="d65" type="date" title="" as="d65"></column>
        <column table="a" column="d66" type="date" title="" as="d66"></column>
        <column table="a" column="d67" type="date" title="" as="d67"></column>
        <column table="a" column="d68" type="date" title="" as="d68"></column>
        <column table="a" column="d69" type="date" title="" as="d69"></column>
        <column table="a" column="d70" type="date" title="" as="d70"></column>
        <column table="a" column="d71" type="date" title="" as="d71"></column>
        <column table="a" column="d72" type="date" title="" as="d72"></column>
        <column table="a" column="d73" type="date" title="" as="d73"></column>
        <column table="a" column="d74" type="date" title="" as="d74"></column>
        <column table="a" column="d75" type="date" title="" as="d75"></column>
        <column table="a" column="d76" type="date" title="" as="d76"></column>
        <column table="a" column="d77" type="date" title="" as="d77"></column>
        <column table="a" column="d78" type="date" title="" as="d78"></column>
        <column table="a" column="d79" type="date" title="" as="d79"></column>
        <column table="a" column="d80" type="date" title="" as="d80"></column>
        <column table="a" column="sl51" type="string" title="" as="sl51"></column>
        <column table="a" column="sl52" type="string" title="" as="sl52"></column>
        <column table="a" column="sl53" type="string" title="" as="sl53"></column>
        <column table="a" column="sl54" type="string" title="" as="sl54"></column>
        <column table="a" column="sl55" type="string" title="" as="sl55"></column>
        <column table="a" column="sl56" type="string" title="" as="sl56"></column>
        <column table="a" column="sl57" type="string" title="" as="sl57"></column>
        <column table="a" column="sl58" type="string" title="" as="sl58"></column>
        <column table="a" column="sl59" type="string" title="" as="sl59"></column>
        <column table="a" column="sl60" type="string" title="" as="sl60"></column>
        <column table="a" column="sl61" type="string" title="" as="sl61"></column>
        <column table="a" column="sl62" type="string" title="" as="sl62"></column>
        <column table="a" column="sl63" type="string" title="" as="sl63"></column>
        <column table="a" column="sl64" type="string" title="" as="sl64"></column>
        <column table="a" column="sl65" type="string" title="" as="sl65"></column>
        <column table="a" column="sl66" type="string" title="" as="sl66"></column>
        <column table="a" column="sl67" type="string" title="" as="sl67"></column>
        <column table="a" column="sl68" type="string" title="" as="sl68"></column>
        <column table="a" column="sl69" type="string" title="" as="sl69"></column>
        <column table="a" column="sl70" type="string" title="" as="sl70"></column>
        <column table="a" column="sl71" type="string" title="" as="sl71"></column>
        <column table="a" column="sl72" type="string" title="" as="sl72"></column>
        <column table="a" column="sl73" type="string" title="" as="sl73"></column>
        <column table="a" column="sl74" type="string" title="" as="sl74"></column>
        <column table="a" column="sl75" type="string" title="" as="sl75"></column>
        <column table="a" column="sl76" type="string" title="" as="sl76"></column>
        <column table="a" column="sl77" type="string" title="" as="sl77"></column>
        <column table="a" column="sl78" type="string" title="" as="sl78"></column>
        <column table="a" column="sl79" type="string" title="" as="sl79"></column>
        <column table="a" column="sl80" type="string" title="" as="sl80"></column>
        <column table="a" column="n81" type="number" title="" as="n81"></column>
        <column table="a" column="n82" type="number" title="" as="n82"></column>
        <column table="a" column="n83" type="number" title="" as="n83"></column>
        <column table="a" column="n84" type="number" title="" as="n84"></column>
        <column table="a" column="n85" type="number" title="" as="n85"></column>
        <column table="a" column="n86" type="number" title="" as="n86"></column>
        <column table="a" column="n87" type="number" title="" as="n87"></column>
        <column table="a" column="n88" type="number" title="" as="n88"></column>
        <column table="a" column="n89" type="number" title="" as="n89"></column>
        <column table="a" column="n90" type="number" title="" as="n90"></column>
        <column table="a" column="n91" type="number" title="" as="n91"></column>
        <column table="a" column="n92" type="number" title="" as="n92"></column>
        <column table="a" column="n93" type="number" title="" as="n93"></column>
        <column table="a" column="n94" type="number" title="" as="n94"></column>
        <column table="a" column="n95" type="number" title="" as="n95"></column>
        <column table="a" column="n96" type="number" title="" as="n96"></column>
        <column table="a" column="n97" type="number" title="" as="n97"></column>
        <column table="a" column="n98" type="number" title="" as="n98"></column>
        <column table="a" column="n99" type="number" title="" as="n99"></column>
        <column table="a" column="n100" type="number" title="" as="n100"></column>
        <column table="a" column="n101" type="number" title="" as="n101"></column>
        <column table="a" column="n102" type="number" title="" as="n102"></column>
        <column table="a" column="n103" type="number" title="" as="n103"></column>
        <column table="a" column="n104" type="number" title="" as="n104"></column>
        <column table="a" column="n105" type="number" title="" as="n105"></column>
        <column table="a" column="n106" type="number" title="" as="n106"></column>
        <column table="a" column="n107" type="number" title="" as="n107"></column>
        <column table="a" column="n108" type="number" title="" as="n108"></column>
        <column table="a" column="n109" type="number" title="" as="n109"></column>
        <column table="a" column="n110" type="number" title="" as="n110"></column>
        <call function="rowid" as="c_rab_tmp_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="c_rab_tmp" as="a"></table>
      </from>
    </query>
    <query name="dr_ddatval" class="1" timestamp="27.03.2018 15:32:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_ddatval.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ddatval" type="number" column-mandatory="1" as="kod_ddatval" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" column-mandatory="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_s" type="date" column-mandatory="1" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="pr_rasch" type="number" column-mandatory="1" title="" comment="0 - по умолчанию.  Требуется производство &#xA;расчетов. Выставляется при корректуре&#xA;нагрузок и расходов ТУ.&#xA;&#xA;1 - расчеты проведены. Выставляет процедура" as="pr_rasch" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kt_tp" type="number" title="" comment="Коэф-т теплопотерь" as="kt_tp" key="0" />
        <column table="a" column="pr_rv_par" type="number" title="" comment="0 - по умолчанию. 1- расчеты не проводить для пара" as="pr_rv_par" key="0" />
        <column table="a" column="kod_r" type="number" comment="Формирование Списка дат в дереве" as="kod_r" key="0" />
        <column table="a" column="pr_pot" type="number" column-mandatory="1" title="" comment="Признак расчета потерь 0-норматив 1-реальные" as="pr_pot" key="0" />
        <column table="a" column="pr_rasch_pot" type="number" column-mandatory="1" title="" comment="Признак, потери расчитаны" as="pr_rasch_pot" key="0" />
        <column table="a" column="gr_es" type="string" title="" comment="Граница БП ЭснОрг" as="gr_es" key="0" />
        <column table="a" column="gr_ab" type="string" title="" comment="Граница БП Абонента" as="gr_ab" key="0" />
        <column table="a" column="pr_agree" type="number" column-mandatory="1" title="" comment="Признак разсинхронизации данных" as="pr_agree" key="0" />
        <column table="a" column="clim" type="number" title="" comment="Код климатической зоны" as="clim" reference="ds_temp_reg" refcol="kod_temp_reg" key="0" />
        <column table="a" column="kod_mtgr" type="number" comment="Код температурного графика" as="kod_mtgr" reference="dsm_tgr_tree" refcol="kod_mtgr" key="0" />
        <column table="a" column="p1" type="string" title="" comment="Давление на гр.раздела" as="p1" key="0" />
        <column table="a" column="p2" type="string" title="" comment="Давление на гр.раздела" as="p2" key="0" />
        <column table="a" column="dp" type="string" title="" comment="Давление на гр.раздела" as="dp" key="0" />
        <column table="a" column="num_prior" type="string" title="" as="num_prior" key="0" />
        <column table="a" column="sxpris" type="blob" title="" as="sxpris" key="0" />
        <column table="a" column="pr_spot" type="number" column-mandatory="1" title="" comment="Признак вкл. системных потерь в расчет" as="pr_spot" key="0" />
        <column table="a" column="pr_lock" type="number" column-mandatory="1" title="" comment="Признак блокировки расчета" as="pr_lock" key="0" />
        <column table="a" column="pr_rpot_mop" type="number" title="" comment="Считать потери с утечкой в МОП" as="pr_rpot_mop" key="0" />
        <column table="a" column="pr_rpot_325" type="number" title="" comment="Признак перехода на расчёт потерь по 325 приказу" as="pr_rpot_325" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_ddatval" as="a">
          <link name="kod_dog" as="kod_dog1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dogovor" child="dr_ddatval" field="kod_dog" parent="kr_dogovor" back="dr_ddatval" title="Договор" />
        </table>
        <query name="dsm_tgr_tree" as="kod_mtgr" join="left outer" dname="dr_ddatval">
          <call function="=">
            <column table="a" column="kod_mtgr" />
            <column table="kod_mtgr" column="kod_mtgr" />
          </call>
        </query>
        <query name="ds_temp_reg" as="clim" join="left outer" dname="dr_ddatval">
          <call function="=">
            <column table="a" column="clim" />
            <column table="clim" column="kod_temp_reg" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="dr_ddatval" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="dr_ddatval">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
      </from>
    </query>
    <query name="dr_dogval_limit" class="1" timestamp="06.10.2016 01:22:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_dogval_limit.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dogval_limit" type="number" as="kod_dogval_limit" />
        <column table="a" column="id_period" type="number" title="" as="id_period" reference="ds_period" refcol="id_period" />
        <column table="a" column="kod_period" type="number" as="kod_period" />
        <column table="a" column="x_requir" type="number" title="" as="x_requir" />
        <column table="a" column="y_bring" type="number" title="" fact="dr_dogval_lim_y_bring" agg="sum" as="y_bring" />
        <column table="a" column="z_extra" type="number" title="" as="z_extra" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" />
        <column table="a" column="q_noctp" type="number" title="" as="q_noctp" />
        <column table="a" column="q_ctp" type="number" title="" as="q_ctp" />
        <column table="a" column="q_all" type="number" title="" as="q_all" />
        <column table="a" column="q_tarif" type="number" title="" as="q_tarif" />
        <column table="a" column="q_st" type="number" title="" as="q_st" />
        <column table="a" column="gt" type="number" title="" as="gt" />
        <column table="a" column="gt_tarif" type="number" title="" as="gt_tarif" />
        <column table="a" column="gt_st" type="number" title="" as="gt_st" />
        <column table="a" column="gk" type="number" title="" as="gk" />
        <column table="a" column="gk_tarif" type="number" title="" as="gk_tarif" />
        <column table="a" column="gk_st" type="number" title="" as="gk_st" />
        <call function="||" as="kod" key="1">
          <column table="a" column="kod_dogval_limit" type="number" />
          <const>' '</const>
          <column table="a" column="id_period" type="number" title="" />
        </call>
        <call function="num to ym" as="ym" dimension="ym">
          <column table="kod_dogval_limit" column="n_year" />
          <column table="id_period" column="month" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="dr_dogval_limit" as="a" />
        <query name="ds_period" as="id_period" join="left outer" dname="dr_dogval_limit">
          <call function="=">
            <column table="a" column="id_period" />
            <column table="id_period" column="id_period" />
          </call>
        </query>
        <query name="dr_dogval_limit_tree" as="kod_dogval_limit" join="left outer" dimension="1" dname="dr_dogval_limit">
          <call function="=">
            <column table="a" column="kod_dogval_limit" />
            <column table="kod_dogval_limit" column="kod_dogval_limit" />
          </call>
        </query>
      </from>
    </query>
    <query name="dr_dogval_limit_tree" class="1" timestamp="06.10.2016 01:16:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_dogval_limit_tree.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dogval_limit" type="number" as="kod_dogval_limit" key="1" fixed="1" />
        <column table="a" column="kod_r" type="number" as="kod_r" reference="dr_dogval_limit_tree" refcol="kod_dogval_limit" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="n_year" type="number" title="" as="n_year" key="0" />
        <column table="a" column="d_date" type="date" title="" as="d_date" key="0" />
        <column table="a" column="s_doc" type="string" title="" as="s_doc" key="0" />
        <column table="a" column="y_brought_limit" type="number" title="" as="y_brought_limit" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_ddatval" type="number" as="kod_ddatval" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_dogval_limit_tree" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="dr_dogval_limit_tree" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="dr_dogval_limit_tree" as="kod_r" join="left outer" dname="dr_dogval_limit_tree">
          <call function="=">
            <column table="a" column="kod_r" />
            <column table="kod_r" column="kod_dogval_limit" />
          </call>
        </query>
      </from>
    </query>
    <query name="dr_point" class="1" timestamp="23.11.2016 17:48:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" as="kod_point" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" comment="v1;v2: код потребителя" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="prizn_sa" type="number" title="" comment="неактуален (вычисляется)" as="prizn_sa" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="v1;v2:" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="v1;v2:" as="dat_po" key="0" />
        <column table="a" column="nomer" type="number" title="" comment="v1;v2:" as="nomer" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="v1;v2:" as="name" key="0" />
        <column table="a" column="prim" type="string" title="" comment="v1;v2:" as="prim" key="0" />
        <column table="a" column="kod" type="number" title="" comment="v1:" as="kod" reference="qr_schema" refcol="kod" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="v1;v2:" as="pr_active" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="pr_balrasch" type="number" title="" comment="v1;v2:" as="pr_balrasch" key="0" />
        <column table="a" column="kod_tn" type="number" comment="v1:" as="kod_tn" key="0" />
        <column table="a" column="otkr_zakr" type="number" title="" comment="схема откр/закр временно до подключения к схеме" as="otkr_zakr" key="0" />
        <column table="a" column="kod_point_to" type="number" comment="код ту, на которую переоформлена данная точка учёта" as="kod_point_to" key="0" />
        <column table="a" column="kod_point_parent" type="number" as="kod_point_parent" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_point" as="a">
          <dlink name="dr_point_har" dimension="1" is-final-dimension="1" as="dr_point_har" table="dr_point_har" child="dr_point_har" field="kod_point" parent="dr_point" back="dr_point_har" />
        </table>
        <query name="qr_schema" as="kod" join="left outer" dname="dr_point">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="dr_point">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
      </from>
    </query>
    <query name="dr_point_har" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_point_har.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_har" type="number" as="kod_point_har" key="1" fixed="1"></column>
        <column table="a" column="kod_point" type="number" as="kod_point" reference="dr_point" refcol="kod_point" key="0"></column>
        <column table="a" column="kod_tiptn" type="number" as="kod_tiptn" reference="ds_tnagr" refcol="kod_tiptn" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="kod_oaw" type="number" comment="код бойлерной гвс или итп" as="kod_oaw" reference="qr_oaw" refcol="kod_oaw" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_point_har" as="a"></table>
        <query name="dr_point" as="kod_point" join="left outer" dname="dr_point_har">
          <call function="=">
            <column table="a" column="kod_point"></column>
            <column table="kod_point" column="kod_point"></column>
          </call>
        </query>
        <query name="qr_oaw" as="kod_oaw" join="left outer" dname="dr_point_har">
          <call function="=">
            <column table="a" column="kod_oaw"></column>
            <column table="kod_oaw" column="kod_oaw"></column>
          </call>
        </query>
        <query name="ds_tnagr" as="kod_tiptn" join="left outer" dname="dr_point_har">
          <call function="=">
            <column table="a" column="kod_tiptn"></column>
            <column table="kod_tiptn" column="kod_tiptn"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="dr_point_rasx" class="1" timestamp="27.03.2018 19:34:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\dr_point_rasx.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_rasx" type="number" comment="v1;v2:" as="kod_point_rasx" key="1" fixed="1" />
        <column table="a" column="tarif" type="number" title="" comment="v1: код тарифа" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_point" type="number" comment="v1;v2:" as="kod_point" reference="dr_point" refcol="kod_point" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="v1;v2: уникальный код" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="volume" type="number" title="" comment="v1;v2: контроль по зданию" as="volume" key="0" />
        <column table="a" column="so_q" type="number" title="" comment="v1:" as="so_q" key="0" />
        <column table="a" column="so_g" type="number" title="" comment="v1:" as="so_g" key="0" />
        <column table="a" column="sw_q" type="number" title="" comment="v1:" as="sw_q" key="0" />
        <column table="a" column="sw_g" type="number" title="" comment="v1:" as="sw_g" key="0" />
        <column table="a" column="st_q" type="number" title="" comment="v1:" as="st_q" key="0" />
        <column table="a" column="st_g" type="number" title="" comment="v1:" as="st_g" key="0" />
        <column table="a" column="kod_nrasx" type="number" comment="v1: составной код содержит категорию и группу водопользователя" as="kod_nrasx" reference="ds_nrasx" refcol="kod_nrasx" key="0" />
        <column table="a" column="nn_wpol" type="number" title="" comment="v1:  ui  к-во водопользователей" as="nn_wpol" key="0" />
        <column table="a" column="tt_wpol" type="number" title="" comment="v1: ti  - режим работы потребителей" as="tt_wpol" key="0" />
        <column table="a" column="nn_prib" type="number" title="" comment="v1: ni  - к-во приборов" as="nn_prib" key="0" />
        <column table="a" column="pr_rec" type="number" title="" comment="v1:  наличие рециркуляции" as="pr_rec" key="0" />
        <column table="a" column="pr_psusch" type="number" title="" comment="v1:  наличие полот.сушителей" as="pr_psusch" key="0" />
        <column table="a" column="pr_iz_st" type="number" title="" comment="v1:  наличие изол.стояков" as="pr_iz_st" key="0" />
        <column table="a" column="k_pq" type="number" title="" comment="v1: функция от ( pr_rec, pr_psusch, pr_iz_st )" as="k_pq" key="0" />
        <column table="a" column="gw_qmax" type="number" title="" comment="v1:" as="gw_qmax" key="0" />
        <column table="a" column="gw_qsr" type="number" title="" comment="v1:" as="gw_qsr" key="0" />
        <column table="a" column="gw_qsut" type="number" title="" comment="v1: не расчитывается" as="gw_qsut" key="0" />
        <column table="a" column="gw_gmax" type="number" title="" comment="v1:" as="gw_gmax" key="0" />
        <column table="a" column="gw_gsr" type="number" title="" comment="v1:" as="gw_gsr" key="0" />
        <column table="a" column="gw_gsut" type="number" title="" comment="v1:" as="gw_gsut" key="0" />
        <column table="a" column="os_gsr" type="number" title="" comment="v1:" as="os_gsr" key="0" />
        <column table="a" column="mos_gsr" type="number" title="" comment="v1:" as="mos_gsr" key="0" />
        <column table="a" column="os_potr" type="number" title="" comment="v1:" as="os_potr" key="0" />
        <column table="a" column="mos_potr" type="number" title="" comment="v1:" as="mos_potr" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_ddatval" type="number" comment="v1;v2:" as="kod_ddatval" reference="dr_ddatval" refcol="kod_ddatval" key="0" />
        <column table="a" column="pr_r_gw" type="number" title="" comment="v1:" as="pr_r_gw" reference="dk_pr_rtu" refcol="kod_pr" key="0" />
        <column table="a" column="pr_r_sw" type="number" title="" comment="v1:" as="pr_r_sw" reference="dk_pr_rtu" refcol="kod_pr" key="0" />
        <column table="a" column="pr_r_so" type="number" title="" comment="v1:" as="pr_r_so" reference="dk_pr_rtu" refcol="kod_pr" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="v1:" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="g_ps_so" type="number" title="" comment="v1:" as="g_ps_so" key="0" />
        <column table="a" column="g_ps_sw" type="number" title="" comment="v1:" as="g_ps_sw" key="0" />
        <column table="a" column="pr_r_st" type="number" title="" comment="v1:" as="pr_r_st" reference="dk_pr_rtu" refcol="kod_pr" key="0" />
        <column table="a" column="gs_gw" type="number" title="" comment="v1:" as="gs_gw" key="0" />
        <column table="a" column="pr_oto" type="number" title="" comment="v3:" as="pr_oto" key="0" />
        <column table="a" column="pr_gvs" type="number" title="" comment="v3:" as="pr_gvs" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="тип точки учета в расчете, зависит от типа договора! по умолчанию - &quot;обычная&quot;, значение 0." as="kod_tip_tu" reference="dk_tip_tu" refcol="kod_tip_tu" key="0" />
        <column table="a" column="s_tu" type="number" title="" comment="площадь ту" as="s_tu" key="0" />
        <column table="a" column="agree_uu" type="number" title="" comment="признак изменения уу после итп" as="agree_uu" key="0" />
        <column table="a" column="kod_uprcomp" type="number" as="kod_uprcomp" reference="ds_uprcomp" refcol="kod_uprcomp" key="0" />
        <column table="a" column="kod_pref" type="number" comment="первичный ключ префектуры" as="kod_pref" reference="ds_prefect" refcol="kod_pref" key="0" />
        <column table="a" column="kod_tarif_norm" type="number" as="kod_tarif_norm" key="0" />
        <column table="a" column="point_rasch" type="number" title="" comment="признак расчета 0 - не расчитан 1 - расчитан" as="point_rasch" key="0" />
        <column table="a" column="kod_norm" type="number" comment="ссылка на нормативы на отопление" as="kod_norm" reference="ds_otop_norm" refcol="kod_norm" key="0" />
        <column table="a" column="s_gil_tu" type="number" title="" comment="жилая площадь, кв. м." as="s_gil_tu" key="0" />
        <column table="a" column="s_odn_tu" type="number" title="" comment="площадь одн, кв. м." as="s_odn_tu" key="0" />
        <column table="a" column="pr_square" type="number" title="" comment="признак учёта площади на объекте из гвс" as="pr_square" key="0" />
        <column table="a" column="zd_t_vr" type="number" title="" comment="сов. расчетная температура внутри здания" as="zd_t_vr" key="0" />
        <column table="a" column="so_t1" type="number" title="" comment="со. расчетная температура теплонос-ля подающего" as="so_t1" key="0" />
        <column table="a" column="so_t2" type="number" title="" comment="со. расчетная температура теплонос-ля обратного" as="so_t2" key="0" />
        <column table="a" column="so_tnv" type="number" title="" comment="со. расчетная температура наружного воздуха" as="so_tnv" key="0" />
        <column table="a" column="so_alf" type="number" title="" comment="со. к-нт альфа" as="so_alf" key="0" />
        <column table="a" column="so_q_utx" type="number" title="" comment="со. утх" as="so_q_utx" key="0" />
        <column table="a" column="sw_t1" type="number" title="" comment="св. расчетная температура теплонос-ля подающего" as="sw_t1" key="0" />
        <column table="a" column="sw_t2" type="number" title="" comment="св. расчетная температура теплонос-ля обратного" as="sw_t2" key="0" />
        <column table="a" column="sw_tnv" type="number" title="" comment="св. расчетная температура наружного воздуха" as="sw_tnv" key="0" />
        <column table="a" column="sw_alf" type="number" title="" comment="св. к-нт альфа" as="sw_alf" key="0" />
        <column table="a" column="sw_q_utx" type="number" title="" comment="св. утх" as="sw_q_utx" key="0" />
        <column table="a" column="wsut" type="number" title="" comment="гвс норма расхода воды потребителем л\сут" as="wsut" key="0" />
        <column table="a" column="wh" type="number" title="" comment="гвс норма расхода воды потребителем л\час" as="wh" key="0" />
        <column table="a" column="pr_sec" type="number" title="" comment="гвс норма расхода воды прибором л\сек" as="pr_sec" key="0" />
        <column table="a" column="pr_h" type="number" title="" comment="гвс норма расхода воды прибором л\сек" as="pr_h" key="0" />
        <column table="a" column="gwr_pd" type="number" title="" comment="гвс вероятность действия приборов" as="gwr_pd" key="0" />
        <column table="a" column="gwr_alfd" type="number" title="" comment="гвс к-нт действия" as="gwr_alfd" key="0" />
        <column table="a" column="gwr_gmsek" type="number" title="" comment="гвс мах секундный расход" as="gwr_gmsek" key="0" />
        <column table="a" column="gwr_pu" type="number" title="" comment="гвс вероятность использования приборов" as="gwr_pu" key="0" />
        <column table="a" column="gwr_alfu" type="number" title="" comment="гвс к-нт использования" as="gwr_alfu" key="0" />
        <column table="a" column="gwr_qu" type="number" title="" comment="гвс часовые потери теплоты трубопроводов гвс" as="gwr_qu" key="0" />
        <column table="a" column="ctp" type="number" title="" comment="v1:  признак наличие уу" as="ctp" key="0" />
        <column table="a" column="nal_uu" type="number" title="" as="nal_uu" key="0" />
        <column table="a" column="pr_gil" type="number" title="" comment="признак - в жилом доме" as="pr_gil" key="0" />
        <call function="decode" as="pr_gil_min" title="Признак жилого дома" type="number" agg="min" is-fact="1" fact="dr_point_rasx_pr_gil_min" key="0">
          <column table="this" column="pr_gil" />
          <const>1</const>
          <const>1</const>
          <const>-1</const>
        </call>
        <column table="a" column="kod_aw" type="number" as="kod_aw" key="0" />
        <column table="a" column="kod_uu" type="number" as="kod_uu" key="0" />
        <column table="a" column="kod_ctp" type="number" as="kod_ctp" key="0" />
        <column table="a" column="kod_ctp_spr" type="number" as="kod_ctp_spr" key="0" />
        <column table="a" column="pr_stream" type="number" title="" as="pr_stream" key="0" />
        <call function="if" as="nazn_et" is-fact="1" agg="list" type="string" fact="dr_point_rasx_nazn_et" key="0">
          <call function="=1">
            <column table="this" column="pr_gil" />
          </call>
          <call function="||">
            <column table="kodnaznteplo" column="name" />
            <const>', '</const>
            <column table="kod_norm" column="series" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="dr_point_rasx" as="a">
          <link name="kod_ddatval" as="kod_ddatval1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="dr_ddatval" child="dr_point_rasx" field="kod_ddatval" parent="dr_ddatval" back="dr_point_rasx">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="dr_ddatval" as="kod_ddatval" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_ddatval" />
            <column table="kod_ddatval" column="kod_ddatval" />
          </call>
        </query>
        <query name="dr_point" as="kod_point" join="left outer" dimension="1" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
          <link name="kod_obj" as="kod_obj" table="kr_object" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj">
            <link name="kodnaznteplo" as="kodnaznteplo" table="ds_naznhouse" child="kr_object" field="kodnaznteplo" parent="ds_naznhouse" back="kr_object" />
          </link>
        </query>
        <query name="dk_pr_rtu" as="pr_r_gw" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="pr_r_gw" />
            <column table="pr_r_gw" column="kod_pr" />
          </call>
        </query>
        <query name="dk_pr_rtu" as="pr_r_st" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="pr_r_st" />
            <column table="pr_r_st" column="kod_pr" />
          </call>
        </query>
        <query name="dk_pr_rtu" as="pr_r_sw" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="pr_r_sw" />
            <column table="pr_r_sw" column="kod_pr" />
          </call>
        </query>
        <query name="ds_nrasx" as="kod_nrasx" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_nrasx" />
            <column table="kod_nrasx" column="kod_nrasx" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="dk_tip_tu" as="kod_tip_tu" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_tip_tu" />
            <column table="kod_tip_tu" column="kod_tip_tu" />
          </call>
        </query>
        <query name="ds_uprcomp" as="kod_uprcomp" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_uprcomp" />
            <column table="kod_uprcomp" column="kod_uprcomp" />
          </call>
        </query>
        <query name="ds_prefect" as="kod_pref" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_pref" />
            <column table="kod_pref" column="kod_pref" />
          </call>
        </query>
        <query name="ds_otop_norm" as="kod_norm" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="kod_norm" />
            <column table="kod_norm" column="kod_norm" />
          </call>
        </query>
        <query name="dk_pr_rtu" as="pr_r_so" join="left outer" dname="dr_point_rasx">
          <call function="=">
            <column table="a" column="pr_r_so" />
            <column table="pr_r_so" column="kod_pr" />
          </call>
        </query>
      </from>
    </query>
    <query name="ds_naznhouse" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ds_naznhouse.xml" haskeys="1">
      <select>
        <column table="a" column="kodnaznteplo" type="number" title="" as="kodnaznteplo" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ds_naznhouse" refcol="kodnaznteplo" key="0"></column>
        <column table="a" column="name2" type="string" title="" as="name2" key="0"></column>
        <column table="a" column="tvr" type="number" title="" as="tvr" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ds_naznhouse" as="a"></table>
        <query name="ds_naznhouse" as="kod_parent" join="left outer" dname="ds_naznhouse">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kodnaznteplo"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ds_otop_norm" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ds_otop_norm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_norm" type="number" column-mandatory="1" comment="Первичный ключ для нормативов на отопление" as="kod_norm" key="1" fixed="1" />
        <column table="a" column="series" type="string" column-mandatory="1" title="" comment="Серия дома" as="series" key="0" />
        <column table="a" column="norm" type="number" column-mandatory="1" title="" comment="Норматив на отопление (Гкал на кв.м.)" as="norm" key="0" />
        <column table="a" column="norm_odn" type="number" title="" comment="Норматив на ОДН (Гкал на кв.м.)" as="norm_odn" key="0" />
        <column table="a" column="norm_odn_gvs" type="number" title="" comment="Норматив по ГВС на ОДН (куб.м. на кв.м.)" as="norm_odn_gvs" key="0" />
        <column table="a" column="old_norm_odn_gvs" type="number" title="" comment="Норматив по ГВС на ОДН до 01.07.2013 (куб.м. на кв.м.)" as="old_norm_odn_gvs" key="0" />
        <column table="a" column="dep" type="number" title="" as="dep" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ds_otop_norm" as="a" />
      </from>
    </query>
    <query name="ds_period" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ds_period.xml" haskeys="1">
      <select>
        <column table="a" column="id_period" type="number" title="" as="id_period" key="1" fixed="1"></column>
        <column table="a" column="kod_period" type="number" comment="код период" as="kod_period" key="0"></column>
        <column table="a" column="sut" type="number" title="" comment="кол-во суток" as="sut" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="tnw" type="number" title="" comment="температура наружного воздуха" as="tnw" key="0"></column>
        <column table="a" column="tg" type="number" title="" as="tg" key="0"></column>
        <column table="a" column="tt" type="number" title="" comment="температара холодной воды" as="tt" key="0"></column>
        <column table="a" column="kvartal" type="number" title="" comment="квартал" as="kvartal" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="sez" type="number" title="" comment="признак сезона  1- отопит." as="sez" key="0"></column>
        <column table="a" column="tgw_p" type="number" title="" comment="температура гвс - подающий" as="tgw_p" key="0"></column>
        <column table="a" column="tgw_o" type="number" title="" comment="температура гвс - обратный" as="tgw_o" key="0"></column>
        <column table="a" column="k_sw" type="number" title="" comment="атавизм" as="k_sw" key="0"></column>
        <column table="a" column="n_st" type="number" title="" comment="атавизм" as="n_st" key="0"></column>
        <column table="a" column="tnw_pot" type="number" title="" comment="темп. нар. возд. для расчета потерь" as="tnw_pot" key="0"></column>
        <column table="a" column="txw_ctp" type="number" title="" comment="температура х.воды при расчете потребления гвс после цтп" as="txw_ctp" key="0"></column>
        <column table="a" column="t_nw_p" type="number" title="" comment="темп. нар. возд. в подвалах" as="t_nw_p" key="0"></column>
        <column table="a" column="t_nw_vp" type="number" title="" comment="темп. нар. возд. в помещениях" as="t_nw_vp" key="0"></column>
        <column table="a" column="t_nw_k" type="number" title="" comment="темп. нар. возд. в каналах" as="t_nw_k" key="0"></column>
        <column table="a" column="month" type="number" title="" comment="месяц" as="month" key="0"></column>
        <column table="a" column="dep" type="number" title="" as="dep" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ds_period" as="a"></table>
      </from>
    </query>
    <query name="ds_tnagr" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ds_tnagr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tiptn" type="number" as="kod_tiptn" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="name2" type="string" title="" as="name2" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ds_tnagr" as="a"></table>
      </from>
    </query>
    <query name="ds_tnagr_list" class="1" order="name" timestamp="23.11.2016 17:19:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ds_tnagr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tiptn" type="number" as="kod_tiptn" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="ds_tnagr" as="a" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="eas_customer_ids_equ" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\eas_customer_ids_equ.xml" haskeys="1">
      <select>
        <call function="rowid" as="eas_customer_ids_equ_id" key="1" />
        <column table="a" column="id_cust_ids_equ" type="number" column-mandatory="1" title="" comment="&lt;pk&gt;  ID строки соответствия  IDs Контрагентов в этой таблице" as="id_cust_ids_equ" />
        <column table="a" column="kn_customer" type="number" column-mandatory="1" title="" comment="Ключ клиента" as="kn_customer" reference="as_customer" refcol="kn_customer" />
        <column table="a" column="id_infsys" type="number" column-mandatory="1" title="" comment="&lt;fk&gt; ID Информац. системы  из справочника  EK_INFORMATION_SYSTEM" as="id_infsys" reference="ek_information_system" refcol="id_infsys" />
        <column table="a" column="cie_external_cust_id" type="string" data-size="120" column-mandatory="1" title="" comment="ID строки Контрагента во внешней ИС  &quot;ID Информац. системы&quot; , соответсвуюущей строке  KN_CUSTOMER в таблице AS_CUSTOMER" as="cie_external_cust_id" />
        <column table="a" column="u_c" type="string" data-size="30" column-mandatory="1" title="" comment="Кто создал" as="u_c" />
        <column table="a" column="d_c" type="date" column-mandatory="1" title="" comment="Дата создания строки" as="d_c" />
        <column table="a" column="u_m" type="string" data-size="30" title="" comment="Кто изменил" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="Дата последнего изменения строки" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="eas_customer_ids_equ" as="a" />
        <query name="ek_information_system" as="id_infsys" join="left outer" dname="eas_customer_ids_equ">
          <call function="=">
            <column table="a" column="id_infsys" />
            <column table="id_infsys" column="id_infsys" />
          </call>
        </query>
        <query name="as_customer" as="kn_customer" join="left outer" dname="eas_customer_ids_equ">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="kn_customer" />
          </call>
        </query>
      </from>
    </query>
    <query name="eas_customer_ver" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\eas_customer_ver.xml" haskeys="1">
      <select>
        <call function="rowid" as="eas_customer_ver_id" key="1" />
        <column table="a" column="id_customer_vers" type="number" column-mandatory="1" title="" comment="ЕСК: &lt;pk&gt; ID версии Контрагента" as="id_customer_vers" />
        <column table="a" column="kn_customer" type="number" column-mandatory="1" title="" comment="ЕСК: &lt;fk&gt; ID Контрагента, версия которого сохранена в данной строке" as="kn_customer" reference="as_customer" refcol="kn_customer" />
        <column table="a" column="id_infsys" type="number" column-mandatory="1" title="" comment="ЕСК: &lt;fk&gt; ID Информацонной системы, создавшей данную версию Контрагента /копируется из AS_CUSTOMER и не изменяется/&#xA;" as="id_infsys" reference="ek_information_system" refcol="id_infsys" />
        <column table="a" column="name" type="string" data-size="250" column-mandatory="1" title="Наименование" comment="ЕСК+APS: Наименование - Название организации / ФИО  Контрагента" as="name" />
        <column table="a" column="inn" type="string" data-size="12" title="" comment="ИНН" as="inn" />
        <column table="a" column="kn_house" type="number" column-mandatory="1" title="" comment="Ключ дома или улицы" as="kn_house" />
        <column table="a" column="m_user" type="string" data-size="20" title="" comment="ЕСК+APS: Строку добавил/изменил - имя учетной записи пользователя - копируется из AS_CUSTOMER и не изменяется" as="m_user" />
        <column table="a" column="m_time" type="date" title="" comment="ЕСК+APS: Дата создания/изменения строки  - копируется из AS_CUSTOMER и не изменяется" as="m_time" />
        <column table="a" column="jurid" type="number" column-mandatory="1" title="" comment="ЕСК+APS: 1 - Контрагент-Юридическое лицо, 0 - Контрагент-Физическое лицо" as="jurid" />
        <column table="a" column="remark" type="string" data-size="1000" title="" comment="Примечание" as="remark" />
        <column table="a" column="kpp" type="number" title="" comment="КПП" as="kpp" />
        <column table="a" column="kn_hp" type="number" column-mandatory="1" title="" comment="Код дома или улицы Адреса для переписки" as="kn_hp" />
        <column table="a" column="kn_customer_parent" type="number" title="" comment="ЕСК: &lt;fk&gt; ID Контрагента-родителя по связи  &quot;Главный_офис - Филиал&quot;   /у  Главного_офиса в этом поле  NULL/" as="kn_customer_parent" reference="as_customer" refcol="kn_customer" />
        <column table="a" column="id_aperson_director" type="number" title="" comment="ЕСК: ID должностного /физического/ лица - руководителя Контрагента" as="id_aperson_director" reference="era_person" refcol="id_aperson" />
        <column table="a" column="acv_short_name" type="string" data-size="50" title="" comment="ЕСК: Аббревиатура наименования Контрагента" as="acv_short_name" />
        <column table="a" column="acv_allname" type="string" data-size="1000" title="" comment="ЕСК: Наименование полное Контрагента" as="acv_allname" />
        <column table="a" column="acv_phone" type="string" data-size="250" title="" comment="ЕСК: № телефона" as="acv_phone" />
        <column table="a" column="acv_mob_phone" type="string" data-size="250" title="" comment="ЕСК: № мобильного телефона" as="acv_mob_phone" />
        <column table="a" column="acv_teletype" type="string" data-size="90" title="" comment="ЕСК: № телетайпа" as="acv_teletype" />
        <column table="a" column="acv_telex" type="string" data-size="90" title="" comment="ЕСК: № телекса" as="acv_telex" />
        <column table="a" column="acv_fax" type="string" data-size="250" title="" comment="ЕСК: № факса" as="acv_fax" />
        <column table="a" column="acv_prizn_rf_phone" type="number" title="" comment="ЕСК: Признак: 1-Номера телефонов должны быть в РФ формате" as="acv_prizn_rf_phone" />
        <column table="a" column="acv_email" type="string" data-size="90" title="" comment="ЕСК: Адрес электронной почты" as="acv_email" />
        <column table="a" column="acv_website" type="string" data-size="250" title="" comment="ЕСК: URL Web-сайта" as="acv_website" />
        <column table="a" column="acv_login_lkk" type="string" data-size="120" title="" comment="ЕСК: Логин ЛКК" as="acv_login_lkk" />
        <column table="a" column="acv_lkk_id" type="string" data-size="50" title="" comment="ЕСК: Идентификатор ЛКК /GUID/" as="acv_lkk_id" />
        <column table="a" column="acv_lkk_passw" type="string" data-size="120" title="" comment="ЕСК: Пароль ЛКК" as="acv_lkk_passw" />
        <column table="a" column="acv_egrul_cert_num" type="string" data-size="255" title="" comment="ЕСК: Свидетельство о регистрации в ЕГРЮЛ" as="acv_egrul_cert_num" />
        <column table="a" column="acv_egrul_organ" type="string" data-size="255" title="" comment="ЕСК: Наименование организации, выдавшей свидетельство о регистрации в ЕГРЮЛ" as="acv_egrul_organ" />
        <column table="a" column="acv_egrul_cert_date" type="date" title="" comment="ЕСК: Дата выдачи свидетельства о регистрации в ЕГРЮЛ" as="acv_egrul_cert_date" />
        <column table="a" column="acv_okpo" type="string" data-size="12" title="" comment="ЕСК: ОКПО" as="acv_okpo" />
        <column table="a" column="acv_ogrn" type="string" data-size="15" title="" comment="ЕСК: ОГРН" as="acv_ogrn" />
        <column table="a" column="acv_snils" type="string" data-size="14" title="" comment="ЕСК: Номер СНИЛС - желательно заполнить, если Контрагент - Физическое лицо" as="acv_snils" />
        <column table="a" column="acv_okfs" type="number" title="" comment="ЕСК: Вид собственности /из общероссийского  классификатора ОК 027-99/" as="acv_okfs" />
        <column table="a" column="acv_oktmo" type="number" title="" comment="ЕСК: ОКТМО /из общероссийского  классификатора ОК 033-2005/" as="acv_oktmo" />
        <column table="a" column="acv_kod_spr_okato_1" type="number" comment="ЕСК: Код ОКАТО /из справочника plan KS_OKATO/" as="acv_kod_spr_okato_1" />
        <column table="a" column="acv_kod_okved" type="number" comment="ЕСК: Код ОКВЭД  /из справочника asuse KS_OKVED/" as="acv_kod_okved" />
        <column table="a" column="acv_kod_otrasl" type="number" comment="ЕСК: Код Отрасли /из справочника asuse KS_OTRASL/" as="acv_kod_otrasl" />
        <column table="a" column="acv_kod_fs" type="number" comment="ЕСК: Код Формы собственности  /из справочника asuse KS_FS/" as="acv_kod_fs" />
        <column table="a" column="acv_kod_m" type="number" comment="ЕСК: Код министерства /из справочника asuse KS_MINISTRY/" as="acv_kod_m" />
        <column table="a" column="acv_uraddr_txt" type="string" data-size="250" title="" comment="ЕСК: Юридический адрес строкой  /формируется триггером по коду KN_HOUSE из справочника K_HOUSE/" as="acv_uraddr_txt" />
        <column table="a" column="acv_kod_d" type="number" column-mandatory="1" comment="ЕСК: Код адреса дома Физического /из справочника asuse K_HOUSE/" as="acv_kod_d" />
        <column table="a" column="acv_fizaddr_txt" type="string" data-size="250" title="" comment="ЕСК: Физический адрес строкой /формируется триггером по коду AC_KOD_D из справочника K_HOUSE/" as="acv_fizaddr_txt" />
        <column table="a" column="acv_pochtaddr_txt" type="string" data-size="250" title="" comment="ЕСК: Адрес-строкой для переписки /формируется триггером по коду KN_HP из справочника K_HOUSE/" as="acv_pochtaddr_txt" />
        <column table="a" column="acv_platporaddr_txt" type="string" data-size="250" title="" comment="ЕСК: Адрес-строкой в документах /заполняется пользователем/" as="acv_platporaddr_txt" />
        <column table="a" column="acv_prizn_active" type="number" title="" comment="ЕСК: Признак активности строки: 0-Активна/1-Удалена/2-Новая" as="acv_prizn_active" />
        <column table="a" column="acv_prizn_rezident_rf" type="number" title="" comment="ЕСК: Признак: 1-резидент РФ, 0-нерезидент РФ" as="acv_prizn_rezident_rf" />
        <column table="a" column="acv_prizn_vip" type="number" title="" comment="ЕСК: Признак VIP Контрагента:  0 - нормальный, 1 - важный, 2 - VIP" as="acv_prizn_vip" />
        <column table="a" column="acv_prizn_network_org" type="number" title="" comment="ЕСК: Признак: 1-Сетевая организация, 0-НеСетевая организация" as="acv_prizn_network_org" />
        <column table="a" column="pr_contr_esk_admin" type="number" column-mandatory="1" title="" comment="ЕСК: Признак 1/0: 1-проверено Администратором ИС ЕСК" as="pr_contr_esk_admin" />
        <column table="a" column="u_c" type="string" data-size="30" column-mandatory="1" title="" comment="ЕСК: Кто создал -  имя учетной записи пользователя / формируется триггером /" as="u_c" />
        <column table="a" column="d_c" type="date" column-mandatory="1" title="" comment="ЕСК: Дата создания / формируется триггером /" as="d_c" />
        <column table="a" column="u_m" type="string" data-size="30" title="" comment="ЕСК: Кто изменял в последний раз - имя учетной записи пользователя / формируется триггером /" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="ЕСК: Дата последнего изменения / формируется триггером /" as="d_m" />
        <column table="a" column="kn_customer_dbl_parent" type="number" title="" comment="ЕСК: ID Контрагента-родителя по связи    &quot;основная строка - дубль&quot;  /у &quot;основной строки&quot; в этом поле NULL/" as="kn_customer_dbl_parent" reference="as_customer" refcol="kn_customer" />
        <column table="a" column="id_infsys_m" type="number" column-mandatory="1" title="" comment="ЕСК: &lt;fk&gt; ID Информационной системы  последнего изменения  - обновляется в случае измен-ия строки" as="id_infsys_m" reference="ek_information_system" refcol="id_infsys" />
        <column table="a" column="d_d" type="date" title="" comment="ЕСК: Дата перевода Контрагента в архив" as="d_d" />
        <column table="a" column="acv_postalcode" type="string" data-size="6" title="" comment="Почтовый индекс" as="acv_postalcode" />
        <column table="a" column="acv_regioncode" type="string" data-size="2" title="" comment="Код субъекта Российской Федерации, который является учредителем (участником) юридического лица или на территории которого находится муниципальное образование, которое является учредителем (участником) юридического лица" as="acv_regioncode" />
        <column table="a" column="acv_region_type" type="string" data-size="30" title="" comment="Тип элемента регион (республика, край и т.п.)" as="acv_region_type" />
        <column table="a" column="acv_region_name" type="string" data-size="40" title="" comment="Наименование (элемент регион)" as="acv_region_name" />
        <column table="a" column="acv_district_type" type="string" data-size="30" title="" comment="Тип элемента район (район, улус и т.п.)" as="acv_district_type" />
        <column table="a" column="acv_district_name" type="string" data-size="40" title="" comment="Наименование (элемент район) " as="acv_district_name" />
        <column table="a" column="acv_city_type" type="string" data-size="30" title="" comment="Тип элемента город (город, волость и т.п.)" as="acv_city_type" />
        <column table="a" column="acv_city_name" type="string" data-size="40" title="" comment="Наименование (элемент город)" as="acv_city_name" />
        <column table="a" column="acv_place_type" type="string" data-size="30" title="" comment="Тип элемента населенный пункт (поселок, село и т.п.)" as="acv_place_type" />
        <column table="a" column="acv_place_name" type="string" data-size="40" title="" comment="Наименование (элемент населенный пункт)" as="acv_place_name" />
        <column table="a" column="acv_street_type" type="string" data-size="30" title="" comment="Тип адресного объекта улица (улица, проспект, переулок и т.п.)" as="acv_street_type" />
        <column table="a" column="acv_street_name" type="string" data-size="40" title="" comment="Наименование (элемент улица)" as="acv_street_name" />
        <column table="a" column="acv_house" type="string" data-size="50" title="" comment="Дом (владение и т.п.)" as="acv_house" />
        <column table="a" column="acv_flat" type="string" data-size="50" title="" comment="Квартира (офис и т.п.)" as="acv_flat" />
        <column table="a" column="acv_building" type="string" data-size="50" title="" comment="Корпус (строение и т.п.)" as="acv_building" />
        <column table="a" column="acv_kod_spr_okato" type="string" data-size="11" comment="ЕСК: Код ОКАТО /из справочника plan KS_OKATO/" as="acv_kod_spr_okato" />
        <column table="a" column="acv_egr_status" type="string" data-size="3" title="" comment="Код статуса по справочнику СЮЛСТ/СИПСТ" as="acv_egr_status" />
        <column table="a" column="acv_egr_status_name" type="string" data-size="500" title="" comment="Статус по справочнику СЮЛСТ/СИПСТ" as="acv_egr_status_name" />
        <column table="a" column="acv_egr_exclude_decision_date" type="date" title="" comment="Дата решения о предстоящем исключении из ЕГРЮЛ" as="acv_egr_exclude_decision_date" />
        <column table="a" column="acv_egr_sulpd" type="string" data-size="3" title="" comment="Код способа прекращения по справочнику СЮЛПД" as="acv_egr_sulpd" />
        <column table="a" column="acv_egr_sulpd_name" type="string" data-size="500" title="" comment="Способ прекращения по справочнику СЮЛПД" as="acv_egr_sulpd_name" />
        <column table="a" column="acv_egr_termination_date" type="date" title="" comment="Дата прекращения" as="acv_egr_termination_date" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="eas_customer_ver" as="a" />
        <query name="as_customer" as="kn_customer_dbl_parent" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="kn_customer_dbl_parent" />
            <column table="kn_customer_dbl_parent" column="kn_customer" />
          </call>
        </query>
        <query name="as_customer" as="kn_customer_parent" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="kn_customer_parent" />
            <column table="kn_customer_parent" column="kn_customer" />
          </call>
        </query>
        <query name="era_person" as="id_aperson_director" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="id_aperson_director" />
            <column table="id_aperson_director" column="id_aperson" />
          </call>
        </query>
        <query name="ek_information_system" as="id_infsys_m" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="id_infsys_m" />
            <column table="id_infsys_m" column="id_infsys" />
          </call>
        </query>
        <query name="ek_information_system" as="id_infsys" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="id_infsys" />
            <column table="id_infsys" column="id_infsys" />
          </call>
        </query>
        <query name="as_customer" as="kn_customer" join="left outer" dname="eas_customer_ver">
          <call function="=">
            <column table="a" column="kn_customer" />
            <column table="kn_customer" column="kn_customer" />
          </call>
        </query>
      </from>
    </query>
    <query name="hg_controlpoint_net_pl_getfsk" class="1" timestamp="12.01.2021 11:55:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hg_controlpoint_net_PL_getFSK.xml" haskeys="1">
      <params>
        <param name="cond" type="string" param-type="condition" />
      </params>
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="sname" type="string" title="Код" as="sname" key="0" />
        <column table="a" column="enscope_name" type="string" title="Сфера деят. в энергетике" as="enscope_name" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" key="0" />
        <column table="a" column="adr_ur" type="string" title="Юридический адрес" as="adr_ur" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="(select * from table(hg_controlpoint_net.pl_getfsk(:cond)))" as="a" />
      </from>
    </query>
    <query name="hk_directen" class="1" timestamp="09.09.2018 15:49:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_directen.xml" haskeys="1">
      <select>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="1" fixed="1" />
        <column table="a" column="kod_directen" type="number" comment="код направления измеряемой энергии" as="kod_directen" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="gname" type="string" title="" comment="альтернативное наименование направления энергии с точки зрения границы бп" as="gname" key="0" />
        <column table="a" column="gsign" type="number" title="" comment="математический знак, с которым потери при приведении к границе входят в общий объем энергии (мощности). математический знак представлен через коэффициенты 1 \ -1" as="gsign" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_directen" as="a" />
      </from>
    </query>
    <query name="hk_energy" class="1" timestamp="09.09.2018 15:46:53" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_energy.xml" haskeys="1">
      <select>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="1" fixed="1" />
        <column table="a" column="energy" type="number" title="" comment="код вида договорной величины" as="energy" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование договорной величины ( энергия, мощность, генерация)" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_energy" as="a" />
      </from>
    </query>
    <query name="hk_eoseparator" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_eoseparator.xml" haskeys="1">
      <select>
        <column table="a" column="kod_separator" type="number" column-mandatory="1" as="kod_separator" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="100" column-mandatory="1" title="Наименование" as="name" key="0" />
        <column table="a" column="sname" type="string" data-size="50" column-mandatory="1" title="" as="sname" key="0" />
        <column table="a" column="altname" type="string" data-size="130" column-mandatory="1" title="" comment="Альтернативное наименование, взятое из CIM модели описания сети (IEC 61970)" as="altname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_eoseparator" as="a" />
      </from>
    </query>
    <query name="hk_gisgkh" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_gisgkh.xml" haskeys="1">
      <select>
        <column table="a" column="pr_gkh" type="number" column-mandatory="1" title="" as="pr_gkh" key="1" fixed="1" />
        <column table="a" column="pr_gkh_name" type="string" data-size="20" title="" as="pr_gkh_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_gisgkh" as="a" />
      </from>
    </query>
    <query name="hk_srckind" class="1" title="Вид энергообъекта" timestamp="26.10.2017 17:51:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_srckind.xml" haskeys="1">
      <select>
        <column table="a" column="kod_srckind" type="number" key="1" as="kod_srckind" />
        <column table="a" column="name" type="string" title="Наименование типа" as="name" />
        <column table="a" column="sname" type="string" title="Краткое наименование" is-fact="1" agg="list" as="sname" fact="hk_srckind_sname" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hk_srckind" as="a" title="Вид энергообъекта">
          <dlink name="hr_eosrc" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eosrc" table="hr_eosrc" child="hr_eosrc" field="kod_srckind" parent="hk_srckind" back="hr_eosrc">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id_eo" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
      </from>
    </query>
    <query name="hk_systempu" class="1" timestamp="22.03.2017 21:22:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_systempu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_system" type="number" as="kod_system" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Принцип измерения" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_systempu" as="a" />
      </from>
    </query>
    <query name="hk_tpoint" class="1" timestamp="09.09.2018 15:16:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_tpoint.xml" haskeys="1">
      <select>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="1" fixed="1" />
        <column table="a" column="tpoint" type="number" title="" comment=" 0  - основная&#xA; 1  - транзит" as="tpoint" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="f_ttu" type="number" title="" comment="Признак технической точки учета  - 2, коммерческой - 0 и общей - 1" as="f_ttu" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_tpoint" as="a" />
      </from>
    </query>
    <query name="hk_v" class="1" title="Фактическое напряжение" timestamp="28.11.2017 00:50:48" order="nv" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_v.xml" haskeys="1">
      <select>
        <column table="a" column="kod_v" type="number" comment="первичный ключ" key="1" as="kod_v" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="nv" type="number" title="" comment="напряжение (в цифрах)" as="nv" />
        <column table="a" column="sv" type="string" title="Напряжение (кВ)" comment="напряжение ( текстом)" is-fact="1" agg="list" as="sv" fact="hk_v_sv" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="pr_t" type="number" title="" comment="признак &quot;типовое значение напряжения&quot; 1 - да, 0 - нет" as="pr_t" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hk_v" as="a" title="Фактическое напряжение">
          <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="kod_v" parent="hk_v" back="hr_eobject">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id_eo" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="hk_voltage" as="voltage" join="left outer" dname="hk_v" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
        <query name="hk_voltage_fact" as="voltage_fact" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hk_v">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage_fact" column="voltage" />
          </call>
        </query>
      </from>
      <order>
        <column column="nv" />
      </order>
    </query>
    <query name="hk_voltage" class="1" title="Уровень напряжения" timestamp="03.02.2019 01:49:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hk_voltage.xml" haskeys="1">
      <select>
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" key-dimension="voltage" as="voltage" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Уровень напряжения" comment="уровень напряжения (высокое, среднее низкое)" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Уровень напряжения" as="abbr" key="0" />
        <column table="a" column="kod_sort" type="number" comment="определяет порядок вывода в окне договорных значений (в дереве), а также как уникальный код идентификации для работы с деревом. определяет полрядок вывода значений по уровням напряжений в приложенииях 2.1 и 2.2" as="kod_sort" key="0" />
        <column table="a" column="tgf" type="number" title="" comment="нормативный коэффициент реактивной мощности" as="tgf" key="0" />
        <column table="a" column="pr_fict" type="number" title="" comment="признак фиктивной строки - обеспечивает отдельные режимы программы. (1/0 да/нет)" as="pr_fict" key="0" />
        <column table="a" column="pr_gener" type="number" title="" comment="признак &quot;с шин&quot; - 1" as="pr_gener" key="0" />
        <column table="a" column="kod_parent" type="number" comment="для родительского(физического) уровня" as="kod_parent" reference="hk_voltage" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="признак &quot;удалённый&quot; - 1" as="pr_active" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hk_voltage" as="a" title="Уровень напряжения" />
        <query name="hk_voltage" as="kod_parent" join="left outer" dname="hk_voltage" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_attpoint" class="1" timestamp="20.10.2022 13:47:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_attpoint.xml" haskeys="1">
      <select>
        <column table="a" column="kod_attpoint" type="number" column-mandatory="1" comment="Код точки присоединения" key="1" as="kod_attpoint" />
        <column table="a" column="kodp_net" type="number" column-mandatory="1" title="" comment="Код организации к сетям которой выполнено присоединение" as="kodp_net" reference="kr_org" refcol="kodp" />
        <column table="a" column="kodp_fsk" type="number" column-mandatory="1" title="" comment="Код ТСО (филиал териториальной сетевой организации) в зоне которого находится точка" as="kodp_fsk" reference="kr_org" refcol="kodp" />
        <column table="a" column="kodp_rsk" type="number" title="" comment="Код РЭС, в зоне которого находится точка учета" as="kodp_rsk" reference="kr_org" refcol="kodp" />
        <column table="a" column="kodp_pwrcompany" type="number" column-mandatory="1" title="" comment="Код сетевой организации (РСК, ССО, ПЭЭ), в группу потребителей которой входит точка рассматриваемого потребителя. Потребители входят одну группу, если они присоединены к данной сети непосредственно или опосредовано (через сети ИВС и безхозяйные сети)." as="kodp_pwrcompany" reference="kr_org" refcol="kodp" />
        <column table="a" column="kodnagruzpotreb" type="number" title="" comment="Код группы энергопринимающих устройств (Код группы нагрузок)" as="kodnagruzpotreb" reference="hr_nugruzpotreb" refcol="kodnagruzpotreb" />
        <column table="a" column="eobj_id" type="number" column-mandatory="1" title="" comment="Код оборудования, к которому выполнено присоединение" as="eobj_id" reference="hr_eobject" refcol="eobj_id" />
        <column table="a" column="kod_attpoint_type" type="number" column-mandatory="1" as="kod_attpoint_type" reference="hk_attpoint_type" refcol="kod_attpoint_type" />
        <column table="a" column="attpoint_name" type="string" data-size="1000" column-mandatory="1" title="" comment="Описание точки присоединения (подключения)" as="attpoint_name" />
        <column table="a" column="desc_bp" type="string" data-size="1000" title="" comment="Описание границ балансовой принадлежности объектов электроэнергетики (энергопринимающих устройств)" as="desc_bp" />
        <column table="a" column="desc_eo" type="string" data-size="1000" title="" comment="Описание границ эксплуатационной ответственности сторон" as="desc_eo" />
        <column table="a" column="pillar_num" type="string" data-size="130" title="" comment="Номер опоры" as="pillar_num" />
        <column table="a" column="kod_src" type="number" comment="Код центра питания (ПС)" as="kod_src" reference="hr_eosrc" refcol="eobj_id" />
        <column table="a" column="kod_v" type="number" column-mandatory="1" comment="Первичный ключ" as="kod_v" reference="hk_v" refcol="kod_v" />
        <column table="a" column="d_create" type="date" column-mandatory="1" title="" comment="Дата начала дейсвия" as="d_create" />
        <column table="a" column="d_finish" type="date" title="" comment="Дата окончания действия" as="d_finish" />
        <column table="a" column="es_id" type="string" data-size="240" title="" comment="External system identifier «идентификатор внешней системы»" as="es_id" />
        <column table="a" column="kodp_losscompany" type="number" column-mandatory="1" title="" comment="Код сетевой организации (РСК, СОО, ПЭЭ), на которую отнесены потери." as="kodp_losscompany" reference="kr_org" refcol="kodp" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_attpoint" as="a" />
        <query name="hr_eosrc" as="kod_src" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kod_src" />
            <column table="kod_src" column="eobj_id" />
          </call>
        </query>
        <query name="hk_attpoint_type" as="kod_attpoint_type" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kod_attpoint_type" />
            <column table="kod_attpoint_type" column="kod_attpoint_type" />
          </call>
        </query>
        <query name="hk_v" as="kod_v" join="left outer" dname="hr_attpoint" title="Фактическое напряжение">
          <call function="=">
            <column table="a" column="kod_v" />
            <column table="kod_v" column="kod_v" />
          </call>
        </query>
        <query name="hr_nugruzpotreb" as="kodnagruzpotreb" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodnagruzpotreb" />
            <column table="kodnagruzpotreb" column="kodnagruzpotreb" />
          </call>
        </query>
        <query name="hr_eobject" as="eobj_id" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="kr_org" as="kodp_net" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodp_net" />
            <column table="kodp_net" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_fsk" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodp_fsk" />
            <column table="kodp_fsk" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_rsk" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodp_rsk" />
            <column table="kodp_rsk" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_pwrcompany" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodp_pwrcompany" />
            <column table="kodp_pwrcompany" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_losscompany" join="left outer" dname="hr_attpoint">
          <call function="=">
            <column table="a" column="kodp_losscompany" />
            <column table="kodp_losscompany" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point" class="1" timestamp="02.11.2017 15:46:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point" type="number" comment="Первичный ключ" as="kod_bal_point" key="1" fixed="1" />
        <column table="a" column="tpoint" type="number" title="" comment="Тип точки  (из hk_tpoint)" as="tpoint" reference="hk_tpoint" refcol="tpoint" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="remark" type="string" title="" comment="Примечания" as="remark" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата создания" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата архивации" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="a" column="nomer" type="number" title="" comment="Номер точки" as="nomer" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="mesto" type="string" title="" comment="Место расположения" as="mesto" key="0" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="kod_bal_pointmain" type="number" comment="Ссылка на старшую точку" as="kod_bal_pointmain" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="dayofmeter" type="number" title="" comment="Дата снятия показаний" as="dayofmeter" reference="kk_day_pokaz" refcol="day_pokaz" key="0" />
        <column table="tpoint" column="name" type="string" as="name_point" title="Тип точки" key="0" />
        <column table="a" column="kodp_fsk" type="number" title="" as="kodp_fsk" key="0" />
        <column table="a" column="kodp_rsk" type="number" title="" as="kodp_rsk" reference="hv_elter_org" refcol="kodp" key="0" />
        <column table="voltage_fact" column="abbr" as="volt_fact_abbr" is-fact="1" agg="list" fact="hr_bal_point_volt_fact_abbr" key="0" />
        <column table="kod_v" column="sv" is-fact="1" agg="list" fact="hr_bal_point_fact_volt_sv" as="sv" key="0" />
        <const type="number" as="cnt" fact="hr_bal_point_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point" as="a">
          <dlink name="hr_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_bal_point_pu" table="hr_bal_point_pu" child="hr_bal_point_pu" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_pu">
            <dimlink name="kod_tippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_bal_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_bal_point_har" table="hr_bal_point_har" child="hr_bal_point_har" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_har">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="eobj_id" as="eobj_id1" table="hr_eobject" child="hr_bal_point" field="eobj_id" parent="hr_eobject" back="hr_bal_point">
            <link name="kod_v" as="kod_v" table="hk_v" child="hr_eobject" field="kod_v" parent="hk_v" back="hr_eobject" title="Фактическое напряжение">
              <link name="voltage_fact" as="voltage_fact" table="hk_voltage_fact" child="hk_v" field="voltage_fact" parent="hk_voltage_fact" back="hk_v" />
            </link>
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="voltage_fact" />
          </link>
          <link name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id" table="hr_eobject" child="hr_bal_point" field="eobj_id" parent="hr_eobject" back="hr_bal_point">
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="kk_day_pokaz" as="day_pokaz" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="dayofmeter" />
            <column table="day_pokaz" column="day_pokaz" />
          </call>
        </query>
        <query name="hk_tpoint" as="tpoint" join="left outer" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="tpoint" />
            <column table="tpoint" column="tpoint" />
          </call>
        </query>
        <query name="hr_eobject" as="eobj_id" join="left outer" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left outer" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="kod_bal_pointmain" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="kodp_fsk" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="hv_elter_org" as="kod_elter" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point" title="Огранизации , которые явл. эксплуатац. подразделением">
          <call function="=">
            <column table="a" column="kodp_rsk" />
            <column table="kod_elter" column="kodp" />
          </call>
        </query>
        <query name="hv_seti" as="kod_seti" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point">
          <call function="=">
            <column table="a" column="kodp_fsk" />
            <column table="kod_seti" column="kod" />
          </call>
        </query>
        <query name="hr_bal_point_src" as="src" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point" title="Центры питания точек тех. учёта">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="src" column="kod_bal_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_askue" class="1" timestamp="29.09.2017 02:16:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_askue.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_askue" type="number" as="kod_bal_point_askue" key="1" fixed="1" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_ch_askue" type="number" comment="Код канала АСКУЭ" as="kod_ch_askue" reference="hr_chan_askue" refcol="kod_ch_askue" key="0" />
        <column table="a" column="kod_sm_chan" type="number" comment="Код канала УСПД" as="kod_sm_chan" reference="hr_sm_chan" refcol="kod_sm_chan" key="0" />
        <column table="a" column="kod_bal_point" type="number" comment="Код тту" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <call function="()" as="pr" type="number" is-fact="1" agg="max" fact="hr_bal_point_askue_pr" key="0">
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_askue" as="a" />
        <query name="hr_bal_point" as="kod_bal_point" join="left inner" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_askue">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="hr_sm_chan" as="kod_sm_chan" join="left outer" dname="hr_bal_point_askue">
          <call function="=">
            <column table="a" column="kod_sm_chan" />
            <column table="kod_sm_chan" column="kod_sm_chan" />
          </call>
        </query>
        <query name="hr_chan_askue" as="kod_ch_askue" join="left outer" dname="hr_bal_point_askue">
          <call function="=">
            <column table="a" column="kod_ch_askue" />
            <column table="kod_ch_askue" column="kod_ch_askue" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_en" class="1" timestamp="23.10.2017 22:06:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_en.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_en" type="number" key="1" as="kod_bal_point_en" />
        <column table="a" column="energy" type="number" title="" comment="код вида договорной величины" as="energy" reference="hk_energy" refcol="energy" />
        <column table="a" column="kod_directen" type="number" comment="код направления измеряемой энергии" as="kod_directen" reference="hk_directen" refcol="kod_directen" />
        <column table="a" column="kod_bal_point_pu" type="number" comment="Код прибора технического учета" as="kod_bal_point_pu" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата начала действия" dimension="dat_s" as="dat_s" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата окончания действия" dimension="dat_po" as="dat_po" />
        <column table="a" column="remark" type="string" title="" comment="Примечания" as="remark" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" />
        <column table="a" column="rkoeff" type="number" title="" comment="Расчетный коэффициент. Не используется.&#xA;Перенесен hr_bal_point_ini" as="rkoeff" />
        <column table="a" column="kod_bal_point_askue" type="number" is-fact="1" agg="max" fact="hr_pnt_bal_en_askue" as="kod_bal_point_askue" reference="hr_bal_point_askue" refcol="kod_bal_point_askue" />
        <call function="||" as="energy_abbr" is-fact="1" agg="list" fact="hr_bal_point_en_energy_abbr">
          <column table="energy" column="abbr" />
          <column table="kod_directen" column="abbr" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_bal_point_en" as="a">
          <link name="kod_bal_point_pu_all" as="kod_bal_point_pu_all" table="hr_bal_point_pu_all" child="hr_bal_point_en" field="kod_bal_point_pu_all" parent="hr_bal_point_pu_all" back="hr_bal_point_en">
            <dimlink name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_directen" as="kod_directen" join="left inner" dname="hr_bal_point_en">
          <call function="=">
            <column table="a" column="kod_directen" />
            <column table="kod_directen" column="kod_directen" />
          </call>
        </query>
        <query name="hk_energy" as="energy" join="left inner" dname="hr_bal_point_en">
          <call function="=">
            <column table="a" column="energy" />
            <column table="energy" column="energy" />
          </call>
        </query>
        <query name="hr_bal_point_pu" as="kod_bal_point_pu" join="left inner" dname="hr_bal_point_en">
          <call function="=">
            <column table="a" column="kod_bal_point_pu" />
            <column table="kod_bal_point_pu" column="kod_bal_point_pu" />
          </call>
        </query>
        <query name="hr_bal_point_askue" as="kod_bal_point_askue" join="left outer" dname="hr_bal_point_en">
          <call function="=">
            <column table="a" column="kod_bal_point_askue" />
            <column table="kod_bal_point_askue" column="kod_bal_point_askue" />
          </call>
        </query>
        <query name="hr_bal_point_pu_all" as="kod_bal_point_pu_all" join="left inner" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_en">
          <call function="=">
            <column table="a" column="kod_bal_point_pu" />
            <column table="kod_bal_point_pu_all" column="kod_bal_point_pu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_har" class="1" timestamp="21.09.2017 12:09:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_har.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_har" type="number" as="kod_bal_point_har" key="1" fixed="1" />
        <column table="a" column="kod_bal_point" type="number" comment="Код точки технического учета" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="method" type="number" title="" comment="Метод учета" as="method" reference="hk_method" refcol="method" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата начала действия" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата окончания действия" as="dat_po" key="0" />
        <column table="a" column="pr_poteri" type="number" title="" comment="Признак указывать потери вручную ( 1 )" as="pr_poteri" key="0" />
        <column table="a" column="rkoeff" type="number" title="" comment="Расчетный коэффициент - не используется (перенесен в hr_bal_point_en)." as="rkoeff" key="0" />
        <column table="a" column="remark" type="string" title="" comment="Примечания" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="prizn_parent" type="number" title="" comment="Признак дочерности точки - не используется (введено понятие старшей точки)" as="prizn_parent" key="0" />
        <column table="a" column="kod_sp" type="number" comment="Не используется.. устарело" as="kod_sp" reference="hr_sp" refcol="kod_sp" key="0" />
        <column table="a" column="pr_sp" type="number" title="" comment="Признак принадлежности к сечению поставки" as="pr_sp" key="0" />
        <column table="a" column="pr_commerce" type="number" title="" comment="Указывет, что техническая точка одновременно является и коммерческой" as="pr_commerce" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="Код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="voltage" column="abbr" as="volt_abbr" is-fact="1" agg="list" fact="hr_bal_point_har_volt_abbr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_har" as="a">
          <link name="kod_bal_point" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_har" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_har">
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_method" as="method" join="left inner" dname="hr_bal_point_har">
          <call function="=">
            <column table="a" column="method" />
            <column table="method" column="method" />
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left inner" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_har">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="hr_sp" as="kod_sp" join="left outer" dname="hr_bal_point_har">
          <call function="=">
            <column table="a" column="kod_sp" />
            <column table="kod_sp" column="kod_sp" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_har" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_ini" class="1" timestamp="23.10.2017 22:06:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_ini.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_ini" type="number" as="kod_bal_point_ini" key="1" fixed="1" />
        <column table="a" column="rkoeff" type="number" title="" comment="Расчетный коэффициент" as="rkoeff" key="0" />
        <column table="a" column="kod_bal_point_en" type="number" comment="Код вида и направления энергии" as="kod_bal_point_en" reference="hr_bal_point_en" refcol="kod_bal_point_en" key="0" />
        <column table="a" column="kodinterval" type="number" title="" comment="Код периода" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <column table="a" column="pu_ini" type="number" title="" comment="Начальные показания" as="pu_ini" key="0" />
        <column table="a" column="pu_end" type="number" title="" comment="Конечные показания" as="pu_end" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата начала действия" dimension="dat_s" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата окончания действия" dimension="dat_po" as="dat_po" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="kodinterval" column="name" as="zona_day" type="string" is-fact="1" agg="list" fact="hr_bal_point_ini_zona_day" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_ini" as="a">
          <link name="kod_bal_point_en" as="kod_bal_point_en" table="hr_bal_point_en" child="hr_bal_point_ini" field="kod_bal_point_en" parent="hr_bal_point_en" back="hr_bal_point_ini">
            <dimlink name="kod_bal_point_pu_all" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage" is-final-dimension="1" dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="hr_bal_point_ini">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
        <query name="hr_bal_point_en" as="kod_bal_point_en" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_ini">
          <call function="=">
            <column table="a" column="kod_bal_point_en" />
            <column table="kod_bal_point_en" column="kod_bal_point_en" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_pu" class="1" timestamp="23.10.2017 22:06:29" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point_pu" type="number" as="kod_bal_point_pu" key="1" fixed="1" />
        <column table="a" column="kod_bal_point" type="number" comment="Код точки технического учета" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="Дата установки" dimension="dat_s" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="Дата снятия" dimension="dat_po" as="dat_po" key="0" />
        <column table="a" column="razr" type="number" title="" comment="Разрядность целой части" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" comment="Разрядность дробной части" as="razr2" key="0" />
        <column table="a" column="kod_tippu" type="number" comment="код типа Сч осн" as="kod_tippu" reference="hs_tippu" refcol="kod_tippu" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="prim" type="string" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="nom_pu" type="string" title="" comment="Номер прибора учета" is-fact="1" agg="list" as="nom_pu" fact="hr_bal_point_pu_nom_pu" key="0" />
        <column table="a" column="kod_pu_u" type="number" comment="Код счетчика индивид" as="kod_pu_u" reference="hr_pu_u" refcol="kod_pu_u" key="0" />
        <column table="a" column="doc_attach" type="string" title="" comment="наименования присоединенных файлов" as="doc_attach" key="0" />
        <column table="a" column="pr_ikk" type="number" title="" comment="наличие ИКК  1-есть" as="pr_ikk" key="0" />
        <column table="a" column="plomba_ikk" type="string" title="" comment="номер пломбы ИКК" as="plomba_ikk" key="0" />
        <column table="a" column="dat_plomba_ikk" type="date" title="" comment="дата опломбирования ИКК" as="dat_plomba_ikk" key="0" />
        <column table="a" column="kodsx" type="number" title="" comment="схема подключения" as="kodsx" reference="hk_sx" refcol="kodsx" key="0" />
        <column table="a" column="poteri_u_fact" type="number" title="" comment="фактические потери напряжения в цепи счетчик -&gt; ТН" as="poteri_u_fact" key="0" />
        <column table="a" column="vkl_aiis" type="string" title="" comment="Т-телеметрический; Ц-цифровой; Т,Ц-телеметрич и цифровой; пусто-отсутствует" as="vkl_aiis" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_pu" as="a">
          <link name="kod_tippu" as="kod_tippu" table="hs_tippu" child="hr_bal_point_pu" field="kod_tippu" parent="hs_tippu" back="hr_bal_point_pu">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_bal_point" as="kod_bal_point" table="hr_bal_point" child="hr_bal_point_pu" field="kod_bal_point" parent="hr_bal_point" back="hr_bal_point_pu">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_sx" as="kodsx" join="left outer" dname="hr_bal_point_pu">
          <call function="=">
            <column table="a" column="kodsx" />
            <column table="kodsx" column="kodsx" />
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_pu">
          <call function="=">
            <column table="a" column="kod_bal_point" />
            <column table="kod_bal_point" column="kod_bal_point" />
          </call>
        </query>
        <query name="hs_tippu" as="kod_tippu" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_bal_point_pu">
          <call function="=">
            <column table="a" column="kod_tippu" />
            <column table="kod_tippu" column="kod_tippu" />
          </call>
        </query>
        <query name="hr_pu_u" as="kod_pu_u" join="left outer" dname="hr_bal_point_pu">
          <call function="=">
            <column table="a" column="kod_pu_u" />
            <column table="kod_pu_u" column="kod_pu_u" />
          </call>
        </query>
        <query join="left outer" name="hs_pktippu" as="kod_pktippu" dname="hr_bal_point_pu">
          <call function="=">
            <column table="kod_tippu" column="kod_pktippu" />
            <column table="kod_pktippu" column="kod_pktippu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bal_point_src" class="1" timestamp="26.09.2017 00:20:14" title="Центры питания точек тех. учёта" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bal_point_src.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal_point" type="number" as="kod_bal_point" key="1" fixed="1" />
        <column table="a" column="id_senter_nut" type="number" title="" as="id_senter_nut" key="0" />
        <column table="a" column="name_senter_nut" type="string" title="" as="name_senter_nut" key="0" />
        <column table="a" column="id_fider_nut" type="string" title="" as="id_fider_nut" key="0" />
        <column table="a" column="name_fider_nut" type="string" title="" as="name_fider_nut" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bal_point_src" as="a" title="Центры питания точек тех. учёта" />
      </from>
    </query>
    <query name="hr_bu_akt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bu_akt.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bu_akt" type="number" comment="код акта безучетного ползования" as="kod_bu_akt" key="1" fixed="1"></column>
        <column table="a" column="num" type="string" title="Номер акта" comment="номер акта на безучетное пользование" as="num" key="0"></column>
        <column table="a" column="dat" type="date" title="Дата акта" comment="дата акта на безучетное пользование" as="dat" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0"></column>
        <column table="a" column="kod_vid_act" type="number" as="kod_vid_act" key="0"></column>
        <column table="a" column="date_isp" type="date" title="Дата признания акта" comment="дата признания акта (дата возникновения сальдо) - дата начала отражения суммы по акту в бухгалтерском учете" as="date_isp" key="0"></column>
        <column table="a" column="ym" type="number" title="" comment="период" as="ym" key="0"></column>
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0"></column>
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0"></column>
        <column table="a" column="kod_bu_org" type="number" comment="код организации, составившей акт" as="kod_bu_org" reference="hr_bu_org" refcol="kod_bu_org" key="0"></column>
        <column table="a" column="date_cntrl" type="date" title="" comment="дата последней контрольной проверки контрольной" as="date_cntrl" key="0"></column>
        <column table="a" column="date_norm" type="date" title="" comment="дата предполагаемой контрольной проверки ( устанавливается как дата акта минус 6 месяцев, если контрольной проверки не проводилось или она была раньше чем за 6 месяцев до даты составления акта)" as="date_norm" key="0"></column>
        <column table="a" column="prizn_mkd" type="number" title="" comment="признак, что юл находится в многоквартирном доме с общедомовым прибором учета" as="prizn_mkd" key="0"></column>
        <column table="a" column="prizn_ppris" type="number" title="" comment="признак, что расчет акта производить по присоединенной мощности" as="prizn_ppris" key="0"></column>
        <column table="a" column="kod_bu_calc_type" type="number" comment="0 - по нагрузке, 1 - по расходу" as="kod_bu_calc_type" reference="hk_bu_calc_type" refcol="kod_bu_calc_type" key="0"></column>
        <column table="a" column="kodp" type="number" title="" comment="акт получен от" as="kodp" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="kod_bu_akt_parent" type="number" as="kod_bu_akt_parent" reference="hr_bu_akt" refcol="kod_bu_akt" key="0"></column>
        <column table="a" column="tip" type="number" title="" comment="null-без расчета, 0_предв., 1-оконч." as="tip" key="0"></column>
        <column table="a" column="dat_create" type="date" title="" comment="дата занесения акта  в базу" as="dat_create" key="0"></column>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0"></column>
        <column table="a" column="kod_dopdoc" type="number" as="kod_dopdoc" key="0"></column>
        <call function="if" as="pr_sf" key="0">
          <call function="is not null">
            <column table="sr_facvip" column="kod_sf" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="date to ym" as="akt_bu_ym" title="Период составления акта б/п" key="0">
          <column table="a" column="dat" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bu_akt" as="a">
          <dlink name="sr_facvip" as="sr_facvip" table="sr_facvip" child="sr_facvip" field="kod_bu_akt" parent="hr_bu_akt" back="sr_facvip">
            <where>
              <call function="=">
                <column table="sr_facvip" column="vid_real" />
                <const>2</const>
              </call>
            </where>
          </dlink>
        </table>
        <query name="hr_bu_akt" as="kod_bu_akt_parent" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kod_bu_akt_parent"></column>
            <column table="kod_bu_akt_parent" column="kod_bu_akt"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kod_emp"></column>
            <column table="kod_emp" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kod_numobj"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
        <query name="hr_bu_org" as="kod_bu_org" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kod_bu_org"></column>
            <column table="kod_bu_org" column="kod_bu_org"></column>
          </call>
        </query>
        <query name="hk_bu_calc_type" as="kod_bu_calc_type" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kod_bu_calc_type"></column>
            <column table="kod_bu_calc_type" column="kod_bu_calc_type"></column>
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_bu_akt">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dname="hr_bu_akt" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t"></column>
            <column table="vid_t" column="vid_t"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="hr_bu_org" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_bu_org.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bu_org" type="number" comment="код организации, составившей акт" as="kod_bu_org" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Организация составившая акт" comment="наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_bu_org" as="a" />
      </from>
    </query>
    <query name="hr_calc_variant" class="1" timestamp="20.10.2022 12:39:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_calc_variant.xml" haskeys="1">
      <select>
        <column table="a" column="kod_variant" type="number" column-mandatory="1" key="1" as="kod_variant" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" />
        <column table="a" column="num_variant" type="number" title="" as="num_variant" />
        <column table="a" column="name" type="string" data-size="50" title="Наименование" as="name" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="" as="pr_active" />
        <column table="a" column="pr_notransit" type="number" column-mandatory="1" title="" as="pr_notransit" />
        <column table="a" column="kod_typevariant" type="number" comment="код типа варианта расчета" as="kod_typevariant" reference="hk_type_variant" refcol="kod_typevariant" />
        <column table="a" column="ym_s" type="number" column-mandatory="1" title="" comment="Период c" as="ym_s" />
        <column table="a" column="ym_po" type="number" title="" comment="Период по" as="ym_po" />
        <column table="a" column="pr_effect" type="number" column-mandatory="1" title="" comment="Участвует в расч. Эффекта  Дв \ Нет" as="pr_effect" />
        <column table="a" column="pr_main" type="number" column-mandatory="1" title="" comment="Признак осн. варианта (Да \ Нет)" as="pr_main" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" />
        <column table="a" column="u_m" type="string" data-size="130" title="" comment="Кем изменено" as="u_m" />
        <column table="a" column="prim" type="string" data-size="240" title="" comment="Примечание" as="prim" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_calc_variant" as="a" />
        <query name="hk_type_variant" as="kod_typevariant" join="left outer" dname="hr_calc_variant">
          <call function="=">
            <column table="a" column="kod_typevariant" />
            <column table="kod_typevariant" column="kod_typevariant" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="hr_calc_variant" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_eobject" class="1" timestamp="26.10.2017 17:27:02" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_eobject.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" is-fact="1" agg="list" as="name" fact="hr_eobject_name" key="0" />
        <column table="a" column="bal_id" type="number" title="" as="bal_id" reference="kr_org_group" refcol="kod_org" key="0" />
        <column table="a" column="expl_id" type="number" title="" as="expl_id" reference="kr_org" key="0" />
        <column table="a" column="parent_id" type="number" title="" as="parent_id" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" reference="hk_eoseparator" refcol="kod_separator" key="0" />
        <column table="a" column="deleted" type="number" title="" comment="признак того что объект удален. (можно считать перенесен в архив)" as="deleted" key="0" />
        <column table="a" column="synchronized" type="number" title="" comment="признак того, что рассинхронизации по этой строке нет" as="synchronized" key="0" />
        <column table="a" column="imported" type="number" title="" comment="признак того, что объект импортирован" as="imported" key="0" />
        <column table="a" column="coment" type="string" title="" comment="комментарий" as="coment" key="0" />
        <column table="a" column="kod_v" type="number" comment="первичный ключ" as="kod_v" reference="hk_v" refcol="kod_v" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_eobject" as="a">
          <link name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_v" table="hk_v" child="hr_eobject" field="kod_v" parent="hk_v" back="hr_eobject" title="Фактическое напряжение">
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="parent_id_ext" dimension="1" is-final-dimension="1" is-private-dimension="1" as="parent_id_ext" table="hr_eosrc" child="hr_eobject" field="parent_id_ext" parent="hr_eosrc" back="hr_eobject">
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_org_group" as="kod_org_group" table="kr_org_group" child="hr_eobject" field="kod_org_group" parent="kr_org_group" back="hr_eobject" />
          <dlink name="hr_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_bal_point" table="hr_bal_point" child="hr_bal_point" field="eobj_id" parent="hr_eobject" back="hr_bal_point" />
          <dlink name="hr_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="eobj_id" parent="hr_eobject" back="hr_point_har" title="Характеристика ТУ">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="kr_org" as="kod_org" join="left outer" dname="hr_eobject">
          <call function="=">
            <column table="a" column="expl_id" />
            <column table="expl_id" column="kodp" />
          </call>
        </query>
        <query name="hk_eoseparator" as="kod_separator" join="left outer" dname="hr_eobject">
          <call function="=">
            <column table="a" column="kod_separator" />
            <column table="kod_separator" column="kod_separator" />
          </call>
        </query>
        <query name="hk_v" as="kod_v" join="left outer" dname="hr_eobject" title="Фактическое напряжение">
          <call function="=">
            <column table="a" column="kod_v" />
            <column table="kod_v" column="kod_v" />
          </call>
        </query>
        <query name="hr_eobject" as="parent_id" join="left outer" dname="hr_eobject">
          <call function="=">
            <column table="a" column="parent_id" />
            <column table="parent_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eosrc" as="parent_id_ext" join="left outer" dname="hr_eobject">
          <call function="=">
            <column table="a" column="parent_id" />
            <column table="parent_id_ext" column="eobj_id" />
          </call>
        </query>
        <query name="kr_org_group" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_org_group" dname="hr_eobject">
          <call function="=">
            <column table="a" column="bal_id" />
            <column table="kod_org_group" column="kod_org" />
          </call>
        </query>
        <query name="hv_eobject_senter_nut" as="kod_eobject_senter_nut" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_eobject" title="Центры питания ЭО">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="kod_eobject_senter_nut" column="eobj_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_eofider" class="1" timestamp="25.11.2022 12:33:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_eofider.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" column-mandatory="1" title="" key="1" as="eobj_id" />
        <column table="a" column="kod_line" type="number" column-mandatory="1" as="kod_line" reference="hk_typeline" refcol="kod_line" />
        <column table="a" column="dnum" type="string" data-size="100" column-mandatory="1" title="" as="dnum" />
        <column table="a" column="fname" type="string" data-size="100" column-mandatory="1" title="" as="fname" />
        <column table="a" column="buildmethod" type="string" data-size="10" title="" as="buildmethod" />
        <column table="a" column="kod_achr2" type="number" as="kod_achr2" reference="hk_achr2" refcol="kod_achr2" />
        <column table="a" column="kod_chapv" type="number" as="kod_chapv" reference="hk_chapv" refcol="kod_chapv" />
        <column table="a" column="kod_otklfid" type="number" as="kod_otklfid" reference="hk_ochotkl" refcol="kod_otklfid" />
        <column table="a" column="kod_achr1" type="number" as="kod_achr1" reference="hk_achr1" refcol="kod_achr1" />
        <column table="a" column="supply_id" type="number" title="" as="supply_id" reference="hr_eofider" refcol="eobj_id" />
        <column table="a" column="is_supply" type="number" column-mandatory="1" title="" comment="принимает значение числа запитанных от него фидеров" as="is_supply" />
        <column table="a" column="is_dependent" type="number" column-mandatory="1" title="" comment="принимает значение 1/0 , в зависимости от того: участвует в общей схеме или нет (соответствено)" as="is_dependent" />
        <column table="a" column="kod_saon" type="number" as="kod_saon" reference="hk_saon" refcol="kod_saon" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="kod_spotkl" type="number" as="kod_spotkl" reference="hk_spotkl" refcol="kod_spotkl" />
        <column table="a" column="kod_otklfid_m" type="number" as="kod_otklfid_m" reference="hk_ochotkl" refcol="kod_otklfid" />
        <column table="a" column="pr_otkl_money" type="number" column-mandatory="1" title="" comment="Признак того, что этот фидер (присоединение) явл. элементом схемы, накотором могут выполнить отключение потребителей при неоплате Эл.Энергии" as="pr_otkl_money" />
        <column table="a" column="pr_dummy" type="number" column-mandatory="1" title="" comment="признак того, что элемент был выдуман, чтобы завершить схему и название ему дано условно." as="pr_dummy" />
        <column table="a" column="disp_err" type="number" column-mandatory="1" title="" comment="Признак наличия ошибки несоответствия энергорайонов в присоединени" as="disp_err" />
        <column table="a" column="l" type="number" title="" comment="Длина участка линии (км)" as="l" />
        <column table="a" column="pr_main" type="number" column-mandatory="1" title="" comment="Признак &quot;Магистральный участок&quot;" as="pr_main" />
        <column table="a" column="imported" type="number" column-mandatory="1" title="" as="imported" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_eofider" as="a" />
        <query name="hk_typeline" as="kod_line" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_line" />
            <column table="kod_line" column="kod_line" />
          </call>
        </query>
        <query name="hr_eobject" as="eobj_id" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eofider" as="supply_id" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="supply_id" />
            <column table="supply_id" column="eobj_id" />
          </call>
        </query>
        <query name="hk_achr1" as="kod_achr1" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_achr1" />
            <column table="kod_achr1" column="kod_achr1" />
          </call>
        </query>
        <query name="hk_achr2" as="kod_achr2" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_achr2" />
            <column table="kod_achr2" column="kod_achr2" />
          </call>
        </query>
        <query name="hk_chapv" as="kod_chapv" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_chapv" />
            <column table="kod_chapv" column="kod_chapv" />
          </call>
        </query>
        <query name="hk_ochotkl" as="kod_otklfid" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_otklfid" />
            <column table="kod_otklfid" column="kod_otklfid" />
          </call>
        </query>
        <query name="hk_ochotkl" as="kod_otklfid_m" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_otklfid_m" />
            <column table="kod_otklfid_m" column="kod_otklfid" />
          </call>
        </query>
        <query name="hk_saon" as="kod_saon" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_saon" />
            <column table="kod_saon" column="kod_saon" />
          </call>
        </query>
        <query name="hk_spotkl" as="kod_spotkl" join="left outer" dname="hr_eofider">
          <call function="=">
            <column table="a" column="kod_spotkl" />
            <column table="kod_spotkl" column="kod_spotkl" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_eosrc" class="1" timestamp="26.10.2017 16:25:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_eosrc.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" key="1" fixed="1" />
        <column table="a" column="dnum" type="string" title="" as="dnum" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="fname" type="string" title="" as="fname" key="0" />
        <column table="a" column="power" type="number" title="" as="power" key="0" />
        <column table="a" column="addr_id" type="number" title="" as="addr_id" key="0" />
        <column table="a" column="kod_srckind" type="number" as="kod_srckind" reference="hk_srckind" refcol="kod_srckind" key="0" />
        <column table="a" column="addrkind" type="string" title="" as="addrkind" key="0" />
        <column table="a" column="schema_invalid" type="number" title="" comment="Флаг показывает, что схема ЭО недостоверна" as="schema_invalid" key="0" />
        <column table="a" column="kod_zone" type="number" comment="код ценовой зоны" as="kod_zone" reference="hs_price_zone" refcol="kod_zone" key="0" />
        <column table="a" column="is_uc" type="number" title="" comment="Признак того, что энергообъет в настоящее время находится в стадии строительства. В АСУСЭ такие энергообъекты не могут быть включены в схему. Но в них может быть описано оборудование.&#xA;IS_UN = under construction" as="is_uc" key="0" />
        <column table="a" column="kod_srcnode" type="number" as="kod_srcnode" reference="hs_srcnode" refcol="kod_srcnode" key="0" />
        <column table="a" column="is_closed" type="number" title="" comment="Признак того что объект закрыт" as="is_closed" key="0" />
        <column table="a" column="yearofplugin" type="number" title="" comment="Год ввода в эксплуатацию" as="yearofplugin" key="0" />
        <column table="a" column="yearofpluginafterreconstr" type="number" title="" comment="Год ввода в эксплуатацию после реконструкции" as="yearofpluginafterreconstr" key="0" />
        <column table="a" column="kod_currentstate" type="number" comment="Код индекса загрузки ЦП (справочник Россети)" as="kod_currentstate" reference="hk_srccurrentstate" refcol="kod_currentstate" key="0" />
        <column table="a" column="kod_planstate" type="number" comment="Код индекса планов ЦП (справочник Россети)" as="kod_planstate" reference="hk_srcplanstate" refcol="kod_planstate" key="0" />
        <column table="a" column="kodp_customerservicecenter" type="number" title="" comment="Код центра обслуживания клиентов, за которым закреплен энергообъект" as="kodp_customerservicecenter" reference="kr_org" refcol="kodp" key="0" />
        <call function="||-" is-fact="1" as="name_obj" agg="list" fact="hr_eosrc_name_obj" key="0">
          <column table="kod_srckind" column="sname" />
          <column table="this" column="fname" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_eosrc" as="a">
          <link name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_srckind" table="hk_srckind" child="hr_eosrc" field="kod_srckind" parent="hk_srckind" back="hr_eosrc" title="Вид энергообъекта" />
          <link name="eobj_id_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id_src" table="hr_eobject_src" child="hr_eosrc" field="eobj_id_src" parent="hr_eobject_src" back="hr_eosrc" title="Энергообъекты">
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="parent_id_ext" parent="hr_eosrc" back="hr_eobject">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="hr_eosrc_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eosrc_elnet" table="hr_eosrc_elnet" child="hr_eosrc_elnet" field="kod_eosrc" parent="hr_eosrc" back="hr_eosrc_elnet" />
        </table>
        <query name="hk_srckind" as="kod_srckind" join="left outer" dname="hr_eosrc" title="Вид энергообъекта">
          <call function="=">
            <column table="a" column="kod_srckind" />
            <column table="kod_srckind" column="kod_srckind" />
          </call>
        </query>
        <query name="hr_eobject_src" as="eobj_id_src" join="left outer" dname="hr_eosrc" title="Энергообъекты">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id_src" column="eobj_id" />
          </call>
        </query>
        <query name="hs_price_zone" as="kod_zone" join="left outer" dname="hr_eosrc">
          <call function="=">
            <column table="a" column="kod_zone" />
            <column table="kod_zone" column="kod_zone" />
          </call>
        </query>
        <query name="hs_srcnode" as="kod_srcnode" join="left outer" dname="hr_eosrc">
          <call function="=">
            <column table="a" column="kod_srcnode" />
            <column table="kod_srcnode" column="kod_srcnode" />
          </call>
        </query>
        <query name="hk_srccurrentstate" as="kod_currentstate" join="left outer" dname="hr_eosrc">
          <call function="=">
            <column table="a" column="kod_currentstate" />
            <column table="kod_currentstate" column="kod_currentstate" />
          </call>
        </query>
        <query name="hk_srcplanstate" as="kod_planstate" join="left outer" dname="hr_eosrc">
          <call function="=">
            <column table="a" column="kod_planstate" />
            <column table="kod_planstate" column="kod_planstate" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_eosrc">
          <call function="=">
            <column table="a" column="kodp_customerservicecenter" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_eosrc_elnet" class="1" timestamp="02.11.2017 11:36:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_eosrc_elnet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_eosrc_elnet" type="string" title="" key="1" as="kod_eosrc_elnet" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" reference="hr_eosrc" refcol="eobj_id" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_org" refcol="kodp" />
        <column table="kodp" column="sname" is-fact="1" agg="list" as="sname" fact="hr_eosrc_elnet_sname" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_eosrc_elnet" as="a">
          <link name="kod_eosrc" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_eosrc" table="hr_eosrc" child="hr_eosrc_elnet" field="kod_eosrc" parent="hr_eosrc" back="hr_eosrc_elnet">
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="eobj_id" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="parent_id_ext" parent="hr_eosrc" back="hr_eobject">
              <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_bal_point" dimension="1" is-final-dimension="1" is-private-dimension="1">
                <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="kod_src_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="kod_bal_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
                <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              </dimlink>
              <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dlink name="hr_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="eobj_id" parent="hr_eobject" back="hr_point_har" title="Характеристика ТУ" />
            </dlink>
          </link>
        </table>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_eosrc_elnet">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="hr_eosrc" join="left outer" as="kod_eosrc" dname="hr_eosrc_elnet">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="kod_eosrc" column="eobj_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_hisworks" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_hisworks.xml" haskeys="1">
      <select>
        <column table="a" column="kod_w" type="number" comment="код проведенной работы" as="kod_w" key="1" fixed="1"></column>
        <column table="a" column="kod_works" type="number" comment="код вида работы" as="kod_works" reference="hs_dicmain" refcol="kod_dic" key="0"></column>
        <column table="a" column="kodsp_ttn_u" type="number" title="" comment="код ттн индивид" as="kodsp_ttn_u" reference="hr_ttn_u" refcol="kodsp_ttn_u" key="0"></column>
        <column table="a" column="kod_pu_u" type="number" comment="код счетчика индивид" as="kod_pu_u" reference="hr_pu_u" refcol="kod_pu_u" key="0"></column>
        <column table="a" column="kod_rsi" type="number" comment="код рси" as="kod_rsi" reference="hr_rsi" refcol="kod_rsi" key="0"></column>
        <column table="a" column="priznak_otkl" type="number" title="" comment="признак отключения 1-отключен" as="priznak_otkl" key="0"></column>
        <column table="a" column="har_w" type="number" title="" comment="характер работы 0-плановая 1-внеплановая" as="har_w" key="0"></column>
        <column table="a" column="time_begin" type="date" title="" comment="время начала работы" as="time_begin" key="0"></column>
        <column table="a" column="dat_begin" type="date" title="" comment="дата начала работы" as="dat_begin" key="0"></column>
        <column table="a" column="time_end" type="date" title="" comment="время окончания работы" as="time_end" key="0"></column>
        <column table="a" column="dat_end" type="date" title="" comment="дата окончания работы" as="dat_end" key="0"></column>
        <column table="a" column="plomba" type="string" title="" comment="№ пломбы после работы" as="plomba" key="0"></column>
        <column table="a" column="dat_plomba" type="date" title="" comment="дата опломбирования" as="dat_plomba" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="kod_sost_before" type="number" comment="код состояния до работы" as="kod_sost_before" reference="hs_sost_tu" refcol="kod_sost_tu" key="0"></column>
        <column table="a" column="kod_sost_after" type="number" comment="код состояния после работы" as="kod_sost_after" reference="hs_sost_tu" refcol="kod_sost_tu" key="0"></column>
        <column table="a" column="kod_sotr" type="number" comment="код сотрудника раб пу" as="kod_sotr" reference="hs_sotr_pu" refcol="kod_sotr" key="0"></column>
        <column table="a" column="nom_nar" type="string" title="" comment="№ наряда на работу" as="nom_nar" key="0"></column>
        <column table="a" column="dat_nar" type="date" title="" comment="дата наряда на работу" as="dat_nar" key="0"></column>
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0"></column>
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" reference="hr_point" refcol="kod_point" key="0"></column>
        <column table="a" column="kod_m_u" type="number" as="kod_m_u" key="0"></column>
        <column table="a" column="kod_kor" type="number" as="kod_kor" key="0"></column>
        <column table="a" column="kod_bpit_u" type="number" as="kod_bpit_u" key="0"></column>
        <column table="a" column="kod_r_u" type="number" as="kod_r_u" key="0"></column>
        <column table="a" column="kod_sm_u" type="number" as="kod_sm_u" reference="hr_sm_u" refcol="kod_sm_u" key="0"></column>
        <column table="a" column="kod_indicat" type="number" as="kod_indicat" reference="hr_indicat" refcol="kod_indicat" key="0"></column>
        <column table="a" column="plomba_cifer" type="string" title="" comment="№ пломбы на циферблате (для реле времени)" as="plomba_cifer" key="0"></column>
        <column table="a" column="dat_plomba_cifer" type="date" title="" comment="дата опломбирования циферблата (для реле времени)" as="dat_plomba_cifer" key="0"></column>
        <column table="a" column="kod_tk_u" type="number" comment="код тк аскуэ индивид" as="kod_tk_u" reference="hr_tk_u" refcol="kod_tk_u" key="0"></column>
        <column table="a" column="kod_bal_point" type="number" comment="код технической ту" as="kod_bal_point" reference="hr_bal_point" refcol="kod_bal_point" key="0"></column>
        <column table="a" column="fio_sotr_abon" type="string" title="" comment="фио сотрудника со стороны абонента, присутствовавшего во время проведения работ" as="fio_sotr_abon" key="0"></column>
        <column table="a" column="kod_a" type="number" comment="код аскуэ" as="kod_a" reference="hr_askue" refcol="kod_a" key="0"></column>
        <column table="a" column="kod_org" type="number" comment="код организации, провод. работу (для рси, рэ, инд)" as="kod_org" reference="hs_dicmain" refcol="kod_dic" key="0"></column>
        <column table="a" column="kod_sotr_plomba" type="number" comment="код сотрудника, производившего опломбирование" as="kod_sotr_plomba" reference="hs_sotr_pu" refcol="kod_sotr" key="0"></column>
        <column table="a" column="kod_sotr_inface" type="number" comment="код сотрудника, опломбир. интерфейс" as="kod_sotr_inface" reference="hs_sotr_pu" refcol="kod_sotr" key="0"></column>
        <column table="a" column="plomba_inface" type="string" title="" comment="№ пломбы на интерфейсе (сч, успд)" as="plomba_inface" key="0"></column>
        <column table="a" column="dat_inface" type="date" title="" comment="дата опломбирования интерфейса (сч, успд)" as="dat_inface" key="0"></column>
        <column table="a" column="kodw" type="number" title="" comment="код работы от элементов схемы" as="kodw" reference="hr_hisworks_sx" refcol="kodw" key="0"></column>
        <column table="a" column="kod_preobr_u" type="number" comment="код преобразователя индивид" as="kod_preobr_u" reference="hr_preobr_u" refcol="kod_preobr_u" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_hisworks" as="a"></table>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_point"></column>
            <column table="kod_point" column="kod_point"></column>
          </call>
        </query>
        <query name="hr_indicat" as="kod_indicat" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_indicat"></column>
            <column table="kod_indicat" column="kod_indicat"></column>
          </call>
        </query>
        <query name="hr_pu_u" as="kod_pu_u" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_pu_u"></column>
            <column table="kod_pu_u" column="kod_pu_u"></column>
          </call>
        </query>
        <query name="hr_sm_u" as="kod_sm_u" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sm_u"></column>
            <column table="kod_sm_u" column="kod_sm_u"></column>
          </call>
        </query>
        <query name="hr_tk_u" as="kod_tk_u" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_tk_u"></column>
            <column table="kod_tk_u" column="kod_tk_u"></column>
          </call>
        </query>
        <query name="hs_sost_tu" as="kod_sost_after" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sost_after"></column>
            <column table="kod_sost_after" column="kod_sost_tu"></column>
          </call>
        </query>
        <query name="hs_sost_tu" as="kod_sost_before" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sost_before"></column>
            <column table="kod_sost_before" column="kod_sost_tu"></column>
          </call>
        </query>
        <query name="hr_ttn_u" as="kodsp_ttn_u" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kodsp_ttn_u"></column>
            <column table="kodsp_ttn_u" column="kodsp_ttn_u"></column>
          </call>
        </query>
        <query name="hr_rsi" as="kod_rsi" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_rsi"></column>
            <column table="kod_rsi" column="kod_rsi"></column>
          </call>
        </query>
        <query name="hs_dicmain" as="kod_works" join="left outer" dname="hr_hisworks" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_works"></column>
            <column table="kod_works" column="kod_dic"></column>
          </call>
        </query>
        <query name="hr_bal_point" as="kod_bal_point" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_bal_point"></column>
            <column table="kod_bal_point" column="kod_bal_point"></column>
          </call>
        </query>
        <query name="hr_askue" as="kod_a" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_a"></column>
            <column table="kod_a" column="kod_a"></column>
          </call>
        </query>
        <query name="hs_dicmain" as="kod_org" join="left outer" dname="hr_hisworks" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_org"></column>
            <column table="kod_org" column="kod_dic"></column>
          </call>
        </query>
        <query name="hs_sotr_pu" as="kod_sotr_plomba" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sotr_plomba"></column>
            <column table="kod_sotr_plomba" column="kod_sotr"></column>
          </call>
        </query>
        <query name="hs_sotr_pu" as="kod_sotr_inface" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sotr_inface"></column>
            <column table="kod_sotr_inface" column="kod_sotr"></column>
          </call>
        </query>
        <query name="hr_hisworks_sx" as="kodw" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kodw"></column>
            <column table="kodw" column="kodw"></column>
          </call>
        </query>
        <query name="hs_sotr_pu" as="kod_sotr" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_sotr"></column>
            <column table="kod_sotr" column="kod_sotr"></column>
          </call>
        </query>
        <query name="hr_preobr_u" as="kod_preobr_u" join="left outer" dname="hr_hisworks">
          <call function="=">
            <column table="a" column="kod_preobr_u"></column>
            <column table="kod_preobr_u" column="kod_preobr_u"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="hr_nugruzpotreb" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_nugruzpotreb.xml" haskeys="1">
      <select>
        <column table="a" column="kodnagruzpotreb" type="number" column-mandatory="1" title="" comment="Первичный ключ" as="kodnagruzpotreb" key="1" fixed="1" />
        <column table="a" column="kod_vidnagr" type="number" column-mandatory="1" comment="Код вида нагрузки" as="kod_vidnagr" reference="hk_typenagruz" refcol="kod_vidnagr" key="0" />
        <column table="a" column="d_create" type="date" column-mandatory="1" title="" as="d_create" key="0" />
        <column table="a" column="d_finish" type="date" title="" as="d_finish" key="0" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" reference="hr_eofider" refcol="eobj_id" key="0" />
        <column table="a" column="kod_obj" type="number" column-mandatory="1" comment="код потребителя" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="comments" type="string" data-size="200" title="" comment="Примечание" as="comments" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="no_off" type="number" column-mandatory="1" title="" as="no_off" key="0" />
        <column table="a" column="kol" type="number" column-mandatory="1" title="" as="kol" key="0" />
        <column table="a" column="pr_reserve" type="number" column-mandatory="1" title="" as="pr_reserve" key="0" />
        <column table="a" column="ocher" type="number" title="" comment="Очередь отключения" as="ocher" key="0" />
        <column table="a" column="kod_otkloper" type="number" as="kod_otkloper" reference="kk_otkloper" refcol="kod_otkloper" key="0" />
        <column table="a" column="sost" type="number" title="" comment="Состояние" as="sost" key="0" />
        <column table="a" column="s_ogr" type="number" title="" comment="Сетевое ограничение" as="s_ogr" key="0" />
        <column table="a" column="pr_szn" type="number" column-mandatory="1" title="" comment="Признак социальной значимости" as="pr_szn" key="0" />
        <column table="a" column="z_vv" type="number" title="" comment="Защита на вводе" as="z_vv" key="0" />
        <column table="a" column="k_nad" type="number" title="" comment="Категория надежности" as="k_nad" key="0" />
        <column table="a" column="kod_schema_item" type="number" comment="Код унифицированного элемента" as="kod_schema_item" key="0" />
        <column table="a" column="naselenie" type="number" title="" comment="Население" as="naselenie" key="0" />
        <column table="a" column="count_naselenie" type="number" column-mandatory="1" title="" comment="Кол.Быт.Потреб" as="count_naselenie" key="0" />
        <column table="a" column="count_houses" type="number" column-mandatory="1" title="" comment="Кол.домов" as="count_houses" key="0" />
        <column table="a" column="kod_parent" type="number" comment="Код группы нагрузок. Если есть ключ. значит строка представляет конкретную нагрузку (Тр, Двиг ..). Если нет ключа (пусто). строка является группу нагрузок." as="kod_parent" reference="hr_nugruzpotreb" refcol="kodnagruzpotreb" key="0" />
        <column table="a" column="pr_rbt" type="number" column-mandatory="1" title="" comment="&quot;пр. Робот&quot;  Да \ Нет. Указывает, что  строка была создана разработчиком при установке нового функционала." as="pr_rbt" key="0" />
        <column table="a" column="is_gr" type="number" column-mandatory="1" title="" comment="признак &quot;Группа ЭПУ&quot; = Да \ Нет  (1 \ 0)" as="is_gr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_nugruzpotreb" as="a" />
        <query name="hr_nugruzpotreb" as="kod_parent" join="left outer" dname="hr_nugruzpotreb">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kodnagruzpotreb" />
          </call>
        </query>
        <query name="hk_typenagruz" as="kod_vidnagr" join="left outer" dname="hr_nugruzpotreb">
          <call function="=">
            <column table="a" column="kod_vidnagr" />
            <column table="kod_vidnagr" column="kod_vidnagr" />
          </call>
        </query>
        <query name="kk_otkloper" as="kod_otkloper" join="left outer" dname="hr_nugruzpotreb">
          <call function="=">
            <column table="a" column="kod_otkloper" />
            <column table="kod_otkloper" column="kod_otkloper" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="hr_nugruzpotreb">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="hr_eofider" as="eobj_id" join="left outer" dname="hr_nugruzpotreb">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point" class="1" timestamp="24.10.2022 13:35:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" comment="код потребителя" as="kod_obj" key="0" />
        <column table="a" column="nomer" type="number" title="Номер ТУ" comment="номер точки учета" as="nomer" key="0" />
        <column table="a" column="mesto" type="string" title="" comment="место расположения" as="mesto" key="0" />
        <column table="a" column="dat_s" type="date" title="" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата удаления точки учета" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="prizn_sa" type="number" title="" as="prizn_sa" key="0" />
        <column table="a" column="kod_pointmain" type="number" comment="код ту" as="kod_pointmain" key="0" />
        <column table="a" column="tpoint" type="number" title="" comment=" 0  - основная&#xA; 1  - прочее потребление&#xA; 2  - субабонент&#xA; 3  - транзит" as="tpoint" reference="hk_tpoint" refcol="tpoint" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0" />
        <column table="a" column="kod_point_dost" type="number" as="kod_point_dost" reference="ts_point_dost" refcol="kod_point_dost" key="0" />
        <column table="a" column="mop" type="number" title="" comment="признак &quot;вариант расчета моп&quot; в точке учета:&#xA;0 - не участвует&#xA;1 - расход распределяется по квартирам&#xA;2 - с расхода снимается расход населения&#xA;имеет смысл для быт. и пром. потребителей." as="mop" key="0" />
        <column table="a" column="nagruz_type" type="number" title="" comment="тип назначения нагузки (для расчёта вдр):&#xA;0 - не указана&#xA;1 - общая&#xA;2 - вдр (моп)&#xA;3 - бытовая&#xA;4 - юл" as="nagruz_type" key="0" />
        <column table="a" column="kod_vid_kpt" type="number" as="kod_vid_kpt" reference="hk_vid_kpt" refcol="kod_vid_kpt" key="0" />
        <column table="a" column="kod_pr_kind" type="number" comment="код типа присоединения" as="kod_pr_kind" reference="ak_pr_kind" refcol="kod_pr_kind" key="0" />
        <column table="a" column="kod_algpoint" type="number" as="kod_algpoint" reference="hk_algpoint" refcol="kod_algpoint" key="0" />
        <column table="a" column="kod_obj_vdr" type="number" comment="код объекта вдр" dimension="kod_obj_vdr" as="kod_obj_vdr" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="pr_view" type="number" title="" comment="признак &quot;точка проекция&quot; (1 | 0)&#xA;1 - точка является проекцией точки (транзит - абонент) другого потребителя." as="pr_view" key="0" />
        <column table="a" column="typetu" type="number" title="" comment="тип ту (жилая=1, нежилая=0)" as="typetu" key="0" />
        <column table="a" column="sn_isp" type="number" title="" comment="учет в расчетах соц.норм (1-учет)" as="sn_isp" key="0" />
        <column table="a" column="id_askue" type="number" title="" comment="идентификатор системы аскуэ" as="id_askue" key="0" />
        <column table="a" column="kodp_net" type="number" title="" comment="Код организации к сетям которой выполнено присоединение" as="kodp_net" reference="kr_org_group" refcol="kod_org" key="0" />
        <column table="a" column="kodp_rsk" type="number" title="" comment="Код РЭС, в зоне которого находится точка учета" as="kodp_rsk" reference="hv_elter_org" refcol="kodp" key="0" />
        <column table="a" column="kodp_fsk" type="number" title="" comment="Код ТСО (филиал териториальной сетевой организации) в зоне которого находится точка" as="kodp_fsk" reference="hv_seti" refcol="kod" key="0" />
        <column table="a" column="kodp_pwrcompany" type="number" title="" comment="Код сетевой организации (РСК, ССО, ПЭЭ), в группу потребителей которой входит точка рассматриваемого потребителя. Потребители входят одну группу, если они присоединены к данной сети непосредственно или опосредовано (через сети ИВС и безхозяйные сети)." as="kodp_pwrcompany" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="pr_gkh" type="number" title="" comment="признак принадлежности точки к выгрузке в ГИС ЖКХ." as="pr_gkh" reference="hk_gisgkh" refcol="pr_gkh" key="0" />
        <column table="a" column="kod_attpoint" type="number" comment="Код точки присоединения" as="kod_attpoint" key="0" />
        <column table="tpoint" column="name" as="type_point" key="0" />
        <column table="kod_net" column="name" as="net_point" title="Признак присоединения к сетям" key="0" />
        <column table="kod_net" column="kod_org_group" as="kod_org_group" key="0" />
        <column table="dover" column="dover" as="dover" key="0" />
        <call function="decode" type="string" as="use_maket" key="0">
          <column table="grs" column="kod_rpoint" />
          <const>null</const>
          <const>0</const>
          <const>1</const>
        </call>
        <const type="number" as="cnt" fact="hr_point_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point" as="a">
          <dlink name="nr_calc" dimension="1" as="nr_calc" table="nr_calc" child="nr_calc" field="kod_point" parent="hr_point" back="nr_calc" />
          <dlink name="hr_point_pu" dimension="1" as="hr_point_pu" table="hr_point_pu" child="hr_point_pu" field="kod_point" parent="hr_point" back="hr_point_pu">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_ini" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point_tar" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_tar" table="hr_point_tar" child="hr_point_tar" field="kod_point" parent="hr_point" back="hr_point_tar">
            <dimlink name="kod_point_rasx" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point_har" dimension="1" as="hr_point_har" table="hr_point_har" child="hr_point_har" field="kod_point" parent="hr_point" back="hr_point_har" title="Характеристика ТУ">
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_obj" dimension="1" as="kod_obj" table="kr_object" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ak_pr_kind" as="kod_pr_kind" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_pr_kind" />
            <column table="kod_pr_kind" column="kod_pr_kind" />
          </call>
        </query>
        <query name="hk_algpoint" as="kod_algpoint" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_algpoint" />
            <column table="kod_algpoint" column="kod_algpoint" />
          </call>
        </query>
        <query name="hk_tpoint" as="tpoint" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="tpoint" />
            <column table="tpoint" column="tpoint" />
          </call>
        </query>
        <query name="hk_vid_kpt" as="kod_vid_kpt" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_vid_kpt" />
            <column table="kod_vid_kpt" column="kod_vid_kpt" />
          </call>
        </query>
        <query name="hk_vid_point_calc" as="mop" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="mop" />
            <column table="mop" column="kod" />
          </call>
        </query>
        <query name="hr_point" as="kod_pointmain" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_pointmain" />
            <column table="kod_pointmain" column="kod_point" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj_vdr" join="left outer" dname="hr_point_vdr">
          <call function="=">
            <column table="a" column="kod_obj_vdr" />
            <column table="kod_obj_vdr" column="kod_obj" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="ts_point_dost" as="kod_point_dost" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_point_dost" />
            <column table="kod_point_dost" column="kod_point_dost" />
          </call>
        </query>
        <query name="ts_id_askue" as="id_askue" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="id_askue" />
            <column table="id_askue" column="id" />
          </call>
        </query>
        <query name="hk_gisgkh" as="pr_gkh" join="left inner" dname="hr_point">
          <call function="=">
            <column table="a" column="pr_gkh" />
            <column table="pr_gkh" column="pr_gkh" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kodp_pwrcompany" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="hk_vid_point_calc" as="kod" join="left inner" dname="hr_point">
          <call function="=">
            <column table="a" column="mop" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="ts_id_askue" as="id" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="id_askue" />
            <column table="id" column="id" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_pointmain" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hv_elter_org" as="kod_elter" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point" title="Огранизации , которые явл. эксплуатац. подразделением">
          <call function="=">
            <column table="a" column="kodp_rsk" />
            <column table="kod_elter" column="kodp" />
          </call>
        </query>
        <query name="hv_seti" as="kod_seti" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point">
          <call function="=">
            <call function="nvl">
              <column table="a" column="kodp_fsk" />
              <const>0</const>
            </call>
            <column table="kod_seti" column="kod" />
          </call>
        </query>
        <query name="hv_nugruzpotreb2" as="kod_nugruz" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_nugruz" column="kod_obj" />
          </call>
        </query>
        <query name="hv_point_prov" as="prov" join="left outer" dimension="1" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="prov" column="kod_point" />
          </call>
        </query>
        <query name="kr_org_group" as="kod_net" join="left outer" dname="hr_point">
          <call function="=">
            <column table="a" column="kodp_net" />
            <column table="kod_net" column="kod_org" />
          </call>
        </query>
        <query name="hv_point_dover" join="left outer" as="dover" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="dover" column="kod_point" />
          </call>
        </query>
        <query name="hv_point_in_group_schema" join="left outer" as="grs" comment="Точка используется в макете" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="grs" column="kod_rpoint" />
          </call>
        </query>
        <query name="hr_point_tree" as="kod_point_tree" join="left outer" dimension="1" dname="hr_point">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point_tree" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_askue" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_askue.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_askue" type="number" column-mandatory="1" as="kod_point_askue" key="1" fixed="1" />
        <column table="a" column="kod_kanalmain" type="number" as="kod_kanalmain" reference="hr_point_askue" refcol="kod_point_askue" key="0" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="kod_point" type="number" column-mandatory="1" comment="код ТУ" as="kod_point" reference="hr_point" refcol="kod_point" key="0" />
        <column table="a" column="kanal" type="string" data-size="50" column-mandatory="1" title="" as="kanal" key="0" />
        <column table="a" column="sikon" type="string" data-size="20" column-mandatory="1" title="" as="sikon" key="0" />
        <column table="a" column="rezerv" type="number" column-mandatory="1" title="" as="rezerv" key="0" />
        <column table="a" column="dat_s" type="date" column-mandatory="1" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="prim" type="string" data-size="120" title="" as="prim" key="0" />
        <column table="a" column="name" type="string" data-size="60" title="Наименование" as="name" key="0" />
        <column table="a" column="obj_id" type="number" title="" as="obj_id" key="0" />
        <column table="a" column="kod_ch_askue" type="number" comment="код канала АСКУЭ" as="kod_ch_askue" reference="hr_chan_askue" refcol="kod_ch_askue" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_sm_chan" type="number" comment="код канала УСПД" as="kod_sm_chan" reference="hr_sm_chan" refcol="kod_sm_chan" key="0" />
        <column table="a" column="obj_id_p" type="number" title="" comment="Идентификатор канала потерь в системе АСКУЭ" as="obj_id_p" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_askue" as="a" />
        <query name="hr_point_askue" as="kod_kanalmain" join="left outer" dname="hr_point_askue">
          <call function="=">
            <column table="a" column="kod_kanalmain" />
            <column table="kod_kanalmain" column="kod_point_askue" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point_askue">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_askue">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="hr_chan_askue" as="kod_ch_askue" join="left outer" dname="hr_point_askue">
          <call function="=">
            <column table="a" column="kod_ch_askue" />
            <column table="kod_ch_askue" column="kod_ch_askue" />
          </call>
        </query>
        <query name="hr_sm_chan" as="kod_sm_chan" join="left outer" dname="hr_point_askue">
          <call function="=">
            <column table="a" column="kod_sm_chan" />
            <column table="kod_sm_chan" column="kod_sm_chan" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_en" class="1" timestamp="27.11.2017 12:37:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_en.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_en" type="number" comment="код начальных показаний Сч См" as="kod_point_en" key="1" fixed="1" />
        <column table="a" column="kod_point_askue" type="number" is-fact="1" agg="max" fact="hr_pnt_en_kod_point_askue" as="kod_point_askue" reference="hr_point_askue" refcol="kod_point_askue" key="0" />
        <column table="a" column="kod_point_pu" type="number" comment="код Сч" as="kod_point_pu" key="0" />
        <column table="a" column="energy" type="number" title="" comment="Код вида энергии" as="energy" reference="hk_energy" refcol="energy" key="0" />
        <column table="a" column="kod_directen" type="number" as="kod_directen" reference="hk_directen" refcol="kod_directen" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="фиксируем дату начала работы прибора по указанному виду и напрвлению энергии" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="фиксируем дату окончания работы прибора по указанному виду и напрвлению энергии" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="||" as="energy_abbr" is-fact="1" agg="list" fact="hr_pnt_en_energy_abbr" key="0">
          <column table="energy" column="abbr" />
          <column table="kod_directen" column="abbr" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_en" as="a">
          <dlink name="hr_point_ini" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_ini" table="hr_point_ini" child="hr_point_ini" field="kod_point_en" parent="hr_point_en" back="hr_point_ini">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_point_pu" table="hr_point_pu" child="hr_point_en" field="kod_point_pu" parent="hr_point_pu" back="hr_point_en">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hk_directen" as="kod_directen" join="left outer" dname="hr_point_en">
          <call function="=">
            <column table="a" column="kod_directen" />
            <column table="kod_directen" column="kod_directen" />
          </call>
        </query>
        <query name="hr_point_askue" as="kod_point_askue" join="left outer" dname="hr_point_en">
          <call function="=">
            <column table="a" column="kod_point_askue" />
            <column table="kod_point_askue" column="kod_point_askue" />
          </call>
        </query>
        <query name="hk_energy" as="energy" join="left outer" dname="hr_point_en">
          <call function="=">
            <column table="a" column="energy" />
            <column table="energy" column="energy" />
          </call>
        </query>
        <query name="hr_point_pu" as="kod_point_pu" join="left outer" dname="hr_point_en">
          <call function="=">
            <column table="a" column="kod_point_pu" />
            <column table="kod_point_pu" column="kod_point_pu" />
          </call>
        </query>
        <query name="hr_point_pu_all" as="kod_point_pu_all" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_en">
          <call function="=">
            <column table="a" column="kod_point_pu" />
            <column table="kod_point_pu_all" column="kod_point_pu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_har" class="1" title="Характеристика ТУ" timestamp="30.01.2019 21:55:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_har.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_har" type="number" comment="код характеристики ту" key-dimension="kod_point_har" as="kod_point_har" key="1" fixed="1" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="kod_polbalans" type="number" comment="код положения по балансу" as="kod_polbalans" reference="hk_tipbal" refcol="kod_tipbal" key="0" />
        <column table="a" column="kod_v" type="number" comment="первичный ключ" as="kod_v" reference="hk_v" refcol="kod_v" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата начала действия характеристик" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата удаления характеристик" is-final-dimension="1" is-private-dimension="1" dimension="dat_po" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание к тарифу с кодом от 200 и выше" as="prim" key="0" />
        <column table="a" column="kod_point" type="number" comment="код точки учета" as="kod_point" reference="hr_point" refcol="kod_point" key="0" />
        <column table="a" column="method" type="number" title="" comment="первичный ключ" as="method" reference="hk_method" refcol="method" key="0" />
        <column table="a" column="no_dog" type="number" title="" as="no_dog" key="0" />
        <column table="a" column="prn_pril" type="number" title="" as="prn_pril" key="0" />
        <column table="a" column="raschet" type="number" title="" as="raschet" key="0" />
        <column table="a" column="pr_poteri" type="number" title="" as="pr_poteri" key="0" />
        <column table="a" column="kkomun" type="number" title="" as="kkomun" key="0" />
        <column table="a" column="kod_gtp" type="number" comment="коэффициент пересчета по комнатам в коммунальных квартирах" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" key="0" />
        <column table="a" column="rpower" type="number" title="" fact="hr_point_har_rpower" agg="sum" comment="значение разрешенной мощности для точки (квт). вынесено на характеристику с  &quot;простоянного расхода&quot;. значение относим к положению в схеме." as="rpower" key="0" />
        <column table="a" column="srcfdr_id" type="number" title="" comment="значение разрешенной мощности для точки. вынесено на характеристику с  &quot;простоянного расхода&quot;. значение относим к положению в схеме." as="srcfdr_id" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="src_id" type="number" title="" comment="код фидера источника" as="src_id" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="kod_v_gr" type="number" comment="код источника" as="kod_v_gr" reference="hk_v" refcol="kod_v" key="0" />
        <column table="a" column="declare_power" type="number" title="" comment="код напряжения на границе абонент-сети(другой абонент)" as="declare_power" key="0" />
        <column table="a" column="pris_power" type="number" title="" comment="заявленная мощность, мвт" as="pris_power" key="0" />
        <column table="a" column="kod_schema_item" type="number" comment="присоединенная мощность, ква" as="kod_schema_item" key="0" />
        <column table="a" column="pr_norm_poteri" type="number" title="" comment="признак нормативные потери (0 - не применяются, 1 - применяются)" as="pr_norm_poteri" key="0" />
        <column table="a" column="square" type="number" title="" comment="признак нормотивные потери (0 - не применяются, 1 - применяются)" as="square" key="0" />
        <column table="a" column="otkl" type="number" title="" comment="состояние точки: 0-включена , 1-отключена" as="otkl" key="0" />
        <column table="a" column="pril33" type="number" title="" comment="прил.3.3" as="pril33" key="0" />
        <column table="a" column="pr_poteri_in_ascue" type="number" title="" comment="потери учитываются в аскуэ" as="pr_poteri_in_ascue" key="0" />
        <column table="a" column="i_dop" type="number" title="" comment="допустимый ток (а). значение соответвует расчетам по сечению и марке вводного провода \ кабеля" as="i_dop" key="0" />
        <column table="a" column="kol_faza" type="number" title="" comment="кол. фаз" as="kol_faza" key="0" />
        <column table="a" column="kodp_net" type="number" title="" comment="код сетевой компании" as="kodp_net" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_contr_potr" type="number" comment="код котр.потр." as="kod_contr_potr" reference="hk_contr_potr" refcol="kod_contr_potr" key="0" />
        <column table="a" column="kol_reg" type="number" title="" comment="количество зарегистрированных человек (для расчета соц. нормы по категориям, приравненным к населению)" as="kol_reg" key="0" />
        <column table="a" column="eobj_id_eo" type="number" title="" comment="связь с энергообъектом для расчета потерь на собственные нужды" as="eobj_id_eo" reference="hr_eosrc" refcol="eobj_id" key="0" />
        <column table="a" column="i_nom" type="number" title="" comment="номинальный ток вводного автомата (а)" as="i_nom" key="0" />
        <column table="kod_v" column="sv" is-fact="1" agg="list" as="sv" fact="hr_point_har_sv" key="0" />
        <const type="number" as="cnt" fact="hr_point_har_count" agg="sum" key="0">1</const>
        <call function="if" type="number" as="method_ccb" key="0">
          <call function="in">
            <column table="this" column="method" />
            <call function="array">
              <const>4</const>
              <const>5</const>
            </call>
          </call>
          <const>1</const>
          <column table="this" column="method" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_har" as="a" title="Характеристика ТУ">
          <link name="eobj_id" as="eobj_id" table="hr_eobject" child="hr_point_har" field="eobj_id" parent="hr_eobject" back="hr_point_har">
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_point" dimension="1" as="kod_point" table="hr_point" child="hr_point_har" field="kod_point" parent="hr_point" back="hr_point_har">
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="nr_priem" dimension="kod_priem" as="nr_priem" table="nr_priem" child="nr_priem" field="kod_point_har" parent="hr_point_har" back="nr_priem" />
        </table>
        <query name="hk_v" as="kod_v_gr" join="left outer" dname="hr_point_har" title="Фактическое напряжение">
          <call function="=">
            <column table="a" column="kod_v_gr" />
            <column table="kod_v_gr" column="kod_v" />
          </call>
        </query>
        <query name="hk_method" as="method" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="method" />
            <column table="method" column="method" />
          </call>
        </query>
        <query name="hk_tipbal" as="kod_polbalans" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="kod_polbalans" />
            <column table="kod_polbalans" column="kod_tipbal" />
          </call>
        </query>
        <query name="hk_v" as="kod_v_def" join="left outer" dname="hr_point_har" title="Фактическое напряжение">
          <call function="=">
            <column table="a" column="kod_v" />
            <column table="kod_v_def" column="kod_v" />
          </call>
        </query>
        <query name="hr_eobject" as="eobj_id" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_har">
          <call function="=">
            <column table="a" column="eobj_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="hk_v" as="kod_v" join="left outer" dname="hr_point_har" title="Фактическое напряжение">
          <call function="=">
            <column table="eobj_id" column="kod_v" />
            <column table="kod_v" column="kod_v" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="hr_eobject" as="src_id" join="left outer" dname="hr_point_har_src">
          <call function="=">
            <column table="a" column="src_id" />
            <column table="src_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eobject" as="srcfdr_id" join="left outer" dname="hr_point_har_srcfdr">
          <call function="=">
            <column table="a" column="srcfdr_id" />
            <column table="srcfdr_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eosrc" as="eobj_id_eo" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="eobj_id_eo" />
            <column table="eobj_id_eo" column="eobj_id" />
          </call>
        </query>
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="kod_gtp" />
            <column table="kod_gtp" column="kod_gtp" />
          </call>
        </query>
        <query name="hk_contr_potr" as="kod_contr_potr" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="kod_contr_potr" />
            <column table="kod_contr_potr" column="kod_contr_potr" />
          </call>
        </query>
        <query name="kr_org" as="kodp_net" join="left outer" dname="hr_point_har">
          <call function="=">
            <column table="a" column="kodp_net" />
            <column table="kodp_net" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_ini" class="1" timestamp="03.02.2019 03:01:55" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_ini.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_ini" type="number" as="kod_point_ini" key="1" fixed="1" />
        <column table="a" column="kod_point_tar" type="number" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="kod_point_en" type="number" comment="код начальных показаний сч см" as="kod_point_en" reference="hr_point_en" refcol="kod_point_en" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="pu_ini" type="number" title="" as="pu_ini" key="0" />
        <column table="a" column="puend" type="number" title="" as="puend" key="0" />
        <column table="a" column="dat_s" type="date" title="" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="rkoeff" type="number" title="" as="rkoeff" key="0" />
        <column table="a" column="pr_kontr" type="number" title="" comment="признак ,определяющий , что в строке формируются только контрольные показания" as="pr_kontr" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="pr_lg" type="number" title="" comment="участует ли тариф в льготах 1-участ" as="pr_lg" key="0" />
        <column table="a" column="kodinterval" type="number" title="" comment="код зоны суток" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <call function="nvl" as="kodinterval_nz" type="number" key="0">
          <column table="a" column="kodinterval" />
          <column table="kod_point_tar" column="kodinterval" />
        </call>
        <column table="a" column="pr_ndu" type="number" title="" comment="в расчетах по данному счетчику доначислять заданный  на расход, в случае, если средняя температура воздуха в месяц была ниже 0 градусов и счетчик установлен на улице." as="pr_ndu" key="0" />
        <column table="a" column="kod_parent_point_ini" type="number" comment="код родительской комм точки" as="kod_parent_point_ini" reference="hr_point_ini" refcol="kod_point_ini" key="0" />
        <column table="kodinterval" column="name" as="zona_day" type="string" is-fact="1" agg="list" fact="hr_pnt_ini_zona_day" key="0" />
        <const type="number" fact="hr_point_ini_count" agg="sum" as="cnt" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_ini" as="a">
          <link name="kod_point_tar" dimension="1" as="kod_point_tar" table="hr_point_tar" child="hr_point_ini" field="kod_point_tar" parent="hr_point_tar" back="hr_point_ini">
            <dimlink name="voltage" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_point_en" dimension="1" as="kod_point_en" table="hr_point_en" child="hr_point_ini" field="kod_point_en" parent="hr_point_en" back="hr_point_ini" />
          <link name="kod_point_en" as="kod_point_en" table="hr_point_en" child="hr_point_ini" field="kod_point_en" parent="hr_point_en" back="hr_point_ini">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hr_point_en" as="kod_point_en" join="left outer" dname="hr_point_ini">
          <call function="=">
            <column table="a" column="kod_point_en" />
            <column table="kod_point_en" column="kod_point_en" />
          </call>
        </query>
        <query name="hr_point_ini" as="kod_parent_point_ini" join="left outer" dname="hr_point_ini">
          <call function="=">
            <column table="a" column="kod_parent_point_ini" />
            <column table="kod_parent_point_ini" column="kod_point_ini" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="hr_point_ini">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_ini">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="hr_point_ini">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_pu" class="1" timestamp="01.02.2019 04:02:41" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_pu" type="number" comment="код сч" as="kod_point_pu" key="1" fixed="1" />
        <column table="a" column="kod_tippu" type="number" comment="код типа сч осн" as="kod_tippu" reference="hs_tippu" refcol="kod_tippu" key="0" />
        <column table="a" column="kod_point" type="number" comment="код точки учета" title="Код точки учёта" as="kod_point" key="0" />
        <column table="a" column="nom_pu" type="string" title="Заводской номер" comment="номер прибора учета" is-fact="1" agg="list" as="nom_pu" reference="hr_point_pu" refcol="kod_point" fact="hr_point_pu_nom_pu" key="0" />
        <column table="a" column="kod_bal" type="number" comment="код балансовой принадлежности" title="Код балансовой принадлежности" as="kod_bal" reference="kk_bal" refcol="kod_bal" key="0" />
        <column table="a" column="kod_expl" type="number" comment="код эксплуатационной принадлежности" as="kod_expl" reference="kk_bal" refcol="kod_bal" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата установки" dimension="dat_s" as="dat_s" reference="hr_point_pu" refcol="kod_point" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата снятия" dimension="dat_po" as="dat_po" key="0" />
        <column table="a" column="razr" type="number" title="" comment="разрядность целой части" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" comment="разрядность дробной части" as="razr2" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_pover" type="date" title="" as="dat_pover" key="0" />
        <column table="a" column="kod_pu_u" type="number" comment="код счетчика индивид" as="kod_pu_u" reference="hr_pu_u" refcol="kod_pu_u" key="0" />
        <column table="a" column="kodsx" type="number" title="" comment="код вида схемы включения" as="kodsx" reference="hk_sx" refcol="kodsx" key="0" />
        <column table="a" column="glubina" type="number" title="" comment="глубина хранения (сут)" as="glubina" key="0" />
        <column table="a" column="interval" type="string" title="" comment="интервалы записи" as="interval" key="0" />
        <column table="a" column="elem_fact" type="number" title="" comment="элементность фактическая" as="elem_fact" key="0" />
        <column table="a" column="provodn_fact" type="number" title="" comment="проводность фактическая" as="provodn_fact" key="0" />
        <column table="a" column="obogrev" type="number" title="" comment="наличие обогрева 1-есть обогрев" as="obogrev" key="0" />
        <column table="a" column="doc_attach" type="string" title="" comment="наименования присоединенных файлов" as="doc_attach" key="0" />
        <column table="a" column="kodp_sobstv" type="number" title="" comment="код собственника (фл)" as="kodp_sobstv" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="cel_plomb" type="number" title="" comment="целостность пломб: 1-целые, 0-нарушена целостность (для планшетов ленэнерго)" as="cel_plomb" key="0" />
        <column table="a" column="plomba_yes" type="number" title="" comment="наличие пломбы (только для ленэнерго): 1-пломба есть, 0-пломбы нет" as="plomba_yes" key="0" />
        <const as="cnt" type="number" fact="hr_point_pu_count" agg="sum" key="0">1</const>
        <column table="kod_point_pu_zamen" column="kod_point_pu" as="kod_point_pu_zamen" title="Код заменённого ПУ" dgroup="max" reference="hr_point_pu" refcol="kod_point" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_pu" as="a">
          <link name="kod_point_pu_zamen" as="kod_point_pu_zamen" table="hr_point_pu" child="hr_point_pu" field="kod_point_pu_zamen" parent="hr_point_pu" back="hr_point_pu_zamen" />
          <dlink name="hr_point_en" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_en" table="hr_point_en" child="hr_point_en" field="kod_point_pu" parent="hr_point_pu" back="hr_point_en">
            <dimlink name="kod_point_ini" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <link name="kod_tippu" as="kod_tippu" table="hs_tippu" child="hr_point_pu" field="kod_tippu" parent="hs_tippu" back="hr_point_pu">
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_point" as="kod_point" table="hr_point" child="hr_point_pu" field="kod_point" parent="hr_point" back="hr_point_pu">
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_prov" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="hv_point_plombs" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hv_point_plombs" table="hv_point_plombs" child="hv_point_plombs" field="kod_pu" parent="hr_point_pu" back="hv_point_plombs" />
          <dlink name="mv_point_plombs" dimension="1" is-final-dimension="1" is-private-dimension="1" as="mv_point_plombs" table="mv_point_plombs" child="mv_point_plombs" field="kod_pu" parent="hr_point_pu" back="mv_point_plombs" />
        </table>
        <query name="hk_sx" as="kodsx" join="left outer" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="kodsx" />
            <column table="kodsx" column="kodsx" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dimension="1" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hr_pu_u" as="kod_pu_u" join="left outer" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="kod_pu_u" />
            <column table="kod_pu_u" column="kod_pu_u" />
          </call>
        </query>
        <query name="hs_tippu" as="kod_tippu" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="kod_tippu" />
            <column table="kod_tippu" column="kod_tippu" />
          </call>
        </query>
        <query join="left outer" name="hs_pktippu" as="kod_pktippu" dname="hr_point_pu">
          <call function="=">
            <column table="kod_tippu" column="kod_pktippu" />
            <column table="kod_pktippu" column="kod_pktippu" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_bal" as="kod_bal" join="left outer" dname="hr_point_pu" title="Балансовая принадлежность">
          <call function="=">
            <column table="a" column="kod_bal" />
            <column table="kod_bal" column="kod_bal" />
          </call>
        </query>
        <query name="kk_bal" as="kod_expl" join="left outer" dname="hr_point_pu" title="Балансовая принадлежность">
          <call function="=">
            <column table="a" column="kod_expl" />
            <column table="kod_expl" column="kod_bal" />
          </call>
        </query>
        <query name="kr_org" as="kodp_sobstv" join="left outer" dname="hr_point_pu">
          <call function="=">
            <column table="a" column="kodp_sobstv" />
            <column table="kodp_sobstv" column="kodp" />
          </call>
        </query>
        <query name="hr_point_pu" as="kod_point_pu_zamen" join="left outer" comment="по подобию kg_find.f_pu" dname="hr_point_pu_zamen">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_point" />
              <column table="kod_point_pu_zamen" column="kod_point" />
            </call>
            <call function="!=">
              <column table="a" column="nom_pu" />
              <column table="kod_point_pu_zamen" column="nom_pu" />
            </call>
            <call function="!=">
              <column table="a" column="kod_point_pu" />
              <column table="kod_point_pu_zamen" column="kod_point_pu" />
            </call>
            <call function="=">
              <call function="date to ym">
                <column table="a" column="dat_s" />
              </call>
              <call function="date to ym">
                <column table="kod_point_pu_zamen" column="dat_po" />
              </call>
            </call>
            <call function="ge">
              <column table="a" column="dat_s" />
              <column table="kod_point_pu_zamen" column="dat_po" />
            </call>
          </call>
        </query>
        <query name="tv_point_link" as="kod_point_link" join="left outer" dname="hr_point_pu">
          <call function="=">
            <column table="kod_point_link" column="kod_point_link" />
            <column table="a" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_rasx" class="1" timestamp="03.06.2016 13:57:03" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_rasx.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_rasx" type="number" as="kod_point_rasx" key="1" fixed="1" />
        <column table="a" column="kod_point_tar" type="number" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="kod_tiprasx" type="number" as="kod_tiprasx" reference="hk_tiprasx" refcol="kod_tiprasx" key="0" />
        <column table="a" column="kod_directen" type="number" comment="код направления измеряемой энергии" as="kod_directen" reference="hk_directen" refcol="kod_directen" key="0" />
        <column table="a" column="energy" type="number" title="" comment="код вида договорной величины" as="energy" reference="hk_energy" refcol="energy" key="0" />
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" reference="hr_point" refcol="kod_point" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="val1" type="number" title="" as="val1" key="0" />
        <column table="a" column="val2" type="number" title="" as="val2" key="0" />
        <column table="a" column="val3" type="number" title="" as="val3" key="0" />
        <column table="a" column="val4" type="number" title="" as="val4" key="0" />
        <column table="a" column="val5" type="number" title="" as="val5" key="0" />
        <column table="a" column="val6" type="number" title="" as="val6" key="0" />
        <column table="a" column="val7" type="number" title="" as="val7" key="0" />
        <column table="a" column="val8" type="number" title="" as="val8" key="0" />
        <column table="a" column="val9" type="number" title="" as="val9" key="0" />
        <column table="a" column="val10" type="number" title="" as="val10" key="0" />
        <column table="a" column="val11" type="number" title="" as="val11" key="0" />
        <column table="a" column="val12" type="number" title="" as="val12" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_const_rasx_name" type="number" as="kod_const_rasx_name" key="0" />
        <column table="a" column="pr_lg" type="number" title="" as="pr_lg" key="0" />
        <column table="a" column="mop" type="number" title="" as="mop" key="0" />
        <column table="a" column="p" type="number" title="" comment="мощность в точке для вычисления расхода по установленным часам работы (квт)." as="p" key="0" />
        <column table="a" column="kodinterval" type="number" title="" comment="код зоны суток" as="kodinterval" key="0" />
        <column table="a" column="kod_mop_const_rasx_name" type="number" comment="код норматива для моп" as="kod_mop_const_rasx_name" reference="ts_mop_const_rasx_name" refcol="kod_mop_const_rasx_name" key="0" />
        <column table="a" column="pr_sn" type="number" title="" comment="признак использования понижающего коэффициента соц. нормы для норматива (моп=0)" as="pr_sn" key="0" />
        <const type="number" fact="hr_point_rasx_count" agg="sum" as="cnt" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_rasx" as="a" />
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dimension="1" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="ts_mop_const_rasx_name" as="kod_mop_const_rasx_name" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="kod_mop_const_rasx_name" />
            <column table="kod_mop_const_rasx_name" column="kod_mop_const_rasx_name" />
          </call>
        </query>
        <query name="hk_directen" as="kod_directen" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="kod_directen" />
            <column table="kod_directen" column="kod_directen" />
          </call>
        </query>
        <query name="hk_energy" as="energy" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="energy" />
            <column table="energy" column="energy" />
          </call>
        </query>
        <query name="hk_tiprasx" as="kod_tiprasx" join="left outer" dname="hr_point_rasx">
          <call function="=">
            <column table="a" column="kod_tiprasx" />
            <column table="kod_tiprasx" column="kod_tiprasx" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_point_tar" class="1" timestamp="19.09.2018 16:18:29" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_point_tar.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_tar" type="number" as="kod_point_tar" key="1" fixed="1" />
        <column table="a" column="kod_numobj" type="number" comment="уникальный код" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" reference="hr_point" refcol="kod_point" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="dat_s" type="date" title="" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_po" key="0" />
        <column table="this" column="dat_s" as="dat_s1" dimension="point_dat_s" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="this" column="dat_po" as="dat_po1" dimension="point_dat_po" is-final-dimension="1" is-private-dimension="1" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kodinterval" type="number" title="" as="kodinterval" key="0" />
        <column table="a" column="mop" type="number" title="" comment="признак тарифа моп" as="mop" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="voltage" column="abbr" is-fact="1" fact="hr_pnt_tar_volt_abbr" agg="list" as="abbr" key="0" />
        <column table="a" column="pr_gener" type="number" title="" comment="отпуск с шин" as="pr_gener" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_point_tar" as="a">
          <link name="kod_numobj" dimension="1" as="kod_numobj" table="kr_numobj" child="hr_point_tar" field="kod_numobj" parent="kr_numobj" back="hr_point_tar" />
          <link name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_point" table="hr_point" child="hr_point_tar" field="kod_point" parent="hr_point" back="hr_point_tar">
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="voltage" is-private-dimension="1" is-final-dimension="1" dimension="1" as="voltage" table="hk_voltage" child="hr_point_tar" field="voltage" parent="hk_voltage" back="hr_point_tar" title="Уровень напряжения" />
          <links>
            <dlink name="hr_point_ini" dimension="1" />
            <dlink name="hr_point_rasx" dimension="1" />
          </links>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dname="hr_point_tar">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dname="hr_point_tar" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dname="hr_point_tar">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="hr_point_tar">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="hr_point_tar">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_pu_u" class="1" timestamp="24.03.2017 11:55:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_pu_u.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pu_u" type="number" comment="код счетчика индивид" title="Уникальный код счётчика" as="kod_pu_u" key="1" fixed="1" />
        <column table="a" column="kod_tippu" type="number" comment="код типа сч" as="kod_tippu" reference="hs_tippu" refcol="kod_tippu" key="0" />
        <column table="a" column="nom_pu" type="string" title="" comment="зав № счетчика" as="nom_pu" key="0" />
        <column table="a" column="god_vip" type="number" comment="год выпуска" title="Год выпуска" as="god_vip" key="0" />
        <column table="a" column="kod_bal" type="number" comment="код балансовой принадлежности" as="kod_bal" reference="kk_bal" refcol="kod_bal" key="0" />
        <column table="a" column="tip_datch" type="number" title="" comment="тип датчика 0-встроенный 1-наружный пусто-нет" as="tip_datch" key="0" />
        <column table="a" column="tormoz" type="number" title="" comment="стопор  0-нет 1-есть" as="tormoz" key="0" />
        <column table="a" column="kvartal_pp" type="number" title="Квартал последней поверки" comment="квартал пп" as="kvartal_pp" key="0" />
        <column table="a" column="god_pp" type="number" title="Год последней поверки" comment="год пп" as="god_pp" key="0" />
        <column table="a" column="kod_pov" type="number" comment="код поверочной организации" as="kod_pov" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="kod_sost" type="number" comment="код состояния" as="kod_sost" reference="hs_sost" refcol="kod_sost" key="0" />
        <column table="a" column="dat_sost" type="date" title="" comment="дата изменения состояния" as="dat_sost" key="0" />
        <column table="a" column="kod_mesto" type="number" comment="код местонахождения" as="kod_mesto" reference="hs_mesto" refcol="kod_mesto" key="0" />
        <column table="a" column="dat_mesto" type="date" title="" comment="дата изменения местонахождения" as="dat_mesto" key="0" />
        <column table="a" column="pr_osn" type="number" title="" comment="принадлежность к основным средствам" as="pr_osn" key="0" />
        <column table="a" column="kod_r_pktippu" type="number" comment="код госреестра типа счетчика" as="kod_r_pktippu" reference="hs_r_pktippu" refcol="kod_r_pktippu" key="0" />
        <column table="a" column="inv_nom" type="string" title="" comment="инвентарный номер" as="inv_nom" key="0" />
        <column table="a" column="nom_nakl" type="number" title="" comment="№ накладной" as="nom_nakl" key="0" />
        <column table="a" column="dat_nakl" type="date" title="" comment="дата накладной" as="dat_nakl" key="0" />
        <column table="a" column="pr_dopbp" type="number" title="" comment="признак наличия дополнительного блока питания" as="pr_dopbp" key="0" />
        <column table="a" column="nom_nakl_pol" type="number" title="" comment="№ накладной на получение" as="nom_nakl_pol" key="0" />
        <column table="a" column="dat_nakl_pol" type="date" title="" comment="дата накладной на получение" as="dat_nakl_pol" key="0" />
        <column table="a" column="pr_bu" type="number" title="" comment="признак бывший в употреблении" as="pr_bu" key="0" />
        <column table="a" column="price" type="number" title="" comment="стоимость" as="price" key="0" />
        <column table="a" column="nom_dog" type="string" title="" comment="№ договора" as="nom_dog" key="0" />
        <column table="a" column="dep" type="number" title="Код филиала" comment="подразделение" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_sklad" type="number" comment="код организации, ведущей складской учет" as="kod_sklad" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_sd_pov" type="date" title="" comment="дата сдачи в поверку" as="dat_sd_pov" key="0" />
        <column table="a" column="dat_sd_rem" type="date" title="" comment="дата сдачи в ремонт" as="dat_sd_rem" key="0" />
        <column table="a" column="dat_pp" type="date" title="" comment="дата последней поверки" as="dat_pp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_pu_u" as="a">
          <dlink name="hr_hisworks" dimension="1" as="hr_hisworks" table="hr_hisworks" child="hr_hisworks" field="kod_pu_u" parent="hr_pu_u" back="hr_hisworks" />
        </table>
        <query name="hs_sost" as="kod_sost" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="kod_sost" />
            <column table="kod_sost" column="kod_sost" />
          </call>
        </query>
        <query name="hs_mesto" as="kod_mesto" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="kod_mesto" />
            <column table="kod_mesto" column="kod_mesto" />
          </call>
        </query>
        <query name="hs_tippu" as="kod_tippu" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="kod_tippu" />
            <column table="kod_tippu" column="kod_tippu" />
          </call>
        </query>
        <query name="hs_dicmain" as="kod_pov" join="left outer" dname="hr_pu_u" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_pov" />
            <column table="kod_pov" column="kod_dic" />
          </call>
        </query>
        <query name="kk_bal" as="kod_bal" join="left outer" dname="hr_pu_u" title="Балансовая принадлежность">
          <call function="=">
            <column table="a" column="kod_bal" />
            <column table="kod_bal" column="kod_bal" />
          </call>
        </query>
        <query name="kr_org" as="kod_sklad" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="kod_sklad" />
            <column table="kod_sklad" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="hs_r_pktippu" as="kod_r_pktippu" join="left outer" dname="hr_pu_u">
          <call function="=">
            <column table="a" column="kod_r_pktippu" />
            <column table="kod_r_pktippu" column="kod_r_pktippu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_reglament_obj" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_reglament_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_reglament_obj" type="number" column-mandatory="1" as="kod_reglament_obj" key="1" fixed="1" />
        <column table="a" column="kod_numobj" type="number" column-mandatory="1" comment="Код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_kpotreb" type="number" comment="Код контролируемого потребления" as="kod_kpotreb" reference="hk_kontrol_potreb" refcol="kod_kpotreb" key="0" />
        <column table="a" column="kod_reglament" type="number" column-mandatory="1" comment="Код записи регламента" as="kod_reglament" reference="hr_reglament_pp" refcol="kod_reglament" key="0" />
        <column table="a" column="kod_market" type="number" comment="код рынка" as="kod_market" reference="hs_market_pokypki" refcol="kod_market" key="0" />
        <column table="a" column="kod_data" type="number" comment="Код приема" as="kod_data" reference="hs_parametr_data" refcol="kod_data" key="0" />
        <column table="a" column="dolya" type="number" title="" comment="Доля (%) покупки на розничном рынке" as="dolya" key="0" />
        <column table="a" column="pr_summa" type="number" title="" comment="Признак &quot;Дополнительно к суммарному&quot; означает, что этот график не учитывается в графике на договор в целом" as="pr_summa" key="0" />
        <column table="a" column="kod_nazn" type="number" comment="Код назначения графика часовой нагрузки по умолчанию" as="kod_nazn" reference="hk_powerhh24" refcol="kod_nazn" key="0" />
        <column table="a" column="edizm" type="number" title="" comment="Единица измерения" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="kod_sost" type="number" comment="Код состояния регламента" as="kod_sost" reference="hs_sost_reg" refcol="kod_sost" key="0" />
        <column table="a" column="kod_gr_power" type="number" comment="0 - до 750 кВА, 1 - 750 кВА и выше" as="kod_gr_power" reference="hs_gr_power" refcol="kod_gr_power" key="0" />
        <column table="a" column="kod_gtp" type="number" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_reglament_obj" as="a" />
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="hr_reglament_pp" as="kod_reglament" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_reglament" />
            <column table="kod_reglament" column="kod_reglament" />
          </call>
        </query>
        <query name="hs_gr_power" as="kod_gr_power" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_gr_power" />
            <column table="kod_gr_power" column="kod_gr_power" />
          </call>
        </query>
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_gtp" />
            <column table="kod_gtp" column="kod_gtp" />
          </call>
        </query>
        <query name="hs_market_pokypki" as="kod_market" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_market" />
            <column table="kod_market" column="kod_market" />
          </call>
        </query>
        <query name="hs_parametr_data" as="kod_data" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_data" />
            <column table="kod_data" column="kod_data" />
          </call>
        </query>
        <query name="hs_sost_reg" as="kod_sost" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_sost" />
            <column table="kod_sost" column="kod_sost" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="hk_kontrol_potreb" as="kod_kpotreb" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_kpotreb" />
            <column table="kod_kpotreb" column="kod_kpotreb" />
          </call>
        </query>
        <query name="hk_powerhh24" as="kod_nazn" join="left outer" dname="hr_reglament_obj">
          <call function="=">
            <column table="a" column="kod_nazn" />
            <column table="kod_nazn" column="kod_nazn" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_reglament_pp" comment="Таблица регламентов для формирования графиков планового почасового потребления и профилей фактического потребления в целом на договор" timestamp="20.10.2022 15:00:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_reglament_pp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_reglament" type="number" column-mandatory="1" comment="Код записи регламента" as="kod_reglament" key="1" fixed="1" />
        <column table="a" column="ym_s" type="number" column-mandatory="1" title="" comment="Период с" as="ym_s" key="0" />
        <column table="a" column="ym_po" type="number" title="" comment="Период по" as="ym_po" key="0" />
        <column table="a" column="days_ppp" type="number" title="" comment="Минимальное количество дней от подачи заявки до наступления расчетных суток" as="days_ppp" key="0" />
        <column table="a" column="hour_ppp" type="date" title="" comment="Время, до которого требуется подать заявку на проведение корректировки ППП" as="hour_ppp" key="0" />
        <column table="a" column="day_fpp" type="number" title="" comment="Минимальное количество дней от подачи фактического профиля нагрузки до наступления отчетного периода" as="day_fpp" key="0" />
        <column table="a" column="kod_dog" type="number" column-mandatory="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_level" type="number" comment="Код уровня контроля потребления: 1 - на договор, 2 - на объекты, 3 - смешанный (на договор в целом и отдельные объекты/субабоненты)" as="kod_level" reference="hk_level_potreb" refcol="kod_level" key="0" />
        <column table="a" column="month_s" type="number" column-mandatory="1" title="" comment="Месяц с которого начинается формирование графиков. По умолчанию январь" as="month_s" key="0" />
        <column table="a" column="month_po" type="number" column-mandatory="1" title="" comment="Месяц по который идет формирование графиков. По умолчанию декабрь" as="month_po" key="0" />
        <column table="a" column="pr_data" type="number" title="" comment="Выводить ППП&#xA;1 - как пустографки&#xA;2 - с данными, если их нет, то пустографки" as="pr_data" key="0" />
        <column table="a" column="pr_ppp" type="number" title="" comment="Определяет принадлежность регламента либо к плановому графику(1) либо к фактическому типовому графику (2)" as="pr_ppp" key="0" />
        <column table="a" column="kod_nazn" type="number" comment="Код назначения графика часовой нагрузки" as="kod_nazn" reference="hk_powerhh24" refcol="kod_nazn" key="0" />
        <column table="a" column="kod_data" type="number" comment="Код приема" as="kod_data" reference="hs_parametr_data" refcol="kod_data" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="kod_sost" type="number" comment="Код состояния регламента&#xA;1 - активный&#xA;2 - новый&#xA;3 - удален" as="kod_sost" reference="hs_sost_reg" refcol="kod_sost" key="0" />
        <column table="a" column="kod_kpotreb" type="number" comment="Код контролируемого потребления" as="kod_kpotreb" reference="hk_kontrol_potreb" refcol="kod_kpotreb" key="0" />
        <column table="a" column="kod_gr_power" type="number" comment="0 - до 750 кВА, 1 - 750 кВА и выше" as="kod_gr_power" reference="hs_gr_power" refcol="kod_gr_power" key="0" />
        <column table="a" column="kod_gtp" type="number" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" key="0" />
        <column table="a" column="pr_pril23" type="number" title="" comment="Для Владивостока. Выводить прил2.3  на договор (1) , на объекты (2), на договор и объекты (NULL или 0)" as="pr_pril23" key="0" />
        <column table="a" column="kod_variant" type="number" as="kod_variant" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hr_reglament_pp" as="a" />
        <query name="hk_powerhh24" as="kod_nazn" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_nazn" />
            <column table="kod_nazn" column="kod_nazn" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="hr_reglament_pp" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="hs_gr_power" as="kod_gr_power" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_gr_power" />
            <column table="kod_gr_power" column="kod_gr_power" />
          </call>
        </query>
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_gtp" />
            <column table="kod_gtp" column="kod_gtp" />
          </call>
        </query>
        <query name="hs_parametr_data" as="kod_data" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_data" />
            <column table="kod_data" column="kod_data" />
          </call>
        </query>
        <query name="hs_sost_reg" as="kod_sost" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_sost" />
            <column table="kod_sost" column="kod_sost" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="hk_kontrol_potreb" as="kod_kpotreb" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_kpotreb" />
            <column table="kod_kpotreb" column="kod_kpotreb" />
          </call>
        </query>
        <query name="hk_level_potreb" as="kod_level" join="left outer" dname="hr_reglament_pp">
          <call function="=">
            <column table="a" column="kod_level" />
            <column table="kod_level" column="kod_level" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_terr_addr" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_terr_addr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_terr" type="number" comment="наименование территории (зоны на карте)" as="kod_terr" />
        <column table="a" column="guid" type="number" title="" as="guid" reference="k_house" refcol="kodd" />
        <call function="rownum" as="hr_terr_addr_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hr_terr_addr" as="a" />
        <query name="hs_terr" as="kod_terr" join="left outer" dname="hr_terr_addr">
          <call function="=">
            <column table="a" column="kod_terr" />
            <column table="kod_terr" column="kod_terr" />
          </call>
        </query>
        <query name="k_house" as="guid" join="left outer" dname="hr_terr_addr">
          <call function="=">
            <column table="a" column="guid" />
            <column table="guid" column="kodd" />
          </call>
        </query>
      </from>
    </query>
    <query name="hr_ter_flats" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hr_terr_addr.xml" haskeys="1">
      <params>
        <param name="kod_trace" type="array">
          <call function="array">
            <const>121</const>
            <const>161</const>
          </call>
        </param>
      </params>
      <select>
        <column table="a" column="kodd" as="kodd" key="1" fixed="1" />
      </select>
      <from>
        <query name="k_house" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kodd" />
          <column table="a" column="kod_r" prior="1" />
        </call>
      </connect>
      <start>
        <call function="in">
          <column table="a" column="kodd" />
          <query>
            <select>
              <column table="a" column="guid" as="guid" />
            </select>
            <from>
              <query name="hr_terr_addr" as="a" />
            </from>
            <where>
              <call function="in">
                <column table="a" column="kod_terr" />
                <useparam name="kod_trace" />
              </call>
            </where>
          </query>
        </call>
      </start>
    </query>
    <query name="hs_23" class="1" timestamp="23.10.2017 21:47:21" title="Принадлежность объектов" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_23.xml" haskeys="1">
      <select>
        <column table="a" column="kod_f23" type="number" key="1" as="kod_f23" />
        <column table="a" column="name" type="string" title="Наименование" is-fact="1" agg="list" as="name" fact="hs_23_name" />
        <column table="a" column="npp" type="number" title="" as="npp" />
        <column table="a" column="gr" type="string" title="" comment="группа" as="gr" />
        <column table="a" column="pr_byt" type="number" title="" comment="признак &quot;бытовики&quot;" as="pr_byt" />
        <column table="a" column="kod_r" type="number" as="kod_r" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hs_23" as="a" title="Принадлежность объектов">
          <dlink name="kr_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_f23" parent="hs_23" back="kr_numobj">
            <dimlink name="kod_point" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
      </from>
    </query>
    <query name="hs_dicmain" class="1" timestamp="29.03.2017 09:25:10" title="Общий справочник эл приборов" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_dicmain.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dic" type="number" comment="код справочника" as="kod_dic" key="1" fixed="1" />
        <column table="a" column="nomer" type="number" title="" as="nomer" reference="hk_vidpribor" refcol="nomer" key="0" />
        <column table="a" column="name" type="string" title="Значение характеристики" comment="значение характеристики" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="name2" type="string" title="" as="name2" key="0" />
        <column table="a" column="name3" type="string" title="" as="name3" key="0" />
        <column table="a" column="name4" type="string" title="" as="name4" key="0" />
        <column table="a" column="nomer2" type="number" title="" as="nomer2" key="0" />
        <column table="a" column="nomer3" type="number" title="" as="nomer3" key="0" />
        <column table="a" column="pr_nodel" type="number" title="" as="pr_nodel" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="kod_reestr" type="number" comment="код госреестра (ск казань)" as="kod_reestr" reference="hs_reestr_pu" refcol="kod_reestr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_dicmain" as="a" title="Общий справочник эл приборов" />
        <query name="hs_reestr_pu" as="kod_reestr" join="left outer" dname="hs_dicmain">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
        <query name="hk_vidpribor" as="nomer" join="left outer" dname="hs_dicmain">
          <call function="=">
            <column table="a" column="nomer" />
            <column table="nomer" column="nomer" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_gost" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_gost.xml" haskeys="1">
      <select>
        <column table="a" column="kod_gost" type="number" comment="код гост" as="kod_gost" key="1" fixed="1" />
        <column table="a" column="num_gost" type="string" title="" comment="номер гост" as="num_gost" key="0" />
        <column table="a" column="dat_prin" type="date" title="" comment="дата принятия" as="dat_prin" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="название гост" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="dat_otm" type="date" title="" as="dat_otm" key="0" />
        <column table="a" column="notes" type="string" title="" as="notes" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_gost" as="a" />
      </from>
    </query>
    <query name="hs_gtp" class="1" timestamp="18.11.2022 14:36:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_gtp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_gtp" type="number" key="1" as="kod_gtp" />
        <column table="a" column="name" type="string" title="Наименование ГТП" comment="наименование" as="name" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="xls_gtp_id" type="string" title="" comment="идентификатор гтп из xls" as="xls_gtp_id" />
        <column table="a" column="pr_def" type="number" title="" comment="признак &quot;использовать по умолчанию для точек&quot;. да \ нет" as="pr_def" />
        <column table="a" column="pr_opt" comment="оптовая ГТП" as="pr_opt" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hs_gtp" as="a" />
      </from>
    </query>
    <query name="hs_ktippu" class="1" timestamp="05.05.2017 14:46:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_ktippu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ktippu" type="number" comment="код класса сч" as="kod_ktippu" key="1" fixed="1" />
        <column table="a" column="kod_system" type="number" as="kod_system" reference="hk_systempu" refcol="kod_system" key="0" />
        <column table="a" column="kod_namekpu" type="number" comment="код наимен класса сч" as="kod_namekpu" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="fazn" type="number" title="Количество фаз" comment="кол-во фаз" as="fazn" key="0" />
        <column table="a" column="god_vip" type="string" title="" comment="год выпуска" as="god_vip" key="0" />
        <column table="a" column="kod_gost" type="number" comment="код гост" as="kod_gost" reference="hs_gost" refcol="kod_gost" key="0" />
        <column table="a" column="mpi" type="number" title="" comment="мпи (лет) - перенесено в hs_pktippu" as="mpi" key="0" />
        <column table="a" column="srok_sl" type="number" title="" comment="срок службы (лет)" as="srok_sl" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="vid_en" type="string" title="" as="vid_en" key="0" />
        <column table="a" column="t_min" type="number" title="" as="t_min" key="0" />
        <column table="a" column="t_max" type="number" title="" as="t_max" key="0" />
        <column table="a" column="pr_noview" type="number" title="" as="pr_noview" key="0" />
        <column table="a" column="pr_bt" type="number" title="" comment="признак использования бытовиками: 1-используется" as="pr_bt" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_ktippu" as="a" />
        <query name="hs_dicmain" as="kod_namekpu" join="left outer" dname="hs_ktippu" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_namekpu" />
            <column table="kod_namekpu" column="kod_dic" />
          </call>
        </query>
        <query name="hs_gost" as="kod_gost" join="left outer" dname="hs_ktippu">
          <call function="=">
            <column table="a" column="kod_gost" />
            <column table="kod_gost" column="kod_gost" />
          </call>
        </query>
        <query name="hk_systempu" as="kod_system" join="left outer" dname="hs_ktippu">
          <call function="=">
            <column table="a" column="kod_system" />
            <column table="kod_system" column="kod_system" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_ktipsm" class="1" timestamp="13.04.2017 10:30:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_ktipsm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ktipsm" type="number" comment="код каталога типа успд" as="kod_ktipsm" key="1" fixed="1" />
        <column table="a" column="kod_nametip" type="number" comment="код наименования" as="kod_nametip" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="u_pit" type="string" title="" comment="напряжение питания (в)" as="u_pit" key="0" />
        <column table="a" column="dlit" type="number" title="" comment="длительность входного импульса (мс)" as="dlit" key="0" />
        <column table="a" column="chastota" type="number" title="" comment="максим частота входных импульсов (гц)" as="chastota" key="0" />
        <column table="a" column="temperatura" type="string" title="" comment="рабочий диапазон температур (град с)" as="temperatura" key="0" />
        <column table="a" column="u_potr" type="number" title="" comment="потребляемая мощность (ва)" as="u_potr" key="0" />
        <column table="a" column="mpi" type="number" title="МПИ лет" comment="мпи (лет)" as="mpi" key="0" />
        <column table="a" column="srok_sl" type="number" title="" comment="срок службы (лет)" as="srok_sl" key="0" />
        <column table="a" column="kod_reestr" type="number" comment="код № госреестра" as="kod_reestr" reference="hs_reestr_pu" refcol="kod_reestr" key="0" />
        <column table="a" column="kod_gost" type="number" comment="код гост" as="kod_gost" reference="hs_gost" refcol="kod_gost" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_ktipsm" as="a" />
        <query name="hs_dicmain" as="kod_nametip" join="left outer" dname="hs_ktipsm" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_nametip" />
            <column table="kod_nametip" column="kod_dic" />
          </call>
        </query>
        <query name="hs_gost" as="kod_gost" join="left outer" dname="hs_ktipsm">
          <call function="=">
            <column table="a" column="kod_gost" />
            <column table="kod_gost" column="kod_gost" />
          </call>
        </query>
        <query name="hs_reestr_pu" as="kod_reestr" join="left outer" dname="hs_ktipsm">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_ktiptn" class="1" title="Типы ТН и ТТ" timestamp="05.05.2017 14:49:37" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_ktiptn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ktiptn" type="number" comment="код каталога типов тн" as="kod_ktiptn" key="1" fixed="1" />
        <column table="a" column="kod_nametip" type="number" comment="код наименования типа тн" as="kod_nametip" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="fazn" type="number" title="Количество фаз" comment="кол-во фаз -для тн" as="fazn" key="0" />
        <column table="a" column="mpi" type="number" title="МПИ лет" comment="мпи (лет)" as="mpi" key="0" />
        <column table="a" column="srok_sl" type="number" title="" comment="срок службы (лет)" as="srok_sl" key="0" />
        <column table="a" column="kod_gost" type="number" comment="код гост" as="kod_gost" reference="hs_gost" refcol="kod_gost" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="class_t2" type="string" title="" as="class_t2" key="0" />
        <column table="a" column="p_max" type="number" title="" as="p_max" key="0" />
        <column table="a" column="kod_reestr" type="number" as="kod_reestr" reference="hs_reestr_pu" refcol="kod_reestr" key="0" />
        <column table="a" column="pr_noview" type="number" title="" as="pr_noview" key="0" />
        <column table="a" column="u" type="number" title="" as="u" key="0" />
        <column table="a" column="pr_sk" type="number" title="Признак данных СК" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_ktiptn" as="a" title="Типы ТН и ТТ" />
        <query name="hs_dicmain" as="kod_nametip" join="left outer" dname="hs_ktiptn" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_nametip" />
            <column table="kod_nametip" column="kod_dic" />
          </call>
        </query>
        <query name="hs_gost" as="kod_gost" join="left outer" dname="hs_ktiptn">
          <call function="=">
            <column table="a" column="kod_gost" />
            <column table="kod_gost" column="kod_gost" />
          </call>
        </query>
        <query name="hs_reestr_pu" as="kod_reestr" join="left outer" dname="hs_ktiptn">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_namepkpu" class="1" timestamp="21.09.2017 12:52:03" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_namepkpu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_namepkpu" type="number" comment="код наимен подкласса сч" as="kod_namepkpu" key="1" fixed="1" />
        <column table="a" column="kod_namekpu" type="number" comment="код наимен класса сч" as="kod_namekpu" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="name_pk" type="string" comment="наименование подкласса" title="Наименование модели" agg="list" is-fact="1" as="name_pk" fact="hs_namepkpu_name_pk" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_namepkpu" as="a" />
        <query name="hs_dicmain" as="kod_namekpu" join="left outer" dname="hs_namepkpu" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_namekpu" />
            <column table="kod_namekpu" column="kod_dic" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_nametip_uspd" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_nametip_uspd.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nametip_uspd" type="number" comment="код наименования типа успд" as="kod_nametip_uspd" key="1" fixed="1"></column>
        <column table="a" column="kod_nametip" type="number" comment="код наименования каталога типа успд" as="kod_nametip" reference="hs_dicmain" refcol="kod_dic" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование типа успд" as="name" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_nametip_uspd" as="a"></table>
        <query name="hs_dicmain" as="kod_nametip" join="left outer" dname="hs_nametip_uspd" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_nametip"></column>
            <column table="kod_nametip" column="kod_dic"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="hs_pktippu" class="1" timestamp="21.09.2017 12:55:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_pktippu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pktippu" type="number" comment="код подкласса сч" as="kod_pktippu" key="1" fixed="1" />
        <column table="a" column="kod_ktippu" type="number" comment="код класса сч" as="kod_ktippu" reference="hs_ktippu" refcol="kod_ktippu" key="0" />
        <column table="a" column="kod_namepkpu" type="number" comment="код наимен подкласса сч" as="kod_namepkpu" reference="hs_namepkpu" refcol="kod_namepkpu" key="0" />
        <column table="a" column="class_t" type="string" title="Класс точности по активной энергии" comment="класс точности" as="class_t" key="0" />
        <column table="a" column="p_potr_vt" type="number" title="" comment="потребляемая мощность (вт)" as="p_potr_vt" key="0" />
        <column table="a" column="p_potr_va" type="number" title="" comment="потребляемая мощность (ва)" as="p_potr_va" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="provodn" type="number" title="" as="provodn" key="0" />
        <column table="a" column="kod_scm" type="number" as="kod_scm" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="podkluch" type="number" title="" as="podkluch" key="0" />
        <column table="a" column="a_pr" type="number" title="" as="a_pr" key="0" />
        <column table="a" column="a_obr" type="number" title="" as="a_obr" key="0" />
        <column table="a" column="p_pr" type="number" title="" as="p_pr" key="0" />
        <column table="a" column="p_obr" type="number" title="" as="p_obr" key="0" />
        <column table="a" column="kol_tar" type="number" title="" as="kol_tar" key="0" />
        <column table="a" column="pa_pr" type="number" title="" as="pa_pr" key="0" />
        <column table="a" column="pa_obr" type="number" title="" as="pa_obr" key="0" />
        <column table="a" column="pp_pr" type="number" title="" as="pp_pr" key="0" />
        <column table="a" column="pp_obr" type="number" title="" as="pp_obr" key="0" />
        <column table="a" column="kol_imp_kan" type="number" title="" as="kol_imp_kan" key="0" />
        <column table="a" column="pr_rele_nagr" type="number" title="" as="pr_rele_nagr" key="0" />
        <column table="a" column="pr_rele_tarif" type="number" title="" as="pr_rele_tarif" key="0" />
        <column table="a" column="prof_nagr" type="number" title="" as="prof_nagr" key="0" />
        <column table="a" column="glubina" type="number" title="" as="glubina" key="0" />
        <column table="a" column="interval" type="string" title="" as="interval" key="0" />
        <column table="a" column="cd_smax" type="number" title="" as="cd_smax" key="0" />
        <column table="a" column="razr" type="number" title="" as="razr" key="0" />
        <column table="a" column="num_del" type="number" title="" as="num_del" key="0" />
        <column table="a" column="abs_pogr" type="number" title="" as="abs_pogr" key="0" />
        <column table="a" column="min_razn" type="number" title="" as="min_razn" key="0" />
        <column table="a" column="mid_xod" type="number" title="" as="mid_xod" key="0" />
        <column table="a" column="const_pu" type="number" title="" as="const_pu" key="0" />
        <column table="a" column="elem_s" type="string" title="" as="elem_s" key="0" />
        <column table="a" column="mpi" type="number" title="МПИ лет" comment="мпи (лет)" as="mpi" key="0" />
        <column table="a" column="t_min" type="number" title="" comment="нижний предел температуры окруж воздуха" as="t_min" key="0" />
        <column table="a" column="t_max" type="number" title="" comment="верхний предел температуры окруж воздуха" as="t_max" key="0" />
        <column table="a" column="class_t_r" type="string" title="Класс точности по реактивной энергии" comment="класс точности по реактивной энергии (ск казань)" as="class_t_r" key="0" />
        <column table="a" column="predel" type="string" title="" comment="ограничения (ск казань)" as="predel" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="kod_namepkpu" column="name_pk" type="string" as="name_pk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_pktippu" as="a" />
        <query name="hs_dicmain" as="kod_scm" join="left outer" dname="hs_pktippu" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_scm" />
            <column table="kod_scm" column="kod_dic" />
          </call>
        </query>
        <query name="hs_ktippu" as="kod_ktippu" join="left outer" dname="hs_pktippu">
          <call function="=">
            <column table="a" column="kod_ktippu" />
            <column table="kod_ktippu" column="kod_ktippu" />
          </call>
        </query>
        <query name="hs_namepkpu" as="kod_namepkpu" join="left outer" dname="hs_pktippu">
          <call function="=">
            <column table="a" column="kod_namepkpu" />
            <column table="kod_namepkpu" column="kod_namepkpu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_reestr_pu" class="1" timestamp="13.04.2017 11:33:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_reestr_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_reestr" type="number" comment="код № госреестра" as="kod_reestr" key="1" fixed="1" />
        <column table="a" column="nomer" type="number" title="" comment="тн-1 тт-0 сч-2" as="nomer" reference="hk_vidpribor" refcol="nomer" key="0" />
        <column table="a" column="nom_reestr" type="string" title="Рег. номер в Госреестре" comment="№ госреестра" as="nom_reestr" key="0" />
        <column table="a" column="name_si" type="string" title="" comment="наименование си" as="name_si" key="0" />
        <column table="a" column="tip_si" type="string" title="" comment="тип си" as="tip_si" key="0" />
        <column table="a" column="primen" type="string" title="" comment="применение" as="primen" key="0" />
        <column table="a" column="mpi" type="number" title="" comment="мпи (лет)" as="mpi" key="0" />
        <column table="a" column="kod_zi" type="number" comment="код завода-изготовителя" as="kod_zi" reference="hs_factories" refcol="kod_zi" key="0" />
        <column table="a" column="nom_sertif" type="string" title="" comment="№ сертификата" as="nom_sertif" key="0" />
        <column table="a" column="dat_end_s" type="date" title="" comment="дата окончания действия сертификата" as="dat_end_s" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="no_active" type="number" title="" comment="1-неактивный" as="no_active" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="признак данных сетевой компании: 1-данные ск" as="pr_sk" key="0" />
        <column table="a" column="gost_tu" type="string" title="ГОСТ ТУ" comment="гост (ту) на выпуск" as="gost_tu" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_reestr_pu" as="a" />
        <query name="hs_factories" as="kod_zi" join="left outer" dname="hs_reestr_pu">
          <call function="=">
            <column table="a" column="kod_zi" />
            <column table="kod_zi" column="kod_zi" />
          </call>
        </query>
        <query name="hk_vidpribor" as="nomer" join="left outer" dname="hs_reestr_pu">
          <call function="=">
            <column table="a" column="nomer" />
            <column table="nomer" column="nomer" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_sotr_pu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_sotr_pu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sotr" type="number" comment="код сотрудника раб ПУ" as="kod_sotr" key="1" fixed="1" />
        <column table="a" column="kod_emp" type="number" comment="Код сотрудника" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kvalif" type="string" title="" comment="квалификация" as="kvalif" key="0" />
        <column table="a" column="gr_elbez" type="string" title="" comment="группа по электробезопасности" as="gr_elbez" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения, в котором сотрудник проводит работы" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата приема на работу" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата увольнения" as="dat_po" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_sotr_pu" as="a" />
        <query name="kr_org" as="kodp" join="left outer" dname="hs_sotr_pu">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left inner" dname="hs_sotr_pu">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_terr" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_terr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_terr" type="number" comment="наименование территории (зоны на карте)" as="kod_terr" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование территории (зоны)" as="name" key="0"></column>
        <column table="a" column="rdate" type="date" title="" comment="дата регистрации территории (зоны карты)" as="rdate" key="0"></column>
        <column table="a" column="xmlmap" type="xmltype" title="" as="xmlmap" key="0"></column>
        <column table="a" column="pr_active" type="number" title="" comment="состояние (новый (2), активный (0), удаленный (1))" as="pr_active" reference="kk_active" refcol="pr_active" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_terr" as="a"></table>
        <query name="kk_active" as="pr_active" join="left outer" dname="hs_terr">
          <call function="=">
            <column table="a" column="pr_active"></column>
            <column table="pr_active" column="pr_active"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="hs_tippu" class="1" timestamp="10.09.2017 01:35:37" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_tippu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tippu" type="number" comment="код типа сч осн" title="Код типа счётчика" as="kod_tippu" key="1" fixed="1" />
        <column table="a" column="kod_pktippu" type="number" comment="код подкласса сч" as="kod_pktippu" reference="hs_pktippu" refcol="kod_pktippu" key="0" />
        <column table="a" column="u" type="string" title="" comment="напряжение" as="u" key="0" />
        <column table="a" column="i" type="string" title="" comment="ток" as="i" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="u_nom" type="number" title="" as="u_nom" key="0" />
        <column table="a" column="u_max" type="number" title="" as="u_max" key="0" />
        <column table="a" column="i_nom" type="number" title="" as="i_nom" key="0" />
        <column table="a" column="i_max" type="number" title="" as="i_max" key="0" />
        <column table="a" column="ext_import" type="number" title="" comment="импортирован из внешней системы" as="ext_import" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_tippu" as="a" />
        <query name="hs_pktippu" as="kod_pktippu" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hs_tippu">
          <call function="=">
            <column table="a" column="kod_pktippu" />
            <column table="kod_pktippu" column="kod_pktippu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_tiprsi" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_tiprsi.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tiprsi" type="number" comment="код типа рси (рэ)" as="kod_tiprsi" key="1" fixed="1"></column>
        <column table="a" column="kod_vidrsi" type="number" comment="код вида рси (рэ)" as="kod_vidrsi" reference="hs_dicmain" refcol="kod_dic" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование типа" as="name" key="0"></column>
        <column table="a" column="predel" type="string" title="" comment="предел измерений" as="predel" key="0"></column>
        <column table="a" column="class_t" type="string" title="" comment="класс точности" as="class_t" key="0"></column>
        <column table="a" column="mki" type="number" title="" comment="мки (лет)- для рси, мпи-для рэ" as="mki" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="p_potr" type="number" title="" comment="мощность потребляемая цепью напряжения (вт)" as="p_potr" key="0"></column>
        <column table="a" column="rab_usl" type="string" title="" comment="рабочие условия (по температуре, напряжению, частоте и т.д.)" as="rab_usl" key="0"></column>
        <column table="a" column="rezim" type="number" title="" comment="режим работы 0-переносной 1-стационарный" as="rezim" key="0"></column>
        <column table="a" column="kod_sfera" type="number" comment="код сферы гмк (для рэ)" as="kod_sfera" reference="hs_dicmain" refcol="kod_dic" key="0"></column>
        <column table="a" column="mpi" type="number" title="" comment="мпи (лет) - для рси" as="mpi" key="0"></column>
        <column table="a" column="kod_gost" type="number" comment="код гост (ту)" as="kod_gost" reference="hs_gost" refcol="kod_gost" key="0"></column>
        <column table="a" column="kod_reestr" type="number" comment="код госреестра" as="kod_reestr" reference="hs_reestr_pu" refcol="kod_reestr" key="0"></column>
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0"></column>
        <column table="a" column="nenorm" type="number" title="" comment="признак: 1-точность измерений не нормируется" as="nenorm" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_tiprsi" as="a"></table>
        <query name="hs_dicmain" as="kod_vidrsi" join="left outer" dname="hs_tiprsi" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_vidrsi"></column>
            <column table="kod_vidrsi" column="kod_dic"></column>
          </call>
        </query>
        <query name="hs_dicmain" as="kod_sfera" join="left outer" dname="hs_tiprsi" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_sfera"></column>
            <column table="kod_sfera" column="kod_dic"></column>
          </call>
        </query>
        <query name="hs_gost" as="kod_gost" join="left outer" dname="hs_tiprsi">
          <call function="=">
            <column table="a" column="kod_gost"></column>
            <column table="kod_gost" column="kod_gost"></column>
          </call>
        </query>
        <query name="hs_reestr_pu" as="kod_reestr" join="left outer" dname="hs_tiprsi">
          <call function="=">
            <column table="a" column="kod_reestr"></column>
            <column table="kod_reestr" column="kod_reestr"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="hs_tipsm" class="1" timestamp="13.04.2017 10:37:06" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_tipsm.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tipsm" type="number" comment="код типа успд" as="kod_tipsm" key="1" fixed="1" />
        <column table="a" column="kod_ktipsm" type="number" comment="код каталога типа успд" as="kod_ktipsm" reference="hs_ktipsm" refcol="kod_ktipsm" key="0" />
        <column table="a" column="kod_nametip_uspd" type="number" comment="код наименования типа успд" as="kod_nametip_uspd" reference="hs_nametip_uspd" refcol="kod_nametip_uspd" key="0" />
        <column table="a" column="num_chan" type="number" title="" comment="количество каналов" as="num_chan" key="0" />
        <column table="a" column="vid_max" type="number" title="" comment="максимальное кол-во групп учета" as="vid_max" key="0" />
        <column table="a" column="kod_scm" type="number" comment="код вида счетного механизма" as="kod_scm" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="kol_razr" type="number" title="" comment="количество разрядов" as="kol_razr" key="0" />
        <column table="a" column="prof_nagr" type="number" title="" comment="наличие профиля нагрузки" as="prof_nagr" key="0" />
        <column table="a" column="glubina" type="number" title="" comment="глубина хранения (сут)" as="glubina" key="0" />
        <column table="a" column="interval" type="string" title="" comment="интервалы записи (мин)" as="interval" key="0" />
        <column table="a" column="a_pr" type="number" title="" comment="энергия активная в 1 направлении" as="a_pr" key="0" />
        <column table="a" column="a_obr" type="number" title="" comment="энергия активная в 2-х направлениях" as="a_obr" key="0" />
        <column table="a" column="p_pr" type="number" title="" comment="энергия реактивная в 1 направлении" as="p_pr" key="0" />
        <column table="a" column="p_obr" type="number" title="" comment="энергия реактивная в 2-х направлениях" as="p_obr" key="0" />
        <column table="a" column="pa_pr" type="number" title="" comment="мощность активная в 1 направлении" as="pa_pr" key="0" />
        <column table="a" column="pa_obr" type="number" title="" comment="мощность активная в 2-х направлениях" as="pa_obr" key="0" />
        <column table="a" column="pp_pr" type="number" title="" comment="мощность реактивная в 1 направлении" as="pp_pr" key="0" />
        <column table="a" column="pp_obr" type="number" title="" comment="мощность реактивная в 2-х напрвлениях" as="pp_obr" key="0" />
        <column table="a" column="p_full" type="number" title="" comment="мощность полная" as="p_full" key="0" />
        <column table="a" column="p_max" type="number" title="" comment="мощность максимальная" as="p_max" key="0" />
        <column table="a" column="class_t" type="string" comment="погрешность (%)" title="Погрешность %" as="class_t" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_tipsm" as="a" />
        <query name="hs_dicmain" as="kod_scm" join="left outer" dname="hs_tipsm" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_scm" />
            <column table="kod_scm" column="kod_dic" />
          </call>
        </query>
        <query name="hs_ktipsm" as="kod_ktipsm" join="left outer" dname="hs_tipsm">
          <call function="=">
            <column table="a" column="kod_ktipsm" />
            <column table="kod_ktipsm" column="kod_ktipsm" />
          </call>
        </query>
        <query name="hs_nametip_uspd" as="kod_nametip_uspd" join="left outer" dname="hs_tipsm">
          <call function="=">
            <column table="a" column="kod_nametip_uspd" />
            <column table="kod_nametip_uspd" column="kod_nametip_uspd" />
          </call>
        </query>
      </from>
    </query>
    <query name="hs_tip_preobr" class="1" timestamp="05.05.2017 15:24:19" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hs_tip_preobr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tip_preobr" type="number" comment="код типа преобразователя" as="kod_tip_preobr" key="1" fixed="1" />
        <column table="a" column="kod_vid_preobr" type="number" comment="код вида преобразователя" as="kod_vid_preobr" reference="hs_dicmain" refcol="kod_dic" key="0" />
        <column table="a" column="name" type="string" title="Наименование модификации" comment="наименивание типа" as="name" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="mpi" type="number" comment="мпи (лет)" title="МПИ лет" halign="center" as="mpi" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_reestr" type="number" comment="код госреестра" as="kod_reestr" reference="hs_reestr_pu" refcol="kod_reestr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hs_tip_preobr" as="a" />
        <query name="hs_dicmain" as="kod_vid_preobr" join="left outer" dname="hs_tip_preobr" title="Общий справочник эл приборов">
          <call function="=">
            <column table="a" column="kod_vid_preobr" />
            <column table="kod_vid_preobr" column="kod_dic" />
          </call>
        </query>
        <query name="hs_reestr_pu" as="kod_reestr" join="left outer" dname="hs_tip_preobr">
          <call function="=">
            <column table="a" column="kod_reestr" />
            <column table="kod_reestr" column="kod_reestr" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_balter_org" class="1" title="Балансовые организации" timestamp="05.05.2017 12:20:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_balter_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" key="1" as="kodp" />
        <column table="a" column="sname" type="string" title="Краткое наименование" halign="center" as="sname" />
        <column table="a" column="name" type="string" title="Полное наименование" as="name" />
        <column table="a" column="ispes" type="number" title="" as="ispes" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_balter_org" as="a" title="Балансовые организации" />
      </from>
    </query>
    <query name="hv_elter_org" class="1" timestamp="31.05.2017 09:22:21" title="Огранизации , которые явл. эксплуатац. подразделением" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_elter_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" key="1" as="kodp" />
        <column table="a" column="sname" type="string" title="" as="sname" />
        <column table="a" column="altername" type="string" title="" as="altername" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_elter_org" as="a" title="Огранизации , которые явл. эксплуатац. подразделением" />
      </from>
    </query>
    <query name="hv_elter_org_area15" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_elter_org_area15.xml" haskeys="1">
      <select>
        <call function="rowid" as="hv_elter_org_area15_id" key="1" />
        <column table="a" column="kodp" type="number" title="" comment="Код РЭС &quot;сетевого&quot; филиала" as="kodp" />
        <column table="a" column="sname" type="string" title="" comment="Краткое наименование РЭС &quot;сетевого&quot; филиала" as="sname" />
        <column table="a" column="altername" type="string" title="" comment="Наименование РЭС &quot;сетевого&quot; филиала" as="altername" />
        <column table="a" column="kod_ecls" type="number" comment="Код классификатора 1" as="kod_ecls" />
        <column table="a" column="kod_separator" type="number" comment="Код классификатора 2" as="kod_separator" />
        <column table="a" column="kod_parent" type="number" comment="Код &quot;сетевого&quot; филиала" as="kod_parent" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_elter_org_area15" as="a" />
      </from>
    </query>
    <query name="hv_eobject_eq" class="1" timestamp="17.03.2021 05:13:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eobject_eq.xml" haskeys="1">
      <params>
        <param name="place_bal_id" type="array" />
        <param name="eobj_id_eo" type="array" />
      </params>
      <select>
        <column table="a" column="eobj_id" type="number" title="" key="1" as="eobj_id" />
        <column table="a" column="eobj_name" type="string" title="Оборудование" as="eobj_name" />
        <column table="a" column="seobj_name" type="string" title="Энергообъект" as="seobj_name" />
        <column table="a" column="baltername" type="string" title="Балансовая принадлежность" as="baltername" />
        <column table="a" column="ealtername" type="string" title="Эксплуатационная ответственность" as="ealtername" />
        <column table="a" column="kindname" type="string" title="" as="kindname" />
        <column table="a" column="seobj_id" type="number" title="" as="seobj_id" />
        <column table="a" column="bal_id" type="number" title="" as="bal_id" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_eobject_eq" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in nnull" optional="1">
            <column table="a" column="seobj_id" />
            <useparam name="eobj_id_eo" />
          </call>
          <call function="in nnull" optional="1">
            <column table="a" column="bal_id" />
            <useparam name="place_bal_id" />
          </call>
        </call>
      </where>
    </query>
    <query name="hv_eobject_eq_search" class="1" timestamp="05.05.2017 13:30:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eobject_eq_search.xml" haskeys="1">
      <select>
        <column table="a" column="eorowid" type="rowid" title="" as="eorowid" key="1" fixed="1" />
        <column table="a" column="keorowid" type="rowid" title="" as="keorowid" key="0" />
        <column table="a" column="eovrowid" type="rowid" title="" as="eovrowid" key="0" />
        <column table="a" column="svorowid" type="rowid" title="" as="svorowid" key="0" />
        <column table="a" column="eosrowid" type="rowid" title="" as="eosrowid" key="0" />
        <column table="a" column="barowid" type="rowid" title="" as="barowid" key="0" />
        <column table="a" column="elrowid" type="rowid" title="" as="elrowid" key="0" />
        <column table="a" column="eossrowid" type="rowid" title="" as="eossrowid" key="0" />
        <column table="a" column="eoskrowid" type="rowid" title="" as="eoskrowid" key="0" />
        <column table="a" column="ogrowid" type="rowid" title="" as="ogrowid" key="0" />
        <column table="a" column="mrowid" type="rowid" title="" as="mrowid" key="0" />
        <column table="a" column="elsrowid" type="rowid" title="" as="elsrowid" key="0" />
        <column table="a" column="hoerowid" type="rowid" title="" as="hoerowid" key="0" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" key="0" />
        <column table="a" column="eobj_name" type="string" title="" as="eobj_name" key="0" />
        <column table="a" column="seobj_id" type="number" title="" as="seobj_id" key="0" />
        <column table="a" column="seobj_name" type="string" title="" as="seobj_name" key="0" />
        <column table="a" column="sbal_id" type="number" title="" as="sbal_id" key="0" />
        <column table="a" column="sexpl_id" type="number" title="" as="sexpl_id" key="0" />
        <column table="a" column="baltername" type="string" title="" as="baltername" key="0" />
        <column table="a" column="ealtername" type="string" title="" as="ealtername" key="0" />
        <column table="a" column="kindname" type="string" title="" as="kindname" key="0" />
        <column table="a" column="kod_srckind" type="number" as="kod_srckind" key="0" />
        <column table="a" column="fiz_voltage" type="number" title="" as="fiz_voltage" key="0" />
        <column table="a" column="fiz_voltage_abbr" type="string" title="" as="fiz_voltage_abbr" key="0" />
        <column table="a" column="klass_bal_eo" type="number" title="" as="klass_bal_eo" key="0" />
        <column table="a" column="name_klass_bal_eo" type="string" title="" as="name_klass_bal_eo" key="0" />
        <column table="a" column="kod_net" type="number" as="kod_net" key="0" />
        <column table="a" column="name_net" type="string" title="" as="name_net" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_eobject_eq_search" as="a" />
      </from>
    </query>
    <query name="hv_eobject_senter_nut" class="1" timestamp="26.10.2017 17:27:02" title="Центры питания ЭО" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eobject_senter_nut.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" key="1" as="eobj_id" />
        <column table="a" column="id_fider_nut" type="string" title="" as="id_fider_nut" />
        <column table="a" column="name_fider_nut" type="string" title="" is-fact="1" agg="list" fact="hv_eobj_sent_fider_name" as="name_fider_nut" />
        <column table="a" column="id_senter_nut" type="number" title="" as="id_senter_nut" />
        <column table="a" column="name_senter_nut" type="string" title="" is-fact="1" agg="list" fact="hv_eobj_sent_name" as="name_senter_nut" />
        <column table="a" column="bal_id_senter_nut" type="number" title="" as="bal_id_senter_nut" />
        <column table="a" column="baltername_senter_nut" type="string" title="" as="baltername_senter_nut" />
        <column table="a" column="seti_senter_nut" type="string" title="" as="seti_senter_nut" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_eobject_senter_nut" as="a" title="Центры питания ЭО">
          <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="kod_eobject_senter_nut" parent="hv_eobject_senter_nut" back="hr_eobject">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id_eo" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
      </from>
    </query>
    <query name="hv_eobject_src" class="1" timestamp="11.10.2017 14:15:12" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eobject_src.xml" haskeys="1">
      <params>
        <param name="kod_srckind" type="array" />
        <param name="bal_id_eo" type="array" />
        <param name="exp_id_eo" type="array" />
      </params>
      <select>
        <column table="a" column="seobj_id" type="number" title="" key="1" as="seobj_id" />
        <column table="a" column="seobj_name" type="string" title="Название" as="seobj_name" />
        <column table="a" column="kindname" type="string" title="Тип" halign="center" as="kindname" />
        <column table="a" column="kod_srckind" type="number" as="kod_srckind" />
        <column table="a" column="baltername" type="string" title="Балансовая принадлежность" as="baltername" />
        <column table="a" column="ealtername" type="string" title="Эксплуатационная ответственность" as="ealtername" />
        <column table="a" column="sbal_id" type="number" title="" as="sbal_id" />
        <column table="a" column="sexpl_id" type="number" title="" as="sexpl_id" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_eobject_src" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in nnull" optional="1">
            <column table="a" column="kod_srckind" />
            <useparam name="kod_srckind" />
          </call>
          <call function="in nnull" optional="1">
            <column table="a" column="sbal_id" />
            <useparam name="bal_id_eo" />
          </call>
          <call function="in nnull" optional="1">
            <column table="a" column="sexpl_id" />
            <useparam name="exp_id_eo" />
          </call>
        </call>
      </where>
    </query>
    <query name="hv_eobject_x" class="1" timestamp="30.03.2017 17:07:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eobject_x.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="kindname" type="string" title="" as="kindname" />
        <column table="a" column="parent_id" type="number" title="" as="parent_id" reference="hv_eosrc_x" refcol="eobj_id" />
        <column table="a" column="bal_id" type="number" title="" as="bal_id" reference="kr_org_group" refcol="kod_org" />
        <column table="a" column="expl_id" type="number" title="" as="expl_id" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" />
        <column table="a" column="bname" type="string" title="" as="bname" />
        <column table="a" column="bsname" type="string" title="" as="bsname" />
        <column table="a" column="baltername" type="string" title="" as="baltername" />
        <column table="a" column="bkod_separator" type="number" as="bkod_separator" />
        <column table="a" column="bkod_ecls" type="number" as="bkod_ecls" />
        <column table="a" column="ename" type="string" title="" as="ename" />
        <column table="a" column="esname" type="string" title="" as="esname" />
        <column table="a" column="ealtername" type="string" title="" as="ealtername" />
        <column table="a" column="ekod_separator" type="number" as="ekod_separator" />
        <column table="a" column="ekod_ecls" type="number" as="ekod_ecls" />
        <column table="a" column="deleted" type="number" title="" as="deleted" />
        <column table="a" column="kod_v" type="number" as="kod_v" />
        <column table="a" column="coment" type="string" title="" as="coment" />
        <call function="rowid" as="hv_eobject_x_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_eobject_x" as="a" />
        <query name="hv_eosrc_x" as="eobj_src_id_x" join="left outer" dname="hv_eobject_x">
          <call function="=">
            <column table="a" column="parent_id" />
            <column table="eobj_src_id_x" column="eobj_id" />
          </call>
        </query>
        <query name="kr_org_group" as="bal_id" join="left outer" dname="hv_eobject_x">
          <call function="=">
            <column table="bal_id" column="kod_org" />
            <column table="a" column="bal_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_eosrc_x" class="1" timestamp="26.09.2017 10:38:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_eosrc_x.xml" haskeys="1">
      <select>
        <column table="a" column="eobj_id" type="number" title="" comment="код. энергообъект (pk)" key="1" column-mandatory="1" as="eobj_id" />
        <column table="a" column="bal_id" type="number" title="" comment="код. балансовая принадлежность (собственник)" column-mandatory="1" as="bal_id" reference="kr_org_group" refcol="kod_org" />
        <column table="a" column="expl_id" type="number" title="" comment="код. эксплуатационная ответсвенность" column-mandatory="1" as="expl_id" />
        <column table="a" column="kindname" type="string" title="" comment="вид энергообъекта (пс, рп, ...)" data-size="20" column-mandatory="1" as="kindname" />
        <column table="a" column="dnum" type="string" title="" comment="дисп. № энергообъекта" data-size="100" column-mandatory="1" as="dnum" />
        <column table="a" column="sname" type="string" title="" comment="оперативное наименование энергообъекта" data-size="100" column-mandatory="1" as="sname" />
        <column table="a" column="fname" type="string" title="" comment="полное наименование энергообъекта" data-size="100" column-mandatory="1" as="fname" />
        <column table="a" column="fname2" type="string" title="" comment="вид энергообъекта + номер" data-size="121" as="fname2" />
        <column table="a" column="addr_id" type="number" title="" comment="код. элемент адреса" column-mandatory="1" as="addr_id" />
        <column table="a" column="addrkind" type="string" title="" comment="код. тип элемент адреса" data-size="1" column-mandatory="1" as="addrkind" />
        <column table="a" column="kod_srckind" type="number" comment="код. вид энергообъекта" column-mandatory="1" as="kod_srckind" reference="hk_srckind" refcol="kod_srckind" />
        <column table="a" column="parent_id" type="number" title="" comment="не используется" as="parent_id" />
        <column table="a" column="baltername" type="string" title="" comment="балансовая принадлежность. наименование юр.лица. полный вариант с номером юрлица (асусэ)" data-size="250" as="baltername" />
        <column table="a" column="ealtername" type="string" title="" comment="эксплуатационная ответсвенность. наименование юр.лица (филиала сетей). полный вариант с номером юрлица, подразделения сетей (асусэ)" data-size="250" as="ealtername" />
        <column table="a" column="bkod_separator" type="number" comment="код. классификатор &quot;организация/подразделение&quot; (балансовая принадлежность)" column-mandatory="1" as="bkod_separator" />
        <column table="a" column="bname" type="string" title="" comment="балансовая принадлежность. наименование юр.лица." data-size="200" as="bname" />
        <column table="a" column="bsname" type="string" title="" comment="балансовая принадлежность. краткое наименование юр.лица." data-size="20" column-mandatory="1" as="bsname" />
        <column table="a" column="bkod_ecls" type="number" comment="код. классификатор &quot;отношение к энергосистеме&quot;. (балансовая принадлежность)" column-mandatory="1" as="bkod_ecls" />
        <column table="a" column="ekod_separator" type="number" comment="код. классификатор &quot;организация/подразделение&quot;. (эксплуатационная ответсвенность)" column-mandatory="1" as="ekod_separator" />
        <column table="a" column="ename" type="string" title="" comment="эксплуатационная ответсвенность. наименование юр.лица (филиал сетей)." data-size="200" as="ename" />
        <column table="a" column="esname" type="string" title="" comment="эксплуатационная ответсвенность. краткое наименование юр.лица (филиал сетей)." data-size="20" column-mandatory="1" as="esname" />
        <column table="a" column="ekod_ecls" type="number" comment="код. классификатор &quot;отношение к энергосистеме&quot;. (эксплуатационная ответсвенность)" column-mandatory="1" as="ekod_ecls" />
        <column table="a" column="schema_invalid" type="number" title="" comment="признак &quot;в схеме энергообъекта есть ошибки&quot;" column-mandatory="1" as="schema_invalid" />
        <column table="a" column="deleted" type="number" title="" comment="энергообъект &quot;удален&quot; (в архиве)" column-mandatory="1" as="deleted" />
        <column table="a" column="is_uc" type="number" title="" comment="строящийся - да\нет (1\0)" column-mandatory="1" as="is_uc" />
        <column table="a" column="kod_v" type="number" comment="код напряжения высокой стороны энергообъект" as="kod_v" />
        <column table="a" column="nv" type="number" title="" comment="напряжение энергообъекта (кв). определяется, как максимальное напряжение старших ру" as="nv" />
        <column table="a" column="kod_v_low" type="number" comment="код напряжения низкой стороны энергообъект" as="kod_v_low" />
        <column table="a" column="nv_low" type="number" title="" comment="напряжение низкой стороны энергообъекта (кв). имеет смысл для тп, рп .. получено как минимально значение напряжения оборудования энергообъекта." as="nv_low" />
        <column table="a" column="is_closed" type="number" title="" comment="признак &quot;энергообъект закрыт&quot; (да\ нет)" column-mandatory="1" as="is_closed" />
        <column table="a" column="kod_srcnode" type="number" comment="код узла сети" column-mandatory="1" as="kod_srcnode" />
        <column table="a" column="coment" type="string" title="" comment="комментарий" data-size="500" as="coment" />
        <column table="a" column="adr" type="string" title="" data-size="4000" comment="Адрес энергообъекта" as="adr" />
        <column table="a" column="latitude" type="number" title="" comment="Коорд: широта (градусы)" as="latitude" />
        <column table="a" column="longitude" type="number" title="" comment="Коорд: долгота (градусы)" as="longitude" />
        <column table="a" column="tech_location_code" type="string" data-size="130" title="" comment="Код технического места оборудования в SAP (или ее аналога)" as="tech_location_code" />
        <column table="a" column="yearofplugin" type="number" title="" comment="Год ввода в эксплуатацию" as="yearofplugin" />
        <column table="a" column="yearofpluginafterreconstr" type="number" title="" comment="Год ввода в эксплуатацию после реконструкции" as="yearofpluginafterreconstr" />
        <column table="a" column="kod_currentstate" type="number" comment="Код индекса загрузки энергообъекта" as="kod_currentstate" />
        <column table="a" column="kod_planstate" type="number" comment="Код индекса планов энергообъекта" as="kod_planstate" />
        <column table="a" column="kodp_customerservicecenter" type="number" title="" comment="Код центра обслуживания клиентов, к которому отнесен энергообъект" as="kodp_customerservicecenter" />
        <column table="a" column="powercenterid" type="string" data-size="36" title="" as="powercenterid" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_eosrc_x" as="a" />
        <query name="hk_srckind" join="left outer" as="kod_src_kind" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hv_eosrc_x" title="Вид энергообъекта">
          <call function="=">
            <column table="a" column="kod_srckind" />
            <column table="kod_src_kind" column="kod_srckind" />
          </call>
        </query>
        <query name="kr_org_group" join="left outer" as="b" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="hv_eosrc_x">
          <call function="=">
            <column table="a" column="bal_id" />
            <column table="b" column="kod_org" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_exist_or_not" class="1" timestamp="11.10.2017 12:37:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_exist_or_not.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" title="" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_exist_or_not" as="a" />
      </from>
    </query>
    <query name="hv_in_askue" class="1" title="Включение в состав АИИС КУЭ" timestamp="30.03.2017 13:10:24" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_in_askue.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Включение в состав АИИС КУЭ" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_in_askue" as="a" title="Включение в состав АИИС КУЭ" />
      </from>
    </query>
    <query name="hv_mkd_address" class="1" timestamp="26.07.2017 11:58:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_mkd_address.xml" haskeys="1">
      <select>
        <column table="a" column="kodd" type="number" title="" comment="код дома" dimension="kodd" key="1" as="kodd" />
        <column table="a" column="kf_adress_o" type="string" title="" comment="строковое представление адреса" as="kf_adress_o" />
        <column table="a" column="kod_f23" type="number" comment="код типа объекта на адресе" as="kod_f23" />
        <column table="a" column="f23name" type="string" title="" comment="тип объекта на адресе (класификатор ф23)" as="f23name" />
        <column table="a" column="src_id" type="number" title="" comment="id центра питания" as="src_id" />
        <column table="a" column="srcname" type="string" title="" comment="№ центра питания (цп) дома" as="srcname" />
        <column table="a" column="eo_id" type="number" title="" comment="id источника питания" as="eo_id" />
        <column table="a" column="eoname" type="string" title="" comment="№ источника питания (ип) дома " as="eoname" />
        <column table="a" column="eobname" type="string" title="" comment="балансовая принадлежность ип дома" as="eobname" />
        <column table="a" column="eoename" type="string" title="" comment="эксплуатуционная принадлежность ип дома" as="eoename" />
        <column table="a" column="nv" type="number" title="" comment="класс напряжения ип дома" as="nv" />
        <column table="a" column="nom_pu" type="string" title="" comment="№ счетчика" as="nom_pu" />
        <column table="a" column="gremp_id" type="number" title="" comment="код ответсвенного специалиста  (группы)" as="gremp_id" />
        <column table="a" column="gremp" type="string" title="" comment="фио ответсвенного специалиста  (наименоване группы отв. специалистов)" as="gremp" />
        <column table="a" column="haslink" type="number" title="" comment="объект связан с ту управляющей компании (1 \ 0)" as="haslink" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_mkd_address" as="a" />
        <query name="k_house" as="kodd" join="left outer" dname="hv_mkd_address">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_mkd_adr" class="1" timestamp="15.02.2018 14:42:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_mkd_adr.xml" haskeys="1">
      <select>
        <column table="a" column="dep" type="number" title="" comment="код отделения" as="dep" key="1" fixed="1" />
        <column table="a" column="kodd" type="number" title="" comment="код дом" as="kodd" key="0" />
        <column table="a" column="kod_s" type="number" comment="код улицы" as="kod_s" key="0" />
        <column table="a" column="kod_m" type="number" comment="код населенного пункта" as="kod_m" key="0" />
        <column table="a" column="kod_chet" type="number" comment="Код четности № дома 1- нечетная; 2 - четная" as="kod_chet" key="0" />
        <column table="a" column="ind" type="string" title="" comment="почтовый индекс" as="ind" key="0" />
        <column table="a" column="adr" type="string" title="" comment="адрес" as="adr" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта схемы МКД" as="kod_obj" key="0" />
        <column table="a" column="kod_point" type="number" comment="код ТУ схемы МКД" as="kod_point" key="0" />
        <column table="a" column="kod_pointmain" type="number" comment="код корневой ТУ схемы МКД" as="kod_pointmain" key="0" />
        <column table="a" column="sx_mkd" type="number" title="" comment="наличие схемы МКД: 1 - есть, 0 - нет" as="sx_mkd" key="0" />
        <column table="a" column="kod_point_pu" type="number" comment="код ПУ" as="kod_point_pu" key="0" />
        <column table="a" column="nom_pu" type="string" title="" comment="№ ПУ" as="nom_pu" key="0" />
        <column table="b" column="kod_f23" type="number" comment="код Ф23" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0" />
        <column table="b" column="name" type="string" title="" comment="наименование Ф23" as="f23name" key="0" />
        <column table="a" column="src_id" type="number" title="" comment="код центра питания" as="src_id" key="0" />
        <column table="a" column="srcname" type="string" title="" comment="наименование центра питания" as="srcname" key="0" />
        <column table="a" column="eo_id" type="number" title="" comment="код источника питания" as="eo_id" key="0" />
        <column table="a" column="eoname" type="string" title="" comment="наименование источника питания" as="eoname" key="0" />
        <column table="a" column="id_spec_kodd" type="number" title="" comment="код отв. специалиста за дом" as="id_spec_kodd" key="0" />
        <column table="a" column="name_spec_kodd" type="string" title="" comment="ФИО отв. специалиста за дом" as="name_spec_kodd" key="0" />
        <column table="a" column="id_spec_kod_s" type="number" comment="код отв. специалиста за улицу" as="id_spec_kod_s" key="0" />
        <column table="a" column="name_spec_kod_s" type="string" comment="ФИО отв. специалиста за улицу" as="name_spec_kod_s" key="0" />
        <column table="a" column="id_spec_kod_m" type="number" comment="код отв. специалиста за нас. пункт" as="id_spec_kod_m" key="0" />
        <column table="a" column="name_spec_kod_m" type="string" comment="ФИО отв. специалиста за нас. пункт" as="name_spec_kod_m" key="0" />
        <column table="a" column="pr_rasch" type="number" title="" comment="признак расчета ОДН в периоде tg_vdr_rasch.mkd_ym" as="pr_rasch" key="0" />
        <column table="a" column="haslink" type="number" title="" comment="Объект связан с ТУ Управляющей компании (1 \ 0" as="haslink" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_mkd_adr" as="a" />
        <query join="left outer" name="hs_23" as="b" dname="hv_mkd_adr" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23" />
            <column table="b" column="kod_f23" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_nugruzpotreb2" class="1" timestamp="12.10.2017 15:44:58" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_nugruzpotreb2.xml" haskeys="1">
      <select>
        <column table="a" column="kodnagruzpotreb" type="number" title="" comment="Код элемента нагрущки" as="kodnagruzpotreb" key="1" fixed="1" />
        <column table="a" column="kod_v" type="number" comment="Код напряжения элемента нагрузки (обычно совпадает с напряжением на границе)" as="kod_v" key="0" />
        <column table="a" column="kod_obj" type="number" comment="Код объекта (адреса)" as="kod_obj" key="0" />
        <column table="a" column="d_create" type="date" title="" comment="Дата начала действия нагрузки" as="d_create" key="0" />
        <column table="a" column="d_finish" type="date" title="" comment="Дата окончания действия нагрузки" as="d_finish" key="0" />
        <column table="a" column="kod_vidnagr" type="number" comment="Код вида нагрузки" as="kod_vidnagr" key="0" />
        <column table="a" column="eobj_id" type="number" title="" comment="Код оборудования с которым ассоциирована нагрузка. Для трансформаторв - это сам тарнсформатор, для других элементов - элемент присоединение" as="eobj_id" key="0" />
        <column table="a" column="pr_reserve" type="number" title="" comment="Признак Резерв - Да\ Нет (1 \ 0)" as="pr_reserve" key="0" />
        <column table="a" column="k_nad" type="number" title="" comment="Категория надежности электроустановок (1,2,3,null)" as="k_nad" key="0" />
        <column table="a" column="eofdr_id" type="number" title="" comment="Код фидера, к которому подключен элемент нагрузки" as="eofdr_id" reference="hr_eobject" refcol="eobj_id" key="0" />
        <column table="a" column="power" type="number" title="" comment="Мощность нагрузки, кВА" as="power" key="0" />
        <column table="a" column="eotrans_id" type="number" title="" comment="Код трансформатора, если нагрузка трансформатор. Иначе пусто" as="eotrans_id" key="0" />
        <column table="eobj_id" column="name" type="string" title="Линия" comment="Код трансформатора, если нагрузка трансформатор. Иначе пусто" as="line" key="0" />
        <call function="||" as="tp" title="ТП" type="string" key="0">
          <column table="kod_srckind" column="sname" />
          <const>'-'</const>
          <column table="kod_eosrc" column="dnum" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_nugruzpotreb2" as="a" />
        <query name="hr_eobject" as="eobj_id" join="left outer" dname="kr_dogovor_gruz">
          <call function="=">
            <column table="a" column="eofdr_id" />
            <column table="eobj_id" column="eobj_id" />
          </call>
        </query>
        <query name="hr_eosrc" as="kod_eosrc" join="left outer" dname="kr_dogovor_gruz">
          <call function="=">
            <column table="eobj_id" column="parent_id" />
            <column table="kod_eosrc" column="eobj_id" />
          </call>
        </query>
        <query name="hk_srckind" as="kod_srckind" join="left outer" dname="kr_dogovor_gruz" title="Вид энергообъекта">
          <call function="=">
            <column table="kod_eosrc" column="kod_srckind" />
            <column table="kod_srckind" column="kod_srckind" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_org" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" comment="идентификатор строки" as="kodp" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="sname" type="string" comment="наимен." as="sname" />
        <column table="a" column="kod_parent" type="number" comment="идентификатор старшей организации" as="kod_parent" />
        <column table="a" column="kod_separator" type="number" comment="код сеператора" as="kod_separator" />
        <column table="a" column="kod_ecls" type="number" comment="код классификатора" as="kod_ecls" />
        <column table="a" column="altername" type="string" comment="альтерантивное наименование организации \ подразделения" as="altername" />
        <column table="a" column="tep_el" type="number" comment="код тепло \ электричество" as="tep_el" />
        <column table="a" column="inn" type="string" comment="ИНН" as="inn" />
        <column table="a" column="addr_ur" type="string" comment="юридический адрес (адрес регистрации)" as="addr_ur" />
        <column table="a" column="kpp" type="string" comment="КПП" as="kpp" />
        <column table="a" column="pr_active" type="number" as="pr_active" />
        <column table="a" column="priz_activ" type="number" as="priz_activ" />
        <call function="rowid" as="hv_org_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_org" as="a" />
      </from>
    </query>
    <query name="hv_org_group_elmarket" class="1" timestamp="12.04.2017 16:31:03" title="Балансовая принадлежность энергооборудования" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_group_elmarket.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="код" key="1" as="kod" />
        <column table="a" column="name" type="string" title="Наименование балансовой принадлежности" comment="наименование" as="name" />
        <column table="a" column="kod_parent" type="number" comment="код старшего" as="kod_parent" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_org_group_elmarket" as="a" title="Балансовая принадлежность энергооборудования" />
      </from>
    </query>
    <query name="hv_org_pes" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_pes.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" comment="идентификатор строки" as="kodp"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наимен." as="name"></column>
        <column table="a" column="sname" type="string" title="" comment="код организации \ подразделения" as="sname"></column>
        <column table="a" column="kod_parent" type="number" comment="идентификтор старшей организации" as="kod_parent"></column>
        <column table="a" column="kod_separator" type="number" comment="код сепаратора" as="kod_separator"></column>
        <column table="a" column="altername" type="string" title="" comment="альтернативное наименование" as="altername"></column>
        <column table="a" column="kod_ecls" type="number" comment="код классификатора" as="kod_ecls"></column>
        <column table="a" column="inn" type="string" title="" comment="инн" as="inn"></column>
        <column table="a" column="addr_ur" type="string" title="" comment="юридический адрес (адрес регистрации)" as="addr_ur"></column>
        <call function="rowid" as="hv_org_pes_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_org_pes" as="a"></table>
      </from>
    </query>
    <query name="hv_org_res" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_res.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name"></column>
        <column table="a" column="sname" type="string" title="" as="sname"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent"></column>
        <column table="a" column="kod_separator" type="number" as="kod_separator"></column>
        <column table="a" column="kod_ecls" type="number" as="kod_ecls"></column>
        <column table="a" column="altername" type="string" title="" as="altername"></column>
        <call function="rowid" as="hv_org_res_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_org_res" as="a"></table>
      </from>
    </query>
    <query name="hv_org_sech" class="1" timestamp="30.03.2021 02:55:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_sech.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="240" title="Наименование" as="name" key="0" />
        <column table="a" column="sname" type="string" data-size="250" title="Краткое наименование" as="sname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_org_sech" as="a" />
      </from>
    </query>
    <query name="hv_org_seti" class="1" timestamp="03.05.2017 16:30:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_seti.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" key="1" as="kodp" />
        <column table="a" column="sname" type="string" title="" as="sname" />
        <column table="a" column="name" type="string" title="Полное наименование" as="name" />
        <column table="a" column="kod_seti" type="number" key="1" as="kod_seti" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" />
        <column table="a" column="ispes" type="number" title="" as="ispes" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_org_seti" as="a" />
      </from>
    </query>
    <query name="hv_org_sta_search" class="1" title="Список подразделений СК Казань для метрологии" timestamp="09.10.2017 00:35:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_org_sta_search.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="fname" type="string" title="Наименование" halign="left" as="fname" key="0" />
        <column table="a" column="name" type="string" title="Краткое наименование" halign="left" as="name" key="0" />
        <column table="a" column="kod_parent" type="number" title="Родительское подразделение" as="kod_parent" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_org_sta_search" as="a" title="Список подразделений СК Казань для метрологии" />
      </from>
    </query>
    <query name="hv_point_dover" class="1" timestamp="30.11.2017 09:28:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_point_dover.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" as="kod_point" key="1" fixed="1" />
        <column table="a" column="dover" type="string" title="" as="dover" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_point_dover" as="a" />
      </from>
    </query>
    <query name="hv_point_har_last" class="1" timestamp="27.10.2017 15:02:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_point_har_last.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" key="1" as="kod_point" />
        <column table="a" column="har" type="number" title="" as="har" reference="hr_point_har" refcol="kod_point_har" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_point_har_last" as="a" />
        <query name="hr_point_har" as="kod_har" join="left outer" dname="hv_point_har_last" title="Характеристика ТУ">
          <call function="=">
            <column table="a" column="har" />
            <column table="kod_har" column="kod_point_har" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_point_plombs" class="1" timestamp="30.10.2017 12:22:30" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_point_plombs.xml" haskeys="1">
      <select>
        <call function="||-" as="id" key="1">
          <column table="a" column="kod_point_pl" />
          <column table="a" column="kod_point_pu" />
        </call>
        <column table="a" column="kod_point_pl" type="number" as="kod_point_pl" />
        <column table="a" column="kod_point_pu" type="number" as="kod_point_pu" reference="hr_point_pu" refcol="kod_point_pu" />
        <column table="a" column="kod_point_tr" type="number" as="kod_point_tr" />
        <column table="a" column="plomba" type="string" title="" agg="list" as="plomba" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" />
        <column table="a" column="kod_vidpl" type="number" as="kod_vidpl" />
        <column table="a" column="kod_mesto_ust_pl" type="number" as="kod_mesto_ust_pl" />
        <column table="a" column="kod_sotr" type="number" as="kod_sotr" reference="hs_sotr_pu" refcol="kod_sotr" />
        <column table="a" column="notes" type="string" title="" as="notes" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_point_plombs" as="a">
          <link name="kod_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_pu" table="hr_point_pu" child="hv_point_plombs" field="kod_pu" parent="hr_point_pu" back="hv_point_plombs">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="hs_sotr_pu" as="kod_sotr" join="left outer" dname="hv_point_plombs">
          <call function="=">
            <column table="a" column="kod_sotr" />
            <column table="kod_sotr" column="kod_sotr" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="hv_point_plombs">
          <call function="=">
            <column table="kod_sotr" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="hr_point_pu" as="kod_pu" join="left outer" dname="hv_point_plombs">
          <call function="=">
            <column table="a" column="kod_point_pu" />
            <column table="kod_pu" column="kod_point_pu" />
          </call>
        </query>
      </from>
    </query>
    <query name="hv_point_prov" class="1" timestamp="29.10.2017 20:37:12" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_point_prov.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point" type="number" key="1" as="kod_point" />
        <column table="a" column="last_prov" type="date" title="" as="last_prov" />
        <column table="a" column="next_prov" type="date" title="" as="next_prov" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_point_prov" as="a" />
      </from>
    </query>
    <query name="hv_poisk_pu_u" class="1" timestamp="07.04.2017 21:55:54" title="Список ПУ ком. учёта для поиска" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_poisk_pu_u.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pu_u" type="number" as="kod_pu_u" />
        <column table="a" column="kod_point_pu" type="number" key="1" as="kod_point_pu" />
        <column table="a" column="kod_point" type="number" as="kod_point" />
        <column table="a" column="kod_vid_tu" type="number" as="kod_vid_tu" />
        <column table="a" column="name_vid_tu" type="string" title="Вид учёта" key="1" as="name_vid_tu" />
        <column table="a" column="kod_numobj" type="number" key="1" as="kod_numobj" />
        <column table="a" column="vid_mi" type="number" title="" as="vid_mi" />
        <column table="a" column="name_mi" type="string" title="Вид СИ" as="name_mi" />
        <column table="a" column="nom_pu" type="string" title="Заводской номер" as="nom_pu" />
        <column table="a" column="god_vip" type="number" title="Год выпуска" as="god_vip" />
        <column table="a" column="date_of_last_c" type="date" title="Дата последней поверки" as="date_of_last_c" />
        <column table="a" column="mpi_year" type="number" title="МПИ" as="mpi_year" />
        <column table="a" column="date_of_next_c" type="date" title="Дата очередной поверки" as="date_of_next_c" />
        <column table="a" column="kod_bal" type="number" as="kod_bal" />
        <column table="a" column="name_bal" type="string" title="Бал. принадлеж." as="name_bal" />
        <column table="a" column="kod_namekpu" type="number" as="kod_namekpu" />
        <column table="a" column="name_type" type="string" title="Наименование типа" as="name_type" />
        <column table="a" column="kod_pktippu" type="number" as="kod_pktippu" />
        <column table="a" column="name_pk" type="string" title="Наименование модификации" as="name_pk" />
        <column table="a" column="class_t" type="string" title="Класс точности" as="class_t" />
        <column table="a" column="nominal" type="string" title="Номиналы" as="nominal" />
        <column table="a" column="dep" type="number" title="" as="dep" />
        <column table="a" column="name_dep" type="string" title="Подразделение" as="name_dep" />
        <column table="a" column="instalation_location" type="string" title="Место установки" as="instalation_location" />
        <column table="a" column="eobj_name" type="string" title="Оборудование" as="eobj_name" />
        <column table="a" column="eobj_id" type="number" title="" key="1" as="eobj_id" />
        <column table="a" column="askue_yes" type="number" title="Включен в АИИС КУЭ" as="askue_yes" />
        <column table="a" column="kod_bal_eo" type="number" as="kod_bal_eo" />
        <column table="a" column="name_bal_eo" type="string" title="Наименование бал. орг." as="name_bal_eo" />
        <column table="a" column="kod_vid_eo" type="number" as="kod_vid_eo" />
        <column table="a" column="name_vid_eo" type="string" title="Вид энергообъекта" as="name_vid_eo" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="abbr_voltage" type="string" title="Уровень напряжения" as="abbr_voltage" />
        <column table="a" column="kod_v" type="number" as="kod_v" />
        <column table="a" column="sv" type="string" title="Фактическое напряжения" as="sv" />
        <column table="a" column="eobj_id_eo" type="number" title="Код энергообъекта" as="eobj_id_eo" />
        <column table="a" column="bal_id_eo" type="number" title="Код бал. орг" as="bal_id_eo" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_poisk_pu_u" as="a" title="Список ПУ ком. учёта для поиска" />
      </from>
    </query>
    <query name="hv_search_mi" class="1" timestamp="09.04.2017 01:22:04" title="Общий список СИ для поиска" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_search_mi.xml" haskeys="1">
      <select>
        <column table="a" column="kod_uniq" type="number" key="1" as="kod_uniq" />
        <column table="a" column="kod_in_point" type="number" key="1" as="kod_in_point" />
        <column table="a" column="kod_point" type="number" as="kod_point" />
        <column table="a" column="kod_vid_tu" type="number" key="1" as="kod_vid_tu" />
        <column table="a" column="name_vid_tu" type="string" title="Вид учёта" as="name_vid_tu" />
        <column table="a" column="kod_numobj" type="number" key="1" as="kod_numobj" />
        <column table="a" column="vid_mi" type="number" title="" key="1" as="vid_mi" />
        <column table="a" column="name_mi" type="string" title="Вид СИ" as="name_mi" />
        <column table="a" column="zav_nom" type="string" title="Заводской номер" as="zav_nom" />
        <column table="a" column="god_vip" type="number" title="Год выпуска" as="god_vip" />
        <column table="a" column="date_of_last_c" type="date" title="Дата последней поверки" as="date_of_last_c" />
        <column table="a" column="mpi_year" type="number" title="МПИ" as="mpi_year" />
        <column table="a" column="date_of_next_c" type="date" title="Дата очередной поверки" as="date_of_next_c" />
        <column table="a" column="kod_bal" type="number" as="kod_bal" />
        <column table="a" column="name_bal" type="string" title="Бал. принадлеж." as="name_bal" />
        <column table="a" column="kod_namekpu" type="number" as="kod_namekpu" />
        <column table="a" column="name_type" type="string" title="Наименование типа" as="name_type" />
        <column table="a" column="kod_pktippu" type="number" as="kod_pktippu" />
        <column table="a" column="name_pk" type="string" title="Наименование модификации" as="name_pk" />
        <column table="a" column="class_t" type="string" title="Класс точности" as="class_t" />
        <column table="a" column="nominal" type="string" title="Номиналы" as="nominal" />
        <column table="a" column="dep" type="number" title="" as="dep" />
        <column table="a" column="name_dep" type="string" title="Подразделение" as="name_dep" />
        <column table="a" column="instalation_location" type="string" title="Место установки" as="instalation_location" />
        <column table="a" column="eobj_name" type="string" title="Оборудование" as="eobj_name" />
        <column table="a" column="eobj_id" type="number" title="" key="1" as="eobj_id" />
        <column table="a" column="eobj_id_eo" type="number" title="" as="eobj_id_eo" />
        <column table="a" column="bal_id_eo" type="number" title="" as="bal_id_eo" />
        <column table="a" column="askue_yes" type="number" title="Включен в АИИС КУЭ" as="askue_yes" />
        <column table="a" column="kod_bal_eo" type="number" as="kod_bal_eo" />
        <column table="a" column="name_bal_eo" type="string" title="Наименование бал. орг." as="name_bal_eo" />
        <column table="a" column="kod_vid_eo" type="number" as="kod_vid_eo" />
        <column table="a" column="name_vid_eo" type="string" title="Вид энергообъекта" as="name_vid_eo" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="abbr_voltage" type="string" title="Уровень напряжения" as="abbr_voltage" />
        <column table="a" column="kod_v" type="number" as="kod_v" />
        <column table="a" column="sv" type="string" title="Фактическое напряжения" as="sv" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_search_mi" as="a" title="Общий список СИ для поиска" />
      </from>
    </query>
    <query name="hv_search_mi_2" class="1" timestamp="30.05.2017 21:48:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_search_mi_2.xml" haskeys="1">
      <select>
        <call function="||" as="ID" key="1">
          <column table="a" column="KOD_UNIQ" type="number" key="1" />
          <const>'-'</const>
          <column table="a" column="KOD_VID_TU" type="number" key="1" />
          <const>'-'</const>
          <column table="a" column="KOD_NUMOBJ" type="number" key="1" />
          <const>'-'</const>
          <column table="a" type="number" title="" key="1" column="VID_MI" />
          <const>'-'</const>
          <column table="a" column="EOBJ_ID" type="number" title="" key="1" />
          <const>'-'</const>
          <column table="a" column="KOD_NET" type="number" title="" key="1" />
          <const>'-'</const>
          <column table="a" column="KOD_IN_POINT" type="number" title="" key="1" />
        </call>
        <column table="a" column="KOD_UNIQ" type="number" as="KOD_UNIQ" />
        <column table="a" column="KOD_IN_POINT" type="number" as="KOD_IN_POINT" />
        <column table="a" column="KOD_POINT" type="number" as="KOD_POINT" />
        <column table="a" column="KOD_VID_TU" type="number" as="KOD_VID_TU" />
        <column table="a" column="NAME_VID_TU" type="string" title="" as="NAME_VID_TU" />
        <column table="a" column="KOD_NUMOBJ" type="number" as="KOD_NUMOBJ" />
        <column table="a" column="NUM_POINT" type="number" as="NUM_POINT" />
        <column table="a" column="NUM_OBJ" type="number" as="NUM_OBJ" />
        <column table="a" column="NDOG" type="string" as="NDOG" />
        <column table="a" column="ADR_OBJ" type="string" as="ADR_OBJ" />
        <column table="a" type="number" title="" column="VID_MI" as="VID_MI" />
        <column table="a" column="NAME_MI" type="string" title="" as="NAME_MI" />
        <column table="a" column="ZAV_NOM" type="string" title="" as="ZAV_NOM" />
        <column table="a" column="GOD_VIP" type="number" title="" as="GOD_VIP" />
        <column table="a" column="DATE_OF_LAST_C" type="date" title="" as="DATE_OF_LAST_C" />
        <column table="a" type="number" title="" column="MPI_YEAR" as="MPI_YEAR" />
        <column table="a" type="date" title="" column="DATE_OF_NEXT_C" as="DATE_OF_NEXT_C" />
        <column table="a" column="KOD_BAL" type="number" as="KOD_BAL" />
        <column table="a" column="NAME_BAL" type="string" title="" as="NAME_BAL" />
        <column table="a" column="KOD_NAMEKPU" type="number" as="KOD_NAMEKPU" />
        <column table="a" column="NAME_TYPE" type="string" title="" as="NAME_TYPE" />
        <column table="a" column="KOD_PKTIPPU" type="number" as="KOD_PKTIPPU" />
        <column table="a" column="NAME_PK" type="string" title="" as="NAME_PK" />
        <column table="a" column="TYPE_SK" type="number" as="TYPE_SK" />
        <column table="a" column="CLASS_T" type="string" title="" as="CLASS_T" />
        <column table="a" column="NOMINAL" type="string" title="" as="NOMINAL" />
        <column table="a" type="number" title="" column="DEP" as="DEP" />
        <column table="a" type="string" title="" column="NAME_DEP" as="NAME_DEP" />
        <column table="a" column="EOBJ_ID" type="number" title="" as="EOBJ_ID" />
        <column table="a" type="number" title="" column="ECON_VOLTAGE" as="ECON_VOLTAGE" />
        <column table="a" type="string" title="" column="ECON_VOLTAGE_ABBR" as="ECON_VOLTAGE_ABBR" />
        <column table="a" column="ASKUE_YES" type="number" title="" as="ASKUE_YES" />
        <column table="a" column="EOBJ_NAME" type="string" title="" as="EOBJ_NAME" />
        <column table="a" column="SEOBJ_ID" type="number" title="" as="SEOBJ_ID" />
        <column table="a" column="SEOBJ_NAME" type="string" title="" as="SEOBJ_NAME" />
        <column table="a" column="SBAL_ID" type="number" title="" as="SBAL_ID" />
        <column table="a" column="SEXPL_ID" type="number" title="" as="SEXPL_ID" />
        <column table="a" column="BALTERNAME" type="string" title="" as="BALTERNAME" />
        <column table="a" column="EALTERNAME" type="string" title="" as="EALTERNAME" />
        <column table="a" column="KINDNAME" type="string" title="" as="KINDNAME" />
        <column table="a" column="KOD_SRCKIND" type="number" as="KOD_SRCKIND" />
        <column table="a" column="FIZ_VOLTAGE" type="number" title="" as="FIZ_VOLTAGE" />
        <column table="a" column="FIZ_VOLTAGE_ABBR" type="string" title="" as="FIZ_VOLTAGE_ABBR" />
        <column table="a" column="KLASS_BAL_EO" type="number" title="" as="KLASS_BAL_EO" />
        <column table="a" column="NAME_KLASS_BAL_EO" type="string" title="" as="NAME_KLASS_BAL_EO" />
        <column table="a" column="KOD_NET" type="number" as="KOD_NET" />
        <column table="a" column="NAME_NET" type="string" title="" as="NAME_NET" />
        <column table="a" column="kod_uniq" type="number" as="kod_uniq" />
        <column table="a" column="kod_in_point" type="number" as="kod_in_point" />
        <column table="a" column="kod_point" type="number" as="kod_point" />
        <column table="a" column="kod_vid_tu" type="number" as="kod_vid_tu" />
        <column table="a" column="name_vid_tu" type="string" title="" as="name_vid_tu" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" />
        <column table="a" column="vid_mi" type="number" title="" as="vid_mi" />
        <column table="a" column="name_mi" type="string" title="" as="name_mi" />
        <column table="a" column="zav_nom" type="string" title="" as="zav_nom" />
        <column table="a" column="god_vip" type="number" title="" as="god_vip" />
        <column table="a" column="date_of_last_c" type="date" title="" as="date_of_last_c" />
        <column table="a" column="mpi_year" type="number" title="" as="mpi_year" />
        <column table="a" column="date_of_next_c" type="date" title="" as="date_of_next_c" />
        <column table="a" column="kod_bal" type="number" as="kod_bal" />
        <column table="a" column="name_bal" type="string" title="" as="name_bal" />
        <column table="a" column="kod_namekpu" type="number" as="kod_namekpu" />
        <column table="a" column="name_type" type="string" title="" as="name_type" />
        <column table="a" column="kod_pktippu" type="number" as="kod_pktippu" />
        <column table="a" column="name_pk" type="string" title="" as="name_pk" />
        <column table="a" column="type_sk" type="number" title="" as="type_sk" />
        <column table="a" column="class_t" type="string" title="" as="class_t" />
        <column table="a" column="nominal" type="string" title="" as="nominal" />
        <column table="a" column="dep" type="number" title="" as="dep" />
        <column table="a" column="name_dep" type="string" title="" as="name_dep" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" />
        <column table="a" column="econ_voltage" type="number" title="" as="econ_voltage" />
        <column table="a" column="econ_voltage_abbr" type="string" title="" as="econ_voltage_abbr" />
        <column table="a" column="askue_yes" type="number" title="" as="askue_yes" />
        <column table="a" column="eobj_name" type="string" title="" as="eobj_name" />
        <column table="a" column="seobj_id" type="number" title="" as="seobj_id" />
        <column table="a" column="seobj_name" type="string" title="" as="seobj_name" />
        <column table="a" column="sbal_id" type="number" title="" as="sbal_id" />
        <column table="a" column="sexpl_id" type="number" title="" as="sexpl_id" />
        <column table="a" column="baltername" type="string" title="" as="baltername" />
        <column table="a" column="ealtername" type="string" title="" as="ealtername" />
        <column table="a" column="kindname" type="string" title="" as="kindname" />
        <column table="a" column="kod_srckind" type="number" as="kod_srckind" />
        <column table="a" column="fiz_voltage" type="number" title="" as="fiz_voltage" />
        <column table="a" column="fiz_voltage_abbr" type="string" title="" as="fiz_voltage_abbr" />
        <column table="a" column="klass_bal_eo" type="number" title="" as="klass_bal_eo" />
        <column table="a" column="name_klass_bal_eo" type="string" title="" as="name_klass_bal_eo" />
        <column table="a" column="kod_net" type="number" as="kod_net" />
        <column table="a" column="name_net" type="string" title="" as="name_net" />
        <call function="rowid" as="hv_search_mi_2_id" key="1" />
        <column table="a" column="num_point" type="number" title="" as="num_point" />
        <column table="a" column="num_obj" type="number" title="" as="num_obj" />
        <column table="a" column="ndog" type="string" title="" as="ndog" />
        <column table="a" column="adr_obj" type="string" title="" as="adr_obj" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_search_mi_2" as="a" />
      </from>
    </query>
    <query name="hv_search_nav_tree" class="1" timestamp="16.10.2017 23:55:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_search_nav_tree.xml" haskeys="1">
      <select>
        <call function="rownum" type="number" as="id_this" key="1" fixed="1" />
        <column table="a" column="kod_type" type="number" as="kod_type" key="0" />
        <column table="a" column="name_type" type="string" title="" as="name_type" key="0" />
        <column table="a" column="id" type="number" title="" as="id" key="0" />
        <column table="a" column="fullname" type="string" title="" as="fullname" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="parent_name" type="string" title="" as="parent_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_search_nav_tree" as="a" />
      </from>
    </query>
    <query name="hv_seti" class="1" timestamp="08.11.2017 23:13:56" order=" ispes, aname" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_seti.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" key="1" as="kod" />
        <column table="a" column="aname" type="string" title="Наименование" as="aname" />
        <column table="a" column="sname" type="string" title="Краткое наименование" halign="left" as="sname" />
        <column table="a" column="ispes" type="number" title="" as="ispes" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_seti" as="a" />
      </from>
      <order>
        <column column="ispes" />
        <column column="aname" />
      </order>
    </query>
    <query name="hv_typepu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_typepu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tippu" type="number" as="kod_tippu"></column>
        <column table="a" column="name_pk" type="string" title="" as="name_pk"></column>
        <column table="a" column="i" type="string" title="" as="i"></column>
        <column table="a" column="u" type="string" title="" as="u"></column>
        <column table="a" column="fullname" type="string" title="" as="fullname"></column>
        <column table="a" column="tcls" type="string" title="" as="tcls"></column>
        <column table="a" column="fazn" type="number" title="" as="fazn"></column>
        <column table="a" column="srok_sl" type="number" title="" as="srok_sl"></column>
        <column table="a" column="mpi" type="number" title="" as="mpi"></column>
        <column table="a" column="kod_ktippu" type="number" as="kod_ktippu"></column>
        <column table="a" column="pr_bt" type="number" title="" as="pr_bt"></column>
        <column table="a" column="a_pr" type="number" title="" comment="пр: прибор может измерять только прямое направление активной энергии" as="a_pr"></column>
        <column table="a" column="a_obr" type="number" title="" comment="пр: прибор может измерять оба направления активной энергии." as="a_obr"></column>
        <column table="a" column="p_pr" type="number" title="" comment="пр: прибор может измерять только прямое направление реактивной энергии" as="p_pr"></column>
        <column table="a" column="p_obr" type="number" title="" comment="пр: прибор может измерять оба направления реактивной энергии." as="p_obr"></column>
        <column table="a" column="ind_type" type="string" title="" as="ind_type"></column>
        <column table="a" column="zi" type="string" title="" as="zi"></column>
        <column table="a" column="gost" type="string" title="" as="gost"></column>
        <column table="a" column="kod_system" type="number" as="kod_system"></column>
        <column table="a" column="name_system" type="string" title="" as="name_system"></column>
        <column table="a" column="provodn" type="number" title="" as="provodn"></column>
        <call function="rowid" as="hv_typepu_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_typepu" as="a"></table>
      </from>
    </query>
    <query name="hv_type_mi" class="1" timestamp="10.04.2017 09:54:01" order="kod" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_type_mi.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Тип СИ" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_type_mi" as="a" />
      </from>
      <order>
        <column column="kod" />
      </order>
    </query>
    <query name="hv_type_of_accounting" class="1" title="Вид учёта" timestamp="30.03.2017 13:08:02" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\hv_type_of_accounting.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Вид учёта" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_type_of_accounting" as="a" title="Вид учёта" />
      </from>
    </query>
    <query name="is_spr_tip_obj" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\is_spr_tip_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="is_spr_tip_obj" as="a" />
      </from>
    </query>
    <query name="ka_operationdog" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ka_operationdog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_operationdog" type="number" column-mandatory="1" as="kod_operationdog" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_operation" type="number" as="kod_operation" reference="kk_operationdog" refcol="kod_operation" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="osnov" type="string" title="" as="osnov" key="0" />
        <column table="a" column="kod_active" type="number" as="kod_active" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" key="0" />
        <column table="a" column="podr" type="number" title="" as="podr" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="rassh1" type="string" title="" as="rassh1" key="0" />
        <column table="a" column="dat_dog" type="date" title="" as="dat_dog" key="0" />
        <column table="a" column="dat_srok" type="date" title="" as="dat_srok" key="0" />
        <column table="a" column="dat_fin" type="date" title="" as="dat_fin" key="0" />
        <column table="a" column="dat_prolong" type="date" title="" as="dat_prolong" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_parent_dog" type="number" as="kod_parent_dog" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kol_priem" type="number" title="" as="kol_priem" key="0" />
        <column table="a" column="kod_vdog" type="number" as="kod_vdog" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="код абонента к кот перешел договор" as="kodp_new" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" key="0" />
        <column table="a" column="dat_sign" type="date" title="" as="dat_sign" key="0" />
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="prn_elved" type="number" title="" as="prn_elved" key="0" />
        <column table="a" column="kod_state" type="number" as="kod_state" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" key="0" />
        <column table="a" column="lic_kazn" type="string" title="" as="lic_kazn" key="0" />
        <column table="a" column="pr_sh" type="number" title="" as="pr_sh" key="0" />
        <column table="a" column="kodp_plat" type="number" title="" as="kodp_plat" key="0" />
        <column table="a" column="dat_numdog" type="date" title="" as="dat_numdog" key="0" />
        <column table="a" column="kod_bez_prich" type="number" as="kod_bez_prich" key="0" />
        <column table="a" column="kod_spos_opl" type="number" as="kod_spos_opl" key="0" />
        <column table="a" column="kodp_uch" type="number" title="" as="kodp_uch" key="0" />
        <column table="a" column="pr_avans_umen" type="number" title="" comment="признак расчета уменьшения аванса, если пусто- используется значение по умолчанию." as="pr_avans_umen" key="0" />
        <column table="a" column="day_pokaz" type="number" title="" as="day_pokaz" key="0" />
        <column table="a" column="pr_sf_schet" type="number" title="" as="pr_sf_schet" key="0" />
        <column table="a" column="kodp_gruz" type="number" title="" comment="грузополучатель" as="kodp_gruz" key="0" />
        <column table="a" column="rast_dog" type="string" title="" as="rast_dog" key="0" />
        <column table="a" column="kod_dog_fin" type="number" comment="код бывшего финансового дог-ра" as="kod_dog_fin" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kodp_sbyt" type="number" title="" comment="сбытовые компании" as="kodp_sbyt" key="0" />
        <column table="a" column="kod_letter_mem" type="number" as="kod_letter_mem" key="0" />
        <column table="a" column="kod_zak_avans" type="number" comment="постановление по авансам" as="kod_zak_avans" key="0" />
        <column table="a" column="kod_way_delivery" type="number" comment="Cпособ доставки платежных документов абоненту" as="kod_way_delivery" key="0" />
        <column table="a" column="dat_postavka" type="date" title="" comment="Дата начала поставкии э/э" as="dat_postavka" key="0" />
        <column table="a" column="id_gk" type="string" title="" comment="Идентификатор государственного контракта" as="id_gk" key="0" />
        <column table="a" column="kod_d_p_dog" type="number" comment="Код адреса для переписки платежных документов" as="kod_d_p_dog" key="0" />
        <column table="a" column="kod_d_dog" type="number" comment="Код дома адреса физического" as="kod_d_dog" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ka_operationdog" as="a" />
        <query name="kr_dogovor" as="kod_dog_fin" join="left outer" dname="ka_operationdog" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_fin" />
            <column table="kod_dog_fin" column="kod_dog" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="ka_operationdog">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ka_operationdog" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kk_operationdog" as="kod_operation" join="left outer" dname="ka_operationdog">
          <call function="=">
            <column table="a" column="kod_operation" />
            <column table="kod_operation" column="kod_operation" />
          </call>
        </query>
      </from>
    </query>
    <query name="kk_active" class="1" timestamp="19.07.2018 13:48:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_active.xml" haskeys="1">
      <select>
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <call function="case" as="name" title="Статус" type="string" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>0</const>
            </call>
            <const>'Активный'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>1</const>
            </call>
            <const>'Неактивный'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>2</const>
            </call>
            <const>'Новый'</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_active" as="a" />
      </from>
    </query>
    <query name="kk_bal" class="1" timestamp="01.02.2019 03:14:55" title="Балансовая принадлежность" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_bal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bal" type="number" comment="код балансовой принадлежности" as="kod_bal" key="1" fixed="1" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0" />
        <column table="a" column="name" type="string" title="Балансовая принадлежность" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_bal" as="a" title="Балансовая принадлежность" />
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="kk_bal">
          <call function="=">
            <column table="a" column="kod_ecls" />
            <column table="kod_ecls" column="kod_ecls" />
          </call>
        </query>
      </from>
    </query>
    <query name="kk_cls" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_cls.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Тип энергосистемы" vid="1" as="name" key="0"></column>
        <column table="a" column="sname" type="string" title="" as="sname" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_cls" as="a"></table>
      </from>
    </query>
    <query name="kk_day_pokaz" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_day_pokaz.xml" haskeys="1">
      <select>
        <column table="a" column="day_pokaz" type="number" title="" as="day_pokaz" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_day_pokaz" as="a" />
      </from>
    </query>
    <query name="kk_dolzhfun" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_dolzhfun.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dolzhfun" type="number" as="kod_dolzhfun" key="1" fixed="1"></column>
        <column table="a" column="name_fun" type="string" title="" as="name_fun" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="kod_ecls" type="number" comment="если функция принадлежит всем категориям организаций то это поле null" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_dolzhfun" as="a"></table>
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="kk_dolzhfun">
          <call function="=">
            <column table="a" column="kod_ecls"></column>
            <column table="kod_ecls" column="kod_ecls"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kk_edo" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_edo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_edo" type="number" comment="код оператора электронного документооборота (оэдо)" as="kod_edo" key="1" fixed="1"></column>
        <column table="a" column="id_edo" type="string" title="" comment="идентификатор оэдо (присваивается фнс)" as="id_edo" key="0"></column>
        <column table="a" column="name_edo" type="string" title="" comment="наименование организации (оэдо)" as="name_edo" key="0"></column>
        <column table="a" column="inn_edo" type="string" title="" comment="инн организации (оэдо)" as="inn_edo" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_edo" as="a"></table>
      </from>
    </query>
    <query name="kk_interval" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_interval.xml" haskeys="1">
      <select>
        <column table="a" column="kodinterval" type="number" title="" comment="код периода" as="kodinterval" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Зона суток" comment="период (зима, лето, отопительный, расчетный, тарифная зона ...)" as="name" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="kodinterval_parent" type="number" title="" comment="код периода" as="kodinterval_parent" reference="kk_interval" refcol="kodinterval" key="0"></column>
        <column table="a" column="abbr" type="string" title="Зона суток" as="abbr" key="0"></column>
        <call function="case" as="zone" type="number" key="0">
          <call function="when">
            <!--ночь-->
            <call function="in">
              <column table="a" column="kodinterval"></column>
              <call function="array">
                <const>23</const>
                <const>-23</const>
                <const>-25</const>
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <!--пик-->
            <call function="in">
              <column table="a" column="kodinterval"></column>
              <call function="array">
                <const>21</const>
                <const>27</const>
                <const>211</const>
                <const>212</const>
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <!--день(полупик)-->
            <call function="in">
              <column table="a" column="kodinterval"></column>
              <call function="array">
                <const>-24</const>
                <const>22</const>
                <const>26</const>
                <const>28</const>
              </call>
            </call>
            <const>3</const>
          </call>
          <call function="else">
            <const>0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_interval" as="a"></table>
        <query name="kk_interval" as="kodinterval_parent" join="left outer" dname="kk_interval">
          <call function="=">
            <column table="a" column="kodinterval_parent"></column>
            <column table="kodinterval_parent" column="kodinterval"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kk_orgseparator" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_orgseparator.xml" haskeys="1">
      <select>
        <column table="a" column="kod_separator" type="number" comment="1- организация 2- отд эсбыта 3- подразделение эсбыта 50 -рэс" as="kod_separator" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="sname" type="string" title="" as="sname" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_orgseparator" as="a"></table>
      </from>
    </query>
    <query name="kk_org_group" class="1" timestamp="25.09.2017 12:57:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_org_group.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" key="1" as="kod" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="kk_org_group" refcol="kod" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kk_org_group" as="a" />
        <query name="kk_org_group" as="kod_parent" join="left outer" dname="kk_org_group">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod" />
          </call>
        </query>
        <query name="hv_org_group_elmarket" as="kod_org_group_elmarket" join="left outer" dname="kk_org_group" title="Балансовая принадлежность энергооборудования">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod_org_group_elmarket" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="kk_tarif_sost" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_tarif_sost.xml" haskeys="1">
      <select>
        <column table="a" column="tip_tarif_sost" type="number" as="tip_tarif_sost" key="1" fixed="1"></column>
        <column table="a" column="abbr" type="string" title="Тип составляющей тарифа" as="abbr" key="0"></column>
        <column table="a" column="name" type="string" title="Тип составляющей тарифа" comment="наименование" as="name" key="0"></column>
        <column table="a" column="pr_active" type="number" comment="признак активности" as="pr_active" key="0"></column>
        <column table="a" column="pr_add_edizm" type="number" comment="томск.если=1 - дописываем к name_t ссылку на edizm" as="pr_add_edizm" key="0"></column>
        <column table="a" column="name1" type="string" as="name1" key="0"></column>
        <column table="a" column="edizm1" type="number" as="edizm1" key="0"></column>
        <column table="a" column="name2" type="string" as="name2" key="0"></column>
        <column table="a" column="edizm2" type="number" as="edizm2" key="0"></column>
        <column table="a" column="name3" type="string" as="name3" key="0"></column>
        <column table="a" column="edizm3" type="number" as="edizm3" key="0"></column>
        <column table="a" column="name4" type="string" as="name4" key="0"></column>
        <column table="a" column="edizm4" type="number" as="edizm4" key="0"></column>
        <column table="a" column="col_mask" type="string" as="col_mask" key="0"></column>
        <column table="a" column="name_val" type="string" comment="наименование порогового значения" as="name_val" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_tarif_sost" as="a"></table>
      </from>
    </query>
    <query name="kk_tep_el" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_tep_el.xml" haskeys="1">
      <select>
        <column table="a" column="tep_el" type="number" key="1" as="tep_el"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name"></column>
        <column table="a" column="sname" type="string" title="Вид энергии" as="sname"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kk_tep_el" as="a"></table>
      </from>
    </query>
    <query name="kk_tipdoc" class="1" title="Тип документа" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_tipdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tipdoc" type="number" as="kod_tipdoc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Тип документа" vid="1" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="srok" type="number" title="Срок действия мес." editor="spin" as="srok" key="0" />
        <column table="a" column="ur_prizn" type="number" title="Вид док-та" as="ur_prizn" reference="kk_tipdoc_ur_prizn" refcol="kod" key="0" />
        <column table="a" column="prioritet" type="number" title="Приоритет" editor="spin" as="prioritet" key="0" />
        <column table="a" column="doc_one" type="number" title="0- много док на дог,1-только один" as="doc_one" key="0" />
        <column table="a" column="template" type="string" title="путь и имя шаблона документа" as="template" key="0" />
        <column table="a" column="pr_val" type="number" title="признак привязки расчета [ тепло2 ]" as="pr_val" key="0" />
        <column table="a" column="prizn_ur" type="number" comment="1 - документ относится только к юл&#xA;2 - документ относится к договору&#xA;0,null - годится для всего" as="prizn_ur" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_tipdoc" as="a" title="Тип документа" />
        <query name="kk_tipdoc_ur_prizn" as="ur_prizn" join="left outer" dname="kk_tipdoc" title="Тип доп. документа">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <column table="a" column="ur_prizn" />
          </call>
        </query>
      </from>
    </query>
    <query name="kk_tipdog" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_tipdog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tipdog" type="number" comment="код типа договора" as="kod_tipdog" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Тип договора" comment="тип договора" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_tipdog" as="a"></table>
      </from>
    </query>
    <query name="kk_type_zadol" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_type_zadol.xml" haskeys="1">
      <select>
        <column table="a" column="day_type" type="number" title="" comment="способ указания дней задолженности" as="day_type" key="1" fixed="1"></column>
        <column table="a" column="npp" type="number" title="" comment="номер по порядку" as="npp" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <call as="text_before_day" function="case" key="0">
          <call function="when">
            <call function="in">
              <column table="this" column="day_type" />
              <call function="array">
                <const>2</const>
                <const>1</const>
              </call>
            </call>
            <const>'до '</const>
          </call>
        </call>
        <call as="text_after_day" function="case" key="0">
          <call function="when">
            <call function="=">
              <column table="this" column="day_type" />
              <const>2</const>
            </call>
            <const>' числа текущего месяца'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="day_type" />
              <const>1</const>
            </call>
            <const>' числа следующего месяца'</const>
          </call>
          <call function="else">
            <column table="this" column="name" />
          </call>
        </call>
        <column table="a" column="day_type" type="number" title="" comment="способ указания дней задолженности" as="day_type" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер по порядку" as="npp" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_type_zadol" as="a"></table>
      </from>
    </query>
    <query name="kk_zak_avans" class="1" title="Постановления по авансам" timestamp="23.11.2016 19:22:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kk_zak_avans.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zak_avans" type="number" as="kod_zak_avans" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kk_zak_avans" as="a" title="Постановления по авансам" />
      </from>
    </query>
    <query name="kr_calc" class="1" timestamp="26.02.2018 15:53:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="ym" type="number" title="" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" as="ym" key="1" fixed="1" />
        <column table="a" column="podr" type="number" title="" comment="код подразделения эсбыта (kodp)&#xA;из  kr_org где kod_separator=3" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="podr" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="pr_close" type="number" title="" is-fact="1" agg="max" as="pr_close" fact="kr_calc_pr_close" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_calc" as="a" />
        <query name="kr_org" as="podr" join="left outer" dname="kr_calc">
          <call function="=">
            <column table="a" column="podr" />
            <column table="podr" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kv_calc_year_plus1" class="1" timestamp="28.12.2021 12:19:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="year" type="string" title="" as="year" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kv_calc_year_plus1" as="a" />
      </from>
    </query>
    <query name="kr_doc_send_ras" class="1" timestamp="27.06.2017 17:51:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_doc_send_ras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_send" type="number" comment="fk kr_fin_doc_send.kod_send" as="kod_send" key="1" fixed="1" />
        <column table="a" column="dat_send" type="timestamp(6)" title="" comment="дата/время выгрузки" as="dat_send" key="0" />
        <column table="a" column="send_mask" type="number" title="" comment="флаг режима выгрузки. см. sg_send_docs.sendmaskflag" as="send_mask" key="0" />
        <column table="a" column="status" type="number" title="" comment="0/1 - без ошибок / с ошибками" as="status" key="0" />
        <column table="a" column="errtext" type="string" title="" comment="сообщение об ошибке" as="errtext" key="0" />
        <column table="a" column="kod_konvert" type="number" comment="код конверта эдо" as="kod_konvert" reference="ks_konvert" refcol="kod_konvert" key="0" />
        <column table="a" column="email_to" type="string" title="" comment="адрес эл. почты получателя" as="email_to" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="t_m" type="string" title="" as="t_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_doc_send_ras" as="a" />
        <query name="kr_fin_doc_send" as="kod_send" join="left outer" dname="kr_doc_send_ras">
          <call function="=">
            <column table="a" column="kod_send" />
            <column table="kod_send" column="kod_send" />
          </call>
        </query>
        <query name="ks_konvert" as="kod_konvert" join="left outer" dname="kr_doc_send_ras">
          <call function="=">
            <column table="a" column="kod_konvert" />
            <column table="kod_konvert" column="kod_konvert" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dogobj_emp" class="1" timestamp="17.12.2018 23:16:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogobj_emp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj_emp" type="number" as="kod_obj_emp" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код потребителя" as="kod_obj" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_dogpodr" type="number" as="kod_dogpodr" reference="kr_dogpodr" refcol="kod_dogpodr" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="тепло-эл" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="pr_dog_podp" type="number" title="" comment="право на подписание договора" as="pr_dog_podp" key="0" />
        <column table="kod_emp" column="kod_dolzhfun" as="kod_dolzhfun" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogobj_emp" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="kr_dogobj_emp" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogpodr" as="kod_dogpodr" join="left outer" dname="kr_dogobj_emp">
          <call function="=">
            <column table="a" column="kod_dogpodr" />
            <column table="kod_dogpodr" column="kod_dogpodr" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="kr_dogobj_emp">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_dogobj_emp">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dogovor" title="Договор" class="1" timestamp="04.02.2022 22:11:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogovor.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" key-dimension="kod_dog" fact="kr_dogovor_kod_dog" agg="max" fact-dimension="kod_dog" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="kod_vdog" type="number" comment="код вида договора" as="kod_vdog" reference="ks_vdog" refcol="kod_vdog" key="0" />
        <column table="a" column="podr" type="number" title="" comment="код подразделения" as="podr" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="состояние договора&#xA;0 - действующий&#xA;1- удаленный&#xA;2-новый" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (для договоров услуг - сторона1 - кому платят )" vid="1" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="признак&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodbpl" type="number" title="" comment="код банка плательщика" as="kodbpl" reference="ks_bank" key="0" />
        <column table="a" column="vid_pl" type="number" title="" comment="код вида основного плат.документа" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="ndog" type="string" title="Номер договора" comment="номер договора" fact="kr_dog_ndog" agg="stragg_dist" vid="1" as="ndog" key="0" />
        <column table="a" column="dat_fin" type="date" title="Дата прекращения договора" comment="дата прекращения договора" is-final-dimension="1" dimension="dat_po" is-private-dimension="1" as="dat_fin" key="0" />
        <column table="a" column="rassh1" type="string" title="" comment="расчетный счет" as="rassh1" key="0" />
        <column table="a" column="dat_dog" type="date" comment="дата начала договора" title="Дата начала действия" vid="1" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_dog" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="последняя корректировка - пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="последняя корректировка - дата" as="d_m" key="0" />
        <column table="a" column="kod_parent_dog" type="number" comment="код договора , на который переоформили данный договор" as="kod_parent_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_srok" type="date" title="Планируемый срок окончания действия договора" comment="планируемый срок окончания действия договора" as="dat_srok" key="0" />
        <column table="a" column="dat_prolong" type="date" title="" comment="дата пролонгации" as="dat_prolong" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="dat_sign" type="date" title="" as="dat_sign" key="0" />
        <column table="a" column="prn_elved" type="number" title="" comment="признак наличия вед электропотр." as="prn_elved" key="0" />
        <column table="a" column="pref_fac" type="number" title="" as="pref_fac" key="0" />
        <column table="a" column="kod_state" type="number" comment="префикс счета фактуры. формируется автоматически из №№ отделения эсб, отдела и сектора эсб, ведущих договор." as="kod_state" key="0" />
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="dep" type="number" title="" vid="1" as="dep" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="lic_kazn" type="string" title="" comment="лицевой счет в казначействе" as="lic_kazn" key="0" />
        <column table="a" column="kodp_plat" type="number" title="" as="kodp_plat" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="pr_sh" type="number" title="" comment="признак начисления электрических штрафов:&#xA;0- по уровням напр в объекте, 1-по договору, 2-в целом по объекту" as="pr_sh" key="0" />
        <column table="a" column="kol_kom" type="number" title="" as="kol_kom" key="0" />
        <column table="a" column="kol_chel" type="number" title="" comment="кол. комнат(быт)" as="kol_chel" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="dat_numdog" type="date" title="" as="dat_numdog" key="0" />
        <column table="a" column="kod_bez_prich" type="number" as="kod_bez_prich" reference="ks_bezakcept_prich" refcol="kod_bez_prich" key="0" />
        <column table="a" column="kod_spos_opl" type="number" as="kod_spos_opl" reference="ks_spos_opl" refcol="kod_spos_opl" key="0" />
        <column table="a" column="kodp_uch" type="number" title="" as="kodp_uch" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="pr_avans_umen" type="number" title="" as="pr_avans_umen" key="0" />
        <column table="a" column="day_pokaz" type="number" title="" comment="указывается 1 из участков , отвечающих за договор.&#xA;для юр. лиц - null , если участков нет." as="day_pokaz" reference="kk_day_pokaz" refcol="day_pokaz" key="0" />
        <column table="a" column="tep_el_byt" type="number" title="" as="tep_el_byt" reference="kk_tep_el" key="0" />
        <column table="a" column="pr_sf_schet" type="number" title="" comment="признак расчета уменьшения аванса, если пусто- используется значение по умолчанию." as="pr_sf_schet" key="0" />
        <column table="a" column="kodp_gruz" type="number" title="" as="kodp_gruz" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="byt_period_obh" type="number" title="" as="byt_period_obh" key="0" />
        <column table="a" column="byt_ocher_obh" type="number" title="" as="byt_ocher_obh" key="0" />
        <column table="a" column="rast_dog" type="string" title="" as="rast_dog" key="0" />
        <column table="a" column="kod_dog_fin" type="number" is-final-dimension="kod_dog_fin" dimension="kod_dog_fin" as="kod_dog_fin" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kodp2" type="number" title="" comment="периодичность обходов" as="kodp2" key="0" />
        <column table="a" column="kodp_sbyt" type="number" title="" comment="очередь обходов" as="kodp_sbyt" key="0" />
        <column table="a" column="kod_tipdoc" type="number" comment="причина расторжения дог-ра" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0" />
        <column table="a" column="deliv_izv" type="number" title="" comment="код дог-ра для финансов" as="deliv_izv" reference="tk_delivery" key="0" />
        <column table="a" column="kod_letter_mem" type="number" comment="признак необх-ти печати напомин.по авансам" as="kod_letter_mem" reference="kk_letter_mem" refcol="kod_letter_mem" key="0" />
        <column table="a" column="kodbpol_ds" type="number" title="" comment="код банка получателя (для договора услуг ленэнерго)" as="kodbpol_ds" reference="ks_bank" key="0" />
        <column table="a" column="rassh2" type="string" title="" comment="расчётный счёт получателя (для договора услуг ленэнерго)" as="rassh2" key="0" />
        <column table="a" column="kod_zak_avans" type="number" comment="постановления по авансам" as="kod_zak_avans" reference="kk_zak_avans" refcol="kod_zak_avans" key="0" />
        <column table="a" column="kod_way_delivery" type="number" comment="cпособ доставки платежных документов абоненту" as="kod_way_delivery" reference="ks_way_delivery" refcol="kod_way_delivery" key="0" />
        <column table="a" column="vid_tn" type="number" title="" comment="вид теплоносителя  2 - вода; 3- пар; 5 - вода+пар" as="vid_tn" key="0" />
        <column table="a" column="dat_postavka" type="date" title="" as="dat_postavka" key="0" />
        <column table="a" column="kod_d_dog" type="number" title="" as="kod_d_dog" key="0" />
        <call function="||" title="interval_existence_dog" as="interval_existence_dog" is-fact="1" fact="kr_dog_interval_exist" agg="list" key="0">
          <call function="to_char">
            <column table="a" column="dat_dog" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">1</const>
            <const>'-'</const>
            <const>''</const>
          </call>
          <call function="to_char">
            <column table="a" column="dat_fin" />
            <const>'DD.MM.YYYY'</const>
          </call>
          <const>','</const>
          <call function="decode">
            <column table="a" column="pr_active" />
            <const function="null">0</const>
            <const>'А'</const>
            <const function="null">1</const>
            <const>'У'</const>
            <const function="null">2</const>
            <const>'Н'</const>
          </call>
        </call>
        <call function="||" title="date_readings" as="date_readings" is-fact="1" agg="list" fact="kr_dog_date_readings" key="0">
          <column table="day_pokaz" column="name" />
          <call function="decode">
            <column table="day_pokaz" column="day_pokaz" />
            <const function="null">0</const>
            <const>''</const>
            <const>'-ого числа след.мес.'</const>
          </call>
        </call>
        <column table="kod_org_sbyt" column="fname" is-fact="1" agg="list" fact="kr_dog_sbyt" as="fname" key="0" />
        <column table="dog_arch_date" column="archive_date" comment="дата архивации" as="dat_archive" key="0" />
        <column as="pref_dog" table="zbd" column="pref_dog" title="Префикс к номеру договора" key="0" />
        <call function="||" as="name" title="Договор" is-name="1" fact="kr_dog_name" agg="stragg_dist" key="0">
          <column table="a" column="ndog" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_dog" />
          </call>
        </call>
        <call function="if" as="kod_abon_type" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call function="if" as="abon_type_name" title="Тип абонента" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>'Физические лица'</const>
          <const>'Юридические лица'</const>
        </call>
        <column table="rr_refprop_dog_103" column="kod_refcode" as="kod_gr_potr_nas" key="0" />
        <column table="rr_refprop_dog_62" column="kod_refcode" as="kod_gr_potr_dog" key="0" />
        <column table="rr_refprop_dog_102" column="kod_refcode" as="kod_state_dog" key="0" />
        <call function="case" type="string" as="potr_cat" title="Категория потребителя" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Промышленность'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>3</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Сельское хозяйство'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>8</const>
              </call>
              <call function="=">
                <column table="okonh" column="p2" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Управляющие организации'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>8</const>
              </call>
              <call function="!=">
                <column table="okonh" column="p2" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'ЖКХ'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="kod_ist_ag" column="p3" />
                <call function="array">
                  <const>1</const>
                  <const>2</const>
                  <const>3</const>
                  <const>4</const>
                  <const>5</const>
                </call>
              </call>
            </call>
            <const>'Бюджет'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="okonh" column="p1" />
                <call function="array">
                  <const>4</const>
                  <const>5</const>
                  <const>6</const>
                  <const>9</const>
                </call>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Прочие потребители'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>7</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Население'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Энергосбытовые компании'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="okonh" column="p1" />
                <const>9</const>
              </call>
              <call function="=">
                <column table="okonh" column="p2" />
                <const>4</const>
              </call>
              <call function="=">
                <column table="kod_ist_ag" column="p3" />
                <const>0</const>
              </call>
            </call>
            <const>'Компенсация потерь'</const>
          </call>
          <call function="else">
            <const>'-'</const>
          </call>
        </call>
        <call function="if" as="ndog_bar5" type="string" key="0">
          <call function="gt">
            <call function="length">
              <call function="replace">
                <column table="a" column="ndog" />
                <const>'.'</const>
                <const>''</const>
              </call>
            </call>
            <const>4</const>
          </call>
          <column table="a" column="ndog" />
          <call function="||">
            <call function="lpad">
              <call function="replace">
                <column table="a" column="ndog" />
                <const>'.'</const>
                <const>''</const>
              </call>
              <call function="greatest">
                <const>4</const>
                <call function="length">
                  <call function="replace">
                    <column table="a" column="ndog" />
                    <const>'.'</const>
                    <const>''</const>
                  </call>
                </call>
              </call>
              <const>'0'</const>
            </call>
            <const>'Э'</const>
          </call>
        </call>
        <call function="case" as="ndog_bar6" type="string" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>1172</const>
            </call>
            <call function="||">
              <const>'1'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>2199</const>
            </call>
            <call function="if">
              <call function="=">
                <column table="a" column="kodp_uch" />
                <const>2199</const>
              </call>
              <call function="||">
                <const>'1'</const>
                <column table="this" column="ndog_bar5" />
              </call>
              <call function="||">
                <const>'4'</const>
                <column table="this" column="ndog_bar5" />
              </call>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15210</const>
            </call>
            <call function="||">
              <const>'5'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15223</const>
            </call>
            <call function="||">
              <const>'8'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15225</const>
            </call>
            <call function="||">
              <const>'7'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15227</const>
            </call>
            <call function="||">
              <const>'Ж'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15229</const>
            </call>
            <call function="||">
              <const>'М'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15231</const>
            </call>
            <call function="||">
              <const>'Д'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15232</const>
            </call>
            <call function="||">
              <const>'6'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>15235</const>
            </call>
            <call function="||">
              <const>'О'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="dep" />
              <const>26912</const>
            </call>
            <call function="||">
              <const>'А'</const>
              <column table="this" column="ndog_bar5" />
            </call>
          </call>
          <call function="else">
            <column table="this" column="ndog_bar5" />
          </call>
        </call>
        <column table="kr_vist_day" column="name" dgroup="stragg" as="avans_info" title="Условия оплаты по договору (аванс)" key="0" />
        <column table="kr_vist_day" column="perc" dgroup="sum" as="avans_proc" key="0" />
        <call function="||" as="postplat_info" title="Условия оплаты по договору (постоплата)" key="0">
          <column table="kod_bzad" column="name" />
        </call>
        <call function="if" as="tep_el_fact" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <column table="a" column="tep_el_byt" />
          <column table="a" column="tep_el" />
        </call>
        <call function="case" type="string" title="Группа потребителей для ФО" comment="алгоритм описан 40745 " as="cust_fo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="kod_ist" />
              <call function="array">
                <const>2</const>
                <const>3</const>
                <const>4</const>
                <const>5</const>
              </call>
            </call>
            <column table="kod_ist" column="name" />
          </call>
          <call function="else">
            <column table="kod_group_cust" column="fin_name" />
          </call>
        </call>
        <column table="kod_group_cust" column="kod_group_cust" dimension="kod_group_cust" as="kod_group_cust" key="0" />
        <column table="kod_group_cust" column="kod_gr_parent" dimension="kod_group_cust_parent" as="kod_gr_parent" key="0" />
        <call function="if" as="dat_active_sign" is-fact="1" agg="min" fact="kr_dogovor_dat_active_sign" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="a" column="dat_sign" />
        </call>
        <call function="if" as="ndog_active" is-fact="1" agg="stragg_dist" fact="kr_dogovor_ndog_active" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="a" column="ndog" />
        </call>
        <call function="if" as="name_group_cust" is-fact="1" agg="min" fact="kr_dogovor_name_group_cust" type="string" key="0">
          <call function="!=">
            <column table="a" column="pr_active" />
            <const>1</const>
          </call>
          <column table="kod_group_cust" column="name" />
        </call>
        <call function="adress_region" as="adress_region" title="Регион" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_sf" as="adress_sf" title="СФ (Субъект Федерации)" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_region2" as="adress_region_name" title="Регион" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <call function="adress_district" as="adress_district" title="Район" key="0">
          <column table="a" column="kod_d_dog" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogovor" as="a" title="Договор">
          <slink name="rr_refprop_dog_103" as="rr_refprop_dog_103" table="rr_refprop_dog_103" />
          <slink name="rr_refprop_dog_62" as="rr_refprop_dog_62" table="rr_refprop_dog_62" />
          <slink name="rr_refprop_dog_102" as="rr_refprop_dog_102" table="rr_refprop_dog_102" />
          <link name="kod_ist" as="kod_ist1" table="ks_istfin" child="kr_dogovor" field="kod_ist" parent="ks_istfin" back="kr_dogovor" title="Источники финансирования">
            <link name="kod_ist_ag" as="kod_ist_ag" table="ag_istfin" child="ks_istfin" field="kod_ist_ag" parent="ag_istfin" back="ks_istfin" />
          </link>
          <link name="kodp" as="kodp1" dimension="1" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент">
            <link name="kod_m" as="kod_m" table="ks_ministry" child="kr_payer" field="kod_m" parent="ks_ministry" back="kr_payer" title="Министерство">
              <link name="kod_m_ag" as="kod_m_ag" table="ag_ministry" child="ks_ministry" field="kod_m_ag" parent="ag_ministry" back="ks_ministry" />
            </link>
            <link name="kod_otrasl" as="kod_otrasl" table="ks_otrasl" child="kr_payer" field="kod_otrasl" parent="ks_otrasl" back="kr_payer" title="Отрасли">
              <link name="okonh" as="okonh" table="ag_okonh" child="ks_otrasl" field="okonh" parent="ag_okonh" back="ks_otrasl" />
            </link>
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dlink name="ur_dogplat" dimension="1" is-private-dimension="1" is-final-dimension="1" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_dog" parent="kr_dogovor" back="ur_dogplat">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dlink name="ur_dp_graf" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_graf">
              <link name="kod_graf" as="kod_graf1" table="ur_graf" child="ur_dp_graf" field="kod_graf" parent="ur_graf" back="ur_dp_graf">
                <dlink name="ur_graf_for_dog" dimension="1" as="ur_graf_for_dog1" is-final-dimension="1" table="ur_graf_for_dog" child="ur_graf_for_dog" field="kod_graf" parent="ur_graf" back="ur_graf_for_dog" />
              </link>
            </dlink>
          </dlink>
          <dlink name="kr_vist_day" pushpred="1" as="kr_vist_day" table="kr_vist_day" child="kr_vist_day" field="kod_dog" parent="kr_dogovor" back="kr_vist_day" />
          <dlink name="kr_dogpodr" dimension="1" as="kr_dogpodr" table="kr_dogpodr" child="kr_dogpodr" field="kod_dog" parent="kr_dogovor" back="kr_dogpodr" />
          <dlink name="kr_dogobj_emp" dimension="1" is-final-dimension="1" as="kr_dogobj_emp" table="kr_dogobj_emp" child="kr_dogobj_emp" field="kod_dog" parent="kr_dogovor" back="kr_dogobj_emp" />
          <dlink name="kr_numobj" dimension="1" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_dog" parent="kr_dogovor" back="kr_numobj" />
          <dlink name="kr_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_numobj_mn" table="kr_numobj_mn" child="kr_numobj_mn" field="kod_dog" parent="kr_dogovor" back="kr_numobj_mn">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="kr_dopdoc" dimension="1" as="kr_dopdoc" table="kr_dopdoc" child="kr_dopdoc" field="kod_dog" parent="kr_dogovor" back="kr_dopdoc" />
          <dlink name="tr_izv_dolg" dimension="1" as="tr_izv_dolg" table="tr_izv_dolg" child="tr_izv_dolg" field="kod_dog" parent="kr_dogovor" back="tr_izv_dolg" />
          <dlink name="kr_predabon" dimension="1" is-final-dimension="1" as="kr_predabon" table="kr_predabon" child="kr_predabon" field="kod_dog" parent="kr_dogovor" back="kr_predabon" />
          <dlink name="kr_vist_day" dimension="1" is-final-dimension="1" as="kr_vist_day" table="kr_vist_day" child="kr_vist_day" field="kod_dog" parent="kr_dogovor" back="kr_vist_day" />
          <link name="kod_dog_dop" as="kod_dog_dop" table="kr_dogovor_dop" child="kr_dogovor" field="kod_dog_dop" parent="kr_dogovor_dop" back="kr_dogovor">
            <link name="kod_group_cust" as="kod_group_cust" table="ks_group_cust" child="kr_dogovor_dop" field="kod_group_cust" parent="ks_group_cust" back="kr_dogovor_dop" />
          </link>
          <link name="kod_ist" as="kod_ist" table="ks_istfin" child="kr_dogovor" field="kod_ist" parent="ks_istfin" back="kr_dogovor" title="Источники финансирования" />
          <link name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" as="day_pokaz" table="kk_day_pokaz" child="kr_dogovor" field="day_pokaz" parent="kk_day_pokaz" back="kr_dogovor" />
        </table>
        <query name="ks_istfin" as="kod_ist" join="left outer" title="Источники финансирования" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_gruz" join="left outer" dname="kr_dogovor_gruz" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_gruz" />
            <column table="kodp_gruz" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_plat" join="left outer" dname="kr_dogovor_plat" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_plat" />
            <column table="kodp_plat" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" dname="kr_dogovor" join="left outer" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="kr_dogovor" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_spos_opl" as="kod_spos_opl" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_spos_opl" />
            <column table="kod_spos_opl" column="kod_spos_opl" />
          </call>
        </query>
        <query name="tk_delivery" as="deliv_izv" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="deliv_izv" />
            <column table="id" column="id" />
          </call>
        </query>
        <query name="kk_zak_avans" as="kod_zak_avans" join="left outer" dname="kr_dogovor" title="Постановления по авансам">
          <call function="=">
            <column table="a" column="kod_zak_avans" />
            <column table="kod_zak_avans" column="kod_zak_avans" />
          </call>
        </query>
        <query name="kr_org" as="kodp_sbyt" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kodp_sbyt" />
            <column table="kodp_sbyt" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_uch" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kodp_uch" />
            <column table="kodp_uch" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" title="Отделение" dname="kr_dog_dep">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="podr" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="podr" />
            <column table="podr" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodbpol_ds" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kodbpol_ds" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ks_bank" as="kodbpl" join="left outer" dimension="1" dname="kr_dogovor-dim" is-final-dimension="1" is-private-dimension="1">
          <call function="=">
            <column table="a" column="kodbpl" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ks_vdog" as="kod_vdog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor" title="Вид договора">
          <call function="=">
            <column table="a" column="kod_vdog" />
            <column table="kod_vdog" column="kod_vdog" />
          </call>
        </query>
        <query name="kk_letter_mem" as="kod_letter_mem" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_letter_mem" />
            <column table="kod_letter_mem" column="kod_letter_mem" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="kr_dogovor" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ks_way_delivery" as="kod_way_delivery" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_way_delivery" />
            <column table="kod_way_delivery" column="kod_way_delivery" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="ks_bezakcept_prich" as="kod_bez_prich" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_bez_prich" />
            <column table="kod_bez_prich" column="kod_bez_prich" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_fin" join="left outer" dname="kr_dogovor" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_fin" />
            <column table="kod_dog_fin" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_parent_dog" join="left outer" dname="kr_dogovor" title="Договор">
          <call function="=">
            <column table="a" column="kod_parent_dog" />
            <column table="kod_parent_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor_dop" as="kod_dog_dop" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog_dop" column="kod_dog" />
          </call>
        </query>
        <query name="kk_day_pokaz" as="day_pokaz" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="day_pokaz" />
            <column table="day_pokaz" column="day_pokaz" />
          </call>
        </query>
        <query name="kv_org_sbyt" as="kod_org_sbyt" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kodp_sbyt" />
            <column table="kod_org_sbyt" column="kodp" />
          </call>
        </query>
        <query name="dog_arch_date" join="left outer" as="dog_arch_date" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="dog_arch_date" column="kod_dog" />
          </call>
        </query>
        <query name="ks_zbd" as="zbd" join="left outer" title="Общие настроечные константы" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="dep" />
            <column table="zbd" column="kodp" />
          </call>
        </query>
        <query name="p_gr_potr_nas" as="kod_gr_potr_nas" join="left outer" dname="kr_dogovor" title="Группа потребления население э/э (польз.спр.)">
          <call function="=">
            <column table="this" column="kod_gr_potr_nas" />
            <column table="kod_gr_potr_nas" column="kod_gr_potr_nas" />
          </call>
        </query>
        <query name="rs_refcode" as="kod_gr_potr_dog" join="left outer" dname="kr_dogovor">
          <call function="=">
            <column table="this" column="kod_gr_potr_dog" />
            <column table="kod_gr_potr_dog" column="kod_refcode" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_podr" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kr_podr" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="podr" />
            <column table="kr_podr" column="kodp" />
          </call>
        </query>
        <query name="rr_gen_codes_t" as="kod_rr_gen" join="left outer" dimension="1" dname="kr_dogovor">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_rr_gen" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="dog_arch_date" timestamp="18.11.2019 15:34:39" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogovor_arch.xml" haskeys="1">
      <select>
        <column table="ka_operationdog" column="kod_dog" group="1" as="kod_dog" key="1" fixed="1" />
        <column group="max" table="ka_operationdog" column="dat_fin" as="archive_date" key="0" />
      </select>
      <from>
        <query name="ka_operationdog" as="ka_operationdog" />
      </from>
      <where>
        <call function="=">
          <column table="ka_operationdog" column="kod_operation" />
          <const type="number">2</const>
        </call>
      </where>
    </query>
    <query name="kr_dogovor_dop" class="1" timestamp="11.05.2017 21:30:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogovor_dop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="vo_debet" type="string" title="" comment="вид валютной операции для печати в платежный документ" as="vo_debet" key="0" />
        <column table="a" column="kod_punkt" type="number" as="kod_punkt" reference="ks_punkt_dog" refcol="kod_punkt" key="0" />
        <column table="a" column="ecp" type="number" title="" comment="признак наличия эцп" as="ecp" key="0" />
        <column table="a" column="porciya" type="number" title="" comment="порция электрического расчета по умолчанию" as="porciya" key="0" />
        <column table="a" column="kod_group_cust" type="number" comment="код группы потребителей ээ" as="kod_group_cust" reference="ks_group_cust" refcol="kod_group_cust" key="0">
          <listquery>
            <query name="ks_group_cust_list" />
          </listquery>
        </column>
        <column table="a" column="noauto_opl" type="number" title="" comment="признак &quot;исключить автоматический разнос оплат&quot;" as="noauto_opl" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogovor_dop" as="a" />
        <query name="ks_punkt_dog" as="kod_punkt" join="left outer" dname="kr_dogovor_dop">
          <call function="=">
            <column table="a" column="kod_punkt" />
            <column table="kod_punkt" column="kod_punkt" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_dogovor_dop" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ks_group_cust" as="kod_group_cust" join="left outer" title="Подгруппа потребителей" dname="kr_dogovor_dop">
          <call function="=">
            <column table="a" column="kod_group_cust" />
            <column table="kod_group_cust" column="kod_group_cust" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dogovor_el_inter_type" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogovor_el_inter_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dog" type="number" column-mandatory="1" as="kod_dog" key="1" fixed="1" />
        <column table="a" column="kod_el_inter_type" type="number" as="kod_el_inter_type" reference="kk_el_inter_type" refcol="kod_el_inter_type" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogovor_el_inter_type" as="a" />
        <query name="kk_el_inter_type" as="kod_el_inter_type" join="left outer" dname="kr_dogovor_el_inter_type">
          <call function="=">
            <column table="a" column="kod_el_inter_type" />
            <column table="kod_el_inter_type" column="kod_el_inter_type" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_dogovor_el_inter_type" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dogovor_prim" class="1" timestamp="14.11.2016 17:11:14" order="datevv desc" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogovor_prim.xml" haskeys="1">
      <select>
        <column table="a" column="kod_prim" type="number" as="kod_prim" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="datevv" type="date" title="" dimension="dat" as="datevv" key="0" />
        <column table="a" type="string" title="" column="prim" fact="kr_dogovor_prim" agg="stragg" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_area" type="number" comment="примечание относится к определенной логической области" as="kod_area" reference="rk_area" refcol="kod_area" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogovor_prim" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="kr_dogovor_prim" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="rk_area" as="kod_area" join="left outer" dname="kr_dogovor_prim">
          <call function="=">
            <column table="a" column="kod_area" />
            <column table="kod_area" column="kod_area" />
          </call>
        </query>
      </from>
      <order>
        <column column="datevv" />
      </order>
    </query>
    <query name="kr_dogpodr" class="1" timestamp="02.06.2016 15:31:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dogpodr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dogpodr" type="number" as="kod_dogpodr" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dogpodr" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="kr_dogpodr" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="kr_dogpodr">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_dopdoc" class="1" timestamp="25.04.2016 11:46:36" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_dopdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dopdoc" type="number" as="kod_dopdoc" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_tipdoc" type="number" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата документа" as="dat_doc" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата начала действия" as="dat_s" key="0" />
        <column table="a" column="arhiv" type="number" title="" comment="1- архив" as="arhiv" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата окончания действия" as="dat_po" key="0" />
        <column table="a" column="numer" type="string" title="" comment="номер документа" as="numer" key="0" />
        <column table="a" column="name_file" type="string" title="" comment="наименование файла, доп.документы к договору" as="name_file" key="0" />
        <column table="a" column="template_name" type="string" title="" comment="путь и имя шаблона для формирования дополнительного документа" as="template_name" key="0" />
        <column table="a" column="punct_pt" type="string" title="" comment="ссылка на номер пункта для печати в платежное требование" as="punct_pt" key="0" />
        <column table="a" column="kod_ddatval" type="number" comment="код расчета  [тепло2]" as="kod_ddatval" reference="dr_ddatval" refcol="kod_ddatval" key="0" />
        <column table="a" column="kod_state" type="number" comment="код состояния док-та" as="kod_state" reference="kk_doc_state" refcol="kod_state" key="0" />
        <column table="a" column="kod_reason" type="number" comment="код причины возн. док-та" as="kod_reason" reference="kk_doc_reason" refcol="kod_reason" key="0" />
        <column table="a" column="e_copy" type="blob" title="" comment="электронная копия документа" as="e_copy" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="num_upd" type="number" title="" comment="кол-во обновлений эл.копии" as="num_upd" key="0" />
        <column table="a" column="kodp_nets" type="number" title="" comment="сетевая огранизация" as="kodp_nets" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_node_arx" type="number" comment="id акта допуска (проект ауутэ)" as="kod_node_arx" key="0" />
        <column table="a" column="money" type="number" title="" comment="сумма. руб. столбец запоняется для документа &quot;доп.соглашение о задатке&quot;." as="money" key="0" />
        <column table="a" column="kod_parent_dopdoc" type="number" comment="код родительского документа" as="kod_parent_dopdoc" key="0" />
        <column table="a" column="kod_pismo" type="number" comment="код письма (ауутэ)" as="kod_pismo" key="0" />
        <column table="a" column="kod_audit" type="number" comment="идентификатор строки" as="kod_audit" key="0" />
        <column table="a" column="e_copy_file" type="number" title="" comment="пpизнак хранения электронной копии в файловой системе" as="e_copy_file" key="0" />
        <call function="case" as="status_name" title="Статус" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="arhiv" />
              <const>0</const>
            </call>
            <const>'Активный'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="arhiv" />
              <const>1</const>
            </call>
            <const>'Архивный'</const>
          </call>
        </call>
        <call function="if" as="has_doc_bd" title="Наличие эл. копии в БД" key="0">
          <call function="is not null">
            <column table="a" column="e_copy" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="nvl0" as="has_doc_fs" title="Наличие эл. копии в ФС" key="0">
          <column table="a" column="e_copy_file" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_dopdoc" as="a" />
        <query name="dr_ddatval" as="kod_ddatval" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="kod_ddatval" />
            <column table="kod_ddatval" column="kod_ddatval" />
          </call>
        </query>
        <query name="kk_doc_reason" as="kod_reason" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="kod_reason" />
            <column table="kod_reason" column="kod_reason" />
          </call>
        </query>
        <query name="kk_doc_state" as="kod_state" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="kr_dopdoc" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_dopdoc" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="kr_dopdoc" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kk_active" as="arhiv" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="arhiv"></column>
            <column table="arhiv" column="pr_active"></column>
          </call>
        </query>
        <query name="kr_org" as="kodp_nets" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="kodp_nets"></column>
            <column table="kodp_nets" column="kodp"></column>
          </call>
        </query>
        <query name="kr_dopdoc_arhiv" as="arhiv" join="left outer" dname="kr_dopdoc">
          <call function="=">
            <column table="a" column="arhiv" />
            <column table="arhiv" column="arhiv" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_egr_smsp_payers" class="1" timestamp="05.08.2020 23:35:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_egr_smsp_payers.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" column-mandatory="1" title="" key="1" as="kod" />
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" as="kodp" />
        <column table="a" column="okved" type="string" data-size="8" column-mandatory="1" title="" as="okved" />
        <column table="a" column="okved_version" type="string" data-size="4" title="" as="okved_version" />
        <column table="a" column="is_member" type="string" data-size="1" title="" comment="Y - относится, N - не относится" as="is_member" />
        <column table="a" column="mod_date" type="date" column-mandatory="1" title="" comment="Дата включения\исключения" as="mod_date" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_egr_smsp_payers" as="a" />
      </from>
    </query>
    <query name="kr_egr_ul" class="1" timestamp="03.11.2022 12:37:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_egr_ul.xml" haskeys="1">
      <select>
        <column table="a" column="ogrn" type="string" data-size="13" column-mandatory="1" title="ОГРН" comment="Основной государственный регистрационный номер юридического лица" key="1" as="ogrn" />
        <column table="a" column="ogrn_date" type="date" title="" comment="Дата присвоения ОГРН" as="ogrn_date" />
        <column table="a" column="inn" type="string" data-size="10" title="ИНН" comment="ИНН юридического лица" as="inn" />
        <column table="a" column="kpp" type="string" data-size="9" title="КПП" comment="КПП юридического лица" as="kpp" />
        <column table="a" column="opf" type="string" data-size="5" title="" comment="Наименование классификатора, по которому введены сведения об организационно-правовой форме: ОКОПФ, КОПФ&lt;" as="opf" />
        <column table="a" column="opf_kod" type="string" data-size="5" title="" comment="Код по выбранному классификатору" as="opf_kod" />
        <column table="a" column="opf_name" type="string" data-size="255" title="" comment="Полное наименование организационно-правовой формы" as="opf_name" />
        <column table="a" column="name_full" type="string" data-size="1000" title="" comment="Полное наименование юридического лица" as="name_full" />
        <column table="a" column="name_short" type="string" data-size="510" title="" comment="Сокращенное наименование юридического лица на русском языке" as="name_short" />
        <column table="a" column="kod_kladr" type="string" data-size="23" comment="Код адреса по КЛАДР" as="kod_kladr" />
        <column table="a" column="postalcode" type="string" data-size="6" title="" comment="Почтовый индекс" as="postalcode" />
        <column table="a" column="regioncode" type="string" data-size="2" title="" comment="Код субъекта Российской Федерации, который является учредителем (участником) юридического лица или на территории которого находится муниципальное образование, которое является учредителем (участником) юридического лица" as="regioncode" />
        <column table="a" column="region_type" type="string" data-size="30" title="" comment="Тип элемента регион (республика, край и т.п.)" as="region_type" />
        <column table="a" column="region_name" type="string" data-size="200" title="" comment="Наименование (элемент регион)" as="region_name" />
        <column table="a" column="district_type" type="string" data-size="30" title="" comment="Тип элемента район (район, улус и т.п.)" as="district_type" />
        <column table="a" column="district_name" type="string" data-size="265" title="" comment="Наименование (элемент район) " as="district_name" />
        <column table="a" column="city_type" type="string" data-size="30" title="" comment="Тип элемента город (город, волость и т.п.)" as="city_type" />
        <column table="a" column="city_name" type="string" data-size="200" title="" comment="Наименование (элемент город)" as="city_name" />
        <column table="a" column="place_type" type="string" data-size="30" title="" comment="Тип элемента населенный пункт (поселок, село и т.п.)" as="place_type" />
        <column table="a" column="place_name" type="string" data-size="713" title="" comment="Наименование (элемент населенный пункт)" as="place_name" />
        <column table="a" column="street_type" type="string" data-size="30" title="" comment="Тип адресного объекта улица (улица, проспект, переулок и т.п.)" as="street_type" />
        <column table="a" column="street_name" type="string" data-size="200" title="" comment="Наименование (элемент улица)" as="street_name" />
        <column table="a" column="house" type="string" data-size="1000" title="" comment="Дом (владение и т.п.)" as="house" />
        <column table="a" column="building" type="string" data-size="50" title="" comment="Корпус (строение и т.п.)" as="building" />
        <column table="a" column="flat" type="string" data-size="700" title="" comment="Квартира (офис и т.п.)" as="flat" />
        <column table="a" column="okved" type="string" data-size="8" title="" comment="Код по Общероссийскому классификатору видов экономической деятельности" as="okved" />
        <column table="a" column="okved_name" type="string" data-size="1000" title="" comment="Наименование вида деятельности по Общероссийскому классификатору видов экономической деятельности" as="okved_name" />
        <column table="a" column="okved_version" type="string" data-size="4" title="" comment="Признак версии Общероссийского классификатора видов экономической деятельности" as="okved_version" />
        <column table="a" column="out_date" type="date" title="" comment="Дата формирования сведений из ЕГРЮЛ в отношении юридического лица" as="out_date" />
        <column table="a" column="reg_no" type="string" data-size="255" title="" comment="Рег.номер,присвоенный российскому ЮЛ; Не формируется в отношении ЮЛ, зарегистрированного после 01 июля 2002 г." as="reg_no" />
        <column table="a" column="reg_date" type="date" title="" comment="Дата регистрации российского ЮЛ; Не формируется в отношении ЮЛ, зарегистрированного после 01 июля 2002 г." as="reg_date" />
        <column table="a" column="reg_name" type="string" data-size="255" title="" comment="Наименование органа, зарегистрировавшего ЮЛ; Не формируется в отношении ЮЛ, зарегистрированного после 01 июля 2002 г." as="reg_name" />
        <column table="a" column="sulst" type="string" data-size="3" title="" comment="Код статуса ЮЛ по справочнику СЮЛСТ" as="sulst" />
        <column table="a" column="sulst_name" type="string" data-size="500" title="" comment="Наименование статуса ЮЛ по справочнику СЮЛСТ" as="sulst_name" />
        <column table="a" column="exclude_decision_date" type="date" title="" comment="Дата решения о предстоящем исключении ЮЛ из ЕГР" as="exclude_decision_date" />
        <column table="a" column="sulpd" type="string" data-size="3" title="" comment="Код способа прекращения ЮЛ по справочнику СЮЛПД" as="sulpd" />
        <column table="a" column="sulpd_name" type="string" data-size="255" title="" comment="Наименование способа прекращения ЮЛ" as="sulpd_name" />
        <column table="a" column="termination_date" type="date" title="" comment="Дата прекращения юридического лица" as="termination_date" />
        <column table="a" column="email" type="string" data-size="50" title="" as="email" />
        <column table="a" column="gar_id" type="string" data-size="36" title="" comment="Уникальный идентификатор адресного объекта в ГАР" as="gar_id" />
        <column table="a" column="mn_gar_id" type="string" data-size="36" title="" comment="Сведения о месте нахождения ЮЛ: Уникальный идентификатор адресного объекта в ГАР" as="mn_gar_id" />
        <column table="a" column="mn_region_code" type="string" data-size="2" title="" comment="Сведения о месте нахождения ЮЛ: Код субъекта Российской Федерации" as="mn_region_code" />
        <column table="a" column="mn_region_name" type="string" data-size="50" title="" comment="Сведения о месте нахождения ЮЛ: Наименование субъекта Российской Федерации" as="mn_region_name" />
        <column table="a" column="mn_mun_reg_kod" type="string" data-size="1" title="" comment="Сведения о месте нахождения ЮЛ: Муниципальный район/ городской округ/ внутригородская территория города федерального значения/ муниципальный округ: Код" as="mn_mun_reg_kod" />
        <column table="a" column="mn_mun_reg_name" type="string" data-size="255" title="" comment="Сведения о месте нахождения ЮЛ: Муниципальный район/ городской округ/ внутригородская территория города федерального значения/ муниципальный округ: Наименование" as="mn_mun_reg_name" />
        <column table="a" column="mn_gor_sel_kod" type="string" data-size="1" title="" comment="Сведения о месте нахождения ЮЛ: Городское поселение / сельское поселение / межселенная территория в составе муниципального района / внутригородской район городского округа: Код" as="mn_gor_sel_kod" />
        <column table="a" column="mn_gor_sel_name" type="string" data-size="255" title="" comment="Сведения о месте нахождения ЮЛ: Городское поселение / сельское поселение / межселенная территория в составе муниципального района / внутригородской район городского округа: Наименование" as="mn_gor_sel_name" />
        <column table="a" column="mn_place_type" type="string" data-size="100" title="" comment="Сведения о месте нахождения ЮЛ: Населенный пункт (город, деревня, село и прочее): Тип" as="mn_place_type" />
        <column table="a" column="mn_place_name" type="string" data-size="255" title="" comment="Сведения о месте нахождения ЮЛ: Населенный пункт (город, деревня, село и прочее): Наименование" as="mn_place_name" />
        <column table="a" column="name_foreign_full" type="string" data-size="1000" title="" comment="Полное наименование ЮЛ на английском языке" as="name_foreign_full" />
        <column table="a" column="name_foreign_short" type="string" data-size="510" title="" comment="Краткое наименование ЮЛ на английском языке" as="name_foreign_short" />
        <column table="a" column="fl_1c" type="number" column-mandatory="1" title="" as="fl_1c" />
        <column table="a" column="key_1c" type="string" data-size="36" title="" as="key_1c" />
        <column table="a" column="rn_cust_1c" type="number" title="" as="rn_cust_1c" />
        <column table="a" column="rn_addr_1c" type="number" title="" as="rn_addr_1c" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_egr_ul" as="a" />
      </from>
    </query>
    <query name="kr_el_inter_contact" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_el_inter_contact.xml" haskeys="1">
      <select>
        <column table="a" column="kod_el_inter_contact" type="number" column-mandatory="1" comment="Код контакта" as="kod_el_inter_contact" key="1" fixed="1" />
        <column table="a" column="text" type="string" data-size="200" title="" comment="Текст" as="text" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="kod_el_contact_purpose" type="number" as="kod_el_contact_purpose" reference="kk_el_contact_purpose" refcol="kod_el_contact_purpose" key="0" />
        <column table="a" column="kod_dopdoc" type="number" as="kod_dopdoc" reference="kr_dopdoc" refcol="kod_dopdoc" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="kod_el_inter_type" type="number" as="kod_el_inter_type" reference="kk_el_inter_type" refcol="kod_el_inter_type" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_edo" type="number" as="kod_edo" reference="kk_edo" refcol="kod_edo" key="0" />
        <column table="a" column="kod_uch_edo" type="string" data-size="50" as="kod_uch_edo" key="0" />
        <column table="a" column="maxval_file" type="number" title="" comment="Максимальный размер файла, Мб" as="maxval_file" key="0" />
        <column table="a" column="status_lk" type="number" title="" comment="ЛК: 1 – зарегистрирован; 0- сброс регистрации" as="status_lk" key="0" />
        <column table="a" column="date_lk" type="date" title="" comment="ЛК: Дата регистрации" as="date_lk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_el_inter_contact" as="a" />
        <query name="kk_edo" as="kod_edo" join="left outer" dname="kr_el_inter_contact">
          <call function="=">
            <column table="a" column="kod_edo" />
            <column table="kod_edo" column="kod_edo" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_el_inter_contact" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kk_el_inter_type" as="kod_el_inter_type" join="left outer" dname="kr_el_inter_contact">
          <call function="=">
            <column table="a" column="kod_el_inter_type" />
            <column table="kod_el_inter_type" column="kod_el_inter_type" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_el_inter_contact">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kr_dopdoc" as="kod_dopdoc" join="left outer" dname="kr_el_inter_contact">
          <call function="=">
            <column table="a" column="kod_dopdoc" />
            <column table="kod_dopdoc" column="kod_dopdoc" />
          </call>
        </query>
        <query name="kk_el_contact_purpose" as="kod_el_contact_purpose" join="left outer" dname="kr_el_inter_contact">
          <call function="=">
            <column table="a" column="kod_el_contact_purpose" />
            <column table="kod_el_contact_purpose" column="kod_el_contact_purpose" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_employee" class="1" timestamp="24.08.2018 17:33:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_employee.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (организации)" as="kodp" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта договора" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_dolzhfun" type="number" comment="код должностной функции" as="kod_dolzhfun" reference="kk_dolzhfun" refcol="kod_dolzhfun" key="0" />
        <column table="a" column="kod_namedolzh" type="number" comment="код должности" as="kod_namedolzh" reference="ks_namedolzh" refcol="kod_namedolzh" key="0" />
        <column table="a" column="fio" type="string" title="ФИО" comment="фио" vid="1" as="fio" key="0" />
        <column table="a" column="fax" type="string" title="" comment="номер факса" as="fax" key="0" />
        <column table="a" column="tel" type="string" title="" comment="телефон" as="tel" key="0" />
        <column table="a" column="place" type="string" title="" comment="место расположения факса" as="place" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="serial" type="string" title="" comment="серия паспорта (для хозяев чп)" as="serial" key="0" />
        <column table="a" column="nomer" type="string" title="" comment="номер паспорта  (для хозяев чп)" as="nomer" key="0" />
        <column table="a" column="kem" type="string" title="" comment="кем выдан паспорт  (для хозяев чп)" as="kem" key="0" />
        <column table="a" column="num_dover" type="string" title="" comment="№ доверенности . заполн.для руководителя&#xA;исп при печати договора" as="num_dover" key="0" />
        <column table="a" column="fio_r" type="string" title="" as="fio_r" key="0" />
        <column table="a" column="e_mail" type="string" title="" as="e_mail" key="0" />
        <column table="a" column="tab_nomer" type="string" title="" comment="табельный номер" as="tab_nomer" key="0" />
        <column table="a" column="fio_f" type="string" title="" as="fio_f" key="0" />
        <column table="a" column="fio_i" type="string" title="" as="fio_i" key="0" />
        <column table="a" column="fio_o" type="string" title="" as="fio_o" key="0" />
        <column table="a" column="d_pasp" type="date" title="" as="d_pasp" key="0" />
        <column table="a" column="d_birth" type="date" title="" as="d_birth" key="0" />
        <column table="a" column="pref" type="number" title="" as="pref" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0" />
        <column table="a" column="fio_d" type="string" title="" as="fio_d" key="0" />
        <column table="a" column="namedolzh" type="string" title="" comment="наименование должности" as="namedolzh" key="0" />
        <column table="a" column="namedolzh_r" type="string" title="" comment="наименование должности в родительном падеже" as="namedolzh_r" key="0" />
        <column table="a" column="pr_ctrl" type="number" title="" comment="для быта. признак разрешения съема контрольных показаний.&#xA;1 - разрешено&#xA;0 - запрещено" as="pr_ctrl" key="0" />
        <column table="a" column="m_birth" type="string" title="" comment="место рождения (для хозяев чп)" as="m_birth" key="0" />
        <column table="a" column="adres_p" type="string" title="" comment="почтовый адрес" as="adres_p" key="0" />
        <column table="a" column="inn" type="string" title="" comment="инн должностного лица" as="inn" key="0" />
        <column table="a" column="namedolzh_d" type="string" title="" comment="наименование должности в дательном падеже" as="namedolzh_d" key="0" />
        <column table="a" column="rel_ship" type="string" title="" comment="степень родства" as="rel_ship" key="0" />
        <column table="a" column="dat_beg_reg" type="date" title="" comment="дата регистрации:" as="dat_beg_reg" key="0" />
        <column table="a" column="dat_end_reg" type="date" title="" comment="дата выписки" as="dat_end_reg" key="0" />
        <column table="a" column="russian_tel" type="number" title="" comment="флаг: должны ли номера долж. лиц соответствовать шаблону российского номера" as="russian_tel" key="0" />
        <call function="date to char" as="d_birth_str" key="0">
          <column table="a" column="d_birth" />
        </call>
        <call function="if" as="active_ruk" is-fact="1" agg="max" fact="kr_employee_active_ruk" key="0">
          <call function="and">
            <call function="=">
              <column table="a" column="pr_active" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="a" column="kod_dolzhfun" />
              <const>14</const>
            </call>
          </call>
          <call function="||">
            <column table="kod_namedolzh" column="name" />
            <const type="string">' '</const>
            <column table="a" column="fio" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_employee" as="a">
          <dlink name="kr_employee_ruk" dimension="1" as="kr_employee_ruk" table="kr_employee_ruk" child="kr_employee_ruk" field="kod_emp" parent="kr_employee" back="kr_employee_ruk" />
        </table>
        <query name="kk_dolzhfun" as="kod_dolzhfun" join="left outer" dname="kr_employee">
          <call function="=">
            <column table="a" column="kod_dolzhfun" />
            <column table="kod_dolzhfun" column="kod_dolzhfun" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="kr_employee">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dimension="1" dname="kr_employee">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_payer" join="left outer" dimension="1" dname="kr_employee" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp_payer" column="kodp" />
          </call>
        </query>
        <query name="ks_namedolzh" as="kod_namedolzh" join="left outer" dname="kr_employee">
          <call function="=">
            <column table="a" column="kod_namedolzh" />
            <column table="kod_namedolzh" column="kod_namedolzh" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_fin_doc_send" class="1" timestamp="05.10.2021 21:12:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_fin_doc_send.xml" haskeys="1">
      <select>
        <column table="a" column="kod_send" type="number" column-mandatory="1" key="1" as="kod_send" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" />
        <column table="a" column="ym" type="number" title="" as="ym" />
        <column table="a" column="email_to" type="string" title="" comment="адрес эл. почты получателя" data-size="300" as="email_to" />
        <column table="a" column="status" type="number" title="" comment="0/1 - без ошибок / с ошибками" as="status" />
        <column table="a" column="errtext" type="string" title="" comment="сообщение об ошибке" data-size="4000" as="errtext" />
        <column table="a" column="kod" type="number" title="" comment="код документа: kod_sf, kod_deb, код акта сверки, код уведомления" as="kod" />
        <column table="a" column="send_mask" type="number" title="" comment="маска признака отправки документа в десятичном представлении" as="send_mask" />
        <column table="a" column="kod_konvert" type="number" comment="код конверта эдо. сохраняется код конверта последней выгрузки. историю смотри в kr_send_doc_ras" as="kod_konvert" />
        <column table="a" column="dat_send" type="timestamp(6)" title="" comment="дата/время выгрузки. сохраняется дата последней выгрузки. историю смотри в kr_send_doc_ras" as="dat_send" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_fin_doc_send" as="a" />
        <query name="sr_akt" as="kod_akt_sv" join="left outer" dname="kr_fin_doc_send">
          <call function="=">
            <column table="this" column="kod_akt_sv" />
            <column table="kod_akt_sv" column="kod" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_fin_doc_send" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_limit_doc" class="1" timestamp="06.02.2022 14:58:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_limit_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_lim_doc" type="number" column-mandatory="1" key="1" as="kod_lim_doc" />
        <column table="a" column="kodp" type="number" title="" comment="Государственный заказчик" as="kodp" />
        <column table="a" column="kod_ist" type="number" column-mandatory="1" comment="код источника финансирования" as="kod_ist" reference="ks_istfin" refcol="kod_ist" />
        <column table="a" column="kod_tipdoc" type="number" column-mandatory="1" comment="тип документа" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" />
        <column table="a" column="nb_doc" type="string" data-size="50" comment="№ документа" is-name="1" as="nb_doc" />
        <call as="name" type="string" function="||" title="№" vid="1">
          <column table="this" column="nb_doc" />
          <const>' от '</const>
          <call type="" function="date to char">
            <column table="this" column="dat_doc" as="" type="" />
          </call>
        </call>
        <column table="a" column="dat_doc" type="date" title="" comment="дата документа" as="dat_doc" />
        <column table="a" column="year" type="number" title="" comment="лимиты на год" as="year" />
        <column table="a" column="dat_kazn" type="date" title="" comment="дата подписания в казначействе" as="dat_kazn" />
        <column table="a" column="nb_kazn" type="string" data-size="15" title="" comment="№ учет.записи в казначействе" as="nb_kazn" />
        <column table="a" column="type_val" type="number" column-mandatory="1" title="" comment="объемы указаны: 0 - за год, 1 - по кв., 2 - по мес." as="type_val" />
        <column table="a" column="kod_parent" type="number" comment="ссылка на контракт" as="kod_parent" />
        <column table="a" column="type_corr" type="number" column-mandatory="1" title="" comment="0 - установить новые величины, 1 - добавить/вычесть" as="type_corr" />
        <column table="a" column="u_m" type="string" data-size="60" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="kod_m" type="number" column-mandatory="1" comment="министерство" as="kod_m" reference="ks_ministry" refcol="kod_m" />
        <column table="a" column="kod_genzak" type="number" comment="код министерства /гос.заказчика" as="kod_genzak" />
        <column table="a" column="dat_s" type="date" title="" comment="Действует с..." as="dat_s" />
        <column table="a" column="dat_po" type="date" title="" comment="Действует по..." as="dat_po" />
        <column table="a" column="dep_gk" type="number" title="" comment="Отделение, в котором заводили ГК" as="dep_gk" reference="kr_org" refcol="kodp" />
        <column table="a" column="id_gk" type="string" data-size="40" title="" comment="Идентификатор государственного контракта" as="id_gk" />
        <column table="a" column="dat_reg" type="date" title="" comment="Дата регистрации" as="dat_reg" />
        <column table="a" column="id_file" type="string" data-size="250" title="" comment="Идентификатор группы" as="id_file" />
        <column table="a" column="porciya" type="string" data-size="250" title="" comment="Порция для расчета по группе документов" as="porciya" />
        <column table="a" column="ikz" type="string" data-size="36" title="" comment="Идентификационный код закупки" as="ikz" />
        <column table="a" column="pr_ikz" type="number" title="" comment="1 - ИКЗ заведено в модуле &quot;Лимиты&quot;" as="pr_ikz" />
        <column table="a" column="kod_contractform" type="number" column-mandatory="1" comment="Способ заключения документа: 0 - на бумажном носителе, 1 - в форме электр.док-та" as="kod_contractform" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_limit_doc" as="a" />
        <query name="kr_org" as="dep_gk" join="left outer" dname="kr_limit_doc">
          <call function="=">
            <column table="a" column="dep_gk" />
            <column table="dep_gk" column="kodp" />
          </call>
        </query>
        <query name="ks_ministry" as="kod_m" join="left outer" dname="kr_limit_doc" title="Министерство">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="kr_limit_doc" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="ks_istfin" as="kod_ist" join="left outer" dname="kr_limit_doc" title="Источники финансирования">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_limit_sp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_limit_sp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_lim_sp" type="number" column-mandatory="1" as="kod_lim_sp" key="1" fixed="1" />
        <column table="a" column="kod_lim_doc" type="number" column-mandatory="1" as="kod_lim_doc" reference="kr_limit_doc" refcol="kod_lim_doc" key="0" />
        <column table="a" column="kod_dog" type="number" column-mandatory="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_ist" type="number" column-mandatory="1" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="u_m" type="string" data-size="60" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="pr_calc" type="number" column-mandatory="1" title="" comment="-----   поле не используются" as="pr_calc" key="0" />
        <column table="a" column="kod_lim_calc" type="number" comment="-----   поле не используется" as="kod_lim_calc" key="0" />
        <column table="a" column="val_b" type="number" title="" comment="Лимиты бюджетных обязательств, руб." as="val_b" key="0" />
        <column table="a" column="val_vb" type="number" title="" comment="Внебюджетные средства, руб." as="val_vb" key="0" />
        <column table="a" column="type_corr" type="number" title="" comment="0 -изм.вел(+), -1 -изм.вел(-), 1 -установить новые вел." as="type_corr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_limit_sp" as="a" />
        <query name="ks_istfin" as="kod_ist" join="left outer" dname="kr_limit_sp" title="Источники финансирования">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="kr_limit_sp" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_limit_doc" as="kod_lim_doc" join="left outer" dname="kr_limit_sp">
          <call function="=">
            <column table="a" column="kod_lim_doc" />
            <column table="kod_lim_doc" column="kod_lim_doc" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_numobj" class="1" timestamp="08.08.2020 06:32:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_numobj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" key-dimension="kod_numobj" fact="kr_numobj_kod_numobj" agg="max" as="kod_numobj" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="kod_f23" type="number" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="объект тепловой ,электрический или единый" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="код тарифа" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_parent_sa" type="number" comment="код объекта договора которому принадлежит субабонет (если он not null, значит объект договора - субабонент )" as="kod_parent_sa" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kodagent" type="number" title="" comment="код субъекта деятельности" as="kodagent" reference="hk_agent" refcol="kodagent" key="0" />
        <column table="a" column="num_obj" type="number" title="Номер объекта договора" comment="номер объекта в списке объектов договора" is-fact="1" agg="list" as="num_obj" fact="kr_numobj_num_obj" key="0" />
        <column table="a" column="name" type="string" title="Наименование объекта договора" comment="наименование объекта в текущем договоре" as="name" key="0" />
        <column table="a" column="dat_create" type="date" title="" comment="дата  создания объекта в списке" dimension="dat_s" is-final-dimension="1" is-private-dimension="1" as="dat_create" key="0" />
        <column table="a" column="dat_fin" type="date" title="" comment="дата перевода объекта в архив в текущем договоре" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_fin" key="0" />
        <column table="a" column="prizn_prn" type="number" title="" comment="признак печати (определяет вид приложения)" as="prizn_prn" key="0" />
        <column table="a" column="kod_parent_obj" type="number" comment="код родительского объекта договора (от него наследуется система учета, схема энергоснабжения и т.д.)" as="kod_parent_obj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="корректировал пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата корректировки" as="d_m" key="0" />
        <column table="a" column="dat_replace" type="date" title="" comment="дата замены объекта (изменение принадлежности к договору)" as="dat_replace" key="0" />
        <column table="a" column="tel_ruk" type="string" title="" as="tel_ruk" key="0" />
        <column table="a" column="tel_glen" type="string" title="" as="tel_glen" key="0" />
        <column table="a" column="tel_deghen" type="string" title="" as="tel_deghen" key="0" />
        <column table="a" column="tel_degh" type="string" title="" as="tel_degh" key="0" />
        <column table="a" column="p" type="number" title="" comment="разрешенная к использованию нагрузка ( для субабонентов)" as="p" key="0" />
        <column table="a" column="kod_obj_fs" type="number" as="kod_obj_fs" reference="ks_obj_fs" refcol="kod_obj_fs" key="0" />
        <column table="a" column="kod_uslotkl" type="number" as="kod_uslotkl" reference="ks_uslotkl" refcol="kod_uslotkl" key="0" />
        <column table="a" column="algp" type="number" title="" comment="алгоритм расчета мощности ( 1 - 1-ставочный, 2 - двуставочный, 0 или null - по тарифу)" as="algp" key="0" />
        <column table="a" column="tlg_och" type="number" title="" comment="очередь откл. для тф" as="tlg_och" key="0" />
        <column table="a" column="kod_dopdoc" type="number" comment="код доп.док-та по принадл.эл.обор." as="kod_dopdoc" reference="kr_dopdoc" refcol="kod_dopdoc" key="0" />
        <column table="a" column="kodnaznhouse" type="number" title="" comment="назначение сооружения суба" as="kodnaznhouse" reference="hs_naznhouse" refcol="kodnaznhouse" key="0" />
        <column table="a" column="vkl530" type="number" title="" comment="эл. вкл. в перечень по огр. по пост.530" as="vkl530" key="0" />
        <column table="a" column="bezdog" type="number" title="" comment="бездоговорное использование" as="bezdog" key="0" />
        <column table="a" column="pr_sv_price" type="number" title="" comment="признак расчета по свободным ценам" as="pr_sv_price" key="0" />
        <column table="a" column="fio_ruk" type="string" title="" as="fio_ruk" key="0" />
        <column table="a" column="fio_deghen" type="string" title="" as="fio_deghen" key="0" />
        <column table="a" column="fio_degh" type="string" title="" as="fio_degh" key="0" />
        <column table="a" column="fio_glen" type="string" title="" as="fio_glen" key="0" />
        <column table="a" column="dat_plan_fin" type="date" title="" comment="планирумая дата окончания объекта" as="dat_plan_fin" key="0" />
        <column table="a" column="point_sale" type="string" title="" comment="описание точки поставки" as="point_sale" key="0" />
        <column table="a" column="divergence_percent" type="number" title="" comment="отклонение факт. расхода %" as="divergence_percent" key="0" />
        <column table="a" column="pr_avans" type="number" title="" comment="участие в авансах" as="pr_avans" key="0" />
        <column table="a" column="gr_point" type="number" title="" comment="0 - субабонент, 1 - группа точек, 2- одновременно и то и другое" as="gr_point" key="0" />
        <column table="a" column="inn_sa" type="string" title="" comment="инн субабонента" as="inn_sa" key="0" />
        <column table="a" column="russian_tel" type="number" title="" comment="флаг: должны ли номера долж. лиц по объекту соответствовать шаблону российского номера" as="russian_tel" key="0" />
        <column table="a" column="kodp_holder" type="number" title="" comment="код потребителя-держателя объекта" as="kodp_holder" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="dat_postav_obj" type="date" title="" as="dat_postav_obj" key="0" />
        <call function="nvl" as="kod_numobj_main" key="0">
          <column table="a" column="kod_parent_sa" />
          <column table="a" column="kod_numobj" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_numobj" as="a">
          <link name="kod_obj" dimension="1" as="kod_obj" table="kr_object" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj">
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="kr_dogovor" child="kr_numobj" field="kod_dog" parent="kr_dogovor" back="kr_numobj" title="Договор">
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="dr_point_rasx" dimension="1" as="dr_point_rasx" table="dr_point_rasx" child="dr_point_rasx" field="kod_numobj" parent="kr_numobj" back="dr_point_rasx" />
          <dlink name="hr_point_tar" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_point_tar" table="hr_point_tar" child="hr_point_tar" field="kod_numobj" parent="kr_numobj" back="hr_point_tar">
            <dimlink name="kod_point_ini" dimension="1" />
            <dimlink name="kod_point_rasx" dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="kr_object" as="kod_obj" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="kod_obj" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_holder" join="left outer" dname="kr_numobj" title="Абонент">
          <call function="=">
            <column table="a" column="kodp_holder" />
            <column table="kodp_holder" column="kodp" />
          </call>
        </query>
        <query name="hk_agent" as="kodagent" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kodagent" />
            <column table="kodagent" column="kodagent" />
          </call>
        </query>
        <query name="hs_23" as="kod_f23" join="left outer" dname="kr_numobj" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23" />
            <column table="kod_f23" column="kod_f23" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dopdoc" as="kod_dopdoc" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_dopdoc" />
            <column table="kod_dopdoc" column="kod_dopdoc" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_parent_obj" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_parent_obj" />
            <column table="kod_parent_obj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_parent_sa" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_parent_sa" />
            <column table="kod_parent_sa" column="kod_numobj" />
          </call>
        </query>
        <query name="ks_obj_fs" as="kod_obj_fs" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_obj_fs" />
            <column table="kod_obj_fs" column="kod_obj_fs" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="ks_uslotkl" as="kod_uslotkl" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kod_uslotkl" />
            <column table="kod_uslotkl" column="kod_uslotkl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="kr_numobj" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="hs_naznhouse" as="kodnaznhouse" join="left outer" dname="kr_numobj">
          <call function="=">
            <column table="a" column="kodnaznhouse" />
            <column table="kodnaznhouse" column="kodnaznhouse" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj_main" join="left outer" dname="kr_numobj_main">
          <call function="=">
            <column table="a" column="kod_numobj_main" />
            <column table="kod_numobj_main" column="kod_numobj" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_object" class="1" timestamp="08.08.2020 06:26:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_object.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj" type="number" comment="код потребителя" key-dimension="kod_obj" as="kod_obj" key="1" fixed="1" />
        <column table="a" column="kodd" type="number" title="" as="kodd" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kodnaznhouse" type="number" title="" as="kodnaznhouse" reference="hs_naznhouse" refcol="kodnaznhouse" key="0" />
        <column table="a" column="askue" type="number" title="" as="askue" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodnaznteplo" type="number" title="" as="kodnaznteplo" reference="ds_naznhouse" refcol="kodnaznteplo" key="0" />
        <column table="a" column="volume" type="number" title="" as="volume" key="0" />
        <column table="a" column="god_zd" type="number" title="" comment="1- до 1958 года; 0 - после 1958 года" as="god_zd" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="tvr" type="number" title="" as="tvr" key="0" />
        <column table="a" column="kod_tipprn" type="number" as="kod_tipprn" reference="ds_tipprn" refcol="kod_tipprn" key="0" />
        <column table="a" column="kod_tipprnsw" type="number" as="kod_tipprnsw" reference="ds_tipprn" refcol="kod_tipprn" key="0" />
        <column table="a" column="square" type="number" title="Общая площадь жилого помещения" comment="общая площадь кв.м." as="square" key="0" />
        <column table="a" column="askute" type="number" title="" as="askute" key="0" />
        <column table="a" column="kod_buil" type="number" comment="для коми" as="kod_buil" reference="kr_buil" refcol="kod_buil" key="0" />
        <column table="a" column="id_adres" type="string" title="" comment="быт : идентификатор адреса" as="id_adres" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="признак&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="tep_el_byt" type="number" title="" comment="признак для быта&#xA;0 -единый&#xA;1- электричество&#xA;2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_tjil" type="number" as="kod_tjil" key="0" />
        <column table="a" column="kod_stobj" type="number" as="kod_stobj" reference="tk_stobj" refcol="kod_stobj" key="0" />
        <column table="a" column="kol_kom" type="number" title="Количество комнат" as="kol_kom" key="0" />
        <column table="a" column="square_corn" type="number" title="" as="square_corn" key="0" />
        <column table="a" column="kod_tzone" type="number" comment="код зоны температур. зоной является район сф или город районного значения. информация получена из справочника &quot;населенных пунктов&quot;" as="kod_tzone" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="pref_nump" type="string" title="" comment="для казани - код рпу, для остальных код отделения" as="pref_nump" key="0" />
        <column table="a" column="kodp_seti" type="number" title="" comment="филиал ск" as="kodp_seti" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="square_odn" type="number" title="" comment="площадь одн кв.м." as="square_odn" key="0" />
        <column table="a" column="square_gil" type="number" title="" comment="жилая площадь кв.м." as="square_gil" key="0" />
        <column table="a" column="square_ngl" type="number" title="" comment="нежилая площадь кв.м." as="square_ngl" key="0" />
        <column table="a" column="num_book" type="string" title="" comment="№ книги" as="num_book" key="0" />
        <column table="a" column="square_oi" type="number" title="" comment="площадь общего имущества кв.м." as="square_oi" key="0" />
        <column table="a" column="kodd_house" type="number" title="" comment="содержит ключ &quot;дома&quot; из таблицы k_house. в столбце kodd может быть как ключ дома, так и ключ помещения, подъезда, квартиры." as="kodd_house" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="guid" type="string" title="" as="guid" key="0" />
        <const type="number" as="cnt" fact="kr_object_count" agg="sum" key="0">1</const>
        <call function="t_vl_vdr.get_vdr_calc_by_kod_obj" as="prizn_calc_cur_ym" key="0">
          <column table="a" column="kod_obj" />
          <useglobparam name="ym" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_object" as="a">
          <link name="kodd" dimension="1" as="kodd" table="k_house" child="kr_object" field="kodd" parent="k_house" back="kr_object" />
          <dlink name="kr_numobj" dimension="kod_numobj" as="kr_numobj" table="kr_numobj" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
          <dlink name="kr_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_numobj_mn" table="kr_numobj_mn" child="kr_numobj_mn" field="kod_obj" parent="kr_object" back="kr_numobj_mn">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="hr_point" dimension="1" as="hr_point" table="hr_point" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
            <dimlink name="kod_point_ini" dimension="1" />
            <dimlink name="kod_point_rasx" dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
        </table>
        <query name="adr_m" as="kod_tzone" join="left outer" dname="kr_object" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="kod_tzone" />
            <column table="kod_tzone" column="kod_m" />
          </call>
        </query>
        <query name="tk_stobj" as="kod_stobj" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kod_stobj" />
            <column table="kod_stobj" column="kod_stobj" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kr_buil" as="kod_buil" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kod_buil" />
            <column table="kod_buil" column="kod_buil" />
          </call>
        </query>
        <query name="kr_org" as="kodp_seti" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kodp_seti" />
            <column table="kodp_seti" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="k_house" as="kodd_house" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kodd_house" />
            <column table="kodd_house" column="kodd" />
          </call>
        </query>
        <query name="ds_naznhouse" as="kodnaznteplo" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kodnaznteplo" />
            <column table="kodnaznteplo" column="kodnaznteplo" />
          </call>
        </query>
        <query name="ds_tipprn" as="kod_tipprnsw" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kod_tipprnsw" />
            <column table="kod_tipprnsw" column="kod_tipprn" />
          </call>
        </query>
        <query name="ds_tipprn" as="kod_tipprn" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kod_tipprn" />
            <column table="kod_tipprn" column="kod_tipprn" />
          </call>
        </query>
        <query name="hs_naznhouse" as="kodnaznhouse" join="left outer" dname="kr_object">
          <call function="=">
            <column table="a" column="kodnaznhouse" />
            <column table="kodnaznhouse" column="kodnaznhouse" />
          </call>
        </query>
      </from>
      <params />
    </query>
    <query name="kr_org" class="1" timestamp="15.09.2017 15:42:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_org.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Отделение" as="name" key="0" />
        <column table="a" column="sname" type="string" title="" as="sname" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_separator" type="number" as="kod_separator" reference="kk_orgseparator" refcol="kod_separator" key="0" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="gruppa" type="number" title="" as="gruppa" key="0" />
        <column table="a" column="pref_fac" type="number" title="" comment="префикс № счета фактуры для данного&#xA;префикс № счета фактуры для данного подразделения эсб" as="pref_fac" key="0" />
        <column table="a" column="pref_doc" type="string" title="" comment="префикс к № док-тов для подразд" as="pref_doc" key="0" />
        <column table="a" column="tel" type="string" title="" as="tel" key="0" />
        <column table="a" column="fax" type="string" title="" as="fax" key="0" />
        <column table="a" column="email" type="string" title="" as="email" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="place" type="string" title="" as="place" key="0" />
        <column table="a" column="kod_org" type="number" comment="код подразделения" as="kod_org" key="0" />
        <column table="a" column="site" type="string" title="" comment="имя сайта" as="site" key="0" />
        <column table="a" column="info" type="string" title="" comment="информация для вывода в подвале извещения для бытовиков" as="info" key="0" />
        <column table="a" column="dog_service" type="number" title="" comment="может ли юл участвовать в договоре услуг: 1- да, 0 -нет" as="dog_service" key="0" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" key="0" />
        <column table="a" column="pr_active" type="number" title="" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <call function="true if not null" as="is_filial" title="Является филиалом" key="0">
          <column table="a" column="kod_parent" />
        </call>
        <call function="if" as="kodp_dep" key="0">
          <call function="le">
            <column table="a" column="kod_separator" />
            <const>2</const>
          </call>
          <column table="a" column="kodp" />
          <call function="podr_dep">
            <column table="a" column="kodp" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_org" as="a">
          <dlink name="kr_payer" dimension="1" as="kr_payer" table="kr_payer" child="kr_payer" field="kodp" parent="kr_org" back="kr_payer" title="Абонент" />
        </table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="kod_ecls" />
            <column table="kod_ecls" column="kod_ecls" />
          </call>
        </query>
        <query name="kk_orgseparator" as="kod_separator" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="kod_separator" />
            <column table="kod_separator" column="kod_separator" />
          </call>
        </query>
        <query name="kr_org" as="kod_parent" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kodp" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kr_org" as="kodp_dep" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="kodp_dep" />
            <column table="kodp_dep" column="kodp" />
          </call>
        </query>
        <query name="rr_uaa_read" as="rr_uaa_read" join="left outer" dname="kr_org">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="rr_uaa_read" column="podr" />
          </call>
        </query>
        <query name="kr_calc_dep_max" join="left outer" as="kr_calc_dep_max" dname="kr_org">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kr_calc_dep_max" column="dep" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_org_edo" class="1" timestamp="18.11.2016 17:55:59" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_org_edo.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" />
        <column table="a" column="kod_edo" type="number" comment="код оператора электронного документооборота (оэдо)" as="kod_edo" reference="kk_edo" refcol="kod_edo" />
        <column table="a" column="kod_uch_edo" type="string" comment="код продавца (покупателя) - уникальный код участника, присваиваемый оператором эдо, услугами которого пользуется продавец (покупатель)" as="kod_uch_edo" />
        <column table="a" column="kod_org_edo" type="number" comment="уник.код записи" as="kod_org_edo" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <call function="rowid" as="kr_org_edo_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_org_edo" as="a" />
        <query name="kr_org" as="kodp" join="left outer" dname="kr_org_edo">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_payer" join="left outer" dname="kr_org_edo" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp_payer" column="kodp" />
          </call>
        </query>
        <query name="kk_edo" as="kod_edo" join="left outer" dname="kr_org_edo">
          <call function="=">
            <column table="a" column="kod_edo" />
            <column table="kod_edo" column="kod_edo" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_org_group" class="1" timestamp="26.10.2017 17:56:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_org_group.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_org_group" type="number" comment="код группы" as="kod_org_group" reference="kk_org_group" refcol="kod" key="0" />
        <column table="a" column="kod_org" type="number" comment="код организации" as="kod_org" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="ym" type="number" title="" comment="период начала действия организации в данном статусе. период" as="ym" key="0" />
        <column table="a" column="pr_last" type="number" title="" comment="указывает, что данная запись в истории (см. ym) классификаторов организации (потребителя) является на данный момент последней (1 \ 0 = да \ нет)" as="pr_last" key="0" />
        <column table="kod_org_group" column="name" type="string" is-fact="1" agg="list" as="name" fact="kr_org_group_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_org_group" as="a">
          <dlink name="hr_eobject" dimension="1" is-final-dimension="1" is-private-dimension="1" as="hr_eobject" table="hr_eobject" child="hr_eobject" field="kod_org_group" parent="kr_org_group" back="hr_eobject">
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_pktippu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodd" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_sbyt" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="voltage_fact" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobj_src" dimension="1" is-final-dimension="1" is-private-dimension="1" as="eobj_id_eo" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="kk_org_group" as="kod_org_group" join="left outer" dname="kr_org_group">
          <call function="=">
            <column table="a" column="kod_org_group" />
            <column table="kod_org_group" column="kod" />
          </call>
        </query>
        <query name="kr_org" as="kod_org" join="left outer" dname="kr_org_group">
          <call function="=">
            <column table="a" column="kod_org" />
            <column table="kod_org" column="kodp" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="pr_last" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="kr_org_pair" class="1" timestamp="17.10.2017 19:54:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_org_pair.xml" haskeys="1">
      <select>
        <column table="a" column="kodp1" type="number" title="" comment="Код подразделения 1" key="1" as="dep" />
        <column table="a" column="kodp2" type="number" title="" comment="Код подразделения 2" as="kodp_net" reference="kr_org" refcol="kodp" />
        <column table="a" column="kod_usecase" type="number" comment="Вариант использования. По умолчанию &quot;1&quot; - соответствие филиала Cетевой организации расчетному подразделению Сетевой организации (или Сбыта).&#xA;Для usecase = 1: KODP1 - код расчетного отделения (KR_DOGOVOR.DEP); KODP2 - код филиала сетевой организации (HR_EOSRC_ELNET.KODP)" as="kod_usecase" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kr_org_pair" as="a" />
        <query name="kr_org" as="kodp" join="left inner" dname="kr_org_pair">
          <call function="=">
            <column table="a" column="kodp2" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left inner" dname="kr_org_pair">
          <call function="=">
            <column table="a" column="kodp1" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_usecase" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="kr_payer" title="Абонент" class="1" name-field-name="num_name" timestamp="09.06.2023 15:13:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_payer.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" comment="уник. код абонента" fact="kr_payer_kodp" agg="max" as="kodp" key="1" fixed="1" />
        <column table="a" column="nump" type="string" title="Код абонента" comment="номер абонента" vid="1" is-name="1" as="nump" key="0" />
        <column table="a" column="name" type="string" title="Наименование абонента" comment="наименование" vid="1" is-name="1" is-fact="1" agg="list" as="name" fact="kr_payer_name" key="0" />
        <column table="a" column="inn" type="string" title="ИНН" comment="инн" as="inn" key="0" />
        <column table="a" column="kod_d" type="number" comment="код дома адреса физического" as="kod_d" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kod_d_ur" type="number" comment="код дома адреса юридического" as="kod_d_ur" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kod_fs" type="number" comment="форма собственности" as="kod_fs" reference="ks_fs" refcol="kod_fs" key="0" />
        <column table="a" column="kod_m" type="number" comment="министерство" as="kod_m" reference="ks_ministry" refcol="kod_m" key="0" />
        <column table="a" column="kod_otrasl" type="number" comment="отрасль" as="kod_otrasl" reference="ks_otrasl" refcol="kod_otrasl" key="0" />
        <column table="a" column="kod_ecls" type="number" comment="классификатор организация-энергосистема" as="kod_ecls" key="0" />
        <column table="a" column="dat_udal" type="date" title="" comment="дата сброса в архив" dimension="dat_po" is-final-dimension="1" is-private-dimension="1" as="dat_udal" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="юзер, сделавший посл. корректировку" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата последней корректировки" as="d_m" key="0" />
        <column table="a" column="allname" type="string" title="" comment="полное наименование" as="allname" key="0" />
        <column table="a" column="prizn_activ" type="number" title="" comment="0-действующий,1-удален,2-преддоговорной" as="prizn_activ" key="0" />
        <column table="a" column="kod_okved" type="number" comment="оквд" as="kod_okved" reference="ks_okved" refcol="kod_okved" key="0" />
        <column table="a" column="kod_reg" type="number" comment="код района адреса юридического" as="kod_reg" reference="kv_region" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="тариф за транспорт эл энергии" as="tarif" key="0" />
        <column table="a" column="kod_busin" type="number" comment="основание для прекращ.деятельности" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="pref_nump" type="string" title="" comment="для казани - код рпу, для остальных код отделения" as="pref_nump" key="0" />
        <column table="a" column="okpo" type="string" title="" comment="окпо" as="okpo" key="0" />
        <column table="a" column="ogrn" type="string" title="ОГРН" comment="огрн" as="ogrn" key="0" />
        <column table="a" column="kod_d_p" type="number" comment="код адреса для переписки платежных документов" as="kod_d_p" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="adres_pd" type="string" title="" comment="текстом адрес для печати в плат.док-тах" as="adres_pd" key="0" />
        <column table="a" column="pr_adres_pd" type="number" title="" comment="1 - адрес по коду, 0 -адрес, указанный в настройках пд" as="pr_adres_pd" key="0" />
        <column table="a" column="tmp_kpp" type="string" title="" comment="не используется" as="tmp_kpp" key="0" />
        <column table="a" column="kpp" type="string" title="КПП" comment="кпп" as="kpp" reference="kk_sulst" refcol="type_sulst" key="0" />
        <column table="a" column="portal" type="number" title="" comment="личный кабинет" as="portal" key="0" />
        <column table="a" column="uin" type="number" title="" comment="для барнаула: uin (индивидуальный идентификационный номер) бытового абонента, равен kodp, дополненному слева контрольной цифрой" as="uin" key="0" />
        <column table="a" column="src_mode" type="number" title="" comment="модуль 0 - исэ, 1-ппэ, 2 - единый (используется только для ленэнерго)" as="src_mode" key="0" />
        <column table="a" column="pr_rezident_rf" type="number" title="" comment="1 - резидент рф, 0 - нерезидент рф" as="pr_rezident_rf" key="0" />
        <column table="a" column="egrul_cert_num" type="string" title="" comment="свидетельство о регистрации в егрюл" as="egrul_cert_num" key="0" />
        <column table="a" column="egrul_cert_date" type="date" title="" comment="дата выдачи св-ва о регистрации в егрюл" as="egrul_cert_date" key="0" />
        <column table="a" column="egrul_organ" type="string" title="" comment="наимен. органа, выдавшего свид-во егрюл" as="egrul_organ" key="0" />
        <column table="a" column="check_inn" type="number" title="" comment="рез-т проверки инн на сайте фнс: 0- не проводилась, 1- успешно, 2- ошибка" as="check_inn" key="0" />
        <column table="a" column="dat_check_inn" type="date" title="" comment="дата проверки инн на сайте фнс" as="dat_check_inn" key="0" />
        <column table="kod_dog" column="dep" as="dep" dgroup="max" key="0" />
        <column table="kod_dog" column="tep_el" as="tep_el" dgroup="max" key="0" />
        <column table="kod_dog" column="kod_abon_type" as="kod_abon_type" dgroup="max" key="0" />
        <column table="kod_dog" column="abon_type_name" as="abon_type_name" dgroup="min" key="0" />
        <call function="||" as="num_name" title="Абонент" key="0">
          <column table="this" column="nump" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <column table="a" column="ac_egr_status" type="string" title="Код статуса по справочнику СЮЛСТ/СИПСТ" as="ac_egr_status" key="0" />
        <column table="a" column="ac_egr_status_name" type="string" title="чнику СЮЛСТ/СИПСТ" as="ac_egr_status_name" key="0" />
        <column table="a" column="ac_egr_sulpd" type="string" title="Код статуса по справочнику СЮЛПД" as="ac_egr_sulpd" key="0" />
        <column table="a" column="ac_egr_sulpd_name" type="string" title="Статус по справочнику СЮЛПД" as="ac_egr_sulpd_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <call function="||" as="sp_col_name" title="" key="0">
          <column table="a" column="nump" type="string" title="Код абонента" comment="номер абонента" vid="1" is-name="1" />
          <const>' '</const>
          <column table="a" column="name" type="string" title="Наименование абонента" comment="наименование" vid="1" is-name="1" is-fact="1" agg="list" />
        </call>
      </select>
      <from>
        <table name="kr_payer" as="a" title="Абонент">
          <link name="kod_otrasl" as="kod_otrasl" table="ks_otrasl" child="kr_payer" field="kod_otrasl" parent="ks_otrasl" back="kr_payer" title="Отрасли">
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dlink name="kr_dogovor" as="kod_dog" dimension="1" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_numobj_mn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="day_pokaz" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_seti" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="eobj_id" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_parent_eo" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_srckind" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_bal" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp_elter" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_org_group" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_eobject_senter_nut" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_point_pu" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_v" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_elnet" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_s" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="point_dat_po" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_point_har" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="kr_employee" dimension="1" as="kr_employee" table="kr_employee" child="kr_employee" field="kodp_payer" parent="kr_payer" back="kr_employee" />
          <dlink name="sr_opl_bank" dimension="1" as="sr_opl_bank" table="sr_opl_bank" child="sr_opl_bank" field="kodp" parent="kr_payer" back="sr_opl_bank" />
          <dlink name="kr_org_edo" dimension="1" is-final-dimension="1" as="kr_org_edo" table="kr_org_edo" child="kr_org_edo" field="kodp_payer" parent="kr_payer" back="kr_org_edo" />
          <dlink name="ur_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_folders" table="ur_folders" child="ur_folders" field="kodp" parent="kr_payer" back="ur_folders" title="Папка">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" as="ur_folders_kodp" table="ur_folders_kodp" child="ur_folders_kodp" field="kodp" parent="kr_payer" back="ur_folders_kodp" />
        </table>
        <query name="kr_org" as="kodp" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_fs" as="kod_fs" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_payer" title="Форма собственности">
          <call function="=">
            <column table="a" column="kod_fs" />
            <column table="kod_fs" column="kod_fs" />
          </call>
        </query>
        <query name="ks_ministry" as="kod_m" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_payer" title="Министерство">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="ks_okved" as="kod_okved" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_payer">
          <call function="=">
            <column table="a" column="kod_okved" />
            <column table="kod_okved" column="kod_okved" />
          </call>
        </query>
        <query name="ks_otrasl" as="kod_otrasl" join="left outer" dimension="1" dname="kr_payer" title="Отрасли">
          <call function="=">
            <column table="a" column="kod_otrasl" />
            <column table="kod_otrasl" column="kod_otrasl" />
          </call>
          <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </query>
        <query name="kk_cls" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kk_cls" dname="kr_payer">
          <call function="=">
            <column table="kk_cls" column="kod_ecls" />
            <column table="this" column="kod_ecls" />
          </call>
        </query>
        <query name="k_house" as="kod_d" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="a" column="kod_d" />
            <column table="kod_d" column="kodd" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="kr_payer" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="kv_region" as="kod_reg" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="a" column="kod_reg" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="k_house" as="kod_d_p" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="a" column="kod_d_p" />
            <column table="kod_d_p" column="kodd" />
          </call>
        </query>
        <query name="k_house" as="kod_d_ur" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="a" column="kod_d_ur" />
            <column table="kod_d_ur" column="kodd" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="this" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer_nsi" join="left outer" as="kodp_nsi" dname="kr_payer">
          <call function="=">
            <column table="this" column="kodp" />
            <column table="kodp_nsi" column="kodp" />
          </call>
        </query>
        <query name="kk_sulst" as="udo" join="left outer" dname="kr_payer">
          <call function="and">
            <call function="=">
              <column table="udo" column="type_sulst" />
              <call function="if">
                <call function="is null">
                  <column table="a" column="kpp" />
                </call>
                <const type="string">'ИП'</const>
                <const type="string">'ЮЛ'</const>
              </call>
            </call>
            <call function="=">
              <column table="this" column="ac_egr_status" />
              <column table="udo" column="sulst" />
            </call>
          </call>
        </query>
        <query name="kk_sulst" as="udo1" join="left outer" dname="kr_payer">
          <call function="=">
            <column table="this" column="ac_egr_sulpd" />
            <column table="udo1" column="sulst" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_payer_nsi" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_payer_nsi.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="1" fixed="1"></column>
        <column table="a" column="kod_komit" type="number" as="kod_komit" reference="ks_komit_tgk" refcol="kod_komit" key="0"></column>
        <column table="a" column="kod_otr" type="number" as="kod_otr" reference="ks_otrasl_tgk" refcol="kod_otr" key="0"></column>
        <column table="a" column="gor_obl" type="number" title="" comment="0-город,1-область" as="gor_obl" key="0"></column>
        <column table="a" column="soato" type="string" title="" comment="для москвы: соато" as="soato" key="0"></column>
        <column table="a" column="soogu" type="string" title="" comment="для москвы: соогу" as="soogu" key="0"></column>
        <column table="a" column="kopf" type="string" title="" comment="для москвы: копф" as="kopf" key="0"></column>
        <column table="a" column="group_stat" type="number" title="" comment="группа статистики (из спр.тарифов)" as="group_stat" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="kod_d_p" type="number" comment="адрес для переписки (москва)" as="kod_d_p" key="0"></column>
        <column table="a" column="kod_pdgs" type="number" comment="(москва) подгруппа статистики" as="kod_pdgs" reference="ks_pdgs" refcol="kod_pdgs" key="0"></column>
        <column table="a" column="kod_kbk" type="number" comment="(москва) код бюджетной классификации" as="kod_kbk" reference="ks_kbk" refcol="kod_kbk" key="0"></column>
        <column table="a" column="nerez" type="number" title="" as="nerez" key="0"></column>
        <column table="a" column="adres_ur" type="string" title="" as="adres_ur" key="0"></column>
        <column table="a" column="adres_f" type="string" title="" as="adres_f" key="0"></column>
        <column table="a" column="egrul_number" type="string" title="" as="egrul_number" key="0"></column>
        <column table="a" column="egrul_data" type="date" title="" as="egrul_data" key="0"></column>
        <column table="a" column="egrul_issued" type="string" title="" as="egrul_issued" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_payer_nsi" as="a"></table>
        <query name="kr_payer" as="kodp" join="left outer" dname="kr_payer_nsi" title="Абонент">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="ks_otrasl_tgk" as="kod_otr" join="left outer" dname="kr_payer_nsi">
          <call function="=">
            <column table="a" column="kod_otr"></column>
            <column table="kod_otr" column="kod_otr"></column>
          </call>
        </query>
        <query name="ks_komit_tgk" as="kod_komit" join="left outer" dname="kr_payer_nsi">
          <call function="=">
            <column table="a" column="kod_komit"></column>
            <column table="kod_komit" column="kod_komit"></column>
          </call>
        </query>
        <query name="ks_tarif" as="group_stat" join="left outer" dname="kr_payer_nsi">
          <call function="=">
            <column table="a" column="group_stat"></column>
            <column table="group_stat" column="tarif"></column>
          </call>
        </query>
        <query name="ks_pdgs" as="kod_pdgs" join="left outer" dname="kr_payer_nsi">
          <call function="=">
            <column table="a" column="kod_pdgs"></column>
            <column table="kod_pdgs" column="kod_pdgs"></column>
          </call>
        </query>
        <query name="ks_kbk" as="kod_kbk" join="left outer" dname="kr_payer_nsi">
          <call function="=">
            <column table="a" column="kod_kbk"></column>
            <column table="kod_kbk" column="kod_kbk"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_plan" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_plan.xml" haskeys="1">
      <select>
        <column table="a" column="kod_plan" type="number" as="kod_plan" key="1" fixed="1"></column>
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0"></column>
        <column table="a" column="status" type="number" title="" as="status" key="0"></column>
        <column table="a" column="ym_s" type="number" title="" as="ym_s" key="0"></column>
        <column table="a" column="ym_po" type="number" title="" as="ym_po" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="kod_type_plan" type="number" as="kod_type_plan" reference="kk_type_tarif_plan" refcol="kod_type_plan" key="0"></column>
        <column table="a" column="kod_type_pes" type="number" as="kod_type_pes" reference="kk_type_pes" refcol="kod_type_pes" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_plan" as="a"></table>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="kr_plan">
          <call function="=">
            <column table="a" column="kod_numobj"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
        <query name="kk_type_tarif_plan" as="kod_type_plan" join="left outer" dname="kr_plan">
          <call function="=">
            <column table="a" column="kod_type_plan"></column>
            <column table="kod_type_plan" column="kod_type_plan"></column>
          </call>
        </query>
        <query name="kk_type_pes" as="kod_type_pes" join="left outer" dname="kr_plan">
          <call function="=">
            <column table="a" column="kod_type_pes"></column>
            <column table="kod_type_pes" column="kod_type_pes"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_plan_sost" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_plan_sost.xml" haskeys="1">
      <select>
        <column table="a" column="kod_plan" type="number" as="kod_plan" key="1" fixed="1"></column>
        <column table="a" column="tip_tarif_sost" type="number" title="" as="tip_tarif_sost" reference="kk_tarif_sost" refcol="tip_tarif_sost" key="0"></column>
        <column table="a" column="tarif" type="number" title="" as="tarif" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_plan_sost" as="a"></table>
        <query name="kk_tarif_sost" as="tip_tarif_sost" join="left outer" dname="kr_plan_sost">
          <call function="=">
            <column table="a" column="tip_tarif_sost"></column>
            <column table="tip_tarif_sost" column="tip_tarif_sost"></column>
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="kr_plan_sost">
          <call function="=">
            <column table="a" column="tarif"></column>
            <column table="tarif" column="tarif"></column>
          </call>
        </query>
        <query name="kr_plan" as="kod_plan" join="left outer" dname="kr_plan_sost">
          <call function="=">
            <column table="a" column="kod_plan"></column>
            <column table="kod_plan" column="kod_plan"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="kr_predabon" class="1" timestamp="19.06.2017 06:38:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_predabon.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pred" type="number" comment="код предупредит телефонограммы" is-fact="1" agg="max" as="kod_pred" fact="kr_predabon_kod_pred" key="1" fixed="1" />
        <column table="a" column="pr_arx" type="number" title="" comment="признак архивной тф: 1-архивная" as="pr_arx" key="0" />
        <column table="a" column="kod_emp" type="number" comment="фио подписавшего телефонограмму" as="kod_emp" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_isp" type="number" comment="код сведений об исполнении" as="kod_isp" reference="ks_sved" refcol="kod_isp" key="0" />
        <column table="a" column="elpotr" type="number" title="" comment="среднее электро (тепло) потребление за последние 3 месяца (руб.)" as="elpotr" key="0" />
        <column table="a" column="dolg" type="number" title="" comment="задолженность по основной реализации" as="dolg" key="0" />
        <column table="a" column="peni" type="number" title="" comment="задолженность по пени" as="peni" key="0" />
        <column table="a" column="straf" type="number" title="" comment="задолженность по штрафам" as="straf" key="0" />
        <column table="a" column="morat" type="number" title="" comment="мораторская задолженность" as="morat" key="0" />
        <column table="a" column="avans" type="number" title="" comment="задолженность по авансам" agg="sum" is-fact="1" as="avans" fact="kr_predabon_avans" key="0" />
        <column table="a" column="nkredit" type="number" title="" comment="недошедшие кредиты" as="nkredit" key="0" />
        <column table="a" column="otozv_sum" type="number" title="" comment="отозванная сумма" as="otozv_sum" key="0" />
        <column table="a" column="otsr_sum" type="number" title="" comment="отсроченная сумма" as="otsr_sum" key="0" />
        <column table="a" column="nerazn_opl" type="number" title="" comment="неразнесенная оплата" as="nerazn_opl" key="0" />
        <column table="a" column="nom_tlg" type="string" title="" comment="№ телефонограммы" as="nom_tlg" key="0" />
        <column table="a" column="dat_tlg" type="date" title="" comment="дата телефонограммы" as="dat_tlg" key="0" />
        <column table="a" column="period" type="string" title="" comment="период задолженности по осн реализации" as="period" key="0" />
        <column table="a" column="dat_ras" type="date" title="" comment="дата расчета задолженности" dimension="dat" as="dat_ras" key="0" />
        <column table="a" column="dat_otkl" type="date" title="" comment="дата планируемого ограничения (отключения)" as="dat_otkl" key="0" />
        <column table="a" column="kod_otkloper" type="number" comment="код операции (ограничение или отключение)" as="kod_otkloper" reference="kk_otkloper" refcol="kod_otkloper" key="0" />
        <column table="a" column="nom_pltr" type="string" title="" comment="№ долговых платежных требований" as="nom_pltr" key="0" />
        <column table="a" column="notes" type="string" title="" comment="примечания" as="notes" key="0" />
        <column table="a" column="pr_raschet" type="number" title="" comment="признак расчетов за последние 3 месяца: 1-расчеты производились" as="pr_raschet" key="0" />
        <column table="a" column="pr_kredit" type="number" title="" comment="способ расчета задолженности: 0-без учета недошедших, 1-с учетом недошедших кредитов" as="pr_kredit" key="0" />
        <column table="a" column="kol_per" type="number" title="" comment="кол-во периодов задолженности по основной реализации" as="kol_per" key="0" />
        <column table="a" column="kol_per_all" type="number" title="" comment="общее кол-во периодов задолженности" as="kol_per_all" key="0" />
        <column table="a" column="dat_rep" type="date" title="" comment="дата отчета" as="dat_rep" key="0" />
        <column table="a" column="dat_send" type="date" title="" comment="дата отравки" as="dat_send" key="0" />
        <column table="a" column="dat_opl" type="date" title="" comment="дата оплаты" as="dat_opl" key="0" />
        <column table="a" column="kod_whyotkl" type="number" comment="код причины отключения (ограничения)" as="kod_whyotkl" reference="ks_whyotkl" refcol="kod_whyotkl" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код оу" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="0-единый   1-эл-во    2-тепло" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_tf_isp" type="number" comment="код исполнителя тф" as="kod_tf_isp" reference="ks_tf_isp" refcol="kod_tf_isp" key="0" />
        <column table="a" column="kod_prich" type="number" comment="код причины записи в архив" as="kod_prich" reference="ks_prich_arx" refcol="kod_prich" key="0" />
        <column table="a" column="tep_el_byt" type="number" title="" comment="тип договора (для населения)" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="dat_include" type="date" title="" comment="дата включения в текущий список" as="dat_include" key="0" />
        <column table="a" column="dat_arx" type="date" title="" comment="дата архивации" as="dat_arx" key="0" />
        <column table="a" column="dat_z" type="date" title="" comment="дата заявки" as="dat_z" key="0" />
        <column table="a" column="nom_z" type="string" title="" comment="номер заявки" as="nom_z" key="0" />
        <column table="a" column="dat_dolg" type="date" title="" comment="дата начала задолженности по осн. реализации" as="dat_dolg" key="0" />
        <column table="a" column="period_all" type="string" title="" comment="общий период задолженности" as="period_all" key="0" />
        <column table="a" column="kol_ndoc" type="number" title="" comment="кол-во неоплаченных платежных документов" as="kol_ndoc" key="0" />
        <column table="a" column="period_avans" type="string" title="" comment="период задолженности по авансам" as="period_avans" key="0" />
        <column table="a" column="period_straf" type="string" title="" comment="период задолженности по штрафам" as="period_straf" key="0" />
        <column table="a" column="money_rs" type="number" title="" comment="деньги на р/с (руб.)" as="money_rs" key="0" />
        <column table="a" column="avizo" type="number" title="" comment="авизо (руб.)" as="avizo" key="0" />
        <column table="a" column="kod_obj_emp" type="number" comment="код исполнителя уведомлений (казань)" as="kod_obj_emp" reference="kr_dogobj_emp" refcol="kod_obj_emp" key="0" />
        <column table="a" column="sum_usl_vozobn" type="number" title="" comment="сумма услуг по возобновл. реж. теплопотребл." as="sum_usl_vozobn" key="0" />
        <column table="a" column="dpp" type="number" title="" comment="дпп" as="dpp" key="0" />
        <column table="a" column="prom_plat1" type="number" title="" comment="1-й промежуточный платеж" agg="sum" is-fact="1" as="prom_plat1" fact="kr_predabon_prom_plat1" key="0" />
        <column table="a" column="prom_plat2" type="number" title="" comment="2-й промежуточный платеж" agg="sum" is-fact="1" as="prom_plat2" fact="kr_predabon_prom_plat2" key="0" />
        <column table="a" column="type_uved" type="string" title="" comment="тип уведомления - для барнаула" as="type_uved" key="0" />
        <column table="a" column="time_otkl" type="string" title="" comment="время планир отключения - тепло казань" as="time_otkl" key="0" />
        <column table="a" column="vsego" type="number" title="" comment="общая задолженность (томск)" as="vsego" key="0" />
        <column table="a" column="method_dost" type="number" title="" comment="метод доставки уведомления: 1-письмом, 2-курьером" as="method_dost" key="0" />
        <column table="a" column="nom_acts" type="string" title="" comment="номера и даты составленных актов (ленэнерго)" as="nom_acts" key="0" />
        <column table="a" column="okon_plat" type="number" title="" comment="окончательный платеж за предыд месяц (казань)" agg="sum" is-fact="1" as="okon_plat" fact="kr_predabon_okon_plat" key="0" />
        <column table="a" column="list_adr_obj" type="string" title="" comment="список адресов объектов по актам (ленэнерго)" as="list_adr_obj" key="0" />
        <column table="a" column="list_adr_pochta_obj" type="string" title="" comment="список почтовых адресов объектов по актам (ленэнерго)" as="list_adr_pochta_obj" key="0" />
        <column table="a" column="osn_dolg" type="number" title="" comment="основной долг (базовая часть) казань" is-fact="1" agg="sum" as="osn_dolg" fact="kr_predabon_osn_dolg" key="0" />
        <column table="a" column="prom_plat18" type="string" title="" comment="% и сумма 18 числа (казань)" as="prom_plat18" key="0" />
        <column table="a" column="prom_plat25" type="string" title="" comment="% и сумма 25 числа (казань)" as="prom_plat25" key="0" />
        <column table="a" column="vsego_nachisl" type="number" title="" comment="всего начислено (ленэнерго)" as="vsego_nachisl" key="0" />
        <column table="a" column="vsego_uved" type="number" title="" comment="общая задолженность в уведомлении (казань)" as="vsego_uved" key="0" />
        <column table="a" column="dolg_uved" type="number" title="" comment="основной долг в уведомлении (казань)" as="dolg_uved" key="0" />
        <column table="a" column="prom_plat_uved" type="number" title="" comment="промежуточный платеж в уведомлении (казань)" as="prom_plat_uved" key="0" />
        <column table="a" column="pereplata" type="number" title="" comment="переплата (казань)" agg="sum" is-fact="1" as="pereplata" fact="kr_predabon_pereplata" key="0" />
        <column table="a" column="dolg_no_per" type="number" title="" comment="задолженность по основной реализ без учета переплаты (казань)" agg="sum" is-fact="1" as="dolg_no_per" fact="kr_predabon_dolg_no_per" key="0" />
        <column table="a" column="nom_pret" type="string" title="" comment="номер претензии (алтай)" as="nom_pret" key="0" />
        <column table="a" column="dat_pret" type="date" title="" comment="дата претензии (алтай)" as="dat_pret" key="0" />
        <column table="a" column="str_sf" type="string" title="" comment="коды долговых счетов фактур" as="str_sf" key="0" />
        <column table="a" column="str_sf_uved" type="string" title="" comment="коды долговых счетов фактур в уведомлении" as="str_sf_uved" key="0" />
        <column table="a" column="sved_isp" type="string" title="" comment="сведения об исполнении казань тепло" as="sved_isp" key="0" />
        <column table="a" column="type_avans" type="number" title="" comment="0 – авансы у договора не 30,40% или &gt;0 – авансы у договора 30,40% (казань)" as="type_avans" key="0" />
        <call function="if" as="pr_last_on_dat" type="number" key="0">
          <call function="=">
            <column table="this" column="kod_pred" />
            <call function="over">
              <call function="last_value">
                <column table="this" column="kod_pred" />
              </call>
              <call function="partition by">
                <column table="this" column="kod_dog" />
                <call function="trunc">
                  <column table="this" column="dat_ras" />
                </call>
              </call>
              <call function="order by rows * *">
                <column table="this" column="d_m" />
              </call>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_predabon" as="a" />
        <query name="ks_prich_arx" as="kod_prich" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_prich" />
            <column table="kod_prich" column="kod_prich" />
          </call>
        </query>
        <query name="ks_sved" as="kod_isp" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="ks_tf_isp" as="kod_tf_isp" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_tf_isp" />
            <column table="kod_tf_isp" column="kod_tf_isp" />
          </call>
        </query>
        <query name="ks_whyotkl" as="kod_whyotkl" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_whyotkl" />
            <column table="kod_whyotkl" column="kod_whyotkl" />
          </call>
        </query>
        <query name="kk_otkloper" as="kod_otkloper" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_otkloper" />
            <column table="kod_otkloper" column="kod_otkloper" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogobj_emp" as="kod_obj_emp" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="kod_obj_emp" />
            <column table="kod_obj_emp" column="kod_obj_emp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="kr_predabon" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="kr_predabon">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="kr_predabon" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_pret" class="1" title="Претензия" timestamp="20.02.2022 02:18:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_pret.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pret" type="number" comment="код претензии" as="kod_pret" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="код договора" vid="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код отделения" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="status" type="number" title="" comment="0-сформирована, 1-напечатана, 2-архив" as="status" key="0" />
        <column table="a" column="nom_pret" title="Номер" type="string" comment="Номер претензии" as="nom_pret" key="0" />
        <column table="a" column="dat_form" type="date" title="Дата формирования" comment="дата формирования претензии" agg="max" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_form" key="0" />
        <column table="a" column="dat_send" type="date" title="Дата отправки" comment="дата отправки абоненту" is-fact="1" agg="min" as="dat_send" fact="kr_pret_dat_send" key="0" />
        <column table="a" column="sposob" type="number" title="" comment="0-эдо, 1-нарочно, 2-почта, 3-иное" as="sposob" key="0" />
        <column table="a" column="dat_poluch" type="date" title="Дата получения абонентом" comment="дата получения абонентом" as="dat_poluch" key="0" />
        <column table="a" column="puser" type="string" title="" comment="пользователь, сформировавший претензию" as="puser" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код исполнителя претензии" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_pret_dolg_dog" type="number" comment="ссылка на задолженность" as="kod_pret_dolg_dog" reference="vr_pret_dolg_dog" refcol="kod_pret_dolg_dog" key="0" />
        <column table="a" column="dat_arx" type="date" title="Дата переноса в архив" comment="дата переноса в архив" as="dat_arx" key="0" />
        <call function="date to char" as="name" title="Дата формирования" is-name="1" vid="1" key="0">
          <column table="this" column="dat_form" />
        </call>
        <call function="decode" type="string" as="status_name" title="Статус" key="0">
          <column table="this" column="status" />
          <const>0</const>
          <const>'сформирована'</const>
          <const>1</const>
          <const>'напечатана'</const>
          <const>2</const>
          <const>'архив'</const>
        </call>
        <call function="decode" type="string" as="sposob_name" title="Способ отправки" key="0">
          <column table="this" column="status" />
          <const>0</const>
          <const>'эдо'</const>
          <const>1</const>
          <const>'нарочно'</const>
          <const>2</const>
          <const>'почта'</const>
          <const>3</const>
          <const>'иное'</const>
        </call>
        <column table="a" column="v_sud" type="number" title="Признак передачи в суд" comment="Признак передачи в суд" as="v_sud" key="0" />
        <call function="decode" type="string" as="v_sud_string" title="Признак передачи в суд" key="0">
          <column table="a" column="v_sud" />
          <const type="number">1</const>
          <const type="string">'Да'</const>
          <const type="number">0</const>
          <const type="string">'Нет'</const>
        </call>
        <column table="a" column="DAT_PRD_UR" type="date" title="Дата передачи в работу юристам" comment="Дата передачи в работу юристам" as="DAT_PRD_UR" key="0" />
        <column table="a" column="DAT_IZM_STATUS_UR" type="date" title="Дата изменения юридического статуса" comment="Дата изменения юридического статуса" as="DAT_IZM_STATUS_UR" key="0" />
        <column table="a" column="STATUS_UR" type="number" title="Юридический статус: 1-передано, 2-принято, 3-отклонено" comment="Юридический статус: 1-передано, 2-принято, 3-отклонено" as="STATUS_UR" key="0" />
        <call function="decode" type="string" as="STATUS_UR_STRING" title="Юридический статус" key="0">
          <column table="a" column="STATUS_UR" title="Юридический статус" />
          <const>1</const>
          <const type="string">'Передано'</const>
          <const>2</const>
          <const type="string">'Принято'</const>
          <const>3</const>
          <const type="string">'Отклонено'</const>
        </call>
        <const type="number" as="cnt" agg="sum" is-fact="1" fact="kr_pret_cnt" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_pret" as="a" title="Претензия">
          <dlink name="ur_pret" is-private-dimension="1" dimension="1" is-final-dimension="1" as="ur_pret" table="ur_pret" child="ur_pret" field="kod_pret" parent="kr_pret" back="ur_pret" title="Претензия в юр. карточке" />
          <link name="kod_pret_dolg_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_pret_dolg_dog" table="vr_pret_dolg_dog" child="kr_pret" field="kod_pret_dolg_dog" parent="vr_pret_dolg_dog" back="kr_pret">
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="kr_dogovor" as="kod_dog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="kr_pret" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="kr_pret">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="kr_pret">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="vr_pret_dolg_dog" as="kod_pret_dolg_dog" join="left outer" dname="kr_pret">
          <call function="=">
            <column table="a" column="kod_pret_dolg_dog" />
            <column table="kod_pret_dolg_dog" column="kod_pret_dolg_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_spras" class="1" timestamp="09.03.2017 21:14:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_spras.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="ym" type="number" title="" dimension="ym" as="ym" key="0" />
        <column table="a" column="vid_tehn" type="number" title="" comment="вид технологии обработки(0-изв.1-аб.)" agg-cml="last_value" fact="kr_spras_vid_tehn" agg="max" as="vid_tehn" reference="kr_spras_vid_tehn" refcol="vid_tehn" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_spras" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="kr_spras" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_spras_vid_tehn" as="vid_tehn" join="left outer" dname="kr_spras">
          <call function="=">
            <column table="a" column="vid_tehn" />
            <column table="vid_tehn" column="vid_tehn" />
          </call>
        </query>
      </from>
    </query>
    <query name="kr_vist_day" class="1" timestamp="11.11.2016 13:18:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kr_vist_day.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vist_day" type="number" as="kod_vist_day" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="day" type="number" title="" comment="день выставления.&#xD;&#xA;0 - вместе с осн." as="day" key="0" />
        <column table="a" column="perc" type="number" title="" comment=" % или абс.величина" as="perc" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="платеж по теплу или эл-ву" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vid_avans" type="number" title="" comment="код выставляемого промежут.платежа или аванса" as="vid_avans" reference="sk_vid_avans" refcol="vid_avans" key="0" />
        <column table="a" column="period" type="string" title="" as="period" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="pr_vist_av" type="number" title="" comment="признак выставления аванса:0 -под текущий 1- следующий 2- под через мес" as="pr_vist_av" key="0" />
        <column table="a" column="pr_uch_av" type="number" title="" comment="признак учета аванса, не используется, по умолчанию 0" as="pr_uch_av" key="0" />
        <column table="a" column="nazn_plat1" type="string" title="" comment="sk_vid_avans.name_vid_t" as="nazn_plat1" key="0" />
        <column table="a" column="nazn_plat2" type="string" title="" comment="sk_nachisl.name_pech" as="nazn_plat2" key="0" />
        <column table="a" column="pr_rasch_av" type="number" title="" comment="признак расчета аванса:0-по фиксир.ценам;1-по своб.ценам прогнозным;2-по своб.ценам прошл.месяца;3-по средневзвешенной цене" as="pr_rasch_av" key="0" />
        <column table="a" column="ago_fact" type="number" title="" comment="за какой месяц брать факт. реализацию, для рпсчета аванса по факту. текущий период минус значение этого поля" as="ago_fact" key="0" />
        <column table="a" column="shift_price" type="number" title="" comment="за какой месяц брать тариф для расчета аванса по свободным ценам" as="shift_price" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_state" type="number" as="kod_state" reference="ss_state" refcol="kod_state" key="0" />
        <column table="a" column="kod_bez_prich" type="number" as="kod_bez_prich" reference="ks_bezakcept_prich" refcol="kod_bez_prich" key="0" />
        <column table="a" column="pr_avans_umen" type="number" title="" as="pr_avans_umen" key="0" />
        <column table="a" column="gru_pl" type="number" title="" as="gru_pl" key="0" />
        <column table="a" column="vo" type="string" title="" as="vo" key="0" />
        <column table="a" column="kod_dog_banki" type="number" as="kod_dog_banki" reference="kr_dogovor_banki" refcol="kod_dog_banki" key="0" />
        <column table="a" column="round_av" type="number" title="" as="round_av" key="0" />
        <column table="a" column="size_doc" type="number" title="" comment="формат документа" as="size_doc" key="0"></column>
        <column table="kod_dog" column="dat_dog" dimension="dat" as="dat_dog" key="0" />
        <call function="replace" as="name" agg="stragg" fact="kr_vist_day_name" key="0">
          <call function="||">
            <column table="this" column="perc" />
            <const>'% '</const>
            <column table="kod_bzad" column="name" />
          </call>
          <const>', '</const>
          <const>' '</const>
        </call>
        <call function="nvl0" as="pr_vist_av2" key="0">
          <column table="a" column="pr_vist_av" />
        </call>
        <call function="if" type="number" as="pr_illegal_av" fact="kr_vd_pr_illegal_av" agg="max" key="0">
          <call function="not in">
            <column table="this" column="perc" />
            <call function="array">
              <const>30</const>
              <const>40</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="number" as="pr_3040_av" agg="max" is-fact="1" fact="kr_vd_pr_3040_av" key="0">
          <call function="in">
            <column table="this" column="perc" />
            <call function="array">
              <const>30</const>
              <const>40</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kr_vist_day" as="a" />
        <query name="sk_vid_avans" as="vid_avans" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="vid_avans" />
            <column table="vid_avans" column="vid_avans" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dname="kr_vist_day" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="ss_state" as="kod_state" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="kr_vist_day" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor_banki" as="kod_dog_banki" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="kod_dog_banki" />
            <column table="kod_dog_banki" column="kod_dog_banki" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ks_bezakcept_prich" as="kod_bez_prich" join="left outer" dname="kr_vist_day">
          <call function="=">
            <column table="a" column="kod_bez_prich" />
            <column table="kod_bez_prich" column="kod_bez_prich" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_46" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_46.xml" haskeys="1">
      <select>
        <column table="a" column="kod_f46" type="number" as="kod_f46" key="1" fixed="1"></column>
        <column table="a" column="tep_el" type="number" comment="не м.б. =4" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование Ф46" as="name" key="0"></column>
        <column table="a" column="npp" type="number" title="Код Ф46" as="npp" key="0"></column>
        <column table="a" column="nrow_rao" type="number" title="" as="nrow_rao" key="0"></column>
        <column table="a" column="ym_s" type="number" title="" comment="период начала действия" as="ym_s" key="0"></column>
        <column table="a" column="ym_po" type="number" title="" comment="период окончания действия" as="ym_po" key="0"></column>
        <column table="a" column="kod_parent" type="number" comment="код родителя" as="kod_parent" reference="ks_46" refcol="kod_f46" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_46" as="a"></table>
        <query name="ks_46" as="kod_parent" join="left outer" dname="ks_46">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_f46"></column>
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ks_46">
          <call function="=">
            <column table="a" column="tep_el"></column>
            <column table="tep_el" column="tep_el"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_bankpol" class="1" timestamp="05.02.2019 22:58:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_bankpol.xml" haskeys="1">
      <select>
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" key="1" fixed="1" />
        <column table="a" column="kodb" type="number" title="" as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="rs" type="string" title="№ Счета" vid="1" as="rs" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="ocher_plat" type="number" title="" comment="очередность платежа" as="ocher_plat" key="0" />
        <column table="a" column="nvar" type="number" title="" comment="номер реквизитов из ks_otchet_sign" as="nvar" key="0" />
        <column table="a" column="days_accept" type="number" title="" comment="количество дней для акцепта" as="days_accept" key="0" />
        <column table="a" column="npp" type="number" title="" comment="порядковый номер" as="npp" key="0" />
        <column table="a" column="pay_type" type="string" title="" comment="вид платежа для печати в плат.док" as="pay_type" key="0" />
        <column table="a" column="dep" type="number" title="" comment="отделение" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="predel" type="number" title="" comment="минимальная сумма в плат.док." as="predel" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="0-активный,1-удаленный" as="pr_active" key="0" />
        <column table="a" column="copys" type="number" title="" comment="кол-во копий платежек при печати к реестру" as="copys" key="0" />
        <column table="kodb" column="bic" as="bic" key="0" />
        <column table="kodb" column="ks" title="Корр. счет" as="ks" key="0" />
        <column table="kodb" column="adr" title="Адрес" as="adr" key="0" />
        <call function="||" as="bankpol_full" type="string" vid="1" key="0">
          <column table="a" column="rs" />
          <const>' '</const>
          <column table="kodb" column="name" />
        </call>
        <call function="nvl" as="bankpol_name" type="string" title="№ Счета" vid="1" is-name="1" key="0">
          <call function="||">
            <call function="if">
              <call function="=">
                <call function="nvl0">
                  <call function="length">
                    <call function="trim">
                      <column table="kodb" column="filial" />
                    </call>
                  </call>
                </call>
                <const>0</const>
              </call>
              <const>''</const>
              <call function="||">
                <column table="kodb" column="filial" />
                <const>' - '</const>
              </call>
            </call>
            <column table="kodb" column="name" />
          </call>
          <column table="a" column="rs" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_bankpol" as="a" />
        <query name="ks_bank" as="kodb" join="left outer" dimension="1" dname="ks_bankpol">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="ks_bankpol">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_fs" class="1" timestamp="25.12.2018 17:12:42" title="Форма собственности" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_fs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fs" type="number" key="1" as="kod_fs" />
        <column table="a" column="name" type="string" title="Форма собственности" as="name" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" />
        <column table="a" column="ur_lico" type="number" title="" as="ur_lico" />
        <column table="a" column="pr_organa" type="number" title="" comment="0 - госуд,1-обществен органы (колонка из кидо plan.is_spr_fs)" as="pr_organa" />
        <column table="a" column="arhive" type="number" title="" comment="признак: 1 - переведен в архив" as="arhive" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ks_fs" as="a" title="Форма собственности" />
      </from>
    </query>
    <query name="ks_group_cust" class="1" timestamp="11.05.2017 21:29:29" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_group_cust.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group_cust" type="number" as="kod_group_cust" key="1" fixed="1" />
        <column table="a" column="num_cust" type="number" title="" as="num_cust" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="status" type="number" title="" as="status" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_gr_parent" type="number" as="kod_gr_parent" reference="ks_group_cust" refcol="kod_group_cust" key="0">
          <listquery>
            <query name="ks_group_cust_parent_list" />
          </listquery>
        </column>
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="num_gr" type="string" title="" comment="номер группы (симв)" as="num_gr" key="0" />
        <column table="a" column="fullname" type="string" title="" comment="полный путь" as="fullname" key="0" />
        <column table="a" column="fin_name" type="string" title="" comment="наименование группы потребителей для фо" as="fin_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kv_group_cust" as="a" comment="вместо ks_group_cust 37369(6)" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ks_group_cust">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_group_cust" as="kod_group_cust_parent" join="left outer" title="Группа потребителей" dname="ks_group_cust">
          <call function="=">
            <column table="a" column="kod_gr_parent" />
            <column table="kod_group_cust_parent" column="kod_group_cust" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_istfin" title="Источники финансирования" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_istfin.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ist" type="number" as="kod_ist" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Источники финансирования" as="name" key="0"></column>
        <column table="a" column="ocher" type="number" title="" as="ocher" key="0"></column>
        <column table="a" column="kodbpol_teplo" type="number" title="" comment="код банка-получателя(тепло)" as="kodbpol_teplo" key="0"></column>
        <column table="a" column="npp" type="number" title="" as="npp" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_istfin" as="a" title="Источники финансирования" />
        <query name="ag_istfin" as="kod_ist_ag" join="left outer" dname="ks_istfin">
          <call function="=">
            <column table="a" column="kod_ist"></column>
            <column table="kod_ist_ag" column="kod_ist"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_kazn" order="name" class="1" title="Казначейство" timestamp="11.05.2017 21:22:06" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_kazn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Казначейство" comment="наименование" as="name" key="0" />
        <column table="a" column="inn" type="string" title="ИНН" as="inn" key="0" />
        <column table="a" column="rs" type="string" title="" as="rs" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер" as="npp" key="0" />
        <column table="a" column="okrk" type="number" title="Округ" comment="номер округа казначейства" as="okrk" key="0" />
        <column table="a" column="allname" type="string" title="" comment="полное наименование" as="allname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_kazn" as="a" title="Казначейство" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ks_konvert_doc" class="1" timestamp="04.07.2021 03:19:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_konvert_doc.xml" haskeys="1">
      <select>
        <call as="count_akt_sv" type="number" function="if" fact="ks_konvert_doc_count_akt_sv" agg="sum" key="1" fixed="1">
          <call function="=">
            <column table="this" column="kod_doc" />
            <const>11</const>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="kod" type="number" title="" comment="уник. код записи" as="kod" key="0" />
        <column table="a" column="kod_paket" type="number" comment="код пакета из ks_konvert_pak" as="kod_paket" reference="ks_konvert_pak" refcol="kod_paket" key="0" />
        <column table="a" column="kod_doc" type="number" comment="код вида документа из sv_fin_doc_pech" as="kod_doc" key="0" />
        <column table="a" column="name_doc" type="string" title="" comment="наименование вида документа" as="name_doc" key="0" />
        <column table="a" column="filename" type="string" title="" comment="имя файла" as="filename" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_konvert_doc" as="a">
          <link name="kod_paket" as="kod_paket1" table="ks_konvert_pak" child="ks_konvert_doc" field="kod_paket" parent="ks_konvert_pak" back="ks_konvert_doc">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="dat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="ks_konvert_pak" as="kod_paket" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ks_konvert_doc">
          <call function="=">
            <column table="a" column="kod_paket" />
            <column table="kod_paket" column="kod_paket" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_konvert_pak" class="1" timestamp="04.07.2021 03:14:37" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_konvert_pak.xml" haskeys="1">
      <select>
        <column table="a" column="kod_paket" type="number" comment="уник. код записи" as="kod_paket" key="1" fixed="1" />
        <column table="a" column="kod_konvert" type="number" comment="код конверта, к которому относится пакет документов" as="kod_konvert" reference="ks_konvert" refcol="kod_konvert" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_status" type="number" comment="статус пакета (см. ss_konvert_paket_status)" as="kod_status" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_receive" type="date" title="" comment="дата/время поступления" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_receive" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание к сформированному пакету документов. сохраняется при чтении файлов со статусами" as="prim" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_konvert_pak" as="a" />
        <query name="ks_konvert" as="kod_konvert" join="left outer" dname="ks_konvert_pak">
          <call function="=">
            <column table="a" column="kod_konvert" />
            <column table="kod_konvert" column="kod_konvert" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ks_konvert_pak" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_ministry" title="Министерство" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_ministry.xml" haskeys="1">
      <select>
        <column table="a" column="kod_m" type="number" as="kod_m" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Министерство" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_ministry" as="a" title="Министерство" />
        <query name="ag_ministry" as="kod_m_ag" join="left outer" dname="ks_ministry">
          <call function="=">
            <column table="a" column="kod_m"></column>
            <column table="kod_m_ag" column="kod_m"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_namedolzh" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_namedolzh.xml" haskeys="1">
      <select>
        <column table="a" column="kod_namedolzh" type="number" as="kod_namedolzh" key="1" fixed="1"></column>
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" reference="kk_cls" refcol="kod_ecls" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="name_r" type="string" title="" as="name_r" key="0"></column>
        <column table="a" column="name_d" type="string" title="" comment="должность в дательном падеже" as="name_d" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_namedolzh" as="a"></table>
        <query name="kk_cls" as="kod_ecls" join="left outer" dname="ks_namedolzh">
          <call function="=">
            <column table="a" column="kod_ecls"></column>
            <column table="kod_ecls" column="kod_ecls"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_obj_fs" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_obj_fs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_obj_fs" type="number" as="kod_obj_fs" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="tep_el" type="number" title="" comment="2-тепло/1-электр" as="tep_el" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_obj_fs" as="a"></table>
      </from>
    </query>
    <query name="ks_okved" class="1" timestamp="22.03.2022 17:16:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_okved.xml" haskeys="1">
      <select>
        <column table="a" column="kod_okved" type="number" key="1" as="kod_okved" />
        <column table="a" column="kod_razd" type="number" as="kod_razd" reference="ks_okved_razdel" refcol="kod_razd" />
        <column table="a" column="okved" type="string" title="" as="okved" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" />
        <column table="a" column="parent_kod_okved" type="number" comment="родительский оквед" as="parent_kod_okved" />
        <column table="a" column="god" type="number" title="" as="god" />
        <column table="a" column="mes" type="number" title="" as="mes" />
        <column table="a" column="kod_res_okved" type="number" comment="редакция  справочника оквэд." as="kod_res_okved" reference="ks_okved_resolution" refcol="kod_res_okved" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="kod_str_ies" type="number" title="" as="kod_str_ies" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ks_okved" as="a" />
        <query name="ks_okved_resolution" as="kod_res_okved" join="left outer" dname="ks_okved">
          <call function="=">
            <column table="a" column="kod_res_okved" />
            <column table="kod_res_okved" column="kod_res_okved" />
          </call>
        </query>
        <query name="ks_okved_razdel" as="kod_razd" join="left outer" dname="ks_okved">
          <call function="=">
            <column table="a" column="kod_razd" />
            <column table="kod_razd" column="kod_razd" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_okved_razdel" class="1" timestamp="22.03.2022 21:10:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_okved_razdel.xml" haskeys="1">
      <select>
        <column table="a" column="kod_razd" type="number" as="kod_razd" />
        <column table="a" column="razdel" type="string" title="" as="razdel" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="kod_res_okved" type="number" as="kod_res_okved" />
        <column table="a" column="kod_str_ies" type="number" as="kod_str_ies" />
        <call function="rowid" as="ks_okved_razdel_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ks_okved_razdel" as="a" />
      </from>
    </query>
    <query name="ks_otchet_sign" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_otchet_sign.xml" haskeys="1">
      <select>
        <column table="a" column="kod_otchet_sign" type="number" as="kod_otchet_sign" key="1" fixed="1"></column>
        <column table="a" column="kod_otchet" type="number" as="kod_otchet" reference="kk_otchet" refcol="kod_otchet" key="0"></column>
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="podr1" type="number" title="" as="podr1" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="path" type="string" title="" as="path" key="0"></column>
        <column table="a" column="podr2" type="number" title="" as="podr2" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="sign1" type="number" title="" comment="код сотрудника" as="sign1" reference="kr_employee" refcol="kod_emp" key="0"></column>
        <column table="a" column="podr3" type="number" title="" as="podr3" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="sign2" type="number" title="" comment="код сотрудника" as="sign2" reference="kr_employee" refcol="kod_emp" key="0"></column>
        <column table="a" column="sign3" type="number" title="" comment="код сотрудника" as="sign3" reference="kr_employee" refcol="kod_emp" key="0"></column>
        <column table="a" column="podr4" type="number" title="" as="podr4" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="dolzh1" type="number" title="" as="dolzh1" reference="kk_dolzhfun" refcol="kod_dolzhfun" key="0"></column>
        <column table="a" column="dolzh2" type="number" title="" as="dolzh2" reference="kk_dolzhfun" refcol="kod_dolzhfun" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="nvar" type="number" title="" comment="номер варианта реквизитов" as="nvar" key="0"></column>
        <column table="a" column="text1" type="string" title="" comment="текстовый реквизит 1" as="text1" key="0"></column>
        <column table="a" column="text2" type="string" title="" comment="текстовый реквизит 2" as="text2" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_otchet_sign" as="a"></table>
        <query name="kk_dolzhfun" as="dolzh2" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="dolzh2"></column>
            <column table="dolzh2" column="kod_dolzhfun"></column>
          </call>
        </query>
        <query name="kk_dolzhfun" as="dolzh1" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="dolzh1"></column>
            <column table="dolzh1" column="kod_dolzhfun"></column>
          </call>
        </query>
        <query name="kk_otchet" as="kod_otchet" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="kod_otchet"></column>
            <column table="kod_otchet" column="kod_otchet"></column>
          </call>
        </query>
        <query name="kr_employee" as="sign3" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="sign3"></column>
            <column table="sign3" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="sign2" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="sign2"></column>
            <column table="sign2" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="sign1" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="sign1"></column>
            <column table="sign1" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_org" as="podr4" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="podr4"></column>
            <column table="podr4" column="kodp"></column>
          </call>
        </query>
        <query name="kr_org" as="podr3" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="podr3"></column>
            <column table="podr3" column="kodp"></column>
          </call>
        </query>
        <query name="kr_org" as="podr2" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="podr2"></column>
            <column table="podr2" column="kodp"></column>
          </call>
        </query>
        <query name="kr_org" as="podr1" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="podr1"></column>
            <column table="podr1" column="kodp"></column>
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="ks_otchet_sign">
          <call function="=">
            <column table="a" column="dep"></column>
            <column table="dep" column="kodp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_otrasl" title="Отрасли" class="1" timestamp="20.07.2018 16:24:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_otrasl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_otrasl" type="number" as="kod_otrasl" key="1" fixed="1" />
        <column table="a" column="okonh" type="string" title="" as="okonh" reference="ag_okonh" refcol="okonh" key="0" />
        <column table="a" column="name" type="string" title="Отрасль" vid="1" as="name" key="0" />
        <column table="a" column="parent" type="number" title="" as="parent" reference="ks_otrasl" refcol="kod_otrasl" key="0" />
        <column table="ks_otrasl_tree" column="root_kod_otrasl" as="root_kod_otrasl" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_otrasl" as="a" title="Отрасли" />
        <query name="ks_otrasl" as="parent" join="left outer" dname="ks_otrasl" title="Отрасли">
          <call function="=">
            <column table="a" column="parent" />
            <column table="parent" column="kod_otrasl" />
          </call>
        </query>
        <query name="ag_okonh" as="okonh" join="left outer" dname="ks_otrasl">
          <call function="=">
            <column table="a" column="okonh" />
            <column table="okonh" column="okonh" />
          </call>
        </query>
        <query name="ks_otrasl_tree" join="left outer" as="ks_otrasl_tree" dname="ks_otrasl" title="Дерево отраслей">
          <call function="=">
            <column table="a" column="kod_otrasl" />
            <column table="ks_otrasl_tree" column="kod_otrasl" />
          </call>
        </query>
        <query name="ks_otrasl_root" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" as="ks_otrasl_root" dname="ks_otrasl" title="Дерево отраслей">
          <call function="=">
            <column table="this" column="root_kod_otrasl" />
            <column table="ks_otrasl_root" column="kod_otrasl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tarif" class="1" timestamp="02.02.2019 16:29:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tarif.xml" haskeys="1">
      <params>
        <param name="date" type="date">
          <const>sysdate</const>
        </param>
      </params>
      <select>
        <column table="a" column="tarif" type="number" comment="код тарифа" key-dimension="tarif" as="tarif" key="1" fixed="1" />
        <column table="a" column="kod_f46" type="number" as="kod_f46" reference="ks_46" refcol="kod_f46" key="0" />
        <column table="a" column="pr_active" type="number" as="pr_active" reference="kk_active" refcol="pr_active" key="0" />
        <column table="a" column="tep_el" type="number" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="npp" type="number" title="Код тарифа" comment="порядковый номер тарифа" vid="1" is-name="1" as="npp" key="0" />
        <column table="a" column="sname" type="string" title="Наименование тарифа" comment="наименование тарифа" vid="1" as="sname" key="0" />
        <column table="a" column="name" type="string" title="Наименование тарифа" as="name" key="0" />
        <column table="a" column="tarif_parent" type="number" title="Старший тариф" as="tarif_parent" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="kod_plita" type="number" as="kod_plita" key="0" />
        <column table="a" column="byt" type="number" comment="null-не население, 2-одн, 3-сверх.норм.одн, 4-население" as="byt" key="0" />
        <column table="a" column="kodinterval" type="number" comment="код периода" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <column table="a" column="prizn_selo" type="number" comment="0 - город 1 - selo" as="prizn_selo" reference="cs_rek" key="0" />
        <column table="a" column="voltage" type="number" comment="код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="a" column="harvodapar" type="number" as="harvodapar" reference="dk_harvodapar" refcol="harvodapar" key="0" />
        <column table="a" column="tarif2" type="number" comment="двуставочный тариф" as="tarif2" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="gener" type="number" comment="отпуск с шин" as="gener" key="0" />
        <column table="a" column="tarif1" type="number" comment="одноставочный тариф" as="tarif1" key="0" />
        <column table="a" column="hoz" type="number" comment="хознужды" as="hoz" key="0" />
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" reference="hk_dhh" refcol="kod_dhh" key="0" />
        <column table="a" column="kodp" type="number" comment="код юл, которому принадлежит индивидуальный тариф на услуги (потери)" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="gvs_end" type="number" comment="признак отключения гвс с окончанием отопительного сезона." as="gvs_end" key="0" />
        <column table="a" column="kod_tarif_cnt" type="number" comment="значение определяет одно/двух ставочный тариф (см. kk_tarif_cnt). значение поддерживается только для тарифов на услуги по передаче ээ и компенсации потерь (проект договор услуг и потерь)." as="kod_tarif_cnt" key="0" />
        <column table="a" column="tip_tarif_sost" type="number" as="tip_tarif_sost" reference="kk_tarif_sost" refcol="tip_tarif_sost" key="0" />
        <column table="a" column="val_from" type="number" comment="пороговое значение с.." as="val_from" key="0" />
        <column table="a" column="val_to" type="number" comment="пороговое значение ..по (включительно)" as="val_to" key="0" />
        <column table="ks_tarif_rate" column="rate1" dgroup="max" as="rate1" key="0" />
        <column table="ks_tarif_rate" column="rate2" dgroup="max" as="rate2" key="0" />
        <column table="tarif_parent" column="npp" as="npp_parent" title="Код группы" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tarif" as="a">
          <dlink name="ks_tarif_rate" as="ks_tarif_rate" table="ks_tarif_rate" child="ks_tarif_rate" field="tarif" parent="ks_tarif" back="ks_tarif_rate">
            <where>
              <usepart part="between-nvl">
                <useparam name="date" />
                <column table="ks_tarif_rate" column="dat_beg" />
                <column table="ks_tarif_rate" column="dat_end" />
              </usepart>
            </where>
          </dlink>
        </table>
        <query name="kk_tarif_sost" as="tip_tarif_sost" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="tip_tarif_sost" />
            <column table="tip_tarif_sost" column="tip_tarif_sost" />
          </call>
        </query>
        <query name="dk_harvodapar" as="harvodapar" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="harvodapar" />
            <column table="harvodapar" column="harvodapar" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dname="ks_tarif" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
        <query name="kk_active" as="pr_active" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="pr_active" />
            <column table="pr_active" column="pr_active" />
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_46" as="kod_f46" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="kod_f46" />
            <column table="kod_f46" column="kod_f46" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif2" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="tarif2" />
            <column table="tarif2" column="tarif" />
          </call>
        </query>
        <query name="hk_dhh" as="kod_dhh" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="kod_dhh" />
            <column table="kod_dhh" column="kod_dhh" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif_parent" dname="ks_tarif_child" join="left outer">
          <call function="=">
            <column table="a" column="tarif_parent" />
            <column table="tarif_parent" column="tarif" />
          </call>
        </query>
        <query name="cs_rek" as="prizn_selo" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="prizn_selo" />
            <column table="kod_rek" column="kod_rek" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_tarif_ext" as="tarif_ext" join="left outer" dname="ks_tarif">
          <call function="=">
            <column table="tarif_ext" column="tarif" />
            <column table="a" column="tarif" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tarif_rate" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tarif_rate.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tarif_rate" type="number" as="kod_tarif_rate" key="1" fixed="1"></column>
        <column table="a" column="tarif" type="number" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="dat_beg" type="date" as="dat_beg" key="0"></column>
        <column table="a" column="dat_end" type="date" as="dat_end" key="0"></column>
        <column table="a" column="rate1" type="number" comment="тариф за энергию" as="rate1" key="0"></column>
        <column table="a" column="rate2" type="number" comment="тариф за мощность" as="rate2" key="0"></column>
        <column table="a" column="rate3" type="number" as="rate3" key="0"></column>
        <column table="a" column="document" type="string" comment="(№, дата)" as="document" key="0"></column>
        <column table="a" column="rate4" type="number" comment="тариф за куб. м." as="rate4" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tarif_rate" as="a"></table>
        <query name="ks_tarif" as="tarif" join="left outer" dname="ks_tarif_rate">
          <call function="=">
            <column table="a" column="tarif"></column>
            <column table="tarif" column="tarif"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tar_free" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tar_free.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tar_free" type="number" as="kod_tar_free" key="1" fixed="1"></column>
        <column table="a" column="d_m" type="date" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="name" type="string" comment="наименование" as="name" key="0"></column>
        <column table="a" column="u_m" type="string" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="type_tar" type="number" comment="0-не проверять, 1-одноставочный, 2-двуставочный" as="type_tar" key="0"></column>
        <column table="a" column="kodinterval" type="number" comment="код периода, пусто - не проверять" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0"></column>
        <column table="a" column="kod_zone" type="number" comment="код ценовой зоны" as="kod_zone" reference="hs_price_zone" refcol="kod_zone" key="0"></column>
        <column table="a" column="tarif" type="number" comment="код тарифной группы" as="tarif" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="voltage" type="number" as="voltage" reference="hk_voltage" refcol="voltage" key="0"></column>
        <column table="a" column="kod_gtp" type="number" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" key="0"></column>
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" reference="hk_dhh" refcol="kod_dhh" key="0"></column>
        <column table="a" column="pr_active" type="number" comment="0-активный, 1-удаленный" as="pr_active" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tar_free" as="a"></table>
        <query name="hk_voltage" as="voltage" join="left outer" dname="ks_tar_free" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage"></column>
            <column table="voltage" column="voltage"></column>
          </call>
        </query>
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="ks_tar_free">
          <call function="=">
            <column table="a" column="kod_gtp"></column>
            <column table="kod_gtp" column="kod_gtp"></column>
          </call>
        </query>
        <query name="hs_price_zone" as="kod_zone" join="left outer" dname="ks_tar_free">
          <call function="=">
            <column table="a" column="kod_zone"></column>
            <column table="kod_zone" column="kod_zone"></column>
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="ks_tar_free">
          <call function="=">
            <column table="a" column="kodinterval"></column>
            <column table="kodinterval" column="kodinterval"></column>
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="ks_tar_free">
          <call function="=">
            <column table="a" column="tarif"></column>
            <column table="tarif" column="tarif"></column>
          </call>
        </query>
        <query name="hk_dhh" as="kod_dhh" join="left outer" dname="ks_tar_free">
          <call function="=">
            <column table="a" column="kod_dhh"></column>
            <column table="kod_dhh" column="kod_dhh"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tar_free_hours" class="1" timestamp="23.04.2018 14:15:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tar_free_hours.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tar_free_hours" type="number" comment="код записи" as="kod_tar_free_hours" key="1" fixed="1" />
        <column table="a" column="date_hour" type="date" title="Дата Время" comment="дата почасового значения" as="date_hour" key="0" />
        <column table="a" column="rate_free_plan" type="number" comment="свободный тариф атс планир 1-став" as="rate_free_plan" key="0" />
        <column table="a" column="rate_free2" type="number" title="Цена РСВ руб/квтч" comment="свободный тариф атс фактич 1-став" as="rate_free" key="0" />
        <column table="a" column="rate_noplan_v" type="number" comment="цена незапланир объема 1-став" as="rate_noplan_v" key="0" />
        <column table="a" column="rate_up" type="number" title="Цена за отклонения вверх руб/квтч" comment="цена отклонения вверх" as="rate_up" key="0" />
        <column table="a" column="rate_down" type="number" title="Цена за отклонения вниз руб/квтч" comment="цена отклонения вниз" as="rate_down" key="0" />
        <column table="a" column="u_m" type="string" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="rate_free2" type="number" comment="свободный тариф атс фактич 2-став" as="rate_free2" key="0" />
        <column table="a" column="rate_free2_plan" type="number" comment="свободный тариф атс планир 2-став" as="rate_free2_plan" key="0" />
        <column table="a" column="kodp" type="number" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="rate_noplan_v2" type="number" title="Цена БР руб/квтч" comment="цена незапланир объема 2-став" as="rate_noplan_v2" key="0" />
        <column table="a" column="kod_gtp" type="number" comment="код гтп" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tar_free_hours" as="a" />
        <query name="kr_org" as="kodp" join="left outer" dname="ks_tar_free_hours">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="ks_tar_free_hours">
          <call function="=">
            <column table="a" column="kod_gtp" />
            <column table="kod_gtp" column="kod_gtp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tar_free_rate" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tar_free_rate.xml" haskeys="1">
      <select>
        <column table="a" column="kod_tar_free" type="number" as="kod_tar_free" key="1" fixed="1"></column>
        <column table="a" column="ym" type="number" title="" comment="период" as="ym" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="rate_rek" type="number" title="" comment="средневзвешенный тариф покупки энергии 1 ст" as="rate_rek" key="0"></column>
        <column table="a" column="rate_free" type="number" title="" comment="средневзвешенная свободная цена энергии 1 ст фактич" as="rate_free" key="0"></column>
        <column table="a" column="rate_free_plan" type="number" title="" comment="средневзвешенная свободная цена энергии 1 ст план" as="rate_free_plan" key="0"></column>
        <column table="a" column="beta" type="number" title="" comment="доля потребл по регулир ценам - временно - для конвертации" as="beta" key="0"></column>
        <column table="a" column="dat_beg" type="date" title="" comment="временно - для конвертации" as="dat_beg" key="0"></column>
        <column table="a" column="dat_end" type="date" title="" comment="временно - для конвертации" as="dat_end" key="0"></column>
        <column table="a" column="rate_free2" type="number" title="" comment="средневзвешенная свободная цена энергии 2 ст фактич" as="rate_free2" key="0"></column>
        <column table="a" column="rate_free2_plan" type="number" title="" comment="средневзвешенная свободная цена энергии 2 ст план" as="rate_free2_plan" key="0"></column>
        <column table="a" column="rate_rek2" type="number" title="" comment="средневзвешенный тариф покупки энергии 2 ст" as="rate_rek2" key="0"></column>
        <column table="a" column="rate2_rek" type="number" title="" comment="средневзвешенный тариф покупки электрической мощности" as="rate2_rek" key="0"></column>
        <column table="a" column="rate2_free" type="number" title="" comment="средневзвешенная свободная почасовая цена мощности 2 ст факт" as="rate2_free" key="0"></column>
        <column table="a" column="rate2_free_plan" type="number" title="" comment="средневзвешенная свободная почасовая цена мощности 2 ст план" as="rate2_free_plan" key="0"></column>
        <column table="a" column="gamma_en" type="number" title="" comment="к-т альфа энергия 1 ст (владивосток)" as="gamma_en" key="0"></column>
        <column table="a" column="gamma_en2" type="number" title="" comment="к-т альфа энергия 2 ст (владивосток)" as="gamma_en2" key="0"></column>
        <column table="a" column="gamma_power" type="number" title="" comment="к-т альфа мощность (владивосток)" as="gamma_power" key="0"></column>
        <column table="a" column="rate2_free1" type="number" title="" comment="средневзвешенная свободная почасовая цена мощности 1 ст факт" as="rate2_free1" key="0"></column>
        <column table="a" column="rate2_free1_plan" type="number" title="" comment="средневзвешенная свободная почасовая цена мощности 1 ст план" as="rate2_free1_plan" key="0"></column>
        <column table="a" column="beta_en" type="number" title="" comment="к-т бета энергия 1 ст (владивосток)" as="beta_en" key="0"></column>
        <column table="a" column="beta_en2" type="number" title="" comment="к-т бета энергия 2 ст (владивосток)" as="beta_en2" key="0"></column>
        <column table="a" column="beta_power" type="number" title="" comment="к-т бета мощность (владивосток)" as="beta_power" key="0"></column>
        <column table="a" column="rsv_nebalans" type="number" title="" comment="цена рсв небаланс" as="rsv_nebalans" key="0"></column>
        <column table="a" column="br_nebalans" type="number" title="" comment="цена бр небаланс" as="br_nebalans" key="0"></column>
        <column table="a" column="rate_cfr" type="number" title="" comment="услуги цфр (руб/ квтч)" as="rate_cfr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tar_free_rate" as="a"></table>
        <query name="ks_tar_free" as="kod_tar_free" join="left outer" dname="ks_tar_free_rate">
          <call function="=">
            <column table="a" column="kod_tar_free"></column>
            <column table="kod_tar_free" column="kod_tar_free"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tf_nastr_rep" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tf_nastr_rep.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nastr_rep" type="number" comment="код настроечной таблицы отчетов" as="kod_nastr_rep" key="1" fixed="1" />
        <column table="a" column="pr_ab" type="number" title="" comment="признак выбора значения аварийной брони: 1-из сетевого ограничения" as="pr_ab" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="pr_p_dog" type="number" title="" comment="признак выбора значения договорной мощности: 1-из сетевого ограничения" as="pr_p_dog" key="0" />
        <column table="a" column="name_dep_otkl" type="string" title="" comment="наименование подразделения, контролирующего отключения" as="name_dep_otkl" key="0" />
        <column table="a" column="pr_dolg_arx" type="number" title="" comment="признак включения при расчете задолженности абонента долговых сумм с архивных договоров: 1-включать" as="pr_dolg_arx" key="0" />
        <column table="a" column="kod_emp_pred_1" type="number" comment="код руководителя, подписывающего предупредит тф по постановлению № 1" as="kod_emp_pred_1" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_364" type="number" comment="код руководителя, подписывающего предупредит тф по постановлению № 364" as="kod_emp_pred_364" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_no_post" type="number" comment="код руководителя, подписывающего предупредит тф без постановления" as="kod_emp_pred_no_post" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_obj_nodog" type="number" comment="код руководителя, подписывающего предупредит тф при наличии объектов с незаключенными договорами" as="kod_emp_pred_obj_nodog" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="year_old_per_dog" type="number" title="" comment="необходимость переоформления договоров абонентов старше гггг-года" as="year_old_per_dog" key="0" />
        <column table="a" column="kod_emp_tex_ogr_dog" type="number" comment="код руководителя, подписывающего технич тф на ограничение объектов с заключенными договорами" as="kod_emp_tex_ogr_dog" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_tex_ogr_nodog" type="number" comment="код руководителя, подписывающего технич тф на ограничение объектов с незаключенными договорами" as="kod_emp_tex_ogr_nodog" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="shab_pred_1" type="string" title="" comment="имя файла шаблона по пост №1 для предупредит. увед. при выдаче в ms word" as="shab_pred_1" key="0" />
        <column table="a" column="shab_pred_364" type="string" title="" comment="имя файла шаблона по пост №364 для предупредит. увед. при выдаче в ms word (доп. соглаш. о лимитах не подписано)" as="shab_pred_364" key="0" />
        <column table="a" column="shab_pred_364_r" type="string" title="" comment="имя файла шаблона по пост №364 для предупредит. увед. при выдаче в ms word(превышение лимитов)" as="shab_pred_364_r" key="0" />
        <column table="a" column="shab_pred_364_nr" type="string" title="" comment="имя файла шаблона по пост №364 для предупредит. увед. при выдаче в ms word(не превысил лимитов)" as="shab_pred_364_nr" key="0" />
        <column table="a" column="shab_pred_obj_nodog" type="string" title="" comment="имя файла шаблона без постановл для предупредит. увед. при выдаче в ms word (при наличии объектов с незаключенными договорами)" as="shab_pred_obj_nodog" key="0" />
        <column table="a" column="shab_pred_no_post_n" type="string" title="" comment="имя файла шаблона без постановл для предупредит. увед. при выдаче в ms word (обычный договор)" as="shab_pred_no_post_n" key="0" />
        <column table="a" column="shab_pred_no_post_perdog" type="string" title="" comment="имя файла шаблона без постановл для предупредит. увед. при выдаче в ms word (необходимость переоформления договора)" as="shab_pred_no_post_perdog" key="0" />
        <column table="a" column="shab_tex_ogr_p1" type="string" title="" comment="имя файла шаблона по пост № 1 для технич уведомл при выдаче в ms word на ограничение" as="shab_tex_ogr_p1" key="0" />
        <column table="a" column="shab_tex_otk_p1" type="string" title="" comment="имя файла шаблона по пост № 1 для технич уведомл при выдаче в ms word на отключение" as="shab_tex_otk_p1" key="0" />
        <column table="a" column="shab_tex_ogr_no_post" type="string" title="" comment="имя файла шаблона без постановл для технич уведомл при выдаче в ms word на ограничение" as="shab_tex_ogr_no_post" key="0" />
        <column table="a" column="shab_tex_otk_r" type="string" title="" comment="имя файла шаблона для технич уведомл при выдаче в ms word на отключение вручную" as="shab_tex_otk_r" key="0" />
        <column table="a" column="shab_tex_otk_rnd" type="string" title="" comment="имя файла шаблона для технич уведомл при выдаче в ms word на отключение вручную (договор не заключен)" as="shab_tex_otk_rnd" key="0" />
        <column table="a" column="shab_tex_otk_sp" type="string" title="" comment="имя файла шаблона для технич уведомл при выдаче в ms word на отключение сп" as="shab_tex_otk_sp" key="0" />
        <column table="a" column="shab_tex_otk_spnd" type="string" title="" comment="имя файла шаблона для технич уведомл при выдаче в ms word на отключение сп (договор не заключен)" as="shab_tex_otk_spnd" key="0" />
        <column table="a" column="time_otkl" type="string" title="" comment="время отключения" as="time_otkl" key="0" />
        <column table="a" column="pr_byt" type="number" title="" comment="признак настроек для бытовиков" as="pr_byt" key="0" />
        <column table="a" column="int_otkl" type="number" title="" comment="интервал отключения (дней) - для бытовиков" as="int_otkl" key="0" />
        <column table="a" column="dolg_min" type="number" title="" comment="минимальная величина задолженности - для бытовиков" as="dolg_min" key="0" />
        <column table="a" column="kod_emp_pred_no_post_n" type="number" as="kod_emp_pred_no_post_n" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_364_nr" type="number" as="kod_emp_pred_364_nr" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_364_r" type="number" as="kod_emp_pred_364_r" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kod_emp_pred_no_post_perdog" type="number" as="kod_emp_pred_no_post_perdog" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="print_adres" type="number" title="" comment="признак печати адреса доставки в уведомлениях: 1-печатать (казань)" as="print_adres" key="0" />
        <column table="a" column="path_shab" type="string" title="" comment="имя папки на сервере для хранения шаблонов уведомлений" as="path_shab" key="0" />
        <column table="a" column="kod_emp_tex_otk_sp" type="number" as="kod_emp_tex_otk_sp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="virt_avans" type="number" title="" comment="использование в расчетах задолженности виртуальных авансов (казань эл-во): 1-использовать" as="virt_avans" key="0" />
        <column table="a" column="pereplata" type="number" title="" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" as="pereplata" key="0" />
        <column table="a" column="fio_minprom_torg" type="string" title="" comment="ФИО министра промышл. и торговли (дат)" as="fio_minprom_torg" key="0" />
        <column table="a" column="shab_pret" type="string" title="" comment="имя файла шаблона для претензий при выдаче в MS Word" as="shab_pret" key="0" />
        <column table="a" column="pereplata_current" type="number" title="" comment="Учитывать  в расчетах задолженности переплаты текущего периода (Казань эл-во): 1-учитывать" as="pereplata_current" key="0" />
        <column table="a" column="pereplata_future" type="number" title="" comment="Учитывать в расчетах задолженности переплаты будущих периодов (Казань эл-во): 1-учитывать" as="pereplata_future" key="0" />
        <column table="a" column="oplata_virt_avans" type="number" title="" comment="Вычислять в расчетах задолженности оплату для вирт. авансов (Казань эл-во): 1-вычислять" as="oplata_virt_avans" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tf_nastr_rep" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="tep_el"></column>
            <column table="tep_el" column="tep_el"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_no_post_perdog" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_no_post_perdog"></column>
            <column table="kod_emp_pred_no_post_perdog" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_364_r" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_364_r"></column>
            <column table="kod_emp_pred_364_r" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_364_nr" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_364_nr"></column>
            <column table="kod_emp_pred_364_nr" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_no_post_n" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_no_post_n"></column>
            <column table="kod_emp_pred_no_post_n" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_tex_ogr_dog" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_tex_ogr_dog"></column>
            <column table="kod_emp_tex_ogr_dog" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_tex_ogr_nodog" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_tex_ogr_nodog"></column>
            <column table="kod_emp_tex_ogr_nodog" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_obj_nodog" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_obj_nodog"></column>
            <column table="kod_emp_pred_obj_nodog" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_no_post" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_no_post"></column>
            <column table="kod_emp_pred_no_post" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_364" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_364"></column>
            <column table="kod_emp_pred_364" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_pred_1" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_1"></column>
            <column table="kod_emp_pred_1" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp_tex_otk_sp" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_tex_otk_sp"></column>
            <column table="kod_emp_tex_otk_sp" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="dep"></column>
            <column table="dep" column="kodp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="kod_emp_pred_no_post_perdog" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left inner" dname="ks_tf_nastr_rep">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ks_tf_sved_isp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_tf_sved_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sved" type="number" comment="первичный ключ" as="kod_sved" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="kod_numobj" type="number" comment="код объекта" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0"></column>
        <column table="a" column="sved_isp" type="string" title="" comment="сведения об исполнении" as="sved_isp" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_tf_sved_isp" as="a"></table>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ks_tf_sved_isp" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="ks_tf_sved_isp">
          <call function="=">
            <column table="a" column="kod_numobj"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_user" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_user.xml" haskeys="1">
      <select>
        <column table="a" column="puser" type="string" title="" as="puser" key="1" fixed="1"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0"></column>
        <column table="a" column="num_z" type="string" title="" as="num_z" key="0"></column>
        <column table="a" column="dat_z" type="date" title="" as="dat_z" key="0"></column>
        <column table="a" column="roles" type="string" title="" as="roles" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="kod_usergroup" type="number" as="kod_usergroup" reference="ks_usergroup" refcol="kod_usergroup" key="0"></column>
        <column table="a" column="dat_del" type="date" title="" as="dat_del" key="0"></column>
        <column table="a" column="pr_active" type="number" title="" as="pr_active" key="0"></column>
        <column table="a" column="ldap_path" type="string" title="" comment="путь к пользователю в каталоге active directory" as="ldap_path" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_user" as="a"></table>
        <query name="ks_usergroup" as="kod_usergroup" join="left outer" dname="ks_user">
          <call function="=">
            <column table="a" column="kod_usergroup"></column>
            <column table="kod_usergroup" column="kod_usergroup"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ks_user">
          <call function="=">
            <column table="a" column="kod_emp"></column>
            <column table="kod_emp" column="kod_emp"></column>
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="ks_user">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ks_vdoc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_vdoc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vdoc" type="number" column-mandatory="1" as="kod_vdoc" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="200" column-mandatory="1" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="name_r" type="string" data-size="200" column-mandatory="1" title="" comment="Наименование в родительном падеже" as="name_r" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="name_d" type="string" data-size="200" column-mandatory="1" title="" comment="Наименование в дательном падеже" as="name_d" key="0" />
        <column table="a" column="abbr" type="string" data-size="8" title="Аббревиатура" comment="аббревиатура" as="abbr" key="0" />
        <column table="a" column="prizn_pech" type="number" title="" comment="0/1-ссылку на номер в сф не печатать/печатать" as="prizn_pech" key="0" />
        <column table="a" column="sale" type="number" column-mandatory="1" title="" comment="Признак &quot;Купля - Продажа&quot;" as="sale" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ks_vdoc" as="a" />
      </from>
    </query>
    <query name="ks_vdog" class="1" timestamp="25.01.2019 17:12:12" title="Вид договора" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ks_vdog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vdog" type="number" comment="код вида договора" key="1" as="kod_vdog" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" />
        <column table="a" column="podr" type="number" comment="код подразделения" vid="1" as="podr" reference="kr_org" refcol="kodp" />
        <column table="a" column="name" type="string" title="Наименование" comment="название вида договора" vid="1" is-name="1" as="name" />
        <column table="a" column="sqrp" type="string" title="" comment="имя файла шаблона" as="sqrp" />
        <column table="a" column="byt" type="number" title="" as="byt" />
        <column table="a" column="day_energy" type="number" title="" as="day_energy" />
        <column table="a" column="day_power" type="number" title="" as="day_power" />
        <column table="a" column="public_suite" type="number" title="" comment="0/1 1- есть учет общих помещений" as="public_suite" />
        <column table="a" column="kod_vdoc" type="number" as="kod_vdoc" reference="ks_vdoc" refcol="kod_vdoc" />
        <column table="a" column="kod_tipdog" type="number" comment="код типа договора" as="kod_tipdog" reference="kk_tipdog" refcol="kod_tipdog" />
        <column table="a" column="kod_vivod" type="number" comment="прямой вывод (0/null - обычный договор;1- прямой вывод;2- внутр.потребл.)" as="kod_vivod" />
        <column table="a" column="payer_kind" type="string" title="" comment="наименование стороны по договору" as="payer_kind" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ks_vdog" as="a" title="Вид договора" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ks_vdog">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kk_tipdog" as="kod_tipdog" join="left outer" dname="ks_vdog">
          <call function="=">
            <column table="a" column="kod_tipdog" />
            <column table="kod_tipdog" column="kod_tipdog" />
          </call>
        </query>
        <query name="kr_org" as="podr" join="left outer" title="Отделение" dname="ks_vdog">
          <call function="=">
            <column table="a" column="podr" />
            <column table="podr" column="kodp" />
          </call>
        </query>
        <query name="ks_vdoc" as="kod_vdoc" join="left outer" dname="ks_vdog">
          <call function="=">
            <column table="a" column="kod_vdoc" />
            <column table="kod_vdoc" column="kod_vdoc" />
          </call>
        </query>
      </from>
    </query>
    <query name="kv_group_cust_level" class="1" timestamp="28.11.2024 12:13:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_group_cust_level.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group_cust" type="number" column-mandatory="1" as="kod_group_cust" key="1" fixed="1" />
        <column table="a" column="status" type="string" data-size="1" title="" as="status" key="0" />
        <column table="a" column="kod_level_1" type="number" as="kod_level_1" key="0" />
        <column table="a" column="name_level_1" type="string" data-size="200" title="" as="name_level_1" key="0" />
        <column table="a" column="name_level_2" type="string" data-size="200" title="" as="name_level_2" key="0" />
        <column table="a" column="name_level_3" type="string" data-size="200" title="" as="name_level_3" key="0" />
        <column table="a" column="name_level_4" type="string" data-size="200" title="" as="name_level_4" key="0" />
        <column table="a" column="name_level_5" type="string" data-size="200" title="" as="name_level_5" key="0" />
        <column table="a" column="level_num" type="number" title="" as="level_num" key="0" />
        <column table="a" column="num_gr" type="string" data-size="10" column-mandatory="1" title="" as="num_gr" key="0" />
        <column table="a" column="num_cust" type="number" column-mandatory="1" title="" as="num_cust" key="0" />
        <column table="a" column="gr_cust_name" type="string" data-size="200" column-mandatory="1" title="" as="gr_cust_name" key="0" />
        <column table="a" column="fullname" type="string" data-size="250" title="" as="fullname" key="0" />
        <column table="a" column="fin_name" type="string" data-size="250" title="" as="fin_name" key="0" />
        <column table="a" column="num_gr_level_1" type="string" data-size="10" title="" as="num_gr_level_1" key="0" />
        <column table="a" column="num_cust_level_1" type="number" title="" as="num_cust_level_1" key="0" />
        <column table="a" column="kod_level_2" type="number" as="kod_level_2" key="0" />
        <column table="a" column="num_gr_level_2" type="string" data-size="10" title="" as="num_gr_level_2" key="0" />
        <column table="a" column="kod_level_3" type="number" as="kod_level_3" key="0" />
        <column table="a" column="num_gr_level_3" type="string" data-size="10" title="" as="num_gr_level_3" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kv_group_cust_level" as="a" />
      </from>
    </query>
    <query name="kv_okved_level" class="1" timestamp="01.10.2024 12:21:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_okved_level.xml" haskeys="1">
      <select>
        <column table="a" column="kod_okved" type="number" column-mandatory="1" as="kod_okved" key="1" fixed="1" />
        <column table="a" column="okved" type="string" data-size="30" column-mandatory="1" title="" as="okved" key="0" />
        <column table="a" column="name_okved" type="string" data-size="250" column-mandatory="1" title="" as="name_okved" key="0" />
        <column table="a" column="name_level_1" type="string" data-size="250" title="" as="name_level_1" key="0" />
        <column table="a" column="name_level_2" type="string" data-size="250" title="" as="name_level_2" key="0" />
        <column table="a" column="name_level_3" type="string" data-size="250" title="" as="name_level_3" key="0" />
        <column table="a" column="name_level_4" type="string" data-size="250" title="" as="name_level_4" key="0" />
        <column table="a" column="name_level_5" type="string" data-size="250" title="" as="name_level_5" key="0" />
        <column table="a" column="name_level_6" type="string" data-size="250" title="" as="name_level_6" key="0" />
        <column table="a" column="okved_level_1" type="string" data-size="4000" title="" as="okved_level_1" key="0" />
        <column table="a" column="okved_level_2" type="string" data-size="4000" title="" as="okved_level_2" key="0" />
        <column table="a" column="okved_level_3" type="string" data-size="4000" title="" as="okved_level_3" key="0" />
        <column table="a" column="okved_level_4" type="string" data-size="4000" title="" as="okved_level_4" key="0" />
        <column table="a" column="okved_level_5" type="string" data-size="4000" title="" as="okved_level_5" key="0" />
        <column table="a" column="okved_level_6" type="string" data-size="4000" title="" as="okved_level_6" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kv_okved_level" as="a" />
      </from>
    </query>
    <query name="kv_org_pair" class="1" order="name1" timestamp="06.04.2017 14:42:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_org_pair.xml" haskeys="1">
      <select>
        <column table="a" column="kodp1" type="number" comment="код подразделения 1" key="1" as="kodp1" />
        <column table="a" column="name1" type="string" title="Подразделение" comment="наимен. подразделения 1" as="name1" />
        <column table="a" column="kodp2" type="number" title="" comment="код подразделения 2" as="kodp2" />
        <column table="a" column="name2" type="string" title="" comment="наимен. подразделения 2" as="name2" />
        <column table="a" column="kod_usecase" type="number" comment="назначение пары" as="kod_usecase" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kv_org_pair" as="a" />
      </from>
      <order>
        <column column="name1" />
      </order>
    </query>
    <query name="kv_org_sbyt" class="1" timestamp="11.09.2018 01:00:36" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_org_sbyt.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" title="" comment="Код сбытовой органзации или ее подразделения" key="1" as="kodp" />
        <column table="a" column="name" type="string" title="Наименование" comment="Краткое наименование сбыта или его подразделения с выводом сведений о &quot;родителе&quot;." as="name" />
        <column table="a" column="fname" type="string" comment="Наименование сбыта или его подразделения с выводом сведений о &quot;родителе&quot;." title="Полное наименование" as="fname" />
        <column table="a" column="orig_name" type="string" title="" comment="Исходное наименование сбыта или его подразделения без вывода сведений о &quot;родителе&quot;." as="orig_name" />
        <column table="a" column="kodp_sbyt" type="number" title="" comment="Код сбытовой органиизации" as="kodp_sbyt" />
      </select>
      <from>
        <table name="kv_org_sbyt" as="a" view="1" />
      </from>
    </query>
    <query name="kv_usl_el" class="1" timestamp="20.01.2021 05:26:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_usl_el.xml" haskeys="1">
      <select>
        <column table="a" column="kodp_usl" type="number" title="" as="kodp_usl" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="200" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="kv_usl_el" as="a" />
      </from>
    </query>
    <query name="k_house" class="1" timestamp="23.10.2017 18:57:35" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\k_house.xml" haskeys="1">
      <select>
        <column table="a" column="kodd" type="number" title="" as="kodd" key="1" fixed="1" />
        <column table="a" column="kodar" type="number" title="" comment="код старшей улицы" as="kodar" key="0" />
        <column table="a" column="kod_s" type="number" comment="код связи с улицей" as="kod_s" reference="k_strits" refcol="kod" key="0" />
        <column table="a" column="nd" type="number" comment="номер дома" title="Номер дома" as="nd" key="0" />
        <column table="a" column="nd1" type="number" title="" comment="номер углового дома" as="nd1" key="0" />
        <column table="a" column="nd2" type="string" title="" comment="литера" as="nd2" key="0" />
        <column table="a" column="nk" type="string" title="" comment="номер корпуса" as="nk" key="0" />
        <column table="a" column="ind" type="string" title="" comment="индекс" as="ind" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечание" as="remark" key="0" />
        <column table="a" column="flat" type="string" title="" comment="квартира" as="flat" key="0" />
        <column table="a" column="kod_m" type="number" comment="атавизм" as="kod_m" key="0" />
        <column table="a" column="str_korp" type="number" title="" comment="атавизм" as="str_korp" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата модификации" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="пользователь" as="u_m" key="0" />
        <column table="a" column="kod_r" type="number" comment="код родителя" as="kod_r" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kod_td" type="number" comment="код типа дома( подъезд, квартира, комната)" as="kod_td" reference="kk_thous" refcol="kod_td" key="0" />
        <column table="a" column="kod_chet" type="number" comment="код четности 1- нечетная; 2 - четная;" as="kod_chet" key="0" />
        <column table="a" column="str_adr" type="string" title="" comment="строительный адрес" as="str_adr" key="0" />
        <column table="a" column="nstr" type="string" title="" comment="строение" as="nstr" key="0" />
        <column table="a" column="nd1_str" type="string" title="" comment="дополнение к угловому дому" as="nd1_str" key="0" />
        <column table="a" column="vlad" type="string" title="" comment="владение ( москва )" as="vlad" key="0" />
        <column table="a" column="kf_adress_o" type="string" title="Адрес" comment="вспомогательное поле. хранит резальтат работы функции nk_adress.kf_address(n_r =&gt; 0,n_kod =&gt; код дома). актуальность значений поддерживается тригерами на таблицах adr_m, k_strits, k_house" is-name="1" as="kf_adress_o" key="0" />
        <column table="a" column="uch_dost" type="number" title="" comment="номер участка доставки" as="uch_dost" key="0" />
        <column table="a" column="individ" type="number" title="" comment="признак индивидуального жилого дома (1)" as="individ" key="0" />
        <column table="a" column="nd_str" type="string" title="" comment="дполнение к номеру дома" as="nd_str" key="0" />
        <column table="a" column="checked" type="number" title="" as="checked" key="0" />
        <call function="||" as="house_name" title="Дом" key="0">
          <call function="if">
            <call function="is null">
              <column table="a" column="nd" />
            </call>
            <const>''</const>
            <const>' д.'</const>
          </call>
          <call function="trim">
            <call function="lpad">
              <call function="||">
                <call function="int to char">
                  <column table="a" column="nd" />
                </call>
                <column table="a" column="nd_str" />
              </call>
              <const>8</const>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="nd2" />
            </call>
            <const>''</const>
            <call function="||">
              <const>'-'</const>
              <call function="trim">
                <column table="a" column="nd2" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="nd1" />
            </call>
            <const>''</const>
            <call function="||">
              <const>'/'</const>
              <call function="trim">
                <column table="a" column="nd1" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="nd1_str" />
            </call>
            <const>''</const>
            <call function="||">
              <const>' '</const>
              <call function="trim">
                <column table="a" column="nd1_str" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="vlad" />
            </call>
            <const>''</const>
            <call function="||">
              <const>' вл.'</const>
              <call function="trim">
                <column table="a" column="vlad" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="nk" />
            </call>
            <const>''</const>
            <call function="||">
              <const>' к.'</const>
              <call function="trim">
                <column table="a" column="nk" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is null">
              <column table="a" column="nstr" />
            </call>
            <const>''</const>
            <call function="||">
              <const>' стр.'</const>
              <call function="trim">
                <column table="a" column="nstr" />
              </call>
            </call>
          </call>
        </call>
        <call function="||" as="house_ext_name" title="Адрес" key="0">
          <column table="kod_s" column="name" />
          <const>' '</const>
          <column table="this" column="house_name" />
        </call>
        <call function="if" as="flat_name" title="Квартира" key="0">
          <call function="is null">
            <column table="a" column="flat" />
          </call>
          <const>''</const>
          <call function="||">
            <const>'кв.'</const>
            <call function="trim">
              <column table="a" column="flat" />
            </call>
          </call>
        </call>
        <call function="if" as="has_odn" title="Наличие схемы ОДН" comment="0 - нет, 1 -есть (актуально только для kod_td in (10,110)!)" key="0">
          <call function="is not null">
            <column table="kr_object_odn" column="kod_obj" dgroup="max" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_house" as="a">
          <dlink name="kr_object_odn" as="kr_object_odn" table="kr_object_odn" child="kr_object_odn" field="kodd" parent="k_house" back="kr_object_odn" />
          <dlink name="hv_mkd_address" dimension="1" as="hv_mkd_address" table="hv_mkd_address" child="hv_mkd_address" field="kodd" parent="k_house" back="hv_mkd_address" />
          <dlink name="kr_object" as="kr_object" table="kr_object" child="kr_object" field="kodd" parent="k_house" back="kr_object">
            <dlink name="hr_point" as="hr_point" table="hr_point" child="hr_point" field="kod_obj" parent="kr_object" back="hr_point">
              <dlink name="tv_point_link" as="tv_point_link" table="tv_point_link" child="tv_point_link" field="kod_point" parent="hr_point" back="tv_point_link">
                <dlink name="hr_point_pu" dimension="1" as="hr_point_pu" table="hr_point_pu" child="hr_point_pu" field="kod_point_link" parent="tv_point_link" back="hr_point_pu" />
              </dlink>
            </dlink>
          </dlink>
        </table>
        <query name="k_strits" as="kod_s" join="left outer" dname="k_house">
          <call function="=">
            <column table="a" column="kod_s" />
            <column table="kod_s" column="kod" />
          </call>
        </query>
        <query name="kk_thous" as="kod_td" join="left outer" dname="k_house">
          <call function="=">
            <column table="a" column="kod_td" />
            <column table="kod_td" column="kod_td" />
          </call>
        </query>
        <query name="k_house" as="kod_r" join="left outer" dname="k_house">
          <call function="=">
            <column table="a" column="kod_r" />
            <column table="kod_r" column="kodd" />
          </call>
        </query>
      </from>
    </query>
    <query name="k_strits" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\k_strits.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="name" type="string" comment="наименование" vid="1" title="Улица" as="name" key="0" />
        <column table="a" column="name_old" type="string" title="" comment="наименование старое" as="name_old" key="0" />
        <column table="a" column="kodar" type="number" title="" comment="атавизм" as="kodar" key="0" />
        <column table="a" column="kodnp" type="number" title="" comment="атавизм" as="kodnp" key="0" />
        <column table="a" column="kod_d" type="number" comment="атавизм" as="kod_d" key="0" />
        <column table="a" column="kodsf" type="number" title="" comment="атавизм" as="kodsf" key="0" />
        <column table="a" column="ok_reg" type="string" title="" comment="дополнительное наименование" as="ok_reg" key="0" />
        <column table="a" column="kod_m" type="number" comment="код связи с мп тбл. adr_m" as="kod_m" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="k_parent" type="number" title="" comment="код родителя" as="k_parent" reference="k_strits" refcol="kod" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="дата модификации" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="пользователь" as="u_m" key="0" />
        <column table="a" column="uch" type="number" title="" comment="участок для быта" as="uch" key="0" />
        <column table="a" column="checked" type="number" title="" as="checked" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="k_strits" as="a" />
        <query name="k_strits" as="k_parent" join="left outer" dname="k_strits">
          <call function="=">
            <column table="a" column="k_parent" />
            <column table="k_parent" column="kod" />
          </call>
        </query>
        <query name="adr_m" as="kod_m" join="left outer" dname="k_strits" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
      </from>
    </query>
    <query name="mv_org_sbyt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\mv_org_sbyt.xml" haskeys="1">
      <select>
        <call function="rowid" as="mv_org_sbyt_id" key="1" />
        <column table="a" column="kodp" type="number" title="" as="kodp" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="fname" type="string" title="" as="fname" />
        <column table="a" column="orig_name" type="string" title="" as="orig_name" />
        <column table="a" column="kodp_sbyt" type="number" title="" as="kodp_sbyt" />
        <column table="a" column="innandkpp" type="string" title="" as="innandkpp" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="mv_org_sbyt" as="a" />
      </from>
    </query>
    <query name="mv_point_plombs" class="1" timestamp="24.04.2018 08:05:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\mv_point_plombs.xml" haskeys="1">
      <select>
        <call function="rowid" as="mv_point_plombs_id" key="1" />
        <column table="a" column="kod_point_pu" type="number" as="kod_point_pu" />
        <column table="a" column="plomba" type="string" title="" as="plomba" />
        <column table="a" column="fio" type="string" title="" as="fio" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="mv_point_plombs" as="a" />
        <query name="hr_point_pu" as="kod_pu" join="left outer" dname="mv_point_plombs">
          <call function="=">
            <column table="a" column="kod_point_pu" />
            <column table="kod_pu" column="kod_point_pu" />
          </call>
        </query>
      </from>
    </query>
    <query name="mv_seti" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\mv_seti.xml" haskeys="1">
      <select>
        <call function="rowid" as="mv_seti_id" key="1" />
        <column table="a" column="aname" type="string" title="" as="aname" />
        <column table="a" column="kod" type="number" title="" as="kod" />
        <column table="a" column="sname" type="string" title="" as="sname" />
        <column table="a" column="ispes" type="number" title="" as="ispes" />
        <column table="a" column="kod_ecls" type="number" as="kod_ecls" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="mv_seti" as="a" />
      </from>
    </query>
    <query name="nk_ats_data" class="1" timestamp="05.09.2024 19:12:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nk_ats_data.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ats_data" type="number" column-mandatory="1" as="kod_ats_data" key="1" fixed="1" />
        <column table="a" column="file_type_mask" type="string" data-size="250" title="" as="file_type_mask" key="0" />
        <column table="a" column="value_type" type="string" data-size="250" title="" as="value_type" key="0" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="pr_minus" type="number" column-mandatory="1" title="" as="pr_minus" key="0" />
        <column table="a" column="fullname" type="string" data-size="1000" title="" as="fullname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nk_ats_data" as="a" />
      </from>
    </query>
    <query name="nk_tcalc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nk_tcalc.xml" haskeys="1">
      <select>
        <column table="a" column="calctype" type="number" title="" as="calctype" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="type" type="number" title="" comment="используется&#xA;0 -везде&#xA;1 -только по точкам&#xA;2 -только по объектам" as="type" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nk_tcalc" as="a"></table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="nk_tcalc">
          <call function="=">
            <column table="a" column="tep_el"></column>
            <column table="tep_el" column="tep_el"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account" class="1" timestamp="08.06.2022 13:03:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account.xml" haskeys="1">
      <select>
        <column table="a" column="kod_account" type="number" key-dimension="kod_account" as="kod_account" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="ym" type="number" title="Отчетный период начисления" dimension="ym" as="ym" key="0" />
        <column table="a" column="num_priem" type="number" as="num_priem" key="0" />
        <column table="a" column="dat_priem" type="date" as="dat_priem" key="0" />
        <column table="a" column="rym" type="number" title="Начисление/перерасчет за период" as="rym" key="0" />
        <column table="a" column="tarif" type="number" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_f23" type="number" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0" />
        <column table="a" column="voltage" type="number" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="a" column="vid_t" type="number" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="cust" type="number" fact="nr_account_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" as="price" key="0" />
        <column table="a" column="nachisl" type="number" as="nachisl" key="0" />
        <column table="a" column="info" type="string" as="info" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="kod_numobj_sa" type="number" comment="код объекта в договоре" as="kod_numobj_sa" reference="kr_numobj" key="0" />
        <column table="a" column="kod_f46" type="number" as="kod_f46" reference="ks_46" refcol="kod_f46" key="0" />
        <column table="a" column="pr_hand" type="number" as="pr_hand" key="0" />
        <column table="a" column="den" type="number" as="den" key="0" />
        <column table="a" column="dat_promezhut" type="date" as="dat_promezhut" key="0" />
        <column table="a" column="pr_sf" type="number" as="pr_sf" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_vid_act" type="number" as="kod_vid_act" reference="ss_vid_act" refcol="kod_vid_act" key="0" />
        <column table="a" column="vist_day" type="number" comment="день выставления промежути" as="vist_day" key="0" />
        <column table="a" column="kod_bu_akt" type="number" comment="код акта безучетного ползования" as="kod_bu_akt" reference="hr_bu_akt" refcol="kod_bu_akt" key="0" />
        <column table="a" column="raschet" type="string" comment="вид расчета" as="raschet" key="0" />
        <column table="a" column="kod_tarif_rate" type="number" comment="код ставки тарифа. используется временно в расчете, fk нет!!!" as="kod_tarif_rate" reference="ks_tarif_rate" refcol="kod_tarif_rate" key="0" />
        <column table="a" column="vid_avans" type="number" comment="для промежути" as="vid_avans" key="0" />
        <column table="a" column="kod_tar_free" type="number" as="kod_tar_free" reference="ks_tar_free" refcol="kod_tar_free" key="0" />
        <column table="a" column="kod_account_parent" type="number" comment="код родительской записи (для vid_t=77,22 и пр))" as="kod_account_parent" reference="nr_account" refcol="kod_account" key="0" />
        <column table="a" column="cust_old" type="number" comment="старое значение" as="cust_old" key="0" />
        <column table="a" column="kodinterval" type="number" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" reference="hk_dhh" refcol="kod_dhh" key="0" />
        <column table="a" column="pr_gener" type="number" as="pr_gener" key="0" />
        <column table="a" column="kod_osn_pererasch" type="number" comment="код основания перерасчета" as="kod_osn_pererasch" reference="hk_osn_pererasch" refcol="kod_osn_pererasch" key="0" />
        <column table="a" column="kod_plan" type="number" as="kod_plan" key="0" />
        <column table="nr_account_sost_16" column="tarif" as="tarif16" dgroup="max" key="0" />
        <column table="nr_account_sost_2" column="tarif" as="tarif2" dgroup="max" key="0" />
        <column table="sr_facras_text" column="kod_ras" dgroup="max" as="kod_ras" key="0" />
        <call function="nvl" as="kod_tarif_bu" key="0">
          <call function="nullif">
            <column table="tarif_ext" column="kod_tarif_bu" />
            <const>0</const>
          </call>
          <column table="tarif_ext2" column="kod_tarif_bu" />
        </call>
        <call function="ng_account.f_category_account" as="category" type="number" key="0">
          <column table="a" column="kod_account" />
        </call>
        <call function="decode" as="category_fik" key="0">
          <call function="ng_account.f_category_account_fik" type="number">
            <column table="a" column="kod_account" />
          </call>
          <const>0</const>
          <const>1</const>
          <call function="ng_account.f_category_account_fik" type="number">
            <column table="a" column="kod_account" />
          </call>
        </call>
        <call function="||" as="kod_gr" key="0">
          <column table="this" column="category" />
          <const>','</const>
          <column table="a" column="voltage" />
          <const>','</const>
          <column table="a" column="kodinterval" />
        </call>
        <call function="||" as="gr_name" title="Группа" key="0">
          <call function="||">
            <column table="category" column="name" />
            <const>', '</const>
          </call>
          <column table="voltage" column="abbr" />
          <call function="case">
            <call function="when">
              <call function="!=">
                <column table="a" column="kodinterval" />
                <const>24</const>
              </call>
              <call function="||">
                <const>', '</const>
                <column table="kodinterval" column="name" />
              </call>
            </call>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_account" as="a">
          <dlink name="nr_account_sost" as="nr_account_sost_16" table="nr_account_sost" child="nr_account_sost" field="kod_account" parent="nr_account" back="nr_account_sost">
            <where>
              <call function="in">
                <column table="nr_account_sost_16" column="tip_tarif_sost" />
                <call function="array">
                  <const>5</const>
                  <const>16</const>
                </call>
              </call>
            </where>
          </dlink>
          <dlink name="nr_account_sost" as="nr_account_sost_2" table="nr_account_sost" child="nr_account_sost" field="kod_account" parent="nr_account" back="nr_account_sost">
            <where>
              <call function="in">
                <column table="nr_account_sost_2" column="tip_tarif_sost" />
                <call function="array">
                  <const>2</const>
                </call>
              </call>
            </where>
          </dlink>
          <dlink name="nr_account_nal" as="nr_account_nal" table="nr_account_nal" child="nr_account_nal" field="kod_account" parent="nr_account" back="nr_account_nal" />
          <dlink name="sr_facras_text" as="sr_facras_text" table="sr_facras_text" child="sr_facras_text" field="kod_account" parent="nr_account" back="sr_facras_text" />
          <link name="tarif" as="tarif" table="ks_tarif" child="nr_account" field="tarif" parent="ks_tarif" back="nr_account">
            <link name="tarif_ext" as="tarif_ext" table="ks_tarif_ext" child="ks_tarif" field="tarif_ext" parent="ks_tarif_ext" back="ks_tarif" />
          </link>
        </table>
        <query name="ks_tarif_rate" as="kod_tarif_rate" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_tarif_rate" />
            <column table="kod_tarif_rate" column="kod_tarif_rate" />
          </call>
        </query>
        <query name="hk_osn_pererasch" as="kod_osn_pererasch" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_osn_pererasch" />
            <column table="kod_osn_pererasch" column="kod_osn_pererasch" />
          </call>
        </query>
        <query name="hr_bu_akt" as="kod_bu_akt" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_bu_akt" />
            <column table="kod_bu_akt" column="kod_bu_akt" />
          </call>
        </query>
        <query name="hs_23" as="kod_f23" join="left outer" dname="nr_account" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23" />
            <column table="kod_f23" column="kod_f23" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="nr_account" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dimension="kod_numobj" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj_sa" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_numobj_sa" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="ks_46" as="kod_f46" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_f46" />
            <column table="kod_f46" column="kod_f46" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="tarif" dname="nr_account">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="ks_tar_free" as="kod_tar_free" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_tar_free" />
            <column table="kod_tar_free" column="kod_tar_free" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dname="nr_account" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="ss_vid_act" as="kod_vid_act" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_vid_act" />
            <column table="kod_vid_act" column="kod_vid_act" />
          </call>
        </query>
        <query name="nr_account" as="kod_account_parent" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_account_parent" />
            <column table="kod_account_parent" column="kod_account" />
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
        <query name="hk_dhh" as="kod_dhh" join="left outer" dname="nr_account">
          <call function="=">
            <column table="a" column="kod_dhh" />
            <column table="kod_dhh" column="kod_dhh" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dimension="voltage" dname="nr_account" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif16" join="left outer" dname="nr_account">
          <call function="=">
            <column table="this" column="tarif16" />
            <column table="tarif16" column="tarif" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif2" join="left outer" dname="nr_account">
          <call function="=">
            <column table="this" column="tarif2" />
            <column table="tarif2" column="tarif" />
          </call>
          <link name="tarif_ext" as="tarif_ext2" table="ks_tarif_ext" child="ks_tarif" field="tarif_ext" parent="ks_tarif_ext" back="ks_tarif" />
        </query>
        <query name="ks_tarif_bu" as="kod_tarif_bu" join="left outer" dname="nr_account">
          <call function="=">
            <column table="kod_tarif_bu" column="kod_tarif_bu" />
            <column table="this" column="kod_tarif_bu" />
          </call>
        </query>
        <query name="kr_calc_list" as="ym" join="left outer" dname="nr_account">
          <call function="and">
            <call function="=">
              <column table="ym" column="ym" />
              <column table="a" column="ym" />
            </call>
          </call>
        </query>
        <query name="price_cat" as="category" join="left outer" dname="nr_account">
          <call function="=">
            <column table="this" column="category" />
            <column table="category" column="category" />
          </call>
        </query>
        <query name="price_cat" as="category_fik" join="left outer" dname="nr_account">
          <call function="=">
            <column table="this" column="category_fik" />
            <column table="category_fik" column="category" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dname="nr_account">
          <call function="=">
            <column table="this" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account_hours" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account_hours.xml" haskeys="1">
      <select>
        <column table="a" column="kod_acc_hours" type="number" as="kod_acc_hours" key="1" fixed="1"></column>
        <column table="a" column="kod_priem" type="number" as="kod_priem" reference="nr_priem" refcol="kod_priem" key="0"></column>
        <column table="a" column="kod_account" type="number" as="kod_account" reference="nr_account" refcol="kod_account" key="0"></column>
        <column table="a" column="dat_out" type="date" comment="дата: день час съема расхода" as="dat_out" key="0"></column>
        <column table="a" column="u_m" type="string" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="kod_osn_tar" type="number" comment="код типа тарифа" as="kod_osn_tar" reference="nk_osn_free_tar" refcol="kod_osn_tar" key="0"></column>
        <column table="a" column="cust" type="number" comment="кол-во энергии" as="cust" key="0"></column>
        <column table="a" column="price" type="number" comment="тариф в руб" as="price" key="0"></column>
        <column table="a" column="cust_plan" type="number" comment="плановое почасовое потребление" as="cust_plan" key="0"></column>
        <column table="a" column="cust_fact" type="number" comment="фактическое почасовое потребление" as="cust_fact" key="0"></column>
        <column table="a" column="season" type="number" comment="0 -зима, 1- лето" as="season" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_account_hours" as="a"></table>
        <query name="nk_osn_free_tar" as="kod_osn_tar" join="left outer" dname="nr_account_hours">
          <call function="=">
            <column table="a" column="kod_osn_tar"></column>
            <column table="kod_osn_tar" column="kod_osn_tar"></column>
          </call>
        </query>
        <query name="nr_account" as="kod_account" join="left outer" dname="nr_account_hours">
          <call function="=">
            <column table="a" column="kod_account"></column>
            <column table="kod_account" column="kod_account"></column>
          </call>
        </query>
        <query name="nr_priem" as="kod_priem" join="left outer" dname="nr_account_hours">
          <call function="=">
            <column table="a" column="kod_priem"></column>
            <column table="kod_priem" column="kod_priem"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account_hpriem" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account_hpriem.xml" haskeys="1">
      <select>
        <column table="a" column="kod_priem" type="number" comment="код приемки" as="kod_priem" key="1" fixed="1"></column>
        <column table="a" column="dat_out" type="date" comment="дата час" as="dat_out" key="0"></column>
        <column table="a" column="season" type="number" comment="временно не используется! сезон: 0 - зима, 1 - лето" as="season" key="0"></column>
        <column table="a" column="out" type="number" comment="расход после снятия транзита" as="out" key="0"></column>
        <column table="a" column="pr_vid" type="number" comment="код уровня контроля потребления: 1 - на договоре, 2 - на объекте, 3 - смешанный; код ошибки или 0, если нет регламента" as="pr_vid" key="0"></column>
        <column table="a" column="power" type="number" comment="коэффициент размазывания" as="power" key="0"></column>
        <column table="a" column="out_before" type="number" comment="расход до снятия транзита" as="out_before" key="0"></column>
        <column table="a" column="out_before_transit" type="number" comment="расход до снятия транзита (переразложенный для вычитания)" as="out_before_transit" key="0"></column>
        <column table="a" column="power_transit" type="number" comment="коэффициент размазывания (только для ip_gis=2)" as="power_transit" key="0"></column>
        <column table="a" column="old_power" type="number" comment="подсветка для генерирующей мощности" as="old_power" key="0"></column>
        <column table="a" column="new_power" type="number" comment="подсветка для сетевой мощности" as="new_power" key="0"></column>
        <column table="a" column="pr_gp" type="number" comment="вид типового графика / каким способом получен график" as="pr_gp" key="0"></column>
        <column table="kod_account_priem" column="kod_account_priem" as="kod_account_priem" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_account_hpriem" as="a"></table>
        <query name="nr_priem" as="kod_priem" join="left outer" dname="nr_account_hpriem">
          <call function="=">
            <column table="a" column="kod_priem"></column>
            <column table="kod_priem" column="kod_priem"></column>
          </call>
        </query>
        <query name="nr_account_priem" as="kod_account_priem" join="left outer" dname="nr_account_hpriem">
          <call function="=">
            <column table="a" column="kod_priem"></column>
            <column table="kod_account_priem" column="kod_priem"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account_nal" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nal" type="number" as="kod_nal" key="1" fixed="1"></column>
        <column table="a" column="kod_account" type="number" as="kod_account" reference="nr_account" refcol="kod_account" key="0"></column>
        <column table="a" column="tax" type="number" title="" as="tax" key="0"></column>
        <column table="a" column="nal" type="number" title="" as="nal" key="0"></column>
        <column table="a" column="pr_add" type="number" title="" as="pr_add" key="0"></column>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" reference="ss_nalog_tax" refcol="kod_naltax" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_account_nal" as="a"></table>
        <query name="nr_account" as="kod_account" join="left outer" dname="nr_account_nal">
          <call function="=">
            <column table="a" column="kod_account"></column>
            <column table="kod_account" column="kod_account"></column>
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="nr_account_nal">
          <call function="=">
            <column table="a" column="kod_nal"></column>
            <column table="kod_nal" column="kod_nal"></column>
          </call>
        </query>
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="nr_account_nal">
          <call function="=">
            <column table="a" column="kod_naltax"></column>
            <column table="kod_naltax" column="kod_naltax"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account_priem" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account_priem.xml" haskeys="1">
      <select>
        <column table="a" column="kod_account_priem" type="number" as="kod_account_priem" key="1" fixed="1"></column>
        <column table="a" column="voltage" type="number" comment="код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0"></column>
        <column table="a" column="kod_priem_obj" type="number" as="kod_priem_obj" reference="nr_priem_obj" refcol="kod_priem_obj" key="0"></column>
        <column table="a" column="tarif" type="number" comment="код тарифа" as="tarif" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="kod_priem" type="number" as="kod_priem" reference="nr_priem" refcol="kod_priem" key="0"></column>
        <column table="a" column="kod_account" type="number" as="kod_account" reference="nr_account" refcol="kod_account" key="0"></column>
        <column table="a" column="kod_numobj_sa" type="number" comment="код объекта в договоре" as="kod_numobj_sa" reference="kr_numobj" key="0"></column>
        <column table="a" column="cust" type="number" comment="количество" as="cust" key="0"></column>
        <column table="a" column="price" type="number" comment="цена" as="price" key="0"></column>
        <column table="a" column="info" type="string" as="info" key="0"></column>
        <column table="a" column="poteri" type="number" comment="потери" as="poteri" key="0"></column>
        <column table="a" column="raschet" type="string" comment="вид расчета" as="raschet" key="0"></column>
        <column table="a" column="kod_tarif_rate" type="number" comment="код ставки тарифа. используется временно в расчете, fk нет!!!" as="kod_tarif_rate" key="0"></column>
        <column table="a" column="vid_t" type="number" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0"></column>
        <column table="a" column="kod_tar_free" type="number" as="kod_tar_free" reference="ks_tar_free" refcol="kod_tar_free" key="0"></column>
        <column table="a" column="kodinterval" type="number" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0"></column>
        <column table="a" column="kod_account_priem_parent" type="number" comment="код родительского 17-го начисления" as="kod_account_priem_parent" key="0"></column>
        <column table="a" column="pr_gener" type="number" as="pr_gener" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_account_priem" as="a"></table>
        <query name="hk_voltage" as="voltage" join="left outer" dname="nr_account_priem" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage"></column>
            <column table="voltage" column="voltage"></column>
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj_sa" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kod_numobj_sa"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="tarif"></column>
            <column table="tarif" column="tarif"></column>
          </call>
        </query>
        <query name="ks_tar_free" as="kod_tar_free" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kod_tar_free"></column>
            <column table="kod_tar_free" column="kod_tar_free"></column>
          </call>
        </query>
        <query name="nr_account" as="kod_account" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kod_account"></column>
            <column table="kod_account" column="kod_account"></column>
          </call>
        </query>
        <query name="nr_priem" as="kod_priem" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kod_priem"></column>
            <column table="kod_priem" column="kod_priem"></column>
          </call>
        </query>
        <query name="nr_priem_obj" as="kod_priem_obj" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kod_priem_obj"></column>
            <column table="kod_priem_obj" column="kod_priem_obj"></column>
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dname="nr_account_priem" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t"></column>
            <column table="vid_t" column="vid_t"></column>
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="nr_account_priem">
          <call function="=">
            <column table="a" column="kodinterval"></column>
            <column table="kodinterval" column="kodinterval"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_account_sost" class="1" haskeys="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_account_sost.xml">
      <select>
        <column table="a" column="kod_account_sost" type="number" as="kod_account_sost" key="1" fixed="1" />
        <column table="a" column="kod_account_priem" type="number" as="kod_account_priem" reference="nr_account_priem" refcol="kod_account_priem" key="0" />
        <column table="a" column="tip_tarif_sost" type="number" title="" as="tip_tarif_sost" reference="kk_tarif_sost" refcol="tip_tarif_sost" key="0" />
        <column table="a" column="cust" type="number" title="" as="cust" key="0" />
        <column table="a" column="price" type="number" title="Ставка тарифа" as="price" key="0" />
        <column table="a" column="kod_account" type="number" as="kod_account" reference="nr_account" refcol="kod_account" key="0" />
        <column table="a" column="tarif" type="number" title="" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <call function="*" as="nachisl">
          <column table="this" column="cust" />
          <column table="this" column="price" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="nr_account_sost" as="a" />
        <query name="ks_tarif" as="tarif" join="left outer" dname="nr_account_sost">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="kk_tarif_sost" as="tip_tarif_sost" join="left outer" dname="nr_account_sost">
          <call function="=">
            <column table="a" column="tip_tarif_sost" />
            <column table="tip_tarif_sost" column="tip_tarif_sost" />
          </call>
        </query>
        <query name="nr_account" as="kod_account" join="left outer" dname="nr_account_sost">
          <call function="=">
            <column table="a" column="kod_account" />
            <column table="kod_account" column="kod_account" />
          </call>
        </query>
        <query name="nr_account_priem" as="kod_account_priem" join="left outer" dname="nr_account_sost">
          <call function="=">
            <column table="a" column="kod_account_priem" />
            <column table="kod_account_priem" column="kod_account_priem" />
          </call>
        </query>
      </from>
    </query>
    <query name="nr_ats_data" class="1" timestamp="05.09.2024 19:12:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_ats_data.xml" haskeys="1">
      <select>
        <call function="||" as="nr_ats_data_id" type="string" key="1">
          <column table="a" column="kod_ats_data" />
          <const>'-'</const>
          <column table="a" column="kod_gtp" />
          <const>'-'</const>
          <column table="a" column="gtp_id" />
          <const>'-'</const>
          <column table="a" column="gtp_gen_id" />
          <const>'-'</const>
          <column table="a" column="ym" />
          <const>'-'</const>
          <column table="a" column="file_type" />
          <const>'-'</const>
          <column table="a" column="value_type" />
        </call>
        <column table="a" column="kod_ats_data" type="number" column-mandatory="1" as="kod_ats_data" />
        <column table="a" column="kod_gtp" type="number" column-mandatory="1" as="kod_gtp" reference="hs_gtp" refcol="kod_gtp" />
        <column table="a" column="gtp_id" type="string" data-size="250" column-mandatory="1" title="" as="gtp_id" />
        <column table="a" column="gtp_gen_id" type="string" data-size="250" column-mandatory="1" title="" as="gtp_gen_id" />
        <column table="a" column="ym" type="number" column-mandatory="1" title="" as="ym" />
        <column table="a" column="file_type" type="string" data-size="250" column-mandatory="1" title="" as="file_type" />
        <column table="a" column="value_type" type="string" data-size="250" column-mandatory="1" title="" as="value_type" />
        <column table="a" column="file_id" type="string" data-size="40" title="" as="file_id" />
        <column table="a" column="value" type="number" title="" as="value" />
        <column table="a" column="price" type="number" title="" as="price" />
        <column table="a" column="money" type="number" title="" as="money" />
        <column table="a" column="penalty" type="number" title="" as="penalty" />
        <column table="a" column="u_m" type="string" data-size="20" column-mandatory="1" title="" as="u_m" />
        <column table="a" column="d_m" type="TIMESTAMP(6)" column-mandatory="1" title="" as="d_m" />
        <column table="a" column="participant" type="string" data-size="250" title="" as="participant" />
        <column table="a" column="participant_id" type="string" data-size="100" title="" as="participant_id" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="nr_ats_data" as="a" />
        <query name="hs_gtp" as="kod_gtp" join="left outer" dname="nr_ats_data">
          <call function="=">
            <column table="a" column="kod_gtp" />
            <column table="kod_gtp" column="kod_gtp" />
          </call>
        </query>
        <query name="nk_ats_data" as="kod_ats_data" join="left outer" dname="nr_ats_data">
          <call function="=">
            <column table="a" column="kod_ats_data" />
            <column table="kod_ats_data" column="kod_ats_data" />
          </call>
        </query>
      </from>
    </query>
    <query name="nr_calc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_calc.xml" haskeys="1">
      <select>
        <column table="a" column="kodcalc" type="number" title="" as="kodcalc" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="calctype" type="number" title="" as="calctype" reference="nk_tcalc" refcol="calctype" key="0"></column>
        <column table="a" column="mes_b" type="number" title="" as="mes_b" key="0"></column>
        <column table="a" column="mes_e" type="number" title="" as="mes_e" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="kod_point" type="number" as="kod_point" reference="hr_point" refcol="kod_point" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_calc" as="a"></table>
        <query name="hr_point" as="kod_point" join="left outer" dname="nr_calc">
          <call function="=">
            <column table="a" column="kod_point"></column>
            <column table="kod_point" column="kod_point"></column>
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="nr_calc" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="nk_tcalc" as="calctype" join="left outer" dname="nr_calc">
          <call function="=">
            <column table="a" column="calctype"></column>
            <column table="calctype" column="calctype"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nr_priem" class="1" timestamp="13.05.2020 05:33:33" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_priem.xml" haskeys="1">
      <select>
        <column table="a" column="kod_priem" type="number" key-dimension="kod_priem" as="kod_priem" key="1" fixed="1" />
        <column table="a" column="ym" type="number" dimension="ym" as="ym" key="0" />
        <column table="a" column="num_priem" type="number" as="num_priem" key="0" />
        <column table="a" column="kod_point_har" type="number" comment="код характеристики ту" as="kod_point_har" reference="hr_point_har" refcol="kod_point_har" key="0" />
        <column table="a" column="kod_point_rasx" type="number" as="kod_point_rasx" reference="hr_point_rasx" refcol="kod_point_rasx" key="0" />
        <column table="a" column="kod_point_ini" type="number" as="kod_point_ini" reference="hr_point_ini" refcol="kod_point_ini" key="0" />
        <column table="a" column="calctype" type="number" as="calctype" reference="nk_tcalc" refcol="calctype" key="0" />
        <column table="a" column="kod_point" type="number" comment="код ту" as="kod_point" reference="hr_point" refcol="kod_point" key="0" />
        <column table="a" column="readprev" type="number" as="readprev" key="0" />
        <column table="a" column="readlast" type="number" title="Текущее показание" as="readlast" key="0" />
        <column table="a" column="outcounter" type="number" as="outcounter" key="0" />
        <column table="a" column="outadd" type="number" as="outadd" key="0" />
        <column table="a" column="out" type="number" fact="nr_priem_out" agg="sum" as="out" key="0" />
        <column table="a" column="dayspower" type="number" as="dayspower" key="0" />
        <column table="a" column="power" type="number" as="power" key="0" />
        <column table="a" column="prim" type="string" as="prim" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="dat_out" type="date" as="dat_out" key="0" />
        <column table="a" column="potcounter" type="number" comment="потери суммарные по счетчику" as="potcounter" key="0" />
        <column table="a" column="pr_nominus" type="number" as="pr_nominus" key="0" />
        <column table="a" column="pr_hand" type="number" as="pr_hand" key="0" />
        <column table="a" column="tn" type="number" as="tn" key="0" />
        <column table="a" column="kod_priem_obj" type="number" as="kod_priem_obj" reference="nr_priem_obj" refcol="kod_priem_obj" key="0" />
        <column table="a" column="pottype" type="number" comment="0 - по расчету&#xA;1 - по фиксированному  % потерь" as="pottype" key="0" />
        <column table="a" column="potpercent" type="number" as="potpercent" key="0" />
        <column table="a" column="transit" type="number" as="transit" key="0" />
        <column table="a" column="kod_point_grp" type="number" as="kod_point_grp" reference="hr_point_grparent" refcol="kod_point_grp" key="0" />
        <column table="a" column="pokaz_enter" type="string" comment="используется для приемки (вкладка показания) &quot;а&quot;- автомат. ввод, &quot;p&quot;- ручной ввод, пусто данные не менялись" as="pokaz_enter" key="0" />
        <column table="a" column="tg_f" type="number" comment="измеренное значение tg_f в точке учета" as="tg_f" key="0" />
        <column table="a" column="ndocounter" type="number" comment="в т.ч. недоучет по счетчику." as="ndocounter" key="0" />
        <column table="a" column="sk_tes" type="number" comment="признак того кто редактировал поле последних показаний (только для kod_esys = 1); 0 - никто не редактировал/ 1- сетевая компания / 2- тэс / 3 - оба" as="sk_tes" key="0" />
        <column table="a" column="norm_pot" type="number" comment="нормативные потери, как заданный процент от всех транзитов" as="norm_pot" key="0" />
        <column table="a" column="sso" type="number" as="sso" key="0" />
        <column table="a" column="readlast_ecp" type="number" comment="показания потребителя с эцп" as="readlast_ecp" key="0" />
        <column table="a" column="osn_pr" type="number" comment="признак того, что прибор (контрольный или основной) участвует в расчетах" as="osn_pr" key="0" />
        <call function="nvl" as="voltage" type="number" key="0">
          <column table="kod_point_tar" column="voltage" />
          <column table="kod_point_tar1" column="voltage" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_priem" as="a">
          <link name="kod_point_ini" as="kod_point_ini1" table="hr_point_ini" child="nr_priem" field="kod_point_ini" parent="hr_point_ini" back="nr_priem">
            <link name="kod_point_tar" as="kod_point_tar" table="hr_point_tar" child="hr_point_ini" field="kod_point_tar" parent="hr_point_tar" back="hr_point_ini">
              <!--<link name="voltage" dimension="voltage"/>-->
            </link>
          </link>
          <link name="kod_point_rasx" as="kod_point_rasx1" table="hr_point_rasx" child="nr_priem" field="kod_point_rasx" parent="hr_point_rasx" back="nr_priem">
            <link name="kod_point_tar" as="kod_point_tar1" table="hr_point_tar" child="hr_point_rasx" field="kod_point_tar" parent="hr_point_tar" back="hr_point_rasx">
              <!--<link name="voltage" as="voltage1" dimension="voltage"/>-->
            </link>
          </link>
          <link name="kod_priem_obj" as="kod_priem_obj1" table="nr_priem_obj" child="nr_priem" field="kod_priem_obj" parent="nr_priem_obj" back="nr_priem">
            <link name="kod_numobj" dimension="kod_numobj" as="kod_numobj" table="kr_numobj" child="nr_priem_obj" field="kod_numobj" parent="kr_numobj" back="nr_priem_obj">
              <link name="kod_obj" dimension="1" as="kod_obj" table="kr_object" child="kr_numobj" field="kod_obj" parent="kr_object" back="kr_numobj" />
            </link>
            <link name="tarif" dimension="tarif" as="tarif" table="ks_tarif" child="nr_priem_obj" field="tarif" parent="ks_tarif" back="nr_priem_obj" />
          </link>
          <dlink name="ar_point" dimension="1" as="ar_point" table="ar_point" child="ar_point" field="kod_priem" parent="nr_priem" back="ar_point">
            <link name="kod_rsk" as="kod_rsk" table="hg_controlpoint_net_pl_getrsk" child="ar_point" field="kod_rsk" parent="hg_controlpoint_net_pl_getrsk" back="ar_point" />
            <link name="kod_net" as="kod_net" table="hg_controlpoint_net_pl_getorgs" child="ar_point" field="kod_net" parent="hg_controlpoint_net_pl_getorgs" back="ar_point" />
            <link name="kod_pwrcompany" as="kod_pwrcompany" table="hg_controlpoint_net_pl_getorgs2" child="ar_point" field="kod_pwrcompany" parent="hg_controlpoint_net_pl_getorgs2" back="ar_point" />
          </dlink>
        </table>
        <query name="hr_point_rasx" as="kod_point_rasx" join="left outer" dname="nr_priem">
          <call function="=">
            <column table="a" column="kod_point_rasx" />
            <column table="kod_point_rasx" column="kod_point_rasx" />
          </call>
        </query>
        <query name="nk_tcalc" as="calctype" join="left outer" dname="nr_priem">
          <call function="=">
            <column table="a" column="calctype" />
            <column table="calctype" column="calctype" />
          </call>
        </query>
        <query name="nr_priem_obj" as="kod_priem_obj" join="left outer" dname="nr_priem">
          <call function="=">
            <column table="a" column="kod_priem_obj" />
            <column table="kod_priem_obj" column="kod_priem_obj" />
          </call>
        </query>
        <query name="hr_point_grparent" as="kod_point_grp" join="left outer" dname="nr_priem">
          <call function="=">
            <column table="a" column="kod_point_grp" />
            <column table="kod_point_grp" column="kod_point_grp" />
          </call>
        </query>
        <query name="hr_point_har" as="kod_point_har" join="left outer" dname="nr_priem" title="Характеристика ТУ">
          <call function="=">
            <column table="a" column="kod_point_har" />
            <column table="kod_point_har" column="kod_point_har" />
          </call>
        </query>
        <query name="hr_point_ini" as="kod_point_ini" join="left outer" dname="nr_priem">
          <call function="=">
            <column table="a" column="kod_point_ini" />
            <column table="kod_point_ini" column="kod_point_ini" />
          </call>
        </query>
        <query name="hr_point" as="kod_point" join="left outer" dimension="1" dname="nr_priem">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
        <query name="hk_voltage" as="voltage" dimension="voltage" join="left outer" dname="nr_priem" title="Уровень напряжения">
          <call function="=">
            <column table="voltage" column="voltage" />
            <column table="this" column="voltage" />
          </call>
        </query>
      </from>
    </query>
    <query name="nr_priem_obj" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nr_priem_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_priem_obj" type="number" as="kod_priem_obj" key="1" fixed="1"></column>
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0"></column>
        <column table="a" column="tarif" type="number" title="" as="tarif" reference="ks_tarif" refcol="tarif" key="0"></column>
        <column table="a" column="ym" type="number" title="" as="ym" key="0"></column>
        <column table="a" column="dat_priem" type="date" title="" as="dat_priem" key="0"></column>
        <column table="a" column="kod_f23" type="number" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0"></column>
        <column table="a" column="calcflag" type="number" title="" as="calcflag" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="num_priem" type="number" title="" as="num_priem" key="0"></column>
        <column table="a" column="calctype" type="number" title="" as="calctype" reference="nk_tcalc" refcol="calctype" key="0"></column>
        <column table="a" column="regime" type="number" title="" as="regime" key="0"></column>
        <column table="a" column="regimp" type="number" title="" as="regimp" key="0"></column>
        <column table="a" column="hours" type="number" title="" as="hours" key="0"></column>
        <column table="a" column="ppris" type="number" title="" as="ppris" key="0"></column>
        <column table="a" column="pset" type="number" title="" as="pset" key="0"></column>
        <column table="a" column="tp" type="number" title="" as="tp" key="0"></column>
        <column table="a" column="skidkar" type="number" title="" as="skidkar" key="0"></column>
        <column table="a" column="skidkag" type="number" title="" as="skidkag" key="0"></column>
        <column table="a" column="skidkapowerr" type="number" title="" as="skidkapowerr" key="0"></column>
        <column table="a" column="skidkapowerg" type="number" title="" as="skidkapowerg" key="0"></column>
        <column table="a" column="pr_edit_time" type="number" title="" as="pr_edit_time" key="0"></column>
        <column table="a" column="pr_fact" type="number" title="" comment="признак расчета по факту =1&#xA;по умолчанию =0" as="pr_fact" key="0"></column>
        <column table="a" column="calctypepower" type="number" title="" as="calctypepower" reference="nk_tcalcp" refcol="calctypepower" key="0"></column>
        <column table="a" column="ppris_kvt" type="number" title="" comment="приcоединенная мощность, квт (для ее определения используется функция hg_common.get_ppris_kvt)" as="ppris_kvt" key="0"></column>
        <column table="a" column="pset_kvt" type="number" title="" comment="разрешенная к использованию нагрузка  в квт" as="pset_kvt" key="0"></column>
        <column table="a" column="hh" type="number" title="" as="hh" key="0"></column>
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" reference="hk_dhh" refcol="kod_dhh" key="0"></column>
        <column table="a" column="calcflag_new" type="number" title="" as="calcflag_new" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nr_priem_obj" as="a"></table>
        <query name="ks_tarif" as="tarif" join="left outer" dname="nr_priem_obj">
          <call function="=">
            <column table="a" column="tarif"></column>
            <column table="tarif" column="tarif"></column>
          </call>
        </query>
        <query name="nk_tcalc" as="calctype" join="left outer" dname="nr_priem_obj">
          <call function="=">
            <column table="a" column="calctype"></column>
            <column table="calctype" column="calctype"></column>
          </call>
        </query>
        <query name="nk_tcalcp" as="calctypepower" join="left outer" dname="nr_priem_obj">
          <call function="=">
            <column table="a" column="calctypepower"></column>
            <column table="calctypepower" column="calctypepower"></column>
          </call>
        </query>
        <query name="hk_dhh" as="kod_dhh" join="left outer" dname="nr_priem_obj">
          <call function="=">
            <column table="a" column="kod_dhh"></column>
            <column table="kod_dhh" column="kod_dhh"></column>
          </call>
        </query>
        <query name="hs_23" as="kod_f23" join="left outer" dname="nr_priem_obj" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23"></column>
            <column table="kod_f23" column="kod_f23"></column>
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="nr_priem_obj">
          <call function="=">
            <column table="a" column="kod_numobj"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="nv_account_sost" class="1" timestamp="20.10.2022 12:34:53" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nv_account_sost.xml" haskeys="1">
      <select>
        <column table="a" column="kod_account" type="number" column-mandatory="1" key="1" as="kod_account" />
        <column table="a" column="kod_f46" type="number" as="kod_f46" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" />
        <column table="a" column="kod_dog" type="number" column-mandatory="1" as="kod_dog" />
        <column table="a" column="kod_numobj_sa" type="number" as="kod_numobj_sa" />
        <column table="a" column="ym" type="number" column-mandatory="1" title="" as="ym" />
        <column table="a" column="den" type="number" title="" as="den" />
        <column table="a" column="num_priem" type="number" title="" as="num_priem" />
        <column table="a" column="dat_priem" type="date" column-mandatory="1" title="" as="dat_priem" />
        <column table="a" column="rym" type="number" title="" as="rym" />
        <column table="a" column="kod_f23" type="number" column-mandatory="1" as="kod_f23" />
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="vid_t" type="number" column-mandatory="1" title="" as="vid_t" />
        <column table="a" column="cust" type="number" title="" as="cust" />
        <column table="a" column="pr_val" type="number" title="" as="pr_val" />
        <column table="a" column="price" type="number" title="" as="price" />
        <column table="a" column="money" type="number" title="" as="money" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="pr_hand" type="number" column-mandatory="1" title="" as="pr_hand" />
        <column table="a" column="kod_account_priem" type="number" as="kod_account_priem" />
        <column table="a" column="tip_tarif_sost" type="number" title="" as="tip_tarif_sost" />
        <column table="a" column="tarif" type="number" title="" as="tarif" />
        <column table="a" column="kodinterval" type="number" title="" as="kodinterval" />
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" />
        <column table="a" column="kod_plan" type="number" as="kod_plan" />
        <column table="a" column="kod_bu_akt" type="number" as="kod_bu_akt" />
        <column table="a" column="kod_reglament" type="number" as="kod_reglament" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="nv_account_sost" as="a" />
      </from>
    </query>
    <query name="nv_priem" class="1" timestamp="08.08.2020 07:08:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\nv_priem.xml" haskeys="1">
      <select>
        <column table="a" column="kod_priem" type="number" as="kod_priem" key="1" fixed="1" />
        <column table="a" column="r_rowid" type="rowid" title="" as="r_rowid" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="num_priem" type="number" title="" as="num_priem" key="0" />
        <column table="a" column="calcflag" type="number" title="" as="calcflag" key="0" />
        <column table="a" column="calcflag_new" type="number" title="" as="calcflag_new" key="0" />
        <column table="a" column="kod_point_har" type="number" as="kod_point_har" key="0" />
        <column table="a" column="kod_point_rasx" type="number" as="kod_point_rasx" key="0" />
        <column table="a" column="kod_point_grp" type="number" as="kod_point_grp" key="0" />
        <column table="a" column="kod_point_ini" type="number" as="kod_point_ini" key="0" />
        <column table="a" column="calctype" type="number" title="" as="calctype" key="0" />
        <column table="a" column="kod_point" type="number" as="kod_point" key="0" />
        <column table="a" column="readprev" type="number" title="" as="readprev" key="0" />
        <column table="a" column="readlast" type="number" title="" as="readlast" key="0" />
        <column table="a" column="outcounter" type="number" title="" as="outcounter" key="0" />
        <column table="a" column="ndocounter" type="number" title="" as="ndocounter" key="0" />
        <column table="a" column="potcounter" type="number" title="" as="potcounter" key="0" />
        <column table="a" column="outadd" type="number" title="" as="outadd" key="0" />
        <column table="a" column="out" type="number" title="" as="out" key="0" />
        <column table="a" column="dayspower" type="number" title="" as="dayspower" key="0" />
        <column table="a" column="power" type="number" title="" as="power" key="0" />
        <column table="a" column="tn" type="number" title="" as="tn" key="0" />
        <column table="a" column="pottype" type="number" title="" as="pottype" key="0" />
        <column table="a" column="potpercent" type="number" title="" as="potpercent" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="transit" type="number" title="" as="transit" key="0" />
        <column table="a" column="norm_pot" type="number" title="" as="norm_pot" key="0" />
        <column table="a" column="pokaz_enter" type="string" title="" as="pokaz_enter" key="0" />
        <column table="a" column="tg_f" type="number" title="" as="tg_f" key="0" />
        <column table="a" column="dat_out" type="date" title="" as="dat_out" key="0" />
        <column table="a" column="sk_tes" type="number" title="" as="sk_tes" key="0" />
        <column table="a" column="sso" type="number" title="" as="sso" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_obj" type="number" as="kod_obj" key="0" />
        <column table="a" column="nomer" type="number" title="" as="nomer" key="0" />
        <column table="a" column="mainnomer" type="string" title="" as="mainnomer" key="0" />
        <column table="a" column="mesto" type="string" title="" as="mesto" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="prizn_sa" type="number" title="" as="prizn_sa" key="0" />
        <column table="a" column="kod_pointmain" type="string" as="kod_pointmain" key="0" />
        <column table="a" column="kod_pointmain_transit" type="string" as="kod_pointmain_transit" key="0" />
        <column table="a" column="tpoint" type="number" title="" as="tpoint" key="0" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_numobj_sa" type="number" as="kod_numobj_sa" key="0" />
        <column table="a" column="gr_point" type="number" title="" as="gr_point" key="0" />
        <column table="a" column="energy" type="number" title="" as="energy" reference="hk_energy" refcol="energy" key="0" />
        <column table="a" column="kod_directen" type="number" as="kod_directen" reference="hk_directen" refcol="kod_directen" key="0" />
        <column table="a" column="kod_point_pu" type="number" as="kod_point_pu" key="0" />
        <column table="a" column="kod_point_en" type="number" as="kod_point_en" key="0" />
        <column table="a" column="method" type="number" title="" as="method" key="0" />
        <column table="a" column="eobj_id" type="number" title="" as="eobj_id" key="0" />
        <column table="a" column="nom_pu" type="string" title="" as="nom_pu" key="0" />
        <column table="a" column="razr" type="number" title="" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" as="razr2" key="0" />
        <column table="a" column="kod_point_tar" type="number" as="kod_point_tar" key="0" />
        <column table="a" column="tarif" type="number" title="" as="tarif" key="0" />
        <column table="a" column="rkoeff" type="number" title="" as="rkoeff" key="0" />
        <column table="a" column="kod_point_askue" type="number" as="kod_point_askue" key="0" />
        <column table="a" column="num_askue" type="string" title="" as="num_askue" key="0" />
        <column table="a" column="pr_nominus" type="number" title="" as="pr_nominus" key="0" />
        <column table="a" column="pr_hand" type="number" title="" as="pr_hand" key="0" />
        <column table="a" column="kod_priem_obj" type="number" as="kod_priem_obj" key="0" />
        <column table="a" column="kodinterval" type="number" title="" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0" />
        <column table="a" column="voltage" type="number" title="" as="voltage" key="0" />
        <column table="a" column="pr_kontr" type="number" title="" as="pr_kontr" key="0" />
        <column table="a" column="dat_priem" type="date" title="" as="dat_priem" key="0" />
        <column table="a" column="calctype_obj" type="number" title="" as="calctype_obj" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="pr_poteri" type="number" title="" as="pr_poteri" key="0" />
        <column table="a" column="kod_tiprasx" type="number" as="kod_tiprasx" key="0" />
        <column table="a" column="kod_vid_kpt" type="number" as="kod_vid_kpt" key="0" />
        <column table="a" column="kod_dhh" type="number" as="kod_dhh" key="0" />
        <column table="a" column="pr_fact" type="number" title="" as="pr_fact" key="0" />
        <column table="a" column="kod_polbalans" type="number" as="kod_polbalans" key="0" />
        <column table="a" column="readlast_ecp" type="number" title="" as="readlast_ecp" key="0" />
        <column table="a" column="kod_mop_const_rasx_name" type="number" as="kod_mop_const_rasx_name" key="0" />
        <column table="a" column="pr_poteri_in_ascue" type="number" title="" as="pr_poteri_in_ascue" key="0" />
        <column table="a" column="kod_gtp" type="number" as="kod_gtp" key="0" />
        <column table="a" column="kod_contr_potr" type="number" as="kod_contr_potr" key="0" />
        <column table="a" column="kodp_holder" type="number" title="" as="kodp_holder" key="0" />
        <column table="a" column="readlast1" type="number" title="" as="readlast1" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="nv_priem" as="a" />
        <query name="kr_numobj" as="kod_numobj" join="left outer" dimension="1" dname="nv_priem">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="nv_priem" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="hk_energy" as="energy" join="left outer" dname="nv_priem">
          <call function="=">
            <column table="a" column="energy" />
            <column table="energy" column="energy" />
          </call>
        </query>
        <query name="hk_directen" as="kod_directen" join="left outer" dname="nv_priem">
          <call function="=">
            <column table="a" column="kod_directen" />
            <column table="kod_directen" column="kod_directen" />
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="nv_priem">
          <call function="=">
            <column table="a" column="kodinterval" />
            <column table="kodinterval" column="kodinterval" />
          </call>
        </query>
      </from>
    </query>
    <query name="ov_e_priem" class="1" timestamp="23.08.2022 13:09:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ov_e_priem.xml" haskeys="1">
      <select>
        <column table="a" column="kode_priem" type="number" column-mandatory="1" title="" comment="?kind=1" as="kode_priem" key="1" fixed="1" />
        <column table="a" column="ym" type="number" column-mandatory="1" title="" comment="расч.период (гггг.мм)?type=7" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" column-mandatory="1" title="" comment="дата приемки?type=6" as="dat_priem" key="0" />
        <column table="a" column="out" type="number" title="" comment="расход?type=4" as="out" key="0" />
        <column table="a" column="outcounter" type="number" title="" comment="расход по счетчику?type=4" as="outcounter" key="0" />
        <column table="a" column="outadd" type="number" title="" comment="расход доп.?type=4" as="outadd" key="0" />
        <column table="a" column="potcounter" type="number" title="" comment="потери?type=4" as="potcounter" key="0" />
        <column table="a" column="cust" type="number" title="" comment="количество?type=4" as="cust" key="0" />
        <column table="a" column="poteri" type="number" title="" comment="начисл. потери?type=4" as="poteri" key="0" />
        <column table="a" column="nom_pu" type="string" data-size="20" title="" comment="ПУ: №?type=3" as="nom_pu" key="0" />
        <column table="a" column="readprev" type="number" title="" comment="ПУ: пред.показания?type=4" as="readprev" key="0" />
        <column table="a" column="readlast" type="number" title="" comment="ПУ: тек.показания?type=4" as="readlast" key="0" />
        <column table="a" column="fullname" type="string" data-size="92" title="" comment="ПУ: тип?type=3" as="fullname" key="0" />
        <column table="a" column="rkoeff" type="number" title="" comment="ПУ: расч. коэф.?type=4" as="rkoeff" key="0" />
        <column table="a" column="pottype" type="number" title="" comment="?kind=2" as="pottype" key="0" />
        <column table="a" column="kode_energy2" type="number" title="" comment="?kind=2" as="kode_energy2" key="0" />
        <column table="a" column="kode_directen2" type="number" title="" comment="?kind=2" as="kode_directen2" key="0" />
        <column table="a" column="kode_priem_method" type="number" title="" comment="?kind=2" as="kode_priem_method" key="0" />
        <column table="a" column="kode_priem_tardir" type="number" title="" comment="?kind=2" as="kode_priem_tardir" key="0" />
        <column table="a" column="kode_priem_point" type="number" title="" comment="?kind=2&amp;status=DEPR" as="kode_priem_point" key="0" />
        <column table="a" column="kode_priem_point_v2" type="number" title="" comment="?kind=2" as="kode_priem_point_v2" key="0" />
        <column table="a" column="kod_point" type="number" comment="?kind=2&amp;status=DEPR" as="kod_point" key="0" />
        <column table="a" column="kode_calctype" type="number" title="" comment="?kind=2" as="kode_calctype" key="0" />
        <column table="a" column="kode_priem_rasx" type="number" title="" comment="?kind=2&amp;status=DEPR" as="kode_priem_rasx" key="0" />
        <column table="a" column="kod_numobje" type="number" comment="?kind=2" as="kod_numobje" key="0" />
        <column table="a" column="nach_poteri" type="number" title="" comment="начисл. потери, %?type=4&amp;null=y" as="nach_poteri" key="0" />
        <column table="a" column="razr" type="number" title="" comment="ПУ: разр.ц.части?type=4" as="razr" key="0" />
        <column table="a" column="razr2" type="number" title="" comment="ПУ: разр.д.части?type=4" as="razr2" key="0" />
        <column table="a" column="pp" type="number" title="" comment="ПУ: пп - год.квартал (гггг.к)?type=4" as="pp" key="0" />
        <column table="a" column="nextp" type="number" title="" comment="ПУ: оп - год.квартал (гггг.к)?type=4" as="nextp" key="0" />
        <column table="a" column="kode_priem_tippu" type="number" column-mandatory="1" title="" comment="?kind=2" as="kode_priem_tippu" key="0" />
        <column table="a" column="kod_priem_obj" type="number" column-mandatory="1" as="kod_priem_obj" reference="nr_priem_obj" refcol="kod_priem_obj" key="0" />
        <column table="a" column="rpower" type="number" title="" comment="Разр.Мощн. в ТУ, кВт?type=4&amp;null=y" as="rpower" key="0" />
        <column table="a" column="kod_pointmain" type="number" comment="?kind=2" as="kod_pointmain" key="0" />
        <column table="a" column="ndocounter" type="number" column-mandatory="1" title="" comment="в т.ч. недоучет?type=4" as="ndocounter" key="0" />
        <column table="a" column="kode_power_voltage" type="number" title="" comment="?kind=2" as="kode_power_voltage" key="0" />
        <column table="a" column="kodinterval" type="number" title="" comment="?kind=2" as="kodinterval" key="0" />
        <column table="a" column="kode_priem_point_tar" type="number" title="" as="kode_priem_point_tar" key="0" />
        <column table="a" column="calcflag" type="number" column-mandatory="1" title="" comment="?kind=2" as="calcflag" key="0" />
        <column table="a" column="readlast_ecp" type="number" title="" comment="ПУ: показания, подписанные ЭЦП потребителя электроэнергии?type=4" as="readlast_ecp" key="0" />
        <column table="a" column="power" type="number" title="" comment="оплач.мощность?type=4" as="power" key="0" />
        <column table="a" column="kod_point_ini" type="number" comment="Комм. ТУ: ID?type=4" as="kod_point_ini" key="0" />
        <column table="a" column="kod_point_rasx" type="number" comment="Пост. расх.: ID?type=4" as="kod_point_rasx" key="0" />
        <column table="a" column="kod_point_pu" type="number" comment="ПУ: ID?type=4" as="kod_point_pu" key="0" />
        <column table="a" column="pu_dat_s" type="date" title="" comment="ПУ: дата установки?type=6" as="pu_dat_s" key="0" />
        <column table="a" column="pu_dat_po" type="date" title="" comment="ПУ: дата снятия?type=6" as="pu_dat_po" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="Тариф: ID?type=4" as="tarif" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="Тариф в ТУ: ID?type=4" as="kod_point_tar" key="0" />
        <column table="a" column="tar_dat_s" type="date" title="" comment="Тариф в ТУ: дата нач.?type=6" as="tar_dat_s" key="0" />
        <column table="a" column="tar_dat_po" type="date" title="" comment="Тариф в ТУ: дата оконч.?type=6" as="tar_dat_po" key="0" />
        <column table="a" column="kind_dir" type="string" data-size="20" title="" comment="Вид и напр. ЭЭ?type=3" as="kind_dir" key="0" />
        <column table="a" column="kod_timezone" type="number" comment="Зона суток: ID?type=4" as="kod_timezone" key="0" />
        <column table="a" column="pr_kontr" type="string" data-size="3" title="" comment="пр. Контр. показ.?type=3" as="pr_kontr" key="0" />
        <column table="a" column="tt" type="number" title="" comment="ТТ: коэф. трасформации?type=4" as="tt" key="0" />
        <column table="a" column="tn" type="number" title="" comment="ТН: коэф. трасформации?type=4" as="tn" key="0" />
        <column table="a" column="obj_addr" type="string" data-size="300" title="" comment="Объект договора: Адрес?type=3" as="obj_addr" key="0" />
        <column table="a" column="ur_addr" type="string" data-size="300" title="" comment="Абонент: Юр.Адрес?type=3" as="ur_addr" key="0" />
        <column table="a" column="fiz_addr" type="string" data-size="300" title="" comment="Абонент: Физ.Адрес?type=3" as="fiz_addr" key="0" />
        <column table="a" column="id_point" type="number" title="" comment="?kind=2" as="id_point" key="0" />
        <column table="a" column="kodp_net" type="number" title="" comment="?kind=2&amp;null=y" as="kodp_net" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kodp_rsk" type="number" title="" comment="?kind=2&amp;null=y" as="kodp_rsk" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kodp_fsk" type="number" title="" comment="?kind=2&amp;null=y" as="kodp_fsk" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kodp_pwrcompany" type="number" title="" comment="?kind=2&amp;null=y" as="kodp_pwrcompany" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="ectg" type="string" data-size="3" column-mandatory="1" title="" comment="Кат. надежн.?type=3" as="ectg" key="0" />
        <column table="a" column="kode_pr_ogr_elm" type="number" title="" comment="?kind=2" as="kode_pr_ogr_elm" key="0" />
        <column table="a" column="u_m_fio" type="string" data-size="60" title="" comment="Корр: Пользователь?type=3" as="u_m_fio" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Корр: Дата?type=6" as="d_m" key="0" />
        <column table="a" column="u_m_filial" type="string" data-size="300" title="" comment="Корр: Подразделение?type=3" as="u_m_filial" key="0" />
        <column table="a" column="pr_odtu" type="string" data-size="3" title="" comment="пр. ОДТУ?type=3" as="pr_odtu" key="0" />
        <column table="a" column="readlast1" type="number" title="" comment="ПУ: показания СК?type=4" as="readlast1" key="0" />
        <column table="a" column="price_cat" type="number" title="" comment="Ценовая категория?type=4" as="price_cat" key="0" />
        <column table="a" column="kod_service_oo" type="number" comment="?kind=2" as="kod_service_oo" key="0" />
        <column table="a" column="kod_stages_oo" type="number" comment="?kind=2" as="kod_stages_oo" key="0" />
        <column table="a" column="idd_point" type="number" title="" comment="?kind=2" as="idd_point" key="0" />
        <column table="a" column="pp_date" type="date" title="" comment="ПП?type=6" as="pp_date" key="0" />
        <column table="a" column="op_date" type="date" title="" comment="ОП?type=6" as="op_date" key="0" />
        <column table="a" column="kod_balpu" type="number" comment="?kind=2" as="kod_balpu" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ov_e_priem" as="a" />
        <query name="nr_priem" as="kode_priem" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kode_priem" />
            <column table="kode_priem" column="kod_priem" />
          </call>
        </query>
        <query name="nr_priem_obj" as="kod_priem_obj" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kod_priem_obj" />
            <column table="kod_priem_obj" column="kod_priem_obj" />
          </call>
        </query>
        <query name="kr_org" as="kodp_pwrcompany" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kodp_pwrcompany" />
            <column table="kodp_pwrcompany" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_rsk" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kodp_rsk" />
            <column table="kodp_rsk" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_net" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kodp_net" />
            <column table="kodp_net" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_fsk" join="left outer" dname="ov_e_priem">
          <call function="=">
            <column table="a" column="kodp_fsk" />
            <column table="kodp_fsk" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ov_e_priem_analyse1" class="1" timestamp="08.07.2016 01:41:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ov_e_priem_analyse1.xml" haskeys="1">
      <select>
        <column table="a" column="ym" type="number" title="" comment="период" as="ym" key="1" fixed="1" />
        <column table="a" column="kodp_fsk" type="number" title="" comment="код филиала эс" as="kodp_fsk" key="0" />
        <column table="a" column="fsk_name" type="string" title="" comment="наимен. филиала эс" as="fsk_name" key="0" />
        <column table="a" column="kodp_rsk" type="number" title="" comment="код рэс" as="kodp_rsk" key="0" />
        <column table="a" column="rsk_name" type="string" title="" comment="наимен. рэс" as="rsk_name" key="0" />
        <column table="a" column="kodp_net" type="number" title="" comment="код границы с сетями" as="kodp_net" key="0" />
        <column table="a" column="net_name" type="string" title="" comment="наимен. границы с сетями" as="net_name" key="0" />
        <column table="a" column="kodp_pwrcompany" type="number" title="" comment="код группы по сети" as="kodp_pwrcompany" key="0" />
        <column table="a" column="pwrcompany_name" type="string" title="" comment="наимен. группы по сети" as="pwrcompany_name" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента (потребителя)" as="kodp" key="0" />
        <column table="a" column="abonent_name" type="string" title="" comment="наимен. абоненента" as="abonent_name" key="0" />
        <column table="a" column="kod_point" type="number" comment="код точки" as="kod_point" key="0" />
        <column table="a" column="point_nomer" type="number" title="" comment="номер точки" as="point_nomer" key="0" />
        <column table="a" column="point_name" type="string" title="" comment="наимен. точки" as="point_name" key="0" />
        <column table="a" column="kod_f46" type="number" comment="код ф46" as="kod_f46" key="0" />
        <column table="a" column="f46_name" type="string" title="" comment="наимен ф46" as="f46_name" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" as="voltage" key="0" />
        <column table="a" column="voltage_abbr" type="string" title="" comment="наимен. уровня напряж" as="voltage_abbr" key="0" />
        <column table="a" column="cust" type="number" title="" comment="объем ээ, квт*ч" as="cust" key="0" />
        <column table="a" column="rpower" type="number" title="" comment="объем максм.мощности, квт" as="rpower" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="код тарифа в точке" as="tarif" key="0" />
        <column table="a" column="tar_name" type="string" title="" comment="наимен. тарифа в точке" as="tar_name" key="0" />
        <column table="a" column="ogroup_elm_name" type="string" title="" comment="наимен классификатора субъектов рынка ээ" as="ogroup_elm_name" key="0" />
        <column table="a" column="en_abbr" type="string" title="" comment="вид энергии" as="en_abbr" key="0" />
        <column table="a" column="en_unit" type="string" title="" comment="ед.изм." as="en_unit" key="0" />
        <column table="a" column="endir_abbr" type="string" title="" comment="вид и направление энергии" as="endir_abbr" key="0" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" key="0" />
        <column table="a" column="ndog" type="string" title="" comment="номер договора" as="ndog" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта договора" as="kod_numobj" key="0" />
        <column table="a" column="num_numobj" type="number" title="" comment="номер объекта договора" as="num_numobj" key="0" />
        <column table="a" column="numobj_name" type="string" title="" comment="наимен. объекта договора" as="numobj_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ov_e_priem_analyse1" as="a" />
      </from>
    </query>
    <query name="qk_vidtn" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\qk_vidtn.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="name2" type="string" title="" as="name2" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qk_vidtn" as="a"></table>
      </from>
    </query>
    <query name="qr_buil_obj" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\qr_buil_obj.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bulitp" type="number" comment="код теплового паспорта" as="kod_bulitp" key="1" fixed="1"></column>
        <column table="a" column="pr_active_dv" type="number" title="" as="pr_active_dv" key="0"></column>
        <column table="a" column="dat_s" type="date" title="" as="dat_s" key="0"></column>
        <column table="a" column="kod_buil" type="number" comment="код здания" as="kod_buil" reference="kr_buil" refcol="kod_buil" key="0"></column>
        <column table="a" column="kodd" type="number" title="" as="kodd" key="0"></column>
        <column table="a" column="s_adr_5" type="string" title="" as="s_adr_5" key="0"></column>
        <column table="a" column="s_stradr" type="string" title="" as="s_stradr" key="0"></column>
        <column table="a" column="prstrk" type="number" title="" as="prstrk" key="0"></column>
        <column table="a" column="pr_active_obj" type="number" title="" as="pr_active_obj" key="0"></column>
        <column table="a" column="num_obj" type="number" title="" as="num_obj" key="0"></column>
        <column table="a" column="name_obj" type="string" title="" as="name_obj" key="0"></column>
        <column table="a" column="dat_create" type="date" title="" as="dat_create" key="0"></column>
        <column table="a" column="dat_fin" type="date" title="" as="dat_fin" key="0"></column>
        <column table="a" column="kod_parent_obj" type="number" as="kod_parent_obj" key="0"></column>
        <column table="a" column="kod_parent_sa" type="number" as="kod_parent_sa" key="0"></column>
        <column table="a" column="kodnaznhouse" type="number" title="" as="kodnaznhouse" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="god" type="number" title="" as="god" key="0"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0"></column>
        <column table="a" column="kodnaznhouse2" type="number" title="" as="kodnaznhouse2" key="0"></column>
        <column table="a" column="s_bl" type="number" title="" as="s_bl" key="0"></column>
        <column table="a" column="v_bl" type="number" title="" as="v_bl" key="0"></column>
        <column table="a" column="h_bl" type="number" title="" as="h_bl" key="0"></column>
        <column table="a" column="dog_pr_rv" type="number" title="" as="dog_pr_rv" key="0"></column>
        <column table="a" column="nal_so" type="number" title="" as="nal_so" key="0"></column>
        <column table="a" column="nal_sw" type="number" title="" as="nal_sw" key="0"></column>
        <column table="a" column="nal_sow" type="number" title="" as="nal_sow" key="0"></column>
        <column table="a" column="nal_gw" type="number" title="" as="nal_gw" key="0"></column>
        <column table="a" column="nal_sto" type="number" title="" as="nal_sto" key="0"></column>
        <column table="a" column="nal_stg" type="number" title="" as="nal_stg" key="0"></column>
        <column table="a" column="nal_stp" type="number" title="" as="nal_stp" key="0"></column>
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0"></column>
        <column table="a" column="kod_ddatval" type="number" as="kod_ddatval" reference="dr_ddatval" refcol="kod_ddatval" key="0"></column>
        <column table="a" column="kod_obj" type="number" comment="код потребителя" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_buil_obj" as="a"></table>
        <query name="qr_buil" as="kod_bulitp" join="left outer" dname="qr_buil_obj">
          <call function="=">
            <column table="a" column="kod_bulitp"></column>
            <column table="kod_bulitp" column="kod_bulitp"></column>
          </call>
        </query>
        <query name="kr_buil" as="kod_buil" join="left outer" dname="qr_buil_obj">
          <call function="=">
            <column table="a" column="kod_buil"></column>
            <column table="kod_buil" column="kod_buil"></column>
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="qr_buil_obj" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="qr_buil_obj">
          <call function="=">
            <column table="a" column="kod_obj"></column>
            <column table="kod_obj" column="kod_obj"></column>
          </call>
        </query>
        <query name="dr_ddatval" as="kod_ddatval" join="left outer" dname="qr_buil_obj">
          <call function="=">
            <column table="a" column="kod_ddatval"></column>
            <column table="kod_ddatval" column="kod_ddatval"></column>
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="qr_buil_obj">
          <call function="=">
            <column table="a" column="kod_numobj"></column>
            <column table="kod_numobj" column="kod_numobj"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="qr_schema" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\qr_schema.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="код объекта тс" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_vid" type="number" comment="код вида объекта {старый оставлен для совместимости} из qk_vidsxema" as="kod_vid" reference="qk_vidsxema" refcol="kod" key="0"></column>
        <column table="a" column="kod_reg" type="number" comment="код эксплуатационного района" as="kod_reg" key="0"></column>
        <column table="a" column="kod_bal" type="number" comment="только для казани признак подбаланса для жд" as="kod_bal" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование объекта тс" as="name" key="0"></column>
        <column table="a" column="kod_r" type="number" comment="код родителя" as="kod_r" reference="qr_schema" refcol="kod" key="0"></column>
        <column table="a" column="name2" type="string" title="" comment="номер по расчетной схеме" as="name2" key="0"></column>
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0"></column>
        <column table="a" column="kod_abon" type="number" comment="код абонента(код балансовой ответственности)" as="kod_abon" reference="kr_payer" refcol="kodp" key="0"></column>
        <column table="a" column="nn" type="number" title="" comment="для порядка тк используется только для казани и барнаула" as="nn" key="0"></column>
        <column table="a" column="kod_tn" type="number" comment="код теплоносителя" as="kod_tn" reference="qk_vidtn" refcol="kod" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="nal_uu" type="number" title="" comment="наличие узла учета" as="nal_uu" key="0"></column>
        <column table="a" column="mesto_uu" type="string" title="" comment="место установки уу" as="mesto_uu" key="0"></column>
        <column table="a" column="time_uu" type="string" title="" comment="учет отказов опред уу" as="time_uu" key="0"></column>
        <column table="a" column="kod_to_uu" type="number" comment="код обслуживающей организ уу  для коми код местоустановки" as="kod_to_uu" key="0"></column>
        <column table="a" column="qp_uu" type="number" title="" comment="признак считать тепло с подпит уу" as="qp_uu" key="0"></column>
        <column table="a" column="kod_tip_uu" type="number" comment="код типа уу" as="kod_tip_uu" reference="qs_tip_uu" refcol="kod_tip_uu" key="0"></column>
        <column table="a" column="data_komu_uu" type="date" title="" comment="дата нач ком уч уу" as="data_komu_uu" key="0"></column>
        <column table="a" column="data_okon_uu" type="date" title="" comment="дата оконч ком уч уу" as="data_okon_uu" key="0"></column>
        <column table="a" column="nogw_uu" type="number" title="" comment="признак не считать гвс уу" as="nogw_uu" key="0"></column>
        <column table="a" column="kod_to" type="number" comment="код обслуживающей организации" as="kod_to" key="0"></column>
        <column table="a" column="kat_ab" type="number" title="" comment="код категории абонента" as="kat_ab" key="0"></column>
        <column table="a" column="kat_to" type="number" title="" comment="код категории обслуживающей организации" as="kat_to" key="0"></column>
        <column table="a" column="nlev" type="number" title="" comment="уровень вложенности  для сортировки" as="nlev" key="0"></column>
        <column table="a" column="pr_aw" type="number" title="" comment="признак ав" as="pr_aw" key="0"></column>
        <column table="a" column="kod_r2" type="number" comment="код парент в соответствии с участками" as="kod_r2" key="0"></column>
        <column table="a" column="kod_mag" type="number" comment="код магистрали для снятия температур" as="kod_mag" reference="qr_schema" refcol="kod" key="0"></column>
        <column table="a" column="kod_us" type="number" comment="код устройства на сетях  для снятия температур" as="kod_us" reference="qr_schema" refcol="kod" key="0"></column>
        <column table="a" column="kod_v" type="number" comment="код вида объекта {новый  !!!!!!!!!!!!!!!!!!! }" as="kod_v" reference="qk_tipsx" refcol="kod_v" key="0"></column>
        <column table="a" column="kod_per" type="number" comment="код перемычки" as="kod_per" reference="qr_per" refcol="kod_per" key="0"></column>
        <column table="a" column="dep" type="number" title="" comment="отделение энергосбыта обслуживающие аб. подкл. к магистр." as="dep" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="kod_mzd" type="string" comment="код подключения договора ( пока только для москвы )" as="kod_mzd" key="0"></column>
        <column table="a" column="pr_ctp" type="number" title="" comment="признак отбражения итп как цтп ( только для москвы )" as="pr_ctp" key="0"></column>
        <column table="a" column="kod_askute" type="number" comment="код для аскутэ ( казань )" as="kod_askute" key="0"></column>
        <column table="a" column="kod_t" type="number" comment="код расчета времени наработки" as="kod_t" key="0"></column>
        <column table="a" column="kod_q" type="number" comment="код расчета тепловой энергии" as="kod_q" key="0"></column>
        <column table="a" column="kod_g" type="number" comment="код расчета подпитки" as="kod_g" key="0"></column>
        <column table="a" column="kod_ei" type="number" comment="код единицы измерения" as="kod_ei" reference="qk_ei" refcol="kod_ei" key="0"></column>
        <column table="a" column="pr_o_uu" type="number" title="" comment="признак учёта отопления уу" as="pr_o_uu" key="0"></column>
        <column table="a" column="pr_v_uu" type="number" title="" comment="признак учёта вентиляции уу" as="pr_v_uu" key="0"></column>
        <column table="a" column="pr_g_uu" type="number" title="" comment="признак учёта гвс уу" as="pr_g_uu" key="0"></column>
        <column table="a" column="pr_uu_grbp" type="number" title="" comment="признак учёта тепловой энергии на границе раздела сети атэц и сети г.апатиты" as="pr_uu_grbp" key="0"></column>
        <column table="a" column="status" type="number" title="" as="status" key="0"></column>
        <column table="a" column="kod_zona" type="number" as="kod_zona" key="0"></column>
        <column table="a" column="num_zona" type="number" title="" as="num_zona" key="0"></column>
        <column table="a" column="kod_filial" type="number" as="kod_filial" key="0"></column>
        <column table="a" column="kod_predpr" type="number" as="kod_predpr" key="0"></column>
        <column table="a" column="kod_sap" type="string" as="kod_sap" key="0"></column>
        <column table="a" column="kod_district" type="number" as="kod_district" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_schema" as="a"></table>
        <query name="qr_schema" as="kod_r" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_r"></column>
            <column table="kod_r" column="kod"></column>
          </call>
        </query>
        <query name="kr_payer" as="kod_abon" join="left outer" dname="qr_schema" title="Абонент">
          <call function="=">
            <column table="a" column="kod_abon"></column>
            <column table="kod_abon" column="kodp"></column>
          </call>
        </query>
        <query name="qk_vidsxema" as="kod_vid" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_vid"></column>
            <column table="kod_vid" column="kod"></column>
          </call>
        </query>
        <query name="qk_vidtn" as="kod_tn" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_tn"></column>
            <column table="kod_tn" column="kod"></column>
          </call>
        </query>
        <query name="qs_tip_uu" as="kod_tip_uu" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_tip_uu"></column>
            <column table="kod_tip_uu" column="kod_tip_uu"></column>
          </call>
        </query>
        <query name="qr_schema" as="kod_mag" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_mag"></column>
            <column table="kod_mag" column="kod"></column>
          </call>
        </query>
        <query name="qr_schema" as="kod_us" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_us"></column>
            <column table="kod_us" column="kod"></column>
          </call>
        </query>
        <query name="qk_tipsx" as="kod_v" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_v"></column>
            <column table="kod_v" column="kod_v"></column>
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="dep"></column>
            <column table="dep" column="kodp"></column>
          </call>
        </query>
        <query name="qk_ei" as="kod_ei" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_ei"></column>
            <column table="kod_ei" column="kod_ei"></column>
          </call>
        </query>
        <query name="qr_per" as="kod_per" join="left outer" dname="qr_schema">
          <call function="=">
            <column table="a" column="kod_per"></column>
            <column table="kod_per" column="kod_per"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="qr_schema_buil" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\qr_schema_buil.xml" haskeys="1">
      <select>
        <column table="a" column="kod_schema_buil" type="number" comment="код ввода _ теплового паспорта" as="kod_schema_buil" key="1" fixed="1"></column>
        <column table="a" column="kod" type="number" title="" comment="код объекта тс" as="kod" reference="qr_schema" refcol="kod" key="0"></column>
        <column table="a" column="s_kod" type="string" title="" comment="наименование итп" as="s_kod" key="0"></column>
        <column table="a" column="kod_bulitp" type="number" comment="код теплового паспорта" as="kod_bulitp" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="nal_so" type="number" title="" comment="наличие со" as="nal_so" key="0"></column>
        <column table="a" column="nal_sw" type="number" title="" comment="наличие св" as="nal_sw" key="0"></column>
        <column table="a" column="nal_sow" type="number" title="" comment="наличие сов" as="nal_sow" key="0"></column>
        <column table="a" column="nal_gw" type="number" title="" comment="наличие гвс" as="nal_gw" key="0"></column>
        <column table="a" column="nal_sto" type="number" title="" comment="наличие сто" as="nal_sto" key="0"></column>
        <column table="a" column="nal_stg" type="number" title="" comment="наличие стг" as="nal_stg" key="0"></column>
        <column table="a" column="nal_stp" type="number" title="" comment="наличие стп" as="nal_stp" key="0"></column>
        <column table="a" column="nal_uu_so" type="number" title="" comment="наличие уу со" as="nal_uu_so" key="0"></column>
        <column table="a" column="nal_uu_sw" type="number" title="" comment="наличие уу св" as="nal_uu_sw" key="0"></column>
        <column table="a" column="nal_uu_sow" type="number" title="" comment="наличие уу сов" as="nal_uu_sow" key="0"></column>
        <column table="a" column="nal_uu_gw" type="number" title="" comment="наличие уу гвс" as="nal_uu_gw" key="0"></column>
        <column table="a" column="nal_uu_sto" type="number" title="" comment="наличие уу ст в сет.в.о" as="nal_uu_sto" key="0"></column>
        <column table="a" column="nal_uu_stg" type="number" title="" comment="наличие уу ст в подп.в.п" as="nal_uu_stg" key="0"></column>
        <column table="a" column="nal_uu_stp" type="number" title="" comment="наличие уу ст пар" as="nal_uu_stp" key="0"></column>
        <column table="a" column="kod_vid" type="number" comment="тип итп" as="kod_vid" key="0"></column>
        <column table="a" column="uu_so" type="number" title="" comment="код уу со" as="uu_so" key="0"></column>
        <column table="a" column="uu_sw" type="number" title="" comment="код уу св" as="uu_sw" key="0"></column>
        <column table="a" column="uu_sow" type="number" title="" comment="код уу сов" as="uu_sow" key="0"></column>
        <column table="a" column="uu_gw" type="number" title="" comment="код уу гвс" as="uu_gw" key="0"></column>
        <column table="a" column="uu_sto" type="number" title="" comment="код уу сто" as="uu_sto" key="0"></column>
        <column table="a" column="uu_stg" type="number" title="" comment="код уу стг" as="uu_stg" key="0"></column>
        <column table="a" column="uu_stp" type="number" title="" comment="код уу стп" as="uu_stp" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="qr_schema_buil" as="a"></table>
        <query name="qr_schema" as="kod" join="left outer" dname="qr_schema_buil">
          <call function="=">
            <column table="a" column="kod"></column>
            <column table="kod" column="kod"></column>
          </call>
        </query>
        <query name="qr_buil" as="kod_bulitp" join="left outer" dname="qr_schema_buil">
          <call function="=">
            <column table="a" column="kod_bulitp"></column>
            <column table="kod_bulitp" column="kod_bulitp"></column>
          </call>
        </query>
        <query name="qr_buil_obj" as="kod_bulitp_obj" join="left outer" dname="qr_schema_buil">
          <call function="=" as="kod_bulitp_obj">
            <column table="a" column="kod_bulitp" />
            <column table="kod_bulitp_obj" column="kod_bulitp" />
          </call>
        </query>
      </from>
    </query>
    <query name="rk_adm_scheme" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rk_adm_scheme.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scheme" type="number" as="kod_scheme" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="int_name" type="string" title="" as="int_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rk_adm_scheme" as="a" />
      </from>
    </query>
    <query name="rk_area" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rk_area.xml" haskeys="1">
      <select>
        <column table="a" column="kod_area" type="number" comment="0 - Абоненты и Договора&#xD;&#xA;1 - Электричество договор&#xD;&#xA;2- тепло договор&#xD;&#xA;3- пар договор&#xD;&#xA;4 -быт&#xD;&#xA;5- эл схема&#xD;&#xA;6- тепл.схема&#xD;&#xA;7 - расчеты эл.&#xD;&#xA;8 - расчеты тепло&#xD;&#xA;9 -расчеты пар&#xD;&#xA;10- деньги&#xD;&#xA;11 - отчеты&#xD;&#xA;12 - настройки" as="kod_area" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="0 - Единые , публичные&#xD;&#xA;1 - Электричество договор&#xD;&#xA;2- тепло договор&#xD;&#xA;3- пар договор&#xD;&#xA;4 -быт&#xD;&#xA;5- эл схема&#xD;&#xA;6- тепл.схема&#xD;&#xA;7 - расчеты &#xD;&#xA;8- деньги &#xD;&#xA;&#xD;&#xA;" as="name" key="0" />
        <column table="a" column="invisible" type="number" title="" comment="NULL - не скрывать, NOT NULL - скрывать." as="invisible" key="0" />
        <column table="a" column="kod_struct" type="number" comment="не используется  ???????????" as="kod_struct" key="0" />
        <column table="a" column="access_by_org" type="number" title="" comment="флаг, возможена ли настройка по сетям для данной области" as="access_by_org" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="t_m" type="string" title="" as="t_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rk_area" as="a" />
      </from>
    </query>
    <query name="rk_menu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rk_menu.xml" haskeys="1">
      <select>
        <column table="a" column="kod_menu" type="number" as="kod_menu" key="1" fixed="1" />
        <column table="a" column="kod_area" type="number" comment="0 - Единые , публичные&#xD;&#xA;1 - Электричество договор&#xD;&#xA;2- тепло договор&#xD;&#xA;3- пар договор&#xD;&#xA;4 -быт&#xD;&#xA;5- эл схема&#xD;&#xA;6- тепл.схема&#xD;&#xA;7 - расчеты &#xD;&#xA;8- деньги" as="kod_area" reference="rk_area" refcol="kod_area" key="0" />
        <column table="a" column="menu" type="string" title="" as="menu" key="0" />
        <column table="a" column="nomer" type="number" title="" as="nomer" key="0" />
        <column table="a" column="description" type="string" title="" comment="краткое описание для чего нужен" as="description" key="0" />
        <column table="a" column="class_name" type="string" title="" comment="переехало в RK_CLASS. Тут для совместимости со старой версией ribbon" as="class_name" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="t_m" type="string" title="" as="t_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="rk_menu" refcol="kod_menu" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rk_menu" as="a" />
        <query name="rk_menu" as="kod_parent" join="left outer" dname="rk_menu">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_menu" />
          </call>
        </query>
        <query name="rk_area" as="kod_area" join="left outer" dname="rk_menu">
          <call function="=">
            <column table="a" column="kod_area" />
            <column table="kod_area" column="kod_area" />
          </call>
        </query>
      </from>
    </query>
    <query name="rr_fin_byt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rr_fin_byt.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" comment="уникальный код" as="kod"></column>
        <column table="a" column="kod_dog" type="number" comment="уникальный код договора" as="kod_dog"></column>
        <column table="a" column="kod_obj" type="number" comment="уникальный код объекта" as="kod_obj"></column>
        <column table="a" column="kod_numobj" type="number" comment="уникальный код объекта в договоре" as="kod_numobj"></column>
        <column table="a" column="ym" type="number" title="" comment="период" as="ym"></column>
        <column table="a" column="zadol_deb" type="number" title="" comment="задолженность дебетовая руб." as="zadol_deb"></column>
        <column table="a" column="zadol_kredit" type="number" title="" comment="задолженность кредитовая руб." as="zadol_kredit"></column>
        <column table="a" column="opl" type="number" title="" comment="оплата руб." as="opl"></column>
        <column table="a" column="nachisl" type="number" title="" comment="начисления руб." as="nachisl"></column>
        <column table="a" column="zadol_deb_nal" type="number" title="" comment="задолженность дебетовая налоги руб." as="zadol_deb_nal"></column>
        <column table="a" column="zadol_kredit_nal" type="number" title="" comment="задолженность кредитовая налоги руб." as="zadol_kredit_nal"></column>
        <column table="a" column="opl_nal" type="number" title="" comment="оплата налоги руб." as="opl_nal"></column>
        <column table="a" column="nachisl_nal" type="number" title="" comment="начисления налоги руб." as="nachisl_nal"></column>
        <column table="a" column="kod_account" type="number" comment="уникальный код начисления" as="kod_account"></column>
        <column table="a" column="dat_priem" type="date" title="" comment="дата приемки" as="dat_priem"></column>
        <column table="a" column="nachisl_cust" type="number" title="" comment="начисления квтч" as="nachisl_cust"></column>
        <column table="a" column="opl_cust" type="number" title="" comment="оплата квтч" as="opl_cust"></column>
        <column table="a" column="tax" type="number" title="" comment="ставка налога" as="tax"></column>
        <column table="a" column="ngr1" type="number" title="" as="ngr1"></column>
        <column table="a" column="ngr2" type="number" title="" as="ngr2"></column>
        <column table="a" column="ngr3" type="number" title="" as="ngr3"></column>
        <column table="a" column="ngr4" type="number" title="" as="ngr4"></column>
        <column table="a" column="ngr5" type="number" title="" as="ngr5"></column>
        <column table="a" column="ngr6" type="number" title="" as="ngr6"></column>
        <column table="a" column="ngr7" type="number" title="" as="ngr7"></column>
        <column table="a" column="ngr8" type="number" title="" as="ngr8"></column>
        <column table="a" column="ngr9" type="number" title="" as="ngr9"></column>
        <column table="a" column="ngr10" type="number" title="" as="ngr10"></column>
        <column table="a" column="sgr1" type="string" title="" as="sgr1"></column>
        <column table="a" column="sgr2" type="string" title="" as="sgr2"></column>
        <column table="a" column="sgr3" type="string" title="" as="sgr3"></column>
        <column table="a" column="sgr4" type="string" title="" as="sgr4"></column>
        <column table="a" column="sgr5" type="string" title="" as="sgr5"></column>
        <column table="a" column="sgr6" type="string" title="" as="sgr6"></column>
        <column table="a" column="sgr7" type="string" title="" as="sgr7"></column>
        <column table="a" column="sgr8" type="string" title="" as="sgr8"></column>
        <column table="a" column="sgr9" type="string" title="" as="sgr9"></column>
        <column table="a" column="sgr10" type="string" title="" as="sgr10"></column>
        <column table="a" column="kod_izv" type="number" comment="уникальный код извещения" as="kod_izv"></column>
        <column table="a" column="ym_opl" type="number" title="" comment="период оплаты" as="ym_opl"></column>
        <column table="a" column="ym_nachisl" type="number" title="" comment="период начисления" as="ym_nachisl"></column>
        <column table="a" column="rym" type="number" title="" comment="период перерасчета" as="rym"></column>
        <column table="a" column="kod_his_upr" type="number" comment="уникальный код вдр или управляющей компании" as="kod_his_upr"></column>
        <column table="a" column="calc_vdr" type="number" title="" comment="ведется ли расчет по вдр" as="calc_vdr"></column>
        <column table="a" column="vid_t" type="number" title="" comment="вид товара" as="vid_t"></column>
        <column table="a" column="dat_s" type="date" title="" comment="дата начала" as="dat_s"></column>
        <column table="a" column="dat_po" type="date" title="" comment="дата окончания" as="dat_po"></column>
        <column table="a" column="opl_deb" type="number" title="" comment="оплата (дебет)" as="opl_deb"></column>
        <column table="a" column="opl_kredit" type="number" title="" comment="оплата (кредит)" as="opl_kredit"></column>
        <column table="a" column="opl_deb_zad" type="number" title="" comment="оплата дебиторской задолженности" as="opl_deb_zad"></column>
        <column table="a" column="opl_tek" type="number" title="" comment="оплата текущего периода" as="opl_tek"></column>
        <column table="a" column="opl_tek_year" type="number" title="" comment="оплата текущего года" as="opl_tek_year"></column>
        <column table="a" column="opl_pred_year" type="number" title="" comment="оплата предыдущих лет" as="opl_pred_year"></column>
        <column table="a" column="opl_avan" type="number" title="" comment="оплата авансы буд. периода" as="opl_avan"></column>
        <column table="a" column="zadol_nach" type="number" title="" comment="начальная задолженность руб." as="zadol_nach"></column>
        <column table="a" column="zadol_kon" type="number" title="" comment="конечная задолженность руб." as="zadol_kon"></column>
        <column table="a" column="zadol_nach_nal" type="number" title="" comment="начальная задолженность налоги руб." as="zadol_nach_nal"></column>
        <column table="a" column="zadol_kon_nal" type="number" title="" comment="конечная задолженность налоги руб." as="zadol_kon_nal"></column>
        <column table="a" column="zadol_deb_kon" type="number" title="" comment="конечная задолженность дебитовая руб." as="zadol_deb_kon"></column>
        <column table="a" column="zadol_kredit_kon" type="number" title="" comment="конечная задолженность кредитовая руб." as="zadol_kredit_kon"></column>
        <column table="a" column="zadol_deb_kon_nal" type="number" title="" comment="конечная задолженность дебитовая налоги руб." as="zadol_deb_kon_nal"></column>
        <column table="a" column="zadol_kredit_kon_nal" type="number" title="" comment="конечная задолженность кредитовая налоги руб." as="zadol_kredit_kon_nal"></column>
        <column table="a" column="vid_real" type="number" title="" comment="вид реализации" as="vid_real"></column>
        <column table="a" column="name_vid_real" type="string" title="" comment="название вида реализации" as="name_vid_real"></column>
        <column table="a" column="ngrdog1" type="number" title="" as="ngrdog1"></column>
        <column table="a" column="ngrdog2" type="number" title="" as="ngrdog2"></column>
        <column table="a" column="ngrdog3" type="number" title="" as="ngrdog3"></column>
        <column table="a" column="ngrdog4" type="number" title="" as="ngrdog4"></column>
        <column table="a" column="ngrdog5" type="number" title="" as="ngrdog5"></column>
        <column table="a" column="ngrdog6" type="number" title="" as="ngrdog6"></column>
        <column table="a" column="ngrdog7" type="number" title="" as="ngrdog7"></column>
        <column table="a" column="ngrdog8" type="number" title="" as="ngrdog8"></column>
        <column table="a" column="ngrdog9" type="number" title="" as="ngrdog9"></column>
        <column table="a" column="ngrdog10" type="number" title="" as="ngrdog10"></column>
        <column table="a" column="sgrdog1" type="string" title="" as="sgrdog1"></column>
        <column table="a" column="sgrdog2" type="string" title="" as="sgrdog2"></column>
        <column table="a" column="sgrdog3" type="string" title="" as="sgrdog3"></column>
        <column table="a" column="sgrdog4" type="string" title="" as="sgrdog4"></column>
        <column table="a" column="sgrdog5" type="string" title="" as="sgrdog5"></column>
        <column table="a" column="sgrdog6" type="string" title="" as="sgrdog6"></column>
        <column table="a" column="sgrdog7" type="string" title="" as="sgrdog7"></column>
        <column table="a" column="sgrdog8" type="string" title="" as="sgrdog8"></column>
        <column table="a" column="sgrdog9" type="string" title="" as="sgrdog9"></column>
        <column table="a" column="sgrdog10" type="string" title="" as="sgrdog10"></column>
        <column table="a" column="rash_odn_cust" type="number" title="" comment="расход по одн квтч" as="rash_odn_cust"></column>
        <column table="a" column="rash_ul_cust" type="number" title="" comment="расход по юл квтч" as="rash_ul_cust"></column>
        <column table="a" column="nerasp_cust" type="number" title="" comment="нераспределенная энергия квтч" as="nerasp_cust"></column>
        <column table="a" column="rash_odn_rub" type="number" title="" comment="расход по одн руб." as="rash_odn_rub"></column>
        <column table="a" column="rash_ul_rub" type="number" title="" comment="расход по юл руб." as="rash_ul_rub"></column>
        <column table="a" column="nerasp_rub" type="number" title="" comment="нераспределенная энергия руб." as="nerasp_rub"></column>
        <column table="a" column="nump" type="string" title="" comment="номер абонента" as="nump"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование абонента" as="name"></column>
        <column table="a" column="address_nump" type="string" title="" comment="адрес абонента" as="address_nump"></column>
        <column table="a" column="opl_kredit_nach" type="number" title="" comment="оплата в т.ч. за счет кредита на начало периода руб." as="opl_kredit_nach"></column>
        <column table="a" column="opl_kredit_nach_dog" type="number" title="" comment="оплата в т.ч. за счет кредита на начало действия договора руб." as="opl_kredit_nach_dog"></column>
        <column table="a" column="nachisl_odn_cust" type="number" title="" comment="начислено одн квтч" as="nachisl_odn_cust"></column>
        <column table="a" column="nachisl_odn_cust_rym" type="number" title="" comment="начислено одн перерасчеты квтч" as="nachisl_odn_cust_rym"></column>
        <column table="a" column="nachisl_odn" type="number" title="" comment="начислено одн руб." as="nachisl_odn"></column>
        <column table="a" column="nachisl_odn_rym" type="number" title="" comment="начислено одн перерасчеты руб." as="nachisl_odn_rym"></column>
        <column table="a" column="tep_el" type="number" title="" comment="вид энергии" as="tep_el"></column>
        <column table="a" column="tarif" type="number" title="" comment="код тарифа" as="tarif"></column>
        <column table="a" column="price" type="number" title="" comment="стоимость" as="price"></column>
        <column table="a" column="calctype" type="number" title="" comment="вид расчета запланировано (электричество)" as="calctype"></column>
        <column table="a" column="kod_usl_vid" type="number" comment="код вида услуги по содержанию и ремонту дома (тепло)" as="kod_usl_vid"></column>
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep"></column>
        <column table="a" column="edizm" type="number" title="" comment="вид натур. показателей" as="edizm"></column>
        <column table="a" column="summa" type="number" title="" comment="сумма" as="summa"></column>
        <column table="a" column="cust" type="number" title="" comment="натур. показатели" as="cust"></column>
        <column table="a" column="nal" type="number" title="" comment="налоги" as="nal"></column>
        <column table="a" column="calctypen" type="number" title="" comment="вид расчёта действительный (электричество)" as="calctypen"></column>
        <column table="a" column="kod_vidopl" type="number" comment="код вида оплаты" as="kod_vidopl"></column>
        <column table="a" column="kod_type_opl" type="number" comment="код типа оплаты" as="kod_type_opl"></column>
        <column table="a" column="kodbpol" type="number" title="" comment="код банка получателя" as="kodbpol"></column>
        <column table="a" column="kodb" type="number" title="" comment="код банка плательщика" as="kodb"></column>
        <column table="a" column="kod_dest" type="number" comment="назначение платежа" as="kod_dest"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent"></column>
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" as="voltage"></column>
        <column table="a" column="pach" type="string" title="" comment="пачка" as="pach"></column>
        <column table="a" column="dat_opl" type="date" title="" comment="дата оплаты" as="dat_opl"></column>
        <column table="a" column="dat_post" type="date" title="" comment="дата поступления ден. средств" as="dat_post"></column>
        <column table="a" column="abbr_izv" type="string" title="" comment="тип извещения" as="abbr_izv"></column>
        <column table="a" column="ym_izv" type="number" title="" comment="период извещения" as="ym_izv"></column>
        <column table="a" column="num_izv" type="number" title="" comment="№ извещения" as="num_izv"></column>
        <column table="a" column="kod_link" type="number" comment="код квитанции" as="kod_link"></column>
        <column table="a" column="kod_opl" type="number" comment="код оплаты" as="kod_opl"></column>
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim"></column>
        <column table="a" column="kod_priem" type="number" as="kod_priem"></column>
        <column table="a" column="kod_point_rasx" type="number" as="kod_point_rasx"></column>
        <column table="a" column="dat1" type="date" title="" as="dat1"></column>
        <column table="a" column="dat2" type="date" title="" as="dat2"></column>
        <call function="rowid" as="rr_fin_byt_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="rr_fin_byt" as="a"></table>
      </from>
    </query>
    <query name="rr_gen_codes_t" class="1" timestamp="18.07.2016 20:59:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rr_gen_codes_t.xml" haskeys="1">
      <select>
        <column table="a" column="kod_preset" type="number" as="kod_preset" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="nump" type="string" title="" as="nump" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="ngr1" type="number" title="" as="ngr1" key="0" />
        <column table="a" column="ngr2" type="number" title="" as="ngr2" key="0" />
        <column table="a" column="ngr3" type="number" title="" as="ngr3" key="0" />
        <column table="a" column="ngr4" type="number" title="" as="ngr4" key="0" />
        <column table="a" column="ngr5" type="number" title="" as="ngr5" key="0" />
        <column table="a" column="ngr6" type="number" title="" as="ngr6" key="0" />
        <column table="a" column="sgr1" type="string" title="" as="sgr1" key="0" />
        <column table="a" column="sgr2" type="string" title="" as="sgr2" key="0" />
        <column table="a" column="sgr3" type="string" title="" as="sgr3" key="0" />
        <column table="a" column="sgr4" type="string" title="" as="sgr4" key="0" />
        <column table="a" column="sgr5" type="string" title="" as="sgr5" key="0" />
        <column table="a" column="sgr6" type="string" title="" as="sgr6" key="0" />
        <column table="a" column="ngrdog1" type="number" title="" as="ngrdog1" key="0" />
        <column table="a" column="ngrdog2" type="number" title="" as="ngrdog2" key="0" />
        <column table="a" column="ngrdog3" type="number" title="" as="ngrdog3" key="0" />
        <column table="a" column="ngrdog4" type="number" title="" as="ngrdog4" key="0" />
        <column table="a" column="ngrdog5" type="number" title="" as="ngrdog5" key="0" />
        <column table="a" column="ngrdog6" type="number" title="" as="ngrdog6" key="0" />
        <column table="a" column="ngrdog7" type="number" title="" as="ngrdog7" key="0" />
        <column table="a" column="ngrdog8" type="number" title="" as="ngrdog8" key="0" />
        <column table="a" column="ngrdog9" type="number" title="" as="ngrdog9" key="0" />
        <column table="a" column="ngrdog10" type="number" title="" as="ngrdog10" key="0" />
        <column table="a" column="ngrdog11" type="number" title="" as="ngrdog11" key="0" />
        <column table="a" column="ngrdog12" type="number" title="" as="ngrdog12" key="0" />
        <column table="a" column="ngrdog13" type="number" title="" as="ngrdog13" key="0" />
        <column table="a" column="ngrdog14" type="number" title="" as="ngrdog14" key="0" />
        <column table="a" column="ngrdog15" type="number" title="" as="ngrdog15" key="0" />
        <column table="a" column="ngrdog16" type="number" title="" as="ngrdog16" key="0" />
        <column table="a" column="ngrdog17" type="number" title="" as="ngrdog17" key="0" />
        <column table="a" column="ngrdog18" type="number" title="" as="ngrdog18" key="0" />
        <column table="a" column="ngrdog19" type="number" title="" as="ngrdog19" key="0" />
        <column table="a" column="ngrdog20" type="number" title="" as="ngrdog20" key="0" />
        <column table="a" column="ngrdog21" type="number" title="" as="ngrdog21" key="0" />
        <column table="a" column="ngrdog22" type="number" title="" as="ngrdog22" key="0" />
        <column table="a" column="ngrdog23" type="number" title="" as="ngrdog23" key="0" />
        <column table="a" column="ngrdog24" type="number" title="" as="ngrdog24" key="0" />
        <column table="a" column="ngrdog25" type="number" title="" as="ngrdog25" key="0" />
        <column table="a" column="ngrdog26" type="number" title="" as="ngrdog26" key="0" />
        <column table="a" column="ngrdog27" type="number" title="" as="ngrdog27" key="0" />
        <column table="a" column="ngrdog28" type="number" title="" as="ngrdog28" key="0" />
        <column table="a" column="ngrdog29" type="number" title="" as="ngrdog29" key="0" />
        <column table="a" column="ngrdog30" type="number" title="" as="ngrdog30" key="0" />
        <column table="a" column="ngrdog31" type="number" title="" as="ngrdog31" key="0" />
        <column table="a" column="ngrdog32" type="number" title="" as="ngrdog32" key="0" />
        <column table="a" column="ngrdog33" type="number" title="" as="ngrdog33" key="0" />
        <column table="a" column="ngrdog34" type="number" title="" as="ngrdog34" key="0" />
        <column table="a" column="ngrdog35" type="number" title="" as="ngrdog35" key="0" />
        <column table="a" column="ngrdog36" type="number" title="" as="ngrdog36" key="0" />
        <column table="a" column="ngrdog37" type="number" title="" as="ngrdog37" key="0" />
        <column table="a" column="ngrdog38" type="number" title="" as="ngrdog38" key="0" />
        <column table="a" column="sgrdog1" type="string" title="" as="sgrdog1" key="0" />
        <column table="a" column="sgrdog2" type="string" title="" as="sgrdog2" key="0" />
        <column table="a" column="sgrdog3" type="string" title="" as="sgrdog3" key="0" />
        <column table="a" column="sgrdog4" type="string" title="" as="sgrdog4" key="0" />
        <column table="a" column="sgrdog5" type="string" title="" as="sgrdog5" key="0" />
        <column table="a" column="sgrdog6" type="string" title="" as="sgrdog6" key="0" />
        <column table="a" column="sgrdog7" type="string" title="" as="sgrdog7" key="0" />
        <column table="a" column="sgrdog8" type="string" title="" as="sgrdog8" key="0" />
        <column table="a" column="sgrdog9" type="string" title="" as="sgrdog9" key="0" />
        <column table="a" column="sgrdog10" type="string" title="" as="sgrdog10" key="0" />
        <column table="a" column="sgrdog11" type="string" title="" as="sgrdog11" key="0" />
        <column table="a" column="sgrdog12" type="string" title="" as="sgrdog12" key="0" />
        <column table="a" column="sgrdog13" type="string" title="" as="sgrdog13" key="0" />
        <column table="a" column="sgrdog14" type="string" title="" as="sgrdog14" key="0" />
        <column table="a" column="sgrdog15" type="string" title="" as="sgrdog15" key="0" />
        <column table="a" column="sgrdog16" type="string" title="" as="sgrdog16" key="0" />
        <column table="a" column="sgrdog17" type="string" title="" as="sgrdog17" key="0" />
        <column table="a" column="sgrdog18" type="string" title="" as="sgrdog18" key="0" />
        <column table="a" column="sgrdog19" type="string" title="" as="sgrdog19" key="0" />
        <column table="a" column="sgrdog20" type="string" title="" as="sgrdog20" key="0" />
        <column table="a" column="sgrdog21" type="string" title="" as="sgrdog21" key="0" />
        <column table="a" column="sgrdog22" type="string" title="" as="sgrdog22" key="0" />
        <column table="a" column="sgrdog23" type="string" title="" as="sgrdog23" key="0" />
        <column table="a" column="sgrdog24" type="string" title="" as="sgrdog24" key="0" />
        <column table="a" column="sgrdog25" type="string" title="" as="sgrdog25" key="0" />
        <column table="a" column="sgrdog26" type="string" title="" as="sgrdog26" key="0" />
        <column table="a" column="sgrdog27" type="string" title="" as="sgrdog27" key="0" />
        <column table="a" column="sgrdog28" type="string" title="" as="sgrdog28" key="0" />
        <column table="a" column="sgrdog29" type="string" title="" as="sgrdog29" key="0" />
        <column table="a" column="sgrdog30" type="string" title="" as="sgrdog30" key="0" />
        <column table="a" column="sgrdog31" type="string" title="" as="sgrdog31" key="0" />
        <column table="a" column="sgrdog32" type="string" title="" as="sgrdog32" key="0" />
        <column table="a" column="sgrdog33" type="string" title="" as="sgrdog33" key="0" />
        <column table="a" column="sgrdog34" type="string" title="" as="sgrdog34" key="0" />
        <column table="a" column="sgrdog35" type="string" title="" as="sgrdog35" key="0" />
        <column table="a" column="sgrdog36" type="string" title="" as="sgrdog36" key="0" />
        <column table="a" column="sgrdog37" type="string" title="" as="sgrdog37" key="0" />
        <column table="a" column="sgrdog38" type="string" title="" as="sgrdog38" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="sattr2" type="string" title="" comment="наименование" as="sattr2" key="0" />
        <column table="a" column="sattr1" type="string" title="" as="sattr1" key="0" />
        <column table="a" column="sattr3" type="string" title="" comment="наименование" as="sattr3" key="0" />
        <column table="a" column="sattr4" type="string" title="" comment="наименование" as="sattr4" key="0" />
        <column table="a" column="sattr5" type="string" title="" comment="наименование" as="sattr5" key="0" />
        <column table="a" column="sattr6" type="string" title="" comment="наименование" as="sattr6" key="0" />
        <column table="a" column="sattr7" type="string" title="" as="sattr7" key="0" />
        <column table="a" column="sattr8" type="string" title="" as="sattr8" key="0" />
        <column table="a" column="sattr9" type="string" title="" as="sattr9" key="0" />
        <column table="a" column="sattr10" type="string" title="" as="sattr10" key="0" />
        <column table="a" column="sattr11" type="string" title="" as="sattr11" key="0" />
        <column table="a" column="rab" type="number" title="" as="rab" key="0" />
        <column table="a" column="sattr12" type="string" title="" as="sattr12" key="0" />
        <column table="a" column="kod_dog_prn" type="string" as="kod_dog_prn" key="0" />
        <column table="a" column="ndog_prn" type="string" title="" as="ndog_prn" key="0" />
        <column table="a" column="suserfunc1" type="string" title="" as="suserfunc1" key="0" />
        <column table="a" column="suserfunc2" type="string" title="" as="suserfunc2" key="0" />
        <column table="a" column="suserfunc3" type="string" title="" as="suserfunc3" key="0" />
        <column table="a" column="suserfunc4" type="string" title="" as="suserfunc4" key="0" />
        <column table="a" column="suserfunc5" type="string" title="" as="suserfunc5" key="0" />
        <column table="a" column="suserfunc6" type="string" title="" as="suserfunc6" key="0" />
        <column table="a" column="suserfunc7" type="string" title="" as="suserfunc7" key="0" />
        <column table="a" column="suserfunc8" type="string" title="" as="suserfunc8" key="0" />
        <column table="a" column="suserfunc9" type="string" title="" as="suserfunc9" key="0" />
        <column table="a" column="suserfunc10" type="string" title="" as="suserfunc10" key="0" />
        <column table="a" column="kod_numobj" type="number" as="kod_numobj" key="0" />
        <column table="a" column="id_adres" type="string" title="" as="id_adres" key="0" />
        <column table="a" column="prab_code" type="number" title="" as="prab_code" key="0" />
        <column table="a" column="okpo" type="string" title="" as="okpo" key="0" />
        <column table="a" column="dat1" type="date" title="" comment="дата начала" as="dat1" key="0" />
        <column table="a" column="dat2" type="date" title="" comment="дата окончания" as="dat2" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rr_gen_codes_t" as="a" />
      </from>
    </query>
    <query name="rr_refprop" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rr_refprop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_refprop" type="number" as="kod_refprop" key="1" fixed="1"></column>
        <column table="a" column="kod_refcode" type="number" as="kod_refcode" reference="rs_refcode" refcol="kod_refcode" key="0"></column>
        <column table="a" column="kod_refobject" type="number" as="kod_refobject" reference="rk_refobject" refcol="kod_refobject" key="0"></column>
        <column table="a" column="objid" type="number" title="" comment="код записи из конкретной таблицы&#xA;для абонентов - kodp&#xA;для договоров - kod_dog&#xA;для объектов - kod_obj&#xA;для точек учета - kod_point" as="objid" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rr_refprop" as="a"></table>
        <query name="rk_refobject" as="kod_refobject" join="left outer" dname="rr_refprop">
          <call function="=">
            <column table="a" column="kod_refobject"></column>
            <column table="kod_refobject" column="kod_refobject"></column>
          </call>
        </query>
        <query name="rs_refcode" as="kod_refcode" join="left outer" dname="rr_refprop">
          <call function="=">
            <column table="a" column="kod_refcode"></column>
            <column table="kod_refcode" column="kod_refcode"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="rr_temp" class="1" timestamp="06.07.2017 12:43:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rr_temp.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="a" column="f1" type="number" title="" as="f1" key="0" />
        <column table="a" column="f2" type="number" title="" as="f2" key="0" />
        <column table="a" column="f3" type="number" title="" as="f3" key="0" />
        <column table="a" column="f4" type="number" title="" as="f4" key="0" />
        <column table="a" column="f5" type="number" title="" as="f5" key="0" />
        <column table="a" column="f6" type="number" title="" as="f6" key="0" />
        <column table="a" column="f7" type="number" title="" as="f7" key="0" />
        <column table="a" column="f8" type="number" title="" as="f8" key="0" />
        <column table="a" column="f9" type="number" title="" as="f9" key="0" />
        <column table="a" column="f10" type="number" title="" as="f10" key="0" />
        <column table="a" column="f11" type="number" title="" as="f11" key="0" />
        <column table="a" column="f12" type="number" title="" as="f12" key="0" />
        <column table="a" column="polzov" type="string" title="" as="polzov" key="0" />
        <column table="a" column="kods" type="number" title="" as="kods" key="0" />
        <column table="a" column="names" type="string" title="" as="names" key="0" />
        <column table="a" column="f13" type="number" title="" as="f13" key="0" />
        <column table="a" column="f14" type="number" title="" as="f14" key="0" />
        <column table="a" column="f15" type="number" title="" as="f15" key="0" />
        <column table="a" column="f16" type="number" title="" as="f16" key="0" />
        <column table="a" column="f17" type="number" title="" as="f17" key="0" />
        <column table="a" column="f18" type="number" title="" as="f18" key="0" />
        <column table="a" column="f19" type="number" title="" as="f19" key="0" />
        <column table="a" column="f20" type="number" title="" as="f20" key="0" />
        <column table="a" column="f21" type="number" title="" as="f21" key="0" />
        <column table="a" column="f22" type="number" title="" as="f22" key="0" />
        <column table="a" column="f23" type="number" title="" as="f23" key="0" />
        <column table="a" column="f24" type="number" title="" as="f24" key="0" />
        <column table="a" column="m1" type="number" title="" as="m1" key="0" />
        <column table="a" column="m2" type="number" title="" as="m2" key="0" />
        <column table="a" column="m3" type="number" title="" as="m3" key="0" />
        <column table="a" column="m4" type="number" title="" as="m4" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="kodp" type="string" title="" as="kodp" key="0" />
        <column table="a" column="s1" type="string" title="" as="s1" key="0" />
        <column table="a" column="s2" type="string" title="" as="s2" key="0" />
        <column table="a" column="s3" type="string" title="" as="s3" key="0" />
        <column table="a" column="s4" type="string" title="" as="s4" key="0" />
        <column table="a" column="s5" type="string" title="" as="s5" key="0" />
        <column table="a" column="s6" type="string" title="" as="s6" key="0" />
        <column table="a" column="n1" type="number" title="" as="n1" key="0" />
        <column table="a" column="n2" type="number" title="" as="n2" key="0" />
        <column table="a" column="n3" type="number" title="" as="n3" key="0" />
        <column table="a" column="n4" type="number" title="" as="n4" key="0" />
        <column table="a" column="n5" type="number" title="" as="n5" key="0" />
        <column table="a" column="n6" type="number" title="" as="n6" key="0" />
        <column table="a" column="n7" type="number" title="" as="n7" key="0" />
        <column table="a" column="n8" type="number" title="" as="n8" key="0" />
        <column table="a" column="n9" type="number" title="" as="n9" key="0" />
        <column table="a" column="d1" type="date" title="" as="d1" key="0" />
        <column table="a" column="d2" type="date" title="" as="d2" key="0" />
        <column table="a" column="m5" type="number" title="" as="m5" key="0" />
        <column table="a" column="m6" type="number" title="" as="m6" key="0" />
        <column table="a" column="n10" type="number" title="" as="n10" key="0" />
        <column table="a" column="n11" type="number" title="" as="n11" key="0" />
        <column table="a" column="n12" type="number" title="" as="n12" key="0" />
        <column table="a" column="n13" type="number" title="" as="n13" key="0" />
        <column table="a" column="n14" type="number" title="" as="n14" key="0" />
        <column table="a" column="n15" type="number" title="" as="n15" key="0" />
        <column table="a" column="m7" type="number" title="" as="m7" key="0" />
        <column table="a" column="m8" type="number" title="" as="m8" key="0" />
        <column table="a" column="m9" type="number" title="" as="m9" key="0" />
        <column table="a" column="m10" type="number" title="" as="m10" key="0" />
        <column table="a" column="d3" type="date" title="" as="d3" key="0" />
        <column table="a" column="d4" type="date" title="" as="d4" key="0" />
        <column table="a" column="d5" type="date" title="" as="d5" key="0" />
        <column table="a" column="d6" type="date" title="" as="d6" key="0" />
        <column table="a" column="d7" type="date" title="" as="d7" key="0" />
        <column table="a" column="d8" type="date" title="" as="d8" key="0" />
        <column table="a" column="d9" type="date" title="" as="d9" key="0" />
        <column table="a" column="d10" type="date" title="" as="d10" key="0" />
        <column table="a" column="d11" type="date" title="" as="d11" key="0" />
        <column table="a" column="d12" type="date" title="" as="d12" key="0" />
        <column table="a" column="d13" type="date" title="" as="d13" key="0" />
        <column table="a" column="d14" type="date" title="" as="d14" key="0" />
        <column table="a" column="d15" type="date" title="" as="d15" key="0" />
        <column table="a" column="d16" type="date" title="" as="d16" key="0" />
        <column table="a" column="d17" type="date" title="" as="d17" key="0" />
        <column table="a" column="d18" type="date" title="" as="d18" key="0" />
        <column table="a" column="d19" type="date" title="" as="d19" key="0" />
        <column table="a" column="d20" type="date" title="" as="d20" key="0" />
        <column table="a" column="d21" type="date" title="" as="d21" key="0" />
        <column table="a" column="d22" type="date" title="" as="d22" key="0" />
        <column table="a" column="d23" type="date" title="" as="d23" key="0" />
        <column table="a" column="d24" type="date" title="" as="d24" key="0" />
        <column table="a" column="d25" type="date" title="" as="d25" key="0" />
        <column table="a" column="d26" type="date" title="" as="d26" key="0" />
        <column table="a" column="d27" type="date" title="" as="d27" key="0" />
        <column table="a" column="d28" type="date" title="" as="d28" key="0" />
        <column table="a" column="d29" type="date" title="" as="d29" key="0" />
        <column table="a" column="d30" type="date" title="" as="d30" key="0" />
        <column table="a" column="s7" type="string" title="" as="s7" key="0" />
        <column table="a" column="s8" type="string" title="" as="s8" key="0" />
        <column table="a" column="s9" type="string" title="" as="s9" key="0" />
        <column table="a" column="n16" type="number" title="" as="n16" key="0" />
        <column table="a" column="n17" type="number" title="" as="n17" key="0" />
        <column table="a" column="n18" type="number" title="" as="n18" key="0" />
        <column table="a" column="n19" type="number" title="" as="n19" key="0" />
        <column table="a" column="n20" type="number" title="" as="n20" key="0" />
        <column table="a" column="n21" type="number" title="" as="n21" key="0" />
        <column table="a" column="n22" type="number" title="" as="n22" key="0" />
        <column table="a" column="n23" type="number" title="" as="n23" key="0" />
        <column table="a" column="n24" type="number" title="" as="n24" key="0" />
        <column table="a" column="n25" type="number" title="" as="n25" key="0" />
        <column table="a" column="n26" type="number" title="" as="n26" key="0" />
        <column table="a" column="n27" type="number" title="" as="n27" key="0" />
        <column table="a" column="n28" type="number" title="" as="n28" key="0" />
        <column table="a" column="n29" type="number" title="" as="n29" key="0" />
        <column table="a" column="n30" type="number" title="" as="n30" key="0" />
        <column table="a" column="n31" type="number" title="" as="n31" key="0" />
        <column table="a" column="n32" type="number" title="" as="n32" key="0" />
        <column table="a" column="n33" type="number" title="" as="n33" key="0" />
        <column table="a" column="n34" type="number" title="" as="n34" key="0" />
        <column table="a" column="n35" type="number" title="" as="n35" key="0" />
        <column table="a" column="n36" type="number" title="" as="n36" key="0" />
        <column table="a" column="n37" type="number" title="" as="n37" key="0" />
        <column table="a" column="n38" type="number" title="" as="n38" key="0" />
        <column table="a" column="n39" type="number" title="" as="n39" key="0" />
        <column table="a" column="n40" type="number" title="" as="n40" key="0" />
        <column table="a" column="n41" type="number" title="" as="n41" key="0" />
        <column table="a" column="n42" type="number" title="" as="n42" key="0" />
        <column table="a" column="n43" type="number" title="" as="n43" key="0" />
        <column table="a" column="n44" type="number" title="" as="n44" key="0" />
        <column table="a" column="n45" type="number" title="" as="n45" key="0" />
        <column table="a" column="n46" type="number" title="" as="n46" key="0" />
        <column table="a" column="n47" type="number" title="" as="n47" key="0" />
        <column table="a" column="n48" type="number" title="" as="n48" key="0" />
        <column table="a" column="n49" type="number" title="" as="n49" key="0" />
        <column table="a" column="n50" type="number" title="" as="n50" key="0" />
        <column table="a" column="n51" type="number" title="" as="n51" key="0" />
        <column table="a" column="n52" type="number" title="" as="n52" key="0" />
        <column table="a" column="n53" type="number" title="" as="n53" key="0" />
        <column table="a" column="n54" type="number" title="" as="n54" key="0" />
        <column table="a" column="n55" type="number" title="" as="n55" key="0" />
        <column table="a" column="n56" type="number" title="" as="n56" key="0" />
        <column table="a" column="n57" type="number" title="" as="n57" key="0" />
        <column table="a" column="n58" type="number" title="" as="n58" key="0" />
        <column table="a" column="n59" type="number" title="" as="n59" key="0" />
        <column table="a" column="n60" type="number" title="" as="n60" key="0" />
        <column table="a" column="n61" type="number" title="" as="n61" key="0" />
        <column table="a" column="n62" type="number" title="" as="n62" key="0" />
        <column table="a" column="n63" type="number" title="" as="n63" key="0" />
        <column table="a" column="n64" type="number" title="" as="n64" key="0" />
        <column table="a" column="n65" type="number" title="" as="n65" key="0" />
        <column table="a" column="n66" type="number" title="" as="n66" key="0" />
        <column table="a" column="n67" type="number" title="" as="n67" key="0" />
        <column table="a" column="n68" type="number" title="" as="n68" key="0" />
        <column table="a" column="n69" type="number" title="" as="n69" key="0" />
        <column table="a" column="n70" type="number" title="" as="n70" key="0" />
        <column table="a" column="n71" type="number" title="" as="n71" key="0" />
        <column table="a" column="n72" type="number" title="" as="n72" key="0" />
        <column table="a" column="n73" type="number" title="" as="n73" key="0" />
        <column table="a" column="n74" type="number" title="" as="n74" key="0" />
        <column table="a" column="n75" type="number" title="" as="n75" key="0" />
        <column table="a" column="n76" type="number" title="" as="n76" key="0" />
        <column table="a" column="n77" type="number" title="" as="n77" key="0" />
        <column table="a" column="n78" type="number" title="" as="n78" key="0" />
        <column table="a" column="n79" type="number" title="" as="n79" key="0" />
        <column table="a" column="n80" type="number" title="" as="n80" key="0" />
        <column table="a" column="n81" type="number" title="" as="n81" key="0" />
        <column table="a" column="n82" type="number" title="" as="n82" key="0" />
        <column table="a" column="n83" type="number" title="" as="n83" key="0" />
        <column table="a" column="n84" type="number" title="" as="n84" key="0" />
        <column table="a" column="n85" type="number" title="" as="n85" key="0" />
        <column table="a" column="n86" type="number" title="" as="n86" key="0" />
        <column table="a" column="n87" type="number" title="" as="n87" key="0" />
        <column table="a" column="n88" type="number" title="" as="n88" key="0" />
        <column table="a" column="n89" type="number" title="" as="n89" key="0" />
        <column table="a" column="n90" type="number" title="" as="n90" key="0" />
        <column table="a" column="n91" type="number" title="" as="n91" key="0" />
        <column table="a" column="n92" type="number" title="" as="n92" key="0" />
        <column table="a" column="n93" type="number" title="" as="n93" key="0" />
        <column table="a" column="n94" type="number" title="" as="n94" key="0" />
        <column table="a" column="n95" type="number" title="" as="n95" key="0" />
        <column table="a" column="n96" type="number" title="" as="n96" key="0" />
        <column table="a" column="n97" type="number" title="" as="n97" key="0" />
        <column table="a" column="n98" type="number" title="" as="n98" key="0" />
        <column table="a" column="n99" type="number" title="" as="n99" key="0" />
        <column table="a" column="n100" type="number" title="" as="n100" key="0" />
        <column table="a" column="n101" type="number" title="" as="n101" key="0" />
        <column table="a" column="n102" type="number" title="" as="n102" key="0" />
        <column table="a" column="n103" type="number" title="" as="n103" key="0" />
        <column table="a" column="n104" type="number" title="" as="n104" key="0" />
        <column table="a" column="n105" type="number" title="" as="n105" key="0" />
        <column table="a" column="n106" type="number" title="" as="n106" key="0" />
        <column table="a" column="n107" type="number" title="" as="n107" key="0" />
        <column table="a" column="n108" type="number" title="" as="n108" key="0" />
        <column table="a" column="n109" type="number" title="" as="n109" key="0" />
        <column table="a" column="n110" type="number" title="" as="n110" key="0" />
        <column table="a" column="n111" type="number" title="" as="n111" key="0" />
        <column table="a" column="n112" type="number" title="" as="n112" key="0" />
        <column table="a" column="n113" type="number" title="" as="n113" key="0" />
        <column table="a" column="n114" type="number" title="" as="n114" key="0" />
        <column table="a" column="n115" type="number" title="" as="n115" key="0" />
        <column table="a" column="n116" type="number" title="" as="n116" key="0" />
        <column table="a" column="n117" type="number" title="" as="n117" key="0" />
        <column table="a" column="n118" type="number" title="" as="n118" key="0" />
        <column table="a" column="n119" type="number" title="" as="n119" key="0" />
        <column table="a" column="n120" type="number" title="" as="n120" key="0" />
        <column table="a" column="n121" type="number" title="" as="n121" key="0" />
        <column table="a" column="n122" type="number" title="" as="n122" key="0" />
        <column table="a" column="n123" type="number" title="" as="n123" key="0" />
        <column table="a" column="n124" type="number" title="" as="n124" key="0" />
        <column table="a" column="n125" type="number" title="" as="n125" key="0" />
        <column table="a" column="n126" type="number" title="" as="n126" key="0" />
        <column table="a" column="n127" type="number" title="" as="n127" key="0" />
        <column table="a" column="n128" type="number" title="" as="n128" key="0" />
        <column table="a" column="n129" type="number" title="" as="n129" key="0" />
        <column table="a" column="n130" type="number" title="" as="n130" key="0" />
        <column table="a" column="n131" type="number" title="" as="n131" key="0" />
        <column table="a" column="n132" type="number" title="" as="n132" key="0" />
        <column table="a" column="n133" type="number" title="" as="n133" key="0" />
        <column table="a" column="n134" type="number" title="" as="n134" key="0" />
        <column table="a" column="n135" type="number" title="" as="n135" key="0" />
        <column table="a" column="n136" type="number" title="" as="n136" key="0" />
        <column table="a" column="n137" type="number" title="" as="n137" key="0" />
        <column table="a" column="n138" type="number" title="" as="n138" key="0" />
        <column table="a" column="n139" type="number" title="" as="n139" key="0" />
        <column table="a" column="n140" type="number" title="" as="n140" key="0" />
        <column table="a" column="n141" type="number" title="" as="n141" key="0" />
        <column table="a" column="n142" type="number" title="" as="n142" key="0" />
        <column table="a" column="n143" type="number" title="" as="n143" key="0" />
        <column table="a" column="n144" type="number" title="" as="n144" key="0" />
        <column table="a" column="n145" type="number" title="" as="n145" key="0" />
        <column table="a" column="n146" type="number" title="" as="n146" key="0" />
        <column table="a" column="n147" type="number" title="" as="n147" key="0" />
        <column table="a" column="n148" type="number" title="" as="n148" key="0" />
        <column table="a" column="n149" type="number" title="" as="n149" key="0" />
        <column table="a" column="n150" type="number" title="" as="n150" key="0" />
        <column table="a" column="n151" type="number" title="" as="n151" key="0" />
        <column table="a" column="n152" type="number" title="" as="n152" key="0" />
        <column table="a" column="n153" type="number" title="" as="n153" key="0" />
        <column table="a" column="n154" type="number" title="" as="n154" key="0" />
        <column table="a" column="n155" type="number" title="" as="n155" key="0" />
        <column table="a" column="n156" type="number" title="" as="n156" key="0" />
        <column table="a" column="n157" type="number" title="" as="n157" key="0" />
        <column table="a" column="n158" type="number" title="" as="n158" key="0" />
        <column table="a" column="n159" type="number" title="" as="n159" key="0" />
        <column table="a" column="n160" type="number" title="" as="n160" key="0" />
        <column table="a" column="n161" type="number" title="" as="n161" key="0" />
        <column table="a" column="n162" type="number" title="" as="n162" key="0" />
        <column table="a" column="n163" type="number" title="" as="n163" key="0" />
        <column table="a" column="n164" type="number" title="" as="n164" key="0" />
        <column table="a" column="n165" type="number" title="" as="n165" key="0" />
        <column table="a" column="n166" type="number" title="" as="n166" key="0" />
        <column table="a" column="n167" type="number" title="" as="n167" key="0" />
        <column table="a" column="n168" type="number" title="" as="n168" key="0" />
        <column table="a" column="n169" type="number" title="" as="n169" key="0" />
        <column table="a" column="n170" type="number" title="" as="n170" key="0" />
        <column table="a" column="n171" type="number" title="" as="n171" key="0" />
        <column table="a" column="n172" type="number" title="" as="n172" key="0" />
        <column table="a" column="n173" type="number" title="" as="n173" key="0" />
        <column table="a" column="n174" type="number" title="" as="n174" key="0" />
        <column table="a" column="n175" type="number" title="" as="n175" key="0" />
        <column table="a" column="n176" type="number" title="" as="n176" key="0" />
        <column table="a" column="n177" type="number" title="" as="n177" key="0" />
        <column table="a" column="n178" type="number" title="" as="n178" key="0" />
        <column table="a" column="n179" type="number" title="" as="n179" key="0" />
        <column table="a" column="n180" type="number" title="" as="n180" key="0" />
        <column table="a" column="n181" type="number" title="" as="n181" key="0" />
        <column table="a" column="n182" type="number" title="" as="n182" key="0" />
        <column table="a" column="n183" type="number" title="" as="n183" key="0" />
        <column table="a" column="n184" type="number" title="" as="n184" key="0" />
        <column table="a" column="n185" type="number" title="" as="n185" key="0" />
        <column table="a" column="n186" type="number" title="" as="n186" key="0" />
        <column table="a" column="n187" type="number" title="" as="n187" key="0" />
        <column table="a" column="n188" type="number" title="" as="n188" key="0" />
        <column table="a" column="n189" type="number" title="" as="n189" key="0" />
        <column table="a" column="n190" type="number" title="" as="n190" key="0" />
        <column table="a" column="n191" type="number" title="" as="n191" key="0" />
        <column table="a" column="n192" type="number" title="" as="n192" key="0" />
        <column table="a" column="n193" type="number" title="" as="n193" key="0" />
        <column table="a" column="n194" type="number" title="" as="n194" key="0" />
        <column table="a" column="n195" type="number" title="" as="n195" key="0" />
        <column table="a" column="n196" type="number" title="" as="n196" key="0" />
        <column table="a" column="n197" type="number" title="" as="n197" key="0" />
        <column table="a" column="n198" type="number" title="" as="n198" key="0" />
        <column table="a" column="n199" type="number" title="" as="n199" key="0" />
        <column table="a" column="n200" type="number" title="" as="n200" key="0" />
        <column table="a" column="n201" type="number" title="" as="n201" key="0" />
        <column table="a" column="n202" type="number" title="" as="n202" key="0" />
        <column table="a" column="n203" type="number" title="" as="n203" key="0" />
        <column table="a" column="n204" type="number" title="" as="n204" key="0" />
        <column table="a" column="n205" type="number" title="" as="n205" key="0" />
        <column table="a" column="n206" type="number" title="" as="n206" key="0" />
        <column table="a" column="n207" type="number" title="" as="n207" key="0" />
        <column table="a" column="n208" type="number" title="" as="n208" key="0" />
        <column table="a" column="n209" type="number" title="" as="n209" key="0" />
        <column table="a" column="n210" type="number" title="" as="n210" key="0" />
        <column table="a" column="n211" type="number" title="" as="n211" key="0" />
        <column table="a" column="n212" type="number" title="" as="n212" key="0" />
        <column table="a" column="n213" type="number" title="" as="n213" key="0" />
        <column table="a" column="n214" type="number" title="" as="n214" key="0" />
        <column table="a" column="n215" type="number" title="" as="n215" key="0" />
        <column table="a" column="n216" type="number" title="" as="n216" key="0" />
        <column table="a" column="n217" type="number" title="" as="n217" key="0" />
        <column table="a" column="n218" type="number" title="" as="n218" key="0" />
        <column table="a" column="n219" type="number" title="" as="n219" key="0" />
        <column table="a" column="n220" type="number" title="" as="n220" key="0" />
        <column table="a" column="n221" type="number" title="" as="n221" key="0" />
        <column table="a" column="n222" type="number" title="" as="n222" key="0" />
        <column table="a" column="n223" type="number" title="" as="n223" key="0" />
        <column table="a" column="n224" type="number" title="" as="n224" key="0" />
        <column table="a" column="n225" type="number" title="" as="n225" key="0" />
        <column table="a" column="n226" type="number" title="" as="n226" key="0" />
        <column table="a" column="n227" type="number" title="" as="n227" key="0" />
        <column table="a" column="n228" type="number" title="" as="n228" key="0" />
        <column table="a" column="n229" type="number" title="" as="n229" key="0" />
        <column table="a" column="n230" type="number" title="" as="n230" key="0" />
        <column table="a" column="n231" type="number" title="" as="n231" key="0" />
        <column table="a" column="n232" type="number" title="" as="n232" key="0" />
        <column table="a" column="n233" type="number" title="" as="n233" key="0" />
        <column table="a" column="n234" type="number" title="" as="n234" key="0" />
        <column table="a" column="n235" type="number" title="" as="n235" key="0" />
        <column table="a" column="n236" type="number" title="" as="n236" key="0" />
        <column table="a" column="n237" type="number" title="" as="n237" key="0" />
        <column table="a" column="n238" type="number" title="" as="n238" key="0" />
        <column table="a" column="n239" type="number" title="" as="n239" key="0" />
        <column table="a" column="n240" type="number" title="" as="n240" key="0" />
        <column table="a" column="n241" type="number" title="" as="n241" key="0" />
        <column table="a" column="n242" type="number" title="" as="n242" key="0" />
        <column table="a" column="n243" type="number" title="" as="n243" key="0" />
        <column table="a" column="n244" type="number" title="" as="n244" key="0" />
        <column table="a" column="n245" type="number" title="" as="n245" key="0" />
        <column table="a" column="n246" type="number" title="" as="n246" key="0" />
        <column table="a" column="n247" type="number" title="" as="n247" key="0" />
        <column table="a" column="n248" type="number" title="" as="n248" key="0" />
        <column table="a" column="n249" type="number" title="" as="n249" key="0" />
        <column table="a" column="n250" type="number" title="" as="n250" key="0" />
        <column table="a" column="n251" type="number" title="" as="n251" key="0" />
        <column table="a" column="n252" type="number" title="" as="n252" key="0" />
        <column table="a" column="n253" type="number" title="" as="n253" key="0" />
        <column table="a" column="n254" type="number" title="" as="n254" key="0" />
        <column table="a" column="n255" type="number" title="" as="n255" key="0" />
        <column table="a" column="n256" type="number" title="" as="n256" key="0" />
        <column table="a" column="n257" type="number" title="" as="n257" key="0" />
        <column table="a" column="n258" type="number" title="" as="n258" key="0" />
        <column table="a" column="n259" type="number" title="" as="n259" key="0" />
        <column table="a" column="n260" type="number" title="" as="n260" key="0" />
        <column table="a" column="n261" type="number" title="" as="n261" key="0" />
        <column table="a" column="n262" type="number" title="" as="n262" key="0" />
        <column table="a" column="n263" type="number" title="" as="n263" key="0" />
        <column table="a" column="n264" type="number" title="" as="n264" key="0" />
        <column table="a" column="n265" type="number" title="" as="n265" key="0" />
        <column table="a" column="n266" type="number" title="" as="n266" key="0" />
        <column table="a" column="n267" type="number" title="" as="n267" key="0" />
        <column table="a" column="n268" type="number" title="" as="n268" key="0" />
        <column table="a" column="n269" type="number" title="" as="n269" key="0" />
        <column table="a" column="n270" type="number" title="" as="n270" key="0" />
        <column table="a" column="n271" type="number" title="" as="n271" key="0" />
        <column table="a" column="n272" type="number" title="" as="n272" key="0" />
        <column table="a" column="n273" type="number" title="" as="n273" key="0" />
        <column table="a" column="n274" type="number" title="" as="n274" key="0" />
        <column table="a" column="n275" type="number" title="" as="n275" key="0" />
        <column table="a" column="n276" type="number" title="" as="n276" key="0" />
        <column table="a" column="n277" type="number" title="" as="n277" key="0" />
        <column table="a" column="n278" type="number" title="" as="n278" key="0" />
        <column table="a" column="n279" type="number" title="" as="n279" key="0" />
        <column table="a" column="n280" type="number" title="" as="n280" key="0" />
        <column table="a" column="n281" type="number" title="" as="n281" key="0" />
        <column table="a" column="n282" type="number" title="" as="n282" key="0" />
        <column table="a" column="n283" type="number" title="" as="n283" key="0" />
        <column table="a" column="n284" type="number" title="" as="n284" key="0" />
        <column table="a" column="n285" type="number" title="" as="n285" key="0" />
        <column table="a" column="n286" type="number" title="" as="n286" key="0" />
        <column table="a" column="n287" type="number" title="" as="n287" key="0" />
        <column table="a" column="n288" type="number" title="" as="n288" key="0" />
        <column table="a" column="n289" type="number" title="" as="n289" key="0" />
        <column table="a" column="n290" type="number" title="" as="n290" key="0" />
        <column table="a" column="n291" type="number" title="" as="n291" key="0" />
        <column table="a" column="n292" type="number" title="" as="n292" key="0" />
        <column table="a" column="n293" type="number" title="" as="n293" key="0" />
        <column table="a" column="n294" type="number" title="" as="n294" key="0" />
        <column table="a" column="n295" type="number" title="" as="n295" key="0" />
        <column table="a" column="n296" type="number" title="" as="n296" key="0" />
        <column table="a" column="n297" type="number" title="" as="n297" key="0" />
        <column table="a" column="n298" type="number" title="" as="n298" key="0" />
        <column table="a" column="n299" type="number" title="" as="n299" key="0" />
        <column table="a" column="n300" type="number" title="" as="n300" key="0" />
        <column table="a" column="n301" type="number" title="" as="n301" key="0" />
        <column table="a" column="n302" type="number" title="" as="n302" key="0" />
        <column table="a" column="n303" type="number" title="" as="n303" key="0" />
        <column table="a" column="n304" type="number" title="" as="n304" key="0" />
        <column table="a" column="n305" type="number" title="" as="n305" key="0" />
        <column table="a" column="n306" type="number" title="" as="n306" key="0" />
        <column table="a" column="n307" type="number" title="" as="n307" key="0" />
        <column table="a" column="n308" type="number" title="" as="n308" key="0" />
        <column table="a" column="n309" type="number" title="" as="n309" key="0" />
        <column table="a" column="n310" type="number" title="" as="n310" key="0" />
        <column table="a" column="n311" type="number" title="" as="n311" key="0" />
        <column table="a" column="n312" type="number" title="" as="n312" key="0" />
        <column table="a" column="n313" type="number" title="" as="n313" key="0" />
        <column table="a" column="n314" type="number" title="" as="n314" key="0" />
        <column table="a" column="n315" type="number" title="" as="n315" key="0" />
        <column table="a" column="n316" type="number" title="" as="n316" key="0" />
        <column table="a" column="n317" type="number" title="" as="n317" key="0" />
        <column table="a" column="n318" type="number" title="" as="n318" key="0" />
        <column table="a" column="n319" type="number" title="" as="n319" key="0" />
        <column table="a" column="n320" type="number" title="" as="n320" key="0" />
        <column table="a" column="n321" type="number" title="" as="n321" key="0" />
        <column table="a" column="n322" type="number" title="" as="n322" key="0" />
        <column table="a" column="n323" type="number" title="" as="n323" key="0" />
        <column table="a" column="n324" type="number" title="" as="n324" key="0" />
        <column table="a" column="n325" type="number" title="" as="n325" key="0" />
        <column table="a" column="n326" type="number" title="" as="n326" key="0" />
        <column table="a" column="n327" type="number" title="" as="n327" key="0" />
        <column table="a" column="n328" type="number" title="" as="n328" key="0" />
        <column table="a" column="n329" type="number" title="" as="n329" key="0" />
        <column table="a" column="n330" type="number" title="" as="n330" key="0" />
        <column table="a" column="n331" type="number" title="" as="n331" key="0" />
        <column table="a" column="n332" type="number" title="" as="n332" key="0" />
        <column table="a" column="n333" type="number" title="" as="n333" key="0" />
        <column table="a" column="n334" type="number" title="" as="n334" key="0" />
        <column table="a" column="n335" type="number" title="" as="n335" key="0" />
        <column table="a" column="n336" type="number" title="" as="n336" key="0" />
        <column table="a" column="n337" type="number" title="" as="n337" key="0" />
        <column table="a" column="n338" type="number" title="" as="n338" key="0" />
        <column table="a" column="n339" type="number" title="" as="n339" key="0" />
        <column table="a" column="n340" type="number" title="" as="n340" key="0" />
        <column table="a" column="n341" type="number" title="" as="n341" key="0" />
        <column table="a" column="n342" type="number" title="" as="n342" key="0" />
        <column table="a" column="n343" type="number" title="" as="n343" key="0" />
        <column table="a" column="n344" type="number" title="" as="n344" key="0" />
        <column table="a" column="n345" type="number" title="" as="n345" key="0" />
        <column table="a" column="n346" type="number" title="" as="n346" key="0" />
        <column table="a" column="n347" type="number" title="" as="n347" key="0" />
        <column table="a" column="n348" type="number" title="" as="n348" key="0" />
        <column table="a" column="n349" type="number" title="" as="n349" key="0" />
        <column table="a" column="n350" type="number" title="" as="n350" key="0" />
        <column table="a" column="n351" type="number" title="" as="n351" key="0" />
        <column table="a" column="n352" type="number" title="" as="n352" key="0" />
        <column table="a" column="n353" type="number" title="" as="n353" key="0" />
        <column table="a" column="n354" type="number" title="" as="n354" key="0" />
        <column table="a" column="n355" type="number" title="" as="n355" key="0" />
        <column table="a" column="n356" type="number" title="" as="n356" key="0" />
        <column table="a" column="n357" type="number" title="" as="n357" key="0" />
        <column table="a" column="n358" type="number" title="" as="n358" key="0" />
        <column table="a" column="n359" type="number" title="" as="n359" key="0" />
        <column table="a" column="n360" type="number" title="" as="n360" key="0" />
        <column table="a" column="n361" type="number" title="" as="n361" key="0" />
        <column table="a" column="n362" type="number" title="" as="n362" key="0" />
        <column table="a" column="n363" type="number" title="" as="n363" key="0" />
        <column table="a" column="n364" type="number" title="" as="n364" key="0" />
        <column table="a" column="n365" type="number" title="" as="n365" key="0" />
        <column table="a" column="n366" type="number" title="" as="n366" key="0" />
        <column table="a" column="n367" type="number" title="" as="n367" key="0" />
        <column table="a" column="n368" type="number" title="" as="n368" key="0" />
        <column table="a" column="n369" type="number" title="" as="n369" key="0" />
        <column table="a" column="n370" type="number" title="" as="n370" key="0" />
        <column table="a" column="n371" type="number" title="" as="n371" key="0" />
        <column table="a" column="n372" type="number" title="" as="n372" key="0" />
        <column table="a" column="n373" type="number" title="" as="n373" key="0" />
        <column table="a" column="n374" type="number" title="" as="n374" key="0" />
        <column table="a" column="n375" type="number" title="" as="n375" key="0" />
        <column table="a" column="n376" type="number" title="" as="n376" key="0" />
        <column table="a" column="n377" type="number" title="" as="n377" key="0" />
        <column table="a" column="n378" type="number" title="" as="n378" key="0" />
        <column table="a" column="n379" type="number" title="" as="n379" key="0" />
        <column table="a" column="n380" type="number" title="" as="n380" key="0" />
        <column table="a" column="n381" type="number" title="" as="n381" key="0" />
        <column table="a" column="n382" type="number" title="" as="n382" key="0" />
        <column table="a" column="n383" type="number" title="" as="n383" key="0" />
        <column table="a" column="n384" type="number" title="" as="n384" key="0" />
        <column table="a" column="n385" type="number" title="" as="n385" key="0" />
        <column table="a" column="n386" type="number" title="" as="n386" key="0" />
        <column table="a" column="n387" type="number" title="" as="n387" key="0" />
        <column table="a" column="n388" type="number" title="" as="n388" key="0" />
        <column table="a" column="n389" type="number" title="" as="n389" key="0" />
        <column table="a" column="n390" type="number" title="" as="n390" key="0" />
        <column table="a" column="n391" type="number" title="" as="n391" key="0" />
        <column table="a" column="n392" type="number" title="" as="n392" key="0" />
        <column table="a" column="n393" type="number" title="" as="n393" key="0" />
        <column table="a" column="n394" type="number" title="" as="n394" key="0" />
        <column table="a" column="n395" type="number" title="" as="n395" key="0" />
        <column table="a" column="n396" type="number" title="" as="n396" key="0" />
        <column table="a" column="n397" type="number" title="" as="n397" key="0" />
        <column table="a" column="n398" type="number" title="" as="n398" key="0" />
        <column table="a" column="n399" type="number" title="" as="n399" key="0" />
        <column table="a" column="n400" type="number" title="" as="n400" key="0" />
        <column table="a" column="n401" type="number" title="" as="n401" key="0" />
        <column table="a" column="n402" type="number" title="" as="n402" key="0" />
        <column table="a" column="n403" type="number" title="" as="n403" key="0" />
        <column table="a" column="n404" type="number" title="" as="n404" key="0" />
        <column table="a" column="n405" type="number" title="" as="n405" key="0" />
        <column table="a" column="n406" type="number" title="" as="n406" key="0" />
        <column table="a" column="n407" type="number" title="" as="n407" key="0" />
        <column table="a" column="n408" type="number" title="" as="n408" key="0" />
        <column table="a" column="n409" type="number" title="" as="n409" key="0" />
        <column table="a" column="n410" type="number" title="" as="n410" key="0" />
        <column table="a" column="n411" type="number" title="" as="n411" key="0" />
        <column table="a" column="n412" type="number" title="" as="n412" key="0" />
        <column table="a" column="n413" type="number" title="" as="n413" key="0" />
        <column table="a" column="n414" type="number" title="" as="n414" key="0" />
        <column table="a" column="n415" type="number" title="" as="n415" key="0" />
        <column table="a" column="n416" type="number" title="" as="n416" key="0" />
        <column table="a" column="n417" type="number" title="" as="n417" key="0" />
        <column table="a" column="n418" type="number" title="" as="n418" key="0" />
        <column table="a" column="n419" type="number" title="" as="n419" key="0" />
        <column table="a" column="n420" type="number" title="" as="n420" key="0" />
        <column table="a" column="n421" type="number" title="" as="n421" key="0" />
        <column table="a" column="n422" type="number" title="" as="n422" key="0" />
        <column table="a" column="n423" type="number" title="" as="n423" key="0" />
        <column table="a" column="n424" type="number" title="" as="n424" key="0" />
        <column table="a" column="n425" type="number" title="" as="n425" key="0" />
        <column table="a" column="n426" type="number" title="" as="n426" key="0" />
        <column table="a" column="n427" type="number" title="" as="n427" key="0" />
        <column table="a" column="n428" type="number" title="" as="n428" key="0" />
        <column table="a" column="n429" type="number" title="" as="n429" key="0" />
        <column table="a" column="n430" type="number" title="" as="n430" key="0" />
        <column table="a" column="n431" type="number" title="" as="n431" key="0" />
        <column table="a" column="n432" type="number" title="" as="n432" key="0" />
        <column table="a" column="n433" type="number" title="" as="n433" key="0" />
        <column table="a" column="n434" type="number" title="" as="n434" key="0" />
        <column table="a" column="n435" type="number" title="" as="n435" key="0" />
        <column table="a" column="n436" type="number" title="" as="n436" key="0" />
        <column table="a" column="n437" type="number" title="" as="n437" key="0" />
        <column table="a" column="n438" type="number" title="" as="n438" key="0" />
        <column table="a" column="n439" type="number" title="" as="n439" key="0" />
        <column table="a" column="n440" type="number" title="" as="n440" key="0" />
        <column table="a" column="n441" type="number" title="" as="n441" key="0" />
        <column table="a" column="n442" type="number" title="" as="n442" key="0" />
        <column table="a" column="n443" type="number" title="" as="n443" key="0" />
        <column table="a" column="n444" type="number" title="" as="n444" key="0" />
        <column table="a" column="n445" type="number" title="" as="n445" key="0" />
        <column table="a" column="n446" type="number" title="" as="n446" key="0" />
        <column table="a" column="n447" type="number" title="" as="n447" key="0" />
        <column table="a" column="n448" type="number" title="" as="n448" key="0" />
        <column table="a" column="n449" type="number" title="" as="n449" key="0" />
        <column table="a" column="n450" type="number" title="" as="n450" key="0" />
        <column table="a" column="n451" type="number" title="" as="n451" key="0" />
        <column table="a" column="n452" type="number" title="" as="n452" key="0" />
        <column table="a" column="n453" type="number" title="" as="n453" key="0" />
        <column table="a" column="n454" type="number" title="" as="n454" key="0" />
        <column table="a" column="n455" type="number" title="" as="n455" key="0" />
        <column table="a" column="n456" type="number" title="" as="n456" key="0" />
        <column table="a" column="n457" type="number" title="" as="n457" key="0" />
        <column table="a" column="n458" type="number" title="" as="n458" key="0" />
        <column table="a" column="n459" type="number" title="" as="n459" key="0" />
        <column table="a" column="n460" type="number" title="" as="n460" key="0" />
        <column table="a" column="n461" type="number" title="" as="n461" key="0" />
        <column table="a" column="n462" type="number" title="" as="n462" key="0" />
        <column table="a" column="n463" type="number" title="" as="n463" key="0" />
        <column table="a" column="n464" type="number" title="" as="n464" key="0" />
        <column table="a" column="n465" type="number" title="" as="n465" key="0" />
        <column table="a" column="n466" type="number" title="" as="n466" key="0" />
        <column table="a" column="n467" type="number" title="" as="n467" key="0" />
        <column table="a" column="n468" type="number" title="" as="n468" key="0" />
        <column table="a" column="n469" type="number" title="" as="n469" key="0" />
        <column table="a" column="n470" type="number" title="" as="n470" key="0" />
        <column table="a" column="n471" type="number" title="" as="n471" key="0" />
        <column table="a" column="n472" type="number" title="" as="n472" key="0" />
        <column table="a" column="n473" type="number" title="" as="n473" key="0" />
        <column table="a" column="n474" type="number" title="" as="n474" key="0" />
        <column table="a" column="n475" type="number" title="" as="n475" key="0" />
        <column table="a" column="n476" type="number" title="" as="n476" key="0" />
        <column table="a" column="n477" type="number" title="" as="n477" key="0" />
        <column table="a" column="n478" type="number" title="" as="n478" key="0" />
        <column table="a" column="n479" type="number" title="" as="n479" key="0" />
        <column table="a" column="n480" type="number" title="" as="n480" key="0" />
        <column table="a" column="n481" type="number" title="" as="n481" key="0" />
        <column table="a" column="n482" type="number" title="" as="n482" key="0" />
        <column table="a" column="n483" type="number" title="" as="n483" key="0" />
        <column table="a" column="n484" type="number" title="" as="n484" key="0" />
        <column table="a" column="n485" type="number" title="" as="n485" key="0" />
        <column table="a" column="n486" type="number" title="" as="n486" key="0" />
        <column table="a" column="n487" type="number" title="" as="n487" key="0" />
        <column table="a" column="n488" type="number" title="" as="n488" key="0" />
        <column table="a" column="n489" type="number" title="" as="n489" key="0" />
        <column table="a" column="n490" type="number" title="" as="n490" key="0" />
        <column table="a" column="n491" type="number" title="" as="n491" key="0" />
        <column table="a" column="n492" type="number" title="" as="n492" key="0" />
        <column table="a" column="n493" type="number" title="" as="n493" key="0" />
        <column table="a" column="n494" type="number" title="" as="n494" key="0" />
        <column table="a" column="n495" type="number" title="" as="n495" key="0" />
        <column table="a" column="n496" type="number" title="" as="n496" key="0" />
        <column table="a" column="n497" type="number" title="" as="n497" key="0" />
        <column table="a" column="n498" type="number" title="" as="n498" key="0" />
        <column table="a" column="n499" type="number" title="" as="n499" key="0" />
        <column table="a" column="n500" type="number" title="" as="n500" key="0" />
        <column table="a" column="n501" type="number" title="" as="n501" key="0" />
        <column table="a" column="n502" type="number" title="" as="n502" key="0" />
        <column table="a" column="n503" type="number" title="" as="n503" key="0" />
        <column table="a" column="n504" type="number" title="" as="n504" key="0" />
        <column table="a" column="n505" type="number" title="" as="n505" key="0" />
        <column table="a" column="n506" type="number" title="" as="n506" key="0" />
        <column table="a" column="n507" type="number" title="" as="n507" key="0" />
        <column table="a" column="n508" type="number" title="" as="n508" key="0" />
        <column table="a" column="n509" type="number" title="" as="n509" key="0" />
        <column table="a" column="n510" type="number" title="" as="n510" key="0" />
        <column table="a" column="n511" type="number" title="" as="n511" key="0" />
        <column table="a" column="n512" type="number" title="" as="n512" key="0" />
        <column table="a" column="n513" type="number" title="" as="n513" key="0" />
        <column table="a" column="n514" type="number" title="" as="n514" key="0" />
        <column table="a" column="n515" type="number" title="" as="n515" key="0" />
        <column table="a" column="n516" type="number" title="" as="n516" key="0" />
        <column table="a" column="n517" type="number" title="" as="n517" key="0" />
        <column table="a" column="n518" type="number" title="" as="n518" key="0" />
        <column table="a" column="n519" type="number" title="" as="n519" key="0" />
        <column table="a" column="n520" type="number" title="" as="n520" key="0" />
        <column table="a" column="n521" type="number" title="" as="n521" key="0" />
        <column table="a" column="n522" type="number" title="" as="n522" key="0" />
        <column table="a" column="n523" type="number" title="" as="n523" key="0" />
        <column table="a" column="n524" type="number" title="" as="n524" key="0" />
        <column table="a" column="n525" type="number" title="" as="n525" key="0" />
        <column table="a" column="n526" type="number" title="" as="n526" key="0" />
        <column table="a" column="n527" type="number" title="" as="n527" key="0" />
        <column table="a" column="n528" type="number" title="" as="n528" key="0" />
        <column table="a" column="n529" type="number" title="" as="n529" key="0" />
        <column table="a" column="n530" type="number" title="" as="n530" key="0" />
        <column table="a" column="n531" type="number" title="" as="n531" key="0" />
        <column table="a" column="n532" type="number" title="" as="n532" key="0" />
        <column table="a" column="n533" type="number" title="" as="n533" key="0" />
        <column table="a" column="n534" type="number" title="" as="n534" key="0" />
        <column table="a" column="n535" type="number" title="" as="n535" key="0" />
        <column table="a" column="n536" type="number" title="" as="n536" key="0" />
        <column table="a" column="n537" type="number" title="" as="n537" key="0" />
        <column table="a" column="n538" type="number" title="" as="n538" key="0" />
        <column table="a" column="n539" type="number" title="" as="n539" key="0" />
        <column table="a" column="n540" type="number" title="" as="n540" key="0" />
        <column table="a" column="n541" type="number" title="" as="n541" key="0" />
        <column table="a" column="n542" type="number" title="" as="n542" key="0" />
        <column table="a" column="n543" type="number" title="" as="n543" key="0" />
        <column table="a" column="n544" type="number" title="" as="n544" key="0" />
        <column table="a" column="n545" type="number" title="" as="n545" key="0" />
        <column table="a" column="n546" type="number" title="" as="n546" key="0" />
        <column table="a" column="n547" type="number" title="" as="n547" key="0" />
        <column table="a" column="n548" type="number" title="" as="n548" key="0" />
        <column table="a" column="n549" type="number" title="" as="n549" key="0" />
        <column table="a" column="n550" type="number" title="" as="n550" key="0" />
        <column table="a" column="n551" type="number" title="" as="n551" key="0" />
        <column table="a" column="n552" type="number" title="" as="n552" key="0" />
        <column table="a" column="n553" type="number" title="" as="n553" key="0" />
        <column table="a" column="n554" type="number" title="" as="n554" key="0" />
        <column table="a" column="n555" type="number" title="" as="n555" key="0" />
        <column table="a" column="n556" type="number" title="" as="n556" key="0" />
        <column table="a" column="n557" type="number" title="" as="n557" key="0" />
        <column table="a" column="n558" type="number" title="" as="n558" key="0" />
        <column table="a" column="n559" type="number" title="" as="n559" key="0" />
        <column table="a" column="n560" type="number" title="" as="n560" key="0" />
        <column table="a" column="n561" type="number" title="" as="n561" key="0" />
        <column table="a" column="n562" type="number" title="" as="n562" key="0" />
        <column table="a" column="n563" type="number" title="" as="n563" key="0" />
        <column table="a" column="n564" type="number" title="" as="n564" key="0" />
        <column table="a" column="n565" type="number" title="" as="n565" key="0" />
        <column table="a" column="n566" type="number" title="" as="n566" key="0" />
        <column table="a" column="n567" type="number" title="" as="n567" key="0" />
        <column table="a" column="n568" type="number" title="" as="n568" key="0" />
        <column table="a" column="n569" type="number" title="" as="n569" key="0" />
        <column table="a" column="n570" type="number" title="" as="n570" key="0" />
        <column table="a" column="n571" type="number" title="" as="n571" key="0" />
        <column table="a" column="n572" type="number" title="" as="n572" key="0" />
        <column table="a" column="n573" type="number" title="" as="n573" key="0" />
        <column table="a" column="n574" type="number" title="" as="n574" key="0" />
        <column table="a" column="n575" type="number" title="" as="n575" key="0" />
        <column table="a" column="n576" type="number" title="" as="n576" key="0" />
        <column table="a" column="n577" type="number" title="" as="n577" key="0" />
        <column table="a" column="n578" type="number" title="" as="n578" key="0" />
        <column table="a" column="n579" type="number" title="" as="n579" key="0" />
        <column table="a" column="n580" type="number" title="" as="n580" key="0" />
        <column table="a" column="n581" type="number" title="" as="n581" key="0" />
        <column table="a" column="n582" type="number" title="" as="n582" key="0" />
        <column table="a" column="n583" type="number" title="" as="n583" key="0" />
        <column table="a" column="n584" type="number" title="" as="n584" key="0" />
        <column table="a" column="n585" type="number" title="" as="n585" key="0" />
        <column table="a" column="n586" type="number" title="" as="n586" key="0" />
        <column table="a" column="n587" type="number" title="" as="n587" key="0" />
        <column table="a" column="n588" type="number" title="" as="n588" key="0" />
        <column table="a" column="n589" type="number" title="" as="n589" key="0" />
        <column table="a" column="n590" type="number" title="" as="n590" key="0" />
        <column table="a" column="n591" type="number" title="" as="n591" key="0" />
        <column table="a" column="n592" type="number" title="" as="n592" key="0" />
        <column table="a" column="n593" type="number" title="" as="n593" key="0" />
        <column table="a" column="n594" type="number" title="" as="n594" key="0" />
        <column table="a" column="n595" type="number" title="" as="n595" key="0" />
        <column table="a" column="n596" type="number" title="" as="n596" key="0" />
        <column table="a" column="n597" type="number" title="" as="n597" key="0" />
        <column table="a" column="n598" type="number" title="" as="n598" key="0" />
        <column table="a" column="n599" type="number" title="" as="n599" key="0" />
        <column table="a" column="n600" type="number" title="" as="n600" key="0" />
        <column table="a" column="n601" type="number" title="" as="n601" key="0" />
        <column table="a" column="n602" type="number" title="" as="n602" key="0" />
        <column table="a" column="n603" type="number" title="" as="n603" key="0" />
        <column table="a" column="n604" type="number" title="" as="n604" key="0" />
        <column table="a" column="n605" type="number" title="" as="n605" key="0" />
        <column table="a" column="n606" type="number" title="" as="n606" key="0" />
        <column table="a" column="n607" type="number" title="" as="n607" key="0" />
        <column table="a" column="n608" type="number" title="" as="n608" key="0" />
        <column table="a" column="n609" type="number" title="" as="n609" key="0" />
        <column table="a" column="n610" type="number" title="" as="n610" key="0" />
        <column table="a" column="n611" type="number" title="" as="n611" key="0" />
        <column table="a" column="n612" type="number" title="" as="n612" key="0" />
        <column table="a" column="n613" type="number" title="" as="n613" key="0" />
        <column table="a" column="n614" type="number" title="" as="n614" key="0" />
        <column table="a" column="n615" type="number" title="" as="n615" key="0" />
        <column table="a" column="n616" type="number" title="" as="n616" key="0" />
        <column table="a" column="n617" type="number" title="" as="n617" key="0" />
        <column table="a" column="n618" type="number" title="" as="n618" key="0" />
        <column table="a" column="n619" type="number" title="" as="n619" key="0" />
        <column table="a" column="n620" type="number" title="" as="n620" key="0" />
        <column table="a" column="n621" type="number" title="" as="n621" key="0" />
        <column table="a" column="n622" type="number" title="" as="n622" key="0" />
        <column table="a" column="n623" type="number" title="" as="n623" key="0" />
        <column table="a" column="n624" type="number" title="" as="n624" key="0" />
        <column table="a" column="n625" type="number" title="" as="n625" key="0" />
        <column table="a" column="n626" type="number" title="" as="n626" key="0" />
        <column table="a" column="n627" type="number" title="" as="n627" key="0" />
        <column table="a" column="n628" type="number" title="" as="n628" key="0" />
        <column table="a" column="n629" type="number" title="" as="n629" key="0" />
        <column table="a" column="n630" type="number" title="" as="n630" key="0" />
        <column table="a" column="n631" type="number" title="" as="n631" key="0" />
        <column table="a" column="n632" type="number" title="" as="n632" key="0" />
        <column table="a" column="n633" type="number" title="" as="n633" key="0" />
        <column table="a" column="n634" type="number" title="" as="n634" key="0" />
        <column table="a" column="n635" type="number" title="" as="n635" key="0" />
        <column table="a" column="n636" type="number" title="" as="n636" key="0" />
        <column table="a" column="n637" type="number" title="" as="n637" key="0" />
        <column table="a" column="n638" type="number" title="" as="n638" key="0" />
        <column table="a" column="n639" type="number" title="" as="n639" key="0" />
        <column table="a" column="n640" type="number" title="" as="n640" key="0" />
        <column table="a" column="n641" type="number" title="" as="n641" key="0" />
        <column table="a" column="n642" type="number" title="" as="n642" key="0" />
        <column table="a" column="n643" type="number" title="" as="n643" key="0" />
        <column table="a" column="n644" type="number" title="" as="n644" key="0" />
        <column table="a" column="n645" type="number" title="" as="n645" key="0" />
        <column table="a" column="n646" type="number" title="" as="n646" key="0" />
        <column table="a" column="n647" type="number" title="" as="n647" key="0" />
        <column table="a" column="n648" type="number" title="" as="n648" key="0" />
        <column table="a" column="n649" type="number" title="" as="n649" key="0" />
        <column table="a" column="n650" type="number" title="" as="n650" key="0" />
        <column table="a" column="n651" type="number" title="" as="n651" key="0" />
        <column table="a" column="n652" type="number" title="" as="n652" key="0" />
        <column table="a" column="n653" type="number" title="" as="n653" key="0" />
        <column table="a" column="n654" type="number" title="" as="n654" key="0" />
        <column table="a" column="n655" type="number" title="" as="n655" key="0" />
        <column table="a" column="n656" type="number" title="" as="n656" key="0" />
        <column table="a" column="n657" type="number" title="" as="n657" key="0" />
        <column table="a" column="n658" type="number" title="" as="n658" key="0" />
        <column table="a" column="n659" type="number" title="" as="n659" key="0" />
        <column table="a" column="n660" type="number" title="" as="n660" key="0" />
        <column table="a" column="n661" type="number" title="" as="n661" key="0" />
        <column table="a" column="n662" type="number" title="" as="n662" key="0" />
        <column table="a" column="n663" type="number" title="" as="n663" key="0" />
        <column table="a" column="n664" type="number" title="" as="n664" key="0" />
        <column table="a" column="n665" type="number" title="" as="n665" key="0" />
        <column table="a" column="n666" type="number" title="" as="n666" key="0" />
        <column table="a" column="n667" type="number" title="" as="n667" key="0" />
        <column table="a" column="n668" type="number" title="" as="n668" key="0" />
        <column table="a" column="n669" type="number" title="" as="n669" key="0" />
        <column table="a" column="n670" type="number" title="" as="n670" key="0" />
        <column table="a" column="n671" type="number" title="" as="n671" key="0" />
        <column table="a" column="n672" type="number" title="" as="n672" key="0" />
        <column table="a" column="n673" type="number" title="" as="n673" key="0" />
        <column table="a" column="n674" type="number" title="" as="n674" key="0" />
        <column table="a" column="n675" type="number" title="" as="n675" key="0" />
        <column table="a" column="n676" type="number" title="" as="n676" key="0" />
        <column table="a" column="n677" type="number" title="" as="n677" key="0" />
        <column table="a" column="n678" type="number" title="" as="n678" key="0" />
        <column table="a" column="n679" type="number" title="" as="n679" key="0" />
        <column table="a" column="n680" type="number" title="" as="n680" key="0" />
        <column table="a" column="n681" type="number" title="" as="n681" key="0" />
        <column table="a" column="n682" type="number" title="" as="n682" key="0" />
        <column table="a" column="n683" type="number" title="" as="n683" key="0" />
        <column table="a" column="n684" type="number" title="" as="n684" key="0" />
        <column table="a" column="n685" type="number" title="" as="n685" key="0" />
        <column table="a" column="n686" type="number" title="" as="n686" key="0" />
        <column table="a" column="n687" type="number" title="" as="n687" key="0" />
        <column table="a" column="n688" type="number" title="" as="n688" key="0" />
        <column table="a" column="n689" type="number" title="" as="n689" key="0" />
        <column table="a" column="n690" type="number" title="" as="n690" key="0" />
        <column table="a" column="n691" type="number" title="" as="n691" key="0" />
        <column table="a" column="n692" type="number" title="" as="n692" key="0" />
        <column table="a" column="n693" type="number" title="" as="n693" key="0" />
        <column table="a" column="n694" type="number" title="" as="n694" key="0" />
        <column table="a" column="n695" type="number" title="" as="n695" key="0" />
        <column table="a" column="n696" type="number" title="" as="n696" key="0" />
        <column table="a" column="n697" type="number" title="" as="n697" key="0" />
        <column table="a" column="n698" type="number" title="" as="n698" key="0" />
        <column table="a" column="n699" type="number" title="" as="n699" key="0" />
        <column table="a" column="n700" type="number" title="" as="n700" key="0" />
        <column table="a" column="n701" type="number" title="" as="n701" key="0" />
        <column table="a" column="n702" type="number" title="" as="n702" key="0" />
        <column table="a" column="n703" type="number" title="" as="n703" key="0" />
        <column table="a" column="n704" type="number" title="" as="n704" key="0" />
        <column table="a" column="n705" type="number" title="" as="n705" key="0" />
        <column table="a" column="n706" type="number" title="" as="n706" key="0" />
        <column table="a" column="n707" type="number" title="" as="n707" key="0" />
        <column table="a" column="n708" type="number" title="" as="n708" key="0" />
        <column table="a" column="n709" type="number" title="" as="n709" key="0" />
        <column table="a" column="n710" type="number" title="" as="n710" key="0" />
        <column table="a" column="n711" type="number" title="" as="n711" key="0" />
        <column table="a" column="n712" type="number" title="" as="n712" key="0" />
        <column table="a" column="n713" type="number" title="" as="n713" key="0" />
        <column table="a" column="n714" type="number" title="" as="n714" key="0" />
        <column table="a" column="n715" type="number" title="" as="n715" key="0" />
        <column table="a" column="n716" type="number" title="" as="n716" key="0" />
        <column table="a" column="n717" type="number" title="" as="n717" key="0" />
        <column table="a" column="n718" type="number" title="" as="n718" key="0" />
        <column table="a" column="n719" type="number" title="" as="n719" key="0" />
        <column table="a" column="n720" type="number" title="" as="n720" key="0" />
        <column table="a" column="n721" type="number" title="" as="n721" key="0" />
        <column table="a" column="n722" type="number" title="" as="n722" key="0" />
        <column table="a" column="n723" type="number" title="" as="n723" key="0" />
        <column table="a" column="n724" type="number" title="" as="n724" key="0" />
        <column table="a" column="n725" type="number" title="" as="n725" key="0" />
        <column table="a" column="n726" type="number" title="" as="n726" key="0" />
        <column table="a" column="n727" type="number" title="" as="n727" key="0" />
        <column table="a" column="n728" type="number" title="" as="n728" key="0" />
        <column table="a" column="n729" type="number" title="" as="n729" key="0" />
        <column table="a" column="n730" type="number" title="" as="n730" key="0" />
        <column table="a" column="n731" type="number" title="" as="n731" key="0" />
        <column table="a" column="n732" type="number" title="" as="n732" key="0" />
        <column table="a" column="n733" type="number" title="" as="n733" key="0" />
        <column table="a" column="n734" type="number" title="" as="n734" key="0" />
        <column table="a" column="n735" type="number" title="" as="n735" key="0" />
        <column table="a" column="n736" type="number" title="" as="n736" key="0" />
        <column table="a" column="n737" type="number" title="" as="n737" key="0" />
        <column table="a" column="n738" type="number" title="" as="n738" key="0" />
        <column table="a" column="n739" type="number" title="" as="n739" key="0" />
        <column table="a" column="n740" type="number" title="" as="n740" key="0" />
        <column table="a" column="n741" type="number" title="" as="n741" key="0" />
        <column table="a" column="n742" type="number" title="" as="n742" key="0" />
        <column table="a" column="n743" type="number" title="" as="n743" key="0" />
        <column table="a" column="n744" type="number" title="" as="n744" key="0" />
        <column table="a" column="n745" type="number" title="" as="n745" key="0" />
        <column table="a" column="n746" type="number" title="" as="n746" key="0" />
        <column table="a" column="n747" type="number" title="" as="n747" key="0" />
        <column table="a" column="n748" type="number" title="" as="n748" key="0" />
        <column table="a" column="n749" type="number" title="" as="n749" key="0" />
        <column table="a" column="n750" type="number" title="" as="n750" key="0" />
        <column table="a" column="n751" type="number" title="" as="n751" key="0" />
        <column table="a" column="n752" type="number" title="" as="n752" key="0" />
        <column table="a" column="n753" type="number" title="" as="n753" key="0" />
        <column table="a" column="n754" type="number" title="" as="n754" key="0" />
        <column table="a" column="n755" type="number" title="" as="n755" key="0" />
        <column table="a" column="n756" type="number" title="" as="n756" key="0" />
        <column table="a" column="n757" type="number" title="" as="n757" key="0" />
        <column table="a" column="n758" type="number" title="" as="n758" key="0" />
        <column table="a" column="n759" type="number" title="" as="n759" key="0" />
        <column table="a" column="n760" type="number" title="" as="n760" key="0" />
        <column table="a" column="n761" type="number" title="" as="n761" key="0" />
        <column table="a" column="n762" type="number" title="" as="n762" key="0" />
        <column table="a" column="n763" type="number" title="" as="n763" key="0" />
        <column table="a" column="n764" type="number" title="" as="n764" key="0" />
        <column table="a" column="n765" type="number" title="" as="n765" key="0" />
        <column table="a" column="n766" type="number" title="" as="n766" key="0" />
        <column table="a" column="n767" type="number" title="" as="n767" key="0" />
        <column table="a" column="n768" type="number" title="" as="n768" key="0" />
        <column table="a" column="n769" type="number" title="" as="n769" key="0" />
        <column table="a" column="n770" type="number" title="" as="n770" key="0" />
        <column table="a" column="n771" type="number" title="" as="n771" key="0" />
        <column table="a" column="n772" type="number" title="" as="n772" key="0" />
        <column table="a" column="n773" type="number" title="" as="n773" key="0" />
        <column table="a" column="n774" type="number" title="" as="n774" key="0" />
        <column table="a" column="n775" type="number" title="" as="n775" key="0" />
        <column table="a" column="n776" type="number" title="" as="n776" key="0" />
        <column table="a" column="n777" type="number" title="" as="n777" key="0" />
        <column table="a" column="n778" type="number" title="" as="n778" key="0" />
        <column table="a" column="n779" type="number" title="" as="n779" key="0" />
        <column table="a" column="n780" type="number" title="" as="n780" key="0" />
        <column table="a" column="n781" type="number" title="" as="n781" key="0" />
        <column table="a" column="n782" type="number" title="" as="n782" key="0" />
        <column table="a" column="n783" type="number" title="" as="n783" key="0" />
        <column table="a" column="n784" type="number" title="" as="n784" key="0" />
        <column table="a" column="n785" type="number" title="" as="n785" key="0" />
        <column table="a" column="n786" type="number" title="" as="n786" key="0" />
        <column table="a" column="n787" type="number" title="" as="n787" key="0" />
        <column table="a" column="n788" type="number" title="" as="n788" key="0" />
        <column table="a" column="n789" type="number" title="" as="n789" key="0" />
        <column table="a" column="n790" type="number" title="" as="n790" key="0" />
        <column table="a" column="n791" type="number" title="" as="n791" key="0" />
        <column table="a" column="n792" type="number" title="" as="n792" key="0" />
        <column table="a" column="n793" type="number" title="" as="n793" key="0" />
        <column table="a" column="n794" type="number" title="" as="n794" key="0" />
        <column table="a" column="n795" type="number" title="" as="n795" key="0" />
        <column table="a" column="n796" type="number" title="" as="n796" key="0" />
        <column table="a" column="n797" type="number" title="" as="n797" key="0" />
        <column table="a" column="n798" type="number" title="" as="n798" key="0" />
        <column table="a" column="n799" type="number" title="" as="n799" key="0" />
        <column table="a" column="i1" type="number" title="" as="i1" key="0" />
        <column table="a" column="s10" type="string" title="" as="s10" key="0" />
        <column table="a" column="s11" type="string" title="" as="s11" key="0" />
        <column table="a" column="s12" type="string" title="" as="s12" key="0" />
        <column table="a" column="s13" type="string" title="" as="s13" key="0" />
        <column table="a" column="s14" type="string" title="" as="s14" key="0" />
        <column table="a" column="s15" type="string" title="" as="s15" key="0" />
        <column table="a" column="s16" type="string" title="" as="s16" key="0" />
        <column table="a" column="s17" type="string" title="" as="s17" key="0" />
        <column table="a" column="s18" type="string" title="" as="s18" key="0" />
        <column table="a" column="s19" type="string" title="" as="s19" key="0" />
        <column table="a" column="s20" type="string" title="" as="s20" key="0" />
        <column table="a" column="s21" type="string" title="" as="s21" key="0" />
        <column table="a" column="s22" type="string" title="" as="s22" key="0" />
        <column table="a" column="s23" type="string" title="" as="s23" key="0" />
        <column table="a" column="s24" type="string" title="" as="s24" key="0" />
        <column table="a" column="s25" type="string" title="" as="s25" key="0" />
        <column table="a" column="s26" type="string" title="" as="s26" key="0" />
        <column table="a" column="s27" type="string" title="" as="s27" key="0" />
        <column table="a" column="s28" type="string" title="" as="s28" key="0" />
        <column table="a" column="s29" type="string" title="" as="s29" key="0" />
        <column table="a" column="s30" type="string" title="" as="s30" key="0" />
        <column table="a" column="s31" type="string" title="" as="s31" key="0" />
        <column table="a" column="s32" type="string" title="" as="s32" key="0" />
        <column table="a" column="s33" type="string" title="" as="s33" key="0" />
        <column table="a" column="s34" type="string" title="" as="s34" key="0" />
        <column table="a" column="s35" type="string" title="" as="s35" key="0" />
        <column table="a" column="s36" type="string" title="" as="s36" key="0" />
        <column table="a" column="s37" type="string" title="" as="s37" key="0" />
        <column table="a" column="s38" type="string" title="" as="s38" key="0" />
        <column table="a" column="s39" type="string" title="" as="s39" key="0" />
        <column table="a" column="s40" type="string" title="" as="s40" key="0" />
        <column table="a" column="s41" type="string" title="" as="s41" key="0" />
        <column table="a" column="s42" type="string" title="" as="s42" key="0" />
        <column table="a" column="s43" type="string" title="" as="s43" key="0" />
        <column table="a" column="s44" type="string" title="" as="s44" key="0" />
        <column table="a" column="s45" type="string" title="" as="s45" key="0" />
        <column table="a" column="s46" type="string" title="" as="s46" key="0" />
        <column table="a" column="s47" type="string" title="" as="s47" key="0" />
        <column table="a" column="s48" type="string" title="" as="s48" key="0" />
        <column table="a" column="s49" type="string" title="" as="s49" key="0" />
        <column table="a" column="s50" type="string" title="" as="s50" key="0" />
        <column table="a" column="s51" type="string" title="" as="s51" key="0" />
        <column table="a" column="s52" type="string" title="" as="s52" key="0" />
        <column table="a" column="s53" type="string" title="" as="s53" key="0" />
        <column table="a" column="s54" type="string" title="" as="s54" key="0" />
        <column table="a" column="s55" type="string" title="" as="s55" key="0" />
        <column table="a" column="s56" type="string" title="" as="s56" key="0" />
        <column table="a" column="s57" type="string" title="" as="s57" key="0" />
        <column table="a" column="s58" type="string" title="" as="s58" key="0" />
        <column table="a" column="s59" type="string" title="" as="s59" key="0" />
        <column table="a" column="s60" type="string" title="" as="s60" key="0" />
        <column table="a" column="s61" type="string" title="" as="s61" key="0" />
        <column table="a" column="s62" type="string" title="" as="s62" key="0" />
        <column table="a" column="s63" type="string" title="" as="s63" key="0" />
        <column table="a" column="s64" type="string" title="" as="s64" key="0" />
        <column table="a" column="s65" type="string" title="" as="s65" key="0" />
        <column table="a" column="s66" type="string" title="" as="s66" key="0" />
        <column table="a" column="s67" type="string" title="" as="s67" key="0" />
        <column table="a" column="s68" type="string" title="" as="s68" key="0" />
        <column table="a" column="s69" type="string" title="" as="s69" key="0" />
        <column table="a" column="kod_rab" type="number" as="kod_rab" key="0" />
        <column table="a" column="skod" type="string" title="" as="skod" key="0" />
        <column table="a" column="sid" type="string" title="" as="sid" key="0" />
        <column table="a" column="sparentid" type="string" title="" as="sparentid" key="0" />
        <column table="a" column="rn" type="number" title="" as="rn" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rr_temp" as="a" />
      </from>
    </query>
    <query name="rr_userarea_access" class="1" timestamp="02.06.2017 14:30:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rr_userarea_access.xml" haskeys="1">
      <select>
        <column table="a" column="kod_area" type="number" as="kod_area" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kod_access" type="number" comment="1 - чтение, 2 - запись" as="kod_access" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rr_userarea_access" as="a" />
      </from>
    </query>
    <query name="rs_esys" class="1" timestamp="04.07.2017 18:05:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rs_esys.xml" haskeys="1">
      <select>
        <column table="a" column="kod_esys" type="number" comment="код энергосистемы" is-fact="1" agg="max" as="kod_esys" fact="rs_esys_kod_esys" key="1" fixed="1" />
        <column table="a" column="kod_m" type="number" comment="код места для начального поиска адреса {1.общие;5;1;1}" as="kod_m" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код организации  (энергосистемы , управления энергосистемы), чьи реквизиты фигурируют в названии энергосистемы.&#xA;руководителей и телефоны доставать через этот код ! {1.общие;1;1;1}" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="назв. энергосистемы {1.общие;2;1;1}" fact="rs_esys_name" agg="max" as="name" key="0" />
        <column table="a" column="sname" type="string" title="" comment="краткое назв. энергосистемы {1.общие;3;1;1}" as="sname" key="0" />
        <column table="a" column="version" type="string" title="" comment="1 -спу&#xA;2- аскуэ&#xA;3- тепло&#xA;4- баланс пс&#xA;5- пкэ {1.общие;10;1;0}" as="version" key="0" />
        <column table="a" column="pk_basis" type="number" title="" comment="добавка к кодам {1.общие;9;1;1}" as="pk_basis" key="0" />
        <column table="a" column="db_level" type="number" title="" comment="уровень старшинства базы {1.общие;8;1;1}" as="db_level" key="0" />
        <column table="a" column="spim" type="number" title="" comment="признак наличия подсистемы паспортизация приборов  по эл-ву" as="spim" key="0" />
        <column table="a" column="teplo" type="number" title="" comment="признак наличия подсистемы тепло" as="teplo" key="0" />
        <column table="a" column="electro" type="number" title="" as="electro" key="0" />
        <column table="a" column="username" type="string" title="" comment="имя создателя схемы" as="username" key="0" />
        <column table="a" column="kodd" type="number" title="" comment="адрес энергосистемы - код дома {1.общие;4;1;1}" as="kodd" reference="k_house" refcol="kodd" key="0" />
        <column table="a" column="kod_m_reg" type="number" comment="начальный код , с которого формируются районы {1.общие;6;1;1}" as="kod_m_reg" key="0" />
        <column table="a" column="tarif_power" type="number" title="" comment="код тарифа за мощность по умолчанию применяется к одноставочным субабонентом для контроля их превышения {2.электричество;3;1;1}" as="tarif_power" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="avg_months" type="number" title="" comment="кол-во месяцев для расчета по среднему {2.электричество;4;1;1}" as="avg_months" key="0" />
        <column table="a" column="tnv" type="number" title="" comment="температура наружного воздуха региона" as="tnv" reference="ds_alfnagr" refcol="tnv" key="0" />
        <column table="a" column="kodp_uch" type="number" title="" comment="код участка , указывается только на базе&#xA;участка" as="kodp_uch" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="replication" type="number" title="" comment="количество триггеров репликации, которые должны быть на базе" as="replication" key="0" />
        <column table="a" column="tarif_byt" type="number" title="" comment="тариф населения по умолчанию(2.электричество) {5.население;1;1;1}" as="tarif_byt" key="0" />
        <column table="a" column="pr_avans_umen" type="number" title="" comment="признак расчета уменьшения аванса {6.финансы;4;1;1}" as="pr_avans_umen" key="0" />
        <column table="a" column="pr_poteri" type="number" title="" comment="признак расчета(0) или указания потерь в % (1)" as="pr_poteri" key="0" />
        <column table="a" column="kod_def_dat" type="number" as="kod_def_dat" key="0" />
        <column table="a" column="build" type="number" title="" comment="используются ли данные о строении в объектах" as="build" key="0" />
        <column table="a" column="tarif28" type="number" title="" comment="код тарифа для начисления неустойки за недоиспользование электроэнергии {2.электричество;1;1;1}" as="tarif28" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="out_precision" type="number" title="" comment="точность указания расхода (кол-во знаков после запятой) {2.электричество;5;1;1}" as="out_precision" key="0" />
        <column table="a" column="tarif_precision" type="number" title="" comment="точность указания тарифа (кол-во знаков после запятой) {2.электричество;6;1;1}" as="tarif_precision" key="0" />
        <column table="a" column="poteri_react" type="number" title="" comment="признак начисления %-ных потерь на реактив {2.электричество;15;1;1}" as="poteri_react" key="0" />
        <column table="a" column="sklad_pu" type="number" title="" comment="склад приборов учета {1.общие;12;1;1}" as="sklad_pu" key="0" />
        <column table="a" column="pr_tarif_react" type="number" title="" comment="признак расчета реактива по тарифу рэк объекта. {2.электричество;16;1;1}" as="pr_tarif_react" key="0" />
        <column table="a" column="pr_pl_name" type="number" title="" comment="вариант указания наименования абонента в платежке (0- краткое, 1- полное)" as="pr_pl_name" key="0" />
        <column table="a" column="pr_pl_filial" type="number" title="" comment="признак печати филиала в платежку.&#xA;если стоит 1, то вместо головной организации данного kodp печатаем его самого (то есть,филиал)" as="pr_pl_filial" key="0" />
        <column table="a" column="tarif_byt_teplo" type="number" title="" comment="тариф населения  по умолчанию(тепло) {5.население;2;1;1}" as="tarif_byt_teplo" key="0" />
        <column table="a" column="dop_s" type="number" title="" as="dop_s" key="0" />
        <column table="a" column="pred_norm" type="number" title="" as="pred_norm" key="0" />
        <column table="a" column="teplo_var" type="number" title="" comment="вариант тепловой схемы 0- kazbar 1-komivlad" as="teplo_var" key="0" />
        <column table="a" column="teplo_pasport" type="number" title="" comment="наличие паспортизации в тепл схеме коми-влад , 0- отсутств." as="teplo_pasport" key="0" />
        <column table="a" column="pr_dog_power_askue" type="number" title="" comment="вариант расчета мощности. 0-max из дог. и факт. (кроме объектов с призн. - расч. по факт.), 1-брать фактическую при аскуэ и вариант 0 не для аскуэ, 2-договорная, 3-фактическая без учета мощности населения, 4-фактическая с учетом мощности населения  {2.электричество;12;1;1}" as="pr_dog_power_askue" key="0" />
        <column table="a" column="kod_region_gol" type="number" comment="код региона по гололеду" as="kod_region_gol" reference="hk_poteri_region_g" refcol="kod_region_gol" key="0" />
        <column table="a" column="kod_region_klim" type="number" comment="код региона по климатическим условиям" as="kod_region_klim" reference="hk_poteri_region_k" refcol="kod_region_klim" key="0" />
        <column table="a" column="vid_kniga" type="number" title="" comment="вид книги продаж, 1-казанский, 2-владик, 10-пэк. см описание в пакете {6.финансы;2;1;1}" as="vid_kniga" key="0" />
        <column table="a" column="sp_askue" type="number" title="" comment="признак наличия системы паспортизации аскуэ {1.общие;11;1;1}" as="sp_askue" key="0" />
        <column table="a" column="byt_varlg" type="number" title="" comment="вариант расчета льгот бытовикам" as="byt_varlg" key="0" />
        <column table="a" column="kod_loss" type="number" comment="вариант предъявления потерь  {2.электричество;13;1;1}" as="kod_loss" reference="hk_loss" refcol="kod_loss" key="0" />
        <column table="a" column="sost_rate" type="number" title="" comment="1-ставка равна составляющей, 0-ставка может быть меньше составляющей {6.финансы;3;1;1}" as="sost_rate" key="0" />
        <column table="a" column="pr_use_dummyfider" type="number" title="" comment="дает возможность использовать фиктивный элемент эл. схемы (если он в системе существует). фиктивный элемент будет предлагаться по умолчанию, как элемент схемы в модулях &quot;ту&quot; и &quot;присоединенная мощность&quot;. {2.электричество;17;1;1}" as="pr_use_dummyfider" key="0" />
        <column table="a" column="no_rasch_prib_tep" type="number" title="" comment="сколько месяцев не рассчитывать прибористов как бесприборников при непредоставлении показаний {3.тепло;3;1;1}" as="no_rasch_prib_tep" key="0" />
        <column table="a" column="kod_dat_dog" type="number" comment="{1.общие;7;1;1}" as="kod_dat_dog" key="0" />
        <column table="a" column="pr_pogash" type="number" title="" comment="признак погашения промежути {6.финансы;5;1;1}" as="pr_pogash" key="0" />
        <column table="a" column="reason_recalc" type="number" title="" comment="признак обязательности причины эл. перерасчета для быта {5.население;3;1;1}" as="reason_recalc" key="0" />
        <column table="a" column="poteri_peretok" type="number" title="" comment="признак начисления %-ных потерь на активную обратную энергию  {2.электричество;18;1;1}" as="poteri_peretok" key="0" />
        <column table="a" column="pr_so" type="number" title="" comment="признак расчета системы отопления  0-стандарт; 1- с учетом ветра" as="pr_so" key="0" />
        <column table="a" column="precision_free_price" type="number" title="" comment="точность указания расхода при расчете по свободным ценам (кол-во знаков после запятой) {2.электричество;8;1;1}" as="precision_free_price" key="0" />
        <column table="a" column="tarif18" type="number" title="" comment="код тарифа для начисления неустойки за превышение {2.электричество;2;1;1}" as="tarif18" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_esys_ext" type="number" as="kod_esys_ext" key="0" />
        <column table="a" column="kod_bzad" type="number" comment="кол-во дней задолженности {7.по-умолчанию;6;1;1}" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="kod_fs" type="number" comment="форма собственности {7.по-умолчанию;3;1;1}" as="kod_fs" reference="ks_fs" refcol="kod_fs" key="0" />
        <column table="a" column="kod_min" type="number" comment="министерство {7.по-умолчанию;1;1;1}" as="kod_min" reference="ks_ministry" refcol="kod_m" key="0" />
        <column table="a" column="kod_otrasl" type="number" comment="отрасль {7.по-умолчанию;2;1;1}" as="kod_otrasl" reference="ks_otrasl" refcol="kod_otrasl" key="0" />
        <column table="a" column="kod_okved" type="number" comment="оквэд {7.по-умолчанию;4;1;1}" as="kod_okved" reference="ks_okved" refcol="kod_okved" key="0" />
        <column table="a" column="kod_ist" type="number" comment="код источника финансирования {7.по-умолчанию;5;1;1}" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="var_uved" type="number" title="" comment="номер варианта для печати уведомлений" as="var_uved" key="0" />
        <column table="a" column="precision_power_free" type="number" title="" comment="точность указания мощности при расчете по свободным ценам (кол-во знаков после запятой)  {2.электричество;10;1;1}" as="precision_power_free" key="0" />
        <column table="a" column="otk_pacx_energi" type="number" title="" comment="процент допустимого отклонения расхода электрической энергии {2.электричество;7;1;1}" as="otk_pacx_energi" key="0" />
        <column table="a" column="pr_sk" type="number" title="" comment="можно ли использовать функции по работе с ск" as="pr_sk" key="0" />
        <column table="a" column="use_pr_uc" type="number" title="" comment="навигатор элсетей.  использовать атрибут &quot;строящийся&quot; энергообъект или нет (1 | 0) по умолчанию &quot;нет&quot; - 0." as="use_pr_uc" key="0" />
        <column table="a" column="loss_ver" type="number" title="" comment="версия расчета потерь. возможные значения: 1 - потери на границе &quot;абонент - сети&quot;; 2 - потери на границе &quot;абонент - абонент&quot;. учитывает возможные варианты границ, включая ссо, ск, абонент" as="loss_ver" key="0" />
        <column table="a" column="eseti" type="number" title="" comment="1-ленэнерго сети" as="eseti" key="0" />
        <column table="a" column="date_eo_schema_collect" type="date" title="" comment="дата последней сборки полной схемы" as="date_eo_schema_collect" key="0" />
        <column table="a" column="gen_point" type="number" title="" comment="флаг доступности механизма &quot;общих точек&quot;" as="gen_point" key="0" />
        <column table="a" column="sum_gpz" type="number" title="" comment="суммы гпз, которая определяет, кто будет подписывать график (юридизм)" as="sum_gpz" key="0" />
        <column table="a" column="pr_23" type="number" title="" comment="поле &quot;вид расчета штрафных санкций по мощности&quot; значения : 0 - стандартный алгоритм, 1 - по потреблению через коэфф. на гтп {2.электричество;14;1;1}" as="pr_23" key="0" />
        <column table="a" column="pr_point_power" type="number" title="" comment="признак ведения мощности в точках" as="pr_point_power" key="0" />
        <column table="a" column="eru" type="number" title="" comment="флаг наличия схемы присоединения (ис ппэ)" as="eru" key="0" />
        <column table="a" column="npr_npot" type="number" title="" comment="номер приказа нормативов потерь в теплосетях" as="npr_npot" key="0" />
        <column table="a" column="isname" type="string" title="" comment="содержит наименование информационной системы (is)." as="isname" key="0" />
        <column table="a" column="tarif_pres_teplo" type="number" title="" comment="тепло.кол-во знаков после запятой в ставке тарифа при выводе на печать сф и актов приема-передачи {3.тепло;4;1;1}" as="tarif_pres_teplo" key="0" />
        <column table="a" column="algoritm_hh" type="number" title="" comment="алгоритм расчета ччи. если null, то по умолчанию, 1 - по одному месяцу" as="algoritm_hh" key="0" />
        <column table="a" column="pr_map_losses" type="number" title="" comment="признак того что в системе используются карты потерь и точки присоединения" as="pr_map_losses" key="0" />
        <column table="a" column="esch_ext" type="number" title="" comment="признак наличия расширенных способов работы с навигатором сетей" as="esch_ext" key="0" />
        <column table="a" column="kf_address_arg" type="number" title="" comment="значение аргумента n_r функции nk_adress.kf_address ( ), определяющего точность формирования строки адреса по коду дома. результат работы функции храниться в столбце k_house.kf_adress_o. &quot;точность&quot; вывода для разных энергосистем может отличаться. допустимые значения см. в описании nk_adress.kf_address ( )." as="kf_address_arg" key="0" />
        <column table="a" column="gen_tarif" type="number" title="" comment="код группы тарифов по умолчанию для общей точки" as="gen_tarif" key="0" />
        <column table="a" column="ip_gis" type="string" title="" comment="адрес гис - сервера" as="ip_gis" key="0" />
        <column table="a" column="use_ibank" type="number" title="" comment="признак (1/0) использовать/не использовать список банков (ks_ibank) полученный из внешних источников (интернет и т.д..)" as="use_ibank" key="0" />
        <column table="a" column="all_free" type="number" title="" comment="1 - применять настройки окон для варианта расчета 100 по свободному тарифу&#xA;0 - не применять" as="all_free" key="0" />
        <column table="a" column="ist_otkl" type="number" title="" comment="режим &quot;история отключений&quot;: 0 - не доступен, 1 - доступен" as="ist_otkl" key="0" />
        <column table="a" column="module_lk" type="number" title="" as="module_lk" key="0" />
        <column table="a" column="use_pr33_opt" type="number" title="" comment="использовать опцию &quot;ручной выбор точек в приложение 3.3&quot;" as="use_pr33_opt" key="0" />
        <column table="a" column="outer_population" type="number" title="" comment="использовать механизмы внешней&#xA;выгрузки данных по по население" as="outer_population" key="0" />
        <column table="a" column="pr_jrep_etl_ov_tx" type="number" title="" comment="1- включить процедуры обновления отч.табл. начислений" as="pr_jrep_etl_ov_tx" key="0" />
        <column table="a" column="tarif_ctp" type="number" title="" comment="код тарифа за гвс от цтп" as="tarif_ctp" key="0" />
        <column table="a" column="pr_poteri_vl" type="number" title="" comment="включена\выключена возможность расчета потерь в изоляторах вл, на корону вл" as="pr_poteri_vl" key="0" />
        <column table="a" column="pr_korr_sf" type="number" title="" comment="признак печати корректирующих сф с 1окт. по 31дек.2011г." as="pr_korr_sf" key="0" />
        <column table="a" column="s_plomba" type="number" title="" comment="признак наличия с-мы учета опломбир. =0 без 1-раз пломб, =1 1-раз пломбы юл, =2 1-раз пломбы фл, =3 1-раз пломбы юл и фл" as="s_plomba" key="0" />
        <column table="a" column="pr_nagruz_class" type="number" title="" comment="ведение общего значения нагрузки с указанием класса" as="pr_nagruz_class" key="0" />
        <column table="a" column="section_version" type="number" title="" comment="версия справочника сечений" as="section_version" key="0" />
        <column table="a" column="period_kniga" type="number" title="" comment="периодичность книги продаж. 1- месяц, 3-квартал,6-полгода, 12-год {6.финансы;1;1;1}" as="period_kniga" key="0" />
        <column table="a" column="load_to_ar_point" type="number" title="" comment="загрузка в хранилище точек 1 - вкл, 0 - выкл" as="load_to_ar_point" key="0" />
        <column table="a" column="ul_fl" type="number" title="" comment="управление видимостью полей о связи ту.юл-ту.фл" as="ul_fl" key="0" />
        <column table="a" column="pr_nagruz_byt" type="number" title="" comment="управление возможностью устанавливать у прис. мощности признак население" as="pr_nagruz_byt" key="0" />
        <column table="a" column="empsetting" type="number" title="" comment="определяет способ ввода должности для служащего (структура организации, структура энергосистемы)&#xA;0 - выбор из справочника&#xA;1 - ручной ввод" as="empsetting" key="0" />
        <column table="a" column="kniga_collapse" type="number" title="" as="kniga_collapse" key="0" />
        <column table="a" column="use_pvalue_pril" type="number" title="" comment="&quot;макс. мощность&quot;. временный признак, создан на адаптационный период. значение 1 указывает, что при вычислении pmax по объекту использовать столбец hr_netlimit.pvalue_pril, иначе ...pvalue" as="use_pvalue_pril" key="0" />
        <column table="a" column="pr_hide_pmax" type="number" title="" comment="скрыть поле &quot;разреш.нагрузка&quot; для са/группа точек: 1 -да" as="pr_hide_pmax" key="0" />
        <column table="a" column="out_precision_odn" type="number" title="" comment="точность указания пост.расхода одн {2.электричество;11;1;1}" as="out_precision_odn" key="0" />
        <column table="a" column="power_divers" type="number" title="" comment="не расчет отклонений по мощности {2.электричество;19;1;1}" as="power_divers" key="0" />
        <column table="a" column="poteri_in" type="number" title="" comment="использовать алгоритм &quot;потери внутри&quot;" as="poteri_in" key="0" />
        <column table="a" column="pmax_kva" type="number" title="" comment="показывать макс.мощность в ква : 1 - да" as="pmax_kva" key="0" />
        <column table="a" column="use_netlimit" type="number" title="" comment="1-исп.форму сетевое ограничение , 0 - исп.форму макс.мощность по тех присоединению" as="use_netlimit" key="0" />
        <column table="a" column="show_dop_doc_sk" type="number" title="" comment="1-отображать поле ск в доп.документах 0- нет" as="show_dop_doc_sk" key="0" />
        <column table="a" column="use_koeff_kva" type="number" title="" comment="1- применять коэф перевода ква и квт в режиме макс.мощность" as="use_koeff_kva" key="0" />
        <column table="a" column="pmax_dopdoc" type="number" title="" comment="1 - поддерживать в макс.мощности связь с документами" as="pmax_dopdoc" key="0" />
        <column table="a" column="use_group_cust" type="number" title="" comment="1- видимость справочника группы потреб. ээ" as="use_group_cust" key="0" />
        <column table="a" column="askue_nr_askue" type="number" title="" comment="источник данных аскуэ (0-внешний;1-внутренний nr_askue)" as="askue_nr_askue" key="0" />
        <column table="a" column="use_russian_tel" type="number" title="" comment="признак использования строгого формата российских номеров" as="use_russian_tel" key="0" />
        <column table="a" column="rounding_priem" type="number" title="" comment="точность округления расхода по тех. точкам - 0 для спбэс" as="rounding_priem" key="0" />
        <column table="a" column="showplacetransmit" type="number" title="" comment="показывать режим &quot;место исполнения обязательств передачи показаний пу&quot;" as="showplacetransmit" key="0" />
        <column table="a" column="calc_precision" type="number" title="" comment="точность расчетов: количество знаков после запятой" as="calc_precision" key="0" />
        <column table="a" column="adr_base_type" type="number" title="" comment="база обновления адресного справочника: 0 - отсутствует, 1 - кладр, 2 - фиас" as="adr_base_type" key="0" />
        <column table="a" column="mode_props" type="t_mode" title="" as="mode_props" key="0" />
        <column table="a" column="con_kind_dnum_eo" type="number" title="" comment="склеивать вид и дисп № энергообъекта" as="con_kind_dnum_eo" key="0" />
        <column table="a" column="pr_asvip" type="number" title="" as="pr_asvip" key="0" />
        <column table="a" column="poteri_prikaz" type="number" title="" comment="расчет потерь в соотв. с приказом минэнерго" as="poteri_prikaz" key="0" />
        <column table="a" column="rounding_counter" type="number" title="" comment="точность округления расхода по счётчику при расчёте в балансах" as="rounding_counter" key="0" />
        <column table="a" column="rounding_pu_values" type="number" title="" comment="точность округления показаний счётчика при импорте в хранилище" as="rounding_pu_values" key="0" />
        <column table="a" column="pmax_on_point_useallhars" type="number" title="" comment="при расчете величины  максимальной мощности объекта, необходимо учитывать величины мощностей, заведенных в каждую характеристику." as="pmax_on_point_useallhars" key="0" />
        <column table="a" column="load_to_ar_point_srcmode" type="number" title="" as="load_to_ar_point_srcmode" key="0" />
        <column table="a" column="pmax_use_attpointname" type="number" title="" comment="в режиме макс.мощность делать доступным режим ввода вида точки присоединения и ее описания" as="pmax_use_attpointname" key="0" />
        <column table="a" column="addr_ext_use_checkmode" type="number" title="" comment="признак доступности функции проверки новых позиций адресного справочника" as="addr_ext_use_checkmode" key="0" />
        <column table="a" column="list_adres" type="number" title="" comment="признак чтения данных в справочник адресов: 1-читаем все, 0-читаем только верхний уровень" as="list_adres" key="0" />
        <column table="a" column="jgen_rows_limit" type="number" title="" comment="макс. кол. строк в excel для го и гоsql" as="jgen_rows_limit" key="0" />
        <column table="a" column="docpoints_enable" type="number" title="" comment="включает \ выключает (1 \ 0) в системе работу режима &quot;доверенность на снятие показаний пу&quot;" as="docpoints_enable" key="0" />
        <column table="a" column="account_source" type="number" title="" comment="способ формирования начислений по мощности в договораг услуг. 1 - договорные объемы, 2 - фактическая мощность по интегральным точкам." as="account_source" key="0" />
        <column table="a" column="fl_control_checked" type="number" title="" comment="признак контроля операций над адресными объектами с признаком &quot;проверено администратором&quot;" as="fl_control_checked" key="0" />
        <column table="a" column="load_to_ar_point_consborder" type="number" title="" comment="источник данных о границе потребителя с сетями&#xA;1. на лету, исходя из схемы сети&#xA;2. по данным, веденным в ту" as="load_to_ar_point_consborder" key="0" />
        <column table="a" column="fl_advance_false" type="number" title="" comment="признак расчета фиктивных авансов в уведомлениях: 0 - расчет ведется по фактическим авансам, 1 - рассчитываем фиктивные авансы" as="fl_advance_false" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rs_esys" as="a">
          <dlink name="ur_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_folders" table="ur_folders" child="ur_folders" field="kod_esys" parent="rs_esys" back="ur_folders" title="Папка" />
          <dlink name="ur_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_folders_isp" table="ur_folders_isp" child="ur_folders_isp" field="kod_esys" parent="rs_esys" back="ur_folders_isp" title="Папка исполнительного производства" />
        </table>
        <query name="adr_m" as="kod_m" join="left outer" dname="rs_esys" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="ds_alfnagr" as="tnv" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="tnv" />
            <column table="tnv" column="tnv" />
          </call>
        </query>
        <query name="hk_loss" as="kod_loss" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kod_loss" />
            <column table="kod_loss" column="kod_loss" />
          </call>
        </query>
        <query name="hk_poteri_region_g" as="kod_region_gol" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kod_region_gol" />
            <column table="kod_region_gol" column="kod_region_gol" />
          </call>
        </query>
        <query name="hk_poteri_region_k" as="kod_region_klim" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kod_region_klim" />
            <column table="kod_region_klim" column="kod_region_klim" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="kodp_uch" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kodp_uch" />
            <column table="kodp_uch" column="kodp" />
          </call>
        </query>
        <query name="ks_fs" as="kod_fs" join="left outer" dname="rs_esys" title="Форма собственности">
          <call function="=">
            <column table="a" column="kod_fs" />
            <column table="kod_fs" column="kod_fs" />
          </call>
        </query>
        <query name="ks_istfin" as="kod_ist" join="left outer" dname="rs_esys" title="Источники финансирования">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="ks_ministry" as="kod_min" join="left outer" dname="rs_esys" title="Министерство">
          <call function="=">
            <column table="a" column="kod_min" />
            <column table="kod_min" column="kod_m" />
          </call>
        </query>
        <query name="ks_okved" as="kod_okved" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kod_okved" />
            <column table="kod_okved" column="kod_okved" />
          </call>
        </query>
        <query name="ks_otrasl" as="kod_otrasl" join="left outer" dname="rs_esys" title="Отрасли">
          <call function="=">
            <column table="a" column="kod_otrasl" />
            <column table="kod_otrasl" column="kod_otrasl" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif18" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="tarif18" />
            <column table="tarif18" column="tarif" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif28" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="tarif28" />
            <column table="tarif28" column="tarif" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif_power" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="tarif_power" />
            <column table="tarif_power" column="tarif" />
          </call>
        </query>
        <query name="k_house" as="kodd" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kodd" />
            <column table="kodd" column="kodd" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="rs_esys">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
      </from>
    </query>
    <query name="rs_refbook" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rs_refbook.xml" haskeys="1">
      <select>
        <column table="a" column="kod_refbook" type="number" column-mandatory="1" as="kod_refbook" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="50" title="Наименование" comment="Наименование справочника" as="name" key="0" />
        <column table="a" column="pr_byt" type="number" title="" comment="признак быта: 0 - справочник только для юрлиц; 1 - для быта; NULL - для всех" as="pr_byt" key="0" />
        <column table="a" column="image" type="blob" title="" comment="Картинка" as="image" key="0" />
        <column table="a" column="dat_del" type="date" title="" comment="Дата передачи в архив" as="dat_del" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" comment="Пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Дата последнего изменения" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rs_refbook" as="a" />
      </from>
    </query>
    <query name="rs_refcode" class="1" timestamp="06.01.2022 15:35:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rs_refcode.xml" haskeys="1">
      <select>
        <column table="a" column="kod_refcode" type="number" as="kod_refcode" key="1" fixed="1" />
        <column table="a" column="kod_refbook" type="number" as="kod_refbook" reference="rs_refbook" refcol="kod_refbook" key="0" />
        <column table="a" column="num" type="number" title="" comment="произвольный порядковый (или любой другой) номер для кода" as="num" key="0" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование кода" as="name" key="0" />
        <column table="a" column="image" type="blob" title="" comment="картинка" as="image" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="rs_refcode" as="a" />
        <query name="rs_refbook" as="kod_refbook" join="left outer" dname="rs_refcode">
          <call function="=">
            <column table="a" column="kod_refbook" />
            <column table="kod_refbook" column="kod_refbook" />
          </call>
        </query>
      </from>
    </query>
    <query name="rs_rep_sets" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rs_rep_sets.xml" haskeys="1">
      <select>
        <call function="rowid" as="rs_rep_sets_id" key="1" />
        <column table="a" column="customer_id" type="number" title="" as="customer_id" />
        <column table="a" column="scheme" type="string" title="" as="scheme" />
        <column table="a" column="sg_gen_alg" type="number" title="" as="sg_gen_alg" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="rs_rep_sets" as="a" />
      </from>
    </query>
    <query name="rs_scheme_users" timestamp="17.08.2017 12:13:39" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\rs_scheme_users.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scheme_users" key="1" type="number" as="kod_scheme_users" />
        <column table="a" column="puser" data-size="30" type="string" as="puser" reference="ks_user" refcol="puser" />
        <column table="a" column="kod_scheme" type="number" as="kod_scheme" reference="rk_adm_scheme" refcol="kod_scheme" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="rs_scheme_users" table-code="1871" as="a" />
        <query name="ks_user" as="puser" join="left outer" ConstrDelOption="cascade" dname="rs_scheme_users">
          <call function="=">
            <column table="a" column="puser" />
            <column table="puser" column="puser" />
          </call>
        </query>
        <query name="rk_adm_scheme" as="kod_scheme" join="left outer" ConstrDelOption="cascade" dname="rs_scheme_users">
          <call function="=">
            <column table="a" column="kod_scheme" />
            <column table="kod_scheme" column="kod_scheme" />
          </call>
        </query>
      </from>
    </query>
    <query name="sk_edizm" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_edizm.xml" haskeys="1">
      <select>
        <column table="a" column="edizm" type="number" title="" as="edizm" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="kod_okei" type="string" comment="код океи" as="kod_okei" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_edizm" as="a"></table>
      </from>
    </query>
    <query name="sk_nachisl" class="1" title="Вид начисления" timestamp="23.05.2018 14:58:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_nachisl.xml" haskeys="1">
      <select>
        <column table="a" column="vid_t" type="number" title="" comment="vid_t=25 -население&#xA;vid_t=30 - самовольное подкл.электроприемников" key-dimension="vid_t" key="1" as="vid_t" />
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" />
        <column table="a" column="num_t" type="string" title="Код вида начисления" vid="1" is-name="1" as="num_t" />
        <column table="a" column="name" type="string" title="Наименование вида начисления" vid="1" is-name="1" as="name" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" />
        <column table="a" column="por_pech" type="number" title="" comment="порядок печати начислений в сф" as="por_pech" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="pr_hand" type="number" title="" as="pr_hand" />
        <column table="a" column="krat_sh" type="number" title="" as="krat_sh" />
        <column table="a" column="limit" type="number" title="" comment="порог для начисления штрафов" as="limit" />
        <column table="a" column="name_pech" type="string" title="" comment="наименование для печати в платежку" as="name_pech" />
        <column table="a" column="min_val" type="number" title="" comment="минимальное значение для начисления штрафов" as="min_val" />
        <column table="a" column="use_in_populcalc" type="number" title="" comment="использовать в расчетах с населением (чек-бокс, 1-разрешить в расчетах с населением, 0-не показывать в расчетах с населением)" as="use_in_populcalc" />
        <column table="a" column="allname" type="string" title="" comment="наименование для печати в сф по оплате" as="allname" />
        <column table="a" column="gr_sf_nachisl" type="number" title="" comment="для &quot;мин.&quot;сф группы начислений" as="gr_sf_nachisl" />
        <column table="a" column="gr_sf_cust" type="number" title="" comment="для &quot;мин.&quot;сф группы натуральных" as="gr_sf_cust" />
        <column table="a" column="gr_sf_name" type="string" title="" comment="наименование группы товаров для &quot;минимальной&quot; формы сф" as="gr_sf_name" />
        <column table="a" column="gr_akt_nachisl" type="number" title="" comment="для &quot;мин.&quot;актов пп группы начислений" as="gr_akt_nachisl" />
        <column table="a" column="gr_akt_cust" type="number" title="" comment="для &quot;мин.&quot;актов пп группы натуральных" as="gr_akt_cust" />
        <column table="a" column="gr_akt_name" type="string" title="" comment="наименование группы товаров для &quot;минимальной&quot; формы акта пп" as="gr_akt_name" />
        <column table="a" column="pr_nopogash" type="number" title="" comment="не производить автоматическое погашение этим видом начисления" as="pr_nopogash" />
        <column table="vid_real" column="vid_real" vid="1" as="vid_real_num" title="Код вида реализации" reference="sk_vid_real" refcol="vid_real" />
        <column table="vid_real" column="name" vid="1" as="vid_real_name" />
        <call function="||" as="full_name" title="Вид товара">
          <column table="a" column="vid_t" />
          <const>' '</const>
          <column table="a" column="name" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
        <call function="||" as="sp_col_name" title="">
          <column table="a" column="num_t" type="string" title="Код вида начисления" vid="1" is-name="1" />
          <const>' '</const>
          <column table="a" column="name" type="string" title="Наименование вида начисления" vid="1" is-name="1" />
        </call>
      </select>
      <from>
        <table name="sk_nachisl" as="a" title="Вид начисления" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sk_nachisl">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sk_nachisl" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sk_nachisl">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" dname="sk_nachisl">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
      </from>
    </query>
    <query name="sk_nalog" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_nalog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nal" type="number" as="kod_nal" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_nalog" as="a"></table>
      </from>
    </query>
    <query name="sk_nalog_type" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_nalog_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltype" type="number" as="kod_naltype" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="formula" type="string" title="" comment="определяет формулу, по которой считаем налог.&#xD;&#xA;принимаем @c = cust&#xD;&#xA;принимаем @t = ставка&#xD;&#xA;" as="formula" key="0"></column>
        <column table="a" column="pr_add" type="number" title="" as="pr_add" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_nalog_type" as="a"></table>
      </from>
    </query>
    <query name="sk_type_opl" class="1" title="Тип оплаты" timestamp="04.08.2017 16:55:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_type_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_type_opl" type="number" key-dimension="kod_type_opl" as="kod_type_opl" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_type_opl" as="a" title="Тип оплаты" />
      </from>
    </query>
    <query name="sk_vid_avans" class="1" timestamp="06.10.2016 00:41:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_avans.xml" haskeys="1">
      <select>
        <column table="a" column="vid_avans" type="number" title="" comment="код аванса" as="vid_avans" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="наимен.промеж.платежа или аванса" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="name_vid_t" type="string" title="" comment="для kr_vist_day.nazn_plat1" as="name_vid_t" key="0" />
        <call as="is_proc" function="if" type="number" key="0">
          <call function="contains">
            <call function="replace">
              <column table="this" column="abbr" />
              <const>'%'</const>
              <const>'proc'</const>
            </call>
            <const>'proc'</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_vid_avans" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sk_vid_avans">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
      </from>
    </query>
    <query name="sk_vid_pl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_pl.xml" haskeys="1">
      <select>
        <column table="a" column="vid_pl" type="number" column-mandatory="1" title="" as="vid_pl" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="50" title="Наименование" as="name" key="0" />
        <column table="a" column="docum" type="string" data-size="50" title="" as="docum" key="0" />
        <column table="a" column="esys" type="string" data-size="50" title="" comment="коды энергоситем, в которых данный док-т можно использовать" as="esys" key="0" />
        <column table="a" column="visible" type="number" column-mandatory="1" title="" comment="при 1 доступно для выбора" as="visible" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_vid_pl" as="a" />
      </from>
    </query>
    <query name="sk_vid_proc" class="1" title="Вид процентной ставки" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_proc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_proc" type="number" as="kod_vid_proc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="hist_mat_use" type="number" title="" comment="1 - доступна для выбора в арбитраже" as="hist_mat_use" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_vid_proc" as="a" title="Вид процентной ставки" />
      </from>
    </query>
    <query name="sk_vid_proc_list_ur_mat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_proc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_proc" type="number" as="kod_vid_proc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="sk_vid_proc" as="a" title="Вид процентной ставки" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="hist_mat_use" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="sk_vid_real" class="1" title="Вид реализации" timestamp="15.03.2016 19:08:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_real.xml" haskeys="1">
      <select>
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Вид реализации" comment="полное наименование- уже не печатается в назначение платежа" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Вид реализации(аббр)" as="abbr" key="0" />
        <column table="a" column="pr_osn" type="number" title="" as="pr_osn" key="0" />
        <column table="a" column="sname" type="string" title="" comment="Вид реализации(сокр.)" as="sname" key="0" />
        <column table="a" column="post_num_sf" type="string" title="" comment="символьный постфикс после номера сф" as="post_num_sf" key="0" />
        <column table="a" column="pr_no_mass_pech" type="number" title="" comment="при=1 док-ты начисл-я не попадут в масс.печать, если док-ты на оплату &quot;отозваны&quot; и пр." as="pr_no_mass_pech" key="0" />
        <column table="a" column="pr_pogash_all" type="number" title="" comment="для pr_osn=1; если =1, то гасить только переплатой своего вида реал-ии" as="pr_pogash_all" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_vid_real" as="a" title="Вид реализации" />
      </from>
    </query>
    <query name="sk_vid_sf" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sk_vid_sf.xml" haskeys="1">
      <select>
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" key="1" fixed="1"></column>
        <column table="a" column="plate" type="number" title="" as="plate" key="0"></column>
        <column table="a" column="name" type="string" title="Вид документа начисления" as="name" key="0"></column>
        <column table="a" column="name_for_sf" type="string" title="Вид документа начисления" as="name_for_sf" key="0"></column>
        <column table="a" column="sf_schet" type="number" title="" as="sf_schet" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="cust" type="number" title="" as="cust" key="0"></column>
        <column table="a" column="price" type="number" title="" as="price" key="0"></column>
        <column table="a" column="nach" type="number" title="" as="nach" key="0"></column>
        <column table="a" column="tax" type="number" title="" as="tax" key="0"></column>
        <column table="a" column="nal" type="number" title="" as="nal" key="0"></column>
        <column table="a" column="sum_potr" type="number" title="" as="sum_potr" key="0"></column>
        <column table="a" column="shapka" type="string" title="" comment="конструктор для сф/счетов/уо" as="shapka" key="0"></column>
        <column table="a" column="shapka1" type="string" title="" comment="конструктор для сф как счетов" as="shapka1" key="0"></column>
        <column table="a" column="pref_num_sf" type="string" title="" comment="символьный префикс перед номером сф" as="pref_num_sf" key="0"></column>
        <column table="a" column="n_num_sf" type="number" title="" comment="цифра в номере сф, заменяющая букву s(s)" as="n_num_sf" key="0"></column>
        <column table="a" column="name_r" type="string" title="" as="name_r" key="0"></column>
        <column table="a" column="name_tovar" type="string" title="" comment="наполнение/тепло/..." as="name_tovar" key="0"></column>
        <column table="a" column="format_rym" type="number" title="" comment="вывод периода:1/2/3/4-словом/2010.03/03.2010/не выводить" as="format_rym" key="0"></column>
        <column table="a" column="format_prom" type="number" title="" comment="для промежути период в виде интервала дат: 0/1-не выводить/выводить" as="format_prom" key="0"></column>
        <column table="a" column="shapka_k" type="string" title="" comment="конструктор для корр-чных сф" as="shapka_k" key="0"></column>
        <column table="a" column="shapka_uch" type="string" title="" comment="конструктор для сф по пост-ке на учет" as="shapka_uch" key="0"></column>
        <column table="a" column="edo_xml" type="number" title="" comment="1/0-выгружать/нет документ в xml в рамках эдо" as="edo_xml" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sk_vid_sf" as="a"></table>
      </from>
    </query>
    <query name="vr_37989_calc_tbl" class="1" timestamp="26.12.2017 12:49:09" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_37989_calc_tbl.xml" haskeys="1">
      <select>
        <column table="a" column="calc_id" type="number" title="" key="1" as="calc_id" />
        <column table="a" column="dat_calc" type="date" title="" index="1" as="dat_calc" />
        <column table="a" column="dat_start" type="date" title="" index="1" as="dat_start" />
        <column table="a" column="cnt_dog" type="number" title="" as="cnt_dog" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_37989_calc_tbl" as="a" />
      </from>
    </query>
    <query name="vr_37989_dog_tbl" class="1" timestamp="10.10.2018 18:23:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_37989_dog_tbl.xml" haskeys="1">
      <select>
        <column table="a" column="dog_id" type="number" title="" key="1" as="dog_id" />
        <column table="a" column="calc_id" type="number" title="" as="calc_id" reference="vr_37989_calc_tbl" refcol="calc_id" />
        <column table="a" column="dlg_virt_av_tek_cur_scnd" type="number" title="" as="dlg_virt_av_tek_cur_scnd" />
        <column table="a" column="opl_last_virt_av" type="number" title="" as="opl_last_virt_av" />
        <column table="a" column="dlg_virt_av_tek_cur_fst" type="number" title="" as="dlg_virt_av_tek_cur_fst" />
        <column table="a" column="opl_first_virt_av" type="number" title="" as="opl_first_virt_av" />
        <column table="a" column="kred_av_for_opl_virt" type="number" title="" as="kred_av_for_opl_virt" />
        <column table="a" column="kred_av" type="number" title="" as="kred_av" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" />
        <column table="a" column="pr_nach_osn_3m" type="number" title="" as="pr_nach_osn_3m" />
        <column table="a" column="deb_names" type="string" title="" data-size="1500" as="deb_names" />
        <column table="a" column="pr_3040_av" type="number" title="" as="pr_3040_av" />
        <column table="a" column="pr_3040_av_dog" type="number" title="" as="pr_3040_av_dog" />
        <column table="a" column="mid_elptr" type="number" title="" as="mid_elptr" />
        <column table="a" column="nach_osn_3m" type="number" title="" as="nach_osn_3m" />
        <column table="a" column="skod_sflist" type="string" data-size="1500" as="skod_sflist" />
        <column table="a" column="zadol_vidreal2_bez_per" type="number" title="" as="zadol_vidreal2_bez_per" />
        <column table="a" column="kredit" type="number" title="" as="kredit" />
        <column table="a" column="smirnov25" type="string" title="" data-size="300" as="smirnov25" />
        <column table="a" column="smirnov18" type="string" title="" data-size="300" as="smirnov18" />
        <column table="a" column="basic_debt" type="number" title="" as="basic_debt" />
        <column table="a" column="final2" type="number" title="" as="final2" />
        <column table="a" column="cnt_kod_deb_zadol" type="number" as="cnt_kod_deb_zadol" />
        <column table="a" column="opl_by_not_money_2" type="number" title="" as="opl_by_not_money_2" />
        <column table="a" column="opl_by_money_2" type="number" title="" as="opl_by_money_2" />
        <column table="a" column="dat_zadol_2" type="date" title="" as="dat_zadol_2" />
        <column table="a" column="per_potr" type="string" title="" data-size="300" as="per_potr" />
        <column table="a" column="per_zadol_vidreal0" type="string" title="" data-size="300" as="per_zadol_vidreal0" />
        <column table="a" column="per_zadol_vidreal2" type="string" title="" data-size="300" as="per_zadol_vidreal2" />
        <column table="a" column="zadol_mor" type="number" title="" as="zadol_mor" />
        <column table="a" column="cntper_zadol2" type="number" title="" format="N0" as="cntper_zadol2" />
        <column table="a" column="no_pay" type="number" title="" as="no_pay" />
        <column table="a" column="zadol_bez_mor_vidreal2" type="number" title="" as="zadol_bez_mor_vidreal2" />
        <column table="a" column="last_pay" type="number" title="" as="last_pay" />
        <column table="a" column="first_pay" type="number" title="" as="first_pay" />
        <column table="a" column="first_pay_pre" type="number" title="" as="first_pay_pre" />
        <column table="a" column="pr_use_virt_av" type="number" title="" as="pr_use_virt_av" />
        <column table="a" column="other_pay" type="number" title="" as="other_pay" />
        <column table="a" column="set_opl_virt_av" type="number" title="" as="set_opl_virt_av" />
        <column table="a" column="set_pereplata" type="number" title="" as="set_pereplata" />
        <column table="a" column="set_pereplata_cur" type="number" title="" as="set_pereplata_cur" />
        <column table="a" column="set_pereplata_ftr" type="number" title="" as="set_pereplata_ftr" />
        <column table="a" column="set_virt_avans" type="number" title="" as="set_virt_avans" />
        <column table="a" column="virt_av_tek_cur_scnd" type="number" title="" as="virt_av_tek_cur_scnd" />
        <column table="a" column="virt_av_tek_cur_fst" type="number" title="" as="virt_av_tek_cur_fst" />
        <column table="a" column="dlg_osn_pr_nxt" type="number" title="" as="dlg_osn_pr_nxt" />
        <column table="a" column="kred_av_ftr" type="number" title="" as="kred_av_ftr" />
        <column table="a" column="kred_av_tek" type="number" title="" as="kred_av_tek" />
        <column table="a" column="kred_av_pr" type="number" title="" as="kred_av_pr" />
        <column table="a" column="kred_osn" type="number" title="" as="kred_osn" />
        <column table="a" column="ym_rasch" type="number" title="" as="ym_rasch" />
        <column table="a" column="dlg_osn_pr_pred1" type="number" title="" as="dlg_osn_pr_pred1" />
        <column table="a" column="dlg_osn_pr_pred" type="number" title="" as="dlg_osn_pr_pred" />
        <column table="a" column="cntper_zadol" type="number" title="" format="N0" as="cntper_zadol" />
        <column table="a" column="dlg_osn_np_cur" type="number" title="" as="dlg_osn_np_cur" />
        <column table="a" column="dlg_osn_pr_cur" type="number" title="" as="dlg_osn_pr_cur" />
        <column table="a" column="dlg_av_tek_othr" type="number" title="" as="dlg_av_tek_othr" />
        <column table="a" column="dlg_av_tek_prev_othr" type="number" title="" as="dlg_av_tek_prev_othr" />
        <column table="a" column="dlg_av_tek_prev_scnd" type="number" title="" as="dlg_av_tek_prev_scnd" />
        <column table="a" column="dlg_av_tek_prev_fst" type="number" title="" as="dlg_av_tek_prev_fst" />
        <column table="a" column="dlg_av_tek_cur_scnd" type="number" title="" as="dlg_av_tek_cur_scnd" />
        <column table="a" column="nach_av_tek_cur_scnd" type="number" title="" as="nach_av_tek_cur_scnd" />
        <column table="a" column="dlg_av_tek_cur_fst" type="number" title="" as="dlg_av_tek_cur_fst" />
        <column table="a" column="pr_virt_av" type="number" title="" as="pr_virt_av" />
        <column table="a" column="dat_calc" type="date" title="" index="1" as="dat_calc" />
        <column table="a" column="dolg_all_no_per" type="number" title="" as="dolg_all_no_per" />
        <column table="a" column="dolg_all" type="number" title="" as="dolg_all" />
        <column table="a" column="avans" type="number" title="" as="avans" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_37989_dog_tbl" as="a" />
        <query join="left outer" name="vr_37989_calc_tbl" as="calc_id" ConstrDelOption="cascade" dname="vr_37989_dog_tbl">
          <call function="=">
            <column table="a" column="calc_id" />
            <column table="calc_id" column="calc_id" />
          </call>
        </query>
        <query join="left outer" name="kr_dogovor" as="kod_dog" ConstrDelOption="cascade" dname="vr_37989_dog_tbl" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_37989_det_tbl" class="1" timestamp="21.06.2017 15:37:21" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_37989_sf_tbl.xml" haskeys="1">
      <select>
        <column table="a" column="det_id" key="1" type="number" as="det_id" />
        <column table="a" column="dog_id" type="number" as="dog_id" reference="vr_37989_dog_tbl" refcol="dog_id" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" />
        <column table="a" column="ym_rasch" type="number" title="" as="ym_rasch" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" />
        <column table="a" column="dat_sf" type="date" title="" as="dat_sf" />
        <column table="a" column="ym" type="number" title="" as="ym" />
        <column table="a" column="rym" type="number" title="" as="rym" />
        <column table="a" column="dat_bzad" type="date" title="" as="dat_bzad" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" />
        <column table="a" column="dep" type="number" title="" as="dep" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="pr_virt_av" type="number" title="" as="pr_virt_av" />
        <column table="a" column="dlg_deb" type="number" title="" as="dlg_deb" />
        <column table="a" column="dlg_osn_pr" type="number" title="" as="dlg_osn_pr" />
        <column table="a" column="dlg_av_tek" type="number" title="" as="dlg_av_tek" />
        <column table="a" column="opl_osn_pr" type="number" title="" as="opl_osn_pr" />
        <column table="a" column="dlg_kred" type="number" title="" as="dlg_kred" />
        <column table="a" column="dlg_osn_pr_pred" type="number" title="" as="dlg_osn_pr_pred" />
        <column table="a" column="dlg_osn_pr_pred1" type="number" title="" as="dlg_osn_pr_pred1" />
        <column table="a" column="dlg_osn_pr_cur" type="number" title="" as="dlg_osn_pr_cur" />
        <column table="a" column="dlg_osn_np_cur" type="number" title="" as="dlg_osn_np_cur" />
        <column table="a" column="dlg_osn_pr_nxt" type="number" title="" as="dlg_osn_pr_nxt" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" />
        <column table="a" column="kred_osn" type="number" title="" as="kred_osn" />
        <column table="a" column="kred_av_pr" type="number" title="" as="kred_av_pr" />
        <column table="a" column="kred_av_ftr" type="number" title="" as="kred_av_ftr" />
        <column table="a" column="kred_av_tek" type="number" title="" as="kred_av_tek" />
        <column table="a" column="dlg_av_tek_prev_fst" type="number" title="" as="dlg_av_tek_prev_fst" />
        <column table="a" column="dlg_av_tek_prev_scnd" type="number" title="" as="dlg_av_tek_prev_scnd" />
        <column table="a" column="dlg_av_tek_cur_fst" type="number" title="" as="dlg_av_tek_cur_fst" />
        <column table="a" column="dlg_av_tek_cur_scnd" type="number" title="" as="dlg_av_tek_cur_scnd" />
        <column table="a" column="dlg_av_tek_othr" type="number" title="" as="dlg_av_tek_othr" />
        <column table="a" column="dlg_av_tek_othr_leg" type="number" as="dlg_av_tek_othr_leg" />
        <column table="a" column="virt_av_tek_cur_fst" type="number" title="" as="virt_av_tek_cur_fst" />
        <column table="a" column="virt_av_tek_cur_scnd" type="number" title="" as="virt_av_tek_cur_scnd" />
        <column table="a" column="nach_osn_1m" type="number" as="nach_osn_1m" />
        <column table="a" column="nach_osn_3m" type="number" as="nach_osn_3m" />
        <column table="a" column="pr_3040_av" type="number" as="pr_3040_av" />
        <column table="a" column="deb_name" type="string" data-size="300" as="deb_name" />
        <column table="a" column="pr_legal_av" type="number" as="pr_legal_av" />
        <column table="a" column="perc" type="number" as="perc" />
        <column table="a" column="dat_ezad" type="date" title="" as="dat_ezad" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_37989_det_tbl" as="a" />
        <query join="left outer" name="vr_37989_dog_tbl" as="dog_id" ConstrDelOption="cascade" dname="vr_37989_det_tbl">
          <call function="=">
            <column table="a" column="dog_id" />
            <column table="dog_id" column="dog_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="sqlb_46239_bp_gr_persistant" class="1" timestamp="30.07.2019 15:48:51" title="Строки на основном листе в отчете" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_46239_bp_gr_persistant.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bp_gr" type="number" column-mandatory="1" as="kod_bp_gr" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" column-mandatory="1" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="name" type="string" data-size="150" column-mandatory="1" title="Наименование" as="name" key="0" />
        <column table="a" column="kod_group" type="number" column-mandatory="1" as="kod_group" reference="sqlb_46239_groups_persistant" refcol="kod_group" key="0" />
        <column table="a" column="pp_order" type="number" title="" as="pp_order" key="0" />
        <column table="a" column="pr_detail" type="number" title="" as="pr_detail" key="0" />
        <column table="a" column="pr_goscontract" type="number" title="" as="pr_goscontract" key="0" />
        <call function="over" as="min_vidopl" comment="нужен, чтобы неспецифичные для вида оплаты данные класть в одну строку, а не во все" key="0">
          <call function="min">
            <call function="nvl0">
              <column table="a" column="kod_vidopl" />
            </call>
          </call>
          <call function="partition by">
            <column table="a" column="kodbpol" />
          </call>
        </call>
        <call function="over" as="min_order" key="0">
          <call function="min">
            <column table="a" column="pp_order" />
          </call>
          <call function="partition by">
            <column table="a" column="name" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sqlb_46239_bp_gr_persistant" as="a" title="Строки на основном листе в отчете" />
        <query name="sqlb_46239_groups_persistant" as="kod_group" join="left outer" dname="sqlb_46239_bp_gr_persistant" title="Группы для отчета">
          <call function="=">
            <column table="a" column="kod_group" />
            <column table="kod_group" column="kod_group" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="sqlb_46239_bp_gr_persistant">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dname="sqlb_46239_bp_gr_persistant">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
      </from>
    </query>
    <query name="sqlb_46239_groups_persistant" class="1" title="Группы для отчета" timestamp="30.07.2019 15:46:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_46239_groups_persistant.xml" haskeys="1">
      <select>
        <column table="a" column="kod_group" type="number" column-mandatory="1" as="kod_group" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="150" column-mandatory="1" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sqlb_46239_groups_persistant" as="a" title="Группы для отчета" />
      </from>
    </query>
    <query name="sqlb_55300_soveshanie" class="1" order="dat desc" timestamp="26.06.2020 13:17:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_55300_soveshanie.xml" haskeys="1">
      <select>
        <column table="a" column="kod_soveshanie" type="number" column-mandatory="1" as="kod_soveshanie" key="1" fixed="1" />
        <column table="a" column="dat" type="date" column-mandatory="1" title="" comment="Дата совещания" as="dat" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sqlb_55300_soveshanie" as="a" />
      </from>
      <order>
        <column column="dat" />
      </order>
    </query>
    <query name="sqlb_55300_soveshanie_info" class="1" timestamp="23.06.2021 16:37:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_55300_soveshanie_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod_soveshanie_info" type="number" column-mandatory="1" as="kod_soveshanie_info" key="1" fixed="1" />
        <column table="a" column="kod_soveshanie" type="number" column-mandatory="1" as="kod_soveshanie" reference="sqlb_55300_soveshanie" refcol="kod_soveshanie" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="info" type="string" data-size="4000" title="" as="info" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sqlb_55300_soveshanie_info" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sqlb_55300_soveshanie_info" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sqlb_55300_soveshanie" as="kod_soveshanie" join="left outer" dname="sqlb_55300_soveshanie_info">
          <call function="=">
            <column table="a" column="kod_soveshanie" />
            <column table="kod_soveshanie" column="kod_soveshanie" />
          </call>
        </query>
      </from>
    </query>
    <query name="sqlb_d45862_fdr_kg_tbl" class="1" timestamp="08.09.2019 20:49:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sqlb_d45862_fdr_kg_tbl.xml" haskeys="1">
      <select>
        <call function="rowid" as="sqlb_d45862_fdr_kg_tbl_id" key="1" />
        <column table="a" column="id" type="string" data-size="300" title="" group="1" as="id" />
        <column table="a" column="k_gr_f_tp" type="string" data-size="300" title="" group="1" as="k_gr_f_tp" />
        <column table="a" column="k_f_tp" type="string" data-size="300" title="" group="1" as="k_f_tp" />
        <column table="a" column="k_kg_name" type="string" data-size="300" title="" group="1" as="k_kg_name" />
        <column table="a" column="pwrc_id" type="number" title="" group="1" as="pwrc_id" />
        <column table="a" column="kg_name" type="string" data-size="300" title="" group="1" as="kg_name" />
        <column table="a" column="kod_kol_gr" type="number" group="1" as="kod_kol_gr" />
        <column table="a" column="pwrc_fdrid" type="number" title="" group="1" as="pwrc_fdrid" />
        <column table="a" column="real_fdr" type="string" data-size="300" title="" group="1" as="real_fdr" />
        <column table="a" column="isprm_fdr" type="string" data-size="300" title="" group="1" as="isprm_fdr" />
        <column table="a" column="pwrc_fdr_explname" type="string" data-size="300" title="" group="1" as="pwrc_fdr_explname" />
        <column table="a" column="src_id" type="number" title="" group="1" as="src_id" />
        <column table="a" column="srcname" type="string" data-size="300" title="" group="1" as="srcname" />
        <column table="a" column="srcbalname" type="string" data-size="300" title="" group="1" as="srcbalname" />
        <column table="a" column="ym" type="number" title="" group="1" as="ym" />
        <column table="a" column="kg_name_w_real_fdr" type="string" group="1" data-size="300" as="kg_name_w_real_fdr" />
        <column table="a" column="exclude_auto_fdr" type="number" group="1" as="exclude_auto_fdr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sqlb_d45862_fdr_kg_tbl" as="a" />
      </from>
    </query>
    <query name="sr_akt" class="1" timestamp="05.10.2021 20:25:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_akt.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1" />
        <column table="this" column="dat_akt" as="dat_dolg" dimension="dat_dolg" key="0" />
        <call function="||" as="name" key="0">
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_akt" />
          </call>
        </call>
        <const type="number" as="cnt" fact="sr_akt_count" agg="sum" key="0">1</const>
        <column table="a" column="esys" type="number" title="" as="esys" key="0" />
        <column table="a" column="podr_glob" type="number" title="" as="podr_glob" key="0" />
        <column table="a" column="tip" type="number" title="" as="tip" key="0" />
        <column table="a" column="pr_ur" type="number" title="" as="pr_ur" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_podpis" type="date" title="" as="dat_podpis" key="0" />
        <column table="a" column="sum_abon" type="number" title="" as="sum_abon" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="priz_sh" type="number" title="" as="priz_sh" key="0" />
        <column table="a" column="priz_p" type="number" title="" as="priz_p" key="0" />
        <column table="a" column="sum_sh" type="number" title="" as="sum_sh" key="0" />
        <column table="a" column="sum_p" type="number" title="" as="sum_p" key="0" />
        <column table="a" column="podpis" type="number" title="" as="podpis" key="0" />
        <column table="a" column="dat_akt" type="date" title="" fact="sr_akt_dat_akt_min" agg="min" dimension="dat" as="dat_akt" key="0" />
        <column table="a" column="sum_dpp" type="number" title="" as="sum_dpp" key="0" />
        <column table="a" column="priz_dpp" type="number" title="" as="priz_dpp" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" key="0" />
        <column table="a" column="zadol_te" type="number" title="" comment="задолженность за теплоэнергию" as="zadol_te" key="0" />
        <column table="a" column="zadol_tn" type="number" title="" comment="задолженнлсть за теплоноситель" as="zadol_tn" key="0" />
        <column table="a" column="zadol_nal_te" type="number" title="" comment="включая ндс за теплоэнергию" as="zadol_nal_te" key="0" />
        <column table="a" column="zadol_nal_tn" type="number" title="" comment="включая ндс за теплоноситель" as="zadol_nal_tn" key="0" />
        <column table="a" column="priz_raznoglas" type="number" title="" comment="признак : 0-без разногласий,1 - с разногласиями" as="priz_raznoglas" key="0" />
        <column table="a" column="podpis_te" type="number" title="" comment="подписанная сумма -задолженность за теплоэнергию" as="podpis_te" key="0" />
        <column table="a" column="podpis_tn" type="number" title="" comment="подписанная сумма -задолженность за теплоноситель" as="podpis_tn" key="0" />
        <column table="a" column="podpis_nal_te" type="number" title="" comment="подписанная сумма - включая ндс за теплоэнергию" as="podpis_nal_te" key="0" />
        <column table="a" column="podpis_nal_tn" type="number" title="" comment="подписанная сумма - включая ндс за теплоноситель" as="podpis_nal_tn" key="0" />
        <column table="a" column="podpis_peni" type="number" title="" comment="подписанная сумма - пени" as="podpis_peni" key="0" />
        <column table="a" column="podpis_gosposh" type="number" title="" comment="подписанная сумма - госпошлина" as="podpis_gosposh" key="0" />
        <column table="a" column="mes" type="number" title="" as="mes" key="0" />
        <column table="a" column="god" type="number" title="" as="god" key="0" />
        <column table="a" column="kvart" type="number" title="" as="kvart" key="0" />
        <column table="a" column="rost" type="number" title="" as="rost" key="0" />
        <column table="a" column="act_number" type="number" title="" comment="номер акта" as="act_number" key="0" />
        <column table="a" column="nsaldo_s_av" type="number" title="" as="nsaldo_s_av" key="0" />
        <column table="a" column="nsaldo_bez_av" type="number" title="" as="nsaldo_bez_av" key="0" />
        <column table="a" column="ksaldo_s_av" type="number" title="" as="ksaldo_s_av" key="0" />
        <column table="a" column="ksaldo_bez_av" type="number" title="" as="ksaldo_bez_av" key="0" />
        <column table="a" column="nsaldo_po_shtr" type="number" title="" as="nsaldo_po_shtr" key="0" />
        <column table="a" column="nsaldo_po_peni" type="number" title="" as="nsaldo_po_peni" key="0" />
        <column table="a" column="nsaldo_po_or_s_av" type="number" title="" as="nsaldo_po_or_s_av" key="0" />
        <column table="a" column="nsaldo_po_or_bez_av" type="number" title="" as="nsaldo_po_or_bez_av" key="0" />
        <column table="a" column="vsego_nach_s_av" type="number" title="" as="vsego_nach_s_av" key="0" />
        <column table="a" column="vsego_nach_bez_av" type="number" title="" as="vsego_nach_bez_av" key="0" />
        <column table="a" column="vsego_opl" type="number" title="" as="vsego_opl" key="0" />
        <column table="a" column="vid_real" type="string" title="" comment="список видов реал-ии" as="vid_real" key="0" />
        <column table="a" column="akt_creator" type="string" title="" comment="пользователь, создавший акт" as="akt_creator" key="0" />
        <column table="a" column="ym" type="number" title="" comment="период создания акта" as="ym" key="0" />
        <column table="akt_text" column="ym_end" type="number" title="" as="ym_end" key="0" />
        <column table="a" column="pr_edo" type="number" title="" comment="признак участия документа в эдо" as="pr_edo" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_akt" as="a">
          <dlink name="sr_akt_number" dimension="1" as="sr_akt_number" table="sr_akt_number" child="sr_akt_number" field="kod" parent="sr_akt" back="sr_akt_number">
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_akt_text" as="sr_akt_text" table="sr_akt_text" child="sr_akt_text" field="kod" parent="sr_akt" back="sr_akt_text">
            <link name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog" table="kr_dogovor" child="sr_akt_text" field="kod_dog" parent="kr_dogovor" back="sr_akt_text" title="Договор" />
          </dlink>
        </table>
        <query name="sr_akt_text" as="akt_text" join="left outer" dname="sr_akt">
          <call function="=">
            <column table="a" column="kod" />
            <column table="akt_text" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_akt_number" class="1" timestamp="03.10.2016 16:28:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_akt_number.xml" haskeys="1">
      <select>
        <column table="a" column="kod_akt_number" type="number" as="kod_akt_number" key="1" fixed="1" />
        <column table="a" column="kod" type="number" title="" as="kod" reference="sr_akt" refcol="kod" key="0" />
        <column table="a" column="tip" type="number" title="" as="tip" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="razdel" type="number" title="" as="razdel" key="0" />
        <column table="a" column="podrazdel" type="number" title="" as="podrazdel" key="0" />
        <column table="a" column="sum" type="number" title="" as="sum" key="0" />
        <column table="a" column="nal" type="number" title="" as="nal" key="0" />
        <column table="a" column="num_dok" type="string" title="" as="num_dok" key="0" />
        <column table="a" column="dat_dok" type="date" title="" as="dat_dok" key="0" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="vidopl" type="number" title="" as="vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="opl_prev" type="number" title="" as="opl_prev" key="0" />
        <column table="a" column="opl_cur" type="number" title="" as="opl_cur" key="0" />
        <column table="a" column="podr" type="number" title="" as="podr" key="0" />
        <column table="a" column="vid_sf" type="number" title="" as="vid_sf" key="0" />
        <column table="a" column="vid_t" type="number" title="" as="vid_t" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl_kred" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_akt_number" as="a" />
        <query name="sk_vid_real" as="vid_real" join="left outer" dname="sr_akt_number" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_akt" as="kod" join="left outer" dimension="1" dname="sr_akt_number">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_akt_number">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_akt_number" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_akt_number" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="1" dname="sr_akt_number">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_kred" as="kod_opl" join="left outer" dimension="1" dname="sr_akt_number">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_akt_text" class="1" timestamp="05.10.2021 20:25:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_akt_text.xml" haskeys="1">
      <select>
        <column table="a" column="kod_akt_text" type="number" as="kod_akt_text" key="1" fixed="1" />
        <column table="a" column="kod" type="number" title="" as="kod" reference="sr_akt" refcol="kod" key="0" />
        <column table="a" column="tip" type="number" title="" as="tip" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ym_begin" type="number" title="" as="ym_begin" key="0" />
        <column table="a" column="ym_end" type="number" title="" as="ym_end" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="name_pol" type="string" title="" as="name_pol" key="0" />
        <column table="a" column="adr_pol" type="string" title="" as="adr_pol" key="0" />
        <column table="a" column="inn_pol" type="string" title="" as="inn_pol" key="0" />
        <column table="a" column="fio_pol" type="string" title="" as="fio_pol" key="0" />
        <column table="a" column="buh_pol" type="string" title="" as="buh_pol" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" key="0" />
        <column table="a" column="ks_pol" type="string" title="" as="ks_pol" key="0" />
        <column table="a" column="bank_pol" type="string" title="" as="bank_pol" key="0" />
        <column table="a" column="filial_pol" type="string" title="" as="filial_pol" key="0" />
        <column table="a" column="bic_pol" type="string" title="" as="bic_pol" key="0" />
        <column table="a" column="rs_pol" type="string" title="" as="rs_pol" key="0" />
        <column table="a" column="kpp_pol" type="string" title="" as="kpp_pol" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_dog" type="date" title="" as="dat_dog" key="0" />
        <column table="a" column="ndog" type="string" title="" as="ndog" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" key="0" />
        <column table="a" column="name_pl" type="string" title="" as="name_pl" key="0" />
        <column table="a" column="adr_pl" type="string" title="" as="adr_pl" key="0" />
        <column table="a" column="inn_pl" type="string" title="" as="inn_pl" key="0" />
        <column table="a" column="fio_pl" type="string" title="" as="fio_pl" key="0" />
        <column table="a" column="buh_pl" type="string" title="" as="buh_pl" key="0" />
        <column table="a" column="ks_pl" type="string" title="" as="ks_pl" key="0" />
        <column table="a" column="bank_pl" type="string" title="" as="bank_pl" key="0" />
        <column table="a" column="filial_pl" type="string" title="" as="filial_pl" key="0" />
        <column table="a" column="bic_pl" type="string" title="" as="bic_pl" key="0" />
        <column table="a" column="rs_pl" type="string" title="" as="rs_pl" key="0" />
        <column table="a" column="kpp_pl" type="string" title="" as="kpp_pl" key="0" />
        <column table="a" column="dat_zad" type="date" title="" as="dat_zad" key="0" />
        <column table="a" column="podr" type="number" title="" as="podr" key="0" />
        <column table="a" column="okpo_pl" type="string" title="" as="okpo_pl" key="0" />
        <column table="a" column="nump" type="string" title="" as="nump" key="0" />
        <column table="a" column="ruk_pol" type="string" title="" as="ruk_pol" key="0" />
        <column table="a" column="fio_ruk_pol" type="string" title="" as="fio_ruk_pol" key="0" />
        <column table="a" column="ruk_pl" type="string" title="" as="ruk_pl" key="0" />
        <column table="a" column="fio_ruk_pl" type="string" title="" as="fio_ruk_pl" key="0" />
        <column table="a" column="dat_podpis" type="date" title="" comment="дата подписи акта" as="dat_podpis" key="0" />
        <column table="a" column="pr_raznogl" type="number" title="" comment="признак:0 - без разногласий;1 - с разногласиями" as="pr_raznogl" key="0" />
        <column table="a" column="ruk_pol_r" type="string" title="" as="ruk_pol_r" key="0" />
        <column table="a" column="fio_ruk_pol_r" type="string" title="" as="fio_ruk_pol_r" key="0" />
        <column table="a" column="dov_ruk_pol" type="string" title="" comment="довереность руководителя энергоснабжающей организации" as="dov_ruk_pol" key="0" />
        <column table="a" column="kod_edo_pol" type="number" comment="код оператора эдо, услугами которого пользуется продавец" as="kod_edo_pol" key="0" />
        <column table="a" column="kod_uch_edo_pol" type="string" comment="код участника, присваиваемый оператором эдо, услугами которого пользуется продавец" as="kod_uch_edo_pol" key="0" />
        <column table="a" column="kod_edo_pok" type="number" comment="код оператора эдо, услугами которого пользуется покупатель" as="kod_edo_pok" key="0" />
        <column table="a" column="kod_uch_edo_pok" type="string" comment="код участника, присваиваемый оператором эдо, услугами которого пользуется продавец" as="kod_uch_edo_pok" key="0" />
        <column table="a" column="dov_buh_pol" type="string" title="" comment="довереность бухгалтера энергоснабжающей организации" as="dov_buh_pol" key="0" />
        <column table="a" column="kod_emp1" type="number" comment="код сотрудника 1 (руководителя)" as="kod_emp1" key="0" />
        <column table="a" column="kod_emp2" type="number" comment="код сотрудника 2 (бухгалтера)" as="kod_emp2" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_akt_text" as="a" />
        <query name="sr_akt" as="kod" join="left outer" dname="sr_akt_text">
          <call function="=">
            <column table="a" column="kod" />
            <column table="kod" column="kod" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_akt_text">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_akt_text" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_akt_text" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_avans" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_avans.xml" haskeys="1">
      <select>
        <column table="a" column="kod_av" type="number" as="kod_av" key="1" fixed="1"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0"></column>
        <column table="a" column="avans" type="number" title="" as="avans" key="0"></column>
        <column table="a" column="ym" type="number" title="" as="ym" key="0"></column>
        <column table="a" column="rym" type="number" title="" as="rym" key="0"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="dat_priem" type="date" title="" as="dat_priem" key="0"></column>
        <column table="a" column="ruchki" type="number" title="" as="ruchki" key="0"></column>
        <column table="a" column="den" type="number" title="" as="den" key="0"></column>
        <column table="a" column="day" type="number" title="" as="day" key="0"></column>
        <column table="a" column="period" type="string" title="" comment="период из kr_vist_day" as="period" key="0"></column>
        <column table="a" column="vid_avans" type="number" title="" as="vid_avans" key="0"></column>
        <column table="a" column="perc" type="number" title="" as="perc" key="0"></column>
        <column table="a" column="pr_avans_umen" type="number" title="" as="pr_avans_umen" key="0"></column>
        <column table="a" column="pr_uch_av" type="number" title="" as="pr_uch_av" key="0"></column>
        <column table="a" column="kf_rasch" type="number" title="" comment="кп" as="kf_rasch" key="0"></column>
        <column table="a" column="kf_razresh" type="number" title="" comment="кр" as="kf_razresh" key="0"></column>
        <column table="a" column="kf_zadan" type="number" title="" comment="кз" as="kf_zadan" key="0"></column>
        <column table="a" column="f_ym" type="number" title="" comment="расчетный месяц" as="f_ym" key="0"></column>
        <column table="a" column="gig_fact" type="number" title="" comment="факт расчетного месяца" as="gig_fact" key="0"></column>
        <column table="a" column="edit_avans" type="number" title="" comment="признак ручной корректировки суммы аванса или гкал" as="edit_avans" key="0"></column>
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0"></column>
        <column table="a" column="kod_dog_fin" type="number" comment="дог, признавший фин.историю" as="kod_dog_fin" key="0"></column>
        <column table="a" column="kodp_plat" type="number" title="" comment="код плательщика" as="kodp_plat" key="0"></column>
        <column table="a" column="pr_rasch_av" type="number" title="" comment="признак расчета аванса:0-по фиксир.ценам;1-по своб.ценам прогнозным;2-по своб.ценам прошл.месяца;3-по средневзвешенной цене" as="pr_rasch_av" key="0"></column>
        <column table="a" column="ym_fact" type="number" title="" comment="период, за который берутся фактич. значения" as="ym_fact" key="0"></column>
        <column table="a" column="ym_price" type="number" title="" comment="период, за который берутся свободные цены" as="ym_price" key="0"></column>
        <column table="a" column="date_print_reminder" type="date" title="" comment="дата печати напоминания" as="date_print_reminder" key="0"></column>
        <column table="a" column="period_sf" type="string" title="" comment="период для счетов с разобранными &quot;собаками&quot;" as="period_sf" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_avans" as="a"></table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_avans">
          <call function="=">
            <column table="a" column="tep_el"></column>
            <column table="tep_el" column="tep_el"></column>
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_avans" title="Абонент">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_avans" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="sr_avans_otch" class="1" timestamp="26.02.2018 15:54:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_avans_otch.xml" haskeys="1">
      <select>
        <column table="a" column="kod_av" type="number" column-mandatory="1" comment="Первичный ключ- код аванса" as="kod_av" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" column-mandatory="1" comment="Код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="tep_el" type="number" column-mandatory="1" title="" comment="tep_el: 2-вода;3-пар" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="avans" type="number" column-mandatory="1" title="" comment="Сумма аванса руб." is-fact="1" agg="sum" as="avans" fact="sr_avans_otch_avans" key="0" />
        <column table="a" column="ym" type="number" column-mandatory="1" title="" comment="Отчетный период" as="ym" key="0" />
        <call as="vid_real" is-private-dimension="vid_real" is-final-dimension="vid_real" dimension="vid_real" type="number" function="()" key="0">
          <const>0</const>
        </call>
        <call function="ym end time" as="dat" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" key="0">
          <column table="this" column="ym" />
        </call>
        <column table="a" column="rym" type="number" column-mandatory="1" title="" comment="Период, под который рассчитан аванс" is-private-dimension="ym_vozn2" is-final-dimension="ym_vozn2" dimension="ym_vozn2" as="rym" key="0" />
        <column table="a" column="rym" type="number" column-mandatory="1" title="" comment="Период, под который рассчитан аванс" is-private-dimension="ym_vozn" is-final-dimension="ym_vozn" dimension="ym_vozn" as="ym_vozn" key="0" />
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" comment="Код абонента" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="prim" type="string" title="" comment="Примечание" as="prim" key="0" />
        <column table="a" column="dat_priem" type="date" column-mandatory="1" title="" comment="Дата приемки" as="dat_priem" key="0" />
        <column table="a" column="day" type="number" title="" comment="Число из даты приемки" as="day" key="0" />
        <column table="a" column="period" type="string" title="" comment="Период из KR_VIST_DAY" as="period" key="0" />
        <column table="a" column="vid_avans" type="number" title="" comment="Вид аванса из KR_VIST_DAY" as="vid_avans" reference="sk_vid_avans" refcol="vid_avans" key="0" />
        <column table="a" column="perc" type="number" title="" comment="Процент аванса из KR_VIST_DAY" is-fact="1" agg="sum" as="perc" fact="sr_avans_otch_perc" key="0" />
        <column table="a" column="pr_avans_umen" type="number" column-mandatory="1" title="" comment="Признак уменьшения аванса (для формирования счетов на аванс)" as="pr_avans_umen" key="0" />
        <column table="a" column="pr_uch_av" type="number" column-mandatory="1" title="" comment="Признак учета аванса (для формирования счетов на аванс)" as="pr_uch_av" key="0" />
        <column table="a" column="period_sf" type="string" title="" comment="период для счетов с разобранными &quot;собаками&quot;" as="period_sf" key="0" />
        <column table="a" column="period_first_date" type="date" title="" comment="Первая дата из поля period" as="period_first_date" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="t_m" type="string" title="" as="t_m" key="0" />
        <column table="a" column="round_av" type="number" column-mandatory="1" title="" comment="До какой величины округлять аванс" as="round_av" key="0" />
        <column table="a" column="dep" type="number" column-mandatory="1" title="" comment="Отделение" is-private-dimension="kod_dep" is-final-dimension="kod_dep" dimension="kod_dep" as="dep" key="0" />
        <call function="if" as="pr_avans_umen_text" type="string" key="0">
          <call function="=">
            <column table="a" column="pr_avans_umen" />
            <const>1</const>
          </call>
          <const>'уменьшить'</const>
          <const>'не уменьшать'</const>
        </call>
        <call function="if" as="pr_avans_umen_text" type="string" key="0">
          <call function="=">
            <column table="a" column="pr_avans_umen" />
            <const>1</const>
          </call>
          <const>'уменьшить'</const>
          <const>'не уменьшать'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_avans_otch" as="a">
          <link name="kod_dog" as="kod_dog1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dogovor" child="sr_avans_otch" field="kod_dog" parent="kr_dogovor" back="sr_avans_otch" title="Договор">
            <dimlink name="kod_group_cust" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_group_cust_parent" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kodp" as="kodp1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_payer" child="sr_avans_otch" field="kodp" parent="kr_payer" back="sr_avans_otch" title="Абонент" />
          <link name="dep" as="dep1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dep" child="sr_avans_otch" field="dep" parent="kr_dep" back="sr_avans_otch" />
        </table>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_avans_otch">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_avans_otch" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_avans_otch" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dep" join="left outer" as="dep" dname="sr_avans_otch">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="sk_vid_avans" as="vid_avans" join="left outer" dname="sr_avans_otch">
          <call function="=">
            <column table="a" column="vid_avans" />
            <column table="vid_avans" column="vid_avans" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="sr_avans_otch">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_avans_uved" class="1" timestamp="27.08.2016 01:37:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_avans_uved.xml" haskeys="1">
      <select>
        <column table="a" column="kod_av_uved" type="number" comment="первичный ключ" as="kod_av_uved" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="платеж по теплу или электричеству" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="avans" type="number" title="" comment="сумма аванса" fact="sr_avans_uved_avans" agg="sum" as="avans" key="0" />
        <column table="a" column="ym" type="number" title="" comment="отчётный период" as="ym" key="0" />
        <column table="a" column="rym" type="number" title="" comment="период, под который выставляется аванс" as="rym" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="уникальный код абонента" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="day" type="number" title="" comment="число наступления задолженности" as="day" key="0" />
        <column table="a" column="vid_avans" type="number" title="" comment="вид промежуточных платежей (авансов)" as="vid_avans" key="0" />
        <column table="a" column="perc" type="number" title="" comment="% или постоянная величина" as="perc" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кто рассчитывал" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда рассчитывал" as="d_m" key="0" />
        <call function="ym begin time" comment="заплатка" as="dat" dimension="dat" key="0">
          <column table="this" column="rym" />
        </call>
        <call function="case" as="dat_bzad_uved_kaz_el" type="date" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="perc" />
              <const>30</const>
            </call>
            <call function="to_date">
              <call function="||">
                <const>'10.'</const>
                <call function="ym to char">
                  <column table="a" column="rym" />
                </call>
              </call>
              <const>'DD.YYYY.MM'</const>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="perc" />
              <const>40</const>
            </call>
            <call function="to_date">
              <call function="||">
                <const>'25.'</const>
                <call function="ym to char">
                  <column table="a" column="rym" />
                </call>
              </call>
              <const>'DD.YYYY.MM'</const>
            </call>
          </call>
        </call>
        <call function="to_date" as="dat_ezad" key="0">
          <call function="||">
            <const>'18.'</const>
            <call function="ym to char">
              <call function="ym add month">
                <column table="a" column="rym" />
                <const>1</const>
              </call>
            </call>
          </call>
          <const>'DD.YYYY.MM'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_avans_uved" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_avans_uved">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="sr_avans_uved" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_avans_uved" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_debet" class="1" timestamp="04.07.2021 18:44:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_debet.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb" type="number" key-dimension="kod_deb" as="kod_deb" key="1" fixed="1" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_pl" type="number" title="" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="num_pl" type="number" title="Номер документа на оплату" format="F0" as="num_pl" key="0" />
        <column table="a" column="dat_deb" type="date" title="Дата документа на оплату" is-private-dimension="dat" is-final-dimension="dat" dimension="dat" as="dat_deb" key="0" />
        <column table="a" column="ym" type="number" title="Период" format="F2" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" title="" as="dat_priem" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="pr_perep" type="number" title="" as="pr_perep" key="0" />
        <column table="a" column="den" type="number" title="" as="den" key="0" />
        <column table="a" column="dat_bzad" type="date" title="Дата возникновения обязательства по погашению задолженности" as="dat_bzad" key="0" />
        <column table="a" column="kodp_plat" type="number" title="" comment="код плательщика" as="kodp_plat" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0" />
        <column table="a" column="kod_deb_konsol" type="number" comment="код фиктивной консолид. платежки" as="kod_deb_konsol" key="0" />
        <column table="a" column="u_c" type="string" title="" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <call function="||" as="name" title="Документ на оплату" key="0">
          <const>'п/д '</const>
          <const>' № '</const>
          <column table="a" column="num_pl" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_deb" />
          </call>
        </call>
        <call function="||" as="name1" title="Документ на оплату" key="0">
          <const>'№ '</const>
          <column table="a" column="num_pl" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_deb" />
          </call>
        </call>
        <const type="number" as="cnt" fact="sr_debet_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_debet" as="a">
          <dlink name="qube_debet_state_last" as="qube_debet_state_last" table="qube_debet_state_last" child="qube_debet_state_last" field="kod_deb" parent="sr_debet" back="qube_debet_state_last">
            <link name="kod_state_lst" dimension="1" is-final-dimension="1" as="kod_state_lst" table="ss_state_lst" child="qube_debet_state_last" field="kod_state_lst" parent="ss_state_lst" back="qube_debet_state_last" />
          </dlink>
        </table>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_debet" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_debet">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="sr_debet">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_debet" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_debet_state" class="1" timestamp="14.06.2017 13:58:39" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_debet_state.xml" haskeys="1">
      <select>
        <call function="||" as="kod_debet_state" key="1">
          <column table="a" column="kod_deb" type="number" />
          <column table="a" column="dat_ust" type="date" title="" />
          <column table="a" column="kod_state" type="number" />
        </call>
        <column table="a" column="kod_deb" type="number" as="kod_deb" />
        <column table="a" column="kod_state" type="number" as="kod_state" reference="ss_state" refcol="kod_state" />
        <column table="a" column="dat_ust" type="date" title="" dimension="dat" is-private-dimension="1" as="dat_ust" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" />
        <column table="a" column="kod_otz" type="number" as="kod_otz" reference="sr_otz" refcol="kod_otz" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" />
        <column table="a" column="kod_reason" type="number" as="kod_reason" reference="ss_otz_reason" refcol="kod_reason" />
        <column table="a" column="sum_otz" type="number" title="" comment="сумма отзыва" as="sum_otz" />
        <column table="kod_state" column="pr_dog" as="pr_dog" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_debet_state" as="a">
          <dimlink name="kod_deb">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
        </table>
        <query name="sr_debet" as="kod_deb" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_debet_state">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_otz" as="kod_otz" join="left outer" dname="sr_debet_state">
          <call function="=">
            <column table="a" column="kod_otz" />
            <column table="kod_otz" column="kod_otz" />
          </call>
        </query>
        <query name="ss_otz_reason" as="kod_reason" join="left outer" dname="sr_debet_state">
          <call function="=">
            <column table="a" column="kod_reason" />
            <column table="kod_reason" column="kod_reason" />
          </call>
        </query>
        <query name="ss_state" as="kod_state" join="left outer" dname="sr_debet_state">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facopl" class="1" timestamp="25.09.2018 19:00:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fopl" type="number" key-dimension="kod_fopl" as="kod_fopl" key="1" fixed="1" />
        <column table="a" column="kod_ras" type="number" as="kod_ras" reference="sr_facras" refcol="kod_ras" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="opl" type="number" fact="sr_facopl_opl" title="Оплачено" agg="sum" as="opl" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facopl_cust" agg="sum" as="cust" key="0" />
        <column table="opl_nal" column="nal" as="nal" key="0" />
        <column table="kod_opl" column="ym" dimension="ym" as="ym" key="0" />
        <column table="kod_opl" column="kod_dog" dimension="kod_dog" as="kod_dog" key="0" />
        <column table="kod_sf" column="vid_real" dimension="vid_real" as="vid_real" key="0" />
        <column table="kod_opl" column="dat_uch" dimension="dat" as="dat_uch" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facopl" as="a">
          <link name="kod_ras" as="kod_ras1" table="sr_facras" child="sr_facopl" field="kod_ras" parent="sr_facras" back="sr_facopl">
            <link name="kod_sf" as="kod_sf" table="sr_facvip" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras" />
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_dec" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_dec" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_edizm" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_t" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_f46" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="voltage" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dogplat" is-private-dimension="1" dimension="1" is-final-dimension="1" />
          </link>
          <link name="kod_opl" as="kod_opl1" table="sr_opl" child="sr_facopl" field="kod_opl" parent="sr_opl" back="sr_facopl">
            <dimlink name="kod_type_opl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_vidopl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <slink name="sr_facopl_nal" as="opl_nal" table="sr_facopl_nal" />
        </table>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="kod_ras" dname="sr_facopl">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dimension="kod_opl" dname="sr_facopl">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facopl_nal" class="1" timestamp="06.02.2017 14:15:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facopl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_fopl" type="number" key="1" comment="сделал колонку ключевой, надеемся что нет 2-х записей на один kod_fopl" as="kod_fopl" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" />
        <column table="a" column="tax" type="number" title="" as="tax" />
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" reference="ss_nalog_tax" refcol="kod_naltax" />
        <column table="a" column="nal" type="number" title="" fact="sr_facopl_nal" agg="sum" as="nal" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_facopl_nal" as="a">
          <link name="kod_fopl" as="kod_fopl" table="sr_facopl" child="sr_facopl_nal" field="kod_fopl" parent="sr_facopl" back="sr_facopl_nal">
            <link name="kod_opl" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_opl" table="sr_opl" child="sr_facopl" field="kod_opl" parent="sr_opl" back="sr_facopl" />
          </link>
        </table>
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_facopl_nal">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_facopl" as="kod_fopl" join="left outer" dimension="1" dname="sr_facopl_nal">
          <call function="=">
            <column table="a" column="kod_fopl" />
            <column table="kod_fopl" column="kod_fopl" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_facopl_nal">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facras" class="1" timestamp="06.08.2020 19:55:47" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facras.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" key-dimension="kod_ras" as="kod_ras" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="первичный ключ" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <call function="ym to char" as="rym_str" is-fact="1" fact="sr_facras_rym" agg="list" key="0">
          <column table="this" column="rym" />
        </call>
        <column table="a" column="vid_t" type="number" title="" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="edizm" type="number" title="" as="edizm" reference="sk_edizm" refcol="edizm" key="0" />
        <column table="a" column="cust" type="number" title="" fact="sr_facras_cust" agg="sum" as="cust" key="0" />
        <column table="a" column="price" type="number" title="" as="price" key="0" />
        <column table="a" column="nachisl" type="number" title="Начислено" fact="sr_facras_nachisl" agg="sum" as="nachisl" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="pr_peres" type="number" title="" comment="1/-1 - новые данные/сторно" as="pr_peres" key="0" />
        <column table="a" column="rym_acc" type="number" title="" comment="rym из _account" as="rym_acc" key="0" />
        <column table="a" column="kod_tip_tu" type="number" comment="код типа т.у. заполняется для чжд: -1 - чжд, 5 - теплица, 6 - баня, 7 - гараж, 8 - хозпостройка" as="kod_tip_tu" key="0" />
        <column table="a" column="pr_oto_gvs" type="number" title="" comment="для вида начисления 1(за теплоэнергию в гкал) признак отопления(=1)/гвс(=2)" as="pr_oto_gvs" key="0" />
        <column table="a" column="kod_ras_old" type="number" comment="для корректирующих сф" as="kod_ras_old" key="0" />
        <column table="a" column="pr_pech" type="number" title="" comment="если =1, то строка идет в печать в коррсф" as="pr_pech" key="0" />
        <column table="a" column="kod_ras_first" type="number" comment="для корректирующих сф" as="kod_ras_first" reference="sr_facras" key="0" />
        <call function="if" as="cust_kvth" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvth" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="if" as="cust_kvt" is-fact="1" agg="sum" type="number" fact="sr_facras_cust_kvt" key="0">
          <call function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
          <column table="a" column="cust" />
        </call>
        <call function="case" type="number" as="vid_t_teplo" key="0">
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>61</const>
              </call>
            </call>
            <const>4.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>1</const>
              </call>
            </call>
            <const>1.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>2</const>
              </call>
            </call>
            <const>1.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>55</const>
                <const>85</const>
              </call>
            </call>
            <const>2.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>84</const>
              </call>
            </call>
            <const>2.2</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>54</const>
              </call>
            </call>
            <const>5.1</const>
          </call>
          <call function="when">
            <call function="in">
              <column table="a" column="vid_t" />
              <call function="array">
                <const>64</const>
              </call>
            </call>
            <const>5.2</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_t" />
              <const>58</const>
            </call>
            <const>2.3</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>11</const>
                  <const>56</const>
                </call>
              </call>
              <call function="not in">
                <column table="a" column="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
            <const>3.1</const>
          </call>
          <call function="when">
            <call function="or">
              <call function="in">
                <column table="a" column="vid_t" />
                <call function="array">
                  <const>3</const>
                  <const>57</const>
                </call>
              </call>
              <call function="and">
                <call function="in">
                  <column table="a" column="vid_t" />
                  <call function="array">
                    <const>56</const>
                  </call>
                </call>
                <call function="in">
                  <column table="a" column="tarif" />
                  <call function="array">
                    <const>6219</const>
                    <const>16378</const>
                    <const>16460</const>
                    <const>72711</const>
                  </call>
                </call>
              </call>
            </call>
            <const>3.2</const>
          </call>
        </call>
        <column table="nachisl_nal" column="nal" as="nal" key="0" />
        <column table="kod_ras_text" column="voltage" title="Уровень напряжения" as="voltage" key="0" />
        <column table="kod_ras_text" column="kod_f46" as="kod_f46" key="0" />
        <column table="kod_sf" column="rym" as="ym_vozn2" dimension="ym_vozn2" key="0" />
        <call function="if" as="cust_teplo" title="Начислено, Гкал - отопление" type="number" fact="sr_facras_cust_teplo" agg="sum" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_gr" />
            <const>1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_gvs" title="Начислено, Гкал- ГВС" type="number" key="0">
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <const>2.1</const>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub" title="Начислено, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>2.2</const>
              <const>2.3</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_kub_u" title="Утечка, куб.м.- ГВС" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>3.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_c" title="Горячая вода (компонент холодная вода)" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.1</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <call function="if" as="cust_teplo_hv" title="Горячая вода" type="number" key="0">
          <call function="in">
            <!--<column table="vid_t_teplo" column="vid_t_gr"></column>-->
            <!--<const>3</const>-->
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <call function="array">
              <const>5.2</const>
            </call>
          </call>
          <column table="a" column="cust" />
          <const>0</const>
        </call>
        <column table="vid_t" column="full_name" as="vid_t_full_name" fact="sr_facras_vid_t_full_name" agg="max" key="0" />
        <column table="vid_t_gr" column="name" as="vid_t_gr_name" fact="vid_t_teplo_gr_name" agg="max" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facras" as="a">
          <slink name="sr_facras_nal" as="nachisl_nal" table="sr_facras_nal" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="qube_sf_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Банк плательщика" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_dolg_out" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="dat_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="ym_iav" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="sr_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vid_recalc" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ks_tarif" as="tarif" join="left outer" dimension="1" dname="sr_facras">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="vid_t" dname="sr_facras" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dimension="kod_sf" dname="sr_facras">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sk_edizm" as="edizm" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facras">
          <call function="=">
            <column table="a" column="edizm" />
            <column table="edizm" column="edizm" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="sr_facras">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facras">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras_first" join="left outer" dname="sr_facras">
          <call function="=">
            <column table="a" column="kod_ras_first" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nachisl_teplo" as="vid_t_teplo" join="left outer" dimension="1" dname="sr_facras">
          <link name="vid_t_gr" as="vid_t_gr" table="sk_nachisl_gr_teplo" child="sk_nachisl_teplo" field="vid_t_gr" parent="sk_nachisl_gr_teplo" back="sk_nachisl_teplo" />
          <call function="=">
            <column table="vid_t_teplo" column="vid_t_teplo" />
            <column table="this" column="vid_t_teplo" />
          </call>
        </query>
        <query name="sr_facras_text" as="kod_ras_text" join="left outer" dimension="1" dname="sr_facras">
          <call function="=">
            <column table="kod_ras_text" column="kod_ras" />
            <column table="this" column="kod_ras" />
          </call>
        </query>
        <query name="hk_voltage" dimension="1" join="left outer" as="hk_voltage1" dname="sr_facras" title="Уровень напряжения">
          <call function="=">
            <column table="this" column="voltage" />
            <column table="hk_voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" is-private-dimension="1" is-final-dimension="1" dimension="1" join="left outer" as="ks_46" dname="sr_facras">
          <call function="=">
            <column table="this" column="kod_f46" />
            <column table="ks_46" column="kod_f46" />
          </call>
        </query>
      </from>
      <where>
        <call function="not in">
          <column table="kod_sf" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facras_nal" class="1" timestamp="25.09.2018 18:18:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facras_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nal" type="number" as="kod_nal" key="1" fixed="1" />
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" reference="ss_nalog_tax" refcol="kod_naltax" key="0" />
        <column table="a" column="kod_ras" type="number" as="kod_ras" reference="sr_facras" refcol="kod_ras" key="0" />
        <column table="a" column="nal" type="number" title="" fact="sr_facras_nal_nal" agg="sum" as="nal" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facras_nal" as="a">
          <link name="kod_ras" as="kod_ras" table="sr_facras" child="sr_facras_nal" field="kod_ras" parent="sr_facras" back="sr_facras_nal">
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_vid_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="sk_edizm" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_t" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_f46" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="voltage" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodbpol" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodb" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_real" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ym" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="dat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_facras_nal">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_facras" as="kod_ras" join="left outer" dimension="1" dname="sr_facras_nal">
          <call function="=">
            <column table="a" column="kod_ras" />
            <column table="kod_ras" column="kod_ras" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_facras_nal">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facras_text" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facras_text.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ras" type="number" as="kod_ras" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="для пени-список с платежками" as="name" key="0"></column>
        <column table="a" column="name_potr" type="string" title="" as="name_potr" key="0"></column>
        <column table="a" column="kod_account" type="number" as="kod_account" key="0"></column>
        <column table="a" column="dat_promezhut" type="date" title="" as="dat_promezhut" key="0"></column>
        <column table="a" column="kod_vid_act" type="number" as="kod_vid_act" reference="ss_vid_act" refcol="kod_vid_act" key="0"></column>
        <column table="a" column="raschet" type="string" title="" as="raschet" key="0"></column>
        <column table="a" column="kod_avobj" type="number" comment="для авансов, рассчитанных по точкам" as="kod_avobj" key="0"></column>
        <column table="a" column="name_abon" type="string" title="" comment="номер абонента(наименование цтп)" as="name_abon" key="0"></column>
        <column table="a" column="name_sf" type="string" title="" comment="для пени-список с сф" as="name_sf" key="0"></column>
        <column table="a" column="obj_adr" type="string" title="" comment="адрес для опционального вывода в длинную сф" as="obj_adr" key="0"></column>
        <column table="a" column="pl_sf" type="number" title="" comment="0/1-вывод списка пл./сф" as="pl_sf" key="0"></column>
        <column table="a" column="kod_f46" type="number" comment="код 46 формы" as="kod_f46" reference="ks_46" refcol="kod_f46" key="0"></column>
        <column table="a" column="voltage" type="number" title="" comment="код уроаня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0"></column>
        <column table="a" column="kod_tar_free" type="number" comment="код свободного тарифа" as="kod_tar_free" reference="ks_tar_free" refcol="kod_tar_free" key="0"></column>
        <column table="a" column="kodinterval" type="number" title="" comment="код зоны суток" as="kodinterval" reference="kk_interval" refcol="kodinterval" key="0"></column>
        <column table="a" column="kod_dhh" type="number" comment="код диапазона ччи" as="kod_dhh" reference="hk_dhh" refcol="kod_dhh" key="0"></column>
        <column table="a" column="pr_gener" type="number" title="" comment="признак отпуска с шин" as="pr_gener" key="0"></column>
        <column table="a" column="kod_plan" type="number" as="kod_plan" key="0"></column>
        <column table="a" column="name_tarif_group" type="string" title="" as="name_tarif_group" key="0"></column>
        <column table="kod_sf" column="vid_real" as="vid_real" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facras_text" as="a">
          <link name="kod_ras" as="kod_ras" table="sr_facras" child="sr_facras_text" field="kod_ras" parent="sr_facras" back="sr_facras_text">
            <link name="kod_sf" as="kod_sf" table="sr_facvip" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras" />
          </link>
        </table>
        <query name="sr_facras" as="kod_ras" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_ras"></column>
            <column table="kod_ras" column="kod_ras"></column>
          </call>
        </query>
        <query name="ss_vid_act" as="kod_vid_act" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_vid_act"></column>
            <column table="kod_vid_act" column="kod_vid_act"></column>
          </call>
        </query>
        <query name="hk_voltage" as="voltage" join="left outer" dname="sr_facras_text" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage"></column>
            <column table="voltage" column="voltage"></column>
          </call>
        </query>
        <query name="ks_tar_free" as="kod_tar_free" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_tar_free"></column>
            <column table="kod_tar_free" column="kod_tar_free"></column>
          </call>
        </query>
        <query name="kk_interval" as="kodinterval" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kodinterval"></column>
            <column table="kodinterval" column="kodinterval"></column>
          </call>
        </query>
        <query name="hk_dhh" as="kod_dhh" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_dhh"></column>
            <column table="kod_dhh" column="kod_dhh"></column>
          </call>
        </query>
        <query name="ks_46" as="kod_f46" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_f46"></column>
            <column table="kod_f46" column="kod_f46"></column>
          </call>
        </query>
        <query name="nr_account" as="kod_account" join="left outer" dname="sr_facras_text">
          <call function="=">
            <column table="a" column="kod_account" />
            <column table="kod_account" column="kod_account" />
          </call>
        </query>
        <query name="sr_avans" as="kod_av" join="left outer" dname="sr_facras_text">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_account"></column>
              <column table="kod_av" column="kod_av"></column>
            </call>
            <call function="=">
              <column table="this" column="vid_real"></column>
              <const>0</const>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facvip" class="1" timestamp="20.05.2023 11:07:55" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facvip.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" key-dimension="kod_sf" as="kod_sf" key="1" fixed="1" />
        <const type="number" as="cnt" fact="sr_facvip_count" agg="sum" key="0">1</const>
        <column table="a" column="tep_el" type="number" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="vid_real" type="number" fact="sf_vid_real" agg="max" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="vid_sf" type="number" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="vid_pl" type="number" as="vid_pl" reference="sk_vid_pl" refcol="vid_pl" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер документа начисления" format="F0" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="Дата документа начисления" as="dat_sf" key="0" />
        <call function="if" as="dat_rep" type="date" comment="59495 " dimension="dat" key="0">
          <call function="and">
            <call function="lt">
              <call function="date to ym">
                <column table="this" column="dat_sf" />
              </call>
              <column table="this" column="ym" />
            </call>
            <call function="!=">
              <column table="this" column="vid_real" />
              <const>0</const>
            </call>
          </call>
          <call function="ym end day">
            <column table="this" column="ym" />
          </call>
          <column table="this" column="dat_sf" />
        </call>
        <column table="a" column="ym" type="number" title="Отчетный период начисления" dimension="ym" format="F2" as="ym" key="0" />
        <column table="a" column="dat_priem" type="date" as="dat_priem" key="0" />
        <column table="a" column="pr_old" type="number" as="pr_old" key="0" />
        <column table="a" column="pr_sv" type="number" as="pr_sv" key="0" />
        <column table="a" column="pr_osn" type="number" as="pr_osn" key="0" />
        <column table="a" column="gru_pl" type="number" as="gru_pl" key="0" />
        <column table="a" column="den" type="number" as="den" key="0" />
        <column table="a" column="kod_dog_r" type="number" comment="код договора при объединении в sr_debet" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="dat_uchet" type="date" as="dat_uchet" key="0" />
        <column table="a" column="dat_ezad" type="date" as="dat_ezad" key="0" />
        <call function="date add days" as="dat_dolg_out" is-private-dimension="dat_dolg_out" is-final-dimension="dat_dolg_out" dimension="dat_dolg_out" key="0">
          <column table="this" column="dat_ezad" />
          <const>-1</const>
        </call>
        <column table="a" column="vist_day" type="number" comment="день выставления промежути" as="vist_day" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="num_sf_uch" type="number" comment="номер сф при постановке на учет" as="num_sf_uch" key="0" />
        <column table="a" column="ym_uch" type="number" comment="период постановки на учет" as="ym_uch" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" as="u_m" key="0" />
        <column table="a" column="pr_hand" type="number" as="pr_hand" key="0" />
        <column table="a" column="vid_avans" type="number" as="vid_avans" reference="kr_vist_day" refcol="kod_dog" key="0" />
        <column table="a" column="prim_uo" type="string" comment="заполняется при погашении любым периодом" as="prim_uo" key="0" />
        <column table="a" column="kod_sf_old" type="number" comment="kod_sf перерасчитываемой сф" as="kod_sf_old" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kodp_plat" type="number" comment="код плательщика" as="kodp_plat" key="0" />
        <column table="a" column="kod_sf_konsol" type="number" comment="код консолидированной сф" as="kod_sf_konsol" key="0" />
        <column table="a" column="vid_recalc" type="number" comment="вид перерасчета из спр-ка ss_vid_recalc" as="vid_recalc" key="0" />
        <column table="a" column="kod_dog_link" type="number" comment="код консолидированного договора" as="kod_dog_link" key="0" />
        <column table="a" column="pr_uch_av" type="number" comment="учитывать 0/1-по факту оплаты/на сумму начисления" as="pr_uch_av" key="0" />
        <column table="a" column="kod_bu_akt" type="number" comment="код безучетки" as="kod_bu_akt" reference="hr_bu_akt" refcol="kod_bu_akt" key="0" />
        <column table="a" column="kod_sf_first" type="number" comment="при перерасчете самый исходный kod_sf" as="kod_sf_first" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="tip_bu_akt" type="number" comment="0\1-пром./ок. расчет" as="tip_bu_akt" key="0" />
        <column table="a" column="kniga" type="number" as="kniga" key="0" />
        <column table="a" column="dat_pen_ezad" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_pen_ezad" key="0" />
        <column table="a" column="dat_zadol" type="date" comment="конечная дата расчета пени по авансам (для эх)" as="dat_zadol" key="0" />
        <column table="a" column="nom_sf" type="string" comment="полный номер док-та для печати" title="Номер документа начисления" as="nom_sf" key="0" />
        <column table="a" column="proc" type="number" comment="процент аванса" as="proc" key="0" />
        <call function="||" as="name" title="Документ начисления" key="0">
          <column table="vid_sf" column="abbr" />
          <const>' № '</const>
          <column table="a" column="num_sf" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_sf" />
          </call>
        </call>
        <call function="coalesce" as="dat_bzad" type="date" title="Дата возникновения обязательства по погашению задолженности" dimension="dat_dolg" key="0">
          <column table="kod_deb" column="dat_bzad" />
          <column table="this" column="dat_zadol" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="if" as="dat_bzad_ksf" type="date" title="Дата возникновения обязательства по погашению задолженности" key="0">
          <call function="is null">
            <column table="this" column="kod_sf_old" />
          </call>
          <column table="this" column="dat_bzad" />
          <column table="this" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_45" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>45</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="latest" as="dat_res_nal_90" key="0">
          <call function="date add days" type="date">
            <column table="kod_sf_main" column="dat_bzad" />
            <const>90</const>
          </call>
          <column table="a" column="dat_sf" />
        </call>
        <call function="earliest" as="dat_res_buh" key="0">
          <call function="latest">
            <column table="kod_sf_main" column="dat_bzad" />
            <column table="this" column="dat_sf" />
          </call>
          <call function="if">
            <call function="is not null">
              <call function="egr_payer_sulst">
                <column table="kodp" column="kodp" />
              </call>
            </call>
            <call function="latest">
              <call function="egr_payer_sulst_dat">
                <column table="kodp" column="kodp" />
              </call>
              <column table="this" column="dat_sf" />
            </call>
          </call>
        </call>
        <column table="this" column="dat_bzad" as="dat_bzad_max" fact="sr_facvip_dat_bzad_max" agg="max" key="0" />
        <call function="case" as="dat_bzad_uved_kaz_el" type="date" dimension="dat_dolg_uved_kaz_el" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>30</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'10.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_sf_dop" column="perc" />
              <const>40</const>
            </call>
            <call function="latest">
              <call function="to_date">
                <call function="||">
                  <const>'25.'</const>
                  <call function="ym to char">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <const>'DD.YYYY.MM'</const>
              </call>
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>0</const>
            </call>
            <call function="earliest">
              <call function="latest">
                <call function="nvl">
                  <call function="latest">
                    <column table="kod_deb" column="dat_deb" />
                    <column table="kod_deb" column="dat_bzad" />
                  </call>
                  <call function="ym end day">
                    <column table="kod_sf_dop" column="rym" />
                  </call>
                </call>
                <call function="ym begin time">
                  <column table="kod_sf_dop" column="rym" />
                </call>
              </call>
              <call function="ym end day">
                <column table="kod_sf_dop" column="rym" />
              </call>
            </call>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="vid_real" />
              <const>2</const>
            </call>
            <call function="latest">
              <column table="kod_deb" column="dat_bzad" />
              <column table="kod_deb" column="dat_deb" />
            </call>
          </call>
          <call function="else">
            <call function="nvl">
              <column table="kod_deb" column="dat_bzad" />
              <call function="ym end day">
                <call function="ym add month">
                  <column table="a" column="ym" />
                  <const>1</const>
                </call>
              </call>
            </call>
          </call>
        </call>
        <call as="is_big_avans" function="if" type="number" title="Признак аванс больше чем 30, 40" comment="см. заявку 25547 " key="0">
          <call function="and">
            <call function="=0">
              <column table="this" column="vid_real" />
            </call>
            <call function="not in">
              <column table="kod_sf_dop" column="perc" />
              <call function="array">
                <const>30</const>
                <const>40</const>
              </call>
            </call>
            <call function="=1">
              <column table="kod_sf_dop" column="day" />
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="dat_ezad_kaz" function="case" type="date" title="Дата возникновения задолженности с учетом авансов 30,40% " comment="старый вариант, название неправильное, кое где используется, заменить на dat_bzad_uved_kaz_el?" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="perc" />
                <const>30</const>
              </call>
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="to_date">
              <call function="||">
                <call function="to_char">
                  <const>25</const>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="mes">
                    <column table="this" column="rym" />
                  </call>
                </call>
                <const>'.'</const>
                <call function="to_char">
                  <call function="year">
                    <call function="ym begin time">
                      <column table="this" column="rym" />
                    </call>
                  </call>
                </call>
              </call>
              <const>'dd.mm.yyyy'</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="this" column="vid_real" />
                <const>0</const>
              </call>
            </call>
            <call function="ym end time">
              <column table="this" column="rym" />
            </call>
          </call>
          <call function="else">
            <call function="ym end time">
              <call function="ym add month">
                <column table="this" column="ym" />
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <column table="sr_facras" column="nachisl" dgroup="sum" as="nachisl" key="0" />
        <column table="kod_sf_dop" column="rym" dgroup="min" dimension="ym_vozn2" as="rym" key="0" />
        <column table="kod_sf_dop" column="vid_t" dgroup="min" as="vid_t" key="0" />
        <call function="if" type="number" as="ym_vozn" dimension="ym_vozn" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <column table="this" column="rym" />
          <call function="nvl">
            <column table="kod_sf_old_neg" column="ym" />
            <column table="this" column="ym" />
          </call>
        </call>
        <call function="add_months" type="date" as="dat_vozn_otch" comment="Еще одна вариация при исправлении по 67698(1) " key="0">
          <call function="ym end time">
            <call function="nvl">
              <column table="kod_sf_old_neg" column="ym" />
              <column table="this" column="ym" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="nachisl_p" key="0">
          <call function="ge">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <call function="if" as="nachisl_m" key="0">
          <call function="lt">
            <column table="this" column="nachisl" />
            <const>0</const>
          </call>
          <column table="this" column="nachisl" />
        </call>
        <column table="this" column="ym" fact="sr_facvip_ym_min" as="ym_min" agg="min" title="Период начисления с" key="0" />
        <column table="this" column="ym" fact="sr_facvip_ym_max" as="ym_max" agg="max" title="Период начисления по" key="0" />
        <call as="dat_dolg_norm" function="if" type="date" dimension="dat_dolg_norm" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <column table="this" column="rym" />
          </call>
          <call type="" function="if">
            <call function="=">
              <column table="this" column="dat_zadol" />
              <call function="to_date">
                <call function="||">
                  <const>'31.12.'</const>
                  <call function="year">
                    <column table="this" column="dat_sf" />
                  </call>
                </call>
                <const>'DD.MM.YYYY'</const>
              </call>
            </call>
            <call function="ym end time">
              <call function="date to ym">
                <column table="this" column="dat_zadol" />
              </call>
            </call>
            <call function="if" as="" type="">
              <call function="and">
                <call function="=">
                  <column table="this" column="ym_vozn" />
                  <column table="this" column="ym" />
                </call>
                <call function="or">
                  <call function="gt">
                    <column table="kod_sf_dop" column="nachisl" />
                    <const>0</const>
                  </call>
                  <call function="is not null">
                    <column table="this" column="kod_sf_first" />
                  </call>
                </call>
              </call>
              <call function="ym end time">
                <call function="ym add month">
                  <column table="this" column="ym" />
                  <const>1</const>
                </call>
              </call>
              <call function="ym end time">
                <column table="this" column="ym" />
              </call>
            </call>
          </call>
        </call>
        <column table="this" column="dat_dolg_norm" dimension="dat_vozn_norm" as="dat_vozn_norm" key="0" />
        <call as="dat_ezad_norm" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="ym end time">
            <call function="ym add month">
              <column table="this" column="rym" />
              <const>1</const>
            </call>
          </call>
        </call>
        <call as="dat_ezad_uved_kaz_el" function="if" type="date" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <call function="date add days">
            <call function="ym end day">
              <column table="this" column="rym" />
            </call>
            <const>18</const>
          </call>
        </call>
        <call function="nvl" fact="sr_facvip_perc_sum" agg="sum" as="perc" key="0">
          <column table="kod_sf_dop" column="perc" />
          <column table="a" column="proc" />
        </call>
        <column table="kr_vist_day" column="perc" dgroup="min" as="perc1" comment="только для проверки расчета в sg_tel" key="0" />
        <column table="kod_sf_old" column="ym" as="sf_old_ym" key="0" />
        <call as="vid_real_no_av" function="if" type="date" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>0</const>
          </call>
          <const>null</const>
          <column table="this" column="vid_real" />
        </call>
        <call function="nvl" as="kod_sf_main" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="kod_sf_old_neg" column="kod_sf" />
          <column table="this" column="kod_sf" />
        </call>
        <column table="kod_sf_norm_av" column="kod_ur_state" dimension="kod_ur_state" as="kod_ur_state" key="0" is-fact-use="1" />
        <column table="kod_sf_dop" column="period" as="period" key="0" />
        <column table="kod_sf_dop" column="name" as="ras_name" key="0" />
        <call function="nvl" as="kod_sf_fm" comment="очередной вариант с перерасчетами код предыдущего сф если перерасчет на минус иначе свой" type="number" key="0">
          <column table="this" column="kod_sf_first" />
          <column table="this" column="kod_sf" />
        </call>
        <call as="kod_peni_sf" function="if" is-fact="1" fact="kod_peni_sf" agg="max" type="number" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>7</const>
          </call>
          <column table="a" column="kod_sf" />
        </call>
        <call as="dat_sf_recalc" function="if" type="date" is-private-dimension="dat_recalc" is-final-dimension="dat_recalc" dimension="dat_recalc" key="0">
          <call function="in">
            <column table="this" column="kniga" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
              <const>4</const>
            </call>
          </call>
          <query>
            <select>
              <column group="max" table="sqsr" column="dat_recalc" as="dat_recalc" />
            </select>
            <from>
              <query name="sr_recalc_sf" as="sqsrs">
                <link name="kod_recalc" as="sqsr" table="sr_recalc" child="sr_recalc_sf" field="kod_recalc" parent="sr_recalc" back="sr_recalc_sf" />
              </query>
            </from>
            <where>
              <call function="=">
                <column table="sqsrs" column="kod_sf" />
                <column table="a" column="kod_sf" />
              </call>
            </where>
          </query>
          <column table="this" column="dat_sf" />
        </call>
        <column table="kod_sf_text" column="data_gpz" as="data_gpz" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facvip" as="a">
          <dlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vr_pret_dolg_sf" table="vr_pret_dolg_sf" child="vr_pret_dolg_sf" field="kod_sf" parent="sr_facvip" back="vr_pret_dolg_sf">
            <dimlink name="vr_pret_dolg_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_facras" pushpred="1" as="sr_facras" table="sr_facras" child="sr_facras" field="kod_sf" parent="sr_facvip" back="sr_facras" />
          <dlink name="vv_all_deb_sf" as="vv_all_deb_sf" table="vv_all_deb_sf" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
            <dlink name="ur_dogplat" dimension="1" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat" />
          </dlink>
          <link name="kod_sf_dop" as="kod_sf_dop" table="sr_facvip_dop" child="sr_facvip" field="kod_sf_dop" parent="sr_facvip_dop" back="sr_facvip" />
          <link name="kod_dog" as="kod_dog1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_dogovor" child="sr_facvip" field="kod_dog" parent="kr_dogovor" back="sr_facvip" title="Договор">
            <dimlink name="kod_folders_kodp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <link name="kodp" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
            <dimlink name="ks_ministry" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_cls" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_fs" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_vdog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_istfin" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kk_active" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink title="Банк плательщика" is-private-dimension="1" is-final-dimension="1" dimension="1" name="kodb" />
            <dimlink name="kodbpol" title="Банк получателя" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_otrasl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_okved" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="ks_otrasl_root" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dep" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kr_podr" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dogpodr" title="Подразделение" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <dimlink name="kod_dogplat">
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_sogl" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_pretenz" dimension="1" is-final-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_stage_bk" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dimlink>
          <dlink name="qube_sf_graf" dimension="1" is-final-dimension="1" as="qube_sf_graf" table="qube_sf_graf" child="qube_sf_graf" field="kod_sf" parent="sr_facvip" back="qube_sf_graf" />
          <dlink name="sr_recalc_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="sr_recalc_sf" table="sr_recalc_sf" child="sr_recalc_sf" field="kod_sf" parent="sr_facvip" back="sr_recalc_sf">
            <dimlink name="sr_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query name="sr_facvip_text" as="kod_sf_text" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_text" column="kod_sf" />
          </call>
        </query>
        <query name="sk_vid_pl" as="vid_pl" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="vid_pl" />
            <column table="vid_pl" column="vid_pl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_facvip" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" dname="sr_facvip_r" join="left outer" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf_old" />
            <column table="kod_sf_old" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_first" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf_first" />
            <column table="kod_sf_first" column="kod_sf" />
          </call>
        </query>
        <query name="hr_bu_akt" as="kod_bu_akt" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_bu_akt" />
            <column table="kod_bu_akt" column="kod_bu_akt" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" dname="sr_facvip" join="left outer" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_facvip" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" title="Вид документа" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_facvip">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dimension="kod_deb" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip_dop" as="kod_sf_dop" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_dop" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_ret_inf" as="kod_sf_ret_inf" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_ret_inf" column="kod_sf" />
          </call>
        </query>
        <query name="vv_sr_facvip_rec_info_m" as="kod_sf_rec_info" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_rec_info" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_old_neg" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="kod_sf_rec_info" column="kod_sf_old_neg" />
            <column table="kod_sf_old_neg" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_main" as="kod_sf_main" join="left outer" dimension="1" dname="sr_facvip">
          <call function="=">
            <column table="this" column="kod_sf_main" />
            <column table="kod_sf_main" column="kod_sf" />
          </call>
        </query>
        <query name="sr_facvip_norm_av" as="kod_sf_norm_av" join="left outer" dname="sr_facvip">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_norm_av" column="kod_sf" />
          </call>
        </query>
        <query name="kr_vist_day" as="kr_vist_day" join="left outer" comment="только для проверки расчета в sg_tel" dname="sr_facvip">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_dog" />
              <column table="kr_vist_day" column="kod_dog" />
            </call>
            <call function="=">
              <column table="a" column="vist_day" />
              <column table="kr_vist_day" column="day" />
            </call>
            <call function="=">
              <column table="a" column="vid_avans" />
              <column table="kr_vist_day" column="vid_avans" />
            </call>
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_fm" join="left outer" dname="sr_facvip_fm">
          <call function="=">
            <column table="this" column="kod_sf_fm" />
            <column table="kod_sf_fm" column="kod_sf" />
          </call>
        </query>
      </from>
      <where>
        <call function="not in">
          <column table="a" column="vid_sf" />
          <call function="array">
            <const>2</const>
            <const>9</const>
          </call>
        </call>
      </where>
    </query>
    <query name="sr_facvip_ispr" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facvip_ispr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" as="kod_sf" key="1" fixed="1"></column>
        <column table="a" column="ispr_num" type="number" title="" as="ispr_num" key="0"></column>
        <column table="a" column="ispr_dat" type="date" title="" as="ispr_dat" key="0"></column>
        <column table="a" column="tip_dok" type="number" title="" as="tip_dok" key="0"></column>
        <column table="a" column="name_pole" type="string" title="" as="name_pole" key="0"></column>
        <column table="a" column="nazv_pole" type="string" title="" as="nazv_pole" key="0"></column>
        <column table="a" column="zn_old" type="string" title="" as="zn_old" key="0"></column>
        <column table="a" column="zn_new" type="string" title="" as="zn_new" key="0"></column>
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0"></column>
        <column table="a" column="kod" type="number" title="" comment="из ss_sf_ispr" as="kod" reference="ss_sf_ispr" refcol="kod" key="0"></column>
        <column table="a" column="ym" type="number" title="" comment="период исправления" as="ym" key="0"></column>
        <column table="a" column="kod_sf_old" type="number" comment="заполняется при &quot;испр-ии&quot; через фк" as="kod_sf_old" key="0"></column>
        <column table="a" column="kod_opl" type="number" comment="исправления сф по оплате" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0"></column>
        <call function="||" as="num_dat_full" type="string" title="Номер и дата исправления" key="0">
          <call function="to_char">
            <column table="a" column="ispr_num" />
          </call>
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="ispr_dat" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facvip_ispr" as="a"></table>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_facvip_ispr">
          <call function="=">
            <column table="a" column="kod_sf"></column>
            <column table="kod_sf" column="kod_sf"></column>
          </call>
        </query>
        <query name="ss_sf_ispr" as="kod" join="left outer" dname="sr_facvip_ispr">
          <call function="=">
            <column table="a" column="kod"></column>
            <column table="kod" column="kod"></column>
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_facvip_ispr">
          <call function="=">
            <column table="a" column="kod_opl"></column>
            <column table="kod_opl" column="kod_opl"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="sr_facvip_text" class="1" timestamp="06.09.2021 02:53:12" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_facvip_text.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" as="kod_sf" key="1" fixed="1" />
        <call function="if" type="number" as="pr_edo" key="0">
          <call function="=1">
            <column table="a" column="prizn_edo" />
          </call>
          <const>1</const>
        </call>
        <column table="a" column="name_pl" type="string" title="" as="name_pl" key="0" />
        <column table="a" column="adr_pl" type="string" title="" as="adr_pl" key="0" />
        <column table="a" column="inn_pl" type="string" title="" as="inn_pl" key="0" />
        <column table="a" column="ndog_pl" type="string" title="" as="ndog_pl" key="0" />
        <column table="a" column="kpp_pl" type="string" title="" as="kpp_pl" key="0" />
        <column table="a" column="datdog_pl" type="date" title="" as="datdog_pl" key="0" />
        <column table="a" column="name_pol" type="string" title="" as="name_pol" key="0" />
        <column table="a" column="adr_pol" type="string" title="" as="adr_pol" key="0" />
        <column table="a" column="inn_pol" type="string" title="" as="inn_pol" key="0" />
        <column table="a" column="kpp_pol" type="string" title="" as="kpp_pol" key="0" />
        <column table="a" column="name_otpr" type="string" title="" as="name_otpr" key="0" />
        <column table="a" column="adr_otpr" type="string" title="" as="adr_otpr" key="0" />
        <column table="a" column="name_pok" type="string" title="" as="name_pok" key="0" />
        <column table="a" column="adr_pok" type="string" title="" as="adr_pok" key="0" />
        <column table="a" column="kodbpl" type="number" title="" as="kodbpl" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="name_schet" type="string" title="" as="name_schet" key="0" />
        <column table="a" column="adr_schet" type="string" title="" as="adr_schet" key="0" />
        <column table="a" column="inn_schet" type="string" title="" as="inn_schet" key="0" />
        <column table="a" column="kpp_schet" type="string" title="" as="kpp_schet" key="0" />
        <column table="a" column="adr_pl_fact" type="string" title="" as="adr_pl_fact" key="0" />
        <column table="a" column="prichina" type="string" title="" comment="причина перепечатки документа" as="prichina" key="0" />
        <column table="a" column="period" type="string" title="" comment="вид(период) расчета" as="period" key="0" />
        <column table="a" column="kod_bu_akt" type="number" as="kod_bu_akt" reference="hr_bu_akt" refcol="kod_bu_akt" key="0" />
        <column table="a" column="name_pl_fact" type="string" title="" as="name_pl_fact" key="0" />
        <column table="a" column="inn_pl_fact" type="string" title="" as="inn_pl_fact" key="0" />
        <column table="a" column="kpp_pl_fact" type="string" title="" as="kpp_pl_fact" key="0" />
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" reference="ss_zadol_day" refcol="kod_bzad" key="0" />
        <column table="a" column="fio1" type="string" title="" as="fio1" key="0" />
        <column table="a" column="fio2" type="string" title="" as="fio2" key="0" />
        <column table="a" column="dol1" type="string" title="" as="dol1" key="0" />
        <column table="a" column="dol2" type="string" title="" as="dol2" key="0" />
        <column table="a" column="dover1" type="string" title="" as="dover1" key="0" />
        <column table="a" column="dover2" type="string" title="" as="dover2" key="0" />
        <column table="a" column="tel_pol" type="string" title="" as="tel_pol" key="0" />
        <column table="a" column="tel_pl" type="string" title="" as="tel_pl" key="0" />
        <column table="a" column="prim" type="string" title="" as="prim" key="0" />
        <column table="a" column="shapka" type="string" title="" comment="структура шапки для самого док-та" as="shapka" key="0" />
        <column table="a" column="shapka1" type="string" title="" comment="- &quot; - для печати сф в виде счета" as="shapka1" key="0" />
        <column table="a" column="pr_ann" type="number" title="" comment="1 - аннулированная сф" as="pr_ann" key="0" />
        <column table="a" column="fio1_akt" type="string" title="" comment="фио в акт" as="fio1_akt" key="0" />
        <column table="a" column="prefect" type="string" title="" comment="префектуры" as="prefect" key="0" />
        <column table="a" column="tel_otpr" type="string" title="" as="tel_otpr" key="0" />
        <column table="a" column="npp" type="number" title="" comment="сквозная нумерация-исходящий номер" as="npp" key="0" />
        <column table="a" column="pr_back" type="number" title="" comment="признак возврата потребителями подписанных первичных документов/ 0-нет/1-да/2-с разногласиями" as="pr_back" key="0" />
        <column table="a" column="num_sf_dop" type="string" title="" comment="&quot;/&quot;и цифры-дополнение к номеру сф" as="num_sf_dop" key="0" />
        <column table="a" column="inform" type="string" title="" comment="информ.надпись в подвал документа" as="inform" key="0" />
        <column table="a" column="ispr_num" type="number" title="" comment="номер исправления" as="ispr_num" key="0" />
        <column table="a" column="ispr_dat" type="date" title="" comment="дата исправления" as="ispr_dat" key="0" />
        <column table="a" column="ispr_num_osn" type="number" title="" comment="номер исправления исходной сф" as="ispr_num_osn" key="0" />
        <column table="a" column="ispr_dat_osn" type="date" title="" comment="дата исправления исходной сф" as="ispr_dat_osn" key="0" />
        <column table="a" column="lev_upd" type="number" title="" comment="1/2 - &quot;испр-я&quot; на низком уровне/из фк" as="lev_upd" key="0" />
        <column table="a" column="nachisl_minus_small" type="number" title="" as="nachisl_minus_small" key="0" />
        <column table="a" column="nal_minus_small" type="number" title="" comment="корр.сф-налог-уменьшение-короткая форма" as="nal_minus_small" key="0" />
        <column table="a" column="nachisl_plus_small" type="number" title="" comment="корр.сф-начисление-увеличение-короткая форма" as="nachisl_plus_small" key="0" />
        <column table="a" column="nal_plus_small" type="number" title="" comment="корр.сф-налог-увеличение-короткая форма" as="nal_plus_small" key="0" />
        <column table="a" column="nachisl_minus_big" type="number" title="" comment="корр.сф-начисление-уменьшение-длинная форма" as="nachisl_minus_big" key="0" />
        <column table="a" column="nal_minus_big" type="number" title="" comment="корр.сф-налог-уменьшение-длинная форма" as="nal_minus_big" key="0" />
        <column table="a" column="nachisl_plus_big" type="number" title="" comment="корр.сф-начисление-увеличение-длинная форма" as="nachisl_plus_big" key="0" />
        <column table="a" column="nal_plus_big" type="number" title="" comment="корр.сф-налог-увеличение-длинная форма" as="nal_plus_big" key="0" />
        <column table="a" column="nachisl_minus_min" type="number" title="" comment="корр.сф-начисление-уменьшение-минимальная форма" as="nachisl_minus_min" key="0" />
        <column table="a" column="nal_minus_min" type="number" title="" comment="корр.сф-налог-уменьшение-минимальная форма" as="nal_minus_min" key="0" />
        <column table="a" column="nachisl_plus_min" type="number" title="" comment="корр.сф-начисление-увеличение-минимальная форма" as="nachisl_plus_min" key="0" />
        <column table="a" column="nal_plus_min" type="number" title="" comment="корр.сф-налог-увеличение-минимальная форма" as="nal_plus_min" key="0" />
        <column table="a" column="size_doc" type="number" title="" comment="для книг сохранен размер документа 0/1/2-короткий/длинный/минимальный" as="size_doc" key="0" />
        <column table="a" column="kod_adr_pl" type="number" comment="код адреса грузополучателя" as="kod_adr_pl" key="0" />
        <column table="a" column="kod_adr_otpr" type="number" comment="код адреса грузоотправителя" as="kod_adr_otpr" key="0" />
        <column table="a" column="kod_adr_pol" type="number" comment="код адреса продавца" as="kod_adr_pol" key="0" />
        <column table="a" column="kod_edo_pol" type="number" comment="код оператора эдо, услугами которого пользуется продавец" as="kod_edo_pol" key="0" />
        <column table="a" column="kod_uch_edo_pol" type="string" comment="код участника, присваиваемый оператором эдо, услугами которого пользуется продавец" as="kod_uch_edo_pol" key="0" />
        <column table="a" column="kod_adr_pok" type="number" comment="код адреса покупателя" as="kod_adr_pok" key="0" />
        <column table="a" column="kod_edo_pok" type="number" comment="код оператора эдо, услугами которого пользуется покупатель" as="kod_edo_pok" reference="kk_edo" refcol="kod_edo" key="0" />
        <column table="kod_edo_pok" column="name_edo" as="name_edo_pok" key="0" />
        <column table="a" column="kod_uch_edo_pok" type="string" comment="код участника, присваиваемый оператором эдо, услугами которого пользуется продавец" as="kod_uch_edo_pok" key="0" />
        <column table="a" column="uch_num_sf_dop" type="string" title="" comment="постфикс для сф по постановке на учет" as="uch_num_sf_dop" key="0" />
        <column table="a" column="slovo_schet_i" type="string" title="" comment="обобщ.назв-е продавца(им.падеж)" as="slovo_schet_i" key="0" />
        <column table="a" column="slovo_fact_i" type="string" title="" comment="обобщ.назв-е покупателя(им.падеж)" as="slovo_fact_i" key="0" />
        <column table="a" column="slovo_schet_r" type="string" title="" comment="обобщ.назв-е продавца(им.падеж)" as="slovo_schet_r" key="0" />
        <column table="a" column="slovo_fact_r" type="string" title="" comment="обобщ.назв-е покупателя(им.падеж)" as="slovo_fact_r" key="0" />
        <column table="a" column="shapka_uch" type="string" title="" comment="&quot;шапка&quot; для сф по постановке на учет" as="shapka_uch" key="0" />
        <column table="a" column="kod_dopdoc" type="number" as="kod_dopdoc" reference="kr_dopdoc" refcol="kod_dopdoc" key="0" />
        <column table="a" column="podval" type="string" title="" comment="обычный док-т" as="podval" key="0" />
        <column table="a" column="podval_k" type="string" title="" comment="ксф и иксф" as="podval_k" key="0" />
        <column table="a" column="podval_uch" type="string" title="" comment="сф по постановке на учет" as="podval_uch" key="0" />
        <column table="a" column="gp" type="string" title="" comment="гарантир. поставщик в ун.счет" as="gp" key="0" />
        <column table="a" column="pol_rs" type="string" title="" as="pol_rs" key="0" />
        <column table="a" column="pol_ks" type="string" title="" as="pol_ks" key="0" />
        <column table="a" column="pol_bic" type="string" title="" as="pol_bic" key="0" />
        <column table="a" column="pol_bank_name" type="string" title="" as="pol_bank_name" key="0" />
        <column table="a" column="pol_bank_filial" type="string" title="" as="pol_bank_filial" key="0" />
        <column table="a" column="pl_rs" type="string" title="" as="pl_rs" key="0" />
        <column table="a" column="pl_ks" type="string" title="" as="pl_ks" key="0" />
        <column table="a" column="pl_bic" type="string" title="" as="pl_bic" key="0" />
        <column table="a" column="pl_bank_name" type="string" title="" as="pl_bank_name" key="0" />
        <column table="a" column="pl_bank_filial" type="string" title="" as="pl_bank_filial" key="0" />
        <column table="a" column="prizn_edo" type="number" as="prizn_edo" key="0" />
        <column table="a" column="data_gpz" type="date" as="data_gpz" key="0" />
        <column table="a" column="data_sudresh" type="date" as="data_sudresh" key="0" />
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_facvip_text" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="hr_bu_akt" as="kod_bu_akt" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kod_bu_akt" />
            <column table="kod_bu_akt" column="kod_bu_akt" />
          </call>
        </query>
        <query name="ss_zadol_day" as="kod_bzad" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kod_bzad" />
            <column table="kod_bzad" column="kod_bzad" />
          </call>
        </query>
        <query name="ks_bank" as="kodbpl" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kodbpl" />
            <column table="kodbpl" column="kodb" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="kr_dopdoc" as="kod_dopdoc" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kod_dopdoc" />
            <column table="kod_dopdoc" column="kod_dopdoc" />
          </call>
        </query>
        <query name="kk_edo" as="kod_edo_pok" join="left outer" dname="sr_facvip_text">
          <call function="=">
            <column table="a" column="kod_edo_pok" />
            <column table="kod_edo_pok" column="kod_edo" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_inkasso" class="1" timestamp="31.05.2016 20:49:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_inkasso.xml" haskeys="1">
      <select>
        <column table="a" column="kod_inkasso" type="number" comment="код инкассо" as="kod_inkasso" key="1" fixed="1" />
        <column table="a" column="dat" type="date" title="" comment="дата пакета" dimension="dat" as="dat" key="0" />
        <column table="a" column="summa" type="number" title="" comment="сумма инкассо" fact="sr_inkasso_sum" agg="sum" as="summa" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="kodbpol" type="number" title="" comment="код банка получателя" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_dep" refcol="kodp" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="num" type="string" title="" comment="№ пакета инкассо" fact="sr_inkasso_num" agg="max" as="num" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_inkasso" as="a" />
        <query name="ks_bankpol" as="kodbpol" join="left outer" dname="sr_inkasso">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="kr_dep" as="dep" join="left outer" dimension="1" dname="sr_inkasso">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_komiss" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_komiss.xml" haskeys="1">
      <select>
        <column table="a" column="kod_komiss" type="number" column-mandatory="1" as="kod_komiss" key="1" fixed="1" />
        <column table="a" column="komiss" type="number" title="" as="komiss" key="0" />
        <column table="a" column="dat" type="date" column-mandatory="1" title="" as="dat" key="0" />
        <column table="a" column="bank_pol" type="number" column-mandatory="1" title="" comment="получатель комиссии" as="bank_pol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="bank_pl" type="number" column-mandatory="1" title="" comment="плательщик комиссии" as="bank_pl" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="u_c" type="string" data-size="20" title="" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_komiss" as="a" />
        <query name="ks_bankpol" as="bank_pl" join="left outer" dname="sr_komiss">
          <call function="=">
            <column table="a" column="bank_pl" />
            <column table="bank_pl" column="kodbpol" />
          </call>
        </query>
        <query name="ks_bankpol" as="bank_pol" join="left outer" dname="sr_komiss">
          <call function="=">
            <column table="a" column="bank_pol" />
            <column table="bank_pol" column="kodbpol" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_nakopit_teplo" class="1" timestamp="27.12.2022 20:53:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_nakopit_teplo.xml" haskeys="1">
      <select>
        <column table="a" column="a1" type="string" title="№ дог" comment="№ договора тэ" data-size="30" as="a1" />
        <column table="a" column="a13" type="date" title="" comment="дата заключения договора" as="a13" />
        <column table="a" column="a2" type="string" title="" comment="№ договора ээ" data-size="7" as="a2" />
        <column table="a" column="a9" type="string" title="Наименование потребителя" comment="наименование абонента" data-size="200" as="a9" />
        <column table="a" column="b1" type="number" title="" comment="код бюджета" as="b1" />
        <column table="a" column="budget" type="string" title="Бюджет" comment="бюджет" data-size="100" as="budget" />
        <column table="a" column="a27" type="number" title="" comment="код группы потребления" as="a27" />
        <column table="a" column="consumer" type="string" title="Потребители" comment="группа потребления" data-size="200" as="consumer" />
        <column table="a" column="a28" type="number" title="" comment="код административного р-на" as="a28" />
        <column table="a" column="district" type="string" title="" comment="административный район" data-size="150" as="district" />
        <column table="a" column="inn" type="string" title="ИНН" comment="инн" data-size="15" as="inn" />
        <column table="a" column="a17" type="number" title="" comment="код банка" as="a17" />
        <column table="a" column="bank" type="string" title="" comment="банк" data-size="150" as="bank" />
        <column table="a" column="c86" type="string" title="" comment="кор/счет" data-size="20" as="c86" />
        <column table="a" column="a18" type="string" title="" comment="расчетный счет" data-size="20" as="a18" />
        <column table="a" column="c85" type="string" title="" comment="бик" data-size="13" as="c85" />
        <column table="a" column="okonx" type="string" title="" comment="оконх" data-size="6" as="okonx" />
        <column table="a" column="okpo" type="string" title="" comment="окпо" data-size="8" as="okpo" />
        <column table="a" column="a10" type="string" title="Юр. адрес абонента" comment="адрес" data-size="250" as="a10" />
        <column table="a" column="a11" type="string" title="" comment="телефон" data-size="250" as="a11" />
        <column table="a" column="dog1" type="number" title="" comment="договорная величина (гкал)" as="dog1" />
        <column table="a" column="dog2" type="number" title="" comment="договорная величина (гкал/ч)" as="dog2" />
        <column table="a" column="w16" type="number" title="Тепловая энергия (Гкал)" comment="за теплоэнергию (гкал)" as="w16" />
        <column table="a" column="w17" type="number" title="Начислено за Тепловую энергию (без НДС, руб)" comment="за теплоэнергию (без ндс, руб)" as="w17" />
        <column table="a" column="w18" type="number" title="Теплоноситель в виде пара (м3)" comment="за невозврат конд-та (тонн)" as="w18" />
        <column table="a" column="w19" type="number" title="Начислено за теплоноситель в виде пара (без НДС, руб)" comment="за невозврат конд-та (без ндс, руб)" as="w19" />
        <column table="a" column="w20" type="number" title="" comment="за доочистку конд-та (тонн)" as="w20" />
        <column table="a" column="w21" type="number" title="" comment="за доочистку конд-та (без ндс, руб)" as="w21" />
        <column table="a" column="w22" type="number" title="Теплоноситель (м3)" comment="за утечку теплоносителя (тонн)" as="w22" />
        <column table="a" column="w23" type="number" title="Начислено за теплоноситель (без НДС, руб)" comment="за утечку теплоносителя (без ндс, руб)" as="w23" />
        <column table="a" column="w24" type="number" title="" comment="всего без ндс (руб)" as="w24" />
        <column table="a" column="w25" type="number" title="" comment="ндс (руб)" as="w25" />
        <column table="a" column="w26" type="number" title="" comment="всего с ндс (руб)" as="w26" />
        <column table="a" column="p364" type="number" title="" comment="долг по пеням на начало месяца (руб)" as="p364" />
        <column table="a" column="w34" type="number" title="Задолж. с учет. аванс. платежей на нач. периода" comment="долг на начало месяца (общий, руб)" as="w34" />
        <column table="a" column="w34r" type="number" title="" comment="долг на начало месяца (реструктурированный, руб)" as="w34r" />
        <column table="a" column="w34t" type="number" title="" comment="долг на начало месяца (текущий, руб)" as="w34t" />
        <column table="a" column="w35t" type="number" title="" comment="всего (руб)" as="w35t" />
        <column table="a" column="w36t" type="number" title="" comment="деньги (руб)" as="w36t" />
        <column table="a" column="w37t" type="number" title="" comment="взаимозачеты (руб)" as="w37t" />
        <column table="a" column="w38t" type="number" title="" comment="векселя (руб)" as="w38t" />
        <column table="a" column="w39t" type="number" title="" comment="жетоны, чеки (руб)" as="w39t" />
        <column table="a" column="w391t" type="number" title="" comment="прочие (руб)" as="w391t" />
        <column table="a" column="w35r" type="number" title="" comment="всего (руб)" as="w35r" />
        <column table="a" column="w36r" type="number" title="" comment="деньги (руб)" as="w36r" />
        <column table="a" column="w37r" type="number" title="" comment="взаимозачеты (руб)" as="w37r" />
        <column table="a" column="w38r" type="number" title="" comment="векселя (руб)" as="w38r" />
        <column table="a" column="w39r" type="number" title="" comment="жетоны, чеки (руб)" as="w39r" />
        <column table="a" column="w391r" type="number" title="" comment="прочие (руб)" as="w391r" />
        <column table="a" column="w35" type="number" title="Оплата энергии (объем поступ. платежей потр-ей за период)" comment="всего (руб)" as="w35" />
        <column table="a" column="w36" type="number" title="" comment="деньги (руб)" as="w36" />
        <column table="a" column="w37" type="number" title="" comment="взаимозачеты (руб)" as="w37" />
        <column table="a" column="w38" type="number" title="" comment="векселя (руб)" as="w38" />
        <column table="a" column="w39" type="number" title="" comment="жетоны, чеки (руб)" as="w39" />
        <column table="a" column="w391" type="number" title="" comment="прочие (руб)" as="w391" />
        <column table="a" column="w40" type="number" title="" comment="долг на конец месяца (общий, руб)" as="w40" />
        <column table="a" column="w40r" type="number" title="" comment="долг на конец месяца (реструктурированный, руб)" as="w40r" />
        <column table="a" column="w40t" type="number" title="" comment="долг на конец месяца (текущий годовой, руб)" as="w40t" />
        <column table="a" column="w54" type="number" title="" comment="начислено пени без ндс (руб)" as="w54" />
        <column table="a" column="p264" type="number" title="" comment="начислено пени без ндс (руб)" as="p264" />
        <column table="a" column="w55" type="number" title="" comment="оплачено пени без ндс (руб)" as="w55" />
        <column table="a" column="p164" type="number" title="" comment="оплачено пени без ндс (руб)" as="p164" />
        <column table="a" column="idpowsale" type="number" title="" comment="идентификатор отделений энергосбыта" as="idpowsale" />
        <column table="a" column="powsale" type="string" title="Отделение" comment="отделения энергосбыта" data-size="200" as="powsale" />
        <column table="a" column="idpeo" type="number" title="" comment="идентификатор предприятий пэо" as="idpeo" />
        <column table="a" column="peo" type="string" title="" comment="предприятия пэо" data-size="200" as="peo" />
        <column table="a" column="t10" type="number" title="" comment="идентификатор отраслей промышленности" as="t10" />
        <column table="a" column="branch" type="string" title="Отрасль" comment="отрасли промышленности" data-size="200" as="branch" />
        <column table="a" column="idminist" type="number" title="" comment="идентификатор министерств" as="idminist" />
        <column table="a" column="minist" type="string" title="" comment="министерства" data-size="100" as="minist" />
        <column table="a" column="a3" type="string" title="" comment="унифицированный код договора" data-size="29" as="a3" />
        <column table="a" column="data" type="date" title="" comment="дата создания накопительной ведомости" as="data" />
        <column table="a" column="ndog" type="string" title="" comment="общий  № договора по тэ (для объединения договоров теплоэнергия+пар)" data-size="50" as="ndog" />
        <column table="a" column="priz" type="string" title="" comment="признак (т - теплоэнергия, п - пар)" data-size="1" as="priz" />
        <column table="a" column="brig" type="string" title="" comment="код бригады" data-size="25" as="brig" />
        <column table="a" column="appsum" type="number" title="" comment="допсуммы перерасчета" as="appsum" />
        <column table="a" column="w41" type="number" title="" comment="за превышен t обратн сетев воды (гкал)" as="w41" />
        <column table="a" column="w42" type="number" title="" comment="за превышен t обратн сетев воды (без ндс, руб)" as="w42" />
        <column table="a" column="w43" type="number" title="" comment="за сверхнормативную утечку (тонн)" as="w43" />
        <column table="a" column="w44" type="number" title="" comment="за сверхнормативную утечку (без ндс, руб)" as="w44" />
        <column table="a" column="w45" type="number" title="" comment="за самовольный пуск тепла (гкал)" as="w45" />
        <column table="a" column="w46" type="number" title="" comment="за самовольный пуск тепла (без ндс, руб)" as="w46" />
        <column table="a" column="w47" type="number" title="" comment="за невозврат конд-та (тонн)" as="w47" />
        <column table="a" column="w48" type="number" title="" comment="за невозврат конд-та (без ндс, руб)" as="w48" />
        <column table="a" column="w49" type="number" title="" comment="за превышен дог макс часовой нагрузки (гкал/ч)" as="w49" />
        <column table="a" column="w50" type="number" title="" comment="за превышен дог макс часовой нагрузки (без ндс, руб)" as="w50" />
        <column table="a" column="w52" type="number" title="" comment="оплачено по актам нарушений (гкал, тонн)" as="w52" />
        <column table="a" column="w53" type="number" title="" comment="оплачено по актам нарушений (руб)" as="w53" />
        <column table="a" column="resh" type="string" title="" comment="решение" data-size="10" as="resh" />
        <column table="a" column="kod_dog" type="number" comment="код договора" is-private-dimension="kod_dog" is-final-dimension="kod_dog" dimension="kod_dog" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" />
        <column table="a" column="nump" type="string" title="" data-size="15" as="nump" />
        <column table="a" column="a931" type="number" title="" as="a931" />
        <column table="a" column="a932" type="number" title="" as="a932" />
        <column table="a" column="av_n" type="number" title="" as="av_n" />
        <column table="a" column="av_o" type="number" title="" as="av_o" />
        <column table="a" column="av_d" type="number" title="" as="av_d" />
        <column table="a" column="kr_dn" type="number" title="" as="kr_dn" />
        <column table="a" column="kr_n" type="number" title="Зачтено в реализ. ранее получ. авансов" as="kr_n" />
        <column table="a" column="kr_o" type="number" title="Авансы, получ. за период" as="kr_o" />
        <column table="a" column="kr_dk" type="number" title="" as="kr_dk" />
        <column table="a" column="a933" type="number" title="" as="a933" />
        <column table="a" column="a934" type="number" title="" as="a934" />
        <column table="a" column="deb_n" type="number" title="" as="deb_n" />
        <column table="a" column="deb_o" type="number" title="" as="deb_o" />
        <column table="a" column="deb_dk" type="number" title="" as="deb_dk" />
        <column table="a" column="fakto_d6" type="number" title="" as="fakto_d6" />
        <column table="a" column="fakto_c6" type="number" title="" as="fakto_c6" />
        <column table="a" column="fakto_t6" type="number" title="" as="fakto_t6" />
        <column table="a" column="fakt_d6" type="number" title="" as="fakt_d6" />
        <column table="a" column="fakt_c6" type="number" title="" as="fakt_c6" />
        <column table="a" column="fakt_t6" type="number" title="" as="fakt_t6" />
        <column table="a" column="faktom_t6" type="number" title="" as="faktom_t6" />
        <column table="a" column="sost" type="string" title="" data-size="7" as="sost" />
        <column table="a" column="pp_dn" type="number" title="" as="pp_dn" />
        <column table="a" column="pp_n" type="number" title="" as="pp_n" />
        <column table="a" column="pp_o" type="number" title="" as="pp_o" />
        <column table="a" column="pp_dk" type="number" title="" as="pp_dk" />
        <column table="a" column="appsumg" type="number" title="" comment="перерасчет за теплоэнергию в гкал" as="appsumg" />
        <column table="a" column="appsumt" type="number" title="" comment="перерасчет за теплоэнергию в тоннах" as="appsumt" />
        <column table="a" column="appsumbn" type="number" title="" comment="сумма перерасчета без ндс в руб." as="appsumbn" />
        <column table="a" column="appsumn" type="number" title="" comment="сумма ндс перерасчета в руб." as="appsumn" />
        <column table="a" column="wgk" type="number" title="Горячая вода (компонент тепловая энергия) (Гкал)" comment="тепловая энергия на гвс гкал" as="wgk" />
        <column table="a" column="wgr" type="number" title="Начислено за Горячую воду (компонент тепловая энергия) (без НДС, руб)" comment="тепловая энергия на гвс начислено без ндс руб." as="wgr" />
        <column table="a" column="wkm" type="number" title="Горячая вода (компонент теплоноситель) (м3)" comment="теплоноситель на гвс куб.м" as="wkm" />
        <column table="a" column="wkr" type="number" title="Начислено за горячую воду (компонент теплоноситель) (без НДС, руб)" comment="теплоноситель на гвс начислено без ндс руб." as="wkr" />
        <column table="a" column="wchkub" type="number" title="Горячая вода (компонент холодная вода), (м3)" comment="холодная вода на гвс куб.м" as="wchkub" />
        <column table="a" column="wchrub" type="number" title="Начислено за Горячую воду (компонент холодная вода) (без НДС, руб)" comment="холодная вода на гвс начислено без ндс руб." as="wchrub" />
        <column table="a" column="ym" type="number" title="Период" comment="отчетный период" is-private-dimension="ym" is-final-dimension="ym" dimension="ym" as="ym" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_org" refcol="kodp" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" />
        <column table="a" column="pr_krup" type="number" title="" as="pr_krup" />
        <column table="a" column="nach_kpov" type="number" title="Сумма Кпов (без НДС, руб)" as="nach_kpov" />
        <call function="rowid" as="sr_nakopit_teplo_id" key="1" />
        <column table="a" column="sverh_dolg_beg" type="number" title="Сверхнормативная задолженность на начало периода" comment="Сверхнормативная задолженность на начало периода 43125(1)" as="sverh_dolg_beg" />
        <column table="a" column="sverh_dolg_end" type="number" title="Сверхнормативная задолженность на конец периода" comment="Сверхнормативная задолженность на конец периода 43125(1)" is-fact="1" agg="sum" fact="sr_nak_tep_sv_dolg_end" as="sverh_dolg_end" />
        <column table="a" column="w60" type="number" title="РМ" comment="за РМ" as="w60" />
        <column table="a" column="w61" type="number" title="Начислено за услуги по поддержанию резервной мощности (без НДС, руб.)" comment="за РМ (без ндс, руб)" as="w61" />
        <column table="a" column="arealiv" type="number" title="Площадь жилых помещений, теплоснабжение которых осуществляется по тепловым сетям АО &quot;Татэнерго&quot; (м2)" comment="площади жилых помещений" as="arealiv" />
        <column table="a" column="areanotliv" type="number" title="Площадь нежилых помещений, теплоснабжение которых осуществляется по тепловым сетям АО &quot;Татэнерго&quot; (м2)" comment="площади жилых помещений" as="areanotliv" />
        <column table="a" column="gor_voda_m3" type="number" title="Горячая вода, (м3)" comment="Горячая вода, (м3)" as="gor_voda_m3" />
        <column table="a" column="gor_voda_rub" type="number" title="Начислено за Горячую воду (без НДС, руб)" comment="Начислено за Горячую воду (без НДС, руб)" as="gor_voda_rub" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_nakopit_teplo" as="a" />
        <query name="kr_org" as="dep" join="left outer" dname="sr_nakopit_teplo">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_nakopit_teplo" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl" class="1" timestamp="06.07.2018 17:51:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер платежного документа" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="Период оплаты" dimension="ym" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="Номер СФ" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="opls" type="number" title="" as="opls" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата платежного документа" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_dog_r" type="number" as="kod_dog_r" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="nom_sf" type="string" title="Номер СФ" comment="полный номер сф по оплате для печати" as="nom_sf" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="кем добавлено" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда добавлено" as="d_c" key="0" />
        <column table="a" column="dat_uch" type="date" title="" as="dat_uch" key="0" />
        <column table="a" column="pr_not_in_graf" type="number" title="Не учитывать в ГПЗ" controlType="UICheck" as="pr_not_in_graf" key="0" />
        <call function="if" as="opl_kred" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="opl" />
        </call>
        <column table="this" column="dat_uch" as="dat_oper" dimension="dat" key="0" />
        <column table="a" column="dat_graf" as="dat_oper_graf" dimension="dat_graf" key="0" />
        <call function="date to ym" as="ym_bank" type="number" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="+nvl" as="oplf" fact="opl" agg="sum" title="Оплачено" key="0">
          <column table="a" column="opl" />
          <column table="a" column="opls" />
        </call>
        <call function="if" as="opl_sf_out_spis" key="0">
          <call function="is null">
            <column table="this" column="pr_spis_tt" />
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="if" as="opl_sf_spis" key="0">
          <call function="=">
            <column table="this" column="pr_spis_tt" />
            <const>1</const>
          </call>
          <column table="this" column="oplf" />
        </call>
        <call function="-nvl" as="oplf_nonal" fact="opl_nonal" agg="sum" title="Оплачено без налога" key="0">
          <column table="this" column="oplf" />
          <column table="this" column="nal" />
        </call>
        <column table="kod_parent" column="ym" as="parent_ym" key="0" />
        <column table="storno_tek" column="oplf" dgroup="sum" as="storno_tek" title="Сумма оплаты (руб.)" key="0" />
        <call function="if" as="opl_sled" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <call function="+nvl">
            <column table="this" column="opl" />
            <column table="this" column="storno_tek" />
          </call>
        </call>
        <call function="case" as="kod_type_opl2" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>0</const>
              </call>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="=">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>2</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="in">
                <column table="a" column="kod_type_opl" />
                <call function="array">
                  <const>3</const>
                  <const>4</const>
                </call>
              </call>
              <call function="gt">
                <column table="a" column="ym" />
                <column table="this" column="parent_ym" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="sr_opl_nal" column="nal" title="Налоги, руб." as="nal" key="0" />
        <call function="nvl" as="dat_dog_edit" title="Дата редакции договора" class-title="Договор" key="0">
          <column table="kod_opl_text" column="datdog_pl" />
          <column table="kod_sf_text" column="datdog_pl" />
        </call>
        <column table="sr_recalc_opl" column="kod_recalc" as="kod_recalc" key="0" />
        <column table="kod_sf" column="dat_bzad" as="sf_dat_bzad" key="0" />
        <column as="dat_ur" table="a" column="dat_opl" dimension="dat_ur" key="0" />
        <column as="dat_ur_ent" table="a" column="dat_opl" dimension="dat_ur_ent" key="0" />
        <column table="this" column="ym" as="ym_graf" dimension="ym_graf" key="0" />
        <call function="nvl" type="number" as="ym_root" key="0">
          <column table="kod_opl_root" column="ym" />
          <column table="this" column="ym" />
        </call>
        <call function="nvl" type="number" as="kod_opl_recalc_root" key="0">
          <column table="kod_opl_root" column="kod_opl" />
          <column table="this" column="kod_opl" />
        </call>
        <column as="dat_opl_max" table="a" column="dat_opl" fact="sr_opl_dat_opl_max" agg="max" key="0" />
        <call function="if" type="number" as="vid_real_no_av" dimension="vid_real_no_av" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>0</const>
          </call>
          <const>2</const>
          <column table="a" column="vid_real" />
        </call>
        <call function="if" as="pr_spis_tt" type="number" key="0">
          <call function="or">
            <call function="like">
              <column table="kod_vidopl" column="abbr" />
              <const>'SPS%'</const>
            </call>
            <call function="like">
              <column table="kodbpol" column="rs" />
              <const>'%Списание деб%'</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <column table="kod_sf_text" column="pr_edo" as="pr_edo" key="0" />
        <column table="kod_sf_text" column="name_edo_pok" as="name_edo_pok" key="0" />
        <call function="nvl" as="kod_opl_main" key="0">
          <column table="a" column="kod_parent" />
          <column table="a" column="kod_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_opl" as="a">
          <link name="kod_parent" as="kod_parent1" table="sr_opl" child="sr_opl" field="kod_parent" parent="sr_opl" back="sr_opl" />
          <link name="kod_link" as="kod_link1" table="sr_opl_bank" child="sr_opl" field="kod_link" parent="sr_opl_bank" back="sr_opl">
            <link name="kodbpol" as="kodbpol" table="ks_bankpol" child="sr_opl_bank" field="kodbpol" parent="ks_bankpol" back="sr_opl_bank" />
          </link>
          <link name="kod_opl_text" as="kod_opl_text1" table="sr_opl_text" child="sr_opl" field="kod_opl_text" parent="sr_opl_text" back="sr_opl" />
          <link name="kod_sf" as="kod_sf1" table="sr_facvip" child="sr_opl" field="kod_sf" parent="sr_facvip" back="sr_opl">
            <link name="kod_sf_text" as="kod_sf_text" table="sr_facvip_text" child="sr_facvip" field="kod_sf_text" parent="sr_facvip_text" back="sr_facvip" />
          </link>
          <slink name="sr_opl_nal" as="sr_opl_nal" table="sr_opl_nal" />
          <dlink name="storno" as="storno_tek" pushpred="1" table="sr_opl" child="sr_opl" field="kod_parent_kred" parent="sr_opl" back="storno">
            <where>
              <call function="=">
                <column table="a" column="ym" />
                <column table="storno_tek" column="ym" />
              </call>
            </where>
          </dlink>
          <link name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info1" table="sr_opl_recalc_tree_info" child="sr_opl" field="sr_opl_recalc_tree_info" parent="sr_opl_recalc_tree_info" back="sr_opl">
            <link name="kod_opl_root" as="kod_opl_root" table="sr_opl" child="sr_opl_recalc_tree_info" field="kod_opl_root" parent="sr_opl" back="sr_opl_recalc_tree_info" />
          </link>
          <link name="kod_dog" as="kod_dog1" table="kr_dogovor" child="sr_opl" field="kod_dog" parent="kr_dogovor" back="sr_opl" title="Договор">
            <link name="kod_dep" dimension="1" as="kod_dep" table="kr_dep" child="kr_dogovor" field="kod_dep" parent="kr_dep" back="kr_dogovor" />
            <link name="kodp" dimension="1" as="kodp" table="kr_payer" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Абонент" />
          </link>
          <dlink name="sr_recalc_opl" as="sr_recalc_opl2" table="sr_recalc_opl" child="sr_recalc_opl" field="kod_opl" parent="sr_opl" back="sr_recalc_opl">
            <link name="kod_recalc" as="kod_recalc2" table="sr_recalc" child="sr_recalc_opl" field="kod_recalc" parent="sr_recalc" back="sr_recalc_opl">
              <link name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vid_recalc" table="ss_vid_recalc" child="sr_recalc" field="vid_recalc" parent="ss_vid_recalc" back="sr_recalc" />
            </link>
          </dlink>
        </table>
        <query name="sr_opl_text" as="kod_opl_text" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_text" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_opl_uo">
          <call function="=">
            <column table="a" column="kod_sf_uo" />
            <column table="kod_sf_uo" column="kod_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dimension="kod_type_opl" dname="sr_opl" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="sr_opl" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" dname="sr_opl" join="left outer" dimension="kod_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dimension="1" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_opl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dimension="1" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" dname="sr_opl" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_r" join="left outer" dname="sr_opl" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_r" />
            <column table="kod_dog_r" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_parent_kred" dname="storno" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
        <query name="sr_recalc_opl" as="sr_recalc_opl" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_recalc_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_recalc_tree_info" as="sr_opl_recalc_tree_info" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="sr_opl_recalc_tree_info" column="kod_opl" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_main" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="a" column="kod_opl_main" />
            <column table="kod_opl_main" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl_recalc_root" join="left outer" dname="sr_opl">
          <call function="=">
            <column table="this" column="kod_opl_recalc_root" />
            <column table="kod_opl_recalc_root" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl_bank" class="1" timestamp="13.01.2021 12:46:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_opl_bank.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" as="kod_link" key="1" fixed="1" />
        <column table="a" column="kodbpol" type="number" title="" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="pname" type="string" title="Плательщик" as="pname" key="0" />
        <column table="a" column="paccount" type="string" title="" as="paccount" key="0" />
        <column table="a" column="inn" type="string" title="" as="inn" key="0" />
        <column table="a" column="dat_opl" type="date" title="Дата оплаты" dimension="dat" comment="дата поступления оплаты (т. е. момент когда об оплате стало известно энергосбыту)" as="dat_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="Номер документа оплаты" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Сумма оплаты (руб.)" fact="sr_opl_bank_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ndog" type="string" title="" comment="номер договора" as="ndog" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_pl" type="number" title="" as="num_pl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="pr_raznos" type="number" title="" as="pr_raznos" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="remark" type="string" title="Назначение платежа" as="remark" key="0" />
        <column table="a" column="ym_vyp" type="number" title="" comment="период выписки (yyyy.mm)" as="ym_vyp" key="0" />
        <column table="a" column="tek_pok" type="number" title="" as="tek_pok" key="0" />
        <column table="a" column="pred_pok" type="number" title="" as="pred_pok" key="0" />
        <column table="a" column="rashod" type="number" title="" as="rashod" key="0" />
        <column table="a" column="kod_dest" type="number" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="pr_kvit" type="number" title="" comment="исключить из выписки (юл)" as="pr_kvit" key="0" />
        <column table="a" column="kod_pach" type="number" as="kod_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="ym_vyp_po" type="number" title="" as="ym_vyp_po" key="0" />
        <column table="a" column="u_c" type="string" title="" comment="владелец записи" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" comment="когда создано" as="d_c" key="0" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0" />
        <column table="a" column="kodb" type="number" title="" comment="банк-источник " as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_fact" type="date" title="Дата платежа" comment="фактическая дата оплаты (т.к. момент когда абонент перечислил деньги)" as="dat_fact" key="0" />
        <column table="a" column="pr_imported" type="number" title="" comment="признак импортированной оплаты. 1 - строка была импортирована; 0 - заведена в асусэ" as="pr_imported" key="0" />
        <column table="a" column="vid_sf" type="number" title="" comment="вид счета-фактуры для переплаты" as="vid_sf" reference="sk_vid_sf" refcol="vid_sf" key="0" />
        <column table="a" column="npp" type="number" title="" comment="номер по порядку оплаты внутри выписки" as="npp" key="0" />
        <column table="a" column="kod_kazn" type="number" comment="код казначейства, если абонент платит через казначейство" as="kod_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="kod_sr_pach" type="number" comment="ссылка на код пачки (юрлица). это не совсем пачка, а скорее файл с оплатами - по ним надо держать кое-какую статистику" as="kod_sr_pach" reference="sr_pach" refcol="kod_pach" key="0" />
        <column table="a" column="prim" type="string" title="" comment="дополнительные отметки" as="prim" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="тариф, на который должна быть повешена оплата" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="num_delo" type="string" title="" comment="номер судебного приказа для оплат судебной задолженности (служба судебных приставов)" as="num_delo" key="0" />
        <column table="a" column="raznos_type" type="number" title="" comment="тип разноса: null - не разнесено, 0 - неизвестный, 1 - автоматический разнос, 2 - ручной разнос, 3 - автоматическая балансировка, 4 - ручная балансировка" as="raznos_type" key="0" />
        <column table="a" column="check_num" type="number" title="" comment="номер фискального чека" as="check_num" key="0" />
        <column table="a" column="kod_mat" type="number" comment="связь с иском (переплаты по гп, владивосток)" as="kod_mat" key="0" />
        <column table="a" column="parse_result" type="clob" title="" comment="результат разбора назначения платежа в виде xml" as="parse_result" key="0" />
        <column table="a" column="num_isp" type="string" title="" comment="номер исполнительного листа, распарсенный из назначения платежа" as="num_isp" key="0" />
        <column table="a" column="ym_vyp_txt" type="string" title="" comment="период выписки (текст)" as="ym_vyp_txt" key="0" />
        <call function="date to ym" as="ym_opl" key="0">
          <column table="this" column="dat_opl" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_opl_bank" as="a">
          <dlink name="sr_opl_bank_main" dimension="1" as="sr_opl_bank_main" table="sr_opl_bank_main" child="sr_opl_bank_main" field="kod_opl_bank" parent="sr_opl_bank" back="sr_opl_bank_main" />
          <dlink name="sv_opl_bank_dep" as="sv_opl_bank_dep" table="sv_opl_bank_dep" child="sv_opl_bank_dep" field="kod_link" parent="sr_opl_bank" back="sv_opl_bank_dep">
            <link name="dep" dimension="1" as="dep" table="kr_dep" child="sv_opl_bank_dep" field="dep" parent="kr_dep" back="sv_opl_bank_dep" />
          </dlink>
          <link name="kodp" as="kodp" table="kr_payer" child="sr_opl_bank" field="kodp" parent="kr_payer" back="sr_opl_bank" title="Абонент">
            <dlink name="kr_dogovor" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
        </table>
        <query name="sk_vid_sf" as="vid_sf" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="vid_sf" />
            <column table="vid_sf" column="vid_sf" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dimension="1" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="sr_opl_bank" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_parent" join="left outer" dname="sr_opl_bank_parent">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_link" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_kazn" join="left outer" dname="sr_opl_bank" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="sr_pach" as="kod_sr_pach" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_sr_pach" />
            <column table="kod_sr_pach" column="kod_pach" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="sr_opl_bank" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="sr_pach" as="kod_pach" join="left outer" dname="sr_opl_bank">
          <call function="=">
            <column table="a" column="kod_pach" />
            <column table="kod_pach" column="kod_pach" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="sr_opl_bank" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl_nal" class="1" timestamp="20.11.2017 18:53:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_opl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" />
        <column table="a" column="tax" type="number" title="" as="tax" />
        <column table="a" column="nal" type="number" title="" as="nal" />
        <column table="a" column="pr_add" type="number" title="" as="pr_add" />
        <call function="||-" as="sr_opl_nal_id" key="1">
          <call function="to_char">
            <column table="a" column="kod_naltax" />
          </call>
          <call function="to_char">
            <column table="a" column="kod_opl" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sr_opl_nal" as="a" />
        <query name="ss_nalog_tax" as="kod_naltax" join="left outer" dname="sr_opl_nal">
          <call function="=">
            <column table="a" column="kod_naltax" />
            <column table="kod_naltax" column="kod_naltax" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_opl_nal">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="sr_opl_nal">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_opl_text" class="1" timestamp="06.07.2018 18:17:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_opl_text.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="prim" type="string" title="Примечания к разносу оплаты" is-fact="1" agg="max" as="prim" fact="sr_opl_text_prim" key="0" />
        <column table="a" column="name_pl" type="string" title="" comment="грузополучатель" as="name_pl" key="0" />
        <column table="a" column="adr_pl" type="string" title="" comment="грузополучатель" as="adr_pl" key="0" />
        <column table="a" column="name_pok" type="string" title="" comment="покупатель" as="name_pok" key="0" />
        <column table="a" column="adr_pok" type="string" title="" comment="покупатель" as="adr_pok" key="0" />
        <column table="a" column="inn_pl" type="string" title="" comment="покупатель" as="inn_pl" key="0" />
        <column table="a" column="kpp_pl" type="string" title="" comment="покупатель" as="kpp_pl" key="0" />
        <column table="a" column="name_otpr" type="string" title="" comment="грузоотправитель" as="name_otpr" key="0" />
        <column table="a" column="adr_otpr" type="string" title="" comment="грузоотправитель" as="adr_otpr" key="0" />
        <column table="a" column="name_pol" type="string" title="" comment="продавец" as="name_pol" key="0" />
        <column table="a" column="adr_pol" type="string" title="" comment="продавец" as="adr_pol" key="0" />
        <column table="a" column="inn_pol" type="string" title="" comment="продавец" as="inn_pol" key="0" />
        <column table="a" column="kpp_pol" type="string" title="" comment="продавец" as="kpp_pol" key="0" />
        <column table="a" column="ndog_pl" type="string" title="" as="ndog_pl" key="0" />
        <column table="a" column="datdog_pl" type="date" title="" as="datdog_pl" key="0" />
        <column table="a" column="tel_pl" type="string" title="" as="tel_pl" key="0" />
        <column table="a" column="tel_pol" type="string" title="" as="tel_pol" key="0" />
        <column table="a" column="fio1" type="string" title="" as="fio1" key="0" />
        <column table="a" column="fio2" type="string" title="" as="fio2" key="0" />
        <column table="a" column="dol1" type="string" title="" as="dol1" key="0" />
        <column table="a" column="dol2" type="string" title="" as="dol2" key="0" />
        <column table="a" column="dover1" type="string" title="" as="dover1" key="0" />
        <column table="a" column="dover2" type="string" title="" as="dover2" key="0" />
        <column table="a" column="shapka" type="string" title="" comment="конструкция шапки в сф по оплате" as="shapka" key="0" />
        <column table="a" column="dep" type="number" title="" comment="отделение" as="dep" key="0" />
        <column table="a" column="kodbpol" type="number" title="" comment="банк получателя" as="kodbpol" key="0" />
        <column table="a" column="tel_otpr" type="string" title="" as="tel_otpr" key="0" />
        <column table="a" column="num_sf_dop" type="string" title="" comment="&quot;/&quot;и цифры-дополнение к номеру сф" as="num_sf_dop" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_opl_text" as="a">
          <link name="kod_opl_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_opl_sf" table="sr_opl_sf" child="sr_opl_text" field="kod_opl_sf" parent="sr_opl_sf" back="sr_opl_text">
            <dimlink name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_opl_text">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_sf" as="kod_opl_sf" join="left outer" dname="sr_opl_text">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl_sf" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_pach" class="1" timestamp="15.07.2021 16:27:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_pach.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pach" type="number" comment="код пачки" as="kod_pach" key="1" fixed="1" />
        <column table="a" column="dat" type="date" title="" comment="дата создания" as="dat" key="0" />
        <column table="a" column="count_opl" type="number" title="" comment="кол-во оплат в пачке (автомат)" as="count_opl" key="0" />
        <column table="a" column="sum_total" type="number" title="" comment="сумма по всем оплатам в пачке (автомат)" as="sum_total" key="0" />
        <column table="a" column="prim" type="string" title="" comment="название (примечания)" as="prim" key="0" />
        <column table="a" column="kodbpol" type="number" title="" comment="код банка получателя" as="kodbpol" reference="ks_bankpol" refcol="kodbpol" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код отделения (может быть пустым)" as="dep" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="u_c" type="string" title="" as="u_c" key="0" />
        <column table="a" column="d_c" type="date" title="" as="d_c" key="0" />
        <column table="a" column="file_name" type="string" title="" as="file_name" key="0" />
        <column table="a" column="close_pach" type="number" title="" comment="0-открыта, 1-закрыта" as="close_pach" key="0" />
        <column table="a" column="pr_public" type="number" title="" comment="0-открыт, 1-закрыт" as="pr_public" key="0" />
        <column table="a" column="PR_REESTR" type="number" title="" comment="0-открыт, 1-закрыт" as="PR_REESTR" key="0" />
        <column table="a" column="kodbist" type="number" title="" comment="код kodb банка-источника из таблицы ks_bank" as="kodbist" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="count_opl_ruch" type="number" title="" comment="кол-во оплат в пачке (ручной ввод)" as="count_opl_ruch" key="0" />
        <column table="a" column="sum_total_ruch" type="number" title="" comment="сумма по всем оплатам в пачке (русной ввод)" as="sum_total_ruch" key="0" />
        <column table="a" column="podr" type="number" title="" comment="код участка" as="podr" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_m" type="number" comment="населённый пункт" as="kod_m" reference="adr_m" refcol="kod_m" key="0" />
        <column table="a" column="balans" type="number" title="" comment="признак балансировки: 0 - нет балансировки, 1 - ручная, 2 - автоматическая" as="balans" key="0" />
        <column table="a" column="num_pp" type="string" title="" comment="№ платёжного поручения" as="num_pp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_pach" as="a" />
        <query name="kr_org" as="dep" join="left outer" dname="sr_pach">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="kr_org" as="podr" join="left outer" dname="sr_pach">
          <call function="=">
            <column table="a" column="podr" />
            <column table="podr" column="kodp" />
          </call>
        </query>
        <query name="adr_m" as="kod_m" join="left outer" dname="sr_pach" title="Административно территориальная единица">
          <call function="=">
            <column table="a" column="kod_m" />
            <column table="kod_m" column="kod_m" />
          </call>
        </query>
        <query name="ks_bank" as="kodbist" join="left outer" dname="sr_pach">
          <call function="=">
            <column table="a" column="kodbist" />
            <column table="kodbist" column="kodb" />
          </call>
        </query>
        <query name="ks_bankpol" as="kodbpol" join="left outer" dname="sr_pach">
          <call function="=">
            <column table="a" column="kodbpol" />
            <column table="kodbpol" column="kodbpol" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_penni" class="1" timestamp="29.06.2020 18:58:35" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_penni.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pen" type="number" as="kod_pen" key="1" fixed="1" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="dat_deb" type="date" title="" as="dat_deb" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="dcalc" type="date" title="Дата расчета пени" agg="max" fact="sr_penni_dcalc_max" dimension="dat" as="dcalc" key="0" />
        <column table="a" column="nachisl" type="number" title="" as="nachisl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="dlast" type="date" title="" as="dlast" key="0" />
        <column table="a" column="nday" type="number" title="" as="nday" key="0" />
        <column table="a" column="p_nds" type="number" title="" as="p_nds" key="0" />
        <column table="a" column="mark" type="number" title="" as="mark" key="0" />
        <column table="a" column="num_pl" type="string" title="" as="num_pl" key="0" />
        <column table="a" column="dat_start" type="date" title="" as="dat_start" key="0" />
        <column table="a" column="dpay" type="date" title="" as="dpay" key="0" />
        <column table="a" column="perc" type="number" title="" as="perc" key="0" />
        <column table="a" column="remark" type="string" title="" as="remark" key="0" />
        <column table="a" column="ngroup" type="number" title="" as="ngroup" key="0" />
        <column table="a" column="nachisl_nds" type="number" title="" as="nachisl_nds" key="0" />
        <column table="a" column="nds_opl" type="number" title="" as="nds_opl" key="0" />
        <column table="a" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="a" column="plate" type="number" title="" as="plate" key="0" />
        <column table="a" column="calcset" type="number" title="" as="calcset" key="0" />
        <column table="a" column="datesetbegin" type="date" title="" as="datesetbegin" key="0" />
        <column table="a" column="datesetend" type="date" title="" as="datesetend" key="0" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" key="0" />
        <column table="a" column="sum_penni" type="number" title="" is-fact="1" agg="sum" as="sum_penni" fact="sr_penni_sum_penni" key="0" />
        <column table="a" column="namep" type="string" title="" as="namep" key="0" />
        <column table="a" column="debet_nds" type="number" title="" as="debet_nds" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="checkset" type="string" title="" comment="параметры расчета" as="checkset" key="0" />
        <column table="a" column="kod_sf" type="number" comment="счета фактур" as="kod_sf" key="0" />
        <column table="a" column="vid_t" type="number" title="" comment="47-расчет по договору, 48 -по посл. ставке рефин." as="vid_t" key="0" />
        <column table="a" column="dat_perc" type="date" title="" comment="дата изменения процента" as="dat_perc" key="0" />
        <column table="a" column="name_t" type="string" title="" comment="строковое значение vid_t" as="name_t" key="0" />
        <column table="a" column="ym_calc" type="number" title="" as="ym_calc" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="dat_sf" type="date" title="" as="dat_sf" key="0" />
        <column table="a" column="dat_ezad" type="date" title="" as="dat_ezad" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" as="dat_bzad" key="0" />
        <column table="a" column="kolv_days" type="number" title="" as="kolv_days" key="0" />
        <column table="a" column="snum_sf" type="string" title="" as="snum_sf" key="0" />
        <column table="a" column="kod_delo" type="number" comment="код дела ur_mat.kod_mat, по которому отбираются документы для расчета пени в режиме арбитраж" as="kod_delo" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_penni" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="sr_penni" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_penni" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dname="sr_penni" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dimension="1" dname="sr_penni">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_penni">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="ur_mat" as="kod_delo" join="left outer" dname="sr_penni" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_delo" />
            <column table="kod_delo" column="kod_mat" />
          </call>
        </query>
        <query name="sr_facvip_astr" as="kod_sf_astr" join="left outer" dimension="1" dname="sr_penni">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf_astr" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_recalc" class="1" timestamp="07.05.2018 18:38:24" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_recalc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_recalc" type="number" as="kod_recalc" key="1" fixed="1" />
        <column table="a" column="vid_recalc" type="number" title="" as="vid_recalc" reference="ss_vid_recalc" refcol="vid_recalc" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="num_sf" type="number" title="" comment="номер исходной сф, сохраняется при перерасчете ранее сделанного перерасчета" as="num_sf" key="0" />
        <column table="a" column="doc" type="string" title="" as="doc" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" key="0" />
        <column table="a" column="kod_recalc_parent" type="number" comment="код родительского перерасчета" as="kod_recalc_parent" reference="sr_recalc" refcol="kod_recalc" key="0" />
        <column table="a" column="type" type="number" title="" as="type" key="0" />
        <column table="a" column="dat_sf" type="date" title="" comment="дата исходной сф, сохраняется при перерасчете ранее сделанного перерасчета" as="dat_sf" key="0" />
        <column table="a" column="kod_opl_fact" type="number" as="kod_opl_fact" key="0" />
        <column table="a" column="into_kniga" type="number" title="" comment="0- не показывать/1 - проводить в доп листы/2 - проводить в книге покупок тек. мес./корр.сф" as="into_kniga" key="0" />
        <column table="a" column="dat_recalc" type="date" title="" comment="дата перерасчета" as="dat_recalc" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" key="0" />
        <column table="a" column="rym" type="number" title="" as="rym" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="prizn_ispr" type="number" title="" comment="исправления(для into_kniga=1)=0/1/2-не фикс./фикс.только в новом док-те/фикс.в 2-х док-тах" as="prizn_ispr" key="0" />
        <column table="a" column="size_doc" type="number" title="" comment="для корр.сф при короткой форме =3/4 - изменение объемов/изменение тарифов" as="size_doc" key="0" />
        <column table="a" column="pr_korr_korr" type="number" title="" comment="0/1 - при корр.на корр.(исх. и новый into_kniga=3) в строке 1&quot;б&quot; ссылаться на сф/ксф" as="pr_korr_korr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_recalc" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="sr_recalc" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_recalc">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_recalc">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="ss_vid_recalc" as="vid_recalc" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="sr_recalc">
          <call function="=">
            <column table="a" column="vid_recalc" />
            <column table="vid_recalc" column="vid_recalc" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc_parent" join="left outer" dname="sr_recalc">
          <call function="=">
            <column table="a" column="kod_recalc_parent" />
            <column table="kod_recalc_parent" column="kod_recalc" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="sr_recalc" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="sr_recalc_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_recalc_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_recalc" type="number" as="kod_recalc" key="1" fixed="1" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="kod_sf_uo" type="number" as="kod_sf_uo" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_type_opl" type="number" as="kod_type_opl" key="0" />
        <column table="a" column="pr_hand" type="number" title="" comment="0 - сторно, 1 -ручки, 2 - оплата на разницу при сторнировании" as="pr_hand" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_recalc_opl" as="a" />
        <query name="sr_facvip" as="kod_sf_uo" join="left outer" dname="sr_recalc_opl">
          <call function="=">
            <column table="a" column="kod_sf_uo"></column>
            <column table="kod_sf_uo" column="kod_sf"></column>
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="sr_recalc_opl">
          <call function="=">
            <column table="a" column="kod_opl"></column>
            <column table="kod_opl" column="kod_opl"></column>
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_recalc_opl">
          <call function="=">
            <column table="a" column="kod_recalc"></column>
            <column table="kod_recalc" column="kod_recalc"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="sr_recalc_sf" class="1" timestamp="07.05.2018 18:39:07" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sr_recalc_sf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_recalc" type="number" group="1" as="kod_recalc" key="1" fixed="1" />
        <column table="a" column="kod_sf" type="number" group="1" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sr_recalc_sf" as="a">
          <link name="kod_recalc" as="kod_recalc1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="sr_recalc" child="sr_recalc_sf" field="kod_recalc" parent="sr_recalc" back="sr_recalc_sf">
            <dimlink name="vid_recalc" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="sr_recalc_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="sr_recalc" as="kod_recalc" join="left outer" dname="sr_recalc_sf">
          <call function="=">
            <column table="a" column="kod_recalc" />
            <column table="kod_recalc" column="kod_recalc" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_dest_opl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_dest_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dest" type="number" column-mandatory="1" as="kod_dest" key="1" fixed="1" />
        <column table="a" column="sname" type="string" data-size="50" column-mandatory="1" title="" as="sname" key="0" />
        <column table="a" column="kod_ist" type="number" as="kod_ist" reference="ks_istfin" refcol="kod_ist" key="0" />
        <column table="a" column="name" type="string" data-size="100" column-mandatory="1" title="Наименование" as="name" key="0" />
        <column table="a" column="d_m" type="date" column-mandatory="1" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" column-mandatory="1" title="" as="u_m" key="0" />
        <column table="a" column="tep_el" type="number" column-mandatory="1" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="type_dest" type="number" column-mandatory="1" title="" comment="Тип назначения платежа 1=субсидия; 2=льгота; 0 = все остальное" as="type_dest" key="0" />
        <column table="a" column="buh_schet" type="string" data-size="30" title="" comment="бухгалтерский счет" as="buh_schet" key="0" />
        <column table="a" column="pp_vid_real" type="number" title="" comment="Вид реализации пререплаты (быт.)" as="pp_vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="vid_real_list" type="string" data-size="100" title="" comment="Список видов реализации через запятую" as="vid_real_list" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_dest_opl" as="a" />
        <query name="ks_istfin" as="kod_ist" join="left outer" dname="ss_dest_opl" title="Источники финансирования">
          <call function="=">
            <column table="a" column="kod_ist" />
            <column table="kod_ist" column="kod_ist" />
          </call>
        </query>
        <query name="sk_vid_real" as="pp_vid_real" join="left outer" dname="ss_dest_opl" title="Вид реализации">
          <call function="=">
            <column table="a" column="pp_vid_real" />
            <column table="pp_vid_real" column="vid_real" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ss_dest_opl">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_nachisl_nal" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_nachisl_nal.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nachisl_nal" type="number" column-mandatory="1" as="kod_nachisl_nal" key="1" fixed="1" />
        <column table="a" column="vid_t" type="number" column-mandatory="1" title="" comment="Налогообложение по начислениям.&#xA;Использутеся при формировании начислений, в-основном, по штрафам. &#xA;Где в начислении указан тариф - берем из тарифа.&#xA;" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="kod_naltype" type="number" column-mandatory="1" as="kod_naltype" reference="sk_nalog_type" refcol="kod_naltype" key="0" />
        <column table="a" column="kod_nal" type="number" column-mandatory="1" as="kod_nal" reference="sk_nalog" refcol="kod_nal" key="0" />
        <column table="a" column="dat_beg" type="date" column-mandatory="1" title="" as="dat_beg" key="0" />
        <column table="a" column="dat_end" type="date" title="" as="dat_end" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_nachisl_nal" as="a" />
        <query name="sk_nachisl" as="vid_t" join="left outer" dname="ss_nachisl_nal" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="sk_nalog_type" as="kod_naltype" join="left outer" dname="ss_nachisl_nal">
          <call function="=">
            <column table="a" column="kod_naltype" />
            <column table="kod_naltype" column="kod_naltype" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="ss_nachisl_nal">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_nalog_tax" class="1" timestamp="17.06.2016 03:15:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_nalog_tax.xml" haskeys="1">
      <select>
        <column table="a" column="kod_naltax" type="number" as="kod_naltax" key="1" fixed="1" />
        <column table="a" column="kod_naltype" type="number" as="kod_naltype" reference="sk_nalog_type" refcol="kod_naltype" key="0" />
        <column table="a" column="kod_nal" type="number" as="kod_nal" reference="sk_nalog" refcol="kod_nal" key="0" />
        <column table="a" column="tax" type="number" title="" as="tax" key="0" />
        <column table="a" column="dat_beg" type="date" title="" as="dat_beg" key="0" />
        <column table="a" column="dat_end" type="date" title="" as="dat_end" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="tax_to_sf" type="string" title="" comment="наименование в док-ты начисления" as="tax_to_sf" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_nalog_tax" as="a" />
        <query name="sk_nalog_type" as="kod_naltype" join="left outer" dname="ss_nalog_tax">
          <call function="=">
            <column table="a" column="kod_naltype" />
            <column table="kod_naltype" column="kod_naltype" />
          </call>
        </query>
        <query name="sk_nalog" as="kod_nal" join="left outer" dname="ss_nalog_tax">
          <call function="=">
            <column table="a" column="kod_nal" />
            <column table="kod_nal" column="kod_nal" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_state" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_state" type="number" as="kod_state" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="pr_dog" type="number" title="" as="pr_dog" key="0"></column>
        <column table="a" column="vid_state" type="number" title="" comment="вид состояния: 1-списание 2-просроченная задолж, иначе 0" as="vid_state" key="0"></column>
        <column table="a" column="pr_aopl" type="number" title="" comment="включать(1) или не включать(0) документы с таким состоянием в автоматический разнос оплат" as="pr_aopl" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_state" as="a"></table>
      </from>
    </query>
    <query name="ss_vidopl" class="1" timestamp="25.02.2019 17:50:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_vidopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vidopl" type="number" as="kod_vidopl" key="1" fixed="1" />
        <column table="a" column="abbr" type="string" title="Вид оплаты" vid="1" as="abbr" key="0" />
        <column table="a" column="sname" type="string" title="Вид оплаты" vid="1" as="sname" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="name" type="string" title="Вид оплаты" as="name" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_tvidopl" type="number" as="kod_tvidopl" reference="sk_tvidopl" refcol="kod_tvidopl" key="0" />
        <column table="a" column="alg" type="number" as="alg" key="0" />
        <call function="||" as="full_name" title="Виды оплат" is-name="1" key="0">
          <column table="a" column="abbr" type="string" title="Аббревиатура" />
          <const>' '</const>
          <column table="a" column="sname" type="string" title="" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_vidopl" as="a" />
        <query name="sk_tvidopl" as="kod_tvidopl" join="left outer" dname="ss_vidopl">
          <call function="=">
            <column table="a" column="kod_tvidopl" />
            <column table="kod_tvidopl" column="kod_tvidopl" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_parent" join="left outer" dname="ss_vidopl">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_vidopl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_vid_recalc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_vid_recalc.xml" haskeys="1">
      <select>
        <column table="a" column="vid_recalc" type="number" title="" as="vid_recalc" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="type" type="number" title="" comment="0 - возврат оплаты&#xA;1 - перенос оплаты&#xA;2 - перевыставление СФ&#xA;3 - по начислениям&#xA;4 - сторно СФ&#xA;5 - перенос долга&#xA;" as="type" reference="ss_type_recalc" refcol="type" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="Кем изменено" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="Когда изменено" as="d_m" key="0" />
        <column table="a" column="kod_oper" type="number" as="kod_oper" reference="ss_oper_recalc" refcol="kod_oper" key="0" />
        <column table="a" column="osn" type="string" title="" comment="Основание перерасчета" as="osn" key="0" />
        <column table="a" column="pr_active" type="number" title="" comment="признак активности" as="pr_active" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_vid_recalc" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ss_vid_recalc">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="ss_type_recalc" as="type" join="left outer" dname="ss_vid_recalc">
          <call function="=">
            <column table="a" column="type" />
            <column table="type" column="type" />
          </call>
        </query>
        <query name="ss_oper_recalc" as="kod_oper" join="left outer" dname="ss_vid_recalc">
          <call function="=">
            <column table="a" column="kod_oper" />
            <column table="kod_oper" column="kod_oper" />
          </call>
        </query>
      </from>
    </query>
    <query name="ss_zadol_day" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ss_zadol_day.xml" haskeys="1">
      <select>
        <column table="a" column="kod_bzad" type="number" as="kod_bzad" key="1" fixed="1"></column>
        <column table="a" column="days_bzad" type="number" title="" as="days_bzad" key="0"></column>
        <column table="a" column="day_type" type="number" title="" comment="способ указания дней задолж. из справочника kk_type_zadol" as="day_type" reference="kk_type_zadol" refcol="day_type" key="0"></column>
        <column table="a" column="no_less" type="number" title="" comment="для day_type=1" as="no_less" key="0"></column>
        <call function="||" as="name" is-name="1" key="0">
          <column table="day_type" column="text_before_day" />
          <column table="this" column="days_bzad" />
          <column table="day_type" column="text_after_day" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ss_zadol_day" as="a"></table>
        <query name="kk_type_zadol" as="day_type" join="left outer" dname="ss_zadol_day">
          <call function="=">
            <column table="a" column="day_type"></column>
            <column table="day_type" column="day_type"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="sv_fin_doc_pech" class="1" timestamp="27.06.2017 18:00:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sv_fin_doc_pech.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" title="" comment="id узла в дереве отчетов - используется при построении дерева отчетов в пакетной печати документов" as="id" key="1" fixed="1" />
        <column table="a" column="pid" type="number" title="" comment="parent id узла в дереве - используется при построении дерева отчетов в пакетной печати документов" as="pid" key="0" />
        <column table="a" column="kod_doc" type="number" comment="суррогатный ключ для обозначения код отчета" as="kod_doc" key="0" />
        <column table="a" column="name_doc" type="string" title="" comment="имя отчета" as="name_doc" key="0" />
        <column table="a" column="table_from" type="string" title="" comment="имя таблицы, в которой живет запись о данном отчете" as="table_from" key="0" />
        <column table="a" column="kod_in_table_from" type="number" comment="реальный код отчета в своей таблице (table_from)" as="kod_in_table_from" key="0" />
        <column table="a" column="pr_vid_real_ext" type="number" title="" comment="признак дополнительного расширения списка отчетов на основе вида реализации" as="pr_vid_real_ext" key="0" />
        <column table="a" column="pr_fk" type="number" title="" comment="относится ли документ к виду документов после финансовых корректировок: 0 - нет, 1 - да" as="pr_fk" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="sv_fin_doc_pech" as="a" />
      </from>
    </query>
    <query name="sv_opl_bank_dep" class="1" timestamp="15.06.2016 14:33:18" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\sv_opl_bank_dep.xml" haskeys="1">
      <select>
        <column table="a" column="kod_link" type="number" as="kod_link" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_dep" refcol="kodp" />
        <call function="rowid" as="sv_opl_bank_dep_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="sv_opl_bank_dep" as="a" />
        <query name="kr_dep" as="dep" join="left outer" dname="sv_opl_bank_dep">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="sv_opl_bank_dep">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
      </from>
    </query>
    <query name="tk_upr_house" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tk_upr_house.xml" haskeys="1">
      <select>
        <column table="a" column="kod_upr_house" type="number" as="kod_upr_house" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Тип управления" as="name" key="0"></column>
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tk_upr_house" as="a"></table>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="tk_vidizv" class="1" title="Тип счета" timestamp="04.02.2016 16:35:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tk_vidizv.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vidizv" type="number" as="kod_vidizv" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" key="0" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tk_vidizv" as="a" title="Тип счета" />
      </from>
    </query>
    <query name="tnr_accopl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tnr_accopl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" comment="код оплаты" as="kod_opl" key="1" fixed="1"></column>
        <column table="a" column="kod_account" type="number" comment="код начисления" as="kod_account" reference="tnr_account" refcol="kod_account" key="0"></column>
        <column table="a" column="opl" type="number" title="" comment="оплата начисления в натуральных показателях" fact="tsr_acc_opl_opl" agg="sum" as="opl" key="0"></column>
        <column table="a" column="cust_o" type="number" title="" as="cust_o" key="0"></column>
        <call function="||" as="kod_accopl" key-dimension="kod_accopl" key="0">
          <column table="a" column="kod_opl" />
          <const>'-'</const>
          <column table="a" column="kod_account" />
        </call>
        <column table="kod_opl" column="ym" fact="tnr_accopl_ym_max" agg="max" as="ym" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tnr_accopl" as="a"></table>
        <query name="tnr_account" as="kod_account" join="left outer" dimension="kod_acc_byt" dname="tnr_accopl">
          <call function="=">
            <column table="a" column="kod_account"></column>
            <column table="kod_account" column="kod_account"></column>
          </call>
        </query>
        <query name="tsr_opl" as="kod_opl" join="left outer" dimension="kod_opl_byt" dname="tnr_accopl">
          <call function="=">
            <column table="a" column="kod_opl"></column>
            <column table="kod_opl" column="kod_opl"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="tnr_account" class="1" timestamp="25.03.2016 18:36:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tnr_account.xml" haskeys="1">
      <select>
        <column table="a" column="kod_account" type="number" comment="1" key-dimension="kod_acc_byt" as="kod_account" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="код договора" new-val="qube.tnr_izv_kod_dog" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="ym" type="number" title="Период" comment="период" column-mandatory="1" as="ym" key="0" />
        <column table="a" column="num_priem" type="number" title="" comment="номер приемки" as="num_priem" key="0" />
        <column table="a" column="dat_priem" type="date" title="" comment="дата приемки" as="dat_priem" key="0" />
        <column table="a" column="rym" type="number" title="" comment="период, за который требуется перерасчет" as="rym" key="0" />
        <column table="a" column="tarif" type="number" title="" comment="код тарифа" as="tarif" reference="ks_tarif" refcol="tarif" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="код объекта в договоре" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_f23" type="number" comment="1" as="kod_f23" reference="hs_23" refcol="kod_f23" key="0" />
        <column table="a" column="voltage" type="number" title="" comment="код уровня напряжения" as="voltage" reference="hk_voltage" refcol="voltage" key="0" />
        <column table="a" column="vid_t" type="number" title="" comment="вид начисления" column-mandatory="1" as="vid_t" reference="sk_nachisl" refcol="vid_t" key="0" />
        <column table="a" column="cust" type="number" title="Количество" comment="начислено, нат. пок." column-mandatory="1" as="cust" key="0" />
        <column table="a" column="price" type="number" title="Цена" comment="стоимость" column-mandatory="1" as="price" key="0" />
        <column table="a" column="nachisl" type="number" comment="начислено, руб." fact="tnr_acc_nach" agg="sum" title="Начислено" column-mandatory="1" new-val="calc_nachisl" as="nachisl" key="0" />
        <column table="a" column="info" type="string" title="" comment="примечание" as="info" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_numobj_sa" type="number" comment="код объекта в договоре" as="kod_numobj_sa" reference="kr_numobj" key="0" />
        <column table="a" column="kod_f46" type="number" as="kod_f46" reference="ks_46" refcol="kod_f46" key="0" />
        <column table="a" column="pr_hand" type="number" title="" comment="1" as="pr_hand" key="0" />
        <column table="a" column="pr_sf" type="number" title="" comment="признак счета-фактуры" as="pr_sf" key="0" />
        <column table="a" column="kod_sf" type="number" comment="код счета-фактуры" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_vid_act" type="number" comment="код акта" as="kod_vid_act" reference="ss_vid_act" refcol="kod_vid_act" key="0" />
        <column table="a" column="kod_priem" type="number" comment="код приемки" as="kod_priem" reference="tnr_priem" refcol="kod_priem" key="0" />
        <column table="a" column="kod_izv" type="number" comment="код извещения" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительской записи" as="kod_parent" reference="tnr_account" key="0" />
        <column table="a" column="kod_typeaccount" type="number" comment="тип начислений" as="kod_typeaccount" key="0" />
        <column table="a" column="d_r" type="date" title="" comment="когда сделан прерасчет" as="d_r" key="0" />
        <column table="a" column="u_r" type="string" title="" comment="кто сделал перерасчет" as="u_r" key="0" />
        <column table="a" column="pr_lg" type="number" title="" comment="признак льгот" as="pr_lg" key="0" />
        <column table="a" column="kod_izv1" type="number" as="kod_izv1" key="0" />
        <column table="a" column="kod_tarif_rate" type="number" comment="код ставки по тарифу" as="kod_tarif_rate" reference="ks_tarif_rate" refcol="kod_tarif_rate" key="0" />
        <column table="a" column="kod_stobj" type="number" comment="код статуса объекта" as="kod_stobj" key="0" />
        <column table="a" column="kod_point_tar" type="number" as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="pr_hand_attach" type="number" title="" comment="признак ручной привязки перерасчета" as="pr_hand_attach" key="0" />
        <column table="a" column="vid_recalc" type="number" title="" comment="вид перерасчета" as="vid_recalc" reference="ss_vid_recalc" refcol="vid_recalc" key="0" />
        <column table="a" column="kod_bupol" type="number" comment="код акта безучетного пользования" as="kod_bupol" reference="tr_bupol" refcol="kod_bupol" key="0" />
        <column table="a" column="count_opl" type="number" title="" comment="оплаченные показания" as="count_opl" key="0" />
        <column table="a" column="t_zona" type="number" title="" comment="тип тарифной зоны 0-ночная 1-дневн или суточная, 2-моп" as="t_zona" key="0" />
        <column table="a" column="kod_pereras" type="number" comment="ссылка на табл. перерасчетов" as="kod_pereras" reference="tr_pereras" refcol="kod_pereras" key="0" />
        <column table="a" column="dat_priem_last" type="date" title="" comment="дата пред.приемки или начала отсчета" as="dat_priem_last" key="0" />
        <column table="a" column="declaration" type="string" title="" comment="номер заявления при переасчете" as="declaration" key="0" />
        <column table="a" column="potcust" type="number" title="" as="potcust" key="0" />
        <column table="a" column="kod_usl_vid" type="number" comment="не используется в электричестве, создано для совместимости с теплом" as="kod_usl_vid" key="0" />
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep" key="0" />
        <column table="a" column="ym_att" type="number" title="" comment="период авт. привязки перерасчета" as="ym_att" key="0" />
        <column table="a" column="over_sn" type="number" title="" comment="признак начисления по тарифу сверх соц. нормы (1), 0-начисление в пределах сн, null-начисление не участвует в распределении по тарифам сн" as="over_sn" key="0" />
        <const as="cnt" fact="tnr_account_count" agg="sum" type="number" key="0">1</const>
        <column table="a" column="ym" as="ym_max" fact="tnr_acc_ym_max" agg="max" key="0" />
        <column table="vid_t" column="vid_real" agg="max" fact="tnr_acc_vid_real" as="vid_real" key="0" />
        <call function="*" as="calc_nachisl" key="0">
          <column table="this" column="price" />
          <column table="this" column="cust" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tnr_account" as="a" />
        <query name="hk_voltage" as="voltage" join="left outer" dname="tnr_account" title="Уровень напряжения">
          <call function="=">
            <column table="a" column="voltage" />
            <column table="voltage" column="voltage" />
          </call>
        </query>
        <query name="ks_46" as="kod_f46" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_f46" />
            <column table="kod_f46" column="kod_f46" />
          </call>
        </query>
        <query name="ks_tarif_rate" as="kod_tarif_rate" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_tarif_rate" />
            <column table="kod_tarif_rate" column="kod_tarif_rate" />
          </call>
        </query>
        <query name="sk_nachisl" as="vid_t" join="left outer" dimension="1" dname="tnr_account" title="Вид начисления">
          <call function="=">
            <column table="a" column="vid_t" />
            <column table="vid_t" column="vid_t" />
          </call>
        </query>
        <query name="ss_vid_recalc" as="vid_recalc" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="vid_recalc" />
            <column table="vid_recalc" column="vid_recalc" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="ks_tarif" as="tarif" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="tarif" />
            <column table="tarif" column="tarif" />
          </call>
        </query>
        <query name="ss_vid_act" as="kod_vid_act" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_vid_act" />
            <column table="kod_vid_act" column="kod_vid_act" />
          </call>
        </query>
        <query name="tr_bupol" as="kod_bupol" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_bupol" />
            <column table="kod_bupol" column="kod_bupol" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="kod_izv" dname="tnr_account" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="hs_23" as="kod_f23" join="left outer" dname="tnr_account" title="Принадлежность объектов">
          <call function="=">
            <column table="a" column="kod_f23" />
            <column table="kod_f23" column="kod_f23" />
          </call>
        </query>
        <query name="tnr_priem" as="kod_priem" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_priem" />
            <column table="kod_priem" column="kod_priem" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj_sa" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_numobj_sa" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="tnr_account" as="kod_parent" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_account" column="kod_account" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="tnr_account" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="tr_pereras" as="kod_pereras" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="a" column="kod_pereras" />
            <column table="kod_pereras" column="kod_pereras" />
          </call>
        </query>
        <query name="spr_time_ym" as="ym" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="this" column="ym" />
            <column table="ym" column="ym" />
          </call>
        </query>
        <query name="spr_time_ym" as="rym" join="left outer" dname="tnr_account">
          <call function="=">
            <column table="this" column="rym" />
            <column table="ym" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="tnr_izv" class="1" timestamp="24.03.2016 15:55:21" title="Счет" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tnr_izv.xml" haskeys="1">
      <select>
        <column table="a" column="kod_izv" type="number" key-dimension="kod_izv" as="kod_izv" key="1" fixed="1" />
        <column table="a" column="num_izv" type="number" title="Номер счета" as="num_izv" key="0" />
        <column table="a" column="ym" type="number" title="Отчетный период счета" fact="tnr_izv_ym_max" agg="max" column-mandatory="1" as="ym" key="0" />
        <column table="a" column="r_sch" type="string" title="" as="r_sch" key="0" />
        <column table="a" column="l_sch" type="string" title="" as="l_sch" key="0" />
        <column table="a" column="adres" type="string" title="" as="adres" key="0" />
        <column table="a" column="oplata" type="number" title="" as="oplata" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_dog" type="number" fact="tnr_izv_kod_dog" agg="max" column-mandatory="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="type_izv" type="number" title="" comment="0-обычное, 1-фиктивное" as="type_izv" reference="tk_vidizv" refcol="kod_vidizv" key="0" />
        <column table="a" column="date_izv" type="date" title="Дата счета" column-mandatory="1" as="date_izv" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" dimension="dat_dolg" as="dat_bzad" key="0" />
        <column table="a" column="pr_old" type="number" title="" as="pr_old" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="0 - единое, 1 - электрическое, 2 - тепловое" as="tep_el" key="0" />
        <column table="a" column="dep" type="number" title="" as="dep" reference="kr_org" key="0" />
        <column table="a" column="date_print" type="date" title="" comment="дата печати" as="date_print" key="0" />
        <column table="a" column="dat_bzad_peni" type="date" title="" comment="дата наступления задолженности для расчета пени" as="dat_bzad_peni" key="0" />
        <column table="a" column="kod_dog_post" type="number" comment="код договора поставщика услуг" as="kod_dog_post" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="platezh_rec" type="number" title="" comment="рекомендуемый платеж на следующий месяц" as="platezh_rec" key="0" />
        <call function="||" as="name" key="0">
          <column table="type_izv" column="abbr" />
          <const>' №'</const>
          <column table="a" column="num_izv" />
          <const>' от  '</const>
          <call function="date to char">
            <column table="a" column="date_izv" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tnr_izv" as="a" title="Счет">
          <dlink name="tnr_account" dimension="1" as="tnr_account" table="tnr_account" child="tnr_account" field="kod_izv" parent="tnr_izv" back="tnr_account" />
        </table>
        <query name="tk_vidizv" as="type_izv" join="left outer" dname="tnr_izv" title="Тип счета">
          <call function="=">
            <column table="a" column="type_izv" />
            <column table="type_izv" column="kod_vidizv" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" dname="tnr_izv">
          <call function="=">
            <column table="a" column="dep" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog_post" join="left outer" dname="tnr_izv_post" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_post" />
            <column table="kod_dog_post" column="kod_dog" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="tnr_izv" dimension="1" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="spr_time_ym" as="ym" join="left outer" dname="tnr_izv">
          <call function="=">
            <column table="this" column="ym" />
            <column table="ym" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="tr_his_upr" class="1" timestamp="28.03.2016 18:35:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tr_his_upr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_his_upr" type="number" as="kod_his_upr" key="1" fixed="1" />
        <column table="a" column="kod_obj" type="number" comment="код объекта" dimension="kod_obj_vdr" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="dat_s" type="date" title="" comment="дата начала " as="dat_s" key="0" />
        <column table="a" column="dat_po" type="date" title="" comment="дата удаления " as="dat_po" key="0" />
        <column table="a" column="kod_dog_org" type="number" comment="уполномоченная организация)" as="kod_dog_org" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kod_typ_upr" type="number" comment="тип управляющей орг. (тсж,тиз,жск,ук)" as="kod_typ_upr" reference="tk_upr_house" refcol="kod_upr_house" key="0" />
        <column table="a" column="kod_vid_upr" type="number" comment="вид договора с управляющей орг. (агентский,соглашение)" as="kod_vid_upr" reference="ts_vid_upr" refcol="kod_vid" key="0" />
        <column table="a" column="pr_upr_org" type="number" title="" comment="признак прямого управления управляющей организацией" as="pr_upr_org" key="0" />
        <column table="a" column="tip_org" type="number" title="" comment="тип орг. (упр.компания,собственник,домовые сети)" as="tip_org" key="0" />
        <column table="a" column="kod_fs" type="number" comment="код формы собственности" as="kod_fs" reference="ks_fs" refcol="kod_fs" key="0" />
        <column table="a" column="calc_vdr" type="number" title="" comment="расчет вдр" as="calc_vdr" key="0" />
        <column table="a" column="kod_vras" type="number" comment="вид расчетов с фл в мкд" as="kod_vras" reference="tk_upr_vras" refcol="kod_upr_vras" key="0" />
        <column table="a" column="print_uk" type="number" title="" comment="печать реквизитов ук" as="print_uk" key="0" />
        <column table="a" column="calc_mop" type="number" title="" comment="формирование начислений по моп" as="calc_mop" key="0" />
        <column table="a" column="odn_no_ogr" type="number" title="" comment="одн без ограничений" as="odn_no_ogr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tr_his_upr" as="a" />
        <query name="kr_dogovor" as="kod_dog_org" join="left outer" dname="tr_his_upr" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog_org" />
            <column table="kod_dog_org" column="kod_dog" />
          </call>
        </query>
        <query name="kr_object" as="kod_obj" join="left outer" dname="tr_his_upr">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="ks_fs" as="kod_fs" join="left outer" dname="tr_his_upr" title="Форма собственности">
          <call function="=">
            <column table="a" column="kod_fs" />
            <column table="kod_fs" column="kod_fs" />
          </call>
        </query>
        <query name="tk_upr_house" as="kod_typ_upr" join="left outer" dname="tr_his_upr">
          <call function="=">
            <column table="a" column="kod_typ_upr" />
            <column table="kod_typ_upr" column="kod_upr_house" />
          </call>
        </query>
        <query name="tk_upr_vras" as="kod_vras" join="left outer" dname="tr_his_upr">
          <call function="=">
            <column table="a" column="kod_vras" />
            <column table="kod_vras" column="kod_upr_vras" />
          </call>
        </query>
        <query name="ts_vid_upr" as="kod_vid_upr" join="left outer" dname="tr_his_upr">
          <call function="=">
            <column table="a" column="kod_vid_upr" />
            <column table="kod_vid_upr" column="kod_vid" />
          </call>
        </query>
      </from>
    </query>
    <query name="tr_info_potr" class="1" timestamp="17.06.2016 03:15:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tr_info_potr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_info_potr" type="number" as="kod_info_potr" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="fio_f" type="string" title="" comment="фамилия" as="fio_f" key="0" />
        <column table="a" column="fio_i" type="string" title="" comment="имя" as="fio_i" key="0" />
        <column table="a" column="fio_o" type="string" title="" comment="отчество" as="fio_o" key="0" />
        <column table="a" column="d_birth" type="date" title="" comment="дата рождения" as="d_birth" key="0" />
        <column table="a" column="m_birth" type="string" title="" comment="место рождения" as="m_birth" key="0" />
        <column table="a" column="d_beg_sob" type="date" title="" comment="начало периода" as="d_beg_sob" key="0" />
        <column table="a" column="d_end_sob" type="date" title="" comment="конец периода" as="d_end_sob" key="0" />
        <column table="a" column="d_beg_reg" type="date" title="" comment="начало периода" as="d_beg_reg" key="0" />
        <column table="a" column="d_end_reg" type="date" title="" comment="конец периода" as="d_end_reg" key="0" />
        <column table="a" column="pr_stat" type="number" title="" comment="статус" as="pr_stat" key="0" />
        <column table="a" column="d_beg_stat" type="date" title="" comment="дата начала статуса абонента" as="d_beg_stat" key="0" />
        <column table="a" column="d_end_stat" type="date" title="" comment="дата конца статуса абонента (скрытое поле)" as="d_end_stat" key="0" />
        <column table="a" column="pr_activ" type="number" title="" comment="признак активный/удаленный (скрытое поле 0/1)" as="pr_activ" key="0" />
        <column table="a" column="d_beg_str" type="date" title="" comment="начало действия строки" as="d_beg_str" key="0" />
        <column table="a" column="d_end_str" type="date" title="" comment="конец действия строки" as="d_end_str" key="0" />
        <column table="a" column="d_end" type="date" title="" comment="дата смерти" as="d_end" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="serial" type="string" title="" comment="серия паспорта" as="serial" key="0" />
        <column table="a" column="nomer" type="string" title="" comment="номер паспорта" as="nomer" key="0" />
        <column table="a" column="kem" type="string" title="" comment="кем выдан паспорт " as="kem" key="0" />
        <column table="a" column="d_pasp" type="date" title="" comment="дата выдачи паспорта " as="d_pasp" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="d_beg_pens" type="date" title="" comment="пенсия по старости:дата начала" as="d_beg_pens" key="0" />
        <column table="a" column="kod_person" type="number" comment="код персоны" as="kod_person" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tr_info_potr" as="a" />
        <query name="kr_object" as="kod_obj" join="left outer" dname="tr_info_potr">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="tr_info_potr">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="tr_izv_dolg" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tr_izv_dolg.xml" haskeys="1">
      <select>
        <column table="a" column="kod_izv_dolg" type="number" as="kod_izv_dolg" key="1" fixed="1"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0"></column>
        <column table="a" column="ym" type="number" title="" comment="период" as="ym" key="0"></column>
        <column table="a" column="date_dolg" type="date" title="" as="date_dolg" key="0"></column>
        <column table="a" column="summa" type="number" title="" as="summa" key="0"></column>
        <column table="a" column="date_print" type="date" title="" as="date_print" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tr_izv_dolg" as="a"></table>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="tr_izv_dolg" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="tr_izv_dolg">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="kr_payer" as="kodp2" join="left outer" dname="tr_izv_dolg" title="Абонент">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="tr_izv_selection" class="1" timestamp="19.06.2017 16:14:41" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tr_izv_selection.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" title="" key="1" as="id" />
        <column table="a" column="kodp_uch" type="number" title="" comment="код участка" as="kodp_uch" reference="kr_org" refcol="kodp" />
        <column table="a" column="name" type="string" title="Наименование" comment="наименование выборки" as="name" />
        <column table="a" column="priority" type="number" title="" comment="приоритет печати" as="priority" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="tr_izv_selection" as="a" />
        <query name="kr_org" as="kodp_uch" join="left outer" dname="tr_izv_selection">
          <call function="=">
            <column table="a" column="kodp_uch" />
            <column table="kodp_uch" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="tr_prop" class="1" timestamp="18.02.2025 11:44:35" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tr_prop.xml" haskeys="1">
      <select>
        <column table="a" column="kod_prop" type="number" as="kod_prop" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0" />
        <column table="a" column="datevv" type="date" title="" comment="дата" as="datevv" key="0" />
        <column table="a" column="kol_chel" type="number" title="" comment="количество человек" as="kol_chel" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="pr_prop" type="number" title="" comment="0-проживающие, 1-прописанные" as="pr_prop" key="0" />
        <column table="a" column="kod_obj" type="number" comment="код объекта" as="kod_obj" reference="kr_object" refcol="kod_obj" key="0" />
        <column table="a" column="kod_pereras" type="number" comment="код перерасчета, если введено через перерасчет" as="kod_pereras" key="0" />
        <column table="a" column="pr_error" type="number" title="" comment="признак, что данные показания не действительны" as="pr_error" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="datedeyst" type="date" title="" as="datedeyst" key="0" />
        <column table="a" column="datenedeyst" type="date" title="" as="datenedeyst" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tr_prop" as="a" />
        <query name="kr_object" as="kod_obj" join="left outer" dname="tr_prop">
          <call function="=">
            <column table="a" column="kod_obj" />
            <column table="kod_obj" column="kod_obj" />
          </call>
        </query>
        <query name="kr_org" as="kodp" join="left outer" dname="tr_prop">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="tsr_opl" class="1" timestamp="18.07.2016 20:26:53" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tsr_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_opl" type="number" key-dimension="kod_opl_byt" as="kod_opl" key="1" fixed="1" />
        <column table="a" column="kod_vidopl" type="number" comment="1" as="kod_vidopl" reference="ss_vidopl" refcol="kod_vidopl" key="0" />
        <column table="a" column="vid_real" type="number" title="" comment="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="num_opl" type="string" title="" comment="1" as="num_opl" key="0" />
        <column table="a" column="opl" type="number" title="Оплата" fact="tsr_opl_opl" agg="sum" as="opl" key="0" />
        <column table="a" column="ym" type="number" title="" dimension="ym" fact="tsr_opl_ym_max" agg="max" as="ym" key="0" />
        <column table="a" column="remark" type="string" title="" comment="примечания" as="remark" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="когда изменено" as="d_m" key="0" />
        <column table="a" column="num_sf" type="number" title="" as="num_sf" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="кем изменено" as="u_m" key="0" />
        <column table="a" column="kod_dest" type="number" comment="1" as="kod_dest" reference="ss_dest_opl" refcol="kod_dest" key="0" />
        <column table="a" column="kod_type_opl" type="number" comment="1" as="kod_type_opl" key="0" />
        <column table="a" column="kod_link" type="number" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="dat_opl" type="date" title="" fact="tsr_opl_dat_opl_max" agg="max" dimension="dat_dolg" as="dat_opl" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="kod_numobj" type="number" comment="казань: код объекта, указывается для переплаты по объекту" as="kod_numobj" reference="kr_numobj" refcol="kod_numobj" key="0" />
        <column table="a" column="kod_point_tar" type="number" comment="казань: тип тарифной зоны (0 - ночная, 1 - дневная или суточная, 2 - моп), указывается только для переплаты, как уточнение к kod_point_tar. nb: для преплат не по счётчикам и не по моп = 1." as="kod_point_tar" reference="hr_point_tar" refcol="kod_point_tar" key="0" />
        <column table="a" column="t_zona" type="number" title="" as="t_zona" key="0" />
        <column table="a" column="dat_bal" type="date" title="" comment="дата балансировки" as="dat_bal" key="0" />
        <column table="a" column="dep" type="number" title="" comment="подразделение" as="dep" key="0" />
        <call function="if" as="dat_oper" type="date" title="Дата операции" dimension="dat" key="0">
          <call function="in">
            <column table="a" column="kod_type_opl" />
            <call function="array">
              <const>0</const>
              <const>1</const>
              <const>2</const>
            </call>
          </call>
          <column table="a" column="dat_opl" />
          <call function="ym end time">
            <column table="a" column="ym" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tsr_opl" as="a" />
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="hr_point_tar" as="kod_point_tar" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_point_tar" />
            <column table="kod_point_tar" column="kod_point_tar" />
          </call>
        </query>
        <query name="sk_type_opl" as="kod_type_opl" join="left outer" dname="tsr_opl" title="Тип оплаты">
          <call function="=">
            <column table="a" column="kod_type_opl" />
            <column table="kod_type_opl" column="kod_type_opl" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="kod_izv" dname="tsr_opl" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="kr_numobj" as="kod_numobj" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_numobj" />
            <column table="kod_numobj" column="kod_numobj" />
          </call>
        </query>
        <query name="ss_dest_opl" as="kod_dest" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_dest" />
            <column table="kod_dest" column="kod_dest" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="1" dname="tsr_opl" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="tsr_opl" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="ss_vidopl" as="kod_vidopl" join="left outer" dname="tsr_opl">
          <call function="=">
            <column table="a" column="kod_vidopl" />
            <column table="kod_vidopl" column="kod_vidopl" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_parent_kred" dname="storno">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_parent" />
              <column table="kod_parent_kred" column="kod_opl" />
            </call>
            <call function="in">
              <column table="a" column="kod_type_opl" />
              <call function="array">
                <const>5</const>
                <const>6</const>
              </call>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="tsr_penni" class="1" timestamp="08.06.2017 16:51:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tsr_penni.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pen" type="number" as="kod_pen" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="код договора" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_izv" type="number" comment="код извещения" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="ym" type="number" title="" comment="расчетный год, месяц" as="ym" key="0" />
        <column table="a" column="d_calc" type="date" title="" comment="дата расчета" as="d_calc" key="0" />
        <column table="a" column="kod_opl" type="number" comment="код оплаты" as="kod_opl" reference="tsr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="d_begin" type="date" title="" comment="начало расчета по данному %" as="d_begin" key="0" />
        <column table="a" column="d_end" type="date" title="" comment="окончание расчета по данному %" as="d_end" key="0" />
        <column table="a" column="perc" type="number" title="" comment="процент" as="perc" key="0" />
        <column table="a" column="vid_t" type="number" title="" comment="вид товара: 47 - % из договора, 48 - % по ставке рефинанс." as="vid_t" key="0" />
        <column table="a" column="sum_penni" type="number" title="" comment="сумма пени" as="sum_penni" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="kod_account" type="number" comment="запись с начисленными пени в tnr_account" as="kod_account" reference="tnr_account" refcol="kod_account" key="0" />
        <column table="a" column="nach_penni" type="number" title="" comment="сумма, на которую начисляются пени" as="nach_penni" key="0" />
        <column table="a" column="day_in_year" type="number" title="" comment="дней в году для расчета пени" as="day_in_year" key="0" />
        <column table="a" column="kod_izv_acc" type="number" comment="код извещения, в кот. выставляются пени" as="kod_izv_acc" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="d_opl" type="date" title="" comment="дата оплаты" as="d_opl" key="0" />
        <column table="a" column="opl" type="number" title="" comment="сумма оплаты" as="opl" key="0" />
        <column table="a" column="opl_nal" type="number" title="" comment="сумма налога" as="opl_nal" key="0" />
        <column table="a" column="days" type="number" title="" comment="количество дней" as="days" key="0" />
        <column table="a" column="pr_calc" type="number" title="" comment="1 - это перерасчет за пред.периоды" as="pr_calc" key="0" />
        <column table="a" column="info" type="string" title="" comment="примечание" as="info" key="0" />
        <column table="a" column="peni_opl" type="number" title="" comment="начислять пени на оплаченную задолженность" as="peni_opl" key="0" />
        <column table="a" column="peni_no_opl" type="number" title="" comment="начислять пени на неоплаченную задолженность" as="peni_no_opl" key="0" />
        <column table="a" column="datesr_opl" type="number" title="" comment="выбор ставки реф. по дате (0-действия, 1-расчета, 2-оплаты) для задолженности, оплаченной с нарушением срока" as="datesr_opl" key="0" />
        <column table="a" column="datesr_no_opl" type="number" title="" comment="выбор ставки реф. по дате (0-действия, 1-расчета) для не оплаченной задолженности" as="datesr_no_opl" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="tsr_penni" as="a" />
        <query name="tnr_account" as="kod_account" join="left outer" dname="tsr_penni">
          <call function="=">
            <column table="a" column="kod_account" />
            <column table="kod_account" column="kod_account" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv_acc" join="left outer" dname="tsr_penni_acc" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv_acc" />
            <column table="kod_izv_acc" column="kod_izv" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dname="tsr_penni" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="tsr_penni" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="tsr_penni" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="tsr_opl" as="kod_opl" join="left outer" dname="tsr_penni">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ts_point_dost" class="1" timestamp="03.06.2016 18:37:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ts_point_dost.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_dost" type="number" as="kod_point_dost" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Доступ к ТУ" comment="наименование" as="name" key="0" />
        <column table="a" column="sname" type="string" title="" comment="наименование (сокр.)" as="sname" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ts_point_dost" as="a" />
      </from>
    </query>
    <query name="ts_trace" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ts_trace.xml" haskeys="1">
      <select>
        <column table="a" column="kod_trace" type="number" as="kod_trace" key="1" fixed="1"></column>
        <column table="a" column="num_trace" type="number" title="" comment="номер маршрута" as="num_trace" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0"></column>
        <column table="a" column="kodp" type="number" title="" comment="код абонента" as="kodp" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ts_trace" as="a"></table>
        <query name="kr_org" as="kodp" join="left outer" dname="ts_trace">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ts_vid_upr" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ts_vid_upr.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid" type="number" as="kod_vid" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Вид управления" as="name" key="0"></column>
        <column table="a" column="odn_no_og" type="number" title="" comment="одн без ограничения" as="odn_no_og" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ts_vid_upr" as="a"></table>
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="tv_point_link" class="1" timestamp="26.05.2017 14:17:03" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\tv_point_link.xml" haskeys="1">
      <select>
        <column table="a" column="kod_point_grp" type="number" as="kod_point_grp" />
        <column table="a" column="dat_s" type="date" title="" as="dat_s" />
        <column table="a" column="dat_po" type="date" title="" as="dat_po" />
        <column table="a" column="tep_el" type="number" title="" as="tep_el" />
        <column table="a" column="kod_point" type="number" as="kod_point" reference="hr_point" refcol="kod_point" />
        <column table="a" column="kod_point_link" type="number" as="kod_point_link" />
        <call function="rowid" as="tv_point_link_id" key="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="tv_point_link" as="a" />
        <query name="hr_point" as="kod_point" join="left outer" dname="tv_point_link">
          <call function="=">
            <column table="a" column="kod_point" />
            <column table="kod_point" column="kod_point" />
          </call>
        </query>
      </from>
    </query>
    <query name="udo_t_fedresurs" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\udo_t_fedresurs.xml" haskeys="1">
      <select>
        <column table="a" column="regno" type="number" title="" key="1" as="regno"></column>
        <column table="a" column="inn" type="number" title="" as="inn"></column>
        <column table="a" column="shortname" type="string" title="" as="shortname"></column>
        <column table="a" column="ogrn" type="number" title="" as="ogrn"></column>
        <column table="a" column="address" type="string" title="" as="address"></column>
        <column table="a" column="datepublic" type="date" title="" as="datepublic"></column>
        <column table="a" column="datestop" type="date" title="" as="datestop"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="udo_t_fedresurs" as="a"></table>
      </from>
    </query>
    <query name="uk_not_edit" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_not_edit.xml" haskeys="1">
      <select>
        <column table="a" column="kod_not_edit" type="number" as="kod_not_edit" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_not_edit" as="a"></table>
      </from>
    </query>
    <query name="uk_prizn_sdp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_prizn_sdp.xml" haskeys="1">
      <select>
        <column table="a" column="prizn_sdp" type="number" as="prizn_sdp" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" vid="1" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_prizn_sdp" as="a"></table>
      </from>
    </query>
    <query name="uk_ret_isk" class="1" title="Причина возврата документа" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_ret_isk.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ret_isk" type="number" as="kod_ret_isk" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Причина возврата документа" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_ret_isk" as="a" title="Причина возврата документа" />
      </from>
    </query>
    <query name="uk_sdp" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_sdp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="1" fixed="1"></column>
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="uk_sdp" refcol="kod_sdp" key="0"></column>
        <column table="kod_parent" column="name" as="name_parent" type="string" title="Раздел" key="0"></column>
        <column table="a" column="name" type="string" title="Юридический документ" vid="1" as="name" key="0"></column>
        <column table="a" column="name_tbl" type="string" as="name_tbl" key="0"></column>
        <column table="a" column="name_key" type="string" as="name_key" key="0"></column>
        <column table="a" column="prioritet" type="number" title="Приоритет" editor="spin" as="prioritet" key="0"></column>
        <column table="a" column="doc_close" type="number" title="документ не работает" as="doc_close" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_sdp" as="a"></table>
        <query name="uk_sdp" as="kod_parent" join="left outer" dname="uk_sdp">
          <call function="=">
            <column table="a" column="kod_parent"></column>
            <column table="kod_parent" column="kod_sdp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="uk_srok" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_srok.xml" haskeys="1">
      <select>
        <column table="a" column="kod_srok" type="number" as="kod_srok" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="наименование" as="name" key="0"></column>
        <column table="a" column="kol_day" type="number" title="Кол-во дней" editor="spin" as="kol_day" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_srok" as="a"></table>
      </from>
    </query>
    <query name="uk_stage" class="1" title="Стадия процедуры банкротства" timestamp="31.08.2018 03:30:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_stage.xml" haskeys="1">
      <select>
        <column table="a" column="kod_stage" type="number" as="kod_stage" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Стадия процедуры банкротства" vid="1" is-name="1" as="name" key="0" />
        <column table="a" column="upr" type="string" title="Управляющий" as="upr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_stage" as="a" title="Стадия процедуры банкротства" />
      </from>
    </query>
    <query name="uk_vi" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uk_vi.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vi" type="number" as="kod_vi" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uk_vi" as="a"></table>
      </from>
    </query>
    <query name="ur_au_duty_control" title="Контроль обязанностей арб. управляющего" class="1" timestamp="11.11.2024 17:00:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_au_duty_control.xml" haskeys="1">
      <select>
        <column table="a" column="kod_au_duty_control" key="1" type="number" as="kod_au_duty_control" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="kod_an_done_bnk" type="number" comment="Проведен, Анализ наличия/ отсутствия признаков преднамеренного и фиктивного банкротства" as="kod_an_done_bnk" reference="us_au_duty_control_an_done" refcol="kod" />
        <column table="a" column="result_an_done_bnk" type="string" comment="Результат, Анализ наличия/ отсутствия признаков преднамеренного и фиктивного банкротства" as="result_an_done_bnk" />
        <column table="a" column="kod_work_done_close_acc" type="number" comment="Работа проведена, Закрытие счетов" as="kod_work_done_close_acc" reference="us_au_duty_control_work_done" refcol="kod" />
        <column table="a" column="comment_close_acc" type="string" comment="Комментарий, Закрытие счетов" as="comment_close_acc" />
        <column table="a" column="fired_in_time" type="number" comment="Уволены в срок, Увольнение работников" as="fired_in_time" reference="ur_yn_list" refcol="kod" />
        <column table="a" column="reason_working" type="string" comment="Продолжают деятельность, причина, Увольнение работников" as="reason_working" />
        <column table="a" column="dat_sud_spor_sdel" type="date" comment="Дата подачи в суд заявления, Оспаривание сделок должника" as="dat_sud_spor_sdel" />
        <column table="a" column="comment_sud_spor_sdel" type="string" comment="Комментарий (наличие оснований, дата СА), Оспаривание сделок должника" as="comment_sud_spor_sdel" />
        <column table="a" column="kod_an_done_subs_resp" type="number" comment="Анализ проведен, Привлечение к субсидиарной ответственности" as="kod_an_done_subs_resp" reference="us_au_duty_control_an_done" refcol="kod" />
        <column table="a" column="dat_sud_subs_resp" type="date" comment="Дата подачи в суд заявления, Привлечение к субсидиарной ответственности" as="dat_sud_subs_resp" />
        <column table="a" column="comment_sud_subs_resp" type="string" comment="Комментарий (наличие оснований, привлекаемое лицо, дата СА и т.д.), Привлечение к субсидиарной ответственности" as="comment_sud_subs_resp" />
        <column table="a" column="zayav_others" type="string" comment="Заявления иного характера" as="zayav_others" />
        <column table="a" column="objal_au_actions" type="string" comment="Обжалование действий/ бездействия арб. управляющего" as="objal_au_actions" />
        <column table="a" column="prim" type="string" comment="Примечание" as="prim" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ur_au_duty_control" title="Контроль обязанностей арб. управляющего" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_au_duty_control" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_au_duty_control_an_done" join="left outer" as="kod_an_done_bnk" dname="ur_au_duty_control" title="Анализ проведен">
          <call function="=">
            <column table="a" column="kod_an_done_bnk" />
            <column table="kod_an_done_bnk" column="kod" />
          </call>
        </query>
        <query name="us_au_duty_control_work_done" join="left outer" as="kod_work_done_close_acc" dname="ur_au_duty_control" title="Работа проведена">
          <call function="=">
            <column table="a" column="kod_work_done_close_acc" />
            <column table="kod_work_done_close_acc" column="kod" />
          </call>
        </query>
        <query name="ur_yn_list" join="left outer" as="fired_in_time" dname="ur_au_duty_control" title="Список да/нет">
          <call function="=">
            <column table="a" column="fired_in_time" />
            <column table="fired_in_time" column="kod" />
          </call>
        </query>
        <query name="us_au_duty_control_an_done" join="left outer" as="kod_an_done_subs_resp" dname="ur_au_duty_control" title="Анализ проведен">
          <call function="=">
            <column table="a" column="kod_an_done_subs_resp" />
            <column table="kod_an_done_subs_resp" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_cred" class="1" timestamp="03.09.2018 11:55:17" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_cred.xml" haskeys="1">
      <select>
        <column table="a" column="kod_cred" type="number" column-mandatory="1" title="№ п/п" as="kod_cred" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" column-mandatory="1" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="name" type="string" title="Наименование кредитора" as="name" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_cred" as="a" />
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_cred" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_creditors_claim_register" title="Реестр требований кредиторов" class="1" timestamp="11.11.2024 16:00:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_creditors_claim_register.xml" haskeys="1">
      <select>
        <column table="a" column="kod_cred_claim_reg" type="number" key="1" as="kod_cred_claim_reg" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="stage_num" type="number" comment="Очередь кредиторов" as="stage_num" />
        <column table="a" column="creditor_name" type="string" comment="Наименование кредитора" as="creditor_name" />
        <column table="a" column="kod_cred_claim_status" type="number" comment="Статус кредитора: основной, залоговый" as="kod_cred_claim_status" reference="us_creditor_claim_status" refcol="kod_cred_claim_status" />
        <column table="a" column="sum_main_claim" type="number" comment="Размер основного требования, руб." as="sum_main_claim" />
        <column table="a" column="voice_percent" type="number" comment="Процент голосов, %" as="voice_percent" />
        <column table="a" column="penalty" type="number" comment="Неустойка/ Проценты, руб." as="penalty" />
        <column table="a" column="repay_claim" type="number" comment="Погашение требования, руб." as="repay_claim" />
        <column table="a" column="prim" type="string" comment="Примечание" as="prim" />
        <call function="if" type="number" as="is_main_cred" title="Выбран статус основной">
          <call function="=">
            <column table="this" column="kod_cred_claim_status" />
            <const>2000000000</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="voice_percent_main" function="if" type="number" title="Процент голосов для статус основной">
          <call function="=">
            <column table="this" column="kod_cred_claim_status" />
            <const>2000000000</const>
          </call>
          <column table="this" column="voice_percent" />
        </call>
        <call as="not_main_bkg_color" function="if" type="string" title="Цвет фона залогового кредитора">
          <call function="!=nvl">
            <column table="this" column="kod_cred_claim_status" />
            <const>2000000000</const>
          </call>
          <const>'192,192,192'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ur_creditors_claim_register" title="Реестр требований кредиторов" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_creditors_claim_register" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_creditor_claim_status" as="kod_cred_claim_status" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_creditors_claim_register" title="Реестр требований кредиторов">
          <call function="=">
            <column table="a" column="kod_cred_claim_status" />
            <column table="kod_cred_claim_status" column="kod_cred_claim_status" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_creditors_claim_total" title="Реестр требований кредиторов" class="1" order="ordinal_number" timestamp="11.11.2024 16:00:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_creditors_claim_total.xml" haskeys="1">
      <select>
        <column table="a" column="kod_cred_claim_total" type="number" key="1" as="kod_cred_claim_total" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="ordinal_number" type="number" comment="Порядок вывода на форму в Карточке по банкротству, каждому номеру соответствует свой текст" as="ordinal_number" />
        <column table="a" column="sum_main_claim" type="number" comment="Размер основного требования, руб." as="sum_main_claim" />
        <column table="a" column="voice_percent" type="number" comment="Процент голосов, %" as="voice_percent" />
        <column table="a" column="penalty" type="number" comment="Неустойка/ Проценты, руб." as="penalty" />
        <column table="a" column="repay_claim" type="number" comment="Погашение требования, руб." as="repay_claim" />
        <column table="a" column="prim" type="number" comment="Примечание" as="prim" />
        <call type="string" function="case" as="headers">
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>1</const>
            </call>
            <const>'Первая очередь'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>2</const>
            </call>
            <const>'Вторая очередь'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>3</const>
            </call>
            <const>'Третья очередь'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>4</const>
            </call>
            <const>'Третья очередь, основные'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>5</const>
            </call>
            <const>'Третья очередь, залоговые'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>6</const>
            </call>
            <const>'Итого в реестре:'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>7</const>
            </call>
            <const>'За реестром:'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>8</const>
            </call>
            <const>'Текущие обязательства:'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>9</const>
            </call>
            <const>'Итого:'</const>
          </call>
        </call>
        <call as="is_locked_except78" function="if" type="number" title="Блокировка поля Процент голосов">
          <call function="in">
            <column table="this" column="ordinal_number" />
            <const>(7, 8)</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="is_locked_except7" function="if" type="number" title="Блокировка поля Погашение требования">
          <call function="=">
            <column table="this" column="ordinal_number" />
            <const>7</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="bkg_color_voice_per" function="if" type="string" title="Цвет фона поля Процента голосов">
          <call function="in">
            <column table="this" column="ordinal_number" />
            <const>(5, 7, 8)</const>
          </call>
          <const>'192,192,192'</const>
        </call>
        <call as="bkg_color_repay_cl" function="if" type="string" title="Цвет фона поля Погашение требования">
          <call function="=">
            <column table="this" column="ordinal_number" />
            <const>8</const>
          </call>
          <const>'192,192,192'</const>
        </call>
        <call as="bkg_color_head69" function="if" type="string" title="Цвет фона хедеров 6-9">
          <call function="in">
            <column table="this" column="ordinal_number" />
            <const>(6, 7, 8, 9)</const>
          </call>
          <const>'240,240,240'</const>
        </call>
        <call function="if" type="string" as="voice_percent_valid" title="Валидация поля Процент голосов">
          <call function="and">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>6</const>
            </call>
            <call function="!=nvl">
              <column table="this" column="voice_percent" />
              <const>100</const>
            </call>
          </call>
          <const>'Сумма не равна 100%'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ur_creditors_claim_total" title="Реестр требований кредиторов" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_creditors_claim_total" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
      </from>
      <order>
        <column column="ordinal_number" />
      </order>
    </query>
    <query name="ur_cred_meeting" title="Собрание/ Комитет кредиторов" timestamp="11.11.2024 16:20:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_cred_meeting.xml" haskeys="1">
      <customers>
        <customer id="10" />
      </customers>
      <select>
        <column table="a" column="kod_cred_meeting" key="1" type="number" as="kod_cred_meeting" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="kod_cred_meeting_type" type="number" comment="1 - собрание, 2 - комитет" as="kod_cred_meeting_type" reference="us_cred_meeting_type" refcol="kod" />
        <column table="a" column="dat_meeting" type="date" comment="Дата проведения" as="dat_meeting" />
        <column table="a" column="kod_cred_meeting_in_time" type="number" comment="Своевременность проведения собрания/комитета кредиторов: 0 - несвоевременно, 1 - своевременно" as="kod_cred_meeting_in_time" reference="us_cred_meeting_in_time" refcol="kod" />
        <column table="a" column="voprosy_povestki" type="string" comment="Вопросы повестки (основные, дополнительные)" as="voprosy_povestki" />
        <column table="a" column="kod_cred_meeting_num" type="number" comment="1 - первое, 2 - последующее" as="kod_cred_meeting_num" reference="us_cred_meeting_num" refcol="kod" />
        <column table="a" column="resheniya" type="string" comment="Принятые решения/Информация о признании собрания несостоявшимся" as="resheniya" />
        <column table="a" column="kod_pov_corresp" type="number" comment="Соответствие повестки требованиям ст. 73 ФЗ: 0 - не соответствует, 1 - соответствует" as="kod_pov_corresp" reference="us_cred_meeting_corresp" refcol="kod" />
        <column table="a" column="kod_rep_provide_deyat" type="number" comment="Арбитражным управляющим предоставлен отчёт о деятельности: 0 - не предоставлен, 1 - предоставлен" as="kod_rep_provide_deyat" reference="us_cred_meeting_rep_provide" refcol="kod" />
        <column table="a" column="kod_rep_deyat_corresp" type="number" comment="Отчёт о деятельности соответствует требованиям зак-ва: 0 - не соответствует, 1 - соответствует" as="kod_rep_deyat_corresp" reference="us_cred_meeting_corresp" refcol="kod" />
        <column table="a" column="kod_rep_deyat_info_true" type="number" comment="Содержащаяся в отчёте о деятельности информация достоверна: 0 - не достоверна, 1 - достоверна" as="kod_rep_deyat_info_true" reference="us_cred_meeting_info_true" refcol="kod" />
        <column table="a" column="kod_rep_provide_ds" type="number" comment="Арбитражным управляющим предоставлен отчёт об использовании ден. средств: 0 - не предоставлен, 1 - предоставлен" as="kod_rep_provide_ds" reference="us_cred_meeting_rep_provide" refcol="kod" />
        <column table="a" column="kod_rep_ds_corresp" type="number" comment="Отчёт об использовании ден. средств соответствует требованиям зак-ва: 0 - не соответствует, 1 - соответствует" as="kod_rep_ds_corresp" reference="us_cred_meeting_corresp" refcol="kod" />
        <column table="a" column="kod_rep_ds_info_true" type="number" comment="Содержащаяся в отчёте об использовании ден. средств информация достоверна: 0 - не достоверна, 1 - достоверна" as="kod_rep_ds_info_true" reference="us_cred_meeting_info_true" refcol="kod" />
        <column table="a" column="prim" type="string" comment="Примечание" as="prim" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ur_cred_meeting" as="a" title="Собрание/ Комитет кредиторов" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_cred_meeting" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_cred_meeting_type" as="kod_cred_meeting_type" join="left outer" dname="ur_cred_meeting" title="Собрание/Комитет кредиторов">
          <call function="=">
            <column table="a" column="kod_cred_meeting_type" />
            <column table="kod_cred_meeting_type" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_in_time" as="kod_cred_meeting_in_time" join="left outer" dname="ur_cred_meeting" title="Своевременность проведения собрания/комитета кредиторов">
          <call function="=">
            <column table="a" column="kod_cred_meeting_in_time" />
            <column table="kod_cred_meeting_in_time" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_num" as="kod_cred_meeting_num" join="left outer" dname="ur_cred_meeting" title="Первое или последующее собрание/комитет кредиторов">
          <call function="=">
            <column table="a" column="kod_cred_meeting_num" />
            <column table="kod_cred_meeting_num" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_corresp" as="kod_pov_corresp" join="left outer" dname="ur_cred_meeting" title="Соответствие">
          <call function="=">
            <column table="a" column="kod_pov_corresp" />
            <column table="kod_pov_corresp" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_rep_provide" as="kod_rep_provide_deyat" join="left outer" dname="ur_cred_meeting" title="Отчет предоставлен">
          <call function="=">
            <column table="a" column="kod_rep_provide_deyat" />
            <column table="kod_rep_provide_deyat" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_corresp" as="kod_rep_deyat_corresp" join="left outer" dname="ur_cred_meeting" title="Соответствие">
          <call function="=">
            <column table="a" column="kod_rep_deyat_corresp" />
            <column table="kod_rep_deyat_corresp" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_info_true" as="kod_rep_deyat_info_true" join="left outer" dname="ur_cred_meeting" title="Информация достоверна">
          <call function="=">
            <column table="a" column="kod_rep_deyat_info_true" />
            <column table="kod_rep_deyat_info_true" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_rep_provide" as="kod_rep_provide_ds" join="left outer" dname="ur_cred_meeting" title="Отчет предоставлен">
          <call function="=">
            <column table="a" column="kod_rep_provide_ds" />
            <column table="kod_rep_provide_ds" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_corresp" as="kod_rep_ds_corresp" join="left outer" dname="ur_cred_meeting" title="Соответствие">
          <call function="=">
            <column table="a" column="kod_rep_ds_corresp" />
            <column table="kod_rep_ds_corresp" column="kod" />
          </call>
        </query>
        <query name="us_cred_meeting_info_true" as="kod_rep_ds_info_true" join="left outer" dname="ur_cred_meeting" title="Информация достоверна">
          <call function="=">
            <column table="a" column="kod_rep_ds_info_true" />
            <column table="kod_rep_ds_info_true" column="kod" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dead" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dead.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dead" type="number" as="kod_dead" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_subject" type="number" comment="предмет" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="kod_result" type="number" comment="судебное решение" as="kod_result" reference="us_result" refcol="kod_result" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер документа о МЗ" as="num_reg" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата документа о МЗ" comment="дата оформления в мз" as="dat_doc" key="0" />
        <column table="a" column="num_delo" type="string" title="Номер дела" as="num_delo" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dead" as="a">
          <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_dead" parent="ur_dead" back="ur_dogplat" />
        </table>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_dead" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_dead" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" dname="ur_dead">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_dead" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_dead" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_deb_reduction" class="1" timestamp="24.04.2025 03:08:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_deb_reduction.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb_reduction" type="number" column-mandatory="1" as="kod_deb_reduction" key="1" fixed="1" />
        <column table="a" column="reduction_type" type="string" data-size="20" title="" comment="Тип сущности с которой связана запись: BNK - банкротство, ISP - исполнительный лист" as="reduction_type" key="0" />
        <column table="a" column="kod_pir_entity" type="number" comment="ID сущности с которой связана запись" as="kod_pir_entity" key="0" />
        <column table="a" column="kod_dogplat" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="kod_link" type="number" comment="ID банковской оплаты" as="kod_link" reference="sr_opl_bank" refcol="kod_link" key="0" />
        <column table="a" column="kod_opl" type="number" as="kod_opl" reference="sr_opl" refcol="kod_opl" key="0" />
        <column table="a" column="reason" type="number" title="" comment="Основание уменьшения долга" as="reason" reference="ur_isp_other_reason" refcol="id" key="0" />
        <column table="a" column="prim" type="string" data-size="1500" title="" comment="Комментарий" as="prim" key="0" />
        <column table="a" column="prim2" type="string" data-size="1500" title="" as="prim2" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_osn_um_mor_dolg" type="number" title="" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="kod_opl" column="opl" type="number" title="Сумма оплаты (руб.)" as="opl" key="0" />
        <column table="kod_link" column="num_opl" type="string" title="" as="num_opl" key="0" />
        <column table="kod_opl" column="dat_opl" type="date" title="" as="dat_opl" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_deb_reduction" as="a" />
        <query name="ur_isp_other_reason" as="reason" join="left outer" dname="ur_deb_reduction">
          <call function="=">
            <column table="a" column="reason" />
            <column table="reason" column="id" />
          </call>
        </query>
        <query name="ur_dogplat" as="kod_dogplat" join="left outer" dname="ur_deb_reduction">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
        <query name="sr_opl_bank" as="kod_link" join="left outer" dname="ur_deb_reduction">
          <call function="=">
            <column table="a" column="kod_link" />
            <column table="kod_link" column="kod_link" />
          </call>
        </query>
        <query name="sr_opl" as="kod_opl" join="left outer" dname="ur_deb_reduction">
          <call function="=">
            <column table="a" column="kod_opl" />
            <column table="kod_opl" column="kod_opl" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_deb_reduction" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_deb_reduct_bnk_vvod" class="1" timestamp="24.04.2025 02:37:36" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_deb_reduct_bnk_vvod.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb_reduct_bnk_vvod" type="number" column-mandatory="1" as="kod_deb_reduct_bnk_vvod" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="prim" type="string" data-size="1500" title="" as="prim" key="0" />
        <column table="a" column="dat_opl" type="date" title="" as="dat_opl" key="0" />
        <column table="a" column="opl" type="number" title="" as="opl" key="0" />
        <column table="a" column="kod_osn_um_mor_dolg" type="number" title="" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_deb_reduct_bnk_vvod" as="a" />
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_deb_reduct_bnk_vvod" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_deb_reduct_bnk_vvod" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dogpeny" class="1" timestamp="17.06.2016 03:16:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dogpeny.xml" pushpred="1" haskeys="1">
      <select>
        <column table="a" column="kod_dogpeny" type="number" as="kod_dogpeny" key="1" fixed="1" />
        <column table="a" column="kod" type="number" title="" as="kod" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" key="0" />
        <column table="a" column="dat_form" type="date" title="Дата формирования счёта" as="dat_form" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="summa" type="number" title="" as="summa" key="0" />
        <column table="a" column="vid_real" type="number" title="" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="sum_v" type="number" title="" as="sum_v" key="0" />
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="dat_form_v" type="date" title="" as="dat_form_v" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="признак по документу долговому" as="tep_el" key="0" />
        <column table="a" column="ym" type="number" title="" comment="отчетный период" as="ym" key="0" />
        <column table="a" column="num_doc" type="number" title="" comment="номер документа" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата док-та по долговому док-ту" as="dat_doc" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" comment="дата возникновения задолж" as="dat_bzad" key="0" />
        <column table="a" column="dat_mor" type="date" title="" comment="дата мораторной зад-ти" as="dat_mor" key="0" />
        <column table="a" column="dat_priem" type="date" title="" comment="дата снятия показаний прибора учета" as="dat_priem" key="0" />
        <call function="if" as="dat_form_peny" title="Дата формирования счёта на пени" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>7</const>
          </call>
          <column table="a" column="dat_form" />
        </call>
        <call function="if" as="dat_form_gp" title="Дата формирования счёта на госпошлину" key="0">
          <call function="=">
            <column table="a" column="vid_real" />
            <const>9</const>
          </call>
          <column table="a" column="dat_form" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dogpeny" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="ur_dogpeny">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_dogpeny">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dname="ur_dogpeny" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dname="ur_dogpeny">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dname="ur_dogpeny" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_dogpeny" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dname="ur_dogpeny" title="Доп. документ (арбитраж)">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_sogl" column="kod_sogl"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>3</const>
            </call>
          </call>
        </query>
        <query name="ur_pretenz" as="kod_pretenz" join="left outer" dname="ur_dogpeny" title="Претензия">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_pretenz" column="kod_pretenz"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>4</const>
            </call>
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_dogpeny" title="Материалы переданные в суд">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_mat" column="kod_mat"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>6</const>
            </call>
          </call>
        </query>
        <query name="ur_inkasso" as="kod_inkasso" join="left outer" dname="ur_dogpeny">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="ur_inkasso" column="kod_inkasso"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>11</const>
            </call>
          </call>
        </query>
        <query name="ur_kazn" as="ur_kazn" join="left outer" dname="ur_dogpeny">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="ur_kazn" column="kod_kazn"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>12</const>
            </call>
          </call>
        </query>
        <query name="ur_stage_bk" as="kod_stage_bk" join="left outer" dname="ur_dogpeny">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_stage_bk" column="kod_stage_bk"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>20</const>
            </call>
          </call>
        </query>
        <query name="ur_likvid" as="kod_likvid" join="left outer" dname="ur_dogpeny">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_likvid" column="kod_likvid"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>30</const>
            </call>
          </call>
        </query>
        <query name="ur_dead" as="kod_dead" join="left outer" dname="ur_dogpeny">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_dead" column="kod_dead"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>37</const>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dogplat" class="1" timestamp="18.10.2021 12:56:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dogplat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dogplat" type="number" key-dimension="kod_dogplat" as="kod_dogplat" key="1" fixed="1" />
        <column table="a" column="kod" type="number" title="" as="kod" key="0" />
        <column table="a" column="kod_deb" type="number" as="kod_deb" reference="sr_debet" refcol="kod_deb" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_form" type="date" title="Дата расч. задолж." editable="is_doc" editable-invert="1" as="dat_form" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="summa" type="number" fact="ur_dp_summa" title="Выставленно по юр. документу" agg="sum" column-mandatory="1" editable="is_doc" editable-invert="1" as="summa" key="0" />
        <column table="a" column="vid_real" type="number" title="" column-mandatory="1" editable="is_doc" editable-invert="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="sum_v" type="number" fact="ur_dp_sum_v" title="Признано по юр. документу" agg="sum" as="sum_v" key="0" />
        <call function="nvl" as="dat" dimension="dat" key="0">
          <column table="a" column="dat_doc" />
          <column table="a" column="dat_bzad" />
        </call>
        <column table="a" column="kod_izv" type="number" as="kod_izv" reference="tnr_izv" refcol="kod_izv" key="0" />
        <column table="a" column="dat_form_v" type="date" title="" as="dat_form_v" key="0" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="по долговому док-ту" as="tep_el" key="0" />
        <column table="a" column="ym" type="number" comment="отчетный период" title="Отчетный период" as="ym" key="0" />
        <column table="a" column="num_doc" type="number" title="" comment="номер документа" as="num_doc" key="0" />
        <column table="a" column="dat_doc" type="date" title="" comment="дата док-та по долговому док-ту" as="dat_doc" key="0" />
        <column table="a" column="dat_bzad" type="date" title="" comment="дата возникновения задолж" as="dat_bzad" key="0" />
        <column table="a" column="dat_mor" type="date" title="" comment="дата мораторной зад-ти" as="dat_mor" key="0" />
        <column table="a" column="dat_priem" type="date" title="" comment="дата снятия показаний прибора учета" as="dat_priem" key="0" />
        <column table="a" column="prizn_konv" type="number" title="" comment="Бельченко: не знаю для чего создавалась будет признаком автоматического счета" is-fact="1" agg="max" as="prizn_konv" fact="ur_dogplat_prizn_konv" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kod_sogl" type="number" as="kod_sogl" key="0" />
        <column table="a" column="kod_pretenz" type="number" as="kod_pretenz" reference="ur_pretenz" refcol="kod_pretenz" key="0" />
        <column table="a" column="kod_mat" type="number" as="kod_mat" key="0" />
        <column table="a" column="kod_inkasso" type="number" as="kod_inkasso" key="0" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" key="0" />
        <column table="a" column="kod_stage_bk" type="number" as="kod_stage_bk" key="0" />
        <column table="a" column="kod_likvid" type="number" as="kod_likvid" key="0" />
        <column table="a" column="kod_dead" type="number" as="kod_dead" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" key="0" />
        <column table="a" column="kod_sf_dp" type="number" comment="kod_sf единственного счёта на платёжке - заполняется при привязке через kod_deb" as="kod_sf_dp" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="kod_deb_sf" type="number" comment="связь с СФ через VV_ALL_DEB_SF" as="kod_deb_sf" reference="vv_all_deb_sf" refcol="kod_deb_sf" key="0" />
        <const type="number" as="cnt" fact="ur_dogplat_count" agg="sum" key="0">1</const>
        <call function="if" as="kod_mat_pp" type="number" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>6</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ssp" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>13</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ip" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>14</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="kod_mat_ba" key="0">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <const>15</const>
          </call>
          <column table="a" column="kod" />
        </call>
        <call function="if" as="has_no_prizn" agg="max" fact="ur_dp_has_no_priz" type="number" key="0">
          <call function="is null">
            <column table="this" column="sum_v" />
          </call>
          <const>1</const>
        </call>
        <call function="if" as="ym_min" agg="min" fact="ur_dogplat_ym_min" title="Период начисления с" type="number" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="if" as="ym_max" agg="max" fact="ur_dogplat_ym_max" title="Период начисления по" type="number" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="if" as="ym_all" agg="stragg" fact="ur_dogplat_ym_all" type="string" format="F2" key="0">
          <call function="not in">
            <column table="this" column="vid_real" />
            <call function="array">
              <const>7</const>
              <const>9</const>
            </call>
          </call>
          <column table="this" column="ym" />
        </call>
        <call function="ym to char" as="ym_str" fact="ur_dogplat_ym_str" agg="stragg" title="Период начисления" key="0">
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_min_priz" agg="min" fact="ur_dp_ym_min_priz" type="number" title="Период начисления с (призн.)" format="F2" key="0">
          <call function="!=0">
            <column table="this" column="sum_v" />
          </call>
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_max_priz" agg="max" fact="ur_dp_ym_max_priz" type="number" title="Период начисления по (призн.)" format="F2" key="0">
          <call function="!=0">
            <column table="this" column="sum_v" />
          </call>
          <column table="this" column="ym_max" />
        </call>
        <call function="case" type="string" as="name_doc" key="0">
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_sf" />
            </call>
            <column table="kod_sf" column="name" />
          </call>
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_deb" />
            </call>
            <column table="kod_deb" column="name" />
          </call>
          <call function="when">
            <call function="is not null">
              <column table="this" column="kod_izv" />
            </call>
            <column table="kod_izv" column="name" />
          </call>
        </call>
        <call function="coalesce" as="is_doc" key="0">
          <column table="this" column="kod_sf" />
          <column table="this" column="kod_deb" />
          <column table="this" column="kod_izv" />
        </call>
        <column table="ur_hist_mat_dec" column="dat_entry_st" dgroup="max" dimension="dat_ur" as="dat_entry_st" key="0" />
        <column table="ur_hist_mat_dec" column="dat_entry_dec" dgroup="max" dimension="dat_ur_ent" as="dat_entry_dec" key="0" />
        <call function="if" agg="min" fact="ur_dp_pr_sch_gp" type="number" title="Признак наличия счета на ГП" as="pr_sch_gp" controlType="UICheck" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>9</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_sch_peni" agg="min" fact="ur_dp_pr_sch_peni" type="number" title="Признак наличия счета на проценты(пени)" controlType="UICheck" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>7</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="pr_sch_shtr" agg="min" fact="ur_dp_pr_sch_shtr" type="number" title="Признак наличия счета на штраф" controlType="UICheck" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="vid_real" />
              <const>4</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_gp" type="date" title="Дата формирования счета на ГП" as="dat_sch_gp" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>9</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_shtr" type="date" title="Дата формирования счета на штраф" as="dat_sch_shtr" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>4</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="if" agg="min" fact="ur_dp_dat_sch_pn" type="date" title="Дата формирования счета на проценты(пени)" as="dat_sch_pn" key="0">
          <call function="=">
            <column table="this" column="vid_real" />
            <const>7</const>
          </call>
          <column table="this" column="dat_form" />
        </call>
        <call function="nvl" as="kod_sf2" key="0">
          <column table="a" column="kod_sf" />
          <column table="a" column="kod_sf_dp" />
        </call>
        <call function="if" as="ym_min_mat" format="F2" type="number" title="Период начисления с (для материалов дела)" is-fact="1" agg="min" fact="ur_dp_ym_min_mat" key="0">
          <call function="is not null">
            <column table="a" column="kod_mat" />
          </call>
          <column table="this" column="ym_min" />
        </call>
        <call function="if" as="ym_max_mat" format="F2" type="number" title="Период начисления по (для материалов дела)" is-fact="1" agg="max" fact="ur_dp_ym_max_mat" key="0">
          <call function="is not null">
            <column table="a" column="kod_mat" />
          </call>
          <column table="this" column="ym_max" />
        </call>
        <call function="if" type="string" as="sum_v_valid" key="0">
          <call function="gt">
            <column table="this" column="sum_v" />
            <column table="this" column="summa" />
          </call>
          <const>'Признанная сумма больше предъявленной.'</const>
        </call>
        <const as="kod_sdp_6" type="number" key="0">6</const>
        <column table="kod_sf" column="vid_real" as="sf_vid_real" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dogplat" as="a">
          <link name="kod_deb_sf" as="kod_deb_sf1" table="vv_all_deb_sf" child="ur_dogplat" field="kod_deb_sf" parent="vv_all_deb_sf" back="ur_dogplat">
            <link name="kod_sf" dimension="1" as="kod_sf1" table="sr_facvip" child="vv_all_deb_sf" field="kod_sf" parent="sr_facvip" back="vv_all_deb_sf">
              <dlink name="sr_opl" dimension="1" as="sr_opl" table="sr_opl" child="sr_opl" field="kod_sf" parent="sr_facvip" back="sr_opl" />
              <dimlink name="kod_deb" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="ym_vozn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </link>
          </link>
          <link name="kod_izv" as="kod_izv1" table="tnr_izv" child="ur_dogplat" field="kod_izv" parent="tnr_izv" back="ur_dogplat" title="Счет">
            <link name="kod_dog" as="kod_dog" table="kr_dogovor" child="tnr_izv" field="kod_dog" parent="kr_dogovor" back="tnr_izv" title="Договор" />
          </link>
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" title="Материалы переданные в суд">
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_hist_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_ba" table="ur_mat_ba" child="ur_mat_ba" field="kod_mat" parent="ur_mat" back="ur_mat_ba">
              <dimlink name="kod_hist_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_dec_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_folders_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_stage_bk" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat" comment="поменятл местами c dec, может сломаться арбитраж" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения">
              <dlink name="ur_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_hist_mat" parent="ur_hist_mat" back="ur_hist_mat_dec" title="Решение по делу" />
            </dlink>
          </link>
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_dogplat" field="kod_folders" parent="ur_folders" back="ur_dogplat" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <dlink name="ur_dp_isp" dimension="1" as="ur_dp_isp" table="ur_dp_isp" child="ur_dp_isp" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_isp">
            <dimlink name="kod_mat_isp" dimension="1" is-private-dimension="1" is-final-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-private-dimension="1" is-final-dimension="1" />
          </dlink>
          <dlink name="ur_dp_inkasso" dimension="1" as="ur_dp_inkasso" table="ur_dp_inkasso" child="ur_dp_inkasso" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_inkasso">
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_kazn" dimension="1" as="ur_dp_kazn" table="ur_dp_kazn" child="ur_dp_kazn" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_kazn">
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_isp_other" dimension="1" as="ur_dp_isp_other" table="ur_dp_isp_other" child="ur_dp_isp_other" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_isp_other">
            <dimlink name="kod_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dp_graf" dimension="1" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_graf">
            <dimlink name="kod_graf" dimension="1" is-final-dimension="1" />
          </dlink>
        </table>
        <query name="sk_vid_real" as="vid_real" join="left outer" dimension="1" dname="ur_dogplat" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="sr_debet" as="kod_deb" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="a" column="kod_deb" />
            <column table="kod_deb" column="kod_deb" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
        <query name="tnr_izv" as="kod_izv" join="left outer" dimension="1" dname="ur_dogplat" title="Счет">
          <call function="=">
            <column table="a" column="kod_izv" />
            <column table="kod_izv" column="kod_izv" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_dogplat" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_dogplat" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sr_facvip" as="kod_sf_dp" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="a" column="kod_sf_dp" />
            <column table="kod_sf_dp" column="kod_sf" />
          </call>
        </query>
        <query name="vv_all_deb_sf" as="kod_deb_sf" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="a" column="kod_deb_sf" />
            <column table="kod_deb_sf" column="kod_deb_sf" />
          </call>
        </query>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dimension="kod_sogl" dname="ur_dogplat" title="Доп. документ (арбитраж)">
          <call function="=">
            <column table="this" column="kod_sogl" />
            <column table="kod_sogl" column="kod_sogl" />
          </call>
        </query>
        <query name="ur_pretenz" as="kod_pretenz" join="left outer" dimension="kod_pretenz" dname="ur_dogplat" title="Претензия">
          <call function="=">
            <column table="a" column="kod_pretenz" />
            <column table="kod_pretenz" column="kod_pretenz" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat" as="kod_mat" join="left outer" dimension="kod_mat" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_pp" as="kod_mat_pp" join="left outer" comment="Претензионно-исковая работа" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_pp" />
            <column table="kod_mat_pp" column="kod_mat" />
          </call>
        </query>
        <query name="ur_inkasso" as="kod_inkasso" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="this" column="kod_inkasso" />
            <column table="kod_inkasso" column="kod_inkasso" />
          </call>
        </query>
        <query name="ur_kazn" as="kod_kazn" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="this" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ssp" as="kod_mat_ssp" join="left outer" comment="ССП" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ssp" />
            <column table="kod_mat_ssp" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ip" as="kod_mat_ip" join="left outer" comment="Исполнительное производство" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ip" />
            <column table="kod_mat_ip" column="kod_mat" />
          </call>
        </query>
        <query name="ur_mat" dname="ur_dogplat_ba" as="kod_mat_ba" join="left outer" comment="Банкротство" title="Материалы переданные в суд">
          <call function="=">
            <column table="this" column="kod_mat_ba" />
            <column table="kod_mat_ba" column="kod_mat" />
          </call>
        </query>
        <query name="ur_stage_bk" as="kod_stage_bk" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="this" column="kod_stage_bk" />
            <column table="kod_stage_bk" column="kod_stage_bk" />
          </call>
        </query>
        <query name="ur_likvid" as="kod_likvid" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="this" column="kod_likvid" />
            <column table="kod_likvid" column="kod_likvid" />
          </call>
        </query>
        <query name="ur_dead" as="kod_dead" join="left outer" dname="ur_dogplat">
          <call function="=">
            <column table="this" column="kod_dead" />
            <column table="kod_dead" column="kod_dead" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dimension="kod_dog" allow-back-reference="1" dname="ur_dogplat" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="kod_folders" dname="ur_dogplat" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dp_graf" timestamp="21.01.2018 01:15:08" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dp_graf.xml" haskeys="1">
      <select>
        <column column="kod_dp_isp" table="a" type="number" as="kod_dp_isp" key="1" fixed="1" />
        <column table="a" column="kod_graf" type="number" as="kod_graf" reference="ur_graf" refcol="kod_graf" key="0" />
        <column column="kod_dogplat" table="a" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="t_m" type="string" data-size="200" as="t_m" key="0" />
        <const type="number" as="cnt" fact="ur_dp_graf_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dp_graf" as="a" table-code="1887">
          <link name="kod_graf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_graf" table="ur_graf" child="ur_dp_graf" field="kod_graf" parent="ur_graf" back="ur_dp_graf">
            <dimlink name="kod_graf_opl" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_dogplat" table="ur_dogplat" child="ur_dp_graf" field="kod_dogplat" parent="ur_dogplat" back="ur_dp_graf">
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </link>
        </table>
        <query join="left outer" name="ur_graf" as="kod_graf" ConstrDelOption="cascade" dname="ur_dp_graf">
          <call function="=">
            <column table="a" column="kod_graf" />
            <column table="kod_graf" column="kod_graf" />
          </call>
        </query>
        <query join="left outer" name="ur_dogplat" as="kod_dogplat" ConstrDelOption="cascade" dname="ur_dp_graf">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dp_inkasso" timestamp="28.12.2017 17:55:07" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dp_inkasso.xml" haskeys="1">
      <select>
        <column column="kod_dp_inkasso" table="a" type="number" as="kod_dp_inkasso" key="1" fixed="1" />
        <column table="a" column="kod_inkasso" type="number" as="kod_inkasso" reference="ur_inkasso" refcol="kod_inkasso" key="0" />
        <column column="kod_dogplat" table="a" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <const type="number" as="cnt" fact="ur_dp_inkasso_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dp_inkasso" as="a" table-code="1885" />
        <query join="left outer" name="ur_inkasso" as="kod_inkasso" dimension="1" dname="ur_dp_inkasso">
          <call function="=">
            <column table="a" column="kod_inkasso" />
            <column table="kod_inkasso" column="kod_inkasso" />
          </call>
        </query>
        <query join="left outer" name="ur_dogplat" as="kod_dogplat" dimension="1" dname="ur_dp_inkasso">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dp_isp" timestamp="28.12.2017 17:55:36" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dp_isp.xml" haskeys="1">
      <select>
        <column column="kod_dp_isp" table="a" type="number" as="kod_dp_isp" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" as="kod_mat" key="0" />
        <column column="kod_dogplat" table="a" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <const type="number" as="cnt" fact="ur_dp_isp_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dp_isp" as="a" table-code="1836">
          <link as="kod_mat_isp1" name="kod_mat_isp" table="ur_mat_isp" child="ur_dp_isp" field="kod_mat_isp" parent="ur_mat_isp" back="ur_dp_isp_isp">
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query join="left outer" name="ur_mat" as="kod_mat" dname="ur_dp_isp" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query join="left outer" name="ur_dogplat" as="kod_dogplat" dimension="1" dname="ur_dp_isp">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
        <query join="left outer" name="ur_mat_isp" as="kod_mat_isp" dimension="1" dname="ur_dp_isp_isp">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_isp" column="kod_mat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dp_isp_other" class="1" timestamp="04.04.2019 13:58:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dp_isp_other.xml" haskeys="1">
      <select>
        <column table="a" column="kod_dp_isp_other" type="number" column-mandatory="1" as="kod_dp_isp_other" key="1" fixed="1" />
        <column table="a" column="kod_isp_other" type="number" as="kod_isp_other" reference="ur_isp_other" refcol="kod_isp_other" key="0" />
        <column table="a" column="kod_dogplat" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <const type="number" as="cnt" fact="ur_dp_isp_other_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dp_isp_other" as="a" />
        <query name="ur_isp_other" as="kod_isp_other" join="left outer" dimension="1" dname="ur_dp_isp_other">
          <call function="=">
            <column table="a" column="kod_isp_other" />
            <column table="kod_isp_other" column="kod_isp_other" />
          </call>
        </query>
        <query name="ur_dogplat" as="kod_dogplat" join="left outer" dimension="1" dname="ur_dp_isp_other">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_dp_kazn" timestamp="28.12.2017 17:55:18" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_dp_kazn.xml" haskeys="1">
      <select>
        <column column="kod_dp_kazn" table="a" type="number" as="kod_dp_kazn" key="1" fixed="1" />
        <column table="a" column="kod_kazn" type="number" as="kod_kazn" reference="ur_kazn" refcol="kod_kazn" key="0" />
        <column column="kod_dogplat" table="a" type="number" as="kod_dogplat" reference="ur_dogplat" refcol="kod_dogplat" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <const type="number" as="cnt" fact="ur_dp_kazn_count" agg="sum" key="0">1</const>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_dp_kazn" as="a" table-code="1886" />
        <query join="left outer" name="ur_kazn" as="kod_kazn" dimension="1" dname="ur_dp_kazn">
          <call function="=">
            <column table="a" column="kod_kazn" />
            <column table="kod_kazn" column="kod_kazn" />
          </call>
        </query>
        <query join="left outer" name="ur_dogplat" as="kod_dogplat" dimension="1" dname="ur_dp_kazn">
          <call function="=">
            <column table="a" column="kod_dogplat" />
            <column table="kod_dogplat" column="kod_dogplat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_efrsb_info_publ" title="Контроль сведений, подл. опубл. в ЕФРСБ" class="1" order="ordinal_number" timestamp="11.11.2024 17:00:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_efrsb_info_publ.xml" haskeys="1">
      <select>
        <column table="a" column="kod_efrsb_info_publ" type="number" key="1" as="kod_efrsb_info_publ" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="dat_publ" type="date" comment="Дата публикации" as="dat_publ" />
        <column table="a" column="publ_in_time" type="number" comment="Соблюдение срока: 0 - Нет, 1 - Да" as="publ_in_time" reference="ur_yn_list" refcol="kod" />
        <column table="a" column="ordinal_number" type="number" comment="Порядок вывода на форму в Карточке по банкротству" as="ordinal_number" />
        <column table="a" column="prim" type="string" comment="Примечание" as="prim" />
        <call function="case" type="string" as="info_to_publ">
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>1</const>
            </call>
            <const>'Сообщение о проведении собрания кредиторов'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>2</const>
            </call>
            <const>'Сведения о решениях, принятых собранием/ комитетом кредиторов или сведения о признании собрания/   комитета кредиторов несостоявшимся'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>3</const>
            </call>
            <const>'Отчет о результатах завершения процедуры'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>4</const>
            </call>
            <const>'Сведения о результатах инвентаризации имущества должника'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>5</const>
            </call>
            <const>'Сведения об оценке имущества должника (при ее проведении)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>6</const>
            </call>
            <const>'Предложение погасить требования кредиторов путем предоставления отступного (при условии превышения количества кредиторов, требования которых не удовлетворены, пятидесяти)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>7</const>
            </call>
            <const>'Сведения о признании кредитной организации банкротом'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>8</const>
            </call>
            <const>'Сведения о ходе конкурсного производства кредитной организации'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>9</const>
            </call>
            <const>'Сведения о намерении предоставить кредитной организации денежные средства для исполнения ее обязательства'</const>
          </call>
        </call>
        <call function="case" type="string" as="srok_po_fz">
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>1</const>
            </call>
            <const>'Не менее чем за 14 дней до даты проведения собрания кредиторов (ст. 13 ФЗ)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>2</const>
            </call>
            <const>'По итогам собраний кредиторов - в течение 5 рабочих дней с даты проведения (ст. 12 ФЗ).'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>3</const>
            </call>
            <const>'Ст. 28 ФЗ'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>4</const>
            </call>
            <const>'В течение 3 рабочих дней с даты окончания инвентаризации имущества должника (ст. 99, 129 ФЗ)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>5</const>
            </call>
            <const>'ст. 110, 130, 139 ФЗ'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>6</const>
            </call>
            <const>'В течение 5 рабочих дней со дня утверждения собранием кредиторов или комитетом кредиторов предложения КУ о порядке предоставления кредиторам отступного (ст. 142.1 ФЗ)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>7</const>
            </call>
            <const>'В течение 5 рабочих дней со дня представления КУ в Банк России документов, подтверждающих его право совершать операции по корреспондентскому счету кредитной организации, признанной банкротом (либо в случае осуществления полномочий конкурсного управляющего Агентством - со дня открытия основного счета кредитной организации в ходе конкурсного производства (ст. 189.74 ФЗ)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>8</const>
            </call>
            <const>'Не позднее 30 дней со дня признания кредитной организации банкротом (ст. 189.75 ФЗ)'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="ordinal_number" />
              <const>9</const>
            </call>
            <const>'В течение 3 рабочих дней с даты получения заявления о намерении (ст. 189.93 ФЗ)'</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ur_efrsb_info_publ" title="Контроль сведений, подл. опубл. в ЕФРСБ" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_efrsb_info_publ" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_yn_list" join="left outer" as="publ_in_time" dname="ur_efrsb_info_publ" title="Список да/нет">
          <call function="=">
            <column table="a" column="publ_in_time" />
            <column column="kod" table="publ_in_time" />
          </call>
        </query>
      </from>
      <order>
        <column column="ordinal_number" />
      </order>
    </query>
    <query name="ur_email_dep" timestamp="17.05.2017 15:59:44" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_email_dep.xml" haskeys="1">
      <select>
        <column table="a" column="kod_email_dep" type="number" key="1" as="kod_email_dep" />
        <column table="a" column="kod_emp" type="number" as="kod_emp" reference="kr_employee" refcol="kod_emp">
          <listquery>
            <query name="kr_employee_email" />
          </listquery>
        </column>
        <column table="a" column="dep" type="number" as="dep" reference="kr_org" refcol="kodp">
          <listquery>
            <query name="kr_dep_all" />
          </listquery>
        </column>
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ur_email_dep" as="a" />
        <query name="kr_employee" as="kod_emp" join="left outer" ConstrDelOption="cascade" dname="ur_email_dep">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="dep" join="left outer" ConstrDelOption="cascade" dname="ur_email_dep">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_folders" title="Папка" class="1" delete-validation="qube.ur_folders_del_vld" timestamp="20.09.2023 22:56:41" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_folders.xml" haskeys="1">
      <select>
        <column table="a" column="kod_folders" type="number" fact="count_ur_folders" agg="count" as="kod_folders" key="1" fixed="1" />
        <column table="a" column="kodp" type="number" title="" column-mandatory="1" new-val="kodp_new_val" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_vi" type="number" as="kod_vi" reference="uk_vi" refcol="kod_vi" key="0" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="dat_create" type="date" title="Дата создания папки" column-mandatory="1" column-default="today" as="dat_create" key="0" />
        <column table="a" column="zadol" type="number" title="" as="zadol" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="ur_folders" key="0" />
        <column table="a" column="kod_isp" type="number" valid="qube.ur_fld_isp_kod_isp_vld" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <buttons>
            <uicommand action-type="dynamic-form-for-select" call="ur_isp_list" />
          </buttons>
        </column>
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" column-default="rs_esys_tepel" as="tep_el" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" column-mandatory="1" column-default="ur_folders_vvod_default" column-editable="0" as="vvod" reference="ur_folders_vvod" refcol="kod" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата сброса папки в архив" comment="дата сброса папки в архив" visible="is_not_new" as="dat_finish" key="0" />
        <column table="a" column="num_doc" type="string" title="Документ (основание для сброса папки в архив)" comment="док-т - основание для архивации папки" visible="is_not_new" as="num_doc" key="0" />
        <column table="a" column="kod_podr" type="number" comment="код подразделения" column-editable="kr_dep_is_multi" column-mandatory="1" column-default="kr_dep_current" as="kod_podr" key="0">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="tep_el_byt" type="number" title="" comment="1-электр,2-тепло" as="tep_el_byt" reference="kk_tep_el" refcol="tep_el" key="0" />
        <column table="a" column="kodp_new" type="number" title="" comment="замена ответчика - новый код" visible="is_not_new" as="kodp_new" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kodps" type="string" title="" comment="код абонента строка" as="kodps" key="0" />
        <column table="a" column="namep" type="string" title="" comment="имя абонета" as="namep" key="0" />
        <column table="a" column="kod_category" type="number" comment="категория абонента" title="Категория потребителя" as="kod_category" reference="us_category" refcol="kod_category" key="0">
          <listquery>
            <query name="us_category" />
          </listquery>
        </column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0" />
        <call function="if" as="kod_abon_type" type="number" key="0">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>4</const>
          </call>
          <const>1</const>
          <const>2</const>
        </call>
        <call as="kodp_new_val" function="()" type="number" key="0">
          <column table="kod_isp" column="kodp" />
        </call>
        <const type="number" as="cnt" fact="ur_folders_count" agg="sum" key="0">1</const>
        <column table="kod_dog" column="ndog" is-fact="1" fact="ur_folders_ndog" agg="max" as="ndog" key="0" />
        <column table="kod_dog" column="name" is-fact="1" fact="ur_folders_dog_name" agg="max" as="name" key="0" />
        <call function="true if null" as="is_active" title="Статус папки" key="0">
          <column table="this" column="dat_finish" dgroup="max" />
        </call>
        <call function="true if 0" as="not_vvod" key="0">
          <column table="this" column="vvod" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="font_color" function="case" title="Цвет текста" type="string" key="0">
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder1" dgroup="max" />
            </call>
            <const>'102,51,99'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="ur_mat" column="mat_reminder2" dgroup="max" />
            </call>
            <const>'139,0,0'</const>
          </call>
        </call>
        <call function="||" as="info_reminder" title="Напоминание" key="0">
          <column table="ur_mat" column="mat_reminder1" />
          <column table="ur_mat" column="mat_reminder2" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_folders" as="a" title="Папка">
          <dlink name="ur_mat" dimension="1" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
            <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
            <dlink name="ur_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_pp" table="ur_mat_pp" child="ur_mat_pp" field="kod_mat" parent="ur_mat" back="ur_mat_pp" title="Иск">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
            <dlink name="ur_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
              <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dlink>
          </dlink>
        </table>
        <query name="kr_employee" as="kod_emp" join="left outer" title="Юрист" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_org" as="kod_podr" join="left outer" title="Отделение" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_podr" column="kodp" />
          </call>
        </query>
        <query name="kr_dep" as="kod_dep" join="left outer" title="Отделение" dimension="1" is-final-dimension="1" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_podr" />
            <column table="kod_dep" column="kodp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dimension="1" dname="ur_folders" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="uk_vi" as="kod_vi" join="left outer" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_vi" />
            <column table="kod_vi" column="kod_vi" />
          </call>
        </query>
        <query name="ur_folders" as="kod_parent" join="left outer" dname="ur_folders" title="Папка">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_folders" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="kr_payer" as="kodp_new" join="left outer" title="Абонент" dname="ur_folders_new">
          <call function="=">
            <column table="a" column="kodp_new" />
            <column table="kodp_new" column="kodp" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el_byt" join="left outer" dname="ur_folders">
          <call function="=">
            <column table="a" column="tep_el_byt" />
            <column table="tep_el_byt" column="tep_el" />
          </call>
        </query>
        <query name="kk_tep_el" as="tep_el" join="left outer" dname="ur_folders">
          <call function="=">
            <column table="a" column="tep_el" />
            <column table="tep_el" column="tep_el" />
          </call>
        </query>
        <query name="us_category" as="kod_category" join="left outer" dname="ur_folders" title="Категория потребителей (юристы)">
          <call function="=">
            <column table="a" column="kod_category" />
            <column table="kod_category" column="kod_category" />
          </call>
        </query>
        <query name="ur_folders_ba" join="left outer" as="kod_folders_ba" dname="ur_folders">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_ba" column="kod_folders_ba" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_folders_new" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_payer_abon_type" as="kod_abon_type" join="left outer" dname="ur_folders">
          <call function="=">
            <column table="kod_abon_type" column="kod_abon_type" />
            <column table="this" column="kod_abon_type" />
          </call>
        </query>
        <query name="ur_folders_vvod" as="vvod" join="left outer" dname="ur_folders" title="Способ учета задолженности">
          <call function="=">
            <column table="a" column="vvod" />
            <column table="vvod" column="kod" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_folders" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="rs_esys" as="kod_esys" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_folders">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="ur_gp_opl_info" class="1" timestamp="08.06.2018 02:28:58" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_gp_opl_info.xml" haskeys="1">
      <select>
        <column table="a" column="nrn" type="number" column-mandatory="1" title="ID записи из КИСУ Парус" as="nrn" key="1" fixed="1" />
        <column table="a" column="sfinoper" type="string" title="Вид финансовой операции" as="sfinoper" key="0" />
        <column table="a" column="snum" type="string" title="Номер платежного документа" as="snum" key="0" />
        <column table="a" column="ddate" type="date" column-mandatory="1" title="Дата платежного документа" as="ddate" key="0" />
        <column table="a" column="npay_sum" type="number" column-mandatory="1" title="Сумма платежного документа" agg="sum" as="npay_sum" key="0" />
        <call function="if" comment="Возврат из бюджета" as="npay_sum_b" agg="sum" is-fact="1" title="Возврат из бюджета" fact="ur_gp_opl_info_npay_sum_b" key="0">
          <call function="and">
            <call function="=">
              <column table="a" column="sfinoper" />
              <const type="string">'Приход'</const>
            </call>
            <call function="=">
              <column table="a" column="svdoc_type" />
              <const type="string">'Справка'</const>
            </call>
          </call>
          <column table="a" column="npay_sum" />
        </call>
        <call function="if" comment="Оплата ответчиком" as="npay_sum_r" agg="sum" is-fact="1" title="Оплата ответчиком" fact="ur_gp_opl_info_npay_sum_r" key="0">
          <call function="and">
            <call function="=">
              <column table="a" column="sfinoper" />
              <const type="string">'Приход'</const>
            </call>
            <call function="or">
              <call function="=">
                <const type="string">'СУД_РЕШ'</const>
                <column table="a" column="svdoc_type" />
              </call>
              <call function="=">
                <const type="string">'П/Т'</const>
                <column table="a" column="svdoc_type" />
              </call>
            </call>
          </call>
          <column table="a" column="npay_sum" />
        </call>
        <call function="if" comment="Оплата госпошлины" as="npay_sum_g" agg="sum" is-fact="1" title="Оплата госпошлины" fact="ur_gp_opl_info_npay_sum_g" key="0">
          <call function="=">
            <column table="a" column="sfinoper" />
            <const type="string">'Расход'</const>
          </call>
          <column table="a" column="npay_sum" />
        </call>
        <column table="a" column="ndog" type="string" title="Номер Договора в ПК АСУСЭ" as="ndog" key="0" />
        <column table="a" column="inn" type="string" title="ИНН Контрагента" as="inn" key="0" />
        <column table="a" column="indebfrom" type="date" title="Период задолженности С" as="indebfrom" key="0" />
        <column table="a" column="indebto" type="date" title="Период задолженности ПО" as="indebto" key="0" />
        <column table="a" column="kodfil" type="string" title="Код филиала Татэнергосбыта" as="kodfil" key="0" />
        <column table="a" column="namefil" type="string" title="Полное наименование филиала Татэнергосбыт" as="namefil" key="0" />
        <column table="a" column="prsud" type="string" title="Признак привязки к судебному делу (не используется)" as="prsud" key="0" />
        <column table="a" column="nsud" type="string" title="Номер судебного дела" as="nsud" key="0" />
        <column table="a" column="svdoc_type" type="string" title="Документ основание: тип" as="svdoc_type" key="0" />
        <column table="a" column="svdoc_numb" type="string" title="Документ основание: номер документа" as="svdoc_numb" key="0" />
        <column table="a" column="dvdoc_date" type="date" title="Документ основание: дата" as="dvdoc_date" key="0" />
        <column table="a" column="sfdoc_type" type="string" title="Документ-подтверждение: тип" as="sfdoc_type" key="0" />
        <column table="a" column="sfdoc_numb" type="string" title="Документ-подтверждение: номер документа" as="sfdoc_numb" key="0" />
        <column table="a" column="dfdoc_date" type="date" title="Документ-подтверждение: дата" as="dfdoc_date" key="0" />
        <column table="a" column="sescort_doctype" type="string" title="Документ-сопровождение: тип" as="sescort_doctype" key="0" />
        <column table="a" column="sescort_docnumb" type="string" title="Документ-сопровождение: номер документа" as="sescort_docnumb" key="0" />
        <column table="a" column="descort_docdate" type="date" title="Документ-сопровождение: дата" as="descort_docdate" key="0" />
        <column table="a" column="deleted" type="number" column-mandatory="1" title="Удален в КИСУ «Парус»" controlType="UICheck" as="deleted" key="0" />
        <column table="a" column="kod_mat" type="number" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <call function="case" as="payer_type" title="Тип оплаты" key="0">
          <call function="when" comment="Возврат из бюджета">
            <call function="and">
              <call function="=">
                <column table="a" column="sfinoper" />
                <const type="string">'Приход'</const>
              </call>
              <call function="=">
                <column table="a" column="svdoc_type" />
                <const type="string">'Справка'</const>
              </call>
            </call>
            <const type="number">2</const>
          </call>
          <call function="when" comment="Оплата отчетчиком">
            <call function="and">
              <call function="=">
                <column table="a" column="sfinoper" />
                <const type="string">'Приход'</const>
              </call>
              <call function="or">
                <call function="=">
                  <const type="string">'СУД_РЕШ'</const>
                  <column table="a" column="svdoc_type" />
                </call>
                <call function="=">
                  <const type="string">'П/Т'</const>
                  <column table="a" column="svdoc_type" />
                </call>
              </call>
            </call>
            <const type="number">1</const>
          </call>
          <call function="when" comment="Оплата госпошлины">
            <call function="=">
              <column table="a" column="sfinoper" />
              <const type="string">'Расход'</const>
            </call>
            <const type="number">0</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_gp_opl_info" as="a" />
        <query name="ur_mat" as="kod_mat" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ur_gp_opl_info" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
      <events>
        <useaction action-type="execute-update" call="ur_folders_g_update_plat" event-name="instead-object-delete">
          <column table="this" column="nrn" />
          <const>null</const>
        </useaction>
      </events>
    </query>
    <query name="ur_graf" class="1" timestamp="29.10.2018 17:53:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_graf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_graf" type="number" key-dimension="kod_graf" is-fact="1" agg="max" as="kod_graf" fact="ur_graf_kod_graf" key="1" fixed="1" />
        <column table="a" column="kod_hist_mat" type="number" mandatory="is_mat" title="Решение" exists="is_mat" as="kod_hist_mat" reference="ur_hist_mat" refcol="kod_hist_mat" key="0">
          <listquery>
            <query name="ur_hist_mat_dec_list_for_graf">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_sogl" type="number" mandatory="is_dop" exists="is_dop" as="kod_sogl" reference="ur_sogl" refcol="kod_sogl" key="0">
          <listquery>
            <query name="ur_sogl_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_isp" type="number" mandatory="is_isp" exists="is_isp" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0">
          <listquery>
            <query name="ur_isp_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="status" type="number" title="" as="status" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_tipdoc" type="number" new-val="kod_tipdoc_new_val" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0" />
        <column table="a" column="kod_graf_status" type="number" comment="Статус графика" as="kod_graf_status" reference="us_graf_status" refcol="kod_graf_status" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата окончания действия графика" mandatory="dat_finish_val" as="dat_finish" key="0" />
        <column table="a" column="dat_opl_beg" type="date" title="Начало учета фактической оплаты" as="dat_opl_beg" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="4000" as="prim" key="0" />
        <column table="a" column="proc_opl_potr" type="number" format="F2" title="Требуемый объем оплаты тек. потр %" as="proc_opl_potr" key="0" />
        <column table="kod_tipdoc" column="ur_prizn" column-editable="1" title="Тип документа" column-mandatory="1" as="ur_prizn" key="0" />
        <call as="doc_type_name" function="case" type="string" title="Тип документа" key="0">
          <call function="when">
            <call function="is not null">
              <column table="a" column="kod_isp" />
            </call>
            <const>'Исполнительный лист'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <column table="a" column="kod_hist_mat" />
            </call>
            <const>'Мировое соглашение (судебное)'</const>
          </call>
          <call function="else">
            <column table="kod_tipdoc" column="name" />
          </call>
        </call>
        <call function="||" as="doc_name" title="Документ" is-name="1" vid="1" key="0">
          <column table="kod_sogl" column="full_name" />
          <column table="kod_isp" column="full_name" />
          <column table="kod_hist_mat2" column="name" />
        </call>
        <call function="coalesce" as="doc_date" type="date" title="Дата документа" key="0">
          <column table="kod_sogl" column="dat_doc" />
          <column table="kod_hist_mat2" column="dat_post" />
          <column table="kod_isp" column="dat_doc" />
        </call>
        <call function="coalesce" as="dat_do" type="date" key="0">
          <column table="kod_sogl" column="dat_do" />
          <column table="kod_isp" column="dat_srok" />
        </call>
        <call function="date to ym" as="ym_do" key="0">
          <column table="this" column="dat_do" />
        </call>
        <column table="kod_folders" column="is_active" as="is_active" key="0" />
        <call function="nvl" as="kod_mat_doc" key="0">
          <column table="kod_mat" column="kod_mat" />
          <column table="kod_mat2" column="kod_mat" />
        </call>
        <call function="nvl" as="dat_opl_beg_nvl" key="0">
          <column table="this" column="dat_opl_beg" />
          <column table="this" column="doc_date" />
        </call>
        <column table="qube_ur_graf" column="ym_min" as="ym_min" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_max" as="ym_max" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_p_min" as="ym_p_min" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="ym_p_max" as="ym_p_max" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="sum_graf" as="sum_graf" key="0" is-fact-use="1" />
        <column table="qube_ur_graf" column="dolg_doc" as="dolg_doc" key="0" is-fact-use="1" />
        <call as="is_isp" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>3</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="is_mat" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="is_dop" function="if" type="number" key="0">
          <call function="=">
            <column table="this" column="ur_prizn" />
            <const>1</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="kod_tipdoc_new_val" function="if" type="number" key="0">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <const>1</const>
          </call>
          <column table="kod_sogl" column="kod_tipdoc" />
          <column table="ur_prizn" column="kod_tipdoc" />
        </call>
        <call as="dat_finish_val" function="if" type="number" key="0">
          <call function="gt">
            <column table="a" column="kod_graf_status" />
            <const>0</const>
          </call>
          <const>1</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_graf" as="a">
          <dlink name="ur_graf_for_dog" dimension="1" as="ur_graf_for_dog" table="ur_graf_for_dog" child="ur_graf_for_dog" field="kod_graf" parent="ur_graf" back="ur_graf_for_dog" />
          <link name="kod_isp" as="kod_isp1" table="ur_isp" child="ur_graf" field="kod_isp" parent="ur_isp" back="ur_graf" title="Исполнительный лист">
            <link name="kod_hist_mat" as="kod_hist_mat" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
              <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд" />
            </link>
          </link>
          <link name="kod_sogl" as="kod_sogl1" table="ur_sogl" child="ur_graf" field="kod_sogl" parent="ur_sogl" back="ur_graf" title="Доп. документ (арбитраж)" />
          <link name="kod_hist_mat" as="kod_hist_mat2" table="ur_hist_mat" child="ur_graf" field="kod_hist_mat" parent="ur_hist_mat" back="ur_graf" title="История рассмотрения">
            <link name="kod_mat" as="kod_mat2" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд" />
          </link>
          <dlink name="ur_graf_opl" pushpred="1" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_graf_opl" table="ur_graf_opl" child="ur_graf_opl" field="kod_graf" parent="ur_graf" back="ur_graf_opl" title="График оплат" />
          <dlink name="ur_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_dp_graf" table="ur_dp_graf" child="ur_dp_graf" field="kod_graf" parent="ur_graf" back="ur_dp_graf">
            <dimlink is-private-dimension="1" is-final-dimension="1" dimension="1" name="kod_dogplat" />
            <dimlink name="vid_real" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1">
              <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dimlink>
          </dlink>
        </table>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dname="ur_graf" title="Доп. документ (арбитраж)">
          <call function="=">
            <column table="a" column="kod_sogl" />
            <column table="kod_sogl" column="kod_sogl" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_graf" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dname="ur_graf" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" dname="ur_graf" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="ur_graf" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_graf" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_graf">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
        <query name="us_graf_status" as="kod_graf_status" join="left outer" dname="ur_graf">
          <call function="=">
            <column table="a" column="kod_graf_status" />
            <column table="kod_graf_status" column="kod_graf_status" />
          </call>
        </query>
        <query name="kk_tipdoc_ur_prizn" as="ur_prizn" join="left outer" dname="ur_graf" title="Тип доп. документа">
          <call function="=">
            <column table="ur_prizn" column="kod" />
            <column table="this" column="ur_prizn" />
          </call>
        </query>
        <query name="qube_ur_graf" as="qube_ur_graf" join="left outer" dname="ur_graf">
          <call function="=">
            <column table="this" column="kod_graf" />
            <column table="qube_ur_graf" column="kod_graf" />
          </call>
        </query>
      </from>
      <actions>
        <action action-type="dynamic-form-create" name="create_form_ur_graf" call="ur_graf_crt" />
      </actions>
      <events>
        <useaction event-name="object-save" name="ur_save.p_graf_sync_bzad">
          <column table="this" column="kod_hist_mat" />
          <column table="this" column="kod_sogl" />
          <column table="this" column="kod_isp" />
        </useaction>
      </events>
    </query>
    <query name="ur_graf_opl" class="1" timestamp="20.07.2016 19:10:17" title="График оплат" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_graf_opl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_graf_opl" type="number" key-dimension="kod_graf_opl" as="kod_graf_opl" key="1" fixed="1" />
        <column table="a" column="dat_opl" type="date" title="Срок оплаты по графику" new-val="dat_opl_new_val" dimension="dat" vid="1" as="dat_opl" key="0" />
        <column table="a" column="sum_opl" type="number" title="Сумма оплаты по графику" fact="ur_graf_opl_sum" agg="sum" vid="1" as="sum_opl" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_graf" type="number" vid="1" as="kod_graf" reference="ur_graf" refcol="kod_graf" key="0" />
        <const type="number" as="cnt" fact="ur_graf_opl_count" agg="sum" key="0">1</const>
        <call function="date to ym" title="Период" as="ym_gaf" dimension="ym_graf" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <call function="date to ym" title="Период" as="ym" dimension="ym" is-private-dimension="ym" is-final-dimension="ym" key="0">
          <column table="a" column="dat_opl" />
        </call>
        <column table="this" column="dat_opl" as="gat_graf" dimension="dat_graf" key="0" />
        <column table="this" column="ym" as="ym_max" column-editable="1" title="Период оплаты" new-val="ym_edit_new_val" agg="max" fact="ur_graf_opl_ym_max" key="0" />
        <column table="this" column="dat_opl" as="dat_min" column-editable="1" new-val="ym_edit_new_val" fact="ur_graf_opl_dat_min" agg="min" title="Дата первой оплаты" key="0" />
        <column table="this" column="dat_opl" as="dat_max" column-editable="1" new-val="ym_edit_new_val" fact="ur_graf_opl_dat_max" agg="max" title="Дата последней оплаты" key="0" />
        <column table="this" column="ym" as="ym_min" column-editable="1" title="Период оплаты" new-val="ym_edit_new_val" fact="ur_graf_opl_ym_min" agg="min" key="0" />
        <column table="this" column="ym" as="ym_edit" column-editable="1" title="Период оплаты" new-val="ym_edit_new_val" key="0" />
        <column table="this" column="ym" as="ym_edit_new_val" key="0" />
        <call as="dat_opl_new_val" function="if" type="date" title=" " key="0">
          <call function="=">
            <column table="this" column="ym" />
            <column table="this" column="ym_edit" />
          </call>
          <column table="this" column="dat_opl" />
          <call function="ym end day">
            <column table="this" column="ym_edit" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_graf_opl" as="a" title="График оплат">
          <link name="kod_graf" as="kod_graf1" table="ur_graf" child="ur_graf_opl" field="kod_graf" parent="ur_graf" back="ur_graf_opl">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_graf_for_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="kk_tipdoc" as="kod_tipdoc" join="left outer" dname="ur_graf_opl" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_graf_opl" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dname="ur_graf_opl" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_graf_opl" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp" column="kod_isp" />
          </call>
        </query>
        <query name="ur_sogl" as="kod_sogl" join="left outer" dname="ur_graf_opl" title="Доп. документ (арбитраж)">
          <call function="=">
            <column table="a" column="kod_sogl" />
            <column table="kod_sogl" column="kod_sogl" />
          </call>
        </query>
        <query name="ur_graf" as="kod_graf" join="left outer" dimension="kod_graf" dname="ur_graf_opl">
          <call function="=">
            <column table="a" column="kod_graf" />
            <column table="kod_graf" column="kod_graf" />
          </call>
        </query>
        <query name="spr_time_ym" as="ym_edit" join="left outer" dname="ur_graf_opl">
          <call function="=">
            <column table="ym_edit" column="ym" />
            <column table="this" column="ym_edit" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_har_fi" class="1" timestamp="22.06.2016 23:45:32" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_har_fi.xml" haskeys="1">
      <select>
        <column table="a" column="kod_har_fi" type="number" as="kod_har_fi" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_ps" type="number" as="kod_ps" reference="us_ps" refcol="kod_ps" key="0" />
        <column table="a" column="summa" type="number" title="Сумма" as="summa" key="0" />
        <column table="a" column="nal" type="number" title="Наличие" controlType="UICheck" as="nal" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_property" type="number" column-mandatory="1" as="kod_property" reference="us_property" refcol="kod_property" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="kod_property_type" type="number" as="kod_property_type" reference="us_property_type" refcol="kod_property_type" key="0">
          <listquery>
            <query name="us_property_type_list">
              <withparams>
                <column table="this" column="kod_property" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_har_fi" as="a" />
        <query name="us_ps" as="kod_ps" join="left outer" dname="ur_har_fi" title="Право собственности">
          <call function="=">
            <column table="a" column="kod_ps" />
            <column table="kod_ps" column="kod_ps" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_har_fi" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_property" as="kod_property" join="left outer" dname="ur_har_fi" title="Тип имущества">
          <call function="=">
            <column table="a" column="kod_property" />
            <column table="kod_property" column="kod_property" />
          </call>
        </query>
        <query name="us_property_type" as="kod_property_type" join="left outer" dname="ur_har_fi" title="Вид имущества">
          <call function="=">
            <column table="a" column="kod_property_type" />
            <column table="kod_property_type" column="kod_property_type" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_hist_mat" class="1" title="История рассмотрения" timestamp="22.09.2023 12:32:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_hist_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_hist_mat" type="number" key-dimension="kod_hist_mat" column-mandatory="1" as="kod_hist_mat" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="kod_result" type="number" valid="qube.kod_result_vld" rows-limit="0" column-mandatory="1" as="kod_result" reference="us_result" refcol="kod_result" key="0">
          <listquery>
            <query name="us_result_list">
              <withparams>
                <column table="this" column="result_kod_post" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="dat_rassm" type="date" title="Дата/время суд. разб." controlType="UIDate" column-mandatory="1" comment="Дата и время судебного разбирательства" as="dat_rassm" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата прин. суд. акта" column-mandatory="1" comment="Дата принятия судебного акта" as="dat_post" key="0" />
        <column table="a" column="gp_es" type="number" title="Гос. пошлина, взысканная с истца" exists="decision" as="gp_es" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" data-size="200" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_zased" type="number" column-mandatory="1" as="kod_zased" reference="us_zased" refcol="kod_zased" key="0">
          <listquery>
            <query name="us_zased_sud" />
          </listquery>
        </column>
        <column table="a" column="gp_otv" type="number" title="Гос. пошлина, взысканная с ответчика" exists="decision" as="gp_otv" key="0" />
        <column table="a" column="ukaz" type="string" controlType="UITextEx" title="Указания" data-size="250" as="ukaz" key="0" />
        <column table="a" column="kod_stage" type="number" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0" />
        <column table="a" column="kod_busin" type="number" as="kod_busin" reference="us_busin" refcol="kod_busin" key="0" />
        <column table="a" column="dat_mor" type="date" comment="признать зад-ть мораторной с..." title="Признать задолженность мораторной с" as="dat_mor" key="0" />
        <column table="a" column="kod_hist_mat_new" type="number" comment="код строки,которая меняет решение суда" as="kod_hist_mat_new" reference="ur_hist_mat" refcol="kod_hist_mat" key="0" />
        <column table="a" column="sud_izd" type="number" comment="судебные издержки" title="Судебные издержки" exists="decision" as="sud_izd" key="0" />
        <column table="a" column="astrent" type="number" comment="судебные издержки" title="Астрент (ручной ввод)" exists="decision" as="astrent" key="0" />
        <column table="a" column="dat_vz" type="date" title="Дата поступления документа взыскателю" comment="дата поступления документа взыскателю" as="dat_vz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" exists="decision" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" default="folder_kodp" as="kodp" key="0" />
        <column table="a" column="opl_peni" type="number" title="Оплачено пени до выдачи исп листа (ручной ввод)" comment="Оплачено пени до выдачи исп листа (ручной ввод)" as="opl_peni" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" exists="decision" as="opl_proc" key="0" />
        <column table="a" column="opl_astrent" type="number" title="Оплачено астрент до выдачи исп листа (ручной ввод)" comment="Оплачено астрент до выдачи исп листа (ручной ввод)" exists="decision" as="opl_astrent" key="0" />
        <column table="a" column="opl_osnreal" type="number" title="Оплачено осн реал до выдачи исп листа (ручной ввод)" comment="Оплачено осн реал до выдачи исп листа (ручной ввод)" as="opl_osnreal" key="0" />
        <column table="a" column="opl_gpotv" type="number" comment="оплата гп отв - руками" title="Оплачено ГП" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="data_prinyat" type="date" title="" comment="дата принятия в суде" as="data_prinyat" key="0" />
        <column table="a" column="snum_z" type="string" title="" comment="номер зала заседания" data-size="10" as="snum_z" key="0" />
        <column table="a" column="fio_court" type="string" title="" comment="фио судьи" data-size="100" as="fio_court" key="0" />
        <column table="a" column="kod_post" type="number" comment="Вид судебного акта" as="kod_post" key="0" />
        <column table="a" column="osnreal" type="number" title="" comment="основная реализация" as="osnreal" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" title="% за польз. чуж. ден. ср." comment="пени" as="peni" key="0" />
        <column table="a" column="manual_sums" type="number" title="" comment="суммы по порожденным исп. листам: 0 - расчитываются автоматически, 1 - заносятся вручную" column-mandatory="1" as="manual_sums" key="0" />
        <column table="a" column="gp_ret" type="number" title="Гос. пошлина, возврат из бюджета" comment="гос пошлина, возвращаемая из бюджета" exists="decision" as="gp_ret" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="dat_entry" type="date" title="Дата вст. реш. в зак. силу" comment="дата вступления решения в законную силу,  Емцов - поменял условие валидации по 38755" valid="dat_entry_vld" as="dat_entry" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок обжалования решения" comment="срок обжалования решения, Емцов - поменял условие обязательности по 38755" exists="decision" mandatory="decision2" as="dat_srok" key="0" />
        <column table="a" column="proc_calc" type="number" comment="1 - расчитывать проценты за несвоевременную оплату по решению суда, только для юр. абонентов (29646(4))" controlType="UICheck" title="Рассчитывать астрент" exists="decision" as="proc_calc" key="0" />
        <column table="a" column="kod_vid_proc" type="number" comment="вид процентной ставки" mandatory="proc_calc" exists="proc_calc" as="kod_vid_proc" reference="sk_vid_proc" refcol="kod_vid_proc" key="0">
          <listquery>
            <query name="sk_vid_proc_list_ur_mat" />
          </listquery>
        </column>
        <column table="a" column="proc_const" type="number" title="%" comment="cтавка рефинансирования вручную (вид процентной ставки - постоянная)" mandatory="is_post_astr_proc_and_calc" exists="is_post_astr_proc_and_calc" default="proc_const_new_val" as="proc_const" key="0" />
        <column table="a" column="opl_sud_izd" type="number" title="Оплачено: Судебные издержки" comment="оплата судебных издержек" exists="decision" as="opl_sud_izd" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_mor_out" type="date" title="Дата искл. задолж. из реестра" comment="Дата исключения задолженности из реестра" as="dat_mor_out" key="0" />
        <column table="a" column="dat_send_il" type="date" title="Дата направления ИЛ в филиал" comment="Дата направления ИЛ в филиал (ТатТепло 45044)" as="dat_send_il" key="0" />
        <column table="a" column="opl_ogr_dat" type="date" title="" comment="Дата оплаты расходов за введение огр. режима энергопотребления" as="opl_ogr_dat" key="0" />
        <column table="a" column="opl_sud_izd_dat" type="date" title="" comment="Дата оплаты cудебных издержек" as="opl_sud_izd_dat" key="0" />
        <column table="a" column="dat_send_zv" type="date" title="Дата направления заявления" comment="Дата направления заявления" as="dat_send_zv" key="0" />
        <column table="a" column="dat_receipt_post" type="date" title="" comment="Дата получения судебного акта (ТатЭнергосбыт 64627)" as="dat_receipt_post" key="0" />
        <column table="a" column="dat_send_petition_il" type="date" title="" comment="Дата направления ходатайства о выдаче ИЛ (ТатЭнергосбыт 64627)" as="dat_send_petition_il" key="0" />
        <column table="a" column="gosposhlina" type="number" comment="Сумма уже взысканных госпошлин" title="Госпошлина" as="gosposhlina" key="0" />
        <column table="a" column="dat_um_mor_dolg" type="date" comment="Дата уменьшения мор. долга" title="Дата уменьшения мор. долга" as="dat_um_mor_dolg" key="0" />
        <column table="a" column="sum_um_mor_dolg" type="number" comment="Сумма уменьшения мор. долга" title="Сумма уменьшения мор. долга" as="sum_um_mor_dolg" key="0" />
        <column table="a" type="number" comment="Код основания уменьшения мор. долга" title="Основание уменьшения мор. долга" column="kod_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" reference="us_osn_um_mor_dolg" refcol="kod_osn_um_mor_dolg" key="0" />
        <column table="a" column="comment_um_mor_dolg" type="string" comment="Комментарий по уменьшению мор. долга" title="Комментарий" as="comment_um_mor_dolg" key="0" />
        <column table="a" type="number" title="Период задолженности с (ручной ввод)" column="period_zadol_s_vvod" as="period_zadol_s_vvod" key="0" />
        <column table="a" type="number" title="Период задолженности по (ручной ввод)" column="period_zadol_po_vvod" as="period_zadol_po_vvod" key="0" />
        <call function="-nvl" as="ostatok_osnreal" title="Остаток задолженности по осн. реал" key="0">
          <column table="a" column="osnreal" />
          <column table="a" column="opl_osnreal" />
        </call>
        <call function="-nvl" as="ostatok_peni" title="Остаток задолженности по пени" key="0">
          <column table="a" column="peni" />
          <column table="a" column="opl_peni" />
        </call>
        <call function="-nvl" as="ostatok_gp_otv" title="Остаток задолженности по гос.пошлине" key="0">
          <column table="a" column="gp_otv" />
          <column table="a" column="opl_gpotv" />
        </call>
        <call function="-nvl" as="ostatok_ogr" title="Остаток задолженности по расходам на ограничения" key="0">
          <column table="a" column="ogr" />
          <column table="a" column="opl_ogr" />
        </call>
        <call function="-nvl" as="ostatok_sud_izd" title="Остаток задолженности по судебным издержкам" key="0">
          <column table="a" column="sud_izd" />
          <column table="a" column="opl_sud_izd" />
        </call>
        <call function="-nvl" as="ostatok_astrent" title="Остаток задолженности по астренту" key="0">
          <column table="a" column="astrent" />
          <column table="a" column="opl_astrent" />
        </call>
        <const type="number" as="cnt" fact="ur_hist_mat_count" agg="sum" key="0">1</const>
        <call function="-" as="ost_proc" title="Остаток задолженности: проценты за пользование чужими денежными средствами" key="0">
          <column table="a" column="proc" nvl="0" />
          <column table="a" column="opl_proc" nvl="0" />
        </call>
        <call function="-" as="ost_ogr" title="Остаток задолж. расх. за введ. огр. реж. энергопотр." key="0">
          <column table="a" column="ogr" nvl="0" />
          <column table="a" column="opl_ogr" nvl="0" />
        </call>
        <call function="-" as="ost_sud_izd" title="Остаток задолж. суд. издерж." key="0">
          <column table="a" nvl="0" column="sud_izd" />
          <column table="a" column="opl_sud_izd" nvl="0" />
        </call>
        <column table="kod_folders" column="kod_sdp" as="folder_kod_sdp" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post" column-editable="1" key="0" />
        <column table="kod_result" column="kod_post" as="result_kod_post_read" key="0" />
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" is-fact="1" agg="sum" fact="ur_hist_mat_gp_all" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <call function="||" as="name" title="Решение" vid="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>' от '</const>
          <call function="date to char">
            <column table="kod_mat" column="dat_doc" />
          </call>
          <const>'  '</const>
          <column table="kod_mat" column="num_delo" />
          <const>'  '</const>
          <column table="kod_result" column="name" />
        </call>
        <call function="||" as="info" title="Решение" vid="1" is-fact="1" fact="ur_hist_mat_info" agg="stragg" key="0">
          <const>'Решение  '</const>
          <column table="kod_result" column="name" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_post" />
          </call>
        </call>
        <column table="ur_isp_last" column="kod_isp_last" as="kod_isp_last" dgroup="max" key="0" />
        <column table="this" column="kod_zased" as="kod_zased_ssp" key="0">
          <listquery>
            <query name="us_zased_ssp" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_ssp" key="0">
          <listquery>
            <query name="us_result_sdp2" />
          </listquery>
        </column>
        <column table="this" column="kod_result" as="kod_result_pp" key="0">
          <listquery>
            <query name="us_result_sdp1" />
          </listquery>
        </column>
        <column table="this" column="kod_mat" as="kod_mat_pp" dimension="kod_mat_pp" is-final-dimension="1" is-private-dimension="1" key="0" />
        <call function="if" type="date" as="dat_post_k_rsm" is-fact="1" fact="ur_hist_mat_dat_pst_k_rsm" title="Дата прин. суд. акта (не решение)" agg="min" key="0">
          <call function="like2">
            <call function="lower">
              <column table="kod_result" column="name" />
            </call>
            <const>'%к рассмотрению%'</const>
          </call>
          <column table="this" column="dat_post" />
        </call>
        <column table="result_kod_post" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_post_name" as="post_name" key="0" />
        <column table="kod_result" column="name" is-fact="1" agg="stragg_dist" fact="ur_hist_mat_result_name" as="result_name" key="0" />
        <column table="kod_folders" column="kodp" as="folder_kodp" key="0" />
        <call function="if" as="is_post_astr_proc" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_vid_proc" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="case" as="dat_entry_vld" type="string" title="Дата вступления, валидация" key="0">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_srok" />
                <call function="trunc">
                  <call function="sysdate" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="dat_entry" />
              </call>
              <call function="=" comment="Емцов - добавил по 38755">
                <column table="this" column="decision2" />
                <const>1</const>
              </call>
            </call>
            <const>'Срок обжалования решения прошел, укажите дату вступления в законную силу'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="dat_entry" />
                <column table="this" column="dat_srok" />
              </call>
            </call>
            <const>'[err]Указанная дата вступления решения в силу наступает ранее срока на обжалование'</const>
          </call>
        </call>
        <call function="if" as="is_post_astr_proc_and_calc" type="string" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="is_post_astr_proc" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="proc_calc" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="-" as="gp_es_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_otv" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="-" as="gp_otv_new_val" key="0">
          <column table="kod_mat" column="sum_gp" />
          <column table="a" column="gp_es" />
          <call function="nvl0">
            <column table="a" column="gp_ret" />
          </call>
        </call>
        <call function="+nvl" as="gp_all" title="Гос. пошлина, всего" key="0">
          <column table="a" column="gp_ret" />
          <column table="a" column="gp_otv" />
          <column table="a" column="gp_es" />
        </call>
        <column table="kod_result" column="decision" as="decision" key="0" />
        <call function="if" as="resh" title="Судебный акт - решение" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="=">
            <column table="kod_result" column="kod_post" />
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="decision2" title="С судебным актом решение и признаком окончательного решения" comment="Емцов - добавил по 38755" type="number" key="0">
          <call function="and">
            <call function="=">
              <column table="this" column="resh" />
              <const>1</const>
            </call>
            <call function="=">
              <column table="this" column="decision" />
              <const>1</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="sg_peny_helper.get_refin_perc" as="proc_const_new_val" key="0">
          <column table="this" column="dat_post" />
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="case" as="decision_not_otmena" type="number" key="0">
          <call function="when">
            <call function="and">
              <call function="!=">
                <column table="kod_result" column="kod_result" />
                <const>99</const>
              </call>
              <call function="is not null">
                <column table="kod_result" column="decision" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_hist_mat" as="a" title="История рассмотрения">
          <link name="kod_mat" as="kod_mat1" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
            <link name="kod_doc" as="kod_doc" table="us_doc" child="ur_mat" field="kod_doc" parent="us_doc" back="ur_mat" title="Документ" />
            <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
          </link>
          <dlink name="ur_isp" dimension="kod_isp" as="ur_isp" table="ur_isp" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="Исполнительный лист" />
          <dlink name="ur_isp_for_mat" dimension="kod_isp_for_mat" as="ur_isp_for_mat" table="ur_isp_for_mat" child="ur_isp_for_mat" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_for_mat" />
          <dlink name="ur_isp_last" as="ur_isp_last" table="ur_isp_last" child="ur_isp_last" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp_last" />
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dimension="kod_mat" dname="ur_hist_mat" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_hist_mat" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_new" join="left outer" dname="ur_hist_mat_new" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat_new" />
            <column table="kod_hist_mat_new" column="kod_hist_mat" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased" join="left outer" title="Судья" dname="ur_hist_mat">
          <call function="=">
            <column table="a" column="kod_zased" />
            <column table="kod_zased" column="kod_zased" />
          </call>
        </query>
        <query name="us_busin" as="kod_busin" join="left outer" dname="ur_hist_mat" title="Основание для прекращения деятельности">
          <call function="=">
            <column table="a" column="kod_busin" />
            <column table="kod_busin" column="kod_busin" />
          </call>
        </query>
        <query name="us_result" as="kod_result" join="left outer" title="Результат рассмотрения" dname="ur_hist_mat">
          <call function="=">
            <column table="a" column="kod_result" />
            <column table="kod_result" column="kod_result" />
          </call>
        </query>
        <query name="sk_vid_proc" as="kod_vid_proc" join="left outer" dname="ur_hist_mat" title="Вид процентной ставки">
          <call function="=">
            <column table="a" column="kod_vid_proc" />
            <column table="kod_vid_proc" column="kod_vid_proc" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_hist_mat" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="us_osn_um_mor_dolg" as="kod_osn_um_mor_dolg" join="left outer" dname="ur_hist_mat" title="Основание уменьшения мор. долга">
          <call function="=">
            <column table="a" column="kod_osn_um_mor_dolg" />
            <column table="kod_osn_um_mor_dolg" column="kod_osn_um_mor_dolg" />
          </call>
        </query>
        <query name="us_post" as="result_kod_post" join="left outer" dname="ur_hist_mat" title="Судебный акт">
          <call function="=">
            <column table="this" column="result_kod_post" />
            <column table="result_kod_post" column="kod_post" />
          </call>
        </query>
        <query name="ur_isp" as="kod_isp_last" join="left outer" dname="-" title="Исполнительный лист">
          <call function="=">
            <column table="this" column="kod_isp_last" />
            <column table="kod_isp_last" column="kod_isp" />
          </call>
        </query>
        <query name="us_zased" as="kod_zased_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Судебный пристав">
          <call function="=">
            <column table="this" column="kod_zased_ssp" />
            <column table="kod_zased_ssp" column="kod_zased" />
          </call>
        </query>
        <query name="us_result" as="kod_result_pp" join="left outer" dname="ur_hist_mat_pp" title="Результат рассмотрения">
          <call function="=">
            <column table="this" column="kod_result_pp" />
            <column table="kod_result_pp" column="kod_result" />
          </call>
        </query>
        <query name="us_result" as="kod_result_ssp" join="left outer" dname="ur_hist_mat_ssp" title="Результат">
          <call function="=">
            <column table="this" column="kod_result_ssp" />
            <column table="kod_result_ssp" column="kod_result" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_hist_mat_scan_docs" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_hist_mat_scan_docs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scan" type="number" comment="уникальный ключ" as="kod_scan" key="1" fixed="1"></column>
        <column table="a" column="kod_hist_mat" type="number" comment="код рассмотрения (из ur_hist_mat)" as="kod_hist_mat" reference="ur_hist_mat" refcol="kod_hist_mat" key="0"></column>
        <column table="a" column="file_name" type="string" title="" comment="имя файла" as="file_name" key="0"></column>
        <column table="a" column="file_size" type="number" title="" comment="размер файла" as="file_size" key="0"></column>
        <column table="a" column="source" type="blob" title="" comment="файл" as="source" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="последний редактирующий пользователь" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="время последнего редактирования" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_hist_mat_scan_docs" as="a"></table>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dname="ur_hist_mat_scan_docs" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat"></column>
            <column table="kod_hist_mat" column="kod_hist_mat"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_inkasso" class="1" timestamp="26.07.2021 04:09:26" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_inkasso.xml" haskeys="1">
      <select>
        <column table="a" column="kod_inkasso" type="number" key-dimension="kod_inkasso" is-fact="1" agg="max" as="kod_inkasso" fact="ur_inkasso_kod_inkasso" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" key="0" />
        <column table="a" column="kod_state" type="number" column-mandatory="1" as="kod_state" reference="us_state" refcol="kod_state" key="0" />
        <column table="a" column="prim" type="string" title="Примечание на инкассо" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер документа на инкассо" column-editable="0" as="num_reg" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата отзыва из банка" is-fact="1" agg="min" as="dat_otz" fact="ur_inkasso_dat_otz" key="0" />
        <column table="a" column="dat_podachi" type="date" title="Дата передачи в банк" column-mandatory="1" column-default="today" is-private-dimension="isp_dat_podachi" is-final-dimension="isp_dat_podachi" dimension="isp_dat_podachi" is-fact="1" fact="ur_inkasso_dat_podachi_min" agg="min" as="dat_podachi" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата документа на инкассо" dimension="dat_ur" column-mandatory="1" column-default="today" as="dat_doc" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата исполнения" as="dat_otv" key="0" />
        <column table="a" column="kodb" type="number" title="" column-mandatory="1" as="kodb" reference="ks_bank" refcol="kodb" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr_v" type="number" title="Удовлетворено расх. за введ. огр. реж. энергопотр." comment="расходы за введение ограничения, удовлетворенные на сумму (татэнерго 31013)" fact="ur_inkasso_ogr_v" agg="sum" as="ogr_v" key="0" />
        <column table="a" column="sud_izd_v" type="number" title="Удовлетворено судебные издержки" comment="судебные издержки, удовлетворенные на сумму (татэнерго 31013)" fact="ur_inkasso_sud_izd_v" agg="sum" as="sud_izd_v" key="0" />
        <column table="a" column="astrent_v" type="number" comment="астрент, удовлетворенный на сумму (32564)" title="Удовлетворено астрент" fact="ur_inkasso_astrent_v" agg="sum" as="astrent_v" key="0" />
        <column table="a" column="kod_scan" type="number" title="" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="kodb" column="name" as="bank_name" agg="stragg" is-fact="1" fact="ur_inkasso_bank_name" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_4" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_doc" />
          </call>
          <const>4</const>
        </call>
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_min" fact="ur_ink_dat_doc_min" agg="min" key="0" />
        <call function="+nvl" as="hand_opl" fact="ur_inkasso_hand_opl" agg="sum" key="0">
          <column table="this" column="ogr_v" />
          <column table="this" column="sud_izd_v" />
          <column table="this" column="astrent_v" />
        </call>
        <const as="cnt" type="number" agg="sum" is-fact="1" fact="ur_inkasso_count" key="0">1</const>
        <call function="||" as="info" agg="max" is-fact="1" fact="ur_inkasso_info" key="0">
          <call function="if">
            <call function="is not null">
              <column table="kod_ur_state" column="kod_ur_state" />
            </call>
            <call function="||">
              <const>'Состояние: '</const>
              <column table="kod_ur_state" column="name" />
            </call>
          </call>
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_otv" />
            </call>
            <call function="||">
              <const>chr(10)||chr(13)</const>
              <const>'Дата исполнения: '</const>
              <call function="date to char">
                <column table="a" column="dat_otv" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_otz" />
            </call>
            <call function="||">
              <const>chr(10)||chr(13)</const>
              <const>'Дата отзыва из банка: '</const>
              <call function="date to char">
                <column table="a" column="dat_otz" />
              </call>
            </call>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_inkasso" as="a">
          <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_inkasso" parent="ur_inkasso" back="ur_dogplat" />
          <dlink name="ur_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_dp_inkasso" table="ur_dp_inkasso" child="ur_dp_inkasso" field="kod_inkasso" parent="ur_inkasso" back="ur_dp_inkasso">
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="vid_real" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="ym_vozn" />
            </dimlink>
          </dlink>
          <link name="kod_folders_isp" as="kod_folders_isp1" table="ur_folders_isp" child="ur_inkasso" field="kod_folders_isp" parent="ur_folders_isp" back="ur_inkasso_isp" title="Папка исполнительного производства">
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="us_state" as="kod_state" join="left outer" dname="ur_inkasso" title="Состояние документа">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
        <query name="ks_bank" as="kodb" join="left outer" dname="ur_inkasso">
          <call function="=">
            <column table="a" column="kodb" />
            <column table="kodb" column="kodb" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_inkasso" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_inkasso" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_inkasso" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_inkasso" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_inkasso" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_folders_isp" as="kod_folders_isp" join="left outer" dimension="kod_folders_isp" dname="ur_inkasso_isp" title="Папка исполнительного производства">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_isp" column="kod_folders" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp" class="1" title="Исполнительный лист" timestamp="09.09.2023 12:57:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp" type="number" key-dimension="kod_isp" as="kod_isp" key="1" fixed="1" />
        <column table="a" column="num_reg" type="string" title="Номер исп. листа" column-mandatory="1" as="num_reg" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата выдачи исп. листа" fact="ur_isp_dat_doc" agg="max" dimension="dat_ur" as="dat_doc" key="0" />
        <column table="a" column="gp_es" type="number" title="" as="gp_es" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="gp_otv" type="number" title="" as="gp_otv" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления исп.листа в отделение" comment="дата поступл.исп.листа в отделение" as="dat_post" key="0" />
        <column table="a" column="dat_function" type="date" title="Дата вступления в силу акта" comment="дата начала срока действия исп.листа" column-mandatory="1" as="dat_function" key="0" />
        <column table="a" column="dat_srok" type="date" title="Дата отсрочки исп. листа" comment="срок предоставления отсрочки / рассрочки по исп. листу" as="dat_srok" key="0" />
        <column table="a" column="kod_emp" type="number" comment="юрист" title="Юрист отв. за получ. ИЛ, учет, пердачу принуд. исп." column-mandatory="1" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_hist_mat" type="number" valid="qube.isp_kod_hist_mat_vld" column-mandatory="1" as="kod_hist_mat" key="0">
          <listquery>
            <query name="ur_hist_mat_dec_list_for_il">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0" />
        <column table="a" column="opl_proc" type="number" title="" comment="оплата процентов - руками" as="opl_proc" key="0" />
        <column table="a" column="opl_gpotv" type="number" title="" comment="оплата гп отв - руками" as="opl_gpotv" key="0" />
        <column table="a" column="ogr" type="number" title="" comment="расходы за введение ограничения режима электропотребления" as="ogr" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="osnr" type="number" title="" comment="основная реализация" as="osnr" key="0" />
        <column table="a" column="peni" type="number" title="" comment="пени" as="peni" key="0" />
        <column table="a" column="shtraf" type="number" title="" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="dat_present" type="date" title="" comment="дата предъявления" as="dat_present" key="0" />
        <column table="a" column="sum_present" type="number" title="" comment="сумма продъявления" as="sum_present" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" comment="примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="kod_isp_type" type="number" comment="тип листа: основной/дополнительный" as="kod_isp_type" reference="ur_isp_type" refcol="kod_isp_type" key="0" />
        <column table="a" column="kod_info_potr" type="number" comment="код ответчика (владивосток)" as="kod_info_potr" reference="tr_info_potr" refcol="kod_info_potr" key="0" />
        <column table="a" column="opl_ogr" type="number" title="" comment="вручную: оплата расходов за ограничение электропотребления " as="opl_ogr" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="work_done" type="string" title="" comment="татэнерго 38754 - проделанная работа" as="work_done" key="0" />
        <column table="a" column="dat_post_upr" type="date" title="Дата поступления исп.листа в управление" comment="дата поступл.исп.листа в управление" as="dat_post_upr" key="0" />
        <column table="a" column="incoming_number" type="string" data-size="20" comment="Вхoдящий номер (ТатЭнергосбыт 64630)" as="incoming_number" key="0" />
        <column table="a" column="number_sz" type="string" data-size="20" comment="Номер служебной записки о направлении ИД в филиал (ТатЭнергосбыт 64630)" as="number_sz" key="0" />
        <column table="a" column="date_sz" type="date" comment="Дата служебной записки о направлении ИД в филиал (ТатЭнергосбыт 64630)" as="date_sz" key="0" />
        <column table="a" column="opl_sud_izd_vvod" type="number" comment="Оплачено судебные издержки по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_sud_izd_vvod" fact="ur_isp_opl_sud_izd_vvod" key="0" />
        <column table="a" column="opl_astrent_vvod" type="number" comment="Оплачено астрент по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_astrent_vvod" fact="ur_isp_opl_astrent_vvod" key="0" />
        <column table="a" column="opl_gp_vvod" type="number" comment="Оплачено ГП по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_gp_vvod" fact="ur_isp_opl_gp_vvod" key="0" />
        <column table="a" column="opl_ogr_vvod" type="number" comment="Оплачено ограничение режима по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_ogr_vvod" fact="ur_isp_opl_ogr_vvod" key="0" />
        <column table="a" column="opl_peni_vvod" type="number" comment="Оплачено пени по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_peni_vvod" fact="ur_isp_opl_peni_vvod" key="0" />
        <column table="a" column="opl_osnreal_vvod" type="number" comment="Оплачено осн реал по исп листу (ручной ввод карточка ПИР)" is-fact="1" agg="sum" as="opl_osnreal_vvod" fact="ur_isp_opl_osnreal_vvod" key="0" />
        <call function="||" as="full_name" title="Исполнительный лист" is-name="1" key="0">
          <column table="this" column="num_reg" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_doc" />
          </call>
        </call>
        <call function="||" as="info" title="Исполнительный лист" fact="ur_isp_info" agg="max" key="0">
          <const>'ИЛ № '</const>
          <column table="this" column="num_reg" />
          <const>' от '</const>
          <call function="date to char">
            <column table="this" column="dat_doc" />
          </call>
        </call>
        <const type="number" as="cnt" fact="ur_isp_count" agg="sum" key="0">1</const>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_folders" column="kod_podr" as="kod_podr" key="0" />
        <column table="this" column="dat_doc" type="date" title="Дата выдачи исп. листа" dimension="dat" as="dat_doc1" key="0" />
        <call function="if" type="string" as="dat_doc_vld" is-fact="1" agg="max" fact="ur_isp_dat_doc_vld" title=" " key="0">
          <call function="and">
            <call function="is not null">
              <column table="kod_hist_mat_dec" column="dat_entry" />
            </call>
            <call function="is null">
              <column table="a" column="dat_doc" />
            </call>
            <call function="gt">
              <call function="sysdate" />
              <call function="date add days">
                <column table="kod_hist_mat_dec" column="dat_entry" />
                <const>14</const>
              </call>
            </call>
          </call>
          <const>'[inf]Не заполнена дата выдачи исп. листа. Прошло более 14-ти дней с момента вступления решения в законную силу'</const>
        </call>
        <column table="kod_isp_q" column="kod_status_opl" as="kod_status_opl" key="0" />
        <column table="kod_isp_q" column="dolg_on_il_hnd" as="dolg_on_il_hnd" key="0" is-fact-use="1" />
        <column table="kod_isp_q" column="ur_opl_posl_il_hnd" as="ur_opl_posl_il_hnd" key="0" is-fact-use="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp" as="a" title="Исполнительный лист">
          <link name="kod_hist_mat" as="kod_hist_mat1" table="ur_hist_mat" child="ur_isp" field="kod_hist_mat" parent="ur_hist_mat" back="ur_isp" title="История рассмотрения">
            <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="Материалы переданные в суд">
              <link name="kod_folders" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
            </link>
          </link>
          <dlink name="ur_folders_isp" dimension="1" as="ur_folders_isp" table="ur_folders_isp" child="ur_folders_isp" field="kod_isp" parent="ur_isp" back="ur_folders_isp" title="Папка исполнительного производства">
            <dimlink name="kod_mat_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_hist_mat_isp" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_inkasso" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <link name="kod_hist_mat_dec" as="kod_hist_mat_dec1" table="ur_hist_mat_dec" child="ur_isp" field="kod_hist_mat_dec" parent="ur_hist_mat_dec" back="ur_isp" title="Решение по делу">
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_isp_other" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dp_graf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_isp" field="kod_folders" parent="ur_folders" back="ur_isp" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_isp_type" as="kod_isp_type" join="left outer" dname="ur_isp">
          <call function="=">
            <column table="a" column="kod_isp_type" />
            <column table="kod_isp_type" column="kod_isp_type" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_isp">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat" join="left outer" dimension="kod_hist_mat" dname="ur_isp" title="История рассмотрения">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="tr_info_potr" as="kod_info_potr" join="left outer" dname="ur_isp">
          <call function="=">
            <column table="a" column="kod_info_potr" />
            <column table="kod_info_potr" column="kod_info_potr" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_isp" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_isp" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_hist_mat_dec" as="kod_hist_mat_dec" join="left outer" dimension="kod_hist_mat" dname="ur_isp" title="Решение по делу">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat_dec" column="kod_hist_mat" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_isp" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="ur_isp_qube" as="kod_isp_q" join="left outer" dname="ur_isp">
          <call function="=">
            <column table="a" column="kod_isp" />
            <column table="kod_isp_q" column="kod_isp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp_list" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_list.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp_list" type="number" as="kod_isp_list" key="1" fixed="1" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="kod_reg" type="number" comment="регистрационный номер листа в журнале" as="kod_reg" key="0" />
        <column table="a" column="date_registration" type="date" title="" comment="дата регистрации листа (может быть задана вручную), 01.01.0001 - если не задана" as="date_registration" key="0" />
        <column table="a" column="date_report" type="date" title="" comment="дата вынесения решения, 01.01.0001 - если не задана" as="date_report" key="0" />
        <column table="a" column="kod_sud" type="number" comment="код судебного участка в us_sud (для случая когда дело вводилось вручную), -1 - если не задан" as="kod_sud" key="0" />
        <column table="a" column="kod_mat" type="number" comment="код дела в ur_mat (0 - если дело задавалось вручную, -1 - если не задано)" as="kod_mat" key="0" />
        <column table="a" column="mat_num" type="string" title="" comment="номер дела (дублирует поле в ur_mat)" as="mat_num" key="0" />
        <column table="a" column="kod_isp" type="number" comment="код листа в таблице ur_isp (0 - если там такого листа нет)" as="kod_isp" key="0" />
        <column table="a" column="isp_num" type="string" title="" comment="регистрационный номер листа (дублирует поле в ur_isp)" as="isp_num" key="0" />
        <column table="a" column="date_issue" type="date" title="" comment="дата выдачи листа, 01.01.0001 - если не задана" as="date_issue" key="0" />
        <column table="a" column="kodp" type="number" title="" comment="код должника (0 - если должник задан вручную, -1 - если не задан)" as="kodp" key="0" />
        <column table="a" column="fio_debtor" type="string" title="" comment="фио должника" as="fio_debtor" key="0" />
        <column table="a" column="kodd" type="number" title="" comment="код дома (для получения адреса, -1 - если не задан)" as="kodd" key="0" />
        <column table="a" column="debt_sum" type="number" title="" comment="задолженность" as="debt_sum" key="0" />
        <column table="a" column="kod_pp" type="number" comment="код места предъявления из ur_present_place (-1 - если не задан)" as="kod_pp" key="0" />
        <column table="a" column="date_present" type="date" title="" comment="дата предъявления листа, 01.01.0001 - если не задана" as="date_present" key="0" />
        <column table="a" column="date_adding" type="date" title="" comment="дата добавления листа в базу (задается автоматически)" as="date_adding" key="0" />
        <column table="a" column="is_manual" type="number" title="" comment="0 - лист есть в ur_isp, 1 - лист занесен вручную и не подлежит синхронизации с ur_isp" as="is_manual" key="0" />
        <column table="a" column="prim" type="string" title="" comment="примечание" as="prim" key="0" />
        <column table="a" column="kod_info_potr" type="number" comment="код ответчика из таблицы tr_info_potr" as="kod_info_potr" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_list" as="a" />
      </from>
    </query>
    <query name="ur_isp_other" class="1" timestamp="22.09.2023 15:00:01" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_other.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp_other" type="number" as="kod_isp_other" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" column-mandatory="1" as="kod_folders" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_event" type="date" title="Дата события" comment="Дата события" as="dat_event" key="0" />
        <column table="a" column="name" type="string" data-size="30" title="Наименование" comment="Наименование события" as="name" key="0" />
        <column table="a" column="paid_rvre" type="number" title="" comment="Задолженность удовлетворена на сумму : Расх. за введ. огр. реж. элеткропотр." agg="sum" is-fact="1" as="paid_rvre" fact="ur_isp_other_paid_rvre" key="0" />
        <column table="a" column="paid_astr" type="number" title="" comment="Задолженность удовлетворена на сумму : Астрент" agg="sum" is-fact="1" as="paid_astr" fact="ur_isp_other_paid_astr" key="0" />
        <column table="a" column="paid_sud_izd" type="number" title="" comment="Задолженность удовлетворена на сумму : Судебные издержки" agg="sum" is-fact="1" as="paid_sud_izd" fact="ur_isp_other_paid_sud_izd" key="0" />
        <column table="a" column="paid_onsreal" type="number" title="" comment="Задолженность удовлетворена на сумму : Основная реализация" agg="sum" is-fact="1" as="paid_onsreal" fact="ur_isp_other_paid_onsreal" key="0" />
        <column table="a" column="paid_peni" type="number" title="" comment="Задолженность удовлетворена на сумму : Пени" agg="sum" is-fact="1" as="paid_peni" fact="ur_isp_other_paid_peni" key="0" />
        <column table="a" column="paid_gp" type="number" title="" comment="Задолженность удовлетворена на сумму : Госпошлина" agg="sum" is-fact="1" as="paid_gp" fact="ur_isp_other_paid_gp" key="0" />
        <call function="+nvl" as="hand_opl" fact="ur_isp_other_hand_opl" agg="sum" comment="ручные оплаты" key="0">
          <column table="this" column="paid_rvre" />
          <column table="this" column="paid_astr" />
          <column table="this" column="paid_sud_izd" />
          <column table="this" column="paid_onsreal" />
          <column table="this" column="paid_peni" />
          <column table="this" column="paid_gp" />
        </call>
        <call function="over" type="date" as="dat_next_event" comment="Дата следующего события" key="0">
          <call function="lead">
            <column table="this" column="dat_event" />
          </call>
          <call function="partition by">
            <column table="this" column="kod_folders" />
          </call>
          <call function="order by 2">
            <column table="this" column="dat_event" />
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_other" as="a" />
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_isp_other" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_folders_isp" as="kod_folders_isp" join="left outer" dimension="kod_folders_isp" dname="ur_isp_other_isp" title="Папка исполнительного производства">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_isp" column="kod_folders" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp_other_prim" class="1" timestamp="03.02.2023 11:32:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_other_prim.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp_other_prim" type="number" column-mandatory="1" as="kod_isp_other_prim" key="1" fixed="1" />
        <column table="a" column="kod_isp_other" type="number" column-mandatory="1" as="kod_isp_other" reference="ur_isp_other" refcol="kod_isp_other" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" as="d_m" key="0" />
        <column table="a" column="prim" type="string" data-size="1500" comment="Исполнительные действия" as="prim" key="0" />
        <column table="a" column="date_dept_reduction" type="date" comment="Дата уменьшения долга по ИП" as="date_dept_reduction" key="0" />
        <column table="a" column="amount" type="number" comment="Сумма уменьшения долга по ИП" as="amount" key="0" />
        <column table="a" column="reason" type="number" comment="Основание уменьшения долга по ИП" as="reason" reference="ur_isp_other_reason" refcol="id" key="0" />
        <column table="a" column="prim2" type="string" data-size="1500" comment="Комментарий" as="prim2" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_other_prim" as="a" />
        <query name="ur_isp_other_reason" as="reason" join="left outer" dname="ur_isp_other_prim">
          <call function="=">
            <column table="a" column="reason" />
            <column table="reason" column="id" />
          </call>
        </query>
        <query name="ur_isp_other" as="kod_isp_other" join="left outer" dname="ur_isp_other_prim">
          <call function="=">
            <column table="a" column="kod_isp_other" />
            <column table="kod_isp_other" column="kod_isp_other" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp_other_reason" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_other_reason.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_other_reason" as="a" />
      </from>
    </query>
    <query name="uv_isp_other_reason_list" order="name" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_other_reason.xml" haskeys="1">
      <select>
        <column table="a" column="id" type="number" column-mandatory="1" as="id" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="250" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_other_reason" as="a" />
      </from>
      <where>
        <call function="gt">
          <column table="a" column="id" />
          <const>0</const>
        </call>
      </where>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="ur_isp_scan_docs" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_scan_docs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scan" type="number" comment="уникальный ключ" as="kod_scan" key="1" fixed="1"></column>
        <column table="a" column="kod_isp" type="number" comment="код исполнительного листа (из ur_isp)" as="kod_isp" reference="ur_isp" refcol="kod_isp" key="0"></column>
        <column table="a" column="file_name" type="string" title="" comment="имя файла" as="file_name" key="0"></column>
        <column table="a" column="file_size" type="number" title="" comment="размер файла" as="file_size" key="0"></column>
        <column table="a" column="source" type="blob" title="" comment="файл" as="source" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="последний редактирующий пользователь" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="время последнего редактирования" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_scan_docs" as="a"></table>
        <query name="ur_isp" as="kod_isp" join="left outer" dname="ur_isp_scan_docs" title="Исполнительный лист">
          <call function="=">
            <column table="a" column="kod_isp"></column>
            <column table="kod_isp" column="kod_isp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_isp_type" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_isp_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_isp_type" type="number" comment="уникальный ключ, генерируется автоматически" as="kod_isp_type" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Наименование" comment="описание типа ил" as="name" key="0"></column>
        <column table="a" column="prim" type="string" title="" as="prim" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_isp_type" as="a"></table>
      </from>
    </query>
    <query name="ur_kazn" class="1" timestamp="26.07.2021 04:08:31" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_kazn.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kazn" type="number" key-dimension="kod_kazn" is-fact="1" agg="max" as="kod_kazn" fact="ur_kazn_kod_kazn" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" key="0" />
        <column table="a" column="kod_state" type="number" column-mandatory="1" as="kod_state" reference="us_state" refcol="kod_state" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер документа в казначействе" column-editable="0" is-fact="1" agg="stragg" as="num_reg" fact="ur_kazn_num_reg" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата исполнения" is-fact="1" agg="min" as="dat_otv" fact="ur_kazn_dat_otv" key="0" />
        <column table="a" column="num_pril" type="string" title="" as="num_pril" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата документа в казначействе" dimension="dat_ur" column-mandatory="1" column-default="today" as="dat_doc" key="0" />
        <column table="a" column="kod_dog_kazn" type="number" as="kod_dog_kazn" reference="ks_kazn" refcol="kod_kazn" key="0" />
        <column table="a" column="dat_podachi" type="date" title="Дата передачи в казначейство" column-mandatory="1" column-default="today" is-private-dimension="isp_dat_podachi" is-final-dimension="isp_dat_podachi" dimension="isp_dat_podachi" is-fact="1" fact="ur_kazn_dat_podachi_min" agg="min" as="dat_podachi" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата отзыва из казначейства" is-fact="1" agg="min" as="dat_otz" fact="ur_kazn_dat_otz" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="kod_scan" type="number" title="" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="ogr_v" type="number" title="Удовлетворено расх. за введ. огр. реж. энергопотр." comment="расходы за введение ограничения, удовлетворенные на сумму (татэнерго 31013)" agg="sum" fact="ur_kazn_ogr_v" as="ogr_v" key="0" />
        <column table="a" column="sud_izd_v" type="number" title="Удовлетворено судебные издержки" comment="судебные издержки, удовлетворенные на сумму (татэнерго 31013)" fact="ur_kazn_sud_izd_v" agg="sum" as="sud_izd_v" key="0" />
        <column table="a" column="astrent_v" type="number" comment="астрент, удовлетворенный на сумму (32564)" title="Удовлетворено астрент" fact="ur_kazn_astrent_v" agg="sum" as="astrent_v" key="0" />
        <call function="if" type="number" as="kod_ur_state" fact="kod_ur_state_5" agg="max" key="0">
          <call function="is not null">
            <column table="this" column="dat_doc" />
          </call>
          <const>5</const>
        </call>
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <column table="this" column="dat_doc" as="dat_doc_min" fact="ur_kazn_dat_doc_min" agg="min" key="0" />
        <call function="+nvl" as="hand_opl" fact="ur_kazn_hand_opl" agg="sum" key="0">
          <column table="this" column="ogr_v" />
          <column table="this" column="sud_izd_v" />
          <column table="this" column="astrent_v" />
        </call>
        <const as="cnt" type="number" agg="sum" is-fact="1" fact="ur_kazn_count" key="0">1</const>
        <call function="||" as="info" agg="max" is-fact="1" fact="ur_kazn_info" key="0">
          <call function="if">
            <call function="is not null">
              <column table="kod_ur_state" column="kod_ur_state" />
            </call>
            <call function="||">
              <const>'Состояние: '</const>
              <column table="kod_ur_state" column="name" />
            </call>
          </call>
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_otv" />
            </call>
            <call function="||">
              <const>chr(10)||chr(13)</const>
              <const>'Дата исполнения: '</const>
              <call function="date to char">
                <column table="a" column="dat_otv" />
              </call>
            </call>
          </call>
          <call function="if">
            <call function="is not null">
              <column table="a" column="dat_otz" />
            </call>
            <call function="||">
              <const>chr(10)||chr(13)</const>
              <const>'Дата отзыва из банка: '</const>
              <call function="date to char">
                <column table="a" column="dat_otz" />
              </call>
            </call>
          </call>
        </call>
        <column table="kod_state" column="name" as="state_name" is-fact="1" agg="stragg" fact="ur_kazn_state_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_kazn" as="a">
          <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_kazn" parent="ur_kazn" back="ur_dogplat" />
          <dlink name="ur_dp_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_dp_kazn" table="ur_dp_kazn" child="ur_dp_kazn" field="kod_kazn" parent="ur_kazn" back="ur_dp_kazn">
            <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_sf" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="vid_real" />
              <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="ym_vozn" />
            </dimlink>
          </dlink>
          <link name="kod_folders_isp" as="kod_folders_isp1" table="ur_folders_isp" child="ur_kazn" field="kod_folders_isp" parent="ur_folders_isp" back="ur_kazn_isp" title="Папка исполнительного производства">
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_pp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="us_state" as="kod_state" join="left outer" dname="ur_kazn" title="Состояние документа">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
        <query name="ks_kazn" as="kod_dog_kazn" join="left outer" dname="ur_kazn" title="Казначейство">
          <call function="=">
            <column table="a" column="kod_dog_kazn" />
            <column table="kod_dog_kazn" column="kod_kazn" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_kazn" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_kazn" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_kazn" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="ur_state" as="kod_ur_state" join="left outer" dimension="kod_ur_state" dname="ur_kazn" title="Юр. статус">
          <call function="=">
            <column table="this" column="kod_ur_state" />
            <column table="kod_ur_state" column="kod_ur_state" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_kazn" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_folders_isp" as="kod_folders_isp" join="left outer" dimension="kod_folders_isp" dname="ur_kazn_isp" title="Папка исполнительного производства">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders_isp" column="kod_folders" />
          </call>
        </query>
      </from>
      <events>
        <useaction event-name="object-save" action-type="custom">
          <useaction action-type="execute-update" call="ur_kazn_upd_num_reg">
            <column table="this" column="kod_kazn" />
          </useaction>
        </useaction>
      </events>
    </query>
    <query name="ur_likvid" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_likvid.xml" haskeys="1">
      <select>
        <column table="a" column="kod_likvid" type="number" as="kod_likvid" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер документа ликвидации" as="num_reg" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата требования ликвидации" comment="дата заявления" as="dat_doc" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата удовлетворения требований" comment="дата выполнения треб." as="dat_otv" key="0" />
        <column table="a" column="dat_publ" type="date" title="Дата публикации в прессе" comment="дата публикации" as="dat_publ" key="0" />
        <column table="a" column="num_och" type="number" title="Очередность" as="num_och" key="0" />
        <column table="a" column="prim" type="string" title="Примичание по ликвидации" as="prim" key="0" />
        <column table="a" column="dat_treb" type="date" title="Дата получения ответа на требование" comment="дата получения ответа на треб." as="dat_treb" key="0" />
        <column table="a" column="fio_upr" type="string" title="" as="fio_upr" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="phone_upr" type="string" title="" as="phone_upr" key="0" />
        <column table="a" column="dat_prom_bal" type="date" title="Дата утверждения промежуточного баланса" as="dat_prom_bal" key="0" />
        <column table="a" column="dat_end_bal" type="date" title="Дата утверждения окончательного баланса" as="dat_end_bal" key="0" />
        <column table="a" column="num_reestr" type="string" title="Номер исключения из реестра" comment="номер реестра исключения должника" as="num_reestr" key="0" />
        <column table="a" column="dat_reestr" type="date" title="Дата исключения из реестра" as="dat_reestr" key="0" />
        <column table="a" column="kod_iskl" type="number" as="kod_iskl" reference="us_iskl" refcol="kod_iskl" key="0" />
        <column table="a" column="dat_bk" type="date" title="Дата введения процедуры банкротства" comment="дата введения проц. банкроства" as="dat_bk" key="0" />
        <column table="a" column="dat_uved" type="date" title="Дата уведомления о ликвидации" as="dat_uved" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="sud_izd" type="number" title="" comment="судебные издержки (татэнерго 31013)" as="sud_izd" key="0" />
        <column table="a" column="sud_izd_v" type="number" title="" comment="признано по судебным издержкам (татэнерго 31013)" as="sud_izd_v" key="0" />
        <column table="a" column="astrent" type="number" title="" comment="астрент (татэнерго 32564)" as="astrent" key="0"></column>
        <column table="a" column="astrent_v" type="number" title="" comment="признано по астренту (татэнерго 32564)" as="astrent_v" key="0"></column>
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_likvid" as="a">
          <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_likvid" parent="ur_likvid" back="ur_dogplat" />
        </table>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_likvid" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders"></column>
            <column table="kod_folders" column="kod_folders"></column>
          </call>
        </query>
        <query name="us_iskl" as="kod_iskl" join="left outer" dname="ur_likvid">
          <call function="=">
            <column table="a" column="kod_iskl"></column>
            <column table="kod_iskl" column="kod_iskl"></column>
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_likvid" title="Абонент">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_likvid" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog"></column>
            <column table="kod_dog" column="kod_dog"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_mat" title="Материалы переданные в суд" class="1" delete-validation="qube.ur_dp_exists_vld" timestamp="24.12.2024 04:19:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_mat.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat" type="number" key-dimension="kod_mat" fact="ur_mat_kod_mat" agg="max" as="kod_mat" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_doc" type="number" column-mandatory="1" as="kod_doc" reference="us_doc" refcol="kod_doc" key="0">
          <listquery>
            <query name="us_doc_list">
              <withparams>
                <column table="this" column="kod_sdp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kod_ssp" type="number" as="kod_ssp" reference="us_ssp" refcol="kod_ssp" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер иска" vid="1" as="num_reg" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата отправки документов ответчику" as="dat_otv" key="0" />
        <column table="a" column="kod_ret_isk" type="number" mandatory="dat_otz" as="kod_ret_isk" reference="uk_ret_isk" refcol="kod_ret_isk" key="0" />
        <column table="a" column="num_delo" type="string" title="Номер дела" fact="ur_mat_num_delo" agg="stragg" mandatory="qube.ur_hist_mat_count" as="num_delo" key="0" />
        <column table="a" column="dat_prin" type="date" title="Дата принятия документов в суде" mandatory="qube.ur_hist_mat_count" as="dat_prin" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="num_otz" type="string" title="№ документа возврата" mandatory="dat_otz" as="num_otz" key="0" />
        <column table="a" column="dat_otz" type="date" title="Дата возврата" as="dat_otz" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата подачи в суд" mandatory="dat_otz" fact="ur_mat_dat_doc_max" agg="max" as="dat_doc" key="0" />
        <column table="a" column="fio_otz" type="string" title="За чьей подписью возврат" mandatory="dat_otz" as="fio_otz" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="prichina_otz" type="string" title="Основание для возврата" mandatory="dat_otz" as="prichina_otz" key="0" />
        <column table="a" column="sum_gp" type="number" title="Оплачено госпошлины при подаче" is-fact="1" agg="sum" as="sum_gp" fact="ur_mat_sum_gp" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="dat_gp" type="date" title="Дата перечисления ГП" as="dat_gp" key="0" />
        <column table="a" column="kod_sud" type="number" rows-limit="100" as="kod_sud" reference="us_sud" refcol="kod_sud" key="0">
          <listquery>
            <query name="us_sud_list" />
          </listquery>
        </column>
        <column table="a" column="num_pp_gp" type="string" title="№ пл. пор. ГП" comment="№ плат пор по гп" as="num_pp_gp" key="0" />
        <column table="a" column="kod_parent" type="number" comment="код родительского иска д/аппеляции,кассации,надзор" as="kod_parent" reference="ur_mat" refcol="kod_mat" key="0">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr" type="number" nvl="0" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" is-fact="1" agg="sum" as="ogr" fact="ur_mat_ogr" key="0" />
        <column table="a" column="kod_dispute" type="number" as="kod_dispute" key="0" />
        <column table="a" column="type_claim_template" type="number" as="type_claim_template" key="0" />
        <column table="a" column="kod_delo" type="number" as="kod_delo" key="0" />
        <column table="a" column="tep_el" type="number" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_emp" type="number" comment="Исполнитель ПИО" as="kod_emp" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish" type="date" as="dat_finish" key="0" />
        <column table="a" column="prim_mor_dz" type="string" title="Причина исключения/изменения мораторной задолженности" comment="примечание по мораторной задолженности" as="prim_mor_dz" key="0" />
        <column table="a" column="osnreal" type="number" comment="основная реализация" is-fact="1" agg="sum" as="osnreal" fact="ur_mat_osnreal" key="0" />
        <column table="a" column="period_zadol_s_vvod" type="number" comment="Период задолженности с (ручной ввод)" is-fact="1" agg="min" as="period_zadol_s_vvod" fact="ur_mat_period_zadol_s_vvod" key="0" />
        <column table="a" column="period_zadol_po_vvod" type="number" comment="Период задолженности по (ручной ввод)" is-fact="1" agg="max" as="period_zadol_po_vvod" fact="ur_mat_period_zadol_po_vvod" key="0" />
        <column table="a" column="ur_opl_do_resh_vvod" type="number" comment="Оплата до решения суда (ручной ввод)" is-fact="1" agg="sum" as="ur_opl_do_resh_vvod" fact="ur_mat_ur_opl_do_resh_vvod" key="0" />
        <column table="a" column="shtraf" type="number" comment="штрафы" as="shtraf" key="0" />
        <column table="a" column="peni" type="number" comment="пени" is-fact="1" agg="sum" as="peni" fact="ur_mat_peni" key="0" />
        <column table="a" column="otvetch_info" type="string" comment="информация об ответчиках" as="otvetch_info" key="0" />
        <column table="a" column="link_delo" type="string" comment="ссылка на дело в интернете" title="Гиперссылка" controlType="UILink" as="link_delo" key="0" />
        <column table="a" column="sum_zach_gp" type="number" comment="сумма, зачтенной гп, руб" as="sum_zach_gp" key="0" />
        <column table="a" column="num_zach_doc" type="string" comment="определение суда/решение налогового органа о зачете госпошлины" as="num_zach_doc" key="0" />
        <column table="a" column="dat_zach" type="date" comment="дата документа о зачете" as="dat_zach" key="0" />
        <column table="a" column="sum_ifns_gp" type="number" comment="сумма гп, погашенной  ифнс" as="sum_ifns_gp" key="0" />
        <column table="a" column="num_ifns_doc" type="string" comment="№ извещ.  ифнс" as="num_ifns_doc" key="0" />
        <column table="a" column="dat_ifns" type="date" comment="дата извещ ифнс" as="dat_ifns" key="0" />
        <column table="a" column="kod_scan" type="number" comment="ссылка на скан документа" as="kod_scan" reference="ur_scan_docs" refcol="kod_scan" key="0" />
        <column table="a" column="astrent_exists" type="number" comment="ручной признак наличия процентов за несвоевременную оплату по решению (для журналов)" title="Есть астрент (ручн. признак)" controlType="UICheck" as="astrent_exists" key="0" />
        <column table="a" column="dat_post" type="date" title="Дата поступления документов к иску" comment="дата передачи документов от финансистов - юристам (35926)" as="dat_post" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="type_rassm" title="Порядок рассмотрения" type="number" as="type_rassm" reference="vr_type_rassm" refcol="kod_type_rassm" key="0" />
        <column table="a" column="pio_date" type="date" comment="Дата поступления материалов в ПИО (для эл. Казани по 65149 и 69413 в SD)" as="pio_date" key="0" />
        <column table="a" column="num_zap_post_mat" type="string" comment="№ с/з о поступления материалов в ПИО (для эл. Казани по 65149 в SD)" as="num_zap_post_mat" key="0" />
        <column table="a" column="zayavitel" type="string" comment="Заявитель (для эл. Казани по 72275 в SD)" as="zayavitel" key="0" />
        <const type="number" as="cnt" fact="ur_mat_count" agg="sum" key="0">1</const>
        <column table="ur_hist_mat_decision" column="kod_hist_mat_last_decision" as="kod_hist_mat_last" dgroup="max" key="0" />
        <column table="kod_folders" column="kod_sdp" as="kod_sdp" key="0" />
        <column table="this" column="num_delo" as="num_delo_max" agg="list" fact="ur_mat_num_delo_max" key="0" />
        <call function="case" as="kod_sdp_mat" type="number" key="0">
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>1</const>
            </call>
            <const>6</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="kod_folders" column="kod_sdp" />
                <const>2</const>
              </call>
              <call function="is not null">
                <column table="a" column="kod_ssp" />
              </call>
            </call>
            <const>13</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_folders" column="kod_sdp" />
              <const>9</const>
            </call>
            <const>15</const>
          </call>
        </call>
        <call function="if" as="prizn_activ" type="number" key="0">
          <call function="is not null">
            <column table="a" column="dat_doc" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="has_isp_list" type="number" title="Наличие исполнительного листа" key="0">
          <call function="gt">
            <column table="ur_hist_mat" column="kod_isp_last" dgroup="count" />
            <const>0</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="true if null" as="is_active" title="Статус исп. листа" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="kod_mat_reminder" column="mat_reminder1" as="mat_reminder1" key="0" />
        <column table="kod_mat_reminder" column="mat_reminder2" as="mat_reminder2" key="0" />
        <call function="||" as="name" title="Иск" vid="1" is-name="1" key="0">
          <column table="kod_doc" column="abbr" />
          <const>'  '</const>
          <column table="a" column="num_delo" />
          <const>' от '</const>
          <call function="date to char">
            <column table="a" column="dat_doc" />
          </call>
        </call>
        <column table="ur_hist_mat_decision" column="dat_post" as="last_dat_post" dgroup="max" key="0" />
        <call function="case" title="Примерный срок рассмотрения" as="date_rassm_approx" type="date" is-fact="1" agg="min" fact="ur_mat_date_rassm_approx" key="0">
          <call function="when">
            <call function="and">
              <call function="=">
                <call function="nvl">
                  <column table="a" column="type_rassm" />
                  <const type="number">2</const>
                </call>
                <const type="number">1</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_doc" />
              </call>
            </call>
            <call function="date add days" type="date">
              <call function="add_months">
                <column table="a" column="dat_doc" />
                <const type="number">2</const>
              </call>
              <const type="date">7</const>
            </call>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="a" column="type_rassm" />
                <const type="number">3</const>
              </call>
              <call function="is not null">
                <column table="a" column="dat_prin" />
              </call>
            </call>
            <call function="date add days">
              <column table="a" column="dat_prin" />
              <const type="number">15</const>
            </call>
          </call>
        </call>
        <column table="kr_dogovor" column="kod_dog" dgroup="max" column-editable="1" as="kod_dog" key="0">
          <listquery>
            <query name="kr_dogovor(kodp)">
              <withparams>
                <column table="this" column="kodp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call function="true if null" as="is_active" title="Статус иска" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <column table="type_rassm" column="name" is-fact="1" agg="stragg_dist" fact="ur_mat_type_rassm_name" as="type_rassm_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_mat" as="a" title="Материалы переданные в суд">
          <dlink name="ur_hist_mat_decision" as="ur_hist_mat_decision" table="ur_hist_mat_decision" child="ur_hist_mat_decision" field="kod_mat" parent="ur_mat" back="ur_hist_mat_decision" />
          <dlink name="ur_dogplat_pp" as="ur_dogplat_pp" table="ur_dogplat" child="ur_dogplat" field="kod_mat_pp" parent="ur_mat" back="ur_dogplat_pp" />
          <dlink name="ur_hist_mat" dimension="kod_hist_mat" as="ur_hist_mat" table="ur_hist_mat" child="ur_hist_mat" field="kod_mat" parent="ur_mat" back="ur_hist_mat" title="История рассмотрения" />
          <dlink name="ur_hist_mat_dec" dimension="kod_hist_mat_dec" as="ur_hist_mat_dec" table="ur_hist_mat_dec" child="ur_hist_mat_dec" field="kod_mat" parent="ur_mat" back="ur_hist_mat_dec" title="Решение по делу">
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </dlink>
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink dimension="1" is-final-dimension="1" is-private-dimension="1" name="kod_deb" />
            <dimlink name="kod_sf" is-final-dimension="1" is-private-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-final-dimension="1" is-private-dimension="1" dimension="1" />
          </dlink>
          <dlink name="sr_penni_astr1" as="sr_penni_astr1" table="sr_penni_astr" child="sr_penni_astr" field="kod_delo1" parent="ur_mat" back="sr_penni_astr1">
            <link name="kod_sf_astr" dimension="1" is-final-dimension="1" as="kod_sf_astr" table="sr_facvip_astr" child="sr_penni_astr" field="kod_sf_astr" parent="sr_facvip_astr" back="sr_penni_astr" />
          </dlink>
          <link name="kod_mat_reminder" as="kod_mat_reminder" table="uv_mat_reminders" child="ur_mat" field="kod_mat_reminder" parent="uv_mat_reminders" back="ur_mat" />
          <link name="kodp" as="kodp" table="kr_payer" child="ur_mat" field="kodp" parent="kr_payer" back="ur_mat" title="Абонент">
            <dlink name="kr_dogovor" as="kr_dogovor" table="kr_dogovor" child="kr_dogovor" field="kodp" parent="kr_payer" back="kr_dogovor" title="Договор" />
          </link>
        </table>
        <query name="us_sud" as="kod_sud" join="left outer" dname="ur_mat" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_sud" />
            <column table="kod_sud" column="kod_sud" />
          </call>
        </query>
        <query name="ur_mat" as="kod_parent" join="left outer" dname="ur_mat_child" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_mat" />
          </call>
        </query>
        <query name="us_doc" as="kod_doc" join="left outer" dname="ur_mat" title="Документ">
          <call function="=">
            <column table="a" column="kod_doc" />
            <column table="kod_doc" column="kod_doc" />
          </call>
        </query>
        <query name="us_ssp" as="kod_ssp" join="left outer" dname="ur_mat" title="Подразделение судебных приставов">
          <call function="=">
            <column table="a" column="kod_ssp" />
            <column table="kod_ssp" column="kod_ssp" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_mat" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="uk_ret_isk" as="kod_ret_isk" join="left outer" dname="ur_mat" title="Причина возврата документа">
          <call function="=">
            <column table="a" column="kod_ret_isk" />
            <column table="kod_ret_isk" column="kod_ret_isk" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" dimension="kod_folders" join="left outer" dname="ur_mat" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_mat" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="ur_scan_docs" as="kod_scan" join="left outer" dname="ur_mat" title="Файл">
          <call function="=">
            <column table="a" column="kod_scan" />
            <column table="kod_scan" column="kod_scan" />
          </call>
        </query>
        <query name="vr_type_rassm" join="left outer" as="type_rassm" dname="ur_mat" title="Типы судебного производства">
          <call function="=">
            <column table="type_rassm" column="kod_type_rassm" />
            <column table="a" column="type_rassm" />
          </call>
        </query>
        <query name="ur_hist_mat" as="kod_hist_mat_last" join="left outer" dname="-" title="История рассмотрения">
          <call function="=">
            <column table="this" column="kod_hist_mat_last" />
            <column table="kod_hist_mat_last" column="kod_hist_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="prizn_arch_folder" as="is_active" join="left outer" dname="ur_mat" title="Статус">
          <call function="=">
            <column table="this" column="is_active" />
            <column table="is_active" column="kod_prizn_arch_folder" />
          </call>
        </query>
        <query name="uv_mat_reminders" as="kod_mat_reminder" join="left outer" dimension="kod_mat" dname="ur_mat">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_reminder" column="kod_mat" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_mat" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_mat">
          <call function="=">
            <column table="this" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
      </from>
      <actions>
        <action name="form_ur_dogplat_doc_view" action-type="dynamic-form" call="ur_dogplat_doc_view" />
        <action name="form_ur_dogplat_doc_view_isk" action-type="dynamic-form" call="ur_dogplat_doc_view_isk" />
        <action name="form_ur_dogplat_doc_view_isk_f10" action-type="dynamic-form" call="ur_dogplat_doc_view_isk_f10" />
        <action name="form_ur_dogplat_doc_view_prizn" action-type="dynamic-form" call="ur_dogplat_doc_view_prizn" />
        <action name="form_ur_dogplat_doc_view_prizn_f10" action-type="dynamic-form" call="ur_dogplat_doc_view_prizn_f10" />
        <action name="form_create_sf" action-type="dynamic-form" call="create_ur_sf" modal="1" title="Счет" width-perc="33" />
        <action name="form_view_sf" action-type="dynamic-form" call="sr_facvip_ur" modal="1" title="Счет" width-perc="33" />
        <action name="clu_calc_gp" action-type="client-update" call="ur_mat_calc_gp" title="Рассчитать гос. пошлину" />
      </actions>
      <events>
        <useaction action-type="custom" event-name="object-save">
          <useaction action-type="execute-update" call="ur_mat_upd_num_reg">
            <column table="this" column="kod_mat" />
          </useaction>
          <useaction name="ur_mat_upd_pretenz">
            <column table="this" column="kod_mat" />
            <column table="this" column="kod_folders" />
          </useaction>
        </useaction>
      </events>
    </query>
    <query name="ur_mat_gp" class="1" timestamp="05.11.2019 19:55:27" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_mat_gp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_mat_gp" type="number" column-mandatory="1" comment="primary key" as="kod_mat_gp" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" column-mandatory="1" comment="ur_mat.kod_mat" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="num" type="string" data-size="150" title="" comment="Номер платежного поручения" as="num" key="0" />
        <column table="a" column="dat" type="date" column-mandatory="1" title="" comment="Дата платежного поручения" as="dat" key="0" />
        <column table="a" column="opl" type="number" column-mandatory="1" title="" comment="Сумма платежного поручения" as="opl" key="0" />
        <column table="a" column="u_m" type="string" data-size="20" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_mat_gp" as="a" />
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_mat_gp" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_mat_peni_period" class="1" timestamp="24.12.2024 04:01:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_mat_peni_period.xml" haskeys="1">
      <select>
        <column table="a" column="kod_peni_period" type="number" column-mandatory="1" as="kod_peni_period" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" reference="spr_time_ym" refcol="ym" key="0" />
        <column table="spr_time_ym" column="name" fact="mat_peni_period_ym" agg="stragg" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_mat_peni_period" as="a">
          <link name="kod_mat" as="kod_mat1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="ur_mat" child="ur_mat_peni_period" field="kod_mat" parent="ur_mat" back="ur_mat_peni_period" title="Материалы переданные в суд">
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_mat_peni_period" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="spr_time_ym" join="left outer" ConstrDelOption="cascade" as="spr_time_ym" dname="ur_mat_peni_period">
          <call function="=">
            <column table="a" column="ym" />
            <column table="spr_time_ym" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_mat_scan_docs" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_mat_scan_docs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scan" type="number" comment="уникальный ключ" as="kod_scan" key="1" fixed="1" />
        <column table="a" column="kod_mat" type="number" comment="код материала (из ur_mat)" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0" />
        <column table="a" column="file_name" type="string" title="Файл" comment="имя файла" as="file_name" key="0" />
        <column table="a" column="file_size" type="number" title="" comment="размер файла" as="file_size" key="0" />
        <column table="a" column="source" type="blob" title="" comment="файл" as="source" key="0" />
        <column table="a" column="u_m" type="string" title="" comment="последний редактирующий пользователь" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" comment="время последнего редактирования" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_mat_scan_docs" as="a" />
        <query name="ur_mat" as="kod_mat" join="left outer" dname="ur_mat_scan_docs" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_pret" timestamp="01.04.2021 14:49:28" class="1" title="Претензия в юр. карточке" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_pret.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ur_pret" key="1" type="number" as="kod_ur_pret" />
        <column table="a" column="kod_pret" type="number" column-mandatory="1" as="kod_pret" reference="kr_pret" refcol="kod_pret">
          <listquery>
            <query name="kr_pret_list_for_abon">
              <withparams>
                <column table="this" column="kodp" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="pr_imp" type="number" comment="Признак импорта в ПК &quot;Юрист&quot;: 0 - не передавать, 1 - передавать" as="pr_imp" reference="ur_pret_pr_imp" refcol="pr_imp">
          <listquery>
            <query name="ur_pret_pr_imp" />
          </listquery>
        </column>
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="kod_folders" column="kod_podr" as="kod_podr" />
        <column table="a" column="kod_mat" type="number" as="kod_mat">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="num_sz" title="№ с/з о пост. мат." type="string" as="num_sz" />
        <column table="a" column="kod_emp" title="Исполнитель ПИО" type="number" comment="юрист" as="kod_emp" reference="kr_employee" refcol="kod_emp">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="kod_podr" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="pio_date" type="date" is-fact="1" agg="min" as="pio_date" fact="ur_pret_pio_date" />
        <column table="kod_folders" column="kodp" as="kodp" />
        <const type="number" as="cnt" fact="ur_pret_count" agg="sum">1</const>
        <column table="kod_pret" column="dat_send" is-fact="1" agg="min" as="dat_send" fact="ur_pret_dat_send" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ur_pret" as="a" title="Претензия в юр. карточке">
          <link name="kod_pret" as="kod_pret1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="kr_pret" child="ur_pret" field="kod_pret" parent="kr_pret" back="ur_pret" title="Претензия">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_pret" field="kod_folders" parent="ur_folders" back="ur_pret" title="Папка">
            <dimlink name="kod_dep" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
          <link name="kod_mat_pp" as="kod_mat_pp1" is-private-dimension="1" is-final-dimension="1" dimension="1" table="ur_mat_pp" child="ur_pret" field="kod_mat_pp" parent="ur_mat_pp" back="ur_pret" title="Иск">
            <dimlink name="kod_hist_mat_dec" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_hist_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_mat_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_folders_isp" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_kazn" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="kod_inkasso" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_pret" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_pret" as="kod_pret" join="left outer" dname="ur_pret" title="Претензия">
          <call function="=">
            <column table="a" column="kod_pret" />
            <column table="kod_pret" column="kod_pret" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ur_pret" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_pret">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="ur_mat_pp" as="kod_mat_pp" join="left outer" dname="ur_pret" title="Иск">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat_pp" column="kod_mat_pp" />
          </call>
        </query>
        <query join="left outer" name="ur_pret_pr_imp" as="pr_imp" dname="ur_pret" title="Признак импорта в ПК &quot;Юрист&quot;">
          <call function="=">
            <column table="a" column="pr_imp" />
            <column table="pr_imp" column="pr_imp" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_pretenz" title="Претензия" class="1" timestamp="04.09.2023 15:44:29" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_pretenz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pretenz" type="number" key-dimension="kod_pretenz" as="kod_pretenz" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="kod_state" type="number" column-mandatory="1" as="kod_state" reference="us_state" refcol="kod_state" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер претензии" entity="pretenzion" as="num_reg" key="0" />
        <column table="a" column="num_otv" type="string" title="" as="num_otv" key="0" />
        <column table="a" column="dat_do" type="date" title="Оплатить до" column-mandatory="1" new-val="dat_do_new_val" default="dat_do_new_val" as="dat_do" key="0" />
        <column table="a" column="dat_otv" type="date" title="Дата получения ответа" as="dat_otv" key="0" />
        <column table="a" column="reply" type="string" title="Содержание ответа" as="reply" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" controlType="UITextEx" as="prim" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата претензии" column-mandatory="1" column-default="today" is-fact="1" agg="min" fact="ur_pretenz_dat_doc" as="dat_doc" key="0" />
        <column table="a" column="dat_srok" type="date" title="Срок ответа" new-val="dat_otv_new_val" default="dat_otv_new_val" as="dat_srok" key="0" />
        <column table="a" column="kod_vid_pretenz" type="number" comment="вид претензии" as="kod_vid_pretenz" reference="us_vid_pretenz" refcol="kod_vid_pretenz" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" as="proc" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" fact="ur_pretenz_ogr" comment="расходы за введение ограничения режима электропотребления" agg="sum" as="ogr" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" title="" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish" type="date" title="" as="dat_finish" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" as="opl_proc" key="0" />
        <column table="a" column="opl_ogr" type="number" fact="ur_pretenz_opl_ogr" title="Оплачено: расходы за введение ограничения режима энергопотребления" agg="sum" as="opl_ogr" key="0" />
        <column table="a" column="dat_arh" type="date" title="Дата архивации" comment="Дата архивации" as="dat_arh" key="0" />
        <column table="a" column="kod_pret" type="number" as="kod_pret" reference="kr_pret" refcol="kod_pret" key="0" />
        <column table="a" column="num_sz" title="№ с/з о пост. мат." type="string" data-size="300" as="num_sz" key="0" />
        <column table="a" column="vvod_sum_osn" type="number" is-fact="1" agg="sum" as="vvod_sum_osn" fact="ur_pretenz_vvod_sum_osn" key="0" />
        <column table="a" column="vvod_sum_peni" type="number" is-fact="1" agg="sum" as="vvod_sum_peni" fact="ur_pretenz_vvod_sum_peni" key="0" />
        <column table="a" column="vvod_per_s" type="number" as="vvod_per_s" key="0" />
        <column table="a" column="vvod_per_po" type="number" as="vvod_per_po" key="0" />
        <column table="a" column="vvod_opl_peni" type="number" is-fact="1" agg="sum" as="vvod_opl_peni" fact="ur_pretenz_vvod_opl_peni" key="0" />
        <column table="a" column="vvod_opl_osn" type="number" is-fact="1" agg="sum" as="vvod_opl_osn" fact="ur_pretenz_vvod_opl_osn" key="0" />
        <column column="kod_emp" comment="юрист" table="a" title="Исполнитель ПИО" type="number" agg="min" as="kod_emp" reference="kr_employee" refcol="kod_emp" key="0">
          <listquery>
            <query name="kr_employee_urists_singl_dep">
              <withparams>
                <column table="this" column="dep_pio" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call column="fio" table="kod_emp" comment="для вывода в ur_mat" function="if" is-fact="1" fact="ur_pretenz_last_pio_fio" agg="max" as="last_pio_fio" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_pretenz" />
            <column table="this" column="last_kod_pretenz" />
          </call>
          <column table="kod_emp" column="fio" />
        </call>
        <call column="fio" table="kod_emp" comment="для 54503" function="if" is-fact="1" fact="ur_pretenz_last_pio_kod_emp" agg="max" as="last_pio_kod_emp" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_pretenz" />
            <column table="this" column="last_kod_pretenz" />
          </call>
          <column table="kod_emp" column="kod_emp" />
        </call>
        <call column="fio" table="kod_emp" comment="для вывода в ur_mat" function="if" is-fact="1" fact="ur_pretenz_pio_date" agg="max" as="last_pio_date" type="string" key="0">
          <call function="=">
            <column table="this" column="kod_pretenz" />
            <column table="this" column="last_kod_pretenz" />
          </call>
          <column table="a" column="pio_date" />
        </call>
        <column table="a" column="pio_date" type="date" agg="min" is-fact="1" fact="ur_pretenz_pio_date_direct" as="pio_date" key="0" />
        <call function="over" as="last_kod_pretenz" type="number" key="0">
          <call function="max">
            <column table="a" column="kod_pretenz" />
          </call>
          <call function="partition by">
            <column table="a" column="kod_mat" />
          </call>
        </call>
        <column table="a" column="kod_mat" type="number" as="kod_mat" reference="ur_mat" refcol="kod_mat" key="0">
          <listquery>
            <query name="ur_mat_in_folder_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <call function="if" as="pr_priv" title="Скопирована из модуля &quot;Претензии&quot;" controlType="UICheck" type="number" key="0">
          <call function="is not null">
            <column table="this" column="kod_pret" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <column table="kod_folders" column="kod_podr" as="kod_podr" key="0" />
        <const type="number" as="cnt" fact="ur_pretenz_count_old" agg="sum" key="0">1</const>
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <call function="true if null" as="is_active" title="Статус претензии" key="0">
          <column table="this" column="dat_arh" dgroup="max" />
        </call>
        <query as="srok_opl" part-id="ur_pretenz-srok-cols" key="0">
          <select>
            <column table="uk_srok" column="kol_day" as="kol_day" />
          </select>
          <from>
            <query name="uk_srok" as="uk_srok" />
          </from>
          <where>
            <call function="=">
              <column table="uk_srok" column="kod_srok" />
              <const>2</const>
            </call>
          </where>
        </query>
        <query as="srok_otv" part-id="ur_pretenz-srok-cols" key="0">
          <select>
            <column table="uk_srok" column="kol_day" as="kol_day" />
          </select>
          <from>
            <query name="uk_srok" as="uk_srok" />
          </from>
          <where>
            <call function="=">
              <column table="uk_srok" column="kod_srok" />
              <const>3</const>
            </call>
          </where>
        </query>
        <call function="date add days" as="dat_do_new_val" part-id="ur_pretenz-srok-cols" key="0">
          <column table="this" column="dat_doc" />
          <column table="this" column="srok_opl" />
        </call>
        <call function="date add days" as="dat_otv_new_val" part-id="ur_pretenz-srok-cols" key="0">
          <column table="this" column="dat_doc" />
          <column table="this" column="srok_otv" />
        </call>
        <call function="if" as="right_common" type="number" key="0">
          <call function="=">
            <call function="user_rights_kod_menu">
              <const>16078</const>
            </call>
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" as="right_pio" type="number" key="0">
          <call function="=">
            <call function="user_rights_kod_menu">
              <const>16077</const>
            </call>
            <const>2</const>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call function="if" type="number" as="dep_pio" key="0">
          <call function="=">
            <column table="rs_esys" column="kod_esys" />
            <const>1</const>
          </call>
          <const comment="Управление АО «Татэнергосбыт»">1219</const>
          <column table="kod_folders" column="kod_podr" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_pretenz" as="a" title="Претензия">
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_pretenz" parent="ur_pretenz" back="ur_dogplat">
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <link name="kod_folders" dimension="1" as="kod_folders" table="ur_folders" child="ur_pretenz" field="kod_folders" parent="ur_folders" back="ur_pretenz" title="Папка" />
        </table>
        <query name="ur_folders" as="kod_folders" join="left outer" dname="ur_pretenz" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_pretenz" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="us_state" as="kod_state" join="left outer" dname="ur_pretenz" title="Состояние документа">
          <call function="=">
            <column table="a" column="kod_state" />
            <column table="kod_state" column="kod_state" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_pretenz" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="us_vid_pretenz" as="kod_vid_pretenz" join="left outer" dname="ur_pretenz" title="Вид претензии">
          <call function="=">
            <column table="a" column="kod_vid_pretenz" />
            <column table="kod_vid_pretenz" column="kod_vid_pretenz" />
          </call>
        </query>
        <query name="kr_pret" as="kod_pret" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ur_pretenz" title="Претензия">
          <call function="=">
            <column table="a" column="kod_pret" />
            <column table="kod_pret" column="kod_pret" />
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="ur_pretenz">
          <call function="=">
            <column table="a" column="kod_emp" />
            <column table="kod_emp" column="kod_emp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_pretenz" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_mat" as="kod_mat" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" ConstrDelOption="set null" dname="ur_pretenz" title="Материалы переданные в суд">
          <call function="=">
            <column table="a" column="kod_mat" />
            <column table="kod_mat" column="kod_mat" />
          </call>
        </query>
        <query name="rs_esys" join="cross" as="rs_esys" />
      </from>
      <actions>
        <action action-type="dynamic-form" name="form_ur_dogplat_doc_view" call="ur_dogplat_doc_view" />
      </actions>
    </query>
    <query name="ur_pretenz_peni_period" class="1" timestamp="22.09.2023 23:15:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_pretenz_peni_period.xml" haskeys="1">
      <select>
        <column table="a" column="kod_peni_period" type="number" column-mandatory="1" as="kod_peni_period" key="1" fixed="1" />
        <column table="a" column="kod_pretenz" type="number" as="kod_pretenz" reference="ur_pretenz" refcol="kod_pretenz" key="0" />
        <column table="a" column="ym" type="number" title="" as="ym" reference="spr_time_ym" refcol="ym" key="0" />
        <column table="spr_time_ym" column="name" fact="pretenz_peni_period_ym" agg="stragg" as="name" key="0" />
        <column table="a" column="u_m" type="string" data-size="30" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_pretenz_peni_period" as="a">
          <link name="kod_pretenz" as="kod_pretenz1" table="ur_pretenz" child="ur_pretenz_peni_period" field="kod_pretenz" parent="ur_pretenz" back="ur_pretenz_peni_period" title="Претензия">
            <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
          </link>
        </table>
        <query name="ur_pretenz" as="kod_pretenz" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="ur_pretenz_peni_period" title="Претензия">
          <call function="=">
            <column table="a" column="kod_pretenz" />
            <column table="kod_pretenz" column="kod_pretenz" />
          </call>
        </query>
        <query name="spr_time_ym" join="left outer" ConstrDelOption="cascade" as="spr_time_ym" dname="ur_pretenz_peni_period">
          <call function="=">
            <column table="a" column="ym" />
            <column table="spr_time_ym" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_property_info" title="Сведения об имуществе" class="1" timestamp="06.03.2023 00:16:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_property_info.xml" haskeys="1">
      <select>
        <column table="a" column="kod_property_info" type="number" key="1" as="kod_property_info" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="name" type="string" title="Наименование имущества" comment="Наименование имущества" as="name" />
        <column table="a" column="dat_invent" type="date" title="Дата инвентаризации" comment="Дата инвентаризации" as="dat_invent" />
        <column table="a" column="dat_invent_2" type="date" title="Дата повторной инвентаризации" comment="Дата повторной инвентаризации" as="dat_invent_2" />
        <column table="a" column="dat_ocenki" type="date" title="Дата оценки" comment="Дата оценки" as="dat_ocenki" />
        <column table="a" column="dat_ocenki_2" type="date" title="Дата повторной оценки" comment="Дата повторной оценки" as="dat_ocenki_2" />
        <column table="a" column="cost" type="number" title="Стоимость, руб. (по отчету об оценке и др.)" comment="Стоимость, руб. (по отчету об оценке и др.)" as="cost" />
        <column table="a" column="comment_prop" type="string" title="Примечание" comment="Примечание" as="comment_prop" />
        <column table="a" column="kod_prop_zalog" type="number" title="Имущество находится в залоге" comment="Имущество находится в залоге" as="kod_prop_zalog" reference="us_prop_zalog" refcol="kod_prop_zalog" />
        <column table="a" column="dat_torg" type="date" title="Дата торгов" comment="Дата торгов" as="dat_torg" />
        <column table="a" column="start_price" type="number" title="Начальная цена на торгах, руб." comment="Начальная цена на торгах, руб." as="start_price" />
        <column table="a" column="dat_torg_2" type="date" title="Дата повторных торгов" comment="Дата повторных торгов" as="dat_torg_2" />
        <column table="a" column="start_price_2" type="number" title="Цена на повторных торгах, руб" comment="Цена на повторных торгах, руб" as="start_price_2" />
        <column table="a" column="cost_realiz" type="number" title="Стоимость реализации, руб." comment="Стоимость реализации, руб." as="cost_realiz" />
        <column table="a" column="rabota_dz" type="string" title="Работа с ДЗ" comment="Работа с ДЗ" as="rabota_dz" />
        <column table="a" column="ds_dz" type="number" title="Поступление ден. средств в результате взыскания ДЗ, руб." comment="Поступление ден. средств в результате взыскания ДЗ, руб." as="ds_dz" />
        <column table="a" column="dat_torg_offer" type="date" comment="Дата торгов путём публичного предложения" as="dat_torg_offer" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="ur_property_info" title="Сведения об имуществе" />
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_property_info" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="us_prop_zalog" as="kod_prop_zalog" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_property_info" title="Имущество находится в залоге">
          <call function="=">
            <column table="a" column="kod_prop_zalog" />
            <column table="kod_prop_zalog" column="kod_prop_zalog" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_scan_docs" title="Файл" spec-table="file" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_scan_docs.xml" haskeys="1">
      <select>
        <column table="a" column="kod_scan" type="number" comment="уникальный ключ" as="kod_scan" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" comment="код типа юр. документа" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0"></column>
        <column table="a" column="file_name" type="string" title="" comment="имя файла" vid="1" spec-column="file-name" as="file_name" key="0"></column>
        <column table="a" column="file_size" type="number" title="" comment="размер файла" spec-column="file-size" as="file_size" key="0"></column>
        <column table="a" column="source" type="blob" title="" comment="файл" spec-column="file-data" as="source" key="0"></column>
        <column table="a" column="u_m" type="string" title="" comment="последний редактирующий пользователь" as="u_m" key="0"></column>
        <column table="a" column="d_m" type="date" title="" comment="время последнего редактирования" as="d_m" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_scan_docs" as="a" title="Файл"></table>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="ur_scan_docs">
          <call function="=">
            <column table="a" column="kod_sdp"></column>
            <column table="kod_sdp" column="kod_sdp"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="ur_sogl" class="1" title="Доп. документ (арбитраж)" timestamp="18.06.2016 04:42:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_sogl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sogl" type="number" key-dimension="kod_sogl" as="kod_sogl" key="1" fixed="1" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" key="0" />
        <column table="a" column="kod_subject" type="number" column-mandatory="1" as="kod_subject" reference="us_subject" refcol="kod_subject" key="0" />
        <column table="a" column="num_reg" type="string" title="Номер доп. документа" as="num_reg" key="0" />
        <column table="a" column="dat_do" type="date" title="Оплатить до" column-mandatory="1" new-val="dat_do_new_val" as="dat_do" key="0" />
        <column table="a" column="dat_doc" type="date" title="Дата доп. документа" column-mandatory="1" column-default="today" as="dat_doc" key="0" />
        <column table="a" column="dat_finish" type="date" title="Дата закрытия документа" as="dat_finish" key="0" />
        <column table="a" column="u_m" type="string" title="" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="" as="d_m" key="0" />
        <column table="a" column="prim" type="string" title="Примечание" as="prim" key="0" />
        <column table="a" column="kod_tipdoc" type="number" column-mandatory="1" as="kod_tipdoc" reference="kk_tipdoc" refcol="kod_tipdoc" key="0">
          <listquery>
            <query name="kk_tipdoc_ur_1" />
          </listquery>
        </column>
        <column table="a" column="count_mes" type="number" title="Количество месяцев" format="F0" new-val="count_mes_new_val" as="count_mes" key="0" />
        <column table="a" column="status" type="number" title="" comment="состояние 0-не подписан,1-подписан" as="status" key="0" />
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" key="0" />
        <column table="a" column="proc" type="number" title="Проценты за пользование чужими денежными средствами" comment="проценты за польз ден. средствами, вводимые юристами ( ст. 395 гк рф)" as="proc" key="0" />
        <column table="a" column="ogr" type="number" title="Расходы за введение ограничения режима энергопотребления" comment="расходы за введение ограничения режима электропотребления" fact="ur_sogl_ogr" agg="sum" as="ogr" key="0" />
        <column table="a" column="tep_el" type="number" title="" comment="1-электр,2-тепло" as="tep_el" key="0" />
        <column table="a" column="type_potr" type="number" title="" comment="1-юр,2-физ" as="type_potr" key="0" />
        <column table="a" column="vvod" type="number" title="" comment="0-из бд,1-вручную ввод суммы" as="vvod" key="0" />
        <column table="a" column="kod_emp" type="number" comment="код сотрудника" as="kod_emp" key="0" />
        <column table="a" column="kod_vi" type="number" comment="1- исходящие, 2- входящие" as="kod_vi" key="0" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения" as="dep" key="0" />
        <column table="a" column="dat_finish_f" type="date" title="" as="dat_finish_f" key="0" />
        <column table="a" column="opl_proc" type="number" title="Оплачено: проценты за пользование чужими денежными средствами" comment="вручную: оплата процентов за пользование чужими ден. средствами" as="opl_proc" key="0" />
        <column table="a" column="opl_ogr" type="number" title="Оплачено: расходы за введение ограничения режима энергопотребления" comment="вручную: оплата расходов за ограничение электропотребления" fact="ur_sogl_opl_ogr" agg="sum" as="opl_ogr" key="0" />
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" key="0" />
        <call function="||" as="full_name" vid="1" key="0">
          <column table="kod_tipdoc" column="abbr" />
          <const>' '</const>
          <column table="a" column="num_reg" />
          <const>' от  '</const>
          <call function="date to char">
            <column table="a" column="dat_doc" />
          </call>
        </call>
        <column table="kod_tipdoc" column="prizn_ur" as="prizn_ur" key="0" />
        <call function="date to ym" as="ym_do" key="0">
          <column table="this" column="dat_do" />
        </call>
        <call as="dat_do_new_val" function="add_months" key="0">
          <column table="a" column="dat_doc" />
          <column table="a" column="count_mes" />
        </call>
        <call function="round" as="count_mes_new_val" key="0">
          <call function="months_between">
            <column table="a" column="dat_do" />
            <column table="a" column="dat_doc" />
          </call>
          <const>0</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ur_sogl" as="a" title="Доп. документ (арбитраж)">
          <dlink name="ur_dogplat" dimension="kod_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_sogl" parent="ur_sogl" back="ur_dogplat" />
        </table>
        <query as="kod_tipdoc" join="left outer" name="kk_tipdoc" dname="ur_sogl" title="Тип документа">
          <call function="=">
            <column table="a" column="kod_tipdoc" />
            <column table="kod_tipdoc" column="kod_tipdoc" />
          </call>
        </query>
        <query name="us_subject" as="kod_subject" join="left outer" dname="ur_sogl" title="Предмет">
          <call function="=">
            <column table="a" column="kod_subject" />
            <column table="kod_subject" column="kod_subject" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="kod_folders" dname="ur_sogl" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_sogl" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_sogl" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="ur_graf" as="kod_graf" join="left outer" dname="ur_sogl">
          <call function="=">
            <column table="this" column="kod_sogl" />
            <column table="kod_graf" column="kod_sogl" />
          </call>
        </query>
      </from>
    </query>
    <query name="ur_stage_bk" class="1" timestamp="19.04.2025 02:56:03" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\ur_stage_bk.xml" haskeys="1">
      <select>
        <column table="a" column="kod_stage_bk" type="number" key="1" as="kod_stage_bk" />
        <column table="a" column="kod_folders" type="number" as="kod_folders" reference="ur_folders" refcol="kod_folders" />
        <column table="a" column="kod_stage" type="number" title="Стадия процедуры банкротства" as="kod_stage" reference="uk_stage" refcol="kod_stage" />
        <column table="a" column="kod_iskl" type="number" as="kod_iskl" reference="us_iskl" refcol="kod_iskl" />
        <column table="a" column="dat_create" type="date" title="Дата введения стадии" dimension="dat" as="dat_create" />
        <column table="a" column="fio_upr" type="string" title="ФИО Управляющего" as="fio_upr" />
        <column table="a" column="dat_srok" type="date" title="Срок введения стадии" as="dat_srok" />
        <column table="a" column="dat_prodl" type="date" title="Срок продления стадии" as="dat_prodl" />
        <column table="a" column="dat_finish" type="date" title="Дата завершения стадии" as="dat_finish" />
        <column table="a" column="num_sprav" type="string" title="Номер справки" as="num_sprav" />
        <column table="a" column="dat_sprav" type="date" title="Дата справки" as="dat_sprav" />
        <column table="a" column="num_reestr" type="string" title="Номер исключения из реестра" as="num_reestr" />
        <column table="a" column="dat_reestr" type="date" title="Дата исключения из реестра" as="dat_reestr" />
        <column table="a" column="prim" type="string" title="Примечание" as="prim" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="num_och" type="number" title="" as="num_och" />
        <column table="a" column="dat_otv" type="date" title="" as="dat_otv" />
        <column table="a" column="dat_publ" type="date" title="" as="dat_publ" />
        <column table="a" column="dat_doc" type="date" title="" comment="данное пол не используется, но чтобы было едино - добавлены" as="dat_doc" />
        <column table="a" column="num_reg" type="string" title="" comment="данное пол не используется, но чтобы было едино - добавлены" as="num_reg" />
        <column table="a" column="kod_hist_mat" type="number" comment="код строки истории дела о банкротстве" as="kod_hist_mat" reference="ur_hist_mat_ba" refcol="kod_hist_mat">
          <listquery>
            <query name="ur_hist_mat_ba_list">
              <withparams>
                <column table="this" column="kod_folders" />
              </withparams>
            </query>
          </listquery>
        </column>
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_payer" refcol="kodp" />
        <column table="a" column="id_final_reason" type="number" title="Результат окончания процедуры банкротства" as="id_final_reason" reference="uk_final_reason" refcol="id" />
        <column table="a" column="num_dela" type="string" comment="Номер дела" title="Номер дела" is-fact="1" agg="max" as="num_dela" fact="ur_stage_bk_num_dela" />
        <column table="a" column="dat_zayav_bankrot" type="date" comment="Дата принятия заявл. о призн. должника банкротом" title="Дата принятия заявл. о призн. должника банкротом" is-fact="1" agg="min" as="dat_zayav_bankrot" fact="ur_stage_bk_dat_zayav_bankrot" />
        <column table="a" column="zayavitel_po_delu" type="string" comment="Заявитель по делу о банкротстве" title="Заявитель по делу о банкротстве" as="zayavitel_po_delu" />
        <column table="a" column="dat_srok_proc" type="date" comment="Срок процедуры" title="Срок процедуры" as="dat_srok_proc" />
        <column table="ur_dogplat" column="kod_dog" dgroup="max" as="kod_dog" />
        <column table="kod_stage" column="name" as="stage_name" fact="ur_stage_bk_st_name" agg="max" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ur_stage_bk" as="a">
          <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_stage_bk" parent="ur_stage_bk" back="ur_dogplat" />
          <link name="kod_folders" as="kod_folders1" table="ur_folders" child="ur_stage_bk" field="kod_folders" parent="ur_folders" back="ur_stage_bk" title="Папка">
            <dimlink name="kodp" dimension="1" is-final-dimension="1" is-private-dimension="1">
              <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            </dimlink>
            <dlink name="ur_mat" as="ur_mat" table="ur_mat" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Материалы переданные в суд">
              <dlink name="ur_mat_ba" dimension="1" is-final-dimension="1" is-private-dimension="1" as="ur_mat_ba" table="ur_mat_ba" child="ur_mat_ba" field="kod_mat" parent="ur_mat" back="ur_mat_ba">
                <dimlink name="kod_dogplat" dimension="1" is-final-dimension="1" is-private-dimension="1">
                  <dimlink name="kod_dog" dimension="1" is-final-dimension="1" is-private-dimension="1" as="kod_dog1" />
                </dimlink>
              </dlink>
            </dlink>
          </link>
        </table>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="ur_stage_bk" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage" />
            <column table="kod_stage" column="kod_stage" />
          </call>
        </query>
        <query name="uk_final_reason" join="left outer" as="id_final_reason" dname="ur_stage_bk">
          <call function="=">
            <column table="a" column="id_final_reason" />
            <column column="id" table="id_final_reason" />
          </call>
        </query>
        <query name="us_iskl" as="kod_iskl" join="left outer" dname="ur_stage_bk">
          <call function="=">
            <column table="a" column="kod_iskl" />
            <column table="kod_iskl" column="kod_iskl" />
          </call>
        </query>
        <query name="ur_folders" as="kod_folders" join="left outer" dimension="1" is-final-dimension="1" is-private-dimension="1" dname="ur_stage_bk" title="Папка">
          <call function="=">
            <column table="a" column="kod_folders" />
            <column table="kod_folders" column="kod_folders" />
          </call>
        </query>
        <query name="ur_hist_mat_ba" as="kod_hist_mat" join="left outer" dname="ur_stage_bk">
          <call function="=">
            <column table="a" column="kod_hist_mat" />
            <column table="kod_hist_mat" column="kod_hist_mat" />
          </call>
        </query>
        <query name="kr_payer" as="kodp" join="left outer" dname="ur_stage_bk" title="Абонент">
          <call function="=">
            <column table="a" column="kodp" />
            <column table="kodp" column="kodp" />
          </call>
        </query>
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="ur_stage_bk" title="Договор">
          <call function="=">
            <column table="this" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_busin" order="name" class="1" title="Основание для прекращения деятельности" timestamp="11.05.2017 21:11:49" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_busin.xml" haskeys="1">
      <select>
        <column table="a" column="kod_busin" type="number" as="kod_busin" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Основание для прекращения деятельности" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_busin" as="a" title="Основание для прекращения деятельности" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_category" title="Категория потребителей (юристы)" class="1" timestamp="24.04.2025 03:34:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_category.xml" haskeys="1">
      <select>
        <column table="а" column="kod_category" type="number" key="1" as="kod_category" />
        <column table="а" column="name" type="string" is-name="1" as="name" />
        <column table="а" column="abbr" type="string" as="abbr" />
        <column table="а" column="is_new" type="number" sys="1" as="is_new" />
        <column table="а" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_category" as="а" title="Категория потребителей (юристы)" />
      </from>
    </query>
    <query name="us_doc" class="1" title="Документ" timestamp="17.06.2016 03:16:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_doc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_doc" type="number" as="kod_doc" key="1" fixed="1" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="name" type="string" title="Вид документа" as="name" key="0" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" vid="1" as="abbr" key="0" />
        <column table="a" column="prizn" type="number" title="" comment="1-иск,2-аппеляция,3-кассация,4-надзор" as="prizn" key="0" />
        <call function="case" as="inst_name" title="Инстанция" type="string" key="0">
          <call function="when">
            <call function="=">
              <column table="a" column="prizn" />
              <const>1</const>
            </call>
            <const>'Первая инстанция'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="prizn" />
              <const>2</const>
            </call>
            <const>'Апелляционная инстанция'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="prizn" />
              <const>3</const>
            </call>
            <const>'Кассационная инстанция'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="a" column="prizn" />
              <const>4</const>
            </call>
            <const>'Надзорная инстанция'</const>
          </call>
          <call function="else">
            <const>''</const>
          </call>
        </call>
        <call function="case" as="is_peresmotr" type="number" key="0">
          <call function="when">
            <call function="gt">
              <column table="a" column="prizn" />
              <const>1</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_doc" as="a" title="Документ" />
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="us_doc">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_graf_status" timestamp="29.12.2017 13:37:29" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_graf_status.xml" haskeys="1">
      <select>
        <column column="kod_graf_status" table="a" type="number" key="1" as="kod_graf_status" />
        <column table="a" column="name" type="string" data-size="100" is-name="1" title="Статус графика" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_graf_status" as="a" />
      </from>
    </query>
    <query name="us_iskl" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_iskl.xml" haskeys="1">
      <select>
        <column table="a" column="kod_iskl" type="number" as="kod_iskl" key="1" fixed="1"></column>
        <column table="a" column="name" type="string" title="Кем исключен из реестра" as="name" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_iskl" as="a"></table>
      </from>
    </query>
    <query name="us_osn_um_mor_dolg" title="Основание уменьшения мор. долга" class="1" timestamp="05.04.2023 00:08:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_osn_um_mor_dolg.xml" haskeys="1">
      <select>
        <column table="а" column="kod_osn_um_mor_dolg" type="number" as="kod_osn_um_mor_dolg" key="1" fixed="1" />
        <column table="а" column="name" type="string" is-name="1" as="name" key="0" />
        <column table="а" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="а" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_osn_um_mor_dolg" as="а" title="Основание уменьшения мор. долга" />
      </from>
    </query>
    <query name="us_post" class="1" title="Судебный акт" timestamp="17.06.2016 03:17:10" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_post.xml" haskeys="1">
      <select>
        <column table="a" column="kod_post" type="number" as="kod_post" key="1" fixed="1" />
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0" />
        <column table="a" column="name" type="string" title="Судебный акт" vid="1" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_post" as="a" title="Судебный акт" />
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="us_post">
          <call function="=">
            <column table="a" column="kod_sdp" />
            <column table="kod_sdp" column="kod_sdp" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_property" class="1" title="Тип имущества" timestamp="22.06.2016 23:31:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_property.xml" haskeys="1">
      <select>
        <column table="a" column="kod_property" type="number" as="kod_property" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_property" as="a" title="Тип имущества" />
      </from>
    </query>
    <query name="us_property_type" class="1" title="Вид имущества" timestamp="22.06.2016 23:31:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_property_type.xml" haskeys="1">
      <select>
        <column table="a" column="kod_property_type" type="number" as="kod_property_type" key="1" fixed="1" />
        <column table="a" column="kod_property" type="number" as="kod_property" reference="us_property" refcol="kod_property" key="0" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_property_type" as="a" title="Вид имущества" />
        <query name="us_property" as="kod_property" join="left outer" dname="us_property_type" title="Тип имущества">
          <call function="=">
            <column table="a" column="kod_property" />
            <column table="kod_property" column="kod_property" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_ps" class="1" title="Право собственности" timestamp="22.06.2016 23:32:25" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_ps.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ps" type="number" as="kod_ps" key="1" fixed="1" />
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_ps" as="a" title="Право собственности" />
      </from>
    </query>
    <query name="us_result" class="1" timestamp="11.05.2017 21:55:37" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_result.xml" haskeys="1">
      <select>
        <column table="a" column="kod_result" type="number" as="kod_result" key="1" fixed="1" />
        <column table="a" column="kod_post" type="number" as="kod_post" reference="us_post" refcol="kod_post" key="0">
          <listquery>
            <query name="us_post_sdp1" />
          </listquery>
        </column>
        <column table="a" column="name" type="string" title="Результат рассмотрения" vid="1" as="name" key="0" />
        <column table="a" column="decision" type="number" title="" comment="1- является окончательным решением" as="decision" key="0" />
        <column table="a" column="kod_not_edit" type="number" as="kod_not_edit" reference="uk_not_edit" refcol="kod_not_edit" key="0" />
        <column table="this" column="kod_post" as="kod_post_ssp" key="0">
          <listquery>
            <query name="us_post_sdp2" />
          </listquery>
        </column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_result" as="a" />
        <!--Убрал inner для корректного заполнения журнала переданных в суд материалов-->
        <query name="us_post" as="kod_post" join="left outer" dname="us_result" title="Судебный акт">
          <call function="=">
            <column table="a" column="kod_post" />
            <column table="kod_post" column="kod_post" />
          </call>
        </query>
        <query name="uk_not_edit" as="kod_not_edit" join="left outer" dname="us_result">
          <call function="=">
            <column table="a" column="kod_not_edit" />
            <column table="kod_not_edit" column="kod_not_edit" />
          </call>
        </query>
        <query name="us_post" as="kod_post_ssp" join="left outer" dname="us_result_ssp" title="Судебный акт">
          <call function="=">
            <column table="this" column="kod_post_ssp" />
            <column table="kod_post_ssp" column="kod_post" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_prop_zalog" title="Имущество находится в залоге" timestamp="05.03.2023 15:26:53" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_small_dicts_combo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_prop_zalog" type="number" key="1" as="kod_prop_zalog" />
        <column table="a" column="name" type="string" title="Имущество находится в залоге" comment="в залоге, не в залоге" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="us_prop_zalog" title="Имущество находится в залоге" />
      </from>
    </query>
    <query name="ur_yn_list" title="Список да/нет" class="1" timestamp="07.03.2023 08:14:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_small_dicts_combo.xml" haskeys="1">
      <select>
        <column table="u" column="val" as="kod" key="1" type="number" />
        <column table="u" column="name" title="Выбор" type="string" as="name" />
      </select>
      <from>
        <query as="u">
          <union>
            <query name="true" />
            <query name="false" />
          </union>
        </query>
      </from>
    </query>
    <query name="us_creditor_claim_status" class="1" title="Реестр требований кредиторов" timestamp="07.03.2023 16:39:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_small_dicts_combo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_cred_claim_status" type="number" key="1" as="kod_cred_claim_status" />
        <column table="a" column="name" type="string" comment="основной, залоговый" title="Статус кредитора" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table as="a" name="us_creditor_claim_status" title="Реестр требований кредиторов" />
      </from>
    </query>
    <query name="us_ssp" order="name" class="1" title="Подразделение судебных приставов" timestamp="04.12.2023 12:50:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_ssp.xml" haskeys="1">
      <select>
        <column table="a" column="kod_ssp" type="number" key="1" as="kod_ssp" />
        <column table="a" column="name" type="string" title="Служба судебных приставов" as="name" />
        <column table="a" column="adres" type="string" title="Адрес" as="adres" />
        <column table="a" column="phone" type="string" title="Телефон секретариата" as="phone" />
        <column table="a" column="pr_active" type="number" as="pr_active" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_ssp" as="a" title="Подразделение судебных приставов" />
      </from>
      <order>
        <column column="name" />
      </order>
    </query>
    <query name="us_state" title="Состояние документа" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_state.xml" haskeys="1">
      <select>
        <column table="a" column="kod_state" type="number" key="1" as="kod_state"></column>
        <column table="a" column="name" type="string" title="Состояние документа" vid="1" as="name"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_state" as="a" title="Состояние документа"></table>
      </from>
    </query>
    <query name="us_subject" class="1" title="Предмет" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_subject.xml" haskeys="1">
      <select>
        <column table="a" column="kod_subject" type="number" key="1" as="kod_subject" />
        <column table="a" column="name" type="string" title="Предмет иска" vid="1" as="name" />
        <column table="a" column="abbr" type="string" as="abbr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_subject" as="a" title="Предмет" />
      </from>
    </query>
    <query name="us_sud" class="1" title="Суд / судебный участок" timestamp="04.12.2023 12:50:00" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_sud.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sud" type="number" key="1" as="kod_sud" />
        <column table="a" column="name" type="string" title="Судебный участок" as="name" />
        <column table="a" column="kod_parent" type="number" as="kod_parent" reference="us_sud" refcol="kod_sud" />
        <column table="a" column="adres" type="string" as="adres" />
        <column table="a" column="http" type="string" as="http" />
        <column table="a" column="prim" type="string" as="prim" />
        <column table="a" column="region" type="string" title="Адм. район\городское образование" comment="поле для написания в именительном падеже соответствующего адм. района\городского образования" as="region" />
        <column table="a" column="pr_active" type="number" as="pr_active" />
        <column table="a" column="code" type="string" as="code" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_sud" as="a" title="Суд / судебный участок" />
        <query name="us_sud" as="kod_parent" join="left outer" dname="us_sud" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_sud" />
          </call>
        </query>
      </from>
    </query>
    <query name="us_viduz" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_viduz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_viduz" type="number" as="kod_viduz" key="1" fixed="1"></column>
        <column table="a" column="abbr" type="string" title="Аббривиатура" as="abbr" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" vid="1" as="name" key="0"></column>
        <column table="a" column="kod_sdp" type="number" title="Наименование ЮД" as="kod_sdp" reference="uk_sdp" refcol="kod_sdp" key="0"></column>
        <column table="a" column="prizn_sdp" type="number" title="Признак для ЮД" editor="combo" as="prizn_sdp" reference="uk_prizn_sdp" refcol="prizn_sdp" key="0"></column>
        <column table="a" column="kod_stage" type="number" title="Стадия банкротства" editor="combo" as="kod_stage" reference="uk_stage" refcol="kod_stage" key="0"></column>
        <column table="a" column="not_opl" type="number" title="Оплату не разносить" editor="check" as="not_opl" key="0"></column>
        <column table="a" column="prizn_otkaz" type="number" title="Отказано" editor="check" as="prizn_otkaz" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="us_viduz" as="a"></table>
        <query name="uk_sdp" as="kod_sdp" join="left outer" dname="us_viduz">
          <call function="=">
            <column table="a" column="kod_sdp"></column>
            <column table="kod_sdp" column="kod_sdp"></column>
          </call>
        </query>
        <query name="uk_prizn_sdp" as="prizn_sdp" join="left outer" dname="us_viduz">
          <call function="=">
            <column table="a" column="prizn_sdp"></column>
            <column table="prizn_sdp" column="prizn_sdp"></column>
          </call>
        </query>
        <query name="uk_stage" as="kod_stage" join="left outer" dname="us_viduz" title="Стадия процедуры банкротства">
          <call function="=">
            <column table="a" column="kod_stage"></column>
            <column table="kod_stage" column="kod_stage"></column>
          </call>
        </query>
      </from>
    </query>
    <query name="us_vid_pretenz" class="1" title="Вид претензии" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_vid_pretenz.xml" haskeys="1">
      <select>
        <column table="a" column="kod_vid_pretenz" type="number" key="1" as="kod_vid_pretenz" />
        <column table="a" column="name" type="string" title="Вид претензии" vid="1" as="name" />
        <column table="a" column="pr_otd" type="number" title="Претензия отделения" editor="check" as="pr_otd" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_vid_pretenz" as="a" title="Вид претензии" />
      </from>
    </query>
    <query name="us_zased" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\us_zased.xml" haskeys="1">
      <select>
        <column table="a" column="kod_zased" type="number" key="1" as="kod_zased" />
        <column table="a" column="kod_ssp" type="number" as="kod_ssp" reference="us_ssp" refcol="kod_ssp" />
        <column table="a" column="fio" type="string" title="Судья" as="fio" />
        <column table="a" column="phone" type="string" title="Телефон" as="phone" />
        <column table="a" column="spec" type="string" title="" as="spec" />
        <column table="a" column="phone_spec" type="string" title="" as="phone_spec" />
        <column table="a" column="group_" type="number" title="" as="group_" />
        <column table="a" column="kod_sud" type="number" as="kod_sud" reference="us_sud" refcol="kod_sud" />
        <column table="a" column="assist" type="string" title="" comment="Помощник судьи" as="assist" />
        <column table="a" column="phone_assist" type="string" title="" comment="Телефон помощника судьи" as="phone_assist" />
        <column table="a" column="pr_active" type="number" as="pr_active" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="us_zased" as="a" />
        <query name="us_sud" as="kod_sud" join="left outer" dname="us_zased" title="Суд / судебный участок">
          <call function="=">
            <column table="a" column="kod_sud" />
            <column table="kod_sud" column="kod_sud" />
          </call>
        </query>
        <query name="us_ssp" as="kod_ssp" join="left outer" dname="us_zased" title="Подразделение судебных приставов">
          <call function="=">
            <column table="a" column="kod_ssp" />
            <column table="kod_ssp" column="kod_ssp" />
          </call>
        </query>
      </from>
    </query>
    <query name="uv_fio" order="fio" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uv_fio.xml" haskeys="1">
      <select>
        <column table="a" column="kod_emp" type="number" as="kod_emp" key="1" fixed="1"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" reference="kr_org" refcol="kodp" key="0"></column>
        <column table="a" column="fio" type="string" title="ФИО юриста" as="fio" key="0"></column>
        <column table="a" column="name_otd" type="string" title="" as="name_otd" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uv_fio" as="a"></table>
        <query name="kr_org" as="kodp" join="left outer" dname="uv_fio">
          <call function="=">
            <column table="a" column="kodp"></column>
            <column table="kodp" column="kodp"></column>
          </call>
        </query>
        <query name="kr_employee" as="kod_emp" join="left outer" dname="uv_fio">
          <call function="=">
            <column table="a" column="kod_emp"></column>
            <column table="kod_emp" column="kod_emp"></column>
          </call>
        </query>
      </from>
      <order>
        <column column="fio" />
      </order>
    </query>
    <query name="uv_point_dost" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\uv_point_dost.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" title="" as="kod" key="1" fixed="1"></column>
        <column table="a" column="kod_sdp" type="number" as="kod_sdp" reference="ur_pretenz" refcol="kod_pretenz" key="0"></column>
        <column table="a" column="kodp" type="number" title="" as="kodp" key="0"></column>
        <column table="a" column="kod_dog" type="number" as="kod_dog" key="0"></column>
        <column table="a" column="kod_izv" type="number" as="kod_izv" key="0"></column>
        <column table="a" column="kod_point" type="number" as="kod_point" key="0"></column>
        <column table="a" column="kod_point_dost" type="number" as="kod_point_dost" key="0"></column>
        <column table="a" column="name" type="string" title="Наименование" as="name" key="0"></column>
        <column table="a" column="sname" type="string" title="Расположение счётчика" as="sname" key="0"></column>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="uv_point_dost" as="a"></table>
        <query name="ur_pretenz" as="kod_pretenz" join="left outer" dname="uv_point_dost" title="Претензия">
          <call function="and">
            <call function="=">
              <column table="a" column="kod"></column>
              <column table="kod_pretenz" column="kod_pretenz"></column>
            </call>
            <call function="=">
              <column table="a" column="kod_sdp"></column>
              <const>4</const>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vb_kol_gr" timestamp="23.01.2019 16:34:13" class="1" order="kod_kol_gr" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vb_kol_gr.xml" haskeys="1">
      <select>
        <column type="number" table="a" column="kod_kol_gr" key="1" as="kod_kol_gr" />
        <column type="string" table="a" column="name" data-size="4000" title="Наименование" as="name" />
        <column type="number" table="a" column="kod_fl" title="Код филиала" as="kod_fl" reference="jv_rep_cons_d_fl" refcol="kod_fl" />
        <column type="string" table="a" column="u_m" data-size="4000" as="u_m" />
        <column type="date" table="a" column="d_m" as="d_m" />
        <column table="a" column="kol_gr_comment" type="string" title="Дополнение" as="kol_gr_comment" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vb_kol_gr" as="a" />
        <query join="left outer" name="jv_rep_cons_d_fl" as="kod_fl" dname="vb_kol_gr">
          <call function="=">
            <column table="a" column="kod_fl" />
            <column table="kod_fl" column="kod_fl" />
          </call>
        </query>
      </from>
      <order>
        <column column="kod_kol_gr" />
      </order>
    </query>
    <query name="vb_kol_gr_fdr" timestamp="21.11.2019 13:57:27" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vb_kol_gr_fdr.xml" haskeys="1">
      <select>
        <column type="number" table="a" column="kod_kol_gr_fdr" key="1" column-mandatory="1" as="kod_kol_gr_fdr" />
        <column type="number" table="a" column="kod_kol_gr_pwrc" title="Код настройки ПС" comment="Код настройки ПС" as="kod_kol_gr_pwrc" reference="vb_kol_gr_pwrc" refcol="kod_kol_gr_pwrc" />
        <column type="number" table="a" column="pwrc_fdrid" title="Код фидера" comment="Код фидера" as="pwrc_fdrid" reference="hv_eopwrc_fdrs" refcol="pwrc_fdrid" />
        <column table="kod_kol_gr_pwrc" column="kod_kol_gr_nastr" as="kod_kol_gr_nastr" />
        <column type="string" table="a" column="u_m" data-size="4000" title="" as="u_m" />
        <column type="date" table="a" column="d_m" title="" as="d_m" />
        <column table="a" column="entire_fdr" type="number" title="" controlType="UICheck" as="entire_fdr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vb_kol_gr_fdr" as="a" />
        <query join="left outer" name="vb_kol_gr_pwrc" as="kod_kol_gr_pwrc" ConstrDelOption="cascade" dname="vb_kol_gr_fdr">
          <call function="=">
            <column table="a" column="kod_kol_gr_pwrc" />
            <column table="kod_kol_gr_pwrc" column="kod_kol_gr_pwrc" />
          </call>
        </query>
        <query join="left outer" name="hv_eopwrc_fdrs" as="pwrc_fdrid" dname="vb_kol_gr_fdr">
          <call function="=">
            <column table="a" column="pwrc_fdrid" />
            <column table="pwrc_fdrid" column="pwrc_fdrid" />
          </call>
        </query>
        <query join="left outer" name="vb_kol_gr_nastr" as="kod_kol_gr_nastr" ConstrDelOption="cascade" dname="vb_kol_gr_fdr">
          <call function="=">
            <column table="this" column="kod_kol_gr_nastr" />
            <column table="kod_kol_gr_nastr" column="kod_kol_gr_nastr" />
          </call>
        </query>
        <query name="45862_tp_is_selected" as="tpsel" join="left outer" dname="vb_kol_gr_fdr">
          <call function="=">
            <column table="a" column="kod_kol_gr_fdr" />
            <column table="tpsel" column="kod_kol_gr_fdr" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_kol_gr_nastr" class="1" timestamp="03.10.2022 13:41:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vb_kol_gr_nastr.xml" haskeys="1">
      <select>
        <column type="number" table="a" column="kod_kol_gr_nastr" key="1" as="kod_kol_gr_nastr" />
        <column type="number" table="a" column="kod_kol_gr" title="Код кольцевой группы" as="kod_kol_gr" reference="vb_kol_gr" refcol="kod_kol_gr" />
        <column type="string" table="a" column="name" data-size="4000" title="Наименование" as="name" />
        <call function="if" type="string" as="name_exp">
          <call function="is null">
            <column table="this" column="name" />
          </call>
          <const comment="хотел поставит замещающий текст но передумал">''</const>
          <column table="this" column="name" />
        </call>
        <column type="number" table="a" column="s" title="Период с" as="s" />
        <column type="number" table="a" column="po" title="Период по" as="po" />
        <column type="string" table="a" column="u_m" data-size="4000" as="u_m" />
        <column type="date" table="a" column="d_m" as="d_m" />
        <column type="number" table="a" column="kod_fl" title="Код филиала" as="kod_fl" reference="jv_rep_cons_d_fl" refcol="kod_fl" />
        <column table="a" column="kol_gr_comment" type="string" title="Дополнение" as="kol_gr_comment" />
        <column table="a" column="is_auto_kg" type="number" as="is_auto_kg" />
        <call as="is_auto_kg_real" function="nvl0">
          <column table="this" column="is_auto_kg" />
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vb_kol_gr_nastr" as="a" />
        <query join="left outer" name="vb_kol_gr" as="kod_kol_gr" ConstrDelOption="cascade" dname="vb_kol_gr_nastr">
          <call function="=">
            <column table="a" column="kod_kol_gr" />
            <column table="kod_kol_gr" column="kod_kol_gr" />
          </call>
        </query>
        <query join="left outer" name="spr_time_ym" as="s" dname="vb_kol_gr_nastr">
          <call function="=">
            <column table="a" column="s" />
            <column table="s" column="ym" />
          </call>
        </query>
        <query join="left outer" name="spr_time_ym" as="po" dname="vb_kol_gr_nastr">
          <call function="=">
            <column table="po" column="ym" />
            <column table="a" column="po" />
          </call>
        </query>
        <query join="left outer" name="jv_rep_cons_d_fl" as="kod_fl" dname="vb_kol_gr_nastr">
          <call function="=">
            <column table="a" column="kod_fl" />
            <column table="kod_fl" column="kod_fl" />
          </call>
        </query>
        <query join="left outer" name="vv_ym" as="ym" dname="vb_kol_gr_nastr">
          <call function="between">
            <column table="ym" column="ym" />
            <column table="a" column="s" />
            <call function="nvl">
              <column table="a" column="po" />
              <call function="date to ym">
                <call function="sysdate" />
              </call>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vb_kol_gr_pwrc" timestamp="19.02.2019 12:01:27" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vb_kol_gr_pwrc.xml" haskeys="1">
      <select>
        <column type="number" table="a" column="kod_kol_gr_pwrc" key="1" as="kod_kol_gr_pwrc" />
        <column type="number" table="a" column="kod_kol_gr_nastr" title="Код настройки кольцевой группы" as="kod_kol_gr_nastr" reference="vb_kol_gr_nastr" refcol="kod_kol_gr_nastr" />
        <column type="number" table="a" column="pwrc_id" title="Код ПС" as="pwrc_id" />
        <column type="string" table="a" column="u_m" data-size="4000" as="u_m" />
        <column type="date" table="a" column="d_m" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vb_kol_gr_pwrc" as="a" />
        <query join="left outer" name="vb_kol_gr_nastr" as="kod_kol_gr_nastr" ConstrDelOption="cascade" dname="vb_kol_gr_pwrc">
          <call function="=">
            <column table="a" column="kod_kol_gr_nastr" />
            <column table="kod_kol_gr_nastr" column="kod_kol_gr_nastr" />
          </call>
        </query>
        <query join="left outer" name="hv_eopwrc_g" as="pwrc_id" dname="vb_kol_gr_pwrc">
          <call function="=">
            <column table="a" column="pwrc_id" />
            <column table="pwrc_id" column="pwrc_id" />
          </call>
        </query>
        <query name="vr_rb_pwrc" as="rb_pwrc" join="left outer" dname="vb_kol_gr_pwrc">
          <call function="=">
            <column table="a" column="pwrc_id" />
            <column table="rb_pwrc" column="pwrc_id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_kol_gr_tp" timestamp="28.11.2018 18:20:45" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vb_kol_gr_tp.xml" haskeys="1">
      <select>
        <column type="number" table="a" column="kod_kol_gr_tp" key="1" as="kod_kol_gr_tp" />
        <column type="number" table="a" column="kod_kol_gr_fdr" title="Код настройки фидеров" as="kod_kol_gr_fdr" reference="vb_kol_gr_fdr" refcol="kod_kol_gr_fdr" />
        <column type="number" table="a" column="src_id" title="Код ТП" as="src_id" reference="hv_eopwrc_grid" refcol="src_id" />
        <column type="string" table="a" column="u_m" data-size="4000" as="u_m" />
        <column type="date" table="a" column="d_m" as="d_m" />
        <column table="kod_kol_gr_fdr" column="pwrc_fdrid" as="pwrc_fdrid" />
        <column table="kod_kol_gr_fdr" column="kod_kol_gr_pwrc" as="kod_kol_gr_pwrc" />
        <column table="kod_kol_gr_pwrc" column="kod_kol_gr_nastr" as="kod_kol_gr_nastr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vb_kol_gr_tp" as="a" />
        <query join="left outer" name="vb_kol_gr_fdr" as="kod_kol_gr_fdr" ConstrDelOption="cascade" dname="vb_kol_gr_tp">
          <call function="=">
            <column table="a" column="kod_kol_gr_fdr" />
            <column table="kod_kol_gr_fdr" column="kod_kol_gr_fdr" />
          </call>
        </query>
        <query join="left outer" name="vb_kol_gr_pwrc" as="kod_kol_gr_pwrc" ConstrDelOption="cascade" dname="vb_kol_gr_tp">
          <call function="=">
            <column table="this" column="kod_kol_gr_pwrc" />
            <column table="kod_kol_gr_pwrc" column="kod_kol_gr_pwrc" />
          </call>
        </query>
        <query join="left outer" name="vb_kol_gr_nastr" as="kod_kol_gr_nastr" ConstrDelOption="cascade" dname="vb_kol_gr_tp">
          <call function="=">
            <column table="this" column="kod_kol_gr_nastr" />
            <column table="kod_kol_gr_nastr" column="kod_kol_gr_nastr" />
          </call>
        </query>
        <query name="hv_eopwrc_grid" as="hv_eopwrc_grid_id" join="left outer" dname="vb_kol_gr_tp">
          <call function="and">
            <call function="=">
              <column table="a" column="src_id" />
              <column table="hv_eopwrc_grid_id" column="src_id" />
            </call>
            <call function="=">
              <column table="this" column="pwrc_fdrid" />
              <column table="hv_eopwrc_grid_id" column="pwrc_fdrid" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="vr_kor_saldo" class="1" timestamp="23.05.2016 12:55:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_kor_saldo.xml" haskeys="1">
      <select>
        <column table="a" column="kod_kor_saldo" type="number" as="kod_kor_saldo" key="1" fixed="1" />
        <column table="a" column="kod_dog" type="number" comment="код договора" title="Договор" column-mandatory="1" as="kod_dog" reference="kr_dogovor" refcol="kod_dog" key="0">
          <listquery>
            <query name="kr_dogovor_list_cur_dep" />
          </listquery>
        </column>
        <column table="a" column="dat_otch" type="date" title="Дата отчета" comment="дата отчетная" column-mandatory="1" as="dat_otch" key="0" />
        <column table="a" column="dat_vozn" type="date" title="Дата возникновения" comment="дата возникновения" column-mandatory="1" as="dat_vozn" key="0" />
        <column table="a" column="val" type="number" title="Значение" comment="сумма" column-mandatory="1" format="{0:C2}" as="val" key="0" />
        <column table="a" column="u_m" type="string" title="Пользователь" comment="кем изменено" column-editable="0" as="u_m" key="0" />
        <column table="a" column="d_m" type="date" title="Дата редактирования" comment="когда изменено" column-editable="0" as="d_m" key="0" />
        <column table="a" column="vid_real" type="number" title="Вид реализации" column-mandatory="1" as="vid_real" reference="sk_vid_real" refcol="vid_real" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vr_kor_saldo" as="a" />
        <query name="kr_dogovor" as="kod_dog" join="left outer" dname="vr_kor_saldo" title="Договор">
          <call function="=">
            <column table="a" column="kod_dog" />
            <column table="kod_dog" column="kod_dog" />
          </call>
        </query>
        <query name="sk_vid_real" as="vid_real" join="left outer" dname="vr_kor_saldo" title="Вид реализации">
          <call function="=">
            <column table="a" column="vid_real" />
            <column table="vid_real" column="vid_real" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_nastr_uved" class="1" timestamp="25.06.2017 20:15:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_nastr_uved.xml" haskeys="1">
      <select>
        <column table="a" column="kod_nastr_uved" type="number" title="" comment="код подразделения" key="1" as="kod_nastr_uved" />
        <column table="a" column="dep" type="number" title="" comment="код подразделения" column-editable="0" as="dep" reference="kr_org" refcol="kodp">
          <listquery>
            <query name="kr_dep" />
          </listquery>
        </column>
        <column table="a" column="u_m" type="string" title="" comment="использование в расчетах задолженности виртуальных авансов (казань эл-во): 1-использовать" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" title="" comment="использование в расчетах задолженности переплаты (казань эл-во): 1-использовать" as="d_m" />
        <column table="a" column="is_new_alg" type="number" controlType="UICheck" title="Новая процедура расчета" as="is_new_alg" />
        <column table="a" column="is_opl_virt_av" type="number" title="Рассчитывать оплату виртуальных авансов" controlType="UICheck" as="is_opl_virt_av" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_nastr_uved" as="a" />
        <query name="kr_org" as="dep" join="left outer" dname="vr_nastr_uved">
          <call function="=">
            <column table="a" column="dep" />
            <column table="dep" column="kodp" />
          </call>
        </query>
        <query name="ks_tf_nastr_rep_uved" as="nastr_rep" join="left outer" dname="vr_nastr_uved">
          <call function="=">
            <column table="nastr_rep" column="dep" />
            <column table="this" column="dep" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_peni_period" class="1" timestamp="24.04.2019 11:47:18" title="Периоды, за которые начислены пени" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_peni_period.xml" haskeys="1">
      <select>
        <column table="a" column="kod_peni_period" type="number" key="1" as="kod_peni_period" />
        <column table="a" column="kod_sf" type="number" title="с/ф" as="kod_sf" reference="sr_facvip" refcol="kod_sf" />
        <column table="a" column="ym" title="период" type="number" as="ym" reference="spr_time_ym" refcol="ym" />
        <column table="spr_time_ym" column="name" fact="peni_period_ym" agg="stragg" as="name" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_peni_period" as="a" title="Периоды, за которые начислены пени">
          <link name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_sf" table="sr_facvip" child="vr_peni_period" field="kod_sf" parent="sr_facvip" back="vr_peni_period">
            <dimlink name="kod_dogplat" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_isp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_folders_isp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat_isp" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_inkasso" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_kazn" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_isp_other" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_pretenz" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_mat" dimension="1" is-final-dimension="1" is-private-dimension="1" />
            <dimlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dlink name="ur_dogplat" as="ur_dogplat" table="ur_dogplat" child="ur_dogplat" field="kod_sf" parent="sr_facvip" back="ur_dogplat">
              <link name="kod_mat" as="kod_mat" table="ur_mat" child="ur_dogplat" field="kod_mat" parent="ur_mat" back="ur_dogplat" title="Материалы переданные в суд">
                <link name="kod_folders" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_folders" table="ur_folders" child="ur_mat" field="kod_folders" parent="ur_folders" back="ur_mat" title="Папка" />
              </link>
            </dlink>
          </link>
        </table>
        <query name="sr_facvip" join="left outer" ConstrDelOption="cascade" as="kod_sf" dname="vr_peni_period">
          <call function="=">
            <column table="kod_sf" column="kod_sf" />
            <column table="a" column="kod_sf" />
          </call>
        </query>
        <query name="spr_time_ym" join="left outer" ConstrDelOption="cascade" as="spr_time_ym" dname="vr_peni_period">
          <call function="=">
            <column table="a" column="ym" />
            <column table="spr_time_ym" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_pret_dolg_calc" timestamp="20.06.2017 00:51:14" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_pret_dolg_calc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pret_dolg_calc" type="number" key="1" as="kod_pret_dolg_calc" />
        <column table="a" column="calc_date" type="date" as="calc_date" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_pret_dolg_calc" as="a" />
      </from>
    </query>
    <query name="vr_pret_dolg_dog" timestamp="21.03.2019 14:55:01" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_pret_dolg_dog.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pret_dolg_dog" type="number" key="1" as="kod_pret_dolg_dog" />
        <column table="a" column="kod_pret_dolg_calc" type="number" as="kod_pret_dolg_calc" reference="vr_pret_dolg_calc" refcol="kod_pret_dolg_calc" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="per_dolg_osn_real" type="string" data-size="300" title="Период задолженности" as="per_dolg_osn_real" />
        <column table="a" column="dolg_osn_real" type="number" title="Сумма задолженности ОД" as="dolg_osn_real" />
        <call function="+nvl" as="total_peni">
          <column table="a" column="dolg_peni" type="number" title="Пени" />
          <column table="a" column="dolg_sud_peni" type="number" title="Пени отсуженные" />
          <column table="a" column="dolg_astr" type="number" title="Пени за несвоевременное исполнение решения суда" />
        </call>
        <column table="a" column="dolg_peni" type="number" title="Пени" as="dolg_peni" />
        <column table="a" column="dolg_gp" type="number" title="Госпошлина" as="dolg_gp" />
        <column table="a" column="dolg_sud_peni" type="number" title="Пени отсуженные" as="dolg_sud_peni" />
        <column table="a" column="dolg_astr" type="number" title="Пени за несвоевременное исполнение решения суда" as="dolg_astr" />
        <column table="a" column="num_delo" type="string" title="Номер_судебного_дела" data-size="300" as="num_delo" />
        <column table="a" column="dolg_othr" type="number" title="Иные виды задолженности" as="dolg_othr" />
        <column table="a" column="dat_calc_peni" type="date" title="Дата расчета пени" as="dat_calc_peni" />
        <column table="a" column="dat_beg_dolg" type="date" title="Дата образования задолженности" as="dat_beg_dolg" />
        <column table="a" column="cnt_per_dolg" type="number" title="Количество периодов задолженности" as="cnt_per_dolg" />
        <column table="a" column="dat_sud" type="date" title="Дата передачи в суд" as="dat_sud" />
        <column type="number" table="a" column="dolg_avans" title="Неоплаченный аванс" as="dolg_avans" />
        <column type="number" table="a" column="dolg_osn_avans" title="Неоплаченный аванс и долг ОД" as="dolg_osn_avans" />
        <column type="string" table="a" column="dolg_desc" title="Описание dolg_osn_avans" as="dolg_desc" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="dolg_avans_30_40" type="number" as="dolg_avans_30_40" />
        <column table="a" column="dolg_avans_n30_n40" type="number" as="dolg_avans_n30_n40" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_pret_dolg_dog" as="a">
          <dlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kr_pret" table="kr_pret" child="kr_pret" field="kod_pret_dolg_dog" parent="vr_pret_dolg_dog" back="kr_pret" title="Претензия">
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="vr_pret_dolg_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" as="vr_pret_dolg_sf" table="vr_pret_dolg_sf" child="vr_pret_dolg_sf" field="kod_pret_dolg_dog" parent="vr_pret_dolg_dog" back="vr_pret_dolg_sf">
            <dimlink name="kod_sf" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </table>
        <query join="left outer" name="vr_pret_dolg_calc" as="kod_pret_dolg_calc" ConstrDelOption="cascade" dname="vr_pret_dolg_dog">
          <call function="=">
            <column table="a" column="kod_pret_dolg_calc" />
            <column table="kod_pret_dolg_calc" column="kod_pret_dolg_calc" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_pret_dolg_sf" timestamp="14.08.2018 18:38:19" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_pret_dolg_sf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_pret_dolg_sf" type="number" key="1" as="kod_pret_dolg_sf" />
        <column table="a" column="kod_pret_dolg_dog" type="number" as="kod_pret_dolg_dog" reference="vr_pret_dolg_dog" refcol="kod_pret_dolg_dog" />
        <column table="a" column="kod_dog" type="number" as="kod_dog" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" />
        <call function="+nvl" as="total_dolg" title="Сальдо">
          <column table="a" column="dolg_osn_real" type="number" title="Сальдо_по_основной_реализации" />
          <column table="a" column="dolg_gp" type="number" title="Сальдо_по_госпошлине  " />
          <column table="a" column="dolg_peni" type="number" title="Начисленные_пени" />
          <column table="a" column="dolg_sud_peni" type="number" title="Сальдо_по_взысканным_процентам" />
          <column table="a" column="dolg_astr" type="number" title="Сальдо_по_астренту" />
          <column table="a" column="dolg_othr" type="number" title="Иные виды задолженности" />
        </call>
        <column table="a" column="dolg_osn_real" type="number" title="Сальдо_по_основной_реализации" as="dolg_osn_real" />
        <column table="a" column="dolg_gp" type="number" title="Сальдо_по_госпошлине  " as="dolg_gp" />
        <column table="a" column="dolg_peni" type="number" title="Начисленные_пени" as="dolg_peni" />
        <column table="a" column="dolg_sud_peni" type="number" title="Сальдо_по_взысканным_процентам" as="dolg_sud_peni" />
        <column table="a" column="dolg_astr" type="number" title="Сальдо_по_астренту" as="dolg_astr" />
        <column table="a" column="num_delo" type="string" title="Номер_судебного_дела" data-size="300" as="num_delo" />
        <column table="a" column="dolg_othr" type="number" title="Иные виды задолженности" as="dolg_othr" />
        <column table="a" column="dat_calc_peni" type="date" title="Дата расчета пени" as="dat_calc_peni" />
        <column table="a" column="dat_sud" type="date" title="Дата передачи в суд" as="dat_sud" />
        <column table="a" column="u_m" type="string" data-size="30" as="u_m" />
        <column table="a" column="d_m" type="date" as="d_m" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vr_pret_dolg_sf" as="a">
          <link name="kod_pret_dolg_dog" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_pret_dolg_dog" table="vr_pret_dolg_dog" child="vr_pret_dolg_sf" field="kod_pret_dolg_dog" parent="vr_pret_dolg_dog" back="vr_pret_dolg_sf">
            <dimlink name="kr_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="kod_ur_pret" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </table>
        <query join="left outer" name="vr_pret_dolg_dog" as="kod_pret_dolg_dog" ConstrDelOption="cascade" dname="vr_pret_dolg_sf">
          <call function="=">
            <column table="a" column="kod_pret_dolg_dog" />
            <column table="kod_pret_dolg_dog" column="kod_pret_dolg_dog" />
          </call>
        </query>
        <query join="left outer" name="sr_facvip" as="kod_sf" ConstrDelOption="cascade" is-private-dimension="1" is-final-dimension="1" dimension="1" dname="vr_pret_dolg_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="vr_type_rassm" title="Типы судебного производства" timestamp="19.12.2022 12:56:49" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vr_type_rassm.xml" haskeys="1">
      <select>
        <column table="u" column="kod_type_rassm" type="number" key="1" as="kod_type_rassm" />
        <column table="u" column="name" type="string" vid="1" is-name="1" as="name" />
      </select>
      <from>
        <query as="u">
          <union>
            <query>
              <select>
                <const as="kod_type_rassm" type="number">1</const>
                <const as="name" type="string">'Упрощенное производство'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const type="number">2</const>
                <const type="string">'Общий порядок'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
            <query>
              <select>
                <const type="number">3</const>
                <const type="string">'Приказное производство'</const>
              </select>
              <from>
                <table name="dual" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="vv_all_deb_sf" class="1" timestamp="14.04.2017 11:13:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vv_all_deb_sf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_deb_sf" type="number" key="1" as="kod_deb_sf" />
        <column table="a" column="kod_sf" type="number" as="kod_sf" reference="sr_facvip" refcol="kod_sf" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vv_all_deb_sf" as="a" />
        <query name="sr_facvip" as="kod_sf" join="left outer" dname="vv_all_deb_sf">
          <call function="=">
            <column table="a" column="kod_sf" />
            <column table="kod_sf" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_day" class="1" timestamp="29.04.2016 15:44:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vv_day.xml" haskeys="1">
      <select>
        <column table="a" column="dat_day" type="date" dimension="dat" as="dat_day" key="1" fixed="1" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
        <const type="number" as="cnt" fact="vv_day_count" agg="sum" key="0">1</const>
      </select>
      <from>
        <table name="vv_day" as="a" />
      </from>
    </query>
    <query name="vv_sr_facvip_rec_info_m" class="1" timestamp="08.06.2017 11:57:06" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vv_sr_facvip_rec_info_m.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="kod_sf_old_neg" type="number" as="kod_sf_old_neg" reference="sr_facvip" refcol="kod_sf" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_sr_facvip_rec_info_m" as="a" />
        <query name="sr_facvip" as="kod_sf_old_neg" join="left outer" dname="vv_sr_facvip_rec_info_m">
          <call function="=">
            <column table="a" column="kod_sf_old_neg" />
            <column table="kod_sf_old_neg" column="kod_sf" />
          </call>
        </query>
      </from>
    </query>
    <query name="vv_sr_facvip_ret_inf" class="1" timestamp="27.06.2017 19:27:12" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vv_sr_facvip_ret_inf.xml" haskeys="1">
      <select>
        <column table="a" column="kod_sf" type="number" as="kod_sf" key="1" fixed="1" />
        <column table="a" column="pr_podpis" type="number" title="" as="pr_podpis" key="0" />
        <call function="decode" type="string" as="name_podpis" key="0">
          <column table="this" column="pr_podpis" />
          <const>1</const>
          <const>'подписано'</const>
          <const>'не подписано'</const>
        </call>
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="vv_sr_facvip_ret_inf" as="a" />
      </from>
    </query>
    <query name="vv_ym" comment="На замену query spr_time_ym_pre и spr_time_ym, реализованных на базе vv_day" timestamp="30.09.2022 15:38:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\vv_ym.xml" haskeys="1">
      <select>
        <column table="t" column="ym" type="number" as="ym" title="Период" key="1" />
        <column table="t" column="is_new" type="number" sys="1" as="is_new" />
        <column table="t" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="vv_ym" as="t" />
      </from>
    </query>
    <query name="zv_prizn_procedure" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\zv_prizn_procedure.xml" haskeys="1">
      <select>
        <column table="a" column="gr_konk" type="number" title="" key="1" as="gr_konk" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="zv_prizn_procedure" as="a" />
      </from>
    </query>
    <query name="zv_zak_konk_prproc" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\zv_zak_konk_prproc.xml" haskeys="1">
      <select>
        <column table="a" column="kod_str" type="string" key="1" as="kod_str"></column>
        <column table="a" column="dat_zased_comm" type="date" title="Дата заседания" as="dat_zased_comm" />
        <column table="a" column="gr_konk" type="number" title="" as="gr_konk" reference="zv_prizn_procedure" refcol="gr_konk" />
        <column table="a" column="kod_zak" type="number" as="kod_zak" />
        <column table="a" column="kod_konk" type="number" as="kod_konk" />
        <column table="a" column="kod_lot" type="number" as="kod_lot" />
        <column table="a" column="num_gkpz" type="string" title="Номер закупки" as="num_gkpz" />
        <column table="a" column="name_podr" type="string" title="Заказчик (предприятие, филиал, подразделение)" as="name_podr" />
        <column table="a" column="name_zak" type="string" title="Наименование" as="name_zak" />
        <column table="a" column="msp_konk" type="string" title="Закупка у СМСП" as="msp_konk" />
        <column table="a" column="per_post_n" type="string" title="Дата начала поставки / оказания услуг" as="per_post_n" />
        <column table="a" column="per_post_k" type="string" title="Дата окончания поставки / оказания услуг" as="per_post_k" />
        <column table="a" column="dat_obyav" type="date" title="Дата объявления ОЗП" as="dat_obyav" />
        <column table="a" column="dat_vskr" type="date" title="Дата вскрытия заявок" as="dat_vskr" />
        <column table="a" column="kol_zayav" type="number" title="Кол-во уч-ков" as="kol_zayav" />
        <column table="a" column="sum_tz" type="number" title="Начальная (максимальная) стоимость закупки (руб., без НДС)***" as="sum_tz" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="zv_zak_konk_prproc" as="a" />
        <query name="zv_prizn_procedure" as="gr_konk" join="left outer" dname="zv_zak_konk_prproc">
          <call function="=">
            <column table="a" column="gr_konk" />
            <column table="gr_konk" column="gr_konk" />
          </call>
        </query>
      </from>
    </query>
    <query name="zv_zayav_konk" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\zv_zayav_konk.xml" haskeys="1">
      <select>
        <column table="a" column="kod_str_uni" type="string" key="1" as="kod_str_uni"></column>
        <column table="a" column="kod_zayav" type="number" as="kod_zayav" />
        <column table="a" column="kod_konk" type="number" as="kod_konk" />
        <column table="a" column="kod_lot" type="number" as="kod_lot" />
        <column table="a" column="kod_zak" type="number" as="kod_zak" />
        <column table="a" column="e_code" type="number" title="" as="e_code" />
        <column table="a" column="name_adr_uchastnik" type="string" title="Участник(и)" as="name_adr_uchastnik" />
        <column table="a" column="pr_msp" type="string" title="Принадлежность Участника к СМСП " as="pr_msp" />
        <column table="a" column="summa" type="number" title="Цена Участника начальная (руб., без НДС)****" as="summa" />
        <column table="a" column="kod_str" type="number" as="kod_str" reference="zv_zak_konk_prproc" refcol="kod_str" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="zv_zayav_konk" as="a" />
        <query name="zv_zak_konk_prproc" as="kod_str" join="left outer" dname="zv_zayav_konk">
          <call function="=">
            <column table="a" column="kod_str" />
            <column table="kod_str" column="kod_str" />
          </call>
        </query>
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name">
    <function name="ug_isp.get_isp_date" type="date" timestamp="18.05.2021 11:40:47" comment="По заявке 59453" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">ug_isp.get_isp_date(<par1><val /></par1>)</function>
    <function name="ug_isp.get_isp_place" type="string" timestamp="18.05.2021 11:40:03" comment="По заявке 59453" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">ug_isp.get_isp_place(<par1><val /></par1>)</function>
    <function name="ug_isp.get_last_bk_stage" type="string" timestamp="29.07.2021 11:40:03" comment="По заявке 34884(4), возвращает последнюю стадию процедуры банкротсва по коду папки" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">ug_isp.get_last_bk_stage(<par1><val /></par1>)</function>
    <function name="kg_tarif.is_2rate" type="number" class="1" comment="Возвращает 0 для одноставочных тарифов и 1 для двухставочных" timestamp="21.10.2022 14:25:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">kg_tarif.is_2rate(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="kg_tarif.subtarif_voltage" type="number" timestamp="20.10.2022 13:15:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">kg_tarif.subtarif_voltage(<par1><val /></par1>, <par2><val /></par2>, <par3><val /></par3>)</function>
    <function name="ng_priem.get_poteri_percent" type="number" comment="Возвращает % потерь из хар-ки ТУ" timestamp="25.10.2022 15:30:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">ng_priem.get_poteri_percent(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="ng_priem.get_poteri_kvth" type="number" comment="Возвращает постоянные потери в кВт-ч из хар-ки ТУ" timestamp="25.10.2022 15:30:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">ng_priem.get_poteri_kvth(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="hg_common.get_gtp" type="number" comment="Возвращает код ГТП (kod_numobj, ym)" timestamp="18.11.2022 14:00:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">hg_common.get_gtp(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="nk_adress.kp_get_region_name" type="string" timestamp="18.11.2022 16:30:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">nk_adress.kp_get_region_name(<par1><val /></par1>)</function>
    <function name="hg_pasp_pu_r.name_pu" type="string" comment="Возвращает наименование типа устройства (трансформатора, счётчика и т. п.)" timestamp="18.11.2022 17:20:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">hg_pasp_pu_r.name_pu(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="hg_sx.get_ip_ff" type="string" comment="Возвращает наименование код фидера (eobj_id, kod_src)" timestamp="25.11.2022 11:45:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">hg_sx.get_ip_ff(<par1><val /></par1>, <par2><val /></par2>)</function>
    <function name="hg_sx.getsrcnameonsxbykind" type="string" comment="Возвращает диспетчерский номер первого по схеме вверх сетевого объекта, заданного вида (ТП, РП, ПС, ...) (eobj_id, kod_srckind_1, kod_srckind_2, ... )" timestamp="10.02.2023 11:25:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\functions.xml">hg_sx.getSrcNameonSxByKind (<par1><val /></par1>, NEW NUMBER$TABLE(<par2><val /></par2><par>, <val /></par>))</function>
  </functions>
  <parts child-name="part" key-name="id">
    <part id="col-from-dual" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <params>
        <param name="column" multiple="1" />
      </params>
      <useparam name="column"></useparam>
    </part>
    <part id="row-from-dual" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <params>
        <param name="columns" />
      </params>
      <query>
        <select>
          <usepart part="col-from-dual">
            <useparam name="columns"></useparam>
          </usepart>
        </select>
        <from>
          <table name="dual" as="a"></table>
        </from>
      </query>
    </part>
    <part id="rows-from-dual" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <params>
        <param name="row" multiple="1" />
      </params>
      <usepart part="row-from-dual">
        <useparam name="row" />
      </usepart>
    </part>
    <part id="table-from-dual" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\f46_2013.xml">
      <params>
        <param name="rows" />
      </params>
      <query>
        <union>
          <usepart part="rows-from-dual">
            <useparam name="rows" />
          </usepart>
        </union>
      </query>
    </part>
    <part id="kr_dogovor-field" class="1" timestamp="13.10.2017 14:53:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dogovor.xml">
      <field name="kod_dog" controlType="UIList" title="Договоры" type="number">
        <listquery>
          <query name="kr_dogovor_list(dep)" />
        </listquery>
      </field>
    </part>
    <part id="kr_dep-field" class="1" timestamp="13.10.2017 14:52:52" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      <field name="dep" controlType="UIList" title="Отделения" type="number">
        <listquery>
          <query name="kr_dep" />
        </listquery>
      </field>
    </part>
    <part id="tarif_bu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml">
      <params>
        <param name="npp" />
        <param name="sost_npp" />
      </params>
      <call function="case" type="number">
        <!--в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "1"-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>557</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>557</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>830</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>830</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>1330</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>1330</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>1331</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>1331</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>1342</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>1342</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>3339</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>3339</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>3349</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>3349</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>5641</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>5641</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>5677</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>5677</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6065</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6065</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6071</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6071</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6077</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6077</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6083</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6083</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6123</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6123</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>6124</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>6124</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>170008</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>170008</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>170014</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>170014</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>170020</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>170020</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180068</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180068</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in" name="npp">
              <useparam name="npp" />
              <call function="array">
                <const>180144</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180144</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180182</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180182</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180144</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180144</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180182</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180182</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180201</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180201</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180220</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180220</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7005</const>
              </call>
              <call function="array">
                <const>7030</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7005</const>
              </call>
              <call function="array">
                <const>7030</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7105</const>
              </call>
              <call function="array">
                <const>7130</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7105</const>
              </call>
              <call function="array">
                <const>7130</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7205</const>
              </call>
              <call function="array">
                <const>7230</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7205</const>
              </call>
              <call function="array">
                <const>7230</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7505</const>
              </call>
              <call function="array">
                <const>7330</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7505</const>
              </call>
              <call function="array">
                <const>7330</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7605</const>
              </call>
              <call function="array">
                <const>7615</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7605</const>
              </call>
              <call function="array">
                <const>7615</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7705</const>
              </call>
              <call function="array">
                <const>7730</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7705</const>
              </call>
              <call function="array">
                <const>7730</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7805</const>
              </call>
              <call function="array">
                <const>7830</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7805</const>
              </call>
              <call function="array">
                <const>7830</const>
              </call>
            </call>
          </call>
          <const>2</const>
        </call>
        <!--в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "0,7"-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>730</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>730</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>829</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>829</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>1321</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>1321</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>4635</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>4635</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>4941</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>4941</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>180163</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>180163</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7035</const>
              </call>
              <call function="array">
                <const>7090</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7035</const>
              </call>
              <call function="array">
                <const>7090</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7135</const>
              </call>
              <call function="array">
                <const>7190</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7135</const>
              </call>
              <call function="array">
                <const>7190</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7235</const>
              </call>
              <call function="array">
                <const>7290</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7235</const>
              </call>
              <call function="array">
                <const>7290</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7335</const>
              </call>
              <call function="array">
                <const>7390</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7335</const>
              </call>
              <call function="array">
                <const>7390</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7535</const>
              </call>
              <call function="array">
                <const>7560</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7535</const>
              </call>
              <call function="array">
                <const>7560</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7635</const>
              </call>
              <call function="array">
                <const>7675</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7635</const>
              </call>
              <call function="array">
                <const>7675</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7735</const>
              </call>
              <call function="array">
                <const>7760</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7735</const>
              </call>
              <call function="array">
                <const>7760</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="between">
              <useparam name="npp" />
              <call function="array">
                <const>7835</const>
              </call>
              <call function="array">
                <const>7860</const>
              </call>
            </call>
            <call function="is child between npp">
              <useparam name="npp" />
              <call function="array">
                <const>7835</const>
              </call>
              <call function="array">
                <const>7860</const>
              </call>
            </call>
          </call>
          <const>3</const>
        </call>
        <!--в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "0,9"-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="npp" />
              <call function="array">
                <const>7401</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="npp" />
              <call function="array">
                <const>7401</const>
              </call>
            </call>
          </call>
          <const>4</const>
        </call>
        <!--Бюджетные потребители:-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>150000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>150000</const>
              </call>
            </call>
          </call>
          <const>5</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>160000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>160000</const>
              </call>
            </call>
          </call>
          <const>5</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>170000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>170000</const>
              </call>
            </call>
          </call>
          <const>5</const>
        </call>
        <!--Сельскохозяйственные потребители:-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>130000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>130000</const>
              </call>
            </call>
          </call>
          <const>6</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>140000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>140000</const>
              </call>
            </call>
          </call>
          <const>6</const>
        </call>
        <!--Прочие одноставочные потребители:-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>110000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>110000</const>
              </call>
            </call>
          </call>
          <const>7</const>
        </call>
        <!--Без услуг по передаче:-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>180000</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>180000</const>
              </call>
            </call>
          </call>
          <const>8</const>
        </call>
        <!--Прочие двуставочные потребители:-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>120000</const>
              </call>
            </call>
            <call function="and">
              <call function="is child npp">
                <useparam name="sost_npp" />
                <call function="array">
                  <const>120000</const>
                </call>
              </call>
              <call function="is not child npp">
                <useparam name="sost_npp" />
                <call function="array">
                  <const>120005</const>
                </call>
              </call>
            </call>
          </call>
          <const>10</const>
        </call>
        <!--Двуставочные потребители, присоединенные к шинам станций-->
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="sost_npp" />
              <call function="array">
                <const>120005</const>
              </call>
            </call>
            <call function="is child npp">
              <useparam name="sost_npp" />
              <call function="array">
                <const>120005</const>
              </call>
            </call>
          </call>
          <const>11</const>
        </call>
        <!--Прочие-->
        <call function="else">
          <const>0</const>
        </call>
      </call>
    </part>
    <part id="vid_t_teplo" class="1" timestamp="27.12.2022 23:00:19" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml">
      <params>
        <param name="vid_t" />
        <param name="tarif" />
      </params>
      <call function="case" type="number">
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>61</const>
            </call>
          </call>
          <const>4.1</const>
        </call>
        <!--
        в зависимости от vid_t и отделения
        
          Тепловая энергия 1,2

          Горячее водоснабжение:
          2.1) тепловая энергия на подогрев воды 55

          2.2) холодная вода 54 - казань, нижнекамск, заинск
          2.3) теплоноситель 54 - уруссу
             + теплоноситель 58 - заинск,челны
          по коду отделения

          Теплоноситель:
          3.1) вода (ХОЧ) 11,56
          3.2) пар (ХОВ) 3,57

      102276621	Филиал ОАО "ТАТТЕПЛОСБЫТ" - Казанский
      102276623	Филиал ОАО "ТАТТЕПЛОСБЫТ" - Набережночелнинский
      102276626	Уруссинский участок Филиала ОАО "ТАТТЕПЛОСБЫТ" - Камский
      102276624	Елабужский участок Филиала ОАО "ТАТТЕПЛОСБЫТ" - Набережночелнинский
      102276625	Филиал ОАО "ТАТТЕПЛОСБЫТ" - Камский
      2572294  	Заинский участок Филиала ОАО "ТАТТЕПЛОСБЫТ" - Камский
      
      -->
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>1</const>
            </call>
          </call>
          <const>1.1</const>
        </call>
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>2</const>
            </call>
          </call>
          <const>1.2</const>
        </call>
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>55</const>
              <const>85</const>
            </call>
          </call>
          <const>2.1</const>
        </call>
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>84</const>
            </call>
          </call>
          <const>2.2</const>
        </call>
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>54</const>
            </call>
          </call>
          <const>5.1</const>
        </call>
        <call function="when">
          <call function="in">
            <useparam name="vid_t" />
            <call function="array">
              <const>64</const>
            </call>
          </call>
          <const>5.2</const>
        </call>
        <call function="when">
          <call function="=">
            <useparam name="vid_t" />
            <const>58</const>
          </call>
          <const>2.3</const>
        </call>
        <call function="when">
          <call function="and">
            <call function="in">
              <useparam name="vid_t" />
              <call function="array">
                <const>11</const>
                <const>56</const>
              </call>
            </call>
            <call function="not in">
              <useparam name="tarif" />
              <call function="array">
                <const>6219</const>
                <const>16378</const>
                <const>16460</const>
                <const>72711</const>
              </call>
            </call>
          </call>
          <const>3.1</const>
        </call>
        <call function="when">
          <call function="or">
            <call function="in">
              <useparam name="vid_t" />
              <call function="array">
                <const>3</const>
                <const>57</const>
              </call>
            </call>
            <call function="and">
              <call function="in">
                <useparam name="vid_t" />
                <call function="array">
                  <const>56</const>
                </call>
              </call>
              <call function="in">
                <useparam name="tarif" />
                <call function="array">
                  <const>6219</const>
                  <const>16378</const>
                  <const>16460</const>
                  <const>72711</const>
                </call>
              </call>
            </call>
          </call>
          <const>3.2</const>
        </call>
      </call>
    </part>
    <part id="days_dolg" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml">
      <params>
        <param name="date" />
        <param name="date_bzad" />
        <param name="dolg" />
      </params>
      <call function="if" as="days_dolg" type="number">
        <call function="and">
          <call function="le">
            <useparam name="date_bzad" />
            <useparam name="date" />
          </call>
          <call function="!=nvl">
            <useparam name="dolg" />
            <const>0</const>
          </call>
        </call>
        <call function="-">
          <useparam name="date" />
          <column table="this" column="dat_bzad" />
        </call>
      </call>
    </part>
    <part id="days_dolg_diap" class="1" timestamp="08.02.2016 11:47:21" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sr_facvip.xml">
      <params>
        <param name="val" />
      </params>
      <call function="case" as="days_dolg_diap" type="string" title="Критерий задолженности">
        <call function="when">
          <call function="lt">
            <useparam name="val" />
            <const>45</const>
          </call>
          <const>'менее 45 дней'</const>
        </call>
        <call function="when">
          <call function="between">
            <useparam name="val" />
            <const>45</const>
            <const>90</const>
          </call>
          <const>'от 45 до 90 дней'</const>
        </call>
        <call function="when">
          <call function="gt">
            <useparam name="val" />
            <const>90</const>
          </call>
          <const>'свыше 90 дней'</const>
        </call>
      </call>
    </part>
  </parts>
  <views child-name="view" key-name="id">
    <view name="all_deb_sf" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\all_deb_sf.xml">
      select kod_sf, 1*power(10,25)+kod_sf as kod_deb_sf from sr_facvip
      union all
      select kod_sf, 2*power(10,25)+kod_deb as kod_deb_sf from sr_facvip where kod_deb is not null
    </view>
    <view name="kk_active_list_default_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_active.xml">
      select 0 as pr_active, 'Активный' as name from dual      
    </view>
    <view name="kk_tipdoc_prizn" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kk_tipdoc.xml">
      select 1 as kod,'Прочие' as name from dual union
      select 2,'Мировое соглашение (судебное)' from dual union
      select 3,'Исполнительный лист' from dual 
    </view>
    <view name="kr_dopdoc_arhiv_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_dopdoc.xml">
      select 0 as arhiv, 'Активный' as name from dual union all
      select 1 as arhiv, 'Архивный' as name from dual 
    </view>
    <view name="kr_dep" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      SELECT LEVEL lvl, kodp
      FROM kr_org a
      WHERE kod_ecls = 4
      AND kod_separator = 2
      AND kodp IN
      (SELECT a.kodp
      FROM kr_org a, kr_org b
      WHERE     a.kod_ecls = 4
      AND kg_common.org_area (a.kodp, b.kodp) = 1
      AND b.kod_ecls = 4
      AND kg_common.user_podr_rights (1, b.kodp)  &gt; 0)
      CONNECT BY PRIOR kodp = kod_parent
      START WITH kod_parent IS NULL AND kod_ecls = 4 AND kod_separator &lt;= 2
      ORDER SIBLINGS BY kg.cut_num (name), name
    </view>
    <view name="kr_dep_byt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      SELECT LEVEL lvl, kodp
      FROM kr_org a
      WHERE kod_ecls = 4
      AND kod_separator = 2
      AND kodp IN
      (SELECT a.kodp
      FROM kr_org a, kr_org b
      WHERE     a.kod_ecls = 4
      AND kg_common.org_area (a.kodp, b.kodp) = 1
      AND b.kod_ecls = 4
      AND kg_common.user_podr_rights (5, b.kodp)  &gt; 0)
      CONNECT BY PRIOR kodp = kod_parent
      START WITH kod_parent IS NULL AND kod_ecls = 4 AND kod_separator &lt;= 2
      ORDER SIBLINGS BY kg.cut_num (name), name
    </view>
    <view name="kr_podr" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      SELECT kodp, name, sname
      FROM kr_org a
      WHERE kod_ecls = 4
      AND kod_separator = 5
      AND kg_common.user_podr_rights (1, kodp)  &gt; 0
    </view>
    <view name="kr_podr_byt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      SELECT kodp, name, sname
      FROM kr_org a
      WHERE kod_ecls = 4
      AND kod_separator = 5
      AND kg_common.user_podr_rights (5, kodp)  &gt; 0
    </view>
    <view name="kr_org_ecls4" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_org.xml">
      SELECT kodp
      FROM kr_org
      WHERE kod_ecls = 4
      AND kg_common.user_podr_rights (1, kodp)  &gt; 0
    </view>
    <view name="payer_prizn_activ" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml">
      select 0 as kod, 'Активный' as name from dual union
      select 1, 'Неактивный' from dual union
      select 2, 'Преддоговорной' from dual
    </view>
    <view name="payer_abon_type" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml">
      select 1 as kod_abon_type, 'Физические лица' as abon_type_name from dual union
      select 2, 'Юридические лица' from dual
    </view>
    <view name="tco_net_dep" title="ТСО (граница с сетями)" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_payer.xml">
      SELECT  net.kodp as kodp,
              max(net.name) as tco_net_name  -- ТСО (граница с сетями)
      --  , max(pwrc.name) as tco_pwrc_name -- ТСО (услуги по передаче)
      FROM hr_pmax_history h
      JOIN hr_pmax_detail d ON (h.kod_pmax_history = d.kod_pmax_history)
      JOIN hr_attpoint a ON (d.kod_attpoint = a.kod_attpoint)
      LEFT JOIN kr_payer net ON a.kodp_net = net.kodp
      -- LEFT JOIN kr_payer pwrc ON a.kodp_pwrcompany = pwrc.kodp
      inner join kr_numobj n ON h.kod_numobj = n.kod_numobj
      inner join kr_dogovor dog ON n.kod_dog = dog.kod_dog
      WHERE  d.kodnagruzpotreb = a.kodnagruzpotreb
      and dog.dep = :p_dep
      GROUP BY net.kodp
    </view>
    <view name="kr_spras_vid_tehn" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_spras.xml">
      select 0 as vid_tehn, 'Выписка извещения' as name from dual 
      union all
      select 1, 'Через абонентскую книжку' from dual
    </view>
    <view name="kr_vist_day_pr_vist_av" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\kr_vist_day.xml">
      select 0 as id, 'Под текущий' as name from dual
      union all
      select 1, 'Под следующий' from dual
      union all
      select 2, 'Через месяц' from dual
    </view>
    <view name="ks_tarif_bu" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ks_tarif.xml">
      select 1 as kod_tarif_bu,null as kod_tarif_bu_gr,'1' as npp, 'Потребители приравненные к группе "население"' as name from  dual  union
      select 2 ,1 , '1.1', 'в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "1"'  from  dual  union
      select 3 ,1 , '1.2','в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "0,7"'  from  dual  union
      select 4 ,1 , '1.3','в т.ч. рассчитывающиеся за электроэнергию с коэффициентом "0,9"'  from  dual  union
      select 5 ,null ,'2','Бюджетные потребители'  from  dual  union
      select 6 ,null,'3','Сельскохозяйственные потребители'  from  dual union
      select 7 ,null,'4','Прочие одноставочные потребители'  from  dual union
      select 8 ,null,'5','Без услуг по передаче'  from  dual union 
      select 9 ,null,'6','Двухставочные потребители'  from  dual union
      select 10 ,9,'6.1','Прочие двуставочные потребители'  from  dual union
      select 11 ,9,'6.2','Двуставочные потребители, присоединенные к шинам станций' from dual union
      select 0 ,null,'0','Прочие'  from  dual
    </view>
    <view name="adress_type_fiz_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml">
      select 1 as kod_adress_type, 'Адрес объекта' as adress_type_name from dual union
      select 2, 'Адрес доставки' from dual
    </view>
    <view name="k_house_chet_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\k_house.xml">
      select 1 as kod_chet, 'Нечётная сторона' as chet_name from dual union
      select 2, 'Чётная сторона' from dual
    </view>
    <view name="price_cat" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\nr_account.xml">
      select 0 as category,'Население' as name from dual union
      select 1,'Первая ценовая категория' from dual union
      select 2,'Вторая ценовая категория' from dual union
      select 3,'Третяя ценовая категория' from dual union
      select 4,'Четвертая ценовая категория' from dual union
      select 5,'Пятая ценовая категория' from dual union
      select 6,'Шестая ценовая категория' from dual
    </view>
    <view name="sk_nachisl_teplo" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml">
      select 1.1 as vid_t_teplo,1 as vid_t_gr,'тепловая энергия в горячей воде' as name from  dual  union
      select 1.2 as vid_t_teplo,1 as vid_t_gr,'тепловая энергия в паре' as name from  dual  union
      select 2.1 ,2 ,'тепловая энергия на подогрев воды'  from  dual  union
      select 2.2 ,2 ,'холодная вода'  from  dual  union
      select 2.3 ,2 ,'теплоноситель'  from  dual  union
      select 3.1 ,3 ,'вода (ХОЧ)'  from  dual  union
      select 3.2 ,3,'пар (ХОВ)'  from  dual union
      select 4.1 ,4,'Тепловая энергия в горячей воде (по повышающему коэффициенту стоимости)' from dual union
      select 5.1 ,2,'Горячая вода (компонент холодная вода)'  from  dual union
      select 5.2 ,2,'Горячая вода'  from  dual
    </view>
    <view name="sk_nachisl_gr_teplo" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\sk_nachisl.xml">
      select 1 as vid_t_gr,'Тепловая энергия' as name from  dual  union
      select 2 ,'Горячее водоснабжение'  from  dual  union
      select 3 ,'Теплоноситель'  from  dual union
      select 4 ,'Тепловая энергия в горячей воде (по повышающему коэффициенту стоимости)' from dual 
   
    </view>
    <view name="prizn_zadol_dogplat_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      select 0 as kod, 'Нет' as name from dual union
      select 1, 'Есть' from dual
    </view>
    <view name="folders_vvod" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      select 0 as kod,'По платежным документам' as name from dual union all
      select 1,'Ручной ввод' from dual
    </view>
    <view name="prizn_arch_folder_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      select 1 as kod, 'Активный' as name from dual union all
      select 0, 'Архив' from dual
    </view>
    <view name="prizn_has_isp_hist_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      select 0 as kod, 'Нет' as name from dual union
      select 1, 'Есть' from dual
    </view>
    <view name="prizn_has_astrent_hist_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      select 0 as kod, 'Нет' as name from dual union
      select 1, 'Да' from dual
    </view>
    <view name="ur_inkasso_kodb_def" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_inkasso.xml">
      select k as kodb
      from
      (select DISTINCT(d.kodbpl) k, b.name n from
      ur_isp i, ur_hist_mat h, ur_dogplat dp, kr_dogovor d, ks_bank b
      where i.kod_isp = :kod_isp
      AND h.kod_hist_mat=i.kod_hist_mat
      AND h.kod_result IN (Select kod_result from us_result where decision = 1)
      AND dp.kod = h.kod_mat
      AND dp.kod_sdp=6
      AND d.kod_dog = dp.kod_dog
      AND b.kodb = d.kodbpl
      UNION all
      SELECT DISTINCT(d.kodbpl), b.name
      FROM ur_isp i, ur_hist_mat h, ur_dogplat dp, kr_dogovor d, kr_dogovor_banki db, ks_bank b
      where i.kod_isp is not null
      AND h.kod_hist_mat=i.kod_hist_mat
      AND h.kod_result IN (Select kod_result from us_result where decision = 1)
      AND dp.kod = h.kod_mat
      AND dp.kod_sdp=6
      AND d.kod_dog = dp.kod_dog
      AND d.kod_dog = db.kod_dog
      AND db.kodbpl = b.kodb
      )
      where rownum &lt; 2
  </view>
    <view name="prizn_arch_isp_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp.xml">
      select 1 as kod, 'Активный' as name from dual union all
      select 0, 'Архивный' from dual
    </view>
    <view name="prizn_activ_mat_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      select 0 as kod, 'Не переданы в суд' as name from dual union
      select 1, 'Переданы в суд' from dual
    </view>
    <view name="prizn_arch_mat_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      select 1 as kod, 'Активный' as name from dual union all
      select 0, 'Архивный' from dual
    </view>
    <view name="prizn_arch_pretenz_view" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_pretenz.xml">
      select 1 as kod, 'Активная' as name from dual union all
      select 0, 'Архивная' from dual
    </view>
    <view name="ur_sate" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_state.xml">
      select 6  as kod_ur_state , 'Мораторная задолженность' as name from dual
      union select 5 , 'На исполнительном производстве(казн.)' from dual
      union select 4 , 'На исполнительном производстве(инк.)' from dual
      union select 3 , 'На исполнительном производстве(ССП)' from dual
      union select 2 , 'Взысканная задолженность' from dual
      union select 1 , 'Исковая задолженность' from dual
    </view>
    <view name="us_doc_prizn" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\us_doc.xml">
      select 1 as kod, 'Первая инстанция' as name from dual union
      select 2, 'Апелляционная инстанция' from dual union
      select 3, 'Кассационная инстанция' from dual union
      select 4, 'Надзорная инстанция' from dual
    </view>
    <view name="sr_facvip_rec_info_m" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\vv_sr_facvip_rec_info_m.xml">
      SELECT KOD_SF,KOD_SF_OLD_NEG
      FROM

      (WITH rec1
      AS (  SELECT /*+materialize*/
      kod_recalc, kod_sf
      FROM sr_recalc_sf
      GROUP BY kod_recalc, kod_sf)
      SELECT rec1.kod_sf,
      CASE WHEN a.pr_negative_recalc = 1 THEN v.kod_sf_first END
      kod_sf_old_neg
      FROM rec1
      INNER JOIN sr_facvip v ON (rec1.kod_sf = v.kod_sf)
      INNER JOIN (select distinct kod_recalc,pr_negative_recalc
      from
      (  SELECT kod_recalc,
      CASE WHEN sum(b.nachisl) over (partition by v.kod_sf_first)  &lt;= 0 THEN 1 END
              pr_negative_recalc
              FROM rec1 a
              INNER JOIN sr_facras b ON (a.kod_sf = b.kod_sf)
              INNER JOIN sr_facvip v on (b.kod_sf = v.kod_sf)
              )
                ) a
      ON (rec1.kod_recalc = a.kod_recalc)
      )

      WHERE kod_sf_old_neg IS NOT NULL

      GROUP BY KOD_SF,KOD_SF_OLD_NEG
    </view>
    <view name="kv_org_sbyt" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\original\kv_org_sbyt.xml">
      mv_org_sbyt
    </view>
  </views>
  <reports child-name="report" key-name="name" />
  <forms child-name="form" key-name="name" />
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name">
    <expression-package name="reserv" timestamp="22.12.2016 02:02:40" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.reserv.xml">
      <call function="+nvl" as="fin_ul_rsrv_buh_nach" group="sum" type="number">
        <fact column="sr_facras_rsrv_buh_nach" />
        <fact column="sr_opl_rsrv_buh_nach" />
      </call>
      <call function="()" as="fin_ul_rsrv_buh_opl" group="sum" type="number">
        <fact column="sr_opl_rsrv_buh_opl" />
      </call>
      <call function="+nvl" as="fin_ul_rsrv_nal_nach" group="sum" type="number">
        <fact column="sr_facras_rsrv_nal_45_nach" />
        <fact column="sr_opl_rsrv_nal_45_nach" />
        <fact column="sr_facras_rsrv_nal_90_nach" />
        <fact column="sr_opl_rsrv_nal_90_nach" />
      </call>
      <call function="+nvl" as="fin_ul_rsrv_nal_opl" group="sum" type="number">
        <fact column="sr_opl_rsrv_nal_45_opl" />
        <fact column="sr_opl_rsrv_nal_90_opl" />
      </call>
      <call function="-nvl" as="fin_ul_rsrv_buh_ob" group="sum" type="number">
        <fact column="fin_ul_rsrv_buh_nach" />
        <fact column="fin_ul_rsrv_buh_opl" />
      </call>
      <call function="-nvl" as="fin_ul_rsrv_nal_ob" group="sum" type="number">
        <fact column="fin_ul_rsrv_nal_nach" />
        <fact column="fin_ul_rsrv_nal_opl" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_bk" timestamp="13.02.2017 11:03:36" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur.mor.xml">
      <call function="+nvl" as="fin_ul_mor_dolg" group="sum" title="Мораторная задолженность">
        <fact column="mor_in_dolg" />
        <call function="0-">
          <fact column="mor_opl_opl" />
        </call>
        <call function="0-">
          <fact column="mor_out_dolg" />
        </call>
      </call>
      <!--call function="over" as="ur_bk_last_st_name" group="max" type="string">
        <call function="last_value">
          <fact column="ur_stage_bk_st_name" agg="max" />
        </call>
        <call function="partition by">
          <column table="kod_folders" column="kod_folders" />
        </call>
        <call function="order by 2">
          <column table="dat" column="val" />
        </call>
      </call-->
      <call function="over" as="ur_bk_kodp_last_st_name" group="max" type="string">
        <call function="last_value">
          <fact column="ur_stage_bk_st_name" agg="max" />
        </call>
        <call function="partition by">
          <column table="kod_folders" column="kodp" />
        </call>
        <call function="order by 2">
          <column table="dat" column="val" />
        </call>
      </call>
    </expression-package>
    <expression-package name="ur_bnk_vvod_plus" timestamp="09.03.2025 12:41:36" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur_bnk_vvod_plus.xml">
      <call as="ur_bnk_list_ost_all_ba" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ba_ost_zadol_all" />
          <fact column="fin_ul_ob_ba" />
        </call>
      </call>
      <call as="ur_bnk_list_ost_all" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ba_ost_zadol_all" />
          <fact column="fin_ul_ob" />
        </call>
      </call>
      <call as="ur_bnk_list_ost_osnreal" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ba_ost_zadol_osn" />
          <fact column="fin_ul_ob_osn" />
        </call>
      </call>
      <call as="ur_bnk_list_ost_peni" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ba_ost_zadol_peni" />
          <fact column="fin_ul_ob_peni" />
        </call>
      </call>
      <call as="ur_bnk_list_ost_gp" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ba_ost_zadol_gp" />
          <fact column="fin_ul_ob_gp" />
        </call>
      </call>
    </expression-package>
    <expression-package name="ur_vvod" timestamp="09.03.2025 11:43:54" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur_vvod.xml">
      <call function="+nvl" as="ur_hist_mat_sum_pris_all" group="sum" title="Задолженность по решению суда (Всего)">
        <fact column="ur_hist_mat_osnreal" />
        <fact column="ur_hist_mat_peni" />
        <fact column="ur_hist_mat_ogr" />
        <fact column="ur_hist_mat_gp_otv" />
        <fact column="ur_hist_mat_sud_izd" />
        <fact column="ur_hist_mat_astrent" />
      </call>
      <call function="+nvl" as="ur_hist_mat_opl_all" group="sum" title="Оплачено до выдачи исп листа (Всего)">
        <fact column="ur_hist_mat_opl_osnreal" />
        <fact column="ur_hist_mat_opl_peni" />
        <fact column="ur_hist_mat_opl_gpotv" />
        <fact column="ur_hist_mat_opl_sud_izd" />
        <fact column="ur_hist_mat_opl_ogr" />
        <fact column="ur_hist_mat_opl_astrent" />
      </call>
      <call function="+nvl" as="ur_hist_mat_ba_decrease_all" group="sum" title="Оплачено до выдачи исп листа (Всего)">
        <fact column="ur_hist_mat_ba_opl_osnreal_ba" />
        <fact column="ur_hist_mat_ba_opl_peni_ba" />
        <fact column="ur_hist_mat_ba_opl_gpotv_ba" />
        <fact column="ur_hist_mat_ba_opl_ogr_ba" />
      </call>
      <call function="+nvl" as="ur_isp_opl_after_isp_list_all" group="sum" title="Оплачено всего после выдачи исп листа (ручной ввод, карточка ПИР, вкладка ИЛ)">
        <fact column="ur_isp_opl_osnreal_vvod" />
        <fact column="ur_isp_opl_peni_vvod" />
        <fact column="ur_isp_opl_ogr_vvod" />
        <fact column="ur_isp_opl_gp_vvod" />
        <fact column="ur_isp_opl_astrent_vvod" />
        <fact column="ur_isp_opl_sud_izd_vvod" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ostatok_zadol_all" group="sum" title="Остаток задолженности (Всего)">
        <fact column="ur_hist_mat_sum_pris_all" />
        <fact column="ur_hist_mat_opl_all" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ba_ost_zadol_all" group="sum" title="Остаток задолженности (Всего)">
        <fact column="ur_mat_zadol_po_resh_ba" />
        <fact column="ur_hist_mat_ba_decrease_all" />
      </call>
      <call function="+nvl" as="ur_hist_mat_sum_pris" group="sum" title="Присуждено (Осн. реал + пени)">
        <fact column="ur_hist_mat_osnreal" />
        <fact column="ur_hist_mat_peni" />
      </call>
      <call function="vg_period.ym_enum_str_to_ym_ranges_str" as="mat_peni_period_str" group="max" title="Период пени">
        <fact column="mat_peni_period_ym" />
      </call>
      <call function="+nvl" as="ur_mat_zadol_po_isku" group="sum">
        <fact column="ur_mat_osnreal" />
        <fact column="ur_mat_peni" />
        <fact column="ur_mat_ogr" />
      </call>
      <call function="+nvl" as="ur_mat_zadol_po_isku_ba" group="sum">
        <fact column="ur_mat_ba_osnreal_ba" />
        <fact column="ur_mat_ba_peni_ba" />
        <fact column="ur_mat_ba_ogr_ba" />
      </call>
      <call function="+nvl" as="ur_mat_zadol_po_resh_ba" group="sum">
        <fact column="ur_hist_mat_ba_osnreal_ba" />
        <fact column="ur_hist_mat_ba_peni_ba" />
        <fact column="ur_hist_mat_ba_gp_ba" />
        <fact column="ur_hist_mat_ba_ogr_ba" />
      </call>
      <call function="-nvl" as="ur_mat_ostatok_zadol_do_resch" group="sum">
        <fact column="ur_mat_zadol_po_isku" />
        <fact column="ur_mat_ur_opl_do_resh_vvod" />
      </call>
      <call function="-nvl" as="ur_mat_ba_ostatok_zadol_do_res" group="sum">
        <fact column="ur_mat_zadol_po_isku_ba" />
        <fact column="ur_mat_ba_ur_opl_do_resh_vvod_ba" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_all" group="sum" title="Остаток задолженности Всего (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_zadol_all" />
        <fact column="ur_isp_opl_after_isp_list_all" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_osnreal" group="sum" title="Остаток задолженности осн. реализация (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_osnreal" />
        <fact column="ur_isp_opl_osnreal_vvod" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_peni" group="sum" title="Остаток задолженности пени (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_peni" />
        <fact column="ur_isp_opl_peni_vvod" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_ogr" group="sum" title="Остаток задолженности ограничение режима (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_ogr" />
        <fact column="ur_isp_opl_ogr_vvod" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_gp" group="sum" title="Остаток задолженности ГП (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_gp_otv" />
        <fact column="ur_isp_opl_gp_vvod" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_astrent" group="sum" title="Остаток задолженности астрент (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_astrent" />
        <fact column="ur_isp_opl_astrent_vvod" />
      </call>
      <call function="-nvl" as="ur_isp_ostatok_zadol_sud_izd" group="sum" title="Остаток задолженности судебные издержки (Карточка ПИР, вкладка ИЛ)">
        <fact column="ur_hist_mat_ostatok_sud_izd" />
        <fact column="ur_isp_opl_sud_izd_vvod" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ba_ost_zadol_osn" group="sum" title="Остаток задолженности осн. реализация (Карточка банкротства, История рассмотрения)">
        <fact column="ur_hist_mat_ba_osnreal_ba" />
        <fact column="ur_hist_mat_ba_opl_osnreal_ba" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ba_ost_zadol_peni" group="sum" title="Остаток задолженности пени (Карточка банкротства, История рассмотрения)">
        <fact column="ur_hist_mat_ba_peni_ba" />
        <fact column="ur_hist_mat_ba_opl_peni_ba" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ba_ost_zadol_gp" group="sum" title="Остаток задолженности ГП (Карточка банкротства, История рассмотрения)">
        <fact column="ur_hist_mat_ba_gp_ba" />
        <fact column="ur_hist_mat_ba_opl_gpotv_ba" />
      </call>
      <call function="-nvl" as="ur_hist_mat_ba_ost_zadol_ogr" group="sum" title="Остаток задолженности ограничение (Карточка банкротства, История рассмотрения)">
        <fact column="ur_hist_mat_ba_ogr_ba" />
        <fact column="ur_hist_mat_ba_opl_ogr_ba" />
      </call>
    </expression-package>
    <expression-package name="ur_vvod_pretenz" timestamp="17.09.2023 17:14:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur_vvod_petenz.xml">
      <call function="vg_period.ym_enum_str_to_ym_ranges_str" as="pretenz_peni_period_str" group="max" title="Период пени">
        <fact column="pretenz_peni_period_ym" />
      </call>
      <call function="+nvl" as="ur_pretenz_vvod_sum_all" group="sum">
        <fact column="ur_pretenz_vvod_sum_osn" />
        <fact column="ur_pretenz_vvod_sum_peni" />
        <fact column="ur_pretenz_ogr" />
      </call>
      <call function="+nvl" as="ur_pretenz_vvod_opl_all" group="sum">
        <fact column="ur_pretenz_vvod_opl_osn" />
        <fact column="ur_pretenz_vvod_opl_peni" />
        <fact column="ur_pretenz_opl_ogr" />
      </call>
      <call function="-nvl" as="ur_pretenz_vvod_ostatok_all" group="sum" title="Остаток задолженности по претензии (Карточка ПИР, вкладка Претензии)" comment="Остаток задолженности по претензии (Карточка ПИР, вкладка Претензии)">
        <fact column="ur_pretenz_vvod_sum_all" />
        <fact column="ur_pretenz_vvod_opl_all" />
      </call>
      <call function="-nvl" as="ur_pretenz_vvod_ostatok_osn" group="sum" title="Остаток задолженности основная реализация (Карточка ПИР, вкладка ИЛ)" comment="Остаток задолженности основная реализация  (Карточка ПИР, вкладка Претензии)">
        <fact column="ur_pretenz_vvod_sum_osn" />
        <fact column="ur_pretenz_vvod_opl_osn" />
      </call>
      <call function="-nvl" as="ur_pretenz_vvod_ostatok_peni" group="sum" title="Остаток задолженности пени (Карточка ПИР, вкладка ИЛ)" comment="Остаток задолженности пени (Карточка ПИР, вкладка Претензии)">
        <fact column="ur_pretenz_vvod_sum_peni" />
        <fact column="ur_pretenz_vvod_opl_peni" />
      </call>
    </expression-package>
    <expression-package name="ur_vvod_plus" timestamp="24.09.2023 02:27:23" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.ur_vvod_plus.xml">
      <call as="ur_dp_priz_hnd_plus_vvod" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_sum_pris_all" />
          <fact column="ur_dp_priz_hnd" />
        </call>
      </call>
      <call as="ur_opl_do_il_hnd_plus_vvod" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_opl_all" />
          <fact column="ur_opl_do_il_hnd" />
        </call>
      </call>
      <call as="dolg_on_il_hnd_plus_vvod" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_hist_mat_ostatok_zadol_all" />
          <fact column="dolg_on_il_hnd" />
        </call>
      </call>
      <call as="ur_opl_posl_il_hnd_plus_vvod" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_isp_opl_after_isp_list_all" />
          <fact column="ur_opl_posl_il_hnd" />
        </call>
      </call>
      <call as="dolg_resh_tek_hnd_plus_vvod" group="sum" function="+nvl">
        <call function="if">
          <call function="=1">
            <column table="kod_folders" column="vvod" />
          </call>
          <fact column="ur_isp_ostatok_zadol_all" />
          <fact column="dolg_resh_tek_hnd" />
        </call>
      </call>
      <call as="ur_folders_ndog_ext" function="if" group="stragg_dist" type="string">
        <call function="is not null">
          <column table="kod_folders" column="kod_dog" />
        </call>
        <fact column="ur_folders_ndog" />
        <fact column="kr_dogovor_ndog_active" />
      </call>
      <call as="ur_folders_dog_name_ext" function="if" group="max" type="string">
        <call function="is not null">
          <column table="kod_folders" column="kod_dog" />
        </call>
        <fact column="ur_folders_dog_name" />
        <fact column="kr_dog_name" />
      </call>
    </expression-package>
    <expression-package name="asuse" timestamp="01.04.2016 17:00:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <!--<call function="if" as="test_ym" group="sum" title="Тест период">
        <call function="gt">
          <column table="ym" column="val" />
          <const>2014</const>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="over" as="sr_facras_nachisl_itog" group="sum">
        <call function="sum">
          <fact column="sr_facras_nachisl" />
        </call>
        <call function="partition by">
          <column table="kod_dog" column="kod_dog" />
        </call>
        <call function="order by 2">
          <column table="ym" column="val" />
        </call>
      </call>
      <call function="over" as="sr_facras_nachisl_itog" group="sum">
        <call function="sum">
          <fact column="sr_facras_nachisl" />
        </call>
        <call function="partition by">
          <column table="kod_dog" column="kod_dog" />
        </call>
        <call function="order by 2">
          <column table="ym" column="val" />
        </call>
      </call>
      <call function="()" as="sr_facras_nachisl_itog11" group="sum" cumulate="ym">
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="()" as="sr_facras_nachisl_itog1" group="sum">
        <fact column="sr_facras_nachisl_itog11" />
      </call>
      <call function="over" as="sr_facopl_opl_itog" group="sum">
        <call function="sum">
          <fact column="sr_facopl_opl" />
        </call>
        <call function="partition by">
          <column table="kod_dog" column="kod_dog" />
        </call>
        <call function="order by 2">
          <column table="ym" column="val" />
        </call>
      </call>-->
    </expression-package>
    <expression-package name="asuse_pir" timestamp="09.03.2025 12:25:28" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="+nvl" agg="sum" as="ur_hist_mat_ba_opl_all">
        <fact column="ur_opl_bnk_posl_resh_osn" />
        <fact column="ur_opl_bnk_posl_resh_peni" />
        <fact column="ur_opl_bnk_posl_resh_shtr" />
        <fact column="ur_opl_bnk_posl_resh_gp" />
        <fact column="ur_hist_mat_ba_opl_ogr_ba" />
      </call>
      <call function="-nvl" as="ur_dp_dolg_vist_or_priz" group="sum" title="Долг по юр. документу">
        <fact column="ur_dp_vist_or_priz" />
        <fact column="ur_opl_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_dolg_vist_or_priz_osn" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_dp_dolg_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_dolg_vist_or_priz_pn" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_dp_dolg_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_dolg_vist_or_priz_shtr" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_dp_dolg_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_dolg_vist_or_priz_gp" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_dp_dolg_vist_or_priz" />
      </call>
      <call function="if" as="ur_opl_do_resh" group="sum" title="Оплата до вынес. реш. суда" type="number">
        <call function="lt">
          <column table="kod_opl" column="dat_uch" />
          <call function="nvl">
            <column table="kod_hist_mat_dec" column="dat_post" />
            <call function="doomsday" />
          </call>
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_bnk_do_resh" group="sum" title="Оплата до вынес. реш. суда" type="number">
        <call function="lt">
          <column table="kod_opl" column="dat_uch" />
          <call function="nvl">
            <column table="kod_hist_mat_dec_ba" column="dat_post" />
            <call function="doomsday" />
          </call>
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_do_resh_osn" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_opl_do_resh" />
      </call>
      <call function="if" as="ur_opl_do_resh_peni" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_opl_do_resh" />
      </call>
      <call function="if" as="ur_opl_do_resh_shtr" group="sum" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_opl_do_resh" />
      </call>
      <call function="if" as="ur_opl_do_dat" group="sum" title="Оплата по юр. док до заданной даты" type="number">
        <params>
          <param name="dat" />
        </params>
        <call function="lt">
          <column table="kod_opl" column="dat_uch" />
          <useparam name="dat" />
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_deb_posl_resh" group="sum" title="Оплата после вынес. реш. суда" type="number">
        <call function="ge">
          <column table="kod_opl" column="dat_uch" />
          <column table="kod_hist_mat_dec" column="dat_post" />
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_posl_resh_gp" group="sum" title="Оплата ГП после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_opl_posl_resh" />
      </call>
      <call function="if" as="ur_opl_bnk_posl_resh" group="sum" title="Оплата после вынес. реш. суда" type="number">
        <call function="ge">
          <column table="kod_opl" column="dat_uch" />
          <column table="kod_hist_mat_dec_ba" column="dat_post" />
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_bnk_posl_resh_peni" group="sum" title="Оплата ГП после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_opl_bnk_posl_resh" />
      </call>
      <call function="if" as="ur_opl_bnk_posl_resh_shtr" group="sum" title="Оплата штрафа после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_opl_bnk_posl_resh" />
      </call>
      <call function="if" as="ur_opl_bnk_posl_resh_gp" group="sum" title="Оплата ГП после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_opl_bnk_posl_resh" />
      </call>
      <call function="if" as="ur_opl_bnk_posl_resh_osn" group="sum" title="Оплата ГП после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_opl_bnk_posl_resh" />
      </call>
      <call function="+nvl" group="sum" as="ur_opl_posl_resh">
        <fact column="sr_opl_kred_ur" />
        <fact column="ur_opl_deb_posl_resh" />
      </call>
      <call function="if" as="ur_opl_do_il" group="sum" title="Оплата по. реш. суда до выдачи исп. листа" type="number">
        <call function="and">
          <call function="lt">
            <column table="kod_opl" column="dat_uch" />
            <call function="nvl">
              <column table="kod_isp" column="dat_doc" />
              <call function="doomsday" />
            </call>
          </call>
        </call>
        <fact column="ur_opl_posl_resh" />
      </call>
      <call function="if" as="ur_opl_deb_do_il" group="sum" title="Оплата по. реш. суда до выдачи исп. листа" type="number">
        <call function="and">
          <call function="lt">
            <column table="kod_opl" column="dat_uch" />
            <call function="nvl">
              <column table="kod_isp" column="dat_doc" />
              <call function="doomsday" />
            </call>
          </call>
        </call>
        <fact column="ur_opl_deb_posl_resh" />
      </call>
      <call function="if" as="ur_opl_do_il_osn" group="sum" title="Оплата осн. реал. до выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_opl_do_il" />
      </call>
      <call function="if" as="ur_opl_do_il_peni" group="sum" title="Оплата % за польз. чуж.ден. ср. до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_opl_do_il" />
      </call>
      <call function="if" as="ur_opl_do_il_shtr" group="sum" title="Оплата штрафа до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_opl_do_il" />
      </call>
      <call function="if" as="ur_opl_do_il_gp" group="sum" title="Оплата ГП" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_opl_do_il" />
      </call>
      <call function="if" as="ur_opl_posl_il" group="sum" type="number" title="Оплата по исп. листу">
        <call function="ge">
          <column table="kod_opl" column="dat_uch" />
          <column table="kod_isp" column="dat_doc" />
        </call>
        <fact column="ur_opl_posl_resh" />
      </call>
      <call function="if" as="ur_opl_deb_posl_il" group="sum" type="number" title="Оплата по исп. листу">
        <call function="ge">
          <column table="kod_opl" column="dat_uch" />
          <column table="kod_isp" column="dat_doc" />
        </call>
        <fact column="ur_opl_deb_posl_resh" />
      </call>
      <call function="if" as="ur_opl_posl_il_gp" group="sum" title="Оплата ГП после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_opl_posl_il" />
      </call>
      <call function="if" as="ur_opl_posl_il_peni" group="sum" title="Оплата % за польз. чуж.ден. ср. после выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_opl_posl_il" />
      </call>
      <call function="if" as="ur_opl_posl_il_shtr" group="sum" title="Оплата штрафа после выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_opl_posl_il" />
      </call>
      <call function="if" as="ur_opl_posl_il_osn" group="sum" title="Оплата осн. реал. после выдачи исп. листа" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_opl_posl_il" />
      </call>
      <call function="if" as="ur_opl_do_ip_in" group="sum" title="Оплата до начала исполнительного производства" type="number">
        <call function="and">
          <call function="lt">
            <column table="kod_opl" column="dat_uch" />
            <column table="kod_folders_isp" column="dat_create" />
          </call>
        </call>
        <fact column="ur_opl_posl_resh" />
      </call>
      <call function="if" group="sum" as="dolg_on_resh" title="Остаток задолженности до вынес. реш. суда" type="number">
        <call function="is not null">
          <column table="kod_hist_mat_dec" column="dat_post" />
        </call>
        <call function="-nvl">
          <fact column="ur_dp_summa" />
          <fact column="ur_opl_do_resh" />
        </call>
      </call>
      <call function="-nvl" group="sum" as="dolg_do_resh" title="Остаток задолженности до вынес. реш. суда" type="number">
        <fact column="ur_dp_summa" />
        <fact column="ur_opl_do_resh" />
      </call>
      <call function="if" as="dolg_do_resh_osn" group="sum" title="Остаток задолженности до вынес. реш. суда осн. реал" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="dolg_do_resh" />
      </call>
      <call function="if" as="dolg_do_resh_peni" group="sum" title="Остаток задолженности до вынес. реш. суда  % за польз. чуж.ден. ср. до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="dolg_do_resh" />
      </call>
      <call function="if" as="dolg_do_resh_shtr" group="sum" title="Остаток задолженности до вынес. реш. суда  пени" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="dolg_do_resh" />
      </call>
      <call function="if" as="dolg_on_resh_osn" group="sum" title="Остаток задолженности до вынес. реш. суда осн. реал" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="dolg_on_resh" />
      </call>
      <call function="if" as="dolg_on_resh_peni" group="sum" title="Остаток задолженности до вынес. реш. суда  % за польз. чуж.ден. ср. до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="dolg_on_resh" />
      </call>
      <call function="-nvl" as="ur_dolg_on_dat" group="sum" title="Задолженность по юр. документу на дату">
        <params>
          <param name="dat" />
        </params>
        <fact column="ur_dp_summa" />
        <fact column="ur_opl_do_dat">
          <withparams>
            <useparam name="dat" />
          </withparams>
        </fact>
      </call>
      <call function="if" group="sum" as="dolg_resh_tek" title="Текущая задолженность по решению" type="number">
        <call function="true" />
        <call function="-nvl">
          <fact column="ur_dp_sum_v" />
          <fact column="ur_opl_posl_resh" />
        </call>
      </call>
      <call function="if" as="dolg_resh_tek_osn" group="sum" title="Текущая задолженность по решению осн. реал" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="dolg_resh_tek" />
      </call>
      <call function="if" as="dolg_resh_tek_peni" group="sum" title="Текущая задолженность по решению  % за польз. чуж.ден. ср. до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="dolg_resh_tek" />
      </call>
      <call function="if" as="dolg_resh_tek_shtr" group="sum" title="Текущая задолженность по решению  штраф" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="dolg_resh_tek" />
      </call>
      <call function="if" as="dolg_resh_tek_gp" group="sum" type="number" title="Текущая задолженность по решению  ГП">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="dolg_resh_tek" />
      </call>
      <call function="if" as="dolg_resh_tek_gp_doc" group="sum" title="Текущая задолженность по решению  % за польз. чуж.ден. ср. до выд. исп. л." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="dolg_resh_tek" />
      </call>
      <call function="if" group="sum" as="dolg_on_il" title="Задолженность на дату выдачи исп. листа" type="number">
        <call function="true" />
        <call function="-nvl">
          <fact column="ur_dp_sum_v" />
          <fact column="ur_opl_do_il" />
        </call>
      </call>
      <call function="if" group="sum" as="dolg_deb_on_il" title="Задолженность на дату выдачи исп. листа" type="number">
        <call function="true" />
        <call function="-nvl">
          <fact column="ur_dp_sum_v" />
          <fact column="ur_opl_deb_do_il" />
        </call>
      </call>
      <call function="if" as="dolg_on_il_osn" group="sum" title="Задолженность на дату выдачи исп. листа осн. реал." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="dolg_on_il" />
      </call>
      <call function="if" as="dolg_on_il_gp_doc" group="sum" title="Задолженность на дату выдачи исп. листа % за польз. чуж.ден. ср." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="dolg_on_il" />
      </call>
      <call function="if" as="dolg_on_il_peni" group="sum" title="Задолженность на дату выдачи исп. листа % за польз. чуж.ден. ср." type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="dolg_on_il" />
      </call>
      <call function="if" as="dolg_on_il_shtr" group="sum" title="Задолженность на дату выдачи исп. листа по штрафу" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="dolg_on_il" />
      </call>
      <call function="if" as="dolg_on_il_gp" group="sum" title="Задолженность на дату выдачи исп. листа ГП" type="number">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="dolg_on_il" />
      </call>
      <call function="if" group="sum" as="dolg_on_ip_in" title="Задолженность на дату начала исп. производства" type="number">
        <call function="is not null">
          <column table="kod_folders_isp" column="dat_create" />
        </call>
        <call function="-nvl">
          <fact column="ur_dp_sum_v" />
          <fact column="ur_opl_do_ip_in" />
        </call>
      </call>
      <call function="if" as="ur_opl" group="sum" title="Оплата по юр. документу" type="number">
        <call function="or">
          <call function="=1">
            <column table="kod_dogplat" column="prizn_konv" title="вроде как признак счета сформированного в арбитраже" />
          </call>
          <call function="gt">
            <column table="kod_opl" column="dat_uch" />
            <call function="earliest">
              <column table="kod_dogplat" column="dat_form" />
              <column table="kod_hist_mat_dec" column="dat_post" />
            </call>
          </call>
        </call>
        <fact column="fin_ul_fl_opl" />
      </call>
      <call function="if" as="ur_opl_do_ur" group="sum" type="number" title="Оплата до включения в юр. документ">
        <call function="le">
          <column table="kod_opl" column="dat_uch" />
          <call function="earliest">
            <column table="kod_dogplat" column="dat_form" />
            <column table="kod_hist_mat_dec" column="dat_post" />
          </call>
        </call>
        <fact column="fin_ul_fl_opl" />
      </call>
      <call function="if" as="ur_opl_peni" group="sum" title="Оплата по юр. документу (пени)" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_osn" group="sum" title="Оплата по юр. документу (осн. реал)" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_opl_vist_or_priz" group="sum" title="Оплата по юр. документу" type="number" comment="!!! Неправильно. Переделать.">
        <call function="gt">
          <column table="kod_opl" column="dat_uch" />
          <call function="nvl">
            <column table="kod_hist_mat_dec" column="dat_post" />
            <column table="kod_dogplat" column="dat_form" />
          </call>
        </call>
        <fact column="fin_ul_fl_opl" />
      </call>
      <call function="greatest_num" as="kod_ur_state" group="max" type="number" title="Код юр. статуса" fact-dimension="kod_ur_state">
        <fact column="kod_ur_state_5" />
        <fact column="kod_ur_state_6" />
        <fact column="kod_ur_state_4" />
        <fact column="kod_ur_state_3" />
        <fact column="kod_ur_state_2" />
        <fact column="kod_ur_state_1" />
      </call>
      <call function="greatest_num" as="kod_ur_state_pp" group="max" type="number" title="Код юр. статуса" fact-dimension="kod_ur_state">
        <fact column="kod_ur_state_5" />
        <fact column="kod_ur_state_4" />
        <fact column="kod_ur_state_3" />
        <fact column="kod_ur_state_2" />
        <fact column="kod_ur_state_1" />
      </call>
      <call function="greatest_num" as="kod_ur_state_astr" group="max" type="number" title="Код юр. статуса">
        <fact column="kod_ur_state_5" />
        <fact column="kod_ur_state_4" />
        <fact column="kod_ur_state_3" />
        <fact column="kod_ur_state_2" />
        <fact column="kod_ur_state_1" />
      </call>
      <call function="earliest" as="ur_isp_pr_min_date" group="min" fact-dimension="kod_ur_state" title="Дата выставления на исполнение">
        <fact column="ur_kazn_dat_doc_min" />
        <fact column="ur_ink_dat_doc_min" />
        <fact column="ur_ssp_dat_doc_min" />
      </call>
      <call as="ur_dolg_vist" group="sum" function="-nvl" title="Задолженность по юр. документу от предъявленной суммы">
        <fact column="ur_dp_summa" />
        <fact column="ur_opl" />
      </call>
      <call function="if" as="ur_dolg_vist_osn" group="sum" title="Задолженность по юр. документу от предъявленной суммы (осн. реал)" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_dolg_vist" />
      </call>
      <call function="if" as="ur_dolg_vist_peni" group="sum" title="Задолженность по юр. документу от предъявленной суммы (пени)" type="number">
        <call function="=">
          <column table="vid_real" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_dolg_vist" />
      </call>
    </expression-package>
    <expression-package name="asuse_fin_ul" timestamp="09.03.2025 12:36:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="+nvl" as="fin_ul_ob_ba" agg="sum">
        <fact column="fin_ul_ob_osn" />
        <fact column="fin_ul_ob_peni" />
        <fact column="fin_ul_ob_shtr" />
        <fact column="fin_ul_ob_gp" />
        <fact column="ur_hist_mat_ba_ost_ogr" />
      </call>
      <call function="vg_period.ym_enum_str_to_ym_ranges_str" as="peni_period_str" group="max" title="Период пени">
        <fact column="peni_period_ym" />
      </call>
      <call function="smallest not 0" as="ur_mat_period_min" group="min" title="Оборот">
        <fact column="ur_dp_ym_min_mat" />
        <fact column="ur_mat_period_zadol_s_vvod" />
      </call>
      <call function="greatest_num" as="ur_mat_period_max" group="max" title="Оборот">
        <fact column="ur_dp_ym_max_mat" />
        <fact column="ur_mat_period_zadol_po_vvod" />
      </call>
      <call function="nvl" as="peni_period_str_full" group="max" title="Оборот">
        <fact column="peni_period_str" />
        <fact column="mat_peni_period_str" />
      </call>
      <call function="-nvl" as="fin_ul_ob" group="sum" title="Оборот">
        <fact column="sr_facras_nachisl" />
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="if" as="fin_ul_ob_on_date" group="sum" title="Оборот" type="number">
        <params>
          <param name="dat" type="number" />
        </params>
        <call function="le">
          <column table="dat_dolg" column="val" />
          <useparam name="dat" />
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" as="fin_ul_ob_on_tek_date" group="sum" title="Оборот" type="number">
        <params>
          <param name="dat" type="number" />
        </params>
        <call function="le">
          <column table="dat" column="val" />
          <useparam name="dat" />
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="-nvl" as="fin_ul_ob_do_dat_dolg" group="sum" title="Оборот до даты задолженности">
        <fact column="sr_facras_nachisl" />
        <fact column="sr_opl_sf_do_dat_dolg" />
      </call>
      <call group="sum" function="if" as="sr_opl_sf_do_dat_dolg" title="Оплата до даты наступления задолженности">
        <call function="le">
          <column table="kod_opl" column="dat_oper" />
          <column table="kod_sf" column="dat_ezad_kaz" />
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="-nvl" as="fin_ul_ob_kassa" group="sum" title="Оборот по кассе">
        <fact column="sr_opl_opl_kassa_cash" />
        <fact column="sr_inkasso_sum" />
      </call>
      <call function="if" as="fin_ul_ym_dolg_min" group="min" title="Период начисления мин.">
        <call function="!=0">
          <call function="over">
            <call function="sum">
              <fact column="fin_ul_ob" />
            </call>
            <call function="partition by">
              <column table="kod_sf" column="kod_sf" />
            </call>
          </call>
        </call>
        <column table="kod_sf" column="ym" />
      </call>
      <call function="if" as="fin_ul_ym_dolg_max" group="max" title="Период начисления макс.">
        <call function="!=0">
          <call function="over">
            <call function="sum">
              <fact column="fin_ul_ob" />
            </call>
            <call function="partition by">
              <column table="kod_sf" column="kod_sf" />
            </call>
          </call>
        </call>
        <column table="kod_sf" column="ym" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_opl_bnk_osn_av">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
          </call>
        </call>
        <fact column="sr_opl_opl_bnk" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_osn">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_osn_rm">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_opl_sf_osn">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_opl_sf_av">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_opl_kred_av">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="sr_opl_opl_kred" />
      </call>
      <call function="if" type="number" group="sum" as="sr_opl_opl_real_rm">
        <call function="in">
          <column table="kod_opl" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
            <const>3</const>
          </call>
        </call>
        <fact column="opl" />
      </call>
      <call function="if" type="number" group="sum" as="sr_opl_opl_real">
        <call function="in">
          <column table="kod_opl" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
          </call>
        </call>
        <fact column="opl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_av" title="Начислено (аванс)">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_av_10" title="Начислено (аванс)">
        <call function="and">
          <call function="in">
            <column table="vid_real" column="vid_real" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <call function="not in">
            <column table="kod_vist_day" column="kod_bzad" />
            <const>24</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_av_10_w_day" title="Начислено (аванс)">
        <call function="and">
          <call function="in">
            <column table="vid_real" column="vid_real" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <call function="not in">
            <column table="kod_vist_day" column="kod_bzad" />
            <const>(13,24)</const>
          </call>
          <call function="=">
            <column table="kod_vist_day" column="day" />
            <column table="kod_sf" column="vist_day" />
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_av_25" title="Начислено (аванс)">
        <call function="and">
          <call function="in">
            <column table="vid_real" column="vid_real" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <call function="in">
            <column table="kod_vist_day" column="kod_bzad" />
            <const>24</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_av_25_w_day" title="Начислено (аванс)">
        <call function="and">
          <call function="in">
            <column table="vid_real" column="vid_real" />
            <call function="array">
              <const>0</const>
            </call>
          </call>
          <call function="in">
            <column table="kod_vist_day" column="kod_bzad" />
            <const>(13,24)</const>
          </call>
          <call function="=">
            <column table="kod_vist_day" column="day" />
            <column table="kod_sf" column="vist_day" />
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_osn_rm" title="Оборот по осн. реал">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_osn" title="Оборот по осн. реал">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_not_av">
        <call function="not in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_osn_pr" title="Оборот по осн. и пр.  реал">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>3</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_av" title="Оборот по счетам на аванс">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_peni" title="Оборот по счетам на пени">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>7</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_shtr" title="Оборот по счетам на штраф">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>4</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_gp" title="Оборот по счетам на ГП">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>9</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_os_av" title="Оборот по осн. реал и авансам">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob" />
      </call>
      <call function="+nvl" as="fin_ul_ob_kr" group="sum" title="Кредиторская задолженность">
        <fact column="sr_opl_opl_kred" />
        <fact column="sr_opl_opl_stor" />
      </call>
      <call function="+nvl" as="fin_ul_ob_kr_nal" group="sum" title="Кредиторская задолженность НДС">
        <fact column="sr_opl_nal_kred" />
        <fact column="sr_opl_nal_stor" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_kr_os_av_rm" title="Кредиторская задолженность  по осн. реал и авансам">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
            <const>3</const>
          </call>
        </call>
        <fact column="fin_ul_ob_kr" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_kr_os_av" title="Кредиторская задолженность  по осн. реал и авансам">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob_kr" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_kr_os" title="Кредиторская задолженность  по осн. реал">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
        <fact column="fin_ul_ob_kr" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_kr_not_av" title="Кредиторская задолженность  по осн. реал">
        <call function="not in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob_kr" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_ob_kr_av" title="Кредиторская задолженность  по  авансам">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>0</const>
          </call>
        </call>
        <fact column="fin_ul_ob_kr" />
      </call>
      <call function="-nvl" as="fin_ul_ob_all_rm" title="Оборот деб. и кр. (долг)" group="sum">
        <fact column="fin_ul_ob_osn_rm" />
        <fact column="fin_ul_ob_kr_os_av_rm" />
      </call>
      <call function="-nvl" as="fin_ul_ob_all" title="Оборот деб. и кр. (долг)" group="sum">
        <fact column="fin_ul_ob_osn" />
        <fact column="fin_ul_ob_kr_os_av" />
      </call>
      <call function="+nvl" as="fin_ul_ob_os_av_uav" title="Оборот деб. осн. и ав. (долг)" group="sum">
        <fact column="fin_ul_ob_os_av" />
        <call function="-nvl">
          <fact column="undo_av_nach" />
          <fact column="sr_opl_opl_sf_stor" />
        </call>
      </call>
      <call function="-nvl" as="fin_ul_ob_os_av_norm_rm" title="Оборот деб. осн. и ав. (долг)" group="sum">
        <call function="+nvl">
          <fact column="sr_facvip_norm_av_av_nach_rm" />
          <fact column="sr_facvip_norm_av_osn_nach_rm" />
        </call>
        <call function="+nvl">
          <fact column="sr_opl_norm_av_av_rm_opl" />
          <fact column="sr_opl_norm_av_osn_rm_opl" />
        </call>
      </call>
      <call function="-nvl" as="fin_ul_ob_os_av_norm" title="Оборот деб. осн. и ав. (долг)" group="sum">
        <call function="+nvl">
          <fact column="sr_facvip_norm_av_av_nach" />
          <fact column="sr_facvip_norm_av_osn_nach" />
        </call>
        <call function="+nvl">
          <fact column="sr_opl_norm_av_av_opl" />
          <fact column="sr_opl_norm_av_osn_opl" />
        </call>
      </call>
      <call function="+nvl" as="fin_ul_ob_os_av_uav_kr" title="Оборот деб. и кр. (долг)" group="sum">
        <fact column="fin_ul_ob_os_av_uav" />
        <call function="0-">
          <fact column="fin_ul_ob_kr_os" />
        </call>
      </call>
      <call function="-nvl" as="fin_ul_ob_fac" group="sum" title="Оборот по расшифровкам">
        <fact column="sr_facras_nachisl" />
        <fact column="sr_facopl_opl" />
      </call>
      <call function="-nvl" as="fin_ul_ob_cust" group="sum" title="Оборот нат.показ.">
        <fact column="sr_facras_cust" />
        <fact column="sr_facopl_cust" />
      </call>
      <call function="-nvl" as="fin_ul_opl_nonal" group="sum" title="Оплачено без налогов">
        <fact column="sr_facopl_opl" />
        <fact column="sr_facopl_nal" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_nachisl_gp" title="Начисления госпошлины">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>9</const>
          </call>
        </call>
        <fact column="sr_facras_nachisl" />
      </call>
      <call function="if" type="number" group="sum" as="fin_ul_opl_gp" title="Начисления пени">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>9</const>
          </call>
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
    </expression-package>
    <expression-package name="asuse_fin_fl" timestamp="24.03.2016 13:53:57" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="-nvl" as="fin_fl_ob" group="sum" title="Оборот деб.">
        <fact column="tnr_acc_nach" />
        <fact column="tsr_opl_opl_izv" />
      </call>
      <call function="-nvl" as="fin_fl_acc_ob" group="sum" title="Оборот деб. (по начислениям)">
        <fact column="tnr_acc_nach" />
        <fact column="tsr_acc_opl_opl" />
      </call>
      <call function="+nvl" as="fin_fl_ob_kr" group="sum" title="Оборот кред.">
        <fact column="tsr_opl_opl_kred" />
        <fact column="tsr_opl_opl_stor" />
      </call>
      <call function="if" type="number" group="sum" as="fin_fl_ob_osn" title="Оборот по осн. реал">
        <call function="in">
          <column table="vid_real" column="vid_real" />
          <call function="array">
            <const>2</const>
          </call>
        </call>
        <fact column="fin_fl_ob" />
      </call>
    </expression-package>
    <expression-package name="asuse_fin_ul_fl" timestamp="28.04.2017 13:52:15" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="()" as="fin_ul_fl_opl" group="sum" comment="пока используется только в арбитраже">
        <fact column="sr_opl_opl_sf" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_fin_astr" timestamp="18.06.2016 02:44:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="if" as="fin_ul_astr_exst" group="max" title="Есть астрент (по начислениям)" type="number" controlType="UICheck">
        <call function="!=0">
          <fact column="fin_ul_nach_astr" />
        </call>
        <const>1</const>
      </call>
      <call function="-nvl" group="sum" as="fin_ul_dolg_astr" title="Долг по астренту">
        <fact column="fin_ul_nach_astr" />
        <fact column="fin_ul_opl_astr" />
      </call>
      <call function="if" as="ur_opl_do_il_astr" group="sum" title="Оплата по. реш. суда до выдачи исп. листа" type="number">
        <call function="lt">
          <column table="kod_opl_astr" column="dat_opl" />
          <call function="nvl">
            <column table="kod_isp" column="dat_doc" />
            <call function="doomsday" />
          </call>
        </call>
        <fact column="fin_ul_opl_astr" />
      </call>
      <call function="-nvl" group="sum" as="dolg_on_il_astr" title="Долг по астренту">
        <fact column="fin_ul_nach_astr" />
        <fact column="ur_opl_do_il_astr" />
      </call>
      <call function="if" as="ur_opl_posl_il_astr" group="sum" title="Оплата по. реш. суда до выдачи исп. листа" type="number">
        <call function="ge">
          <column table="kod_opl_astr" column="dat_opl" />
          <column table="kod_isp" column="dat_doc" />
        </call>
        <fact column="fin_ul_opl_astr" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_graf" timestamp="06.07.2018 18:48:13" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="over" group="min" as="ur_graf_dat_min" title="Самая раняя дата оплаты по гарфику" type="date">
        <call function="min">
          <fact column="ur_graf_opl_dat_min" />
        </call>
        <call function="partition by">
          <column table="kod_graf" column="kod_graf" />
        </call>
      </call>
      <call function="if" as="fin_ul_opl_graf_old" group="sum" title="Оплата по графику оплат" type="number">
        <call function="ge">
          <column table="kod_opl" column="dat_opl" />
          <column table="kod_graf" column="dat_opl_beg_nvl" />
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="if" as="fin_ul_opl_graf" group="sum" title="Оплата по графику оплат" type="number">
        <call function="and">
          <call function="!=nvl">
            <column table="kod_opl" column="pr_not_in_graf" />
            <const type="number">1</const>
          </call>
          <call function="ge">
            <column table="kod_opl" column="dat_opl" />
            <column table="kod_graf" column="dat_opl_beg_nvl" />
          </call>
        </call>
        <fact column="sr_opl_opl_sf" />
      </call>
      <call function="if" as="fin_ul_ob_graf" group="sum" title="Оборот по графику оплат" type="number">
        <call function="is not null">
          <column table="kod_graf" column="kod_graf" />
        </call>
        <call function="-nvl">
          <fact column="ur_graf_opl_sum" />
          <fact column="fin_ul_opl_graf" />
        </call>
      </call>
    </expression-package>
    <expression-package name="asuse_ur_ip" timestamp="20.06.2016 19:35:43" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="if" as="ur_fld_isp_kod_isp_vld" group="max" type="string">
        <call function="gt">
          <fact column="ur_folders_isp_othr_count" />
          <const>1</const>
        </call>
        <const>'По выбранному исп. листу уже есть папка исполнительного производства'</const>
      </call>
    </expression-package>
    <expression-package name="asuse_ur_pretenz" timestamp="27.07.2017 20:00:48" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="-nvl" as="ur_pretenz_ost_ogr" group="sum" title="Остаток расходов за ограничение энергопотребления">
        <fact column="ur_pretenz_ogr" />
        <fact column="ur_pretenz_opl_ogr" />
      </call>
      <call as="ur_dp_sum_all_on_pret" title="Заявленная сумма по претензии" group="sum" function="+nvl">
        <fact column="ur_dp_summa" />
        <fact column="ur_pretenz_ogr" />
      </call>
      <call as="ur_opl_on_pret" title="Оплата по претензии" group="sum" function="+nvl">
        <fact column="ur_opl" />
        <fact column="ur_pretenz_opl_ogr" />
      </call>
      <call as="ur_dolg_on_pret" group="sum" function="-nvl" title="Задолженность по претензии">
        <fact column="ur_dp_sum_all_on_pret" />
        <fact column="ur_opl_on_pret" />
      </call>
      <call as="ur_pretenz_count" title="Количество претензий в папке" group="sum" function="+" nullif="0">
        <fact column="ur_pretenz_count_old" />
        <fact column="ur_pret_count" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_sogl" timestamp="21.06.2016 00:55:34" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call as="ur_dp_sum_all_on_sogl" title="Заявленная сумма по доп.документу" group="sum" function="+nvl">
        <fact column="ur_dp_summa" />
        <fact column="ur_sogl_ogr" />
      </call>
      <call as="ur_opl_on_sogl" title="Оплата  по доп.документу" group="sum" function="+nvl">
        <fact column="ur_opl" />
        <fact column="ur_sogl_opl_ogr" />
      </call>
      <call as="ur_dolg_on_sogl" group="sum" function="-nvl" title="Задолженность  по доп.документу">
        <fact column="ur_dp_sum_all_on_sogl" />
        <fact column="ur_opl_on_sogl" />
      </call>
      <call function="-nvl" as="ur_sogl_ost_ogr" group="sum" title="Остаток расходов за ограничение энергопотребления">
        <fact column="ur_sogl_ogr" />
        <fact column="ur_sogl_opl_ogr" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_isk" timestamp="11.03.2019 15:44:05" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call as="ur_dp_priz_hnd" group="sum" function="+nvl" title="Признанная сумма  с учетом ручных сумм">
        <fact column="ur_dp_priz_all" />
        <fact column="ur_hist_mat_dec_hand_sum" />
      </call>
      <call as="ur_dp_ba_priz_hnd" group="sum" function="+nvl" title="Признанная сумма  с учетом ручных сумм">
        <fact column="ur_dp_priz_all" />
      </call>
      <call as="ur_hand_opl_do_il" function="if" type="number" title="Долг по ручным сумм до выдачи исп листа">
        <call function="is null">
          <column table="kod_isp" column="kod_isp" />
        </call>
        <fact column="ur_hist_mat_dec_hand_opl" />
      </call>
      <call as="ur_hand_dolg_on_il" function="if" type="number" title="Оплата ручных сумм до выдачи исп листа">
        <call function="is null">
          <column table="kod_isp" column="kod_isp" />
        </call>
        <fact column="ur_hist_mat_dec_hand_ost" />
        <fact column="ur_hist_mat_dec_hand_sum" />
      </call>
      <call as="ur_opl_do_il_hnd" group="sum" function="+nvl" title="Оплата до выдачи исп листа учетом ручных сумм">
        <fact column="ur_opl_do_il" />
        <fact column="ur_hand_opl_do_il" />
      </call>
      <call as="dolg_on_il_hnd" group="sum" function="+nvl" title="Долг на дату выдачи ИЛ с учетом ручных сумм">
        <fact column="dolg_on_il" />
        <fact column="ur_hand_dolg_on_il" />
        <fact column="dolg_on_il_astr" />
      </call>
      <call as="ur_opl_posl_il_hnd" group="sum" function="+nvl" title="Оплата по исп листу с учетом ручных сумм">
        <fact column="ur_opl_posl_il" />
        <fact column="ur_hist_mat_dec_hand_opl" />
        <fact column="ur_opl_posl_il_astr" />
      </call>
      <call as="dolg_resh_tek_hnd" group="sum" function="+nvl" title="Долг по решению  с учетом ручных сумм">
        <fact column="dolg_resh_tek" />
        <fact column="ur_hist_mat_dec_hand_ost" />
        <fact column="fin_ul_dolg_astr" />
      </call>
      <call as="dolg_resh_tek_hnd_s" group="sum" function="+nvl" title="Долг по решению  с учетом ручных сумм">
        <fact column="fin_ul_ob" />
        <fact column="ur_hist_mat_dec_hand_ost" />
        <fact column="fin_ul_dolg_astr" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_inkasso" timestamp="23.06.2016 16:35:14" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="-nvl" as="dolg_inkasso_tek_ogr" group="sum">
        <fact column="ur_hist_mat_dec_ogr" />
        <fact column="ur_inkasso_ogr_v" />
      </call>
      <call function="-nvl" as="dolg_inkasso_tek_sud_izd" group="sum">
        <fact column="ur_hist_mat_dec_sud_izd" />
        <fact column="ur_inkasso_sud_izd_v" />
      </call>
      <call function="-nvl" as="dolg_inkasso_tek_astr" group="sum">
        <fact column="dolg_on_il_astr" />
        <fact column="ur_inkasso_astrent_v" />
      </call>
      <call function="+nvl" as="ur_opl_inkasso" group="sum">
        <fact column="ur_opl_posl_il" />
        <fact column="ur_inkasso_hand_opl" />
      </call>
      <call function="-nvl" as="dolg_inkasso" group="sum">
        <fact column="dolg_on_il_hnd" />
        <fact column="ur_opl_inkasso" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_kazn" timestamp="30.06.2016 02:39:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="-nvl" as="dolg_kazn_tek_ogr" group="sum">
        <fact column="ur_hist_mat_dec_ogr" />
        <fact column="ur_kazn_ogr_v" />
      </call>
      <call function="-nvl" as="dolg_kazn_tek_sud_izd" group="sum">
        <fact column="ur_hist_mat_dec_sud_izd" />
        <fact column="ur_kazn_sud_izd_v" />
      </call>
      <call function="-nvl" as="dolg_kazn_tek_astr" group="sum">
        <fact column="dolg_on_il_astr" />
        <fact column="ur_kazn_astrent_v" />
      </call>
      <call function="+nvl" as="ur_opl_kazn" group="sum">
        <fact column="ur_opl_posl_il" />
        <fact column="ur_kazn_hand_opl" />
      </call>
      <call function="-nvl" as="dolg_kazn" group="sum">
        <fact column="dolg_on_il_hnd" />
        <fact column="ur_opl_kazn" />
      </call>
    </expression-package>
    <expression-package name="asuse_ur_isp_other" timestamp="22.09.2023 15:08:20" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <call function="if" as="dolg_isp_other_tek_ogr" group="sum" type="number">
        <call function="or">
          <call function="is not null">
            <fact column="ur_hist_mat_dec_ogr" />
          </call>
          <call function="is not null">
            <fact column="ur_isp_other_paid_rvre" />
          </call>
        </call>
        <call function="-nvl">
          <fact column="ur_hist_mat_dec_ogr" />
          <fact column="ur_isp_other_paid_rvre" />
        </call>
        <call function="null" />
      </call>
      <call function="if" as="dolg_isp_other_tek_sud_izd" group="sum" type="number">
        <call function="or">
          <call function="is not null">
            <fact column="ur_hist_mat_dec_sud_izd" />
          </call>
          <call function="is not null">
            <fact column="ur_isp_other_paid_sud_izd" />
          </call>
        </call>
        <call function="-nvl">
          <fact column="ur_hist_mat_dec_sud_izd" />
          <fact column="ur_isp_other_paid_sud_izd" />
        </call>
        <call function="null" />
      </call>
      <call function="if" as="dolg_isp_other_tek_astr" group="sum" type="number">
        <call function="or">
          <call function="is not null">
            <fact column="dolg_on_il_astr" />
          </call>
          <call function="is not null">
            <fact column="ur_isp_other_paid_astr" />
          </call>
        </call>
        <call function="-nvl">
          <fact column="dolg_on_il_astr" />
          <fact column="ur_isp_other_paid_astr" />
        </call>
        <call function="null" />
      </call>
      <call function="+nvl" as="ur_opl_isp_other" group="sum">
        <fact column="ur_opl_posl_il" />
        <fact column="ur_isp_other_hand_opl" />
      </call>
      <call function="-nvl" as="dolg_isp_other" group="sum">
        <fact column="dolg_on_il_hnd" />
        <fact column="ur_opl_isp_other" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_all" group="sum">
        <fact column="ur_hist_mat_ostatok_zadol_all" />
        <fact column="ur_opl_isp_other" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_osn" group="sum">
        <fact column="ur_hist_mat_ostatok_osnreal" />
        <fact column="ur_isp_other_paid_onsreal" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_peni" group="sum">
        <fact column="ur_hist_mat_ostatok_peni" />
        <fact column="ur_isp_other_paid_peni" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_gp" group="sum">
        <fact column="ur_hist_mat_ostatok_gp_otv" />
        <fact column="ur_isp_other_paid_gp" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_ogr" group="sum">
        <fact column="ur_hist_mat_ostatok_ogr" />
        <fact column="ur_isp_other_paid_rvre" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_astrent" group="sum">
        <fact column="ur_hist_mat_ostatok_astrent" />
        <fact column="ur_isp_other_paid_astr" />
      </call>
      <call function="-nvl" as="ur_isp_other_ost_sud_izd" group="sum">
        <fact column="ur_hist_mat_ostatok_sud_izd" />
        <fact column="ur_isp_other_paid_sud_izd" />
      </call>
    </expression-package>
    <expression-package name="ur_dogplat" class="1" timestamp="09.03.2025 12:28:38" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_dogplat.xml">
      <call function="if" as="ur_dp_vist_or_priz" type="number" title="Сумма по юр. док." group="sum">
        <call function="is null">
          <column table="kod_hist_mat_dec" column="dat_post" />
        </call>
        <fact column="ur_dp_summa" />
        <fact column="ur_dp_sum_v" />
      </call>
      <call function="if" as="ur_dp_vist_or_priz_osn" type="number" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_dp_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_vist_or_priz_peni" type="number" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_dp_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_vist_or_priz_gp" type="number" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_dp_vist_or_priz" />
      </call>
      <call function="if" as="ur_dp_sum_osn" type="number" title="Выст. по юр. док. осн. реал." group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_dp_summa" />
      </call>
      <call function="if" as="ur_dp_sum_peni" type="number" title="Выст. по юр. док. пени" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_dp_summa" />
      </call>
      <call function="if" as="ur_dp_sum_shtr" type="number" title="Выст. по юр. док. штрафы" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_dp_summa" />
      </call>
      <call function="if" as="ur_dp_sum_all" type="number" title="Выст. по юр. док. всего" group="sum">
        <call function="!=">
          <column table="kod_dogplat" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_dp_summa" />
      </call>
      <call as="ur_dp_priz_all" type="number" title="Призн. по юр. док. всего" group="sum" function="()">
        <fact column="ur_dp_sum_v" />
      </call>
      <call as="ur_dp_priz_all_ba" type="number" title="Призн. по юр. док. всего" function="+nvl" agg="sum">
        <fact column="ur_dp_sum_v" />
        <fact column="ur_hist_mat_ba_ogr_ba" />
      </call>
      <call function="if" as="ur_dp_priz_osn" type="number" title="Призн. по юр. док. осн. реал." group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>2</const>
        </call>
        <fact column="ur_dp_sum_v" />
      </call>
      <call function="if" as="ur_dp_priz_shtr" type="number" title="Призн. по юр. док. штрафы" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>4</const>
        </call>
        <fact column="ur_dp_sum_v" />
      </call>
      <call function="if" as="ur_dp_priz_peni" type="number" title="Призн. по юр. док. пени" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>7</const>
        </call>
        <fact column="ur_dp_sum_v" />
      </call>
      <call function="if" as="ur_dp_priz_gp" type="number" title="Призн. по юр. док. гп" group="sum">
        <call function="=">
          <column table="kod_dogplat" column="vid_real" />
          <const>9</const>
        </call>
        <fact column="ur_dp_sum_v" />
      </call>
      <call function="if" as="ur_dp_for_doc_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod" />
          <param name="kod_sdp" />
        </params>
        <call function="and">
          <call function="=">
            <column table="kod_dogplat" column="kod" />
            <useparam name="kod" />
          </call>
          <call function="=">
            <column table="kod_dogplat" column="kod_sdp" />
            <useparam name="kod_sdp" />
          </call>
        </call>
        <fact column="ur_dogplat_count" />
      </call>
      <call function="if" as="ur_dp_isp_for_ur_dp_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_mat_isp" />
        </params>
        <call function="=">
          <column table="kod_dp_isp" column="kod_mat" />
          <useparam name="kod_mat_isp" />
        </call>
        <fact column="ur_dp_isp_count" />
      </call>
      <call function="if" as="ur_dp_inkasso_for_ur_dp_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_inkasso" />
        </params>
        <call function="=">
          <column table="kod_dp_inkasso" column="kod_inkasso" />
          <useparam name="kod_inkasso" />
        </call>
        <fact column="ur_dp_inkasso_count" />
      </call>
      <call function="if" as="ur_dp_graf_for_ur_dp_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_graf" />
        </params>
        <call function="=">
          <column table="kod_dp_graf" column="kod_graf" />
          <useparam name="kod_graf" />
        </call>
        <fact column="ur_dp_graf_count" />
      </call>
      <call function="if" as="ur_dp_kazn_for_ur_dp_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_kazn" />
        </params>
        <call function="=">
          <column table="kod_dp_kazn" column="kod_kazn" />
          <useparam name="kod_kazn" />
        </call>
        <fact column="ur_dp_kazn_count" />
      </call>
      <call function="if" as="ur_dp_isp_other_for_ur_dp_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_isp_other" />
        </params>
        <call function="=">
          <column table="kod_dp_isp_other" column="kod_isp_other" />
          <useparam name="kod_isp_other" />
        </call>
        <fact column="ur_dp_isp_other_count" />
      </call>
      <call function="if" as="ur_dp_priz_vld" type="string" group="max" title="Валидация (наличие признанных сумм по решению)">
        <call function="and">
          <call function="gt">
            <fact column="ur_dp_has_no_priz" />
            <const>0</const>
          </call>
        </call>
        <const>'Должны быть заполнены суммы по решению суда'</const>
      </call>
      <call function="if" as="ur_dp_exists_vld" type="string" group="max" title="Валидация (наличие привязанных документов)">
        <call function="!=0">
          <fact column="ur_dogplat_count" />
        </call>
        <const>'Есть суммы по документу'</const>
      </call>
    </expression-package>
    <expression-package name="ur_folders" class="1" timestamp="05.10.2018 20:16:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_folders.xml">
      <call function="case" as="ur_folders_del_vld" group="max" title="Валидация удаления папки" type="string">
        <call function="when">
          <call function="!=0">
            <fact column="ur_pretenz_count" />
          </call>
          <const>'Есть претензии'</const>
        </call>
        <call function="when">
          <call function="!=0">
            <fact column="ur_mat_count" />
          </call>
          <const>'Есть материалы переданные в суд'</const>
        </call>
      </call>
      <call function="decode" as="ur_dogplat_no" group="min" type="number">
        <fact column="ur_dogplat_count" />
        <const>null</const>
        <const>1</const>
        <const>0</const>
        <const>1</const>
        <const>0</const>
      </call>
      <call function="if" as="ur_pretenz_for_pret_cnt" type="number" title="Наличие привязки по указанному документу" group="sum">
        <params>
          <param name="kod_folders" />
        </params>
        <call function="and">
          <call function="=">
            <column table="kod_pretenz" column="kod_folders" />
            <useparam name="kod_folders" />
          </call>
        </call>
        <fact column="ur_pretenz_count_old" />
      </call>
    </expression-package>
    <expression-package name="ur_hist_mat" class="1" timestamp="08.06.2018 03:11:16" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <call function="case" as="kod_result_vld" type="string" group="max">
        <call function="when">
          <call function="!=">
            <column table="kod_hist_mat" column="result_kod_post" />
            <column table="kod_hist_mat" column="result_kod_post_read" />
          </call>
          <const>'Укажите результат рассмотрения соответствующий судебному акту'</const>
        </call>
        <call function="when">
          <call function="gt">
            <fact column="ur_hist_mat_dec_othr_cnt" />
            <const>1</const>
          </call>
          <const>'Уже есть другое окончательное решение по делу'</const>
        </call>
      </call>
      <call function="if" as="ur_hist_mat_gp_vld" group="max" type="string">
        <call function="!=nvl">
          <fact column="ur_hist_mat_gp_all" />
          <fact column="ur_mat_sum_gp" />
        </call>
        <const>'Сумма гос. пошлины по решению суда не соответствует сумме гос. пошлины оплаченной при подаче'</const>
      </call>
    </expression-package>
    <expression-package name="ur_isp" class="1" timestamp="04.05.2017 19:01:56" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_hist_mat.xml">
      <call function="if" as="isp_kod_hist_mat_vld" type="string" group="max">
        <call function="gt">
          <fact column="ur_isp_for_mat_count" />
          <const>1</const>
        </call>
        <const>'Уже есть исполнительный лист по выбранному делу'</const>
      </call>
      <call function="if" as="isp_list_exists" type="number" group="max">
        <call function="gt">
          <fact column="ur_isp_for_mat_count" />
          <const>1</const>
        </call>
        <const>1</const>
        <const>0</const>
      </call>
    </expression-package>
    <expression-package name="ur_mat" class="1" timestamp="22.02.2025 14:39:11" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <call function="+nvl" as="ur_mat_ba_sum_vist_reestr" title="Задолженность по заявл." agg="sum">
        <fact column="ur_mat_ba_ogr_ba" />
        <fact column="ur_dp_sum_osn" />
        <fact column="ur_dp_sum_peni" />
        <fact column="ur_dp_vist_or_priz_gp" />
      </call>
      <call function="if" as="ur_mat_pr_sch_peni_vld" group="max" type="string">
        <call function="and">
          <call function="le">
            <call function="over">
              <call function="max">
                <fact column="ur_hist_mat_dec_dat_entry" />
              </call>
              <call function="partition by">
                <column table="kod_mat" column="kod_mat" />
              </call>
            </call>
            <call function="sysdate" />
          </call>
          <call function="is null">
            <call function="over">
              <call function="max">
                <fact column="ur_dp_pr_sch_peni" />
              </call>
              <call function="partition by">
                <column table="kod_mat" column="kod_mat" />
              </call>
            </call>
          </call>
          <call function="gt" comment="44292">
            <call function="nvl0">
              <call function="over">
                <call function="sum">
                  <fact column="ur_hist_mat_dec_peni" />
                </call>
                <call function="partition by">
                  <column table="kod_mat" column="kod_mat" />
                </call>
              </call>
            </call>
            <const>0</const>
          </call>
        </call>
        <const>'[inf]Реш. вступило в зак. силу, необходимо сформировать счет на проценты(пени)'</const>
      </call>
      <call function="if" as="ur_mat_pr_sch_gp_vld" group="max" type="string">
        <call function="and">
          <call function="le">
            <call function="over">
              <call function="max">
                <fact column="ur_hist_mat_dec_dat_entry" />
              </call>
              <call function="partition by">
                <column table="kod_mat" column="kod_mat" />
              </call>
            </call>
            <call function="sysdate" />
          </call>
          <call function="is null">
            <call function="over">
              <call function="max">
                <fact column="ur_dp_pr_sch_gp" />
              </call>
              <call function="partition by">
                <column table="kod_mat" column="kod_mat" />
              </call>
            </call>
          </call>
          <call function="gt" comment="44292">
            <call function="nvl0">
              <call function="over">
                <call function="sum">
                  <fact column="ur_hist_mat_dec_gp_otv" />
                </call>
                <call function="partition by">
                  <column table="kod_mat" column="kod_mat" />
                </call>
              </call>
            </call>
            <const>0</const>
          </call>
        </call>
        <const>'[inf]Реш. вступило в зак. силу, необходимо сформировать счет на ГП'</const>
      </call>
    </expression-package>
  </expression-packages>
  <dimension-packages child-name="dimension-package" key-name="name">
    <dimension-package name="teplo" timestamp="27.03.2018 15:28:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.teplo.xml">
      <dimension class-type="dr_dogval_limit_tree" name="kod_dogval_limit" />
      <dimension class-type="sr_avans_otch" name="sr_avans_otch" />
      <dimension time-type="number" name="pr_spis_tt" />
      <dimension class-type="dr_point_rasx" name="dr_point_rasx" />
      <dimension class-type="dr_ddatval" name="dr_ddatval" />
    </dimension-package>
    <dimension-package name="asuse" timestamp="07.09.2023 20:30:39" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="ur_mat_peni_period" class-type="ur_mat_peni_period" />
      <dimension name="ur_pretenz_peni_period" class-type="ur_pretenz_peni_period" />
      <dimension name="vr_peni_period" class-type="vr_peni_period" />
      <dimension name="ks_ministry" class-type="ks_ministry" />
      <dimension name="sk_edizm" class-type="sk_edizm" />
      <dimension name="sk_vid_sf" class-type="sk_vid_sf" />
      <dimension name="ks_fs" class-type="ks_fs" />
      <dimension name="kr_podr" class-type="kr_podr" />
      <dimension name="kk_cls" class-type="kk_cls" />
      <dimension name="ks_otrasl_root" class-type="ks_otrasl_root" />
      <dimension name="ks_okved" class-type="ks_okved" />
      <dimension name="ks_istfin" class-type="ks_istfin" />
      <dimension name="ks_vdog" class-type="ks_vdog" />
      <dimension name="kr_pret" class-type="kr_pret" />
      <dimension name="kk_active" class-type="kk_active" />
      <dimension name="vr_pret_dolg_sf" class-type="vr_pret_dolg_sf" />
      <dimension name="vr_pret_dolg_dog" class-type="vr_pret_dolg_dog" />
      <dimension name="asuse_num" time-type="string" />
      <dimension name="sr_recalc_sf" class-type="sr_recalc_sf" />
      <dimension name="sr_recalc" class-type="sr_recalc" />
      <dimension name="vid_recalc" class-type="ss_vid_recalc" />
      <dimension name="kod_sf_norm_av_av" class-type="sr_facvip_norm_av_av" />
      <dimension name="kod_sf_norm_av_av_rm" class-type="sr_facvip_norm_av_av_rm" />
      <dimension name="kod_sf_norm_av_osn" class-type="sr_facvip_norm_av_osn" />
      <dimension name="kod_sf_norm_av_osn_rm" class-type="sr_facvip_norm_av_osn_rm" />
      <dimension name="kod_opl_norm_av_av" class-type="sr_opl_norm_av_av" />
      <dimension name="kod_opl_norm_av_av_rm" class-type="sr_opl_norm_av_av_rm" />
      <dimension name="kod_opl_norm_av_osn" class-type="sr_opl_norm_av_osn" />
      <dimension name="kod_opl_norm_av_osn_rm" class-type="sr_opl_norm_av_osn_rm" />
      <dimension name="qube_sf_graf" class-type="qube_sf_graf" />
      <dimension name="kod_group_cust" class-type="ks_group_cust" />
      <dimension name="kod_group_cust_parent" class-type="ks_group_cust_parent_list" />
      <dimension name="dat_s" time-type="day" />
      <dimension name="dat_po" time-type="day" />
      <dimension name="point_dat_s" time-type="day" comment="период существования данных связанных с ТУ с учетом периода существования различных связанных сущьностей" />
      <dimension name="point_dat_po" time-type="day" />
      <dimension name="kod_bal_point_har_all" class-type="hr_bal_point_har_all" />
      <dimension name="kod_bal_point_pu_all" class-type="hr_bal_point_pu_all" />
      <dimension name="eobj_id" class-type="hr_eobject" />
      <dimension name="kod_bal_point_har" class-type="hr_bal_point_har" />
      <dimension name="kod_tippu" class-type="hs_tippu" />
      <dimension name="kod_pktippu" class-type="hs_pktippu" />
      <dimension name="kod_state_lst" class-type="ss_state_lst" />
      <dimension name="kod_esys" class-type="rs_esys" />
      <dimension name="kod_debet_state" class-type="sr_debet_state" />
      <dimension name="kod_pred" class-type="kr_predabon" />
      <dimension name="kod_w" class-type="hr_hisworks" />
      <dimension name="kod_pu_u" class-type="hr_pu_u" />
      <dimension name="kod_point_pu" class-type="hr_point_pu" />
      <dimension name="kod_point_pu_all" class-type="hr_point_pu_all" />
      <dimension name="kod_point_rasx" class-type="hr_point_rasx" />
      <dimension name="kod_point_rasx2" class-type="dr_point_rasx" />
      <dimension name="kod_point_ini" class-type="hr_point_ini" />
      <dimension name="kod_point_tar" class-type="hr_point_tar" />
      <dimension name="kod_dogpodr" class-type="kr_dogpodr" />
      <dimension name="kod_dogobj_emp" class-type="kr_dogobj_emp" />
      <dimension name="kod_dopdoc" class-type="kr_dopdoc" />
      <dimension name="kod_izv_dolg" class-type="tr_izv_dolg" />
      <dimension name="kod_dog" class-type="kr_dogovor" />
      <dimension name="kod_dog_fin" class-type="kr_dogovor_fin" />
      <dimension name="kod_pen" class-type="sr_penni" />
      <dimension name="kod_numobj" class-type="kr_numobj" />
      <dimension name="kod_numobj_mn" class-type="kr_numobj_mn" />
      <dimension name="kod_sf" class-type="sr_facvip" />
      <dimension name="kod_sf_main" class-type="sr_facvip_main" />
      <dimension name="kod_deb" class-type="sr_debet" />
      <dimension name="kod_ras" class-type="sr_facras" />
      <dimension name="kod_ras_undo_av" class-type="sr_facras_undo_av" />
      <dimension name="kod_opl" class-type="sr_opl" />
      <dimension name="kod_link" class-type="sr_opl_bank" />
      <dimension name="kod_inkasso_fin" class-type="sr_inkasso" />
      <dimension name="kod_link_main" class-type="sr_opl_bank_main" />
      <dimension name="kod_link_child" class-type="sr_opl_bank_child" />
      <dimension name="kod_link_bro" class-type="sr_opl_bank_bro" />
      <dimension name="kod_opl_sf" class-type="sr_opl_sf" />
      <dimension name="kod_opl_sf_nal" class-type="sr_opl_sf_nal" />
      <dimension name="kod_opl_kred" class-type="sr_opl_kred" />
      <dimension name="kod_opl_stor" class-type="sr_opl_stor" />
      <dimension name="kod_opl_kassa" class-type="sr_opl_kassa" />
      <dimension name="kodbpol" class-type="ks_bankpol" />
      <dimension name="kodb" class-type="ks_bank" />
      <dimension name="kod_fopl" class-type="sr_facopl" />
      <dimension name="vid_t" class-type="sk_nachisl" />
      <dimension name="vid_real" class-type="sk_vid_real" />
      <dimension name="vid_real_no_av" class-type="sk_vid_real_list_no_avans" />
      <dimension name="kodp" class-type="kr_payer" />
      <dimension name="kod_type_opl" class-type="sk_type_opl" />
      <dimension name="kod_account" class-type="nr_account" />
      <dimension name="voltage" class-type="hk_voltage" />
      <dimension name="kod_v" class-type="hk_v" />
      <dimension name="voltage_fact" class-type="hk_voltage_fact" />
      <dimension name="kod_point_tree" class-type="hr_point_tree" parent-field-name="kod_pointmain" />
      <dimension name="kod_bal_point" class-type="hr_bal_point" />
      <dimension name="kod_bal_point_pu" class-type="hr_bal_point_pu" />
      <dimension name="kod_point" class-type="hr_point" />
      <dimension name="kod_point2" class-type="dr_point" />
      <dimension name="kod_ar_point" class-type="ar_point" />
      <dimension name="kod_point_har" class-type="hr_point_har" />
      <dimension name="kod_point_har2" class-type="dr_point_har" />
      <dimension name="kod_priem" class-type="nr_priem" />
      <dimension name="tarif" class-type="ks_tarif" parent-field-name="tarif_parent" />
      <dimension name="vid_t_teplo" class-type="sk_nachisl_teplo" />
      <dimension name="kodcalc" class-type="nr_calc" />
      <dimension name="kod_emp" class-type="kr_employee" />
      <dimension name="kod_emp_ruk" class-type="kr_employee_ruk" />
      <dimension name="kod_emp_buh" class-type="kr_employee_buh" />
      <dimension name="kodp_org" class-type="kr_org" />
      <dimension name="kod_dep" class-type="kr_dep" />
      <dimension name="kod_his_upr" class-type="tr_his_upr" />
      <dimension name="kod_obj_vdr" class-type="kr_object_vdr" />
      <dimension name="kod_otrasl" class-type="ks_otrasl" parent-field-name="parent" />
      <dimension name="kod_f46" class-type="ks_46" />
      <dimension name="kod_avans_uved" class-type="sr_avans_uved" />
      <dimension name="kod_akt_sver" class-type="sr_akt" />
      <dimension name="kod_org_edo" class-type="kr_org_edo" />
      <dimension name="kod_akt_sver_row" class-type="sr_akt_number" />
      <dimension name="kod_vist_day" class-type="kr_vist_day" />
      <dimension name="kod_vidopl" class-type="ss_vidopl" />
      <dimension name="kod_fopl_nal" class-type="sr_facopl_nal" />
      <dimension name="kodd" class-type="k_house" />
      <dimension name="day_pokaz" class-type="kk_day_pokaz" />
      <dimension name="kod_namepkpu" class-type="hs_namepkpu" />
      <dimension name="tpoint" class-type="hk_tpoint" />
      <dimension name="kod_seti" class-type="hv_seti" />
      <dimension name="kod_elter" class-type="hv_elter_org" />
      <dimension name="day_s_pu" time-type="day" />
      <dimension name="kod_parent_eo" class-type="hr_eosrc" />
      <dimension name="kod_srckind" class-type="hk_srckind" />
      <dimension name="kod_org_group" class-type="kr_org_group" />
      <dimension name="kod_src_eo" class-type="hr_bal_point_src" />
      <dimension name="kodp_elter" class-type="kr_org_elter" />
      <dimension name="kodp_bal" class-type="kr_org_bal" />
      <dimension name="kod_eobj_src" class-type="hr_eobject_src" />
      <dimension name="kod_bal_point_en" class-type="hr_bal_point_en" comment="Виды энергии в тту" />
      <dimension name="kod_bal_point_ini" class-type="hr_bal_point_ini" comment="Виды энергии в тту" />
      <dimension name="kod_point_en" class-type="hr_point_en" />
      <dimension name="kod_elnet" class-type="hr_eosrc_elnet" />
      <dimension name="kod_eobject_senter_nut" class-type="hv_eobject_senter_nut" comment="Центр питания ЭО" />
      <dimension name="kod_object" class-type="kr_object" />
      <dimension name="kod_org_sbyt" class-type="kv_org_sbyt" />
      <dimension name="kod_f23" class-type="hs_23" />
      <dimension name="kod_prov" class-type="hv_point_prov" />
      <dimension name="kod_plombs" class-type="hv_point_plombs" />
      <dimension name="kod_plombs_all" class-type="hv_point_plombs_all" />
      <dimension name="kod_plombs_mv" class-type="mv_point_plombs" />
      <dimension name="sr_opl_text" class-type="sr_opl_text" />
    </dimension-package>
    <dimension-package name="byt" timestamp="19.06.2017 12:24:22" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="kod_prop" class-type="tr_prop" />
      <dimension name="kod_nv_priem" class-type="nv_priem" />
      <dimension name="kod_acc_byt" class-type="tnr_account" />
      <!--<dimension name="kod_acc_root" />-->
      <dimension name="kod_izv" class-type="tnr_izv" />
      <dimension name="kod_opl_byt" class-type="tsr_opl" />
      <dimension name="kod_opl_byt_izv" class-type="tsr_opl_izv" />
      <dimension name="kod_opl_byt_kr" class-type="tsr_opl_kred" />
      <dimension name="kod_opl_byt_stor" class-type="tsr_opl_stor" />
      <dimension name="kod_accopl" class-type="tnr_accopl" />
      <dimension name="kod_prop_f" class-type="tr_prop_f" />
      <dimension name="kod_prop_n" class-type="tr_prop_n" />
      <dimension name="kod_pen_byt" class-type="tsr_penni" />
      <dimension name="hv_mkd_address" class-type="hv_mkd_address" comment="Всякие атрибуты для kodd  (41125)" />
    </dimension-package>
    <dimension-package name="asuse_fin" timestamp="21.12.2022 21:03:08" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <!--<dimension name="year_dolg" time-type="year" timeline="time_dolg"/>
      <dimension name="ym_dolg"  time-type="month" timeline="time_dolg"/>-->
      <dimension name="dat_dolg" time-type="day" timeline="time_dolg" />
      <dimension name="dat_dolg_out" time-type="day" timeline="time_dolg_out" />
      <dimension name="dat_kred" time-type="day" timeline="time_kred" />
      <dimension name="dat_dolg_norm" time-type="day" timeline="time_dolg_norm" />
      <dimension name="dat_dolg_uved_kaz_el" time-type="day" timeline="time_dolg_norm" />
      <dimension name="ym_vozn" time-type="month" timeline="time_vozn" />
      <dimension name="ym_vozn2" time-type="month" timeline="time_vozn2" />
      <dimension name="ym_potr" time-type="month" timeline="time_potr" />
      <dimension name="ym_vist" time-type="month" timeline="time_vist" />
      <dimension name="dat_vozn_norm" time-type="day" timeline="time_vozn_norm" />
      <dimension name="pr_last_pdp" time-type="number" />
      <dimension name="dat_recalc" time-type="day" timeline="time_recalc" />
    </dimension-package>
    <dimension-package name="asuse_ur" timestamp="05.03.2023 15:23:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="kod_folders" class-type="ur_folders" />
      <dimension name="kod_folders_kodp" class-type="ur_folders_kodp" />
      <dimension name="kod_folders_isp" class-type="ur_folders_isp" />
      <dimension name="kod_folders_isp_othr" class-type="ur_folders_isp_othr" />
      <dimension name="kod_folders_ba" class-type="ur_folders_ba" />
      <dimension name="kod_dogplat" class-type="ur_dogplat" />
      <dimension name="kod_dogplat_bnk" class-type="ur_dogplat_bnk" />
      <dimension name="kod_dp_isp" class-type="ur_dp_isp" />
      <dimension name="kod_dp_inkasso" class-type="ur_dp_inkasso" />
      <dimension name="kod_dp_kazn" class-type="ur_dp_kazn" />
      <dimension name="kod_dp_isp_other" class-type="ur_dp_isp_other" />
      <dimension name="kod_dp_graf" class-type="ur_dp_graf" />
      <dimension name="kod_pretenz" class-type="ur_pretenz" />
      <dimension name="kod_ur_pret" class-type="ur_pret" />
      <dimension name="kod_sogl" class-type="ur_sogl" />
      <dimension name="kod_graf" class-type="ur_graf" />
      <dimension name="kod_graf_for_dog" class-type="ur_graf_for_dog" />
      <dimension name="kod_graf_opl" class-type="ur_graf_opl" />
      <dimension name="kod_mat" class-type="ur_mat" />
      <dimension name="kod_mat_isp" class-type="ur_mat_isp" />
      <dimension name="kod_mat_pp" class-type="ur_mat_pp" />
      <dimension name="kod_inkasso" class-type="ur_inkasso" />
      <dimension name="kod_kazn" class-type="ur_kazn" />
      <dimension name="kod_isp_other" class-type="ur_isp_other" />
      <dimension name="kod_mat_ba" class-type="ur_mat_ba" />
      <dimension name="kod_isp" class-type="ur_isp" />
      <dimension name="kod_isp_for_mat" class-type="ur_isp_for_mat" />
      <dimension name="kod_hist_mat" class-type="ur_hist_mat" />
      <dimension name="kod_hist_mat_dec" class-type="ur_hist_mat_dec" />
      <dimension name="kod_hist_mat_dec_othr" class-type="ur_hist_mat_dec_othr" />
      <dimension name="kod_hist_mat_ba" class-type="ur_hist_mat_ba" />
      <dimension name="kod_hist_mat_dec_ba" class-type="ur_hist_mat_dec_ba" />
      <dimension name="kod_hist_mat_isp" class-type="ur_hist_mat_isp" />
      <dimension name="kod_ur_state" class-type="ur_state" />
      <dimension name="kod_ur_state_dt" class-type="ur_state_dt" />
      <dimension name="kod_opl_kred_ur" class-type="sr_opl_kred_ur" />
      <dimension name="dat_ur" time-type="day" timeline="time_ur" />
      <dimension name="dat_ur_ent" time-type="day" timeline="time_ur_ent" />
      <dimension name="ym_graf" time-type="month" timeline="ur_graf" />
      <dimension name="dat_graf" time-type="day" timeline="ur_graf" />
      <dimension name="kod_stage_bk" class-type="ur_stage_bk" />
      <dimension name="kod_mor_in" class-type="mor_in" />
      <dimension name="kod_mor_out" class-type="mor_out" />
      <dimension name="kod_mor_opl" class-type="mor_opl" />
    </dimension-package>
    <dimension-package name="asuse_ur_fin_astr" timestamp="10.05.2016 14:50:44" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="kod_sf_astr" class-type="sr_facvip_astr" />
      <dimension name="kod_opl_astr" class-type="sr_opl_astr" />
      <dimension name="kod_ras_astr" class-type="sr_facras_astr" />
      <dimension name="kod_pen_astr" class-type="sr_penni_astr" />
    </dimension-package>
    <dimension-package name="asuse_seti" timestamp="10.05.2016 16:00:46" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="kod_rsk" class-type="hg_controlpoint_net_pl_getrsk" />
      <dimension name="kod_net" class-type="hg_controlpoint_net_pl_getorgs" />
      <dimension name="kod_pwrcompany" class-type="hg_controlpoint_net_pl_getorgs2" />
    </dimension-package>
    <dimension-package name="asuse_reserv" timestamp="22.12.2016 00:30:51" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <!--<dimension name="year_dolg" time-type="year" timeline="time_dolg"/>
      <dimension name="ym_dolg"  time-type="month" timeline="time_dolg"/>-->
    </dimension-package>
    <dimension-package name="edo" timestamp="05.10.2021 21:13:40" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\qube\qube.xml">
      <dimension name="kod_konvert_doc" class-type="ks_konvert_doc" />
      <dimension name="kod_konvert_pak" class-type="ks_konvert_pak" />
      <!--<dimension name="year_dolg" time-type="year" timeline="time_dolg"/>
      <dimension name="ym_dolg"  time-type="month" timeline="time_dolg"/>-->
    </dimension-package>
  </dimension-packages>
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id" />
  <actions child-name="action" key-name="name">
    <action name="create_rep" action-type="call-client-method" class="1" assembly="sql.builder" type-name="sql.builder.Special.Report.VerticalRep" function="CreateReport" timestamp="10.09.2024 16:45:50" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rep_action.xml">
      <params>
        <param name="p_ym_beg" type="number" />
        <param name="p_ym_end" type="number" />
      </params>
    </action>
    <action name="batch_unload_rep" action-type="call-client-method" class="1" assembly="sql.builder" type-name="sql.builder.Special.Report.BatchUnloadRep" function="FormationReport" title="Пакетная выгрузка" timestamp="09.12.2024 12:36:04" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\rep_action.xml">
      <params>
        <param name="p_dep" type="array" />
        <param name="p_ym_beg" type="number" />
        <param name="p_ym_end" type="number" />
        <param name="p_kod_adr_m" type="array" />
        <param name="p_flag_sum" type="number" />
      </params>
    </action>
    <action name="ur_isp_other_prim_delete" action-type="call-plsql" timestamp="15.08.2024 14:50:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp_other_prim_calc.xml">
      <params>
        <param name="p_kod_isp_other_prim" type="number" />
      </params>
      <text><![CDATA[BEGIN DELETE FROM ur_isp_other_prim WHERE kod_isp_other_prim = :p_kod_isp_other_prim; END;]]></text>
    </action>
    <action name="ur_isp_other_prim_save" action-type="call-plsql" timestamp="15.08.2024 14:50:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_isp_other_prim_calc.xml">
      <params>
        <param name="p_kod_isp_other_prim" type="number" is-ret="1" />
        <param name="p_kod_isp_other" type="number" />
        <param name="p_prim" type="string" />
        <param name="p_date" type="date" />
        <param name="p_amount" type="number" />
        <param name="p_reason" type="number" />
        <param name="p_prim2" type="string" />
      </params>
      <text><![CDATA[DECLARE
  n_kod_isp_other_prim  ur_isp_other_prim.kod_isp_other_prim%type;
  n_reason              ur_isp_other_prim.reason%type;
  n_kod_isp_other       ur_isp_other_prim.kod_isp_other%type;
  s_prim                ur_isp_other_prim.prim%type;
  d_date                ur_isp_other_prim.date_dept_reduction%type;
  n_amount              ur_isp_other_prim.amount%type;
  s_prim2               ur_isp_other_prim.prim2%type;
BEGIN
  n_kod_isp_other_prim     := :p_kod_isp_other_prim;
  n_reason                 := :p_reason;
  n_kod_isp_other          := :p_kod_isp_other;
  s_prim                   := :p_prim;
  d_date                   := :p_date;
  n_amount                 := :p_amount;
  s_prim2                  := :p_prim2;
  IF n_reason > 0 THEN
    IF n_kod_isp_other_prim IS NULL THEN
      INSERT INTO ur_isp_other_prim(kod_isp_other, prim, date_dept_reduction, reason, amount, prim2)
        VALUES (n_kod_isp_other, s_prim, d_date, n_reason, n_amount, s_prim2)
        RETURNING kod_isp_other_prim INTO n_kod_isp_other_prim;
    ELSE
      UPDATE ur_isp_other_prim
      SET    kod_isp_other        = n_kod_isp_other,
             prim                 = s_prim,
             date_dept_reduction  = d_date,
             reason               = n_reason,
             amount               = n_amount,
             prim2                = s_prim2
      WHERE  kod_isp_other_prim = n_kod_isp_other_prim;
    END IF;
    COMMIT;
    :p_kod_isp_other_prim := n_kod_isp_other_prim;
  END IF;
END;]]></text>
    </action>
    <action name="ur_mat_upd_pretenz" action-type="call-plsql" timestamp="14.08.2024 11:50:00" class="1" file="sql.builder.templates\sql.builder\projects\asuse2_scheme\scheme\extension\ur_mat.xml">
      <params>
        <param name="p_kod_mat" type="number" />
        <param name="p_kod_folders" type="number" />
      </params>
      <text><![CDATA[BEGIN
  UPDATE ur_pretenz
  SET    kod_mat = :p_kod_mat
  WHERE  kod_folders = :p_kod_folders AND kod_mat IS NULL;
END;]]></text>
    </action>
  </actions>
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>