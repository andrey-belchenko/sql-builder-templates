<?xml version="1.0" encoding="utf-8"?>
<root>
  <form name="ipt_summ_1c" timestamp="28.12.2023 14:42:41" title="ipt_summ_1c" with-behavior="0" file="sql.builder.templates\sql.builder\projects\ipr\forms\ipt_summ_1c.xml" elid="166" ord="166" leaf="0" lvl="2" pelid="">
    <grid show-toolbar="1" table="a" id="39388001">
      <columns id="34930704">
        <field table="a" name="kod_ipt_summ_1c" title="" controlType="UIText" edit-mask="N2" rows-limit="100" id="61607676" />
        <field table="a" name="requests" title="" controlType="UIText" rows-limit="100" id="4054477" />
        <field table="a" name="tit_num_new" title="" controlType="UIText" rows-limit="100" id="39852510" />
        <field table="a" name="kod_titul_ip" title="Титулы" controlType="UICombo" rows-limit="100" id="52897121" />
        <field table="a" name="name" title="Наименование" controlType="UIText" rows-limit="100" id="18410373" />
        <field table="a" name="kod_ispolnit" title="" controlType="UIText" edit-mask="N2" rows-limit="100" id="34377849" />
        <field table="a" name="kod_vid_zatrat" title="" controlType="UICombo" rows-limit="100" id="52109679" />
        <field table="a" name="summ" title="" controlType="UIText" edit-mask="N2" rows-limit="100" id="64046230" />
        <field table="a" name="pr" title="" controlType="UIText" edit-mask="N2" rows-limit="100" id="47311133" />
        <field table="a" name="kod_vid_zajavki" title="" controlType="UIText" edit-mask="N2" rows-limit="100" id="52033334" />
      </columns>
    </grid>
  </form>
  <dataset>
    <fields>
      <field type="string" name="is_form_valid" parname="is_form_valid" />
      <field type="string" name="is_form_valid_not" parname="is_form_valid_not" />
      <field type="string" name="a_has_changes" parname="a_has_changes" />
    </fields>
    <table name="a" auto-refresh="" async="" only-visible-refresh="" only-force-refresh="" ref-column="" multi-select-column="" multi-select-target="" update-target="ipt_summ_1c" key="kod_ipt_summ_1c" is-ms-upd="1" is-top="1">
      <select-text>
--
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.requests as requests, /*string*/
a.tit_num_new as tit_num_new, /*string*/
a.kod_titul_ip as kod_titul_ip, /*number*/
a.name as name, /*Наименование*//*string*/
a.kod_ispolnit as kod_ispolnit, /*number*/
a.kod_vid_zatrat as kod_vid_zatrat, /*number*/
a.summ as summ, /*number*/
a.pr as pr, /*number*/
a.kod_vid_zajavki as kod_vid_zajavki, /*number*/
kod_titul_ip_x_n.tit_num_new as kod_titul_ip_x_n, /*Титулы*//*string*/
kod_vid_zatrat_x_n.sp_col_name as kod_vid_zatrat_x_n, /*string*/
a.is_new as is_new, /*number*/
a.is_not_new as is_not_new/*number*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.requests as requests, /**//*string*/
a.tit_num_new as tit_num_new, /**//*string*/
kod_titul_ip.kod_titul_ip as kod_titul_ip, /*number*/
a.name as name, /*Наименование*//*string*/
a.kod_ispolnit as kod_ispolnit, /*number*/
a.kod_vid_zatrat as kod_vid_zatrat, /*number*/
a.summ as summ, /**//*number*/
a.pr as pr, /**//*number*/
a.kod_vid_zajavki as kod_vid_zajavki, /*number*/
0 as is_new, /*number*/
1 as is_not_new/*number*/

from ipt_summ_1c
a
--\ipt_summ_1c
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip on a.tit_num_new = kod_titul_ip.tit_num_new--\ipr_titul_ip
)
a
--\ipt_summ_1c
left outer join
(
--ips_vid_zatrat
select a.kodzatrat as kodzatrat, /**//*number*//*key*/
(a.abbr || ' ' || a.name)  || ' ' || (a.name || ' ' || a.abbr)  as sp_col_name/**//*string*/

from ips_vid_zatrat
a
--\ips_vid_zatrat
)
kod_vid_zatrat_x_n on a.kod_vid_zatrat = kod_vid_zatrat_x_n.kodzatrat--\ips_vid_zatrat
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip_x_n on a.tit_num_new = kod_titul_ip_x_n.tit_num_new--\ipr_titul_ip
--\
</select-text>
      <columns>
        <column name="kod_ipt_summ_1c" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="kod_ipt_summ_1c" temp-col-name="n1" />
        <column name="requests" table="a" type="string" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="requests" temp-col-name="s1" />
        <column name="tit_num_new" table="a" type="string" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="tit_num_new" temp-col-name="s2">
          <dep-refresh-cmd>
            <root table="a">
              <params>
                <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                <param name="form_id" type="number" column="" />
              </params>
              <select>
                <params>
                  <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                  <param name="form_id" type="number" column="" />
                </params>
                <query>
--
select a.kod_titul_ip as kod_titul_ip, /*number*/
kod_titul_ip_x_n.tit_num_new as kod_titul_ip_x_n, /*Титулы*//*string*/
a.kod_ipt_summ_1c as kod_ipt_summ_1c/*number*//*key*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.tit_num_new as tit_num_new, /**//*string*/
kod_titul_ip.kod_titul_ip as kod_titul_ip/*number*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip on a.tit_num_new = kod_titul_ip.tit_num_new--\ipr_titul_ip
)
a
--\ipt_summ_1c
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip_x_n on a.tit_num_new = kod_titul_ip_x_n.tit_num_new--\ipr_titul_ip
--\
</query>
              </select>
              <procedure>
                <params />
              </procedure>
            </root>
          </dep-refresh-cmd>
          <dependants>
            <dependant name="kod_titul_ip" table="a" />
            <dependant name="kod_titul_ip_x_n" table="a" />
          </dependants>
        </column>
        <column name="kod_titul_ip" table="a" type="number" title="Титулы" is-user-editable="1" is-refreshed="1">
          <sel-list-compiled>
            <root>
              <query class="1" timestamp="17.10.2017 18:10:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_titul_dop_contract.xml" elid="4039" ord="4039" leaf="0" lvl="2" pelid="" haskeys="1" name="a" as="a" noname="1" path="./a" used="1">
                <select>--a
select <column table="a" column="kod_titul_dc" as="kod_titul_dc" title="" key="1" used="1" type="string" into="s1">a.kod_titul_dc as kod_titul_dc, /**//*string*//*key*/
</column><column table="a" column="kod_titul_ip" as="kod_titul_ip" title="" key="0" used="1" type="number" sourcetable="./a/a" sourcecolumn="kod_titul_ip" into="n1">a.kod_titul_ip as kod_titul_ip, /**//*number*/
</column><column table="kod_titul_ip" column="tit_num_new" as="kod_titul_ip_x_n" title="" key="0" used="1" type="string" sourcetable="./a/kod_titul_ip" sourcecolumn="tit_num_new" into="s2">kod_titul_ip.tit_num_new as kod_titul_ip_x_n, /**//*string*/
</column><column table="a" column="kod_dop_contract" as="kod_dop_contract" title="" key="0" used="1" type="number" sourcetable="./a/a" sourcecolumn="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" into="n2">a.kod_dop_contract as kod_dop_contract, /**//*number*/
</column><column table="kod_dop_contract" column="num_req" as="kod_dop_contract_x_n" title="" key="0" used="1" type="string" sourcetable="./a/kod_dop_contract" sourcecolumn="num_req" into="s3">kod_dop_contract.num_req as kod_dop_contract_x_n/**//*string*/
</column></select>
                <from>
from <query name="ipr_titul_dop_contract" as="a" path="./a/a" haskeys="1" used="1">(
<select>--ipr_titul_dop_contract
select <call function="||-" key="1" as="kod_titul_dc" pth="" type="string" used="1"><column table="a" column="kod_titul_ip" type="number" qlikview="1">a.kod_titul_ip</column><text txtype="func"> || '-' || </text><column table="a" column="kod_dop_contract" type="number" qlikview="1">a.kod_dop_contract</column> as kod_titul_dc, /*string*//*key*/
</call><column table="a" column="kod_titul_ip" type="number" qlikview="1" as="kod_titul_ip" key="0" sourcetable="./a/a" sourcecolumn="kod_titul_ip" used="1">a.kod_titul_ip as kod_titul_ip, /*number*/
</column><column table="a" column="kod_dop_contract" type="number" qlikview="1" as="kod_dop_contract" reference="is_dop_contract" refcol="kod_dop_contract" key="0" sourcetable="./a/a" sourcecolumn="kod_dop_contract" used="1">a.kod_dop_contract as kod_dop_contract/*number*/
</column></select><from>
from <table name="ipr_titul_dop_contract" as="a" used="1">ipr_titul_dop_contract
a
--\ipr_titul_dop_contract
</table></from>)
a
--\ipr_titul_dop_contract
</query><query name="is_dop_contract" as="kod_dop_contract" join="left outer" path="./a/kod_dop_contract" haskeys="1" used="1">left outer join
(
<select>--is_dop_contract
select <column table="a" column="kod_dop_contract" type="number" key="1" column-mandatory="1" as="kod_dop_contract" sourcetable="./a/kod_dop_contract" sourcecolumn="kod_dop_contract" used="1">a.kod_dop_contract as kod_dop_contract, /*number*//*key*/
</column><column table="a" column="num_req" type="string" title="Номер заявки" comment="номер заявки (год+№)" data-size="50" as="num_req" key="0" sourcetable="./a/kod_dop_contract" sourcecolumn="num_req" used="1">a.num_req as num_req/*Номер заявки*//*string*/
</column></select><from>
from <table name="is_dop_contract" as="a" title="Абонентские договоры" used="1">is_dop_contract
a
--\is_dop_contract
</table></from><call function="=" type="bool">)
kod_dop_contract on <column table="a" column="kod_dop_contract">a.kod_dop_contract</column><text txtype="func"> = </text><column table="kod_dop_contract" column="kod_dop_contract">kod_dop_contract.kod_dop_contract</column></call>--\is_dop_contract
</query><query name="ipr_titul_ip" as="kod_titul_ip" join="left outer" path="./a/kod_titul_ip" haskeys="1" used="1">left outer join
(
<select>--ipr_titul_ip
select <column table="a" column="kod_titul_ip" type="number" as="kod_titul_ip" key="1" fixed="1" sourcetable="./a/kod_titul_ip" sourcecolumn="kod_titul_ip" used="1">a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
</column><column table="a" column="tit_num_new" type="string" title="Код титула" qlikview="1" description="Номер инвестпроекта" vid="1" list-sep="+" list-order="beg_year" dimension="d_46432_num_ip" is-final-dimension="1" as="tit_num_new" key="0" sourcetable="./a/kod_titul_ip" sourcecolumn="tit_num_new" used="1">a.tit_num_new as tit_num_new/*Код титула*//*string*/
</column></select><from>
from <table name="ipr_titul_ip" as="a" title="Титулы" used="1">ipr_titul_ip
a
--\ipr_titul_ip
</table></from><call function="=" type="bool">)
kod_titul_ip on <column table="a" column="kod_titul_ip">a.kod_titul_ip</column><text txtype="func"> = </text><column table="kod_titul_ip" column="kod_titul_ip">kod_titul_ip.kod_titul_ip</column></call>--\ipr_titul_ip
</query></from>
                <where>where
<call function="and" pth="" type="bool"><call function="le" pth="" type="bool">(<call function="rownum" pth="0" type="number"><text txtype="func"> rownum </text></call><text txtype="func"> &lt;= </text><const><text>:p_rows_limit </text></const>) </call><text txtype="func"> { </text><text txtype="func"> and </text><call function="in" pth="" optional="1" type="bool">(<column table="a" column="kod_titul_dc" as="kod_titul_dc" title="" key="1" thissrc="kod_titul_dc">a.kod_titul_dc</column><text txtype="func"> in </text><const><text>:pk_prm </text></const>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="kod_titul_dc" as="kod_titul_dc" title="" key="1" thissrc="kod_titul_dc">a.kod_titul_dc</column><text txtype="func"> ) like lower( </text><const><text>:kod_titul_dc_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="kod_titul_ip" as="kod_titul_ip" title="" thissrc="kod_titul_ip">a.kod_titul_ip</column><text txtype="func"> ) like lower( </text><const><text>:kod_titul_ip_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="kod_titul_ip" column="tit_num_new" as="kod_titul_ip_x_n" title="" thissrc="kod_titul_ip_x_n">kod_titul_ip.tit_num_new</column><text txtype="func"> ) like lower( </text><const><text>:kod_titul_ip_x_n_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="kod_dop_contract" as="kod_dop_contract" title="" thissrc="kod_dop_contract">a.kod_dop_contract</column><text txtype="func"> ) like lower( </text><const><text>:kod_dop_contract_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="kod_dop_contract" column="num_req" as="kod_dop_contract_x_n" title="" thissrc="kod_dop_contract_x_n">kod_dop_contract.num_req</column><text txtype="func"> ) like lower( </text><const><text>:kod_dop_contract_x_n_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text></call></where>--\a
</query>
            </root>
          </sel-list-compiled>
          <sel-list-report>
            <report name="a" class="1" timestamp="17.10.2017 18:10:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_titul_dop_contract.xml" elid="4039" ord="4039" leaf="0" lvl="2" pelid="" haskeys="1" as="a">
              <queries>
                <query class="1" timestamp="17.10.2017 18:10:42" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ipr_titul_dop_contract.xml" elid="4039" ord="4039" leaf="0" lvl="2" pelid="" haskeys="1" name="a" as="a">
                  <params>
                    <param name="pk_prm" type="array" />
                    <param name="kod_titul_dc_filter" type="string" />
                    <param name="kod_titul_ip_filter" type="string" />
                    <param name="kod_titul_ip_x_n_filter" type="string" />
                    <param name="kod_dop_contract_filter" type="string" />
                    <param name="kod_dop_contract_x_n_filter" type="string" />
                    <param name="p_rows_limit" type="number" />
                  </params>
                  <select>
                    <column table="a" column="kod_titul_dc" as="kod_titul_dc" title="" key="1" />
                    <column table="a" column="kod_titul_ip" as="kod_titul_ip" title="" />
                    <column table="kod_titul_ip" column="tit_num_new" as="kod_titul_ip_x_n" title="" />
                    <column table="a" column="kod_dop_contract" as="kod_dop_contract" title="" />
                    <column table="kod_dop_contract" column="num_req" as="kod_dop_contract_x_n" title="" />
                  </select>
                  <from>
                    <query name="ipr_titul_dop_contract" as="a">
                      <link name="kod_titul_ip" as="kod_titul_ip" table="ipr_titul_ip" child="ipr_titul_dop_contract" field="kod_titul_ip" parent="ipr_titul_ip" back="ipr_titul_dop_contract" title="Титулы" />
                      <link name="kod_dop_contract" as="kod_dop_contract" table="is_dop_contract" child="ipr_titul_dop_contract" field="kod_dop_contract" parent="is_dop_contract" back="ipr_titul_dop_contract" title="Абонентские договоры" />
                    </query>
                  </from>
                  <where>
                    <call function="and">
                      <call function="le">
                        <call function="rownum" />
                        <useparam name="p_rows_limit" />
                      </call>
                      <call function="in" optional="1">
                        <column table="this" column="kod_titul_dc" />
                        <useparam name="pk_prm" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kod_titul_dc" />
                        <useparam name="kod_titul_dc_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kod_titul_ip" />
                        <useparam name="kod_titul_ip_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kod_titul_ip_x_n" />
                        <useparam name="kod_titul_ip_x_n_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kod_dop_contract" />
                        <useparam name="kod_dop_contract_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kod_dop_contract_x_n" />
                        <useparam name="kod_dop_contract_x_n_filter" />
                      </call>
                    </call>
                  </where>
                  <withparams>
                    <useparam name="pk_prm" />
                    <useparam name="kod_titul_dc_filter" />
                    <useparam name="kod_titul_ip_filter" />
                    <useparam name="kod_titul_ip_x_n_filter" />
                    <useparam name="kod_dop_contract_filter" />
                    <useparam name="kod_dop_contract_x_n_filter" />
                    <useparam name="p_rows_limit" />
                  </withparams>
                </query>
              </queries>
              <params>
                <param name="pk_prm" type="array">
                  <const>:pk_prm </const>
                </param>
                <param name="kod_titul_dc_filter" type="string">
                  <const>:kod_titul_dc_filter </const>
                </param>
                <param name="kod_titul_ip_filter" type="string">
                  <const>:kod_titul_ip_filter </const>
                </param>
                <param name="kod_titul_ip_x_n_filter" type="string">
                  <const>:kod_titul_ip_x_n_filter </const>
                </param>
                <param name="kod_dop_contract_filter" type="string">
                  <const>:kod_dop_contract_filter </const>
                </param>
                <param name="kod_dop_contract_x_n_filter" type="string">
                  <const>:kod_dop_contract_x_n_filter </const>
                </param>
                <param name="p_rows_limit" type="number">
                  <const>:p_rows_limit </const>
                </param>
              </params>
            </report>
          </sel-list-report>
          <sel-list-pars>
            <params />
          </sel-list-pars>
          <value-refresh-cmd>
            <root>
              <params>
                <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                <param name="form_id" type="number" column="" />
              </params>
              <select>
                <params>
                  <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                  <param name="form_id" type="number" column="" />
                </params>
                <query>
--
select a.kod_titul_ip as kod_titul_ip, /*number*/
a.kod_ipt_summ_1c as kod_ipt_summ_1c/*number*//*key*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
kod_titul_ip.kod_titul_ip as kod_titul_ip/*number*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip on a.tit_num_new = kod_titul_ip.tit_num_new--\ipr_titul_ip
)
a
--\ipt_summ_1c
--\
</query>
              </select>
              <procedure>
                <params />
              </procedure>
            </root>
          </value-refresh-cmd>
        </column>
        <column name="name" table="a" type="string" title="Наименование" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="name" temp-col-name="s3" />
        <column name="kod_ispolnit" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="kod_ispolnit" temp-col-name="n2" />
        <column name="kod_vid_zatrat" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="kod_vid_zatrat" temp-col-name="n3">
          <sel-list-compiled>
            <root>
              <query class="1" timestamp="03.04.2018 19:42:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_zatrat.xml" elid="4074" ord="4074" leaf="0" lvl="2" pelid="" haskeys="1" name="a" as="a" noname="1" path="./a" used="1">
                <select>--a
select <column table="a" column="kodzatrat" as="kodzatrat" title="" key="1" used="1" type="number" sourcetable="./a/a" sourcecolumn="kodzatrat" into="n1">a.kodzatrat as kodzatrat, /**//*number*//*key*/
</column><column table="a" column="name" as="name" title="Вид затрат" key="0" used="1" type="string" sourcetable="./a/a" sourcecolumn="name" into="s1">a.name as name, /*Вид затрат*//*string*/
</column><column table="a" column="abbr" as="abbr" title="Вид затрат" key="0" used="1" type="string" sourcetable="./a/a" sourcecolumn="abbr" into="s2">a.abbr as abbr, /*Вид затрат*//*string*/
</column><column table="a" column="full_name" as="full_name" title="Вид затрат" key="0" used="1" type="string" into="s3">a.full_name as full_name, /*Вид затрат*//*string*/
</column><column table="a" column="full_name_tst" as="full_name_tst" title="Вид затрат" key="0" used="1" type="string" agg="1" into="s4">a.full_name_tst as full_name_tst/*Вид затрат*//*string*/
</column></select>
                <from>
from <query name="ips_vid_zatrat" as="a" path="./a/a" haskeys="1" used="1">(
<select>--ips_vid_zatrat
select <column table="a" column="kodzatrat" type="number" title="" as="kodzatrat" key="1" fixed="1" sourcetable="./a/a" sourcecolumn="kodzatrat" used="1">a.kodzatrat as kodzatrat, /**//*number*//*key*/
</column><column table="a" column="name" type="string" title="Вид затрат" as="name" key="0" sourcetable="./a/a" sourcecolumn="name" used="1">a.name as name, /*Вид затрат*//*string*/
</column><column table="a" column="abbr" type="string" title="Вид затрат" as="abbr" key="0" sourcetable="./a/a" sourcecolumn="abbr" used="1">a.abbr as abbr, /*Вид затрат*//*string*/
</column><call function="||" as="full_name" title="Вид затрат" key="0" pth="" type="string" used="1"><column table="a" column="abbr">a.abbr</column><text txtype="func"> || </text><const><text>' '</text></const><text txtype="func"> || </text><column table="a" column="name">a.name</column> as full_name, /*Вид затрат*//*string*/
</call><call function="||" as="full_name_tst" title="Вид затрат" agg="1" key="0" pth="" type="string" used="1"><column table="a" column="name">a.name</column><text txtype="func"> || </text><const><text>' '</text></const><text txtype="func"> || </text><column table="a" column="abbr">a.abbr</column> as full_name_tst/*Вид затрат*//*string*/
</call></select><from>
from <table name="ips_vid_zatrat" as="a" used="1">ips_vid_zatrat
a
--\ips_vid_zatrat
</table></from>)
a
--\ips_vid_zatrat
</query></from>
                <where>where
<call function="and" pth="" type="bool"><call function="le" pth="" type="bool">(<call function="rownum" pth="0" type="number"><text txtype="func"> rownum </text></call><text txtype="func"> &lt;= </text><const><text>:p_rows_limit </text></const>) </call><text txtype="func"> { </text><text txtype="func"> and </text><call function="in" pth="" optional="1" type="bool">(<column table="a" column="kodzatrat" as="kodzatrat" title="" key="1" thissrc="kodzatrat">a.kodzatrat</column><text txtype="func"> in </text><const><text>:pk_prm </text></const>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="kodzatrat" as="kodzatrat" title="" key="1" thissrc="kodzatrat">a.kodzatrat</column><text txtype="func"> ) like lower( </text><const><text>:kodzatrat_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="name" as="name" title="Вид затрат" thissrc="name">a.name</column><text txtype="func"> ) like lower( </text><const><text>:name_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="abbr" as="abbr" title="Вид затрат" thissrc="abbr">a.abbr</column><text txtype="func"> ) like lower( </text><const><text>:abbr_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="full_name" as="full_name" title="Вид затрат" thissrc="full_name">a.full_name</column><text txtype="func"> ) like lower( </text><const><text>:full_name_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text><text txtype="func"> { </text><text txtype="func"> and </text><call function="like" pth="" optional="1" type="bool">(<text txtype="func"> lower( </text><column table="a" column="full_name_tst" as="full_name_tst" title="Вид затрат" thissrc="full_name_tst">a.full_name_tst</column><text txtype="func"> ) like lower( </text><const><text>:full_name_tst_filter </text></const><text txtype="func"> ) </text>) </call><text txtype="func"> } </text></call></where>--\a
</query>
            </root>
          </sel-list-compiled>
          <sel-list-report>
            <report name="a" class="1" timestamp="03.04.2018 19:42:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_zatrat.xml" elid="4074" ord="4074" leaf="0" lvl="2" pelid="" haskeys="1" as="a">
              <queries>
                <query class="1" timestamp="03.04.2018 19:42:59" file="sql.builder.templates\sql.builder\projects\ipr_scheme\scheme\original\ips_vid_zatrat.xml" elid="4074" ord="4074" leaf="0" lvl="2" pelid="" haskeys="1" name="a" as="a">
                  <params>
                    <param name="pk_prm" type="array" />
                    <param name="kodzatrat_filter" type="string" />
                    <param name="name_filter" type="string" />
                    <param name="abbr_filter" type="string" />
                    <param name="full_name_filter" type="string" />
                    <param name="full_name_tst_filter" type="string" />
                    <param name="p_rows_limit" type="number" />
                  </params>
                  <select>
                    <column table="a" column="kodzatrat" as="kodzatrat" title="" key="1" />
                    <column table="a" column="name" as="name" title="Вид затрат" />
                    <column table="a" column="abbr" as="abbr" title="Вид затрат" />
                    <column table="a" column="full_name" as="full_name" title="Вид затрат" />
                    <column table="a" column="full_name_tst" as="full_name_tst" title="Вид затрат" />
                  </select>
                  <from>
                    <query name="ips_vid_zatrat" as="a" />
                  </from>
                  <where>
                    <call function="and">
                      <call function="le">
                        <call function="rownum" />
                        <useparam name="p_rows_limit" />
                      </call>
                      <call function="in" optional="1">
                        <column table="this" column="kodzatrat" />
                        <useparam name="pk_prm" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="kodzatrat" />
                        <useparam name="kodzatrat_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="name" />
                        <useparam name="name_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="abbr" />
                        <useparam name="abbr_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="full_name" />
                        <useparam name="full_name_filter" />
                      </call>
                      <call function="like" optional="1">
                        <column table="this" column="full_name_tst" />
                        <useparam name="full_name_tst_filter" />
                      </call>
                    </call>
                  </where>
                  <withparams>
                    <useparam name="pk_prm" />
                    <useparam name="kodzatrat_filter" />
                    <useparam name="name_filter" />
                    <useparam name="abbr_filter" />
                    <useparam name="full_name_filter" />
                    <useparam name="full_name_tst_filter" />
                    <useparam name="p_rows_limit" />
                  </withparams>
                </query>
              </queries>
              <params>
                <param name="pk_prm" type="array">
                  <const>:pk_prm </const>
                </param>
                <param name="kodzatrat_filter" type="string">
                  <const>:kodzatrat_filter </const>
                </param>
                <param name="name_filter" type="string">
                  <const>:name_filter </const>
                </param>
                <param name="abbr_filter" type="string">
                  <const>:abbr_filter </const>
                </param>
                <param name="full_name_filter" type="string">
                  <const>:full_name_filter </const>
                </param>
                <param name="full_name_tst_filter" type="string">
                  <const>:full_name_tst_filter </const>
                </param>
                <param name="p_rows_limit" type="number">
                  <const>:p_rows_limit </const>
                </param>
              </params>
            </report>
          </sel-list-report>
          <sel-list-pars>
            <params />
          </sel-list-pars>
          <dep-refresh-cmd>
            <root table="a">
              <params>
                <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                <param name="form_id" type="number" column="" />
              </params>
              <select>
                <params>
                  <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                  <param name="form_id" type="number" column="" />
                </params>
                <query>
--
select kod_vid_zatrat_x_n.sp_col_name as kod_vid_zatrat_x_n, /*string*/
a.kod_ipt_summ_1c as kod_ipt_summ_1c/*number*//*key*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.kod_vid_zatrat as kod_vid_zatrat/*number*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.kod_vid_zatrat as kod_vid_zatrat  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.n3 as kod_vid_zatrat  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.kod_vid_zatrat as kod_vid_zatrat  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.n3 as kod_vid_zatrat  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
)
a
--\ipt_summ_1c
left outer join
(
--ips_vid_zatrat
select a.kodzatrat as kodzatrat, /**//*number*//*key*/
(a.abbr || ' ' || a.name)  || ' ' || (a.name || ' ' || a.abbr)  as sp_col_name/**//*string*/

from ips_vid_zatrat
a
--\ips_vid_zatrat
)
kod_vid_zatrat_x_n on a.kod_vid_zatrat = kod_vid_zatrat_x_n.kodzatrat--\ips_vid_zatrat
--\
</query>
              </select>
              <procedure>
                <params />
              </procedure>
            </root>
          </dep-refresh-cmd>
          <dependants>
            <dependant name="kod_vid_zatrat_x_n" table="a" />
          </dependants>
        </column>
        <column name="summ" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="summ" temp-col-name="n4" />
        <column name="pr" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="pr" temp-col-name="n5" />
        <column name="kod_vid_zajavki" table="a" type="number" title="" is-user-editable="1" is-updateable="1" is-updateable-ext="1" update-target="kod_vid_zajavki" temp-col-name="n6" />
        <column name="kod_titul_ip_x_n" table="a.kod_titul_ip" type="string" title="Титулы" text-source-for="kod_titul_ip" is-refreshed="1">
          <value-refresh-cmd>
            <root>
              <params>
                <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                <param name="form_id" type="number" column="" />
              </params>
              <select>
                <params>
                  <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                  <param name="form_id" type="number" column="" />
                </params>
                <query>
--
select kod_titul_ip_x_n.tit_num_new as kod_titul_ip_x_n, /*Титулы*//*string*/
a.kod_ipt_summ_1c as kod_ipt_summ_1c/*number*//*key*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.tit_num_new as tit_num_new/**//*string*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.tit_num_new as tit_num_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s2 as tit_num_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
)
a
--\ipt_summ_1c
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip_x_n on a.tit_num_new = kod_titul_ip_x_n.tit_num_new--\ipr_titul_ip
--\
</query>
              </select>
              <procedure>
                <params />
              </procedure>
            </root>
          </value-refresh-cmd>
        </column>
        <column name="kod_vid_zatrat_x_n" table="a.kod_vid_zatrat" type="string" title="" text-source-for="kod_vid_zatrat" is-refreshed="1">
          <value-refresh-cmd>
            <root>
              <params>
                <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                <param name="form_id" type="number" column="" />
              </params>
              <select>
                <params>
                  <param name="kod_ipt_summ_1c_prm" type="number" column="" />
                  <param name="form_id" type="number" column="" />
                </params>
                <query>
--
select kod_vid_zatrat_x_n.sp_col_name as kod_vid_zatrat_x_n, /*string*/
a.kod_ipt_summ_1c as kod_ipt_summ_1c/*number*//*key*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.kod_vid_zatrat as kod_vid_zatrat/*number*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.kod_vid_zatrat as kod_vid_zatrat  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.n3 as kod_vid_zatrat  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.kod_vid_zatrat as kod_vid_zatrat  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.n3 as kod_vid_zatrat  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
)
a
--\ipt_summ_1c
left outer join
(
--ips_vid_zatrat
select a.kodzatrat as kodzatrat, /**//*number*//*key*/
(a.abbr || ' ' || a.name)  || ' ' || (a.name || ' ' || a.abbr)  as sp_col_name/**//*string*/

from ips_vid_zatrat
a
--\ips_vid_zatrat
)
kod_vid_zatrat_x_n on a.kod_vid_zatrat = kod_vid_zatrat_x_n.kodzatrat--\ips_vid_zatrat
--\
</query>
              </select>
              <procedure>
                <params />
              </procedure>
            </root>
          </value-refresh-cmd>
        </column>
        <column name="is_new" table="a" type="number" title="" is-user-editable="1" />
        <column name="is_not_new" table="a" type="number" title="" is-user-editable="1" />
      </columns>
      <insert-text>begin 
for r in  
 ( select  
:kod_ipt_summ_1c as kod_ipt_summ_1c 
,:requests as requests 
,:tit_num_new as tit_num_new 
,:name as name 
,:kod_ispolnit as kod_ispolnit 
,:kod_vid_zatrat as kod_vid_zatrat 
,:summ as summ 
,:pr as pr 
,:kod_vid_zajavki as kod_vid_zajavki 
 
from dual ) 
 
loop 
insert into ipt_summ_1c 
(kod_ipt_summ_1c 
,requests 
,tit_num_new 
,name 
,kod_ispolnit 
,kod_vid_zatrat 
,summ 
,pr 
,kod_vid_zajavki 
) 
 values  
(r.kod_ipt_summ_1c 
,r.requests 
,r.tit_num_new 
,r.name 
,r.kod_ispolnit 
,r.kod_vid_zatrat 
,r.summ 
,r.pr 
,r.kod_vid_zajavki 
) 
 returning  
kod_ipt_summ_1c into :kod_ipt_summ_1c; 
end loop; 
end; 
</insert-text>
      <delete-text>delete from ipt_summ_1c where kod_ipt_summ_1c=:kod_ipt_summ_1c</delete-text>
      <update-temp-text>begin 
delete from rr_temp 
where 
skod='a' 
and 
names=:form_id 
and 
f2=:kod_ipt_summ_1c; 
if :row_state_id=1  then 
for r in  
 ( select  
:kod_ipt_summ_1c as kod_ipt_summ_1c 
,:requests as requests 
,:tit_num_new as tit_num_new 
,:name as name 
,:kod_ispolnit as kod_ispolnit 
,:kod_vid_zatrat as kod_vid_zatrat 
,:summ as summ 
,:pr as pr 
,:kod_vid_zajavki as kod_vid_zajavki 
 
from dual ) 
 
loop 
insert into rr_temp 
(skod 
,names 
,f2 
,f3 
,n1 
,s1 
,s2 
,s3 
,n2 
,n3 
,n4 
,n5 
,n6 
) 
 values  
('a' 
,:form_id 
,:kod_ipt_summ_1c 
,:row_state_id 
,r.kod_ipt_summ_1c 
,r.requests 
,r.tit_num_new 
,r.name 
,r.kod_ispolnit 
,r.kod_vid_zatrat 
,r.summ 
,r.pr 
,r.kod_vid_zajavki 
); 
end loop; 
else 
for r in  
 ( select  
:kod_ipt_summ_1c as kod_ipt_summ_1c 
,:requests as requests 
,:tit_num_new as tit_num_new 
,:name as name 
,:kod_ispolnit as kod_ispolnit 
,:kod_vid_zatrat as kod_vid_zatrat 
,:summ as summ 
,:pr as pr 
,:kod_vid_zajavki as kod_vid_zajavki 
 
from ipt_summ_1c a  where kod_ipt_summ_1c=:kod_ipt_summ_1c) 
 
loop 
insert into rr_temp 
(skod 
,names 
,f2 
,f3 
,n1 
,s1 
,s2 
,s3 
,n2 
,n3 
,n4 
,n5 
,n6 
) 
 values  
('a' 
,:form_id 
,:kod_ipt_summ_1c 
,:row_state_id 
,r.kod_ipt_summ_1c 
,r.requests 
,r.tit_num_new 
,r.name 
,r.kod_ispolnit 
,r.kod_vid_zatrat 
,r.summ 
,r.pr 
,r.kod_vid_zajavki 
); 
end loop; 
end if; 
end; 
</update-temp-text>
      <clear-temp-text>delete from rr_temp where skod='a' and names=:form_id</clear-temp-text>
      <update-text>begin
update ipt_summ_1c set  
(kod_ipt_summ_1c 
,requests 
,tit_num_new 
,name 
,kod_ispolnit 
,kod_vid_zatrat 
,summ 
,pr 
,kod_vid_zajavki 
) 
= 
 ( select  
:kod_ipt_summ_1c as kod_ipt_summ_1c 
,:requests as requests 
,:tit_num_new as tit_num_new 
,:name as name 
,:kod_ispolnit as kod_ispolnit 
,:kod_vid_zatrat as kod_vid_zatrat 
,:summ as summ 
,:pr as pr 
,:kod_vid_zajavki as kod_vid_zajavki 
 
from dual ) 
 
where 
kod_ipt_summ_1c=:kod_ipt_summ_1c 
;
end;
</update-text>
      <scheme>
        <table name="ipt_summ_1c" as="a">
          <columns>
            <column name="kod_ipt_summ_1c" type="number" title="" />
            <column name="requests" type="string" title="" />
            <column name="tit_num_new" type="string" title="" />
            <column name="kod_titul_ip" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="name" type="string" title="Наименование" />
            <column name="kod_ispolnit" type="number" title="" />
            <column name="kod_vid_zatrat" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="summ" type="number" title="" />
            <column name="pr" type="number" title="" />
            <column name="kod_vid_zajavki" type="number" title="" />
            <column name="kod_titul_ip_x_n" type="string" title="Титулы" />
            <column name="kod_vid_zatrat_x_n" type="string" title="" />
            <column name="is_new" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="is_not_new" type="number" invisible-in-column-chooser="1" visible="0" />
          </columns>
          <viewcolumns>
            <column name="kod_ipt_summ_1c" type="number" title="" />
            <column name="requests" type="string" title="" />
            <column name="tit_num_new" type="string" title="" />
            <column name="kod_titul_ip_x_n" type="string" title="Титулы" />
            <column name="kod_titul_ip" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="name" type="string" title="Наименование" />
            <column name="kod_ispolnit" type="number" title="" />
            <column name="kod_vid_zatrat_x_n" type="string" title="" />
            <column name="kod_vid_zatrat" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="summ" type="number" title="" />
            <column name="pr" type="number" title="" />
            <column name="kod_vid_zajavki" type="number" title="" />
            <column name="is_new" type="number" invisible-in-column-chooser="1" visible="0" />
            <column name="is_not_new" type="number" invisible-in-column-chooser="1" visible="0" />
          </viewcolumns>
        </table>
      </scheme>
      <single-row-refresh-cmd>
        <root>
          <params>
            <param name="kod_ipt_summ_1c_prm" type="number" column="" />
            <param name="form_id" type="number" column="" />
          </params>
          <select>
            <params>
              <param name="kod_ipt_summ_1c_prm" type="number" column="" />
              <param name="form_id" type="number" column="" />
            </params>
            <query>
--
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.requests as requests, /*string*/
a.tit_num_new as tit_num_new, /*string*/
a.kod_titul_ip as kod_titul_ip, /*number*/
a.name as name, /*Наименование*//*string*/
a.kod_ispolnit as kod_ispolnit, /*number*/
a.kod_vid_zatrat as kod_vid_zatrat, /*number*/
a.summ as summ, /*number*/
a.pr as pr, /*number*/
a.kod_vid_zajavki as kod_vid_zajavki, /*number*/
kod_titul_ip_x_n.tit_num_new as kod_titul_ip_x_n, /*Титулы*//*string*/
kod_vid_zatrat_x_n.sp_col_name as kod_vid_zatrat_x_n, /*string*/
a.is_new as is_new, /*number*/
a.is_not_new as is_not_new/*number*/

from (
--ipt_summ_1c
select a.kod_ipt_summ_1c as kod_ipt_summ_1c, /*number*//*key*/
a.requests as requests, /**//*string*/
a.tit_num_new as tit_num_new, /**//*string*/
kod_titul_ip.kod_titul_ip as kod_titul_ip, /*number*/
a.name as name, /*Наименование*//*string*/
a.kod_ispolnit as kod_ispolnit, /*number*/
a.kod_vid_zatrat as kod_vid_zatrat, /*number*/
a.summ as summ, /**//*number*/
a.pr as pr, /**//*number*/
a.kod_vid_zajavki as kod_vid_zajavki, /*number*/
a.is_new as is_new, /*number*/
a.is_not_new as is_not_new/*number*/

from (select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.requests as requests,a.tit_num_new as tit_num_new,a.name as name,a.kod_ispolnit as kod_ispolnit,a.kod_vid_zatrat as kod_vid_zatrat,a.summ as summ,a.pr as pr,a.kod_vid_zajavki as kod_vid_zajavki,0 as is_new,1 as is_not_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s1 as requests,t.s2 as tit_num_new,t.s3 as name,t.n2 as kod_ispolnit,t.n3 as kod_vid_zatrat,t.n4 as summ,t.n5 as pr,t.n6 as kod_vid_zajavki,decode (f3,1,1,0) as is_new,decode (f3,1,0,1) as is_not_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
a
--\(select a.kod_ipt_summ_1c as kod_ipt_summ_1c,a.requests as requests,a.tit_num_new as tit_num_new,a.name as name,a.kod_ispolnit as kod_ispolnit,a.kod_vid_zatrat as kod_vid_zatrat,a.summ as summ,a.pr as pr,a.kod_vid_zajavki as kod_vid_zajavki,0 as is_new,1 as is_not_new  from ipt_summ_1c a where not exists (select * from rr_temp t where t.skod ='a' and t.names=:form_id  and a.kod_ipt_summ_1c=t.f2 ) and   a.kod_ipt_summ_1c in :kod_ipt_summ_1c_prm   union all  select t.n1 as kod_ipt_summ_1c,t.s1 as requests,t.s2 as tit_num_new,t.s3 as name,t.n2 as kod_ispolnit,t.n3 as kod_vid_zatrat,t.n4 as summ,t.n5 as pr,t.n6 as kod_vid_zajavki,decode (f3,1,1,0) as is_new,decode (f3,1,0,1) as is_not_new  from rr_temp t where t.skod ='a' and t.names=:form_id  and t.f3!=3  and t.f2 in :kod_ipt_summ_1c_prm )
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip on a.tit_num_new = kod_titul_ip.tit_num_new--\ipr_titul_ip
)
a
--\ipt_summ_1c
left outer join
(
--ips_vid_zatrat
select a.kodzatrat as kodzatrat, /**//*number*//*key*/
(a.abbr || ' ' || a.name)  || ' ' || (a.name || ' ' || a.abbr)  as sp_col_name/**//*string*/

from ips_vid_zatrat
a
--\ips_vid_zatrat
)
kod_vid_zatrat_x_n on a.kod_vid_zatrat = kod_vid_zatrat_x_n.kodzatrat--\ips_vid_zatrat
left outer join
(
--ipr_titul_ip
select a.kod_titul_ip as kod_titul_ip, /*number*//*key*/
a.tit_num_new as tit_num_new/*Код титула*//*string*/

from ipr_titul_ip
a
--\ipr_titul_ip
)
kod_titul_ip_x_n on a.tit_num_new = kod_titul_ip_x_n.tit_num_new--\ipr_titul_ip
--\
</query>
          </select>
          <procedure>
            <params />
          </procedure>
        </root>
      </single-row-refresh-cmd>
    </table>
  </dataset>
</root>