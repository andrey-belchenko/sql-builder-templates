<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-07-10T22:21:33.1186332+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="49249-q1" timestamp="17.03.2021 14:28:56" title="Условия поиска точек Приложение 15" is-report="1" visible="0" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params>
        <param title="Инф. система" timestamp="09.09.2018 00:54:11" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_outeris" />
        <param name="ym" controlType="UICombo" title="Расчётный период" timestamp="11.09.2017 00:29:33" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param title="Отделения (филиалы) ЭСК" controlType="UIList" timestamp="30.08.2017 15:04:18" file="sql.builder.templates\sql.builder\projects\asuse2\reports\point\fields.xml" name="kod_es" />
        <param title="Зона филиала СК" controlType="UIList" name-field-name="sname" timestamp="03.05.2017 16:13:21" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="fil_tu" editable="1" />
        <param timestamp="30.11.2017 10:50:48" title="Зона района ЭС" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="res_tu" />
        <param title="Тариф" controlType="UIList" timestamp="09.10.2018 16:25:38" parent-field-name="tarif_parent" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="tarif" />
        <param title="Уровень расчёта" controlType="UIList" timestamp="09.09.2018 14:51:21" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_calclev" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="pr_po" column-default="1" column-visible="1" editable="1" title="Входит в полезный отпуск" />
        <param title="Абонент" controlType="UIList" timestamp="24.10.2017 23:59:33" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kodp" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="ndog" title="№ договора" />
        <param name="kod_activ_dog" controlType="UIList" title="Статус договора" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param title="Договор" controlType="UIList" timestamp="24.10.2017 14:33:35" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_dog" />
        <param timestamp="25.10.2017 11:46:54" title="Объект" name-field-name="num_obj" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_numobj" />
        <param name="kod_vdog" controlType="UIList" title="Вид договора" timestamp="17.11.2016 15:59:52" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param name="tep_el" controlType="UIList" title="Вид услуг" timestamp="17.11.2016 15:59:52" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" visible="0" />
        <param title="Центр питания" controlType="UIList" timestamp="05.05.2017 13:45:31" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_eo" column-visible="1" editable="1" />
        <param title="Оборудование ЦП" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id" column-visible="1" editable="eobj_id_eo" clear-on-list-change="1" />
        <param title="Энергообъект" timestamp="25.10.2017 14:19:44" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" column-visible="1" editable="1" name="eobj_id_eo_tp" />
        <param title="Оборудование ЭО" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" clear-on-list-change="1" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Номер счётчика" name="serial_num" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Наименование точки" name="num_point" />
        <param title="Тип точки" controlType="UIList" timestamp="09.09.2018 15:16:45" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="tpoint" />
        <param title="Напряжение в точке" controlType="UIList" show-nulls="1" timestamp="29.03.2017 10:21:12" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="point_kv" />
        <param title="Вид энергии" controlType="UIList" timestamp="09.09.2018 15:47:05" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="energy" />
        <param controlType="UIList" timestamp="09.09.2018 15:52:23" title="Направление энергии" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="directen" />
        <param title="Форма 46" controlType="UIList" timestamp="09.09.2018 01:35:15" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_f46" />
        <param title="Вид начисления" controlType="UIList" timestamp="09.09.2018 01:41:26" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="vid_t" />
        <param title="Уровень напряжения" controlType="UIList" timestamp="09.09.2018 16:02:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="voltage" />
        <param timestamp="09.09.2018 15:35:00" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" title="Ценовая категория" name="price_category" />
        <param title="Вид энергии:ед.изм." timestamp="09.09.2018 21:36:26" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="unit" />
      </params>
      <customers>
        <customer id="102" />
      </customers>
      <content>
        <fieldgroup title="Основные">
          <usefield name="kod_outeris" title="Инф. система" type="number" field="asuse_kod_outeris" />
          <usefield title="Расчётный период" field="asuse_ym_othr" name="ym" type="number">
            <defaultquery>
              <query name="43375-ym-val" />
            </defaultquery>
          </usefield>
          <usefield name="kod_es" title="Отделения (филиалы) ЭСК" type="number" field="asuse_kod_org_sbyt" />
          <usefield title="Зона филиала СК" field="asuse_kod_seti" name="fil_tu" editable="1" />
          <usefield field="asuse_kod_elter_org_tu_prava" name="res_tu" title="Зона района ЭС" />
          <usefield field="asuse_tafil_el_active" name="tarif" title="Тариф" />
          <usefield type="number" field="asuse_kod_calclev" title="Уровень расчёта" name="kod_calclev" />
          <usefield field="cmn_list_yesno" name="pr_po" column-default="1" column-visible="1" editable="1" title="Входит в полезный отпуск">
            <defaultquery>
              <query name="yn_default" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Договор" expanded="0">
          <usefield name="kodp" field="asuse_kodp_kod_res" title="Абонент" />
          <usefield field="cmn_string" name="ndog" title="№ договора" />
          <usefield field="asuse_prizn_activ_dog" title="Статус договора" name="kod_activ_dog" />
          <usefield field="asuse_kod_dog_kodp_res" title="Договор" name="kod_dog" />
          <usefield title="Объект" field="asuse_kod_numobj_kod_res" name="kod_numobj" />
          <usefield type="number" name="kod_vdog" field="asuse_kod_vdog" title="Вид договора" />
          <usefield type="number" name="tep_el" field="asuse_tep_el" title="Вид услуг" visible="0">
            <defaultquery>
              <query name="kk_tep_el_act" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Схема сети" expanded="0">
          <usefield field="asuse_kod_eobject_src" name="eobj_id_eo" column-visible="1" title="Центр питания" editable="1" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id" column-visible="1" editable="eobj_id_eo" title="Оборудование ЦП" clear-on-list-change="1" />
          <usefield field="asuse_kod_eosrc_tp(kodp_res)" column-visible="1" editable="1" name="eobj_id_eo_tp" title="Энергообъект" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" title="Оборудование ЭО" clear-on-list-change="1">
            <listquery>
              <query name="hv_eobject_eq_tp" />
            </listquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Точка учёта" expanded="0">
          <usefield title="Номер счётчика" field="cmn_string" name="serial_num" />
          <usefield title="Наименование точки" field="cmn_string" name="num_point" />
          <usefield type="string" field="asuse_tpoint" title="Тип точки" name="tpoint" />
          <usefield type="number" field="asuse_kod_v" title="Напряжение в точке" name="point_kv" />
          <usefield type="string" field="asuse_energy" name="energy" title="Вид энергии" />
          <usefield type="string" field="asuse_abbr_directen" name="directen" title="Направление энергии" />
        </fieldgroup>
        <fieldgroup title="Дополнительные" expanded="0">
          <usefield type="number" field="asuse_kod_f46" title="Форма 46" name="kod_f46" />
          <usefield type="number" field="asuse_vid_t_2" title="Вид начисления" name="vid_t" />
          <usefield type="string" field="asuse_voltage_abbr" title="Уровень напряжения" name="voltage" />
          <usefield type="number" field="asuse_price_category" title="Ценовая категория" name="price_category" />
          <usefield type="string" field="asuse_edizm_point" title="Вид энергии:ед.изм." name="unit" />
        </fieldgroup>
      </content>
      <select>
        <column table="a" column="kod_point" key="1" as="kod_point" />
        <column table="a" column="name_fsk" as="name_fsk" />
        <column table="a" column="name_es" as="name_es" />
        <column table="a" column="kod_es" as="kod_es" />
        <column table="a" column="name_rsk" as="name_rsk" />
        <column table="a" column="kod_outeris" as="kod_outeris" />
        <column table="a" column="tpoint_abbr" as="tpoint_abbr" />
        <column table="a" column="r_pwrlev" as="r_pwrlev" />
        <column table="a" column="price_category" as="price_category" />
        <column table="a" column="kind_en" as="kind_en" />
        <column table="a" column="direct_en" as="direct_en" />
        <column table="a" column="unit" as="unit" />
      </select>
      <from>
        <query name="ar_point" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="ym" />
            <useparam name="ym" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_outeris" />
            <useparam name="kod_outeris" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_es" />
            <useparam name="kod_es" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_fsk" />
            <useparam name="fil_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_rsk" />
            <useparam name="res_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="tarif" />
            <useparam name="tarif" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_calclev" />
            <useparam name="kod_calclev" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_dog" />
            <useparam name="kod_dog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_numobj" />
            <useparam name="kod_numobj" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_vdog" />
            <useparam name="kod_vdog" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="dog_num" />
            <useparam name="ndog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodeo" />
            <useparam name="eobj_id_eo" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodfider" />
            <useparam name="eobj_id" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodeo" />
            <useparam name="eobj_id_eo_tp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodfider" />
            <useparam name="eobj_id_tp" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="cnt_num" />
            <useparam name="serial_num" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="pname" />
            <useparam name="num_point" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="tpoint_abbr" />
            <useparam name="tpoint" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kind_en" />
            <useparam name="energy" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="direct_en" />
            <useparam name="directen" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="point_kod_v" />
            <useparam name="point_kv" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_f46" />
            <useparam name="kod_f46" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="vid_t" />
            <useparam name="vid_t" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="r_pwrlev" />
            <useparam name="voltage" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="price_category" />
            <useparam name="price_category" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="unit" />
            <useparam name="unit" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="is_powersupply" />
            <useparam name="pr_po" />
          </call>
        </call>
      </where>
    </query>
    <query name="hv_calclev_q" timestamp="09.09.2018 14:48:44" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="kod" key="1" type="number" as="kod" />
        <column table="a" column="name" title="Наименование" type="string" as="name" />
      </select>
      <from>
        <table name="hv_calclev" as="a" view="1" />
      </from>
    </query>
    <query name="hv_price_category" title="Ценовые категории" timestamp="09.09.2018 15:31:57" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="kod" key="1" type="number" as="kod" />
        <column table="a" column="name" title="Наименование" type="string" as="name" />
      </select>
      <from>
        <table name="hv_price_category" as="a" view="1" title="Ценовые категории" />
      </from>
    </query>
    <query name="hk_voltage_abbr" title="Уровень напряжения по аббревиатуре" timestamp="28.09.2018 12:25:29" order="abbr" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <select>
        <column table="hk_voltage_fact" column="abbr" title="Аббревиатура" as="abbr" key="0" />
        <column table="hk_voltage_fact" column="name" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="hk_voltage_fact" as="hk_voltage_fact" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="hk_voltage_fact" column="pr_active" />
            <const>0</const>
          </call>
          <call function="gt">
            <column table="hk_voltage_fact" column="voltage" />
            <const>0</const>
          </call>
        </call>
      </where>
      <order>
        <column column="abbr" />
      </order>
    </query>
    <query name="sk_edizm_point" title="Список единиц измерения в точках хранилища" timestamp="09.09.2018 21:32:22" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <select>
        <column table="a" column="name" as="name" key="0" />
      </select>
      <from>
        <query name="sk_edizm_list" as="a" />
      </from>
      <where>
        <call function="or">
          <call table="a" column="edizm" function="=">
            <column table="a" column="edizm" />
            <const>4</const>
          </call>
          <call table="a" column="edizm" function="=">
            <column table="a" column="edizm" />
            <const>3</const>
          </call>
        </call>
      </where>
    </query>
    <query name="ks_tarif_el" title="Электрические активные тарифы" timestamp="12.09.2018 15:05:24" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="tarif" key="1" type="number" as="tarif" />
        <column table="a" column="npp" title="Код" as="npp" />
        <column table="a" column="sname" title="Наименование" as="sname" />
        <column table="a" column="name" title="Полное наименование" as="name" />
        <column table="a" column="tarif_parent" type="number" title="Старший тариф" as="tarif_parent" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="ks_tarif" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="tep_el" />
            <const>1</const>
          </call>
          <call function="in">
            <column table="a" column="pr_active" />
            <const>(0,2)</const>
          </call>
        </call>
      </where>
    </query>
    <query name="kk_tep_el_act" title="Услуги кроме &quot;услуги&quot; и &quot;потери&quot;" timestamp="08.10.2018 20:07:03" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="tep_el" type="number" key="1" as="tep_el" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="sname" type="string" title="Вид энергии" as="sname" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" as="abbr" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="kk_tep_el" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="!=">
            <column table="a" column="tep_el" />
            <const>7</const>
          </call>
          <call function="!=">
            <column table="a" column="tep_el" />
            <const>-7</const>
          </call>
        </call>
      </where>
    </query>
    <query name="kv_tarif_el" title="Электрические тарифы" timestamp="09.10.2018 16:30:07" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="tarif" key="1" type="number" as="tarif" />
        <column table="a" column="npp" type="number" title="Код тарифа" as="npp" />
        <column table="a" column="tarif_name" type="string" title="Наименование тарифа" as="tarif_name" />
        <column table="a" column="tarif_parent" type="number" title="Родительский тариф" as="tarif_parent" />
      </select>
      <from>
        <table name="kv_tarif_el" as="a" view="1" title="Электрические тарифы" />
      </from>
    </query>
    <query name="yn_default" title="Значение по умолчанию для списка да\нет" timestamp="26.01.2023 12:01:55" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="kod" type="number" key="1" as="kod" />
        <column table="a" column="name" type="string" title="Выбор" as="name" />
      </select>
      <from>
        <query name="yn" as="a" title="Список да/нет" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="49249-q2" title="Условия поиска точек в Б+" is-report="1" visible="0" timestamp="18.03.2024 01:16:56" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params>
        <param title="Инф. система" timestamp="09.09.2018 00:54:11" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_outeris" />
        <param name="ym" controlType="UICombo" title="Расчётный период" timestamp="11.09.2017 00:29:33" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param title="Отделения (филиалы) ЭСК" controlType="UIList" timestamp="30.08.2017 15:04:18" file="sql.builder.templates\sql.builder\projects\asuse2\reports\point\fields.xml" name="kod_es" />
        <param title="Зона филиала СК" controlType="UIList" name-field-name="sname" timestamp="03.05.2017 16:13:21" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="fil_tu" editable="1" />
        <param timestamp="30.11.2017 10:50:48" title="Зона района ЭС" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="res_tu" />
        <param title="Абонент" controlType="UIList" timestamp="24.10.2017 23:59:33" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kodp" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="ndog" title="№ договора" />
        <param name="kod_activ_dog" controlType="UIList" title="Статус договора" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param title="Договор" controlType="UIList" timestamp="24.10.2017 14:33:35" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_dog" />
        <param timestamp="25.10.2017 11:46:54" title="Объект" name-field-name="num_obj" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_numobj" />
        <param title="КТУ" controlType="UIList" timestamp="24.11.2022 11:27:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_rpoint" editable="kod_dog" />
        <param name="kod_vdog" controlType="UIList" title="Вид договора" timestamp="17.11.2016 15:59:52" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param name="tep_el" controlType="UIList" title="Вид услуг" timestamp="17.11.2016 15:59:52" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" visible="0" />
        <param title="Центр питания" controlType="UIList" timestamp="05.05.2017 13:45:31" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_eo" column-visible="1" editable="1" />
        <param title="Оборудование ЦП" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id" column-visible="1" editable="eobj_id_eo" />
        <param title="Энергообъект" controlType="UIList" timestamp="19.06.2019 17:00:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" column-visible="1" editable="1" name="eobj_id_eo_tp" />
        <param title="Оборудование ЭО" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" />
        <param title="Балансовая принадлежность" name-field-name="sname" controlType="UIList" timestamp="05.05.2017 12:34:15" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" column-visible="1" name="place_bal_id" editable="1" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Номер счётчика" name="serial_num" />
        <param title="Номер из списка" controlType="UIList" timestamp="28.09.2021 01:33:04" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="serial_num_list" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Наименование точки" name="num_point" />
        <param title="Тип точки" controlType="UIList" timestamp="09.09.2018 15:16:45" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="tpoint" />
        <param controlType="UIList" title="Группа потребителей по сети" name="kod_pwrcompany" timestamp="29.09.2021 17:00:11" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" />
        <param title="Напряжение" controlType="UIList" show-nulls="1" timestamp="12.06.2019 02:47:17" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="point_kv" />
        <param title="Вид энергии" controlType="UIList" timestamp="09.09.2018 15:47:05" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="energy" />
        <param controlType="UIList" timestamp="09.09.2018 15:52:23" title="Направление энергии" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="directen" />
        <param title="Граница с сетями" controlType="UIList" timestamp="24.04.2023 13:12:51" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" column-visible="1" editable="1" name="kod_net" />
        <param timestamp="27.03.2021 03:27:03" title="Получатель" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" column-visible="1" editable="1" name="kodp2" />
        <param title="Форма 46" controlType="UIList" timestamp="09.09.2018 01:35:15" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_f46" />
        <param title="Вид начисления" controlType="UIList" timestamp="09.09.2018 01:41:26" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="vid_t" />
        <param title="Уровень напряжения" controlType="UIList" timestamp="09.09.2018 16:02:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="voltage" />
        <param timestamp="09.09.2018 15:35:00" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" title="Ценовая категория" name="price_category" />
        <param title="Вид энергии:ед.изм." timestamp="09.09.2018 21:36:26" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="unit" />
        <param title="Тариф" controlType="UIList" timestamp="09.10.2018 16:25:38" parent-field-name="tarif_parent" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="tarif" />
        <param title="Уровень расчёта" controlType="UIList" timestamp="09.09.2018 14:51:21" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_calclev" />
        <param controlType="UIList" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" name="pr_po" column-default="1" column-visible="1" editable="1" title="Входит в полезный отпуск" />
      </params>
      <customers>
        <customer id="102" />
      </customers>
      <content>
        <fieldgroup title="Основные">
          <usefield name="kod_outeris" title="Инф. система" type="number" field="asuse_kod_outeris" />
          <usefield title="Расчётный период" field="asuse_ym_othr" name="ym" type="number">
            <defaultquery>
              <query name="43375-ym-val" />
            </defaultquery>
          </usefield>
          <usefield name="kod_es" title="Отделения (филиалы) ЭСК" type="number" field="asuse_kod_org_sbyt" />
          <usefield title="Зона филиала СК" field="asuse_kod_seti" name="fil_tu" editable="1" />
          <usefield field="asuse_kod_elter_org_tu_prava" name="res_tu" title="Зона района ЭС" />
        </fieldgroup>
        <fieldgroup title="Договор" expanded="0">
          <usefield name="kodp" field="asuse_kodp_kod_res" title="Абонент" />
          <usefield field="cmn_string" name="ndog" title="№ договора" />
          <usefield field="asuse_prizn_activ_dog" title="Статус договора" name="kod_activ_dog" />
          <usefield field="asuse_kod_dog_kodp_res" title="Договор" name="kod_dog" />
          <usefield title="Объект" field="asuse_kod_numobj_kod_res" name="kod_numobj" />
          <usefield field="asuse_kod_point" name="kod_rpoint" title="КТУ" editable="kod_dog" />
          <usefield type="number" name="kod_vdog" field="asuse_kod_vdog" title="Вид договора" />
          <usefield type="number" name="tep_el" field="asuse_tep_el" title="Вид услуг" visible="0">
            <defaultquery>
              <query name="kk_tep_el_act" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Схема сети">
          <usefield field="asuse_kod_eobject_src" name="eobj_id_eo" column-visible="1" title="Центр питания" editable="1" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id" column-visible="1" editable="eobj_id_eo" title="Оборудование ЦП" />
          <usefield field="asuse_kod_eosrc_all(kodp_res)" column-visible="1" editable="1" name="eobj_id_eo_tp" title="Энергообъект" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" title="Оборудование ЭО">
            <listquery>
              <query name="hv_eobject_eq_tp" />
            </listquery>
          </usefield>
          <usefield field="asuse_kod_balter_org" column-visible="1" name="place_bal_id" editable="1" title="Балансовая принадлежность" />
        </fieldgroup>
        <fieldgroup title="Точка учёта">
          <usefield title="Номер счётчика" field="cmn_string" name="serial_num" />
          <usefield title="Номер из списка" field="asuse_search_pu" name="serial_num_list" />
          <usefield title="Наименование точки" field="cmn_string" name="num_point" />
          <usefield type="string" field="asuse_tpoint" title="Тип точки" name="tpoint" />
          <usefield type="number" field="asuse_kod_pwrcompany" title="Группа потребителей по сети" name="kod_pwrcompany" />
          <usefield type="number" field="asuse_kod_v_nv" title="Напряжение" name="point_kv" />
          <usefield type="string" field="asuse_energy" name="energy" title="Вид энергии" />
          <usefield type="string" field="asuse_abbr_directen" name="directen" title="Направление энергии" />
          <usefield field="asuse_consumers_network" column-visible="1" editable="1" title="Граница с сетями" name="kod_net" />
          <usefield field="asuse_kod_org_sech" column-visible="1" editable="1" title="Получатель" name="kodp2" />
        </fieldgroup>
        <fieldgroup title="Дополнительные" expanded="0">
          <usefield type="number" field="asuse_kod_f46" title="Форма 46" name="kod_f46" />
          <usefield type="number" field="asuse_vid_t_2" title="Вид начисления" name="vid_t" />
          <usefield type="string" field="asuse_voltage_abbr" title="Уровень напряжения" name="voltage" />
          <usefield type="number" field="asuse_price_category" title="Ценовая категория" name="price_category" />
          <usefield type="string" field="asuse_edizm_point" title="Вид энергии:ед.изм." name="unit" />
          <usefield field="asuse_tafil_el_active" name="tarif" title="Тариф" />
          <usefield type="number" field="asuse_kod_calclev" title="Уровень расчёта" name="kod_calclev" />
          <usefield field="cmn_list_yesno" name="pr_po" column-default="1" column-visible="1" editable="1" title="Входит в полезный отпуск">
            <defaultquery>
              <query name="yn_default" />
            </defaultquery>
          </usefield>
        </fieldgroup>
      </content>
      <select>
        <column table="a" column="kod_point" key="1" as="kod_point" />
        <column table="a" column="name_fsk" as="name_fsk" />
        <column table="a" column="name_es" as="name_es" />
        <column table="a" column="kod_es" as="kod_es" />
        <column table="a" column="name_rsk" as="name_rsk" />
        <column table="a" column="kod_outeris" as="kod_outeris" />
        <column table="a" column="tpoint_abbr" as="tpoint_abbr" />
        <column table="a" column="r_pwrlev" as="r_pwrlev" />
        <column table="a" column="price_category" as="price_category" />
        <column table="a" column="kind_en" as="kind_en" />
        <column table="a" column="direct_en" as="direct_en" />
        <column table="a" column="unit" as="unit" />
      </select>
      <from>
        <query name="ar_point" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="ym" />
            <useparam name="ym" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_outeris" />
            <useparam name="kod_outeris" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_es" />
            <useparam name="kod_es" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_fsk" />
            <useparam name="fil_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_rsk" />
            <useparam name="res_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="tarif" />
            <useparam name="tarif" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_calclev" />
            <useparam name="kod_calclev" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_dog" />
            <useparam name="kod_dog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_numobj" />
            <useparam name="kod_numobj" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_rpoint" />
            <useparam name="kod_rpoint" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_vdog" />
            <useparam name="kod_vdog" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="dog_num" />
            <useparam name="ndog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp2" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodeo" />
            <useparam name="eobj_id_eo" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodfider" />
            <useparam name="eobj_id" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodeo" />
            <useparam name="eobj_id_eo_tp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodfider" />
            <useparam name="eobj_id_tp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="cnt_num" />
            <useparam name="serial_num_list" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="cnt_num" />
            <useparam name="serial_num" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="pname" />
            <useparam name="num_point" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="tpoint_abbr" />
            <useparam name="tpoint" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_pwrcompany" />
            <useparam name="kod_pwrcompany" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kind_en" />
            <useparam name="energy" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="direct_en" />
            <useparam name="directen" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="pwr_lev" />
            <useparam name="point_kv" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_f46" />
            <useparam name="kod_f46" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="vid_t" />
            <useparam name="vid_t" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="r_pwrlev" />
            <useparam name="voltage" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="price_category" />
            <useparam name="price_category" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="unit" />
            <useparam name="unit" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="is_powersupply" />
            <useparam name="pr_po" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_net" />
            <useparam name="kod_net" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_bal_id" />
            <useparam name="place_bal_id" />
          </call>
        </call>
      </where>
    </query>
    <query name="hk_v_nv" timestamp="12.06.2019 02:22:52" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <select>
        <column table="a" column="voltage" type="number" title="" as="voltage" />
        <column table="a" column="nv" type="number" title="" comment="напряжение (в цифрах)" key="1" as="nv" />
        <column table="a" column="sv" type="string" title="Напряжение (кВ)" comment="напряжение ( текстом)" agg="list" as="sv" />
        <column table="a" column="u_m" type="string" title="" as="u_m" />
        <column table="a" column="d_m" type="date" title="" as="d_m" />
        <column table="a" column="pr_t" type="number" title="" comment="признак &quot;типовое значение напряжения&quot; 1 - да, 0 - нет" as="pr_t" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hk_v" as="a" title="Фактическое напряжение" />
      </from>
    </query>
    <query name="hv_eosrc_all(kod_res)" title="Список энергообъектов по РЭС" timestamp="19.06.2019 16:56:27" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params>
        <param type="array" name="res_tu" />
        <param type="array" name="fil_tu" />
        <param type="array" name="bal_id_eo" />
        <param name="eobj_id" type="array" />
        <param name="eobj_id_eo" type="array" />
      </params>
      <select>
        <column table="a" column="seobj_id" key="1" type="number" as="seobj_id" />
        <column table="a" column="seobj_name" title="Наименование" type="string" as="seobj_name" />
        <column table="a" column="kindname" title="Тип" type="string" as="kindname" />
        <column table="a" column="balter_name" title="Балансовая принадлежность" type="string" as="balter_name" />
        <column table="a" column="elter_name" title="Эксплуатационная ответственность" type="string" as="elter_name" />
        <column table="a" column="seti" title="Сети" type="string" as="seti" />
      </select>
      <from>
        <table name="hv_eosrc_all_res" as="a" view="1" />
      </from>
    </query>
    <query name="49249-q3" title="Условия поиска для энергообъекта" is-report="1" timestamp="05.06.2022 05:06:41" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <params>
        <param title="Энергообъект" controlType="UICombo" timestamp="02.12.2021 10:08:13" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" column-visible="1" editable="1" name="eobj_id_eo_tp" />
        <param name="eobj_id_tp" controlType="UICombo" timestamp="02.12.2021 10:16:02" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" column-visible="1" editable="eobj_id_eo_tp" title="Оборудование ЭО" />
      </params>
      <customers>
        <customer id="102" />
      </customers>
      <content>
        <usefield field="asuse_kod_eosrc_all" column-visible="1" editable="1" name="eobj_id_eo_tp" title="Энергообъект" type="number" />
        <usefield field="asuse_kod_eobject_oneeq" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" title="Оборудование ЭО" type="number">
          <listquery>
            <query name="hv_eobject_eq_tp" />
          </listquery>
        </usefield>
      </content>
      <select />
      <from />
    </query>
    <query name="hv_eosrc_all_con" title="Список энергообъектов для сопоставления в Б+" timestamp="02.12.2021 10:01:56" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params />
      <select>
        <column table="a" column="seobj_id" key="1" type="number" as="seobj_id" />
        <column table="a" column="seobj_name" title="Наименование" type="string" as="seobj_name" />
        <column table="a" column="kindname" title="Тип" type="string" as="kindname" />
        <column table="a" column="balter_name" title="Балансовая принадлежность" type="string" as="balter_name" />
        <column table="a" column="elter_name" title="Эксплуатационная ответственность" type="string" as="elter_name" />
        <column table="a" column="seti" title="Сети" type="string" as="seti" />
      </select>
      <from>
        <table name="hv_eosrc_all" as="a" view="1" />
      </from>
    </query>
    <query name="hv_point(kod_dog, kod_obj)" title="Список ТУ договора" timestamp="27.02.2023 11:06:34" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params>
        <param name="kod_dog" type="array" />
        <param name="kod_numobj" type="array" />
      </params>
      <select>
        <column table="a" column="kod_point" key="1" type="number" as="kod_point" />
        <column table="a" column="nomer" type="string" title="Номер" as="nomer" />
        <column table="a" column="obj" type="string" title="Объект" as="obj" />
        <column table="a" column="ndog" type="string" title="Договор" as="ndog" />
        <column table="a" column="name" type="string" title="Наименование" as="name" />
        <column table="a" column="mesto" type="string" title="Место установки" as="mesto" />
        <column table="a" column="dat_s" type="string" title="Дата создания" as="dat_s" />
        <column table="a" column="dat_po" type="string" title="Дата закрытия" as="dat_po" />
      </select>
      <from>
        <query name="hv_point_search" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="in" optional="1">
            <column table="a" column="kod_dog" />
            <useparam name="kod_dog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_numobj" />
            <useparam name="kod_numobj" />
          </call>
        </call>
      </where>
    </query>
    <query name="49249-q4" title="Условия поиска точек в ИТ Договоров услуг" is-report="1" visible="0" timestamp="25.10.2023 11:54:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" haskeys="1">
      <params>
        <param title="Инф. система" timestamp="09.09.2018 00:54:11" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_outeris" />
        <param name="ym" controlType="UICombo" title="Отчётный период" timestamp="11.09.2017 00:29:33" file="sql.builder.templates\sql.builder\projects\asuse2_ipr\param_fields_asuse.xml" />
        <param title="Энергосбытовая компания" controlType="UIList" timestamp="30.08.2017 15:04:18" file="sql.builder.templates\sql.builder\projects\asuse2\reports\point\fields.xml" name="kod_es" />
        <param title="Абонент" controlType="UIList" timestamp="24.10.2017 23:59:33" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kodp" />
        <param title="Договор" controlType="UIList" timestamp="24.10.2017 14:33:35" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_dog" />
        <param timestamp="25.10.2017 11:46:54" title="Объект" name-field-name="num_obj" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="kod_numobj" />
        <param controlType="UIText" file="sql.builder.templates\sql.builder\projects\common\param_fields_common.xml" title="Номер счётчика" name="serial_num" />
        <param title="Зона филиала СК" controlType="UIList" name-field-name="sname" timestamp="03.05.2017 16:13:21" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="fil_tu" />
        <param timestamp="30.11.2017 10:50:48" title="Зона района ЭС" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" name="res_tu" />
        <param title="Граница с сетями" controlType="UIList" timestamp="24.04.2023 13:12:51" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="kod_net" />
        <param title="Напряжение на границе" controlType="UIList" show-nulls="1" timestamp="12.06.2019 02:47:17" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="point_kv" />
        <param controlType="UIList" title="Группа потребителей по сети" name="kod_pwrcompany" timestamp="29.09.2021 17:00:11" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" />
        <param title="Расчётный уровень напряжения" controlType="UIList" timestamp="25.10.2023 11:52:06" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="voltage" />
        <param title="Вид энергии" controlType="UIList" timestamp="09.09.2018 15:47:05" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="energy" />
        <param controlType="UIList" timestamp="09.09.2018 15:52:23" title="Направление энергии" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" name="directen" />
        <param timestamp="09.09.2018 15:35:00" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml" title="Ценовая категория" name="price_category" />
        <param title="Центр питания" controlType="UIList" timestamp="05.05.2017 13:45:31" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_eo" column-visible="1" editable="1" />
        <param title="Оборудование ЦП" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id" column-visible="1" editable="eobj_id_eo" clear-on-list-change="1" />
        <param title="Энергообъект" timestamp="25.10.2017 14:19:44" controlType="UIList" file="sql.builder.templates\sql.builder\projects\asuse2\reports\akt_verify\fields.xml" column-visible="1" editable="1" name="eobj_id_eo_tp" />
        <param title="Оборудование ЭО" controlType="UIList" timestamp="07.04.2020 15:30:36" file="sql.builder.templates\sql.builder\projects\asuse2\reports\metrology\fields.xml" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" clear-on-list-change="1" />
      </params>
      <customers>
        <customer id="102" />
      </customers>
      <content>
        <fieldgroup title="Основные">
          <usefield name="kod_outeris" title="Инф. система" type="number" field="asuse_kod_outeris" />
          <usefield title="Отчётный период" field="asuse_ym_othr" name="ym" type="number">
            <defaultquery>
              <query name="43375-ym-val" />
            </defaultquery>
          </usefield>
          <usefield name="kod_es" type="number" field="asuse_kod_org_sbyt" title="Энергосбытовая компания" />
        </fieldgroup>
        <fieldgroup title="Договор" expanded="0">
          <usefield name="kodp" field="asuse_kodp_kod_res" title="Абонент" />
          <usefield field="asuse_kod_dog_kodp_res" title="Договор" name="kod_dog" />
          <usefield title="Объект" field="asuse_kod_numobj_kod_res" name="kod_numobj" />
        </fieldgroup>
        <fieldgroup title="Точка учёта" expanded="0">
          <usefield title="Номер счётчика" field="cmn_string" name="serial_num" />
          <usefield title="Зона филиала СК" name="fil_tu" field="asuse_kod_seti" />
          <usefield title="Зона района ЭС" name="res_tu" field="asuse_kod_elter_org_tu_prava" />
          <usefield title="Граница с сетями" name="kod_net" field="asuse_consumers_network" />
          <usefield type="number" field="asuse_kod_v_nv" title="Напряжение на границе" name="point_kv" />
          <usefield title="Группа потребителей по сети" name="kod_pwrcompany" field="asuse_kod_pwrcompany" />
          <usefield title="Расчётный уровень напряжения" name="voltage" type="string" field="asuse_voltage_abbr_1" />
          <usefield type="string" field="asuse_energy" name="energy" title="Вид энергии" />
          <usefield type="string" field="asuse_abbr_directen" name="directen" title="Направление энергии" />
          <usefield title="Ценовая категория" name="price_category" type="number" field="asuse_price_category" />
        </fieldgroup>
        <fieldgroup title="Схема сети" expanded="0">
          <usefield field="asuse_kod_eobject_src" name="eobj_id_eo" column-visible="1" title="Центр питания" editable="1" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id" column-visible="1" editable="eobj_id_eo" title="Оборудование ЦП" clear-on-list-change="1" />
          <usefield field="asuse_kod_eosrc_tp(kodp_res)" column-visible="1" editable="1" name="eobj_id_eo_tp" title="Энергообъект" />
          <usefield field="asuse_kod_eobject_eq" name="eobj_id_tp" column-visible="1" editable="eobj_id_eo_tp" title="Оборудование ЭО" clear-on-list-change="1">
            <listquery>
              <query name="hv_eobject_eq_tp" />
            </listquery>
          </usefield>
        </fieldgroup>
      </content>
      <select>
        <column table="a" column="kod_point" key="1" as="kod_point" />
        <column table="a" column="name_fsk" as="name_fsk" />
        <column table="a" column="name_es" as="name_es" />
        <column table="a" column="kod_es" as="kod_es" />
        <column table="a" column="name_rsk" as="name_rsk" />
        <column table="a" column="kod_outeris" as="kod_outeris" />
        <column table="a" column="tpoint_abbr" as="tpoint_abbr" />
        <column table="a" column="r_pwrlev" as="r_pwrlev" />
        <column table="a" column="price_category" as="price_category" />
        <column table="a" column="kind_en" as="kind_en" />
        <column table="a" column="direct_en" as="direct_en" />
        <column table="a" column="unit" as="unit" />
      </select>
      <from>
        <query name="ar_point" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="true" />
          <call function="=" optional="1">
            <column table="a" column="ym" />
            <useparam name="ym" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_outeris" />
            <useparam name="kod_outeris" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_es" />
            <useparam name="kod_es" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_fsk" />
            <useparam name="fil_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_rsk" />
            <useparam name="res_tu" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_dog" />
            <useparam name="kod_dog" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_numobj" />
            <useparam name="kod_numobj" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kodp" />
            <useparam name="kodp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodeo" />
            <useparam name="eobj_id_eo" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="src_kodfider" />
            <useparam name="eobj_id" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodeo" />
            <useparam name="eobj_id_eo_tp" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="place_kodfider" />
            <useparam name="eobj_id_tp" />
          </call>
          <call function="like" optional="1">
            <column table="a" column="cnt_num" />
            <useparam name="serial_num" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kind_en" />
            <useparam name="energy" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="direct_en" />
            <useparam name="directen" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="pwr_lev" />
            <useparam name="point_kv" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="r_pwrlev" />
            <useparam name="voltage" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="price_category" />
            <useparam name="price_category" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_net" />
            <useparam name="kod_net" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="kod_pwrcompany" />
            <useparam name="kod_pwrcompany" />
          </call>
          <call function="=">
            <column table="a" column="kod_calclev" />
            <const type="number">1</const>
          </call>
          <call function="=">
            <column table="a" column="status" />
            <const type="number">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="hk_voltage_abbr_1" title="Уровень напряжения по аббревиатуре" order="abbr" timestamp="25.10.2023 11:55:04" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <select>
        <column table="hk_voltage_fact" column="abbr" title="Аббревиатура" as="abbr" key="0" />
        <column table="hk_voltage_fact" column="name" title="Наименование" as="name" key="0" />
      </select>
      <from>
        <query name="hk_voltage_fact" as="hk_voltage_fact" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="hk_voltage_fact" column="pr_active" />
            <const>0</const>
          </call>
          <call function="gt">
            <column table="hk_voltage_fact" column="voltage" />
            <const>0</const>
          </call>
          <call function="=">
            <column table="hk_voltage_fact" column="pr_fict" />
            <const type="number">0</const>
          </call>
        </call>
      </where>
      <order>
        <column column="abbr" />
      </order>
    </query>
    <query name="ak_outeris" class="1" file="sql.builder.templates\sql.builder\projects\49249\scheme\original\ak_outeris.xml" haskeys="1">
      <select>
        <column table="a" column="kod_outeris" type="number" column-mandatory="1" comment="Код внешней ИС" as="kod_outeris" key="1" fixed="1" />
        <column table="a" column="name" type="string" column-mandatory="1" title="Наименование" comment="Наименование" as="name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="ak_outeris" as="a" />
      </from>
    </query>
    <query name="hv_borders_network" class="1" timestamp="24.04.2023 12:51:05" file="sql.builder.templates\sql.builder\projects\49249\scheme\original\hv_borders_network.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" key="1" as="kodp" />
        <column table="a" column="sname" type="string" data-size="20" column-mandatory="1" title="Краткое наименование" as="sname" />
        <column table="a" column="name" type="string" data-size="200" title="Наименование" as="name" />
        <column table="a" column="inn" type="string" data-size="15" title="ИНН" as="inn" />
        <column table="a" column="enscope_name" type="string" data-size="100" column-mandatory="1" title="Классификатор" as="enscope_name" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="Статус" as="pr_active" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_borders_network" as="a" />
      </from>
    </query>
    <query name="hv_consumers_network" class="1" timestamp="24.04.2023 12:53:07" file="sql.builder.templates\sql.builder\projects\49249\scheme\original\hv_consumers_network.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" key="1" as="kodp" />
        <column table="a" column="sname" type="string" data-size="20" column-mandatory="1" title="Краткое наименование" as="sname" />
        <column table="a" column="name" type="string" data-size="200" title="Наименование" as="name" />
        <column table="a" column="inn" type="string" data-size="15" title="ИНН" as="inn" />
        <column table="a" column="enscope_name" type="string" data-size="100" column-mandatory="1" title="Классификатор" as="enscope_name" />
        <column table="a" column="pr_active" type="number" column-mandatory="1" title="Статус" as="pr_active" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" />
      </select>
      <from>
        <table name="hv_consumers_network" as="a" />
      </from>
    </query>
    <query name="hv_org_pwrcompany" class="1" timestamp="05.10.2021 10:20:24" file="sql.builder.templates\sql.builder\projects\49249\scheme\original\hv_org_pwrcompany.xml" haskeys="1">
      <select>
        <column table="a" column="kodp" type="number" column-mandatory="1" title="" as="kodp" key="1" fixed="1" />
        <column table="a" column="name" type="string" data-size="200" title="Наименование" as="name" key="0" />
        <column table="a" column="sname" type="string" data-size="20" column-mandatory="1" as="sname" key="0" />
        <column table="a" column="enscope_name" type="string" data-size="4000" title="Сфера деятельности" as="enscope_name" key="0" />
        <column table="a" column="inn" type="string" data-size="15" title="ИНН" as="inn" key="0" />
        <column table="a" column="addr_ur" type="string" data-size="1000" title="Адрес" as="addr_ur" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_org_pwrcompany" as="a" />
      </from>
    </query>
    <query name="hv_search_balance_pu" class="1" timestamp="28.09.2021 01:27:31" file="sql.builder.templates\sql.builder\projects\49249\scheme\original\hv_search_balance_pu.xml" haskeys="1">
      <select>
        <column table="a" column="nom_pu" type="string" data-size="20" title="Номер " as="nom_pu" key="1" fixed="1" />
        <column table="a" column="point_name" type="string" data-size="4000" title="Точка" as="point_name" key="0" />
        <column table="a" column="is_new" type="number" sys="1" as="is_new" key="0" />
        <column table="a" column="is_not_new" type="number" sys="1" as="is_not_new" key="0" />
      </select>
      <from>
        <table name="hv_search_balance_pu" as="a" />
      </from>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id" />
  <views child-name="view" key-name="id">
    <view name="hv_calclev" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      SELECT 1 as kod,
      'по точке' as name
      FROM dual
      UNION ALL
      SELECT 2 as kod,
      'по объекту' as name
      FROM dual
      UNION ALL
      SELECT 3 as kod,
      'по инт.точке' as name
      FROM dual
    </view>
    <view name="hv_price_category" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      SELECT 0 as kod,'0' as name FROM dual
      UNION ALL
      SELECT 1 as kod,'1' as name FROM dual
      UNION ALL
      SELECT 2 as kod,'2' as name FROM dual
      UNION ALL 
      SELECT 3 as kod,'3' as name FROM dual
       UNION ALL
      SELECT 4 as kod,'4' as name FROM dual
      UNION ALL 
      SELECT 5 as kod,'5' as name FROM dual
       UNION ALL 
      SELECT 6 as kod,'6' as name FROM dual
    </view>
    <view name="kv_tarif_el" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      WITH TARIFS_TABLE AS
(SELECT t.npp, t.tarif, LEVEL AS LEVELS,
                  CASE 
                  WHEN t.TARIF_PARENT IS NULL AND t.TIP_TARIF_SOST IS NOT NULL THEN
                  t.TIP_TARIF_SOST -1000000
                  WHEN t.TARIF_PARENT IS NULL AND t.TIP_TARIF_SOST IS NULL THEN
                  -1000000
                  ELSE t.TARIF_PARENT
                  END TARIF_PARENT,
                  t.npp || '  ' || t.sname as TARIF_NAME,
                t.PR_ACTIVE,
                t.tip_tarif_sost, t.tep_el
             FROM ks_tarif t WHERE 1=1
                    AND t.tep_el = 1                    
                    AND t.pr_active IN (2, 0)
                    
                     AND kg_tarif.is_active_cached(t.tarif) = 1
       CONNECT BY PRIOR t.tarif = t.tarif_parent
       START WITH     t.tarif_parent IS NULL
ORDER SIBLINGS BY t.npp) 
 
, SOST_TABLE AS
 (SELECT CASE WHEN t.SOST IS NULL AND 
(SELECT COUNT(a.tip_tarif_sost) from kk_tarif_sost a where a.tep_el IS NOT NULL and a.tep_el = t.tep_el and a.sost IS NULL) = 1 THEN
  -1000000
  ELSE 
  t.tip_tarif_sost -1000000 
  END  TARIF,  
  0 AS LEVELS, null as TARIF_PARENT,
  t.name as TARIF_NAME, t.pr_active, t.SOST as tip_tarif_sost, t.tep_el
  FROM kk_tarif_sost t
  where 1 = 1 
AND t.tep_el = 1
AND ((t.sost IS NULL AND (select COUNT(a.TARIF) from TARIFS_TABLE a WHERE a.TIP_TARIF_SOST IS NULL) &gt; 0)
OR (t.tip_tarif_sost in (select DISTINCT a.TIP_TARIF_SOST from TARIFS_TABLE a)))
AND t.pr_active IN (2, 0)
ORDER BY t.name)

SELECT  s.tarif as npp, 
        s.* FROM SOST_TABLE s
union all
SELECT * FROM  TARIFS_TABLE m WHERE 1 = 1
AND m.tip_tarif_sost IS NULL
OR m.tip_tarif_sost IN (SELECT a.tip_tarif_sost FROM SOST_TABLE a)
    </view>
    <view name="hv_eosrc_all_res" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">

      select s.eobj_id as seobj_id,
      max(s.dnum) as seobj_name,
      max(sk.sname) as kindname,
      max(s.kod_srckind) as kod_srckind,
      max(eo.bal_id) as bal_id,
      max(eo.expl_id) as expl_id,
      max(b.name) as balter_name,
      max(e.name) as elter_name,
      max(st.sname) as seti
      from hr_eosrc s
      inner join
      hr_eobject eo on eo.eobj_id= s.eobj_id
      inner join
      hk_srckind sk on sk.kod_srckind = s.kod_srckind
      inner join
      kr_org b on b.kodp = eo.bal_id
      inner join
      kr_org e on e.kodp = eo.expl_id
      left join
      hr_eosrc_elnet el on el.eobj_id = s.eobj_id
      left join
      hv_seti  st on st.kod = el.kodp
      left join
      hr_eobject eq on eq.parent_id = eo.eobj_id
      left join
      hv_eobject_senter_nut sn on sn.eobj_id = eq.eobj_id
      left join
      ( select eobj_id, kod_point from hr_point_har h where h.dat_po is null and h.pr_active !=1) h on h.eobj_id  = eq.eobj_id
      left join
      hr_point p on p.kod_point = h.kod_point
      where eo.deleted =0 
      {and p.kodp_rsk in :res_tu } {and st.kod in :fil_tu } {and eo.bal_id in :bal_id_eo }
      {and p.kodp_fsk in :fil_tu } {and sn.id_senter_nut in :eobj_id_eo }
      {and sn.id_fider_nut in :eobj_id }
      group by s.eobj_id
    </view>
    <view name="hv_eosrc_all" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">

      select a.seobj_id as seobj_id, 
       a.seobj_name as seobj_name,
       a.kindname as kindname,         
       a.balter_name as balter_name, 
       a.elter_name as elter_name, 
       a.seti as seti
       from hv_eosrc_search  a

   </view>
  </views>
  <reports child-name="report" key-name="name" />
  <forms child-name="form" key-name="name" />
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name" />
  <dimension-packages child-name="dimension-package" key-name="name" />
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id">
    <field id="asuse_kod_outeris" title="Список систем- источников ТУ" timestamp="09.09.2018 00:54:11" controlType="UIList" type="number" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="ak_outeris" as="a" />
      </listquery>
    </field>
    <field id="asuse_kod_f46" title="Форма 46" controlType="UIList" type="number" timestamp="09.09.2018 01:35:15" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="ks_46" />
      </listquery>
    </field>
    <field id="asuse_vid_t_2" title="Вид начисления ( список)" controlType="UIList" type="number" timestamp="09.09.2018 01:41:26" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="sk_nachisl" as="a" />
      </listquery>
    </field>
    <field id="asuse_tpoint" title="Тип точки учёта" controlType="UIList" type="string" timestamp="09.09.2018 15:16:45" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_tpoint" />
      </listquery>
    </field>
    <field id="asuse_kod_calclev" title="Уровень расчёта" controlType="UIList" type="number" timestamp="09.09.2018 14:51:21" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_calclev_q" />
      </listquery>
    </field>
    <field id="asuse_price_category" timestamp="09.09.2018 15:35:00" controlType="UIList" type="number" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_price_category" />
      </listquery>
    </field>
    <field id="asuse_energy" title="Виды энергии" controlType="UIList" type="string" timestamp="09.09.2018 15:47:05" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_energy" />
      </listquery>
    </field>
    <field id="asuse_abbr_directen" controlType="UIList" type="string" timestamp="09.09.2018 15:52:23" title="Направление энергии (Аббревиатура)" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_directen" />
      </listquery>
    </field>
    <field id="asuse_voltage_abbr" title="Уровень напряжения ( аббревиатура)" type="string" controlType="UIList" timestamp="09.09.2018 16:02:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_voltage_abbr" />
      </listquery>
    </field>
    <field id="asuse_edizm_point" title="Список ед. измерения в точках" timestamp="09.09.2018 21:36:26" type="string" controlType="UIList" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="sk_edizm_point" />
      </listquery>
    </field>
    <field id="asuse_tarif_el" title="Эл. тарифы" controlType="UIList" type="number" timestamp="12.09.2018 15:07:56" parent-field-name="tarif_parent" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="ks_tarif_el" />
      </listquery>
    </field>
    <field id="asuse_tafil_el_active" title="Эл. тарифы активные" controlType="UIList" type="number" timestamp="09.10.2018 16:25:38" parent-field-name="tarif_parent" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="kv_tarif_el" />
      </listquery>
    </field>
    <field id="asuse_kod_v_nv" title="Фактическое напряжение ( по значению)" type="number" controlType="UIList" show-nulls="1" timestamp="12.06.2019 02:47:17" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_v_nv" />
      </listquery>
    </field>
    <field id="asuse_kod_eosrc_all(kodp_res)" title="Поле для отображения  энергообъектов по РЭС" controlType="UIList" type="number" timestamp="19.06.2019 17:00:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_eosrc_all(kod_res)" />
      </listquery>
    </field>
    <field id="asuse_search_pu" title="Выбор номера прибора" controlType="UIList" type="string" timestamp="28.09.2021 01:33:04" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_search_balance_pu" />
      </listquery>
    </field>
    <field id="asuse_kod_pwrcompany" type="number" controlType="UIList" title="Группа потребителей по сети" name="kodp" timestamp="29.09.2021 17:00:11" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_org_pwrcompany" />
      </listquery>
    </field>
    <field id="asuse_kod_eosrc_all" title="Поле для отображения  энергообъектов " type="number" controlType="UICombo" timestamp="02.12.2021 10:08:13" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_eosrc_all_con" />
      </listquery>
    </field>
    <field id="asuse_kod_eobject_oneeq" name="Список оборудования(одиночный выбор)" controlType="UICombo" type="number" timestamp="02.12.2021 10:16:02" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_eobject_eq" />
      </listquery>
    </field>
    <field id="asuse_kod_point" type="number" title="Список точек учёта по договору(объекту)" controlType="UIList" timestamp="24.11.2022 11:27:32" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_point(kod_dog, kod_obj)" />
      </listquery>
    </field>
    <field id="asuse_consumers_network" title="Граница с сетями" controlType="UIList" type="number" timestamp="24.04.2023 13:12:51" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hv_borders_network" />
      </listquery>
    </field>
    <field id="asuse_voltage_abbr_1" title="Уровень напряжения ( аббревиатура)" type="string" controlType="UIList" timestamp="25.10.2023 11:52:06" file="sql.builder.templates\sql.builder\projects\49249\all\query.xml">
      <listquery>
        <query name="hk_voltage_abbr_1" />
      </listquery>
    </field>
  </fields>
  <actions child-name="action" key-name="name" />
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>