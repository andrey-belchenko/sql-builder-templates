<?xml version="1.0" encoding="utf-8"?>
<root>
  <reports>
    <report name="44098" timestamp="01.05.2018 12:50:19" title="Отчет по срокам подготовки договоров(подробный)" nogrid="1" form="44098" use-repository="1">
      <params>
        <param name="p_ym1" type="number" part-id="44098-params" exclude="1">
          <const>201701</const>
        </param>
        <param name="p_ym2" type="number" part-id="44098-params" exclude="1">
          <const>201712</const>
        </param>
        <param name="p_ym3" type="number" part-id="44098-params" exclude="1">
          <const>201701</const>
        </param>
        <param name="p_ym4" type="number" part-id="44098-params" exclude="1">
          <const>201712</const>
        </param>
        <param name="p_dt1" type="date" part-id="44098-params">
          <const>date'2018-03-01'</const>
        </param>
        <param name="p_dt2" type="date" part-id="44098-params">
          <const>date'2018-03-30'</const>
        </param>
        <param name="p_dt3" type="date" part-id="44098-params">
          <const>date'2018-03-01'</const>
        </param>
        <param name="p_dt4" type="date" part-id="44098-params">
          <const>date'2018-03-30'</const>
        </param>
        <param name="p_list_type" type="number" part-id="44098-params">
          <const>1</const>
        </param>
      </params>
      <print-templates>
        <excel>
          <template name="44098-1.xlsx" title="Отчет по срокам подготовки договоров" print-proc="2" print-xlsx="1" post-process="0" />
        </excel>
      </print-templates>
      <queries>
        <query name="44098-1" as="a">
          <withparams>
            <useparam name="p_dt1" part-id="44098-useparams" />
            <useparam name="p_dt2" part-id="44098-useparams" />
            <useparam name="p_dt3" part-id="44098-useparams" />
            <useparam name="p_dt4" part-id="44098-useparams" />
            <useparam name="p_list_type" part-id="44098-useparams" />
          </withparams>
        </query>
      </queries>
    </report>
    <report name="44098-2" timestamp="23.01.2018 15:51:40" title="Отчет по срокам подготовки договоров (сводный)" nogrid="1" form="44098" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <print-templates>
        <excel>
          <template name="44098-2.xlsx" title="Отчет по срокам подготовки договоров(сводный)" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <queries>
        <query name="44098-2" as="b">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-2-2" as="bi">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-2-3" as="c">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-2-4" as="d">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </queries>
    </report>
    <report name="44098-3" timestamp="24.09.2018 14:58:33" title="Отчет по срокам подготовки договоров (ВКС)" nogrid="1" form="44098-3" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <print-templates>
        <excel>
          <template name="44098-3.xlsx" title="Отчет по срокам подготовки договоров (ВКС)" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <queries>
        <query name="44098-3-1" as="q1">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-3-2" as="q2">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-3-3" as="q3">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-3-4" as="q4">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-3-5" as="q5">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-3-6" as="q6">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query as="a" name="44098-3-detail">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </queries>
    </report>
    <report name="44098-4" timestamp="24.05.2018 12:54:55" title="Отчет по заявкам для ИЦ" nogrid="1" form="44098-4" use-repository="1">
      <params>
        <usepart part="44098-params" exclude="1" />
        <param name="p_dt3" type="date">
          <const>to_date('19.03.2018','DD.MM.YYYY')</const>
        </param>
        <param name="p_dt4" type="date">
          <const>to_date('26.03.2018','DD.MM.YYYY')</const>
        </param>
        <param name="load_type_id" type="array" />
        <param type="array" name="kod_subject" />
        <param name="p_power_gt" type="number" />
        <param name="p_power_ls" type="number" />
      </params>
      <print-templates>
        <excel>
          <template name="44098-4.xlsx" title="Отчет по заявкам для ИЦ" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <queries>
        <query as="a" name="44098-4">
          <withparams>
            <useparam name="p_dt3" type="date" />
            <useparam name="p_dt4" type="date" />
            <useparam name="load_type_id" type="array" />
            <useparam name="kod_subject" />
            <useparam name="p_power_gt" />
            <useparam name="p_power_ls" />
          </withparams>
        </query>
      </queries>
    </report>
    <report name="44098-3-49576" timestamp="08.10.2018 15:55:48" title="Отчет по срокам подготовки договоров (ВКС все договоры)" nogrid="1" form="44098-3-49576" use-repository="1" datareader="1">
      <params>
        <usepart part="44098-3-49576-params" />
      </params>
      <print-templates>
        <excel>
          <template name="44098-3-49576.xlsx" title="Отчет по срокам подготовки договоров (ВКС)" print-proc="2" print-xlsx="1" post-process="0" />
        </excel>
      </print-templates>
      <queries>
        <query as="a" name="44098-3-49576-detail">
          <withparams>
            <usepart part="44098-3-49576-withparams" />
          </withparams>
        </query>
      </queries>
    </report>
  </reports>
  <queries>
    <query name="44098-dat-month" timestamp="25.01.2018 13:07:12" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="kod_dop_contract" />
        <column table="b" column="ym2" as="ym" />
        <column table="b" column="name_str" as="month_name" />
        <call function="if" as="day_req" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_req" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_docs_got" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_req" />
        </call>
        <call function="if" as="day_tu" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_tu" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_pz" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_tu" />
        </call>
        <call function="if" as="day_ocen" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_ocen" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_cost_put" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_ocen" />
        </call>
        <call function="if" as="day_proj" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_proj" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_project" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_proj" />
        </call>
        <call function="if" as="day_dog" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_dog" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_sogl_dog" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_dog" />
        </call>
        <call function="if" as="day_sign" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_sign" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_podp_dog" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_sign" />
        </call>
        <call function="if" as="day_mess" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_mess" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_mess" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_mess" />
        </call>
        <call function="if" as="day_client_proj" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_client_proj" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_client_proj" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <column table="a" column="day_client_proj" />
        </call>
        <call function="if" as="cnt_zayav" type="number">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="ym" type="number" title="" />
            </call>
            <call function="between">
              <column table="a" column="dt_request" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="number" as="cnt_uved_ok">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_mess" type="number" title="" />
            </call>
            <call function="=0">
              <column table="a" column="tbl_uved" />
            </call>
            <call function="between">
              <column table="a" column="dt_mess" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" type="number" as="cnt_uved_not_ok">
          <call function="and">
            <call function="=">
              <column table="b" column="ym" />
              <column table="a" column="mes_mess" type="number" title="" />
            </call>
            <call function="=1">
              <column table="a" column="tbl_uved" />
            </call>
            <call function="between">
              <column table="a" column="dt_mess" />
              <useparam name="p_dt1" />
              <useparam name="p_dt2" />
            </call>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="44098-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-months" join="cross" as="b">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-1" timestamp="22.01.2018 10:45:16" use-repository="1" order="2,3,4,5">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="a" column="kod_dop_contract" />
        <column table="a" column="kn_request" />
        <column table="a" column="num_ouco" />
        <column table="a" column="dat_ouco" />
        <column table="a" column="dt_contract" />
        <column table="a" column="num_req" />
        <column table="a" column="dt_request" />
        <column table="a" column="kurator_req" />
        <column table="a" column="load_type" />
        <column table="a" column="st_req" />
        <column table="a" column="creat_req_db" />
        <column table="a" column="req_path" />
        <column table="a" column="customer" />
        <column table="a" column="contr_kind" />
        <column table="a" column="contr_sum_f" />
        <column table="a" column="contr_sum_m" />
        <column table="a" column="contr_sum_e" />
        <column table="a" column="kn_zone" />
        <column table="a" column="load" />
        <column table="a" column="load1" />
        <column table="a" column="load2" />
        <column table="a" column="load3" />
        <column table="a" column="load_existed" />
        <column table="a" column="list_load" />
        <column table="a" column="list_eskl" />
        <column table="a" column="tbl_uved" />
        <column table="a" column="tbl_req" />
        <column table="a" column="tbl_tu" />
        <column table="a" column="tbl_ocen" />
        <column table="a" column="tbl_proj" />
        <column table="a" column="tbl_dog" />
        <column table="a" column="tbl_sign" />
        <column table="a" column="tbl_mess" />
        <column table="a" column="kateg_depend" />
        <column table="a" column="fl_build" />
        <column table="a" column="filial" />
        <column table="a" column="kurator" />
        <column table="a" column="name_status" />
        <column table="a" column="status" />
        <column table="a" column="fio" />
        <column table="a" column="name_direct" />
        <column table="a" column="name_viza" />
        <column table="a" column="dat_post" />
        <column table="a" column="dat_viz" />
        <column table="a" column="prim" />
        <column table="a" column="spec_text" />
        <column table="a" column="tel" />
        <column table="a" column="dolgn" />
        <column table="a" column="polzov" />
        <column table="a" column="dpk" />
        <column table="a" column="ym" />
        <column table="a" column="dt_lack_req" />
        <column table="a" column="dt_lack_req_max" />
        <column table="a" column="dt_docs_got" />
        <column table="a" column="dt_pz" />
        <column table="a" column="dt_cost_put" />
        <column table="a" column="dt_project" />
        <column table="a" column="dt_mess" />
        <column table="a" column="dt_mess_too" />
        <column table="a" column="dt_client_proj" />
        <column table="a" column="dt_client_sign" />
        <column table="a" column="dt_pass_up" />
        <column table="a" column="dt_pass_eb" />
        <column table="a" column="dt_pass_cc" />
        <column table="a" column="dt_pass_od" />
        <column table="a" column="dt_rmo" />
        <column table="a" column="dt_rmo_max" />
        <column table="a" column="mes_req" />
        <column table="a" column="day_req" />
        <column table="a" column="srok_req" />
        <column table="a" column="otkl_req" />
        <column table="a" column="mes_tu" />
        <column table="a" column="day_tu" />
        <column table="a" column="srok_tu" />
        <column table="a" column="otkl_tu" />
        <column table="a" column="mes_ocen" />
        <column table="a" column="day_ocen" />
        <column table="a" column="srok_ocen" />
        <column table="a" column="otkl_ocen" />
        <column table="a" column="mes_proj" />
        <column table="a" column="day_proj" />
        <column table="a" column="srok_proj" />
        <column table="a" column="otkl_proj" />
        <column table="a" column="mes_dog" />
        <column table="a" column="day_dog" />
        <column table="a" column="srok_dog" />
        <column table="a" column="otkl_dog" />
        <column table="a" column="mes_sign" />
        <column table="a" column="day_sign" />
        <column table="a" column="srok_sign" />
        <column table="a" column="otkl_sign" />
        <column table="a" column="day_22_4_sign" />
        <column table="a" column="srok_22_4_sign" />
        <column table="a" column="otkl_22_4_sign" />
        <column table="a" column="mes_mess" />
        <column table="a" column="day_mess" />
        <column table="a" column="srok_mess" />
        <column table="a" column="otkl_mess" />
        <column table="a" column="mes_client_proj" />
        <column table="a" column="day_client_proj" />
        <column table="a" column="mes_all" />
        <column table="a" column="day_all" />
        <column table="a" column="srok_all" />
        <column table="a" column="otkl_all" />
        <column table="a" column="dat_lkk" />
        <column table="a" column="dt_sogl_dog" />
        <column table="a" column="dt_podp_dog" />
        <column table="a" column="dt_podp_dog_ep" />
        <column table="a" column="fio_podp_dog" />
        <column table="a" column="fio_kont" />
        <column table="a" column="e_mail_kont" />
        <column table="a" column="phone_kont" />
      </select>
      <from>
        <query name="44098-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-dat-status" timestamp="25.01.2018 12:38:11" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="kod_dop_contract" />
        <column table="b" column="id" as="st_id" />
        <column table="b" column="name" as="st_name" />
        <call function="case" as="cnt_ok" type="number">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>1</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_req" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_docs_got" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>2</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_tu" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_pz" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>3</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_ocen" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_cost_put" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>4</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_proj" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_project" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>5</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_dog" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_sogl_dog" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>6</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_sign" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_podp_dog" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>7</const>
              </call>
              <call function="=">
                <column table="a" column="tbl_mess" />
                <const>0</const>
              </call>
              <call function="between">
                <column table="a" column="dt_mess" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="case" as="cnt_not_ok" type="number">
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>1</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_req" />
              </call>
              <call function="between">
                <column table="a" column="dt_docs_got" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>2</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_tu" />
              </call>
              <call function="between">
                <column table="a" column="dt_pz" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>3</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_ocen" />
              </call>
              <call function="between">
                <column table="a" column="dt_cost_put" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>4</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_proj" />
              </call>
              <call function="between">
                <column table="a" column="dt_project" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>5</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_dog" />
              </call>
              <call function="between">
                <column table="a" column="dt_sogl_dog" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>6</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_sign" />
              </call>
              <call function="between">
                <column table="a" column="dt_podp_dog" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="=">
                <column table="b" column="id" />
                <const>7</const>
              </call>
              <call function="=1">
                <column table="a" column="tbl_mess" />
              </call>
              <call function="between">
                <column table="a" column="dt_mess" />
                <useparam name="p_dt1" />
                <useparam name="p_dt2" />
              </call>
            </call>
            <const>1</const>
          </call>
        </call>
      </select>
      <from>
        <query name="44098-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-status" join="left outer" as="b">
          <call function="true" />
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-pre" timestamp="06.03.2018 15:37:31" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
        <column table="lt" column="id" as="lt_id" />
        <column table="lt" column="name" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
        <query name="44098-ltype" join="left outer" as="lt">
          <call function="and">
            <call function="=">
              <column table="a" column="list_load" />
              <column table="lt" column="load" />
            </call>
            <call function="=">
              <column table="a" column="list_eskl" />
              <column table="lt" column="eskl" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="ge">
            <call function="coalesce">
              <column table="a" column="dt_client_proj" />
              <column table="a" column="dt_mess" />
              <column table="a" column="dt_podp_dog" />
              <column table="a" column="dt_sogl_dog" />
              <column table="a" column="dt_project" />
              <column table="a" column="dt_cost_put" />
              <column table="a" column="dt_pz" />
              <column table="a" column="dt_docs_got" />
              <column table="a" column="dt_request" />
            </call>
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_request" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge" optional="1">
            <column table="a" column="dt_request" />
            <useparam name="p_dt3" />
          </call>
          <call function="le" optional="1">
            <column table="a" column="dt_request" />
            <useparam name="p_dt4" />
          </call>
          <call function="=">
            <column table="this" column="lt_id" />
            <useparam name="p_list_type" />
          </call>
          <call function="is not null" comment="только заявки, по которым есть виза «Подписано»">
            <column table="a" column="dt_podp_dog" />
          </call>
          <call function="!=">
            <column table="a" column="status" />
            <const>29</const>
          </call>
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17,24,38,21,32</array>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-months" timestamp="22.01.2018 12:48:59" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="spr_time_ym" as="a" />
      </from>
      <where>
        <call function="between">
          <column table="a" column="ym2" />
          <call function="date to ym2">
            <useparam name="p_dt1" />
          </call>
          <call function="date to ym2">
            <useparam name="p_dt2" />
          </call>
        </call>
      </where>
    </query>
    <query name="44098-2" timestamp="01.12.2017 15:27:03" use-repository="1" order="ym">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="row_num" as="id" key="1">
          <const>null</const>
        </call>
        <column table="a" column="ym" group="1" />
        <column table="a" column="month_name" group="max" />
        <column table="a" column="day_req" type="number" title="" group="avg" />
        <column table="a" column="day_tu" type="number" title="" group="avg" />
        <column table="a" column="day_ocen" type="number" title="" group="avg" />
        <column table="a" column="day_proj" type="number" title="" group="avg" />
        <column table="a" column="day_dog" type="number" title="" group="avg" />
        <column table="a" column="day_sign" type="number" title="" group="avg" />
        <column table="a" column="day_mess" type="number" title="" group="avg" />
        <column table="a" column="day_client_proj" type="number" title="" group="avg" />
        <column table="a" column="cnt_zayav" type="number" title="" group="sum" />
        <column table="a" column="cnt_uved_ok" type="number" title="" group="sum" />
        <column table="a" column="cnt_uved_not_ok" type="number" title="" group="sum" />
      </select>
      <from>
        <query name="44098-dat-month" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-2-3" timestamp="23.01.2018 15:51:09" use-repository="1" order="name_direct">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="row_num" as="id" key="1">
          <const>null</const>
        </call>
        <column table="a" column="filial" group="1" as="name_direct" />
        <call function="if" as="day_req" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_req" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_req" />
        </call>
        <call function="if" as="day_req" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_docs_got" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_req" />
        </call>
        <call function="if" as="day_tu" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_tu" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_tu" />
        </call>
        <call function="if" as="day_tu" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_pz" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_tu" />
        </call>
        <call function="if" as="day_ocen" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_ocen" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_ocen" />
        </call>
        <call function="if" as="day_ocen" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_cost_put" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_ocen" />
        </call>
        <call function="if" as="day_proj" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_proj" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_proj" />
        </call>
        <call function="if" as="day_proj" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_project" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_proj" />
        </call>
        <call function="if" as="day_dog" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_dog" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_dog" />
        </call>
        <call function="if" as="day_dog" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_sogl_dog" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_dog" />
        </call>
        <call function="if" as="day_sign" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_sign" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_sign" />
        </call>
        <call function="if" as="day_sign" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_podp_dog" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_sign" />
        </call>
        <call function="if" as="day_mess" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_mess" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_mess" />
        </call>
        <call function="if" as="day_mess" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_mess" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_mess" />
        </call>
        <call function="if" as="day_client_proj" type="number" group="avg" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="mes_client_proj" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <column table="a" column="day_client_proj" />
        </call>
        <call function="if" as="day_client_proj" type="number" group="avg">
          <call function="between">
            <column table="a" column="dt_client_proj" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <column table="a" column="day_client_proj" />
        </call>
        <call function="if" as="cnt_zayav" type="number" group="sum" exclude="1">
          <call function="between">
            <call function="*">
              <column table="a" column="ym" />
              <const>100</const>
            </call>
            <useparam name="p_ym1" />
            <useparam name="p_ym2" />
          </call>
          <const>1</const>
        </call>
        <call function="if" as="cnt_zayav" type="number" group="sum">
          <call function="between">
            <column table="a" column="dt_request" />
            <useparam name="p_dt1" />
            <useparam name="p_dt2" />
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="44098-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-mon2" timestamp="30.11.2017 17:11:30" use-repository="1">
      <select>
        <column table="a" column="ym2" />
      </select>
      <from>
        <query name="spr_time_ym" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="ym2" />
          <call function="ym2 add month">
            <call function="date to ym2">
              <call function="sysdate" />
            </call>
            <const>-1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-mon1" timestamp="30.11.2017 15:39:00" use-repository="1">
      <select>
        <column table="a" column="ym2" />
      </select>
      <from>
        <query name="spr_time_ym" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="ym2" />
          <call function="ym2 add month">
            <call function="date to ym2">
              <call function="sysdate" />
            </call>
            <const>-12</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-ltype" timestamp="30.11.2017 20:39:15">
      <const as="id" type="number">1</const>
      <const as="name" type="string">'мощность до 150 кВт (включительно), подписант ЭСКЛ'</const>
      <const as="load" type="number">1</const>
      <const as="eskl" type="number">1</const>
      <const>2</const>
      <const>'мощность до 150 кВт (включительно), подписант не ЭСКЛ'</const>
      <const>1</const>
      <const>0</const>
      <const>3</const>
      <const>'мощность свыше 150 кВт, подписант ЭСКЛ'</const>
      <const>0</const>
      <const>1</const>
      <const>4</const>
      <const>'мощность свыше 150 кВт, подписант не ЭСКЛ'</const>
      <const>0</const>
      <const>0</const>
    </query>
    <query name="44098-status" timestamp="01.12.2017 16:11:12">
      <const as="id" type="number">1</const>
      <const as="name" type="string">'Обработка заявки'</const>
      <const>2</const>
      <const>'Подготовка ТУ'</const>
      <const>3</const>
      <const>'Оценка ТУ'</const>
      <const>4</const>
      <const>'Подготовка договора'</const>
      <const>5</const>
      <const>'Согласование договора'</const>
      <const>6</const>
      <const>'Подписание договора'</const>
      <const>7</const>
      <const>'Уведомление о готовности'</const>
    </query>
    <query name="44098-2-4" timestamp="23.01.2018 15:51:10" use-repository="1" order="st_id">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="row_num" as="id" key="1">
          <const>null</const>
        </call>
        <column table="a" column="st_id" group="1" />
        <column table="a" column="st_name" group="max" />
        <column table="a" column="cnt_ok" group="sum" />
        <column table="a" column="cnt_not_ok" group="sum" />
      </select>
      <from>
        <query name="44098-dat-status" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-2-2" timestamp="03.12.2017 17:41:19" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="row_num" as="id" key="1">
          <const>null</const>
        </call>
        <column table="a" column="day_req" type="number" title="" group="avg" />
        <column table="a" column="day_tu" type="number" title="" group="avg" />
        <column table="a" column="day_ocen" type="number" title="" group="avg" />
        <column table="a" column="day_proj" type="number" title="" group="avg" />
        <column table="a" column="day_dog" type="number" title="" group="avg" />
        <column table="a" column="day_sign" type="number" title="" group="avg" />
        <column table="a" column="day_mess" type="number" title="" group="avg" />
        <column table="a" column="day_client_proj" type="number" title="" group="avg" />
      </select>
      <from>
        <query name="44098-dat-month" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="44098-dt1" timestamp="30.01.2018 13:38:52" use-repository="1">
      <select>
        <call as="dt1" function="trunc" type="date">
          <call table="a" column="ym2" function="-" type="date">
            <call function="sysdate" />
            <const>1</const>
          </call>
          <const>'MM'</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="44098-dt2" timestamp="30.01.2018 13:36:29" use-repository="1">
      <select>
        <call function="-" as="dt2" type="date">
          <call table="a" column="ym2" function="trunc" type="date">
            <call function="sysdate" />
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="44098-dt_vld" timestamp="22.01.2018 11:00:14" use-repository="1">
      <params>
        <param name="p_dt1" type="date">
          <const>date'2017-02-01'</const>
        </param>
        <param name="p_dt2" type="date">
          <const>date'2018-01-01'</const>
        </param>
      </params>
      <select>
        <call function="case" type="string" as="val">
          <call function="when">
            <call function="gt">
              <call function="months_between">
                <call function="trunc" type="date">
                  <useparam name="p_dt2" />
                  <const>'MM'</const>
                </call>
                <call function="trunc" type="date">
                  <useparam name="p_dt1" />
                  <const>'MM'</const>
                </call>
              </call>
              <const>11</const>
            </call>
            <const>'Период не должен превышать 12 месяцев'</const>
          </call>
          <call function="when">
            <call function="lt">
              <call function="-">
                <useparam name="p_dt2" />
                <useparam name="p_dt1" />
              </call>
              <const>0</const>
            </call>
            <const>'Период задан некорректно'</const>
          </call>
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="44098-ltype2" timestamp="23.01.2018 15:23:37">
      <const as="id" type="number">1</const>
      <const as="name" type="string">'от 0 до 150 кВт'</const>
      <const as="load" type="number">1</const>
      <const>2</const>
      <const>'свыше 150 кВт'</const>
      <const>0</const>
    </query>
    <query name="44098-direct" timestamp="25.01.2018 17:31:38" use-repository="1">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_predpr" />
        <column table="a" column="name_kr" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <const>63</const>
          </call>
          <call function="!=">
            <column table="a" column="kod_predpr" />
            <const>'9999'</const>
          </call>
          <call function="is null">
            <column table="a" column="god" />
          </call>
        </call>
      </where>
    </query>
    <query name="44098-direct-det-list" timestamp="26.01.2018 12:27:02">
      <const as="id" type="number">1</const>
      <const as="name" type="string">'ЭСКЛ'</const>
      <const>2</const>
      <const>'филиал'</const>
      <const>3</const>
      <const>'ИА ЛЭ'</const>
    </query>
    <query name="44098-direct-det" timestamp="30.01.2018 13:29:47" use-repository="1" order="kod_predpr, id_podr">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_predpr" />
        <column table="a" column="name_kr" />
        <column table="d" column="id" as="id_podr" />
        <call function="if" as="name_podr" type="string">
          <call function="=">
            <column table="d" column="name" />
            <const>'филиал'</const>
          </call>
          <column table="a" column="name_kr" />
          <column table="d" column="name" />
        </call>
      </select>
      <from>
        <query name="44098-direct" as="a" />
        <query name="44098-direct-det-list" as="d" join="cross" />
      </from>
      <where>
        <call function="not">
          <call function="and">
            <call function="in">
              <column table="a" column="name_kr" />
              <array>'КС','СПбВС'</array>
            </call>
            <call function="=">
              <column table="d" column="name" />
              <const>'филиал'</const>
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-detail" timestamp="28.09.2018 17:00:41" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <call function="rownum" as="id" key="1" part-id="44098-3-detail-select" />
        <column table="a" column="kod_dop_contract" part-id="44098-3-detail-select" />
        <column table="a" column="kn_request" part-id="44098-3-detail-select" />
        <column table="a" column="num_ouco" part-id="44098-3-detail-select" />
        <column table="a" column="dat_ouco" part-id="44098-3-detail-select" />
        <column table="a" column="dt_contract" part-id="44098-3-detail-select" />
        <column table="a" column="num_req" part-id="44098-3-detail-select" />
        <column table="a" column="dt_request" part-id="44098-3-detail-select" />
        <column table="a" column="kurator_req" part-id="44098-3-detail-select" />
        <column table="a" column="load_type" part-id="44098-3-detail-select" />
        <column table="a" column="st_req" part-id="44098-3-detail-select" />
        <column table="a" column="creat_req_db" part-id="44098-3-detail-select" />
        <column table="a" column="req_path" part-id="44098-3-detail-select" />
        <column table="a" column="customer" part-id="44098-3-detail-select" />
        <column table="a" column="contr_kind" part-id="44098-3-detail-select" />
        <column table="a" column="contr_sum_f" part-id="44098-3-detail-select" />
        <column table="a" column="contr_sum_m" part-id="44098-3-detail-select" />
        <column table="a" column="contr_sum_e" part-id="44098-3-detail-select" />
        <column table="a" column="kn_zone" part-id="44098-3-detail-select" />
        <column table="a" column="load" part-id="44098-3-detail-select" />
        <column table="a" column="load1" part-id="44098-3-detail-select" />
        <column table="a" column="load2" part-id="44098-3-detail-select" />
        <column table="a" column="load3" part-id="44098-3-detail-select" />
        <column table="a" column="load_existed" part-id="44098-3-detail-select" />
        <column table="a" column="list_load" part-id="44098-3-detail-select" />
        <column table="a" column="list_eskl" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_uved" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_req" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_tu" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_ocen" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_proj" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_dog" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_sign" part-id="44098-3-detail-select" />
        <column table="a" column="tbl_mess" part-id="44098-3-detail-select" />
        <column table="a" column="kateg_depend" part-id="44098-3-detail-select" />
        <column table="a" column="fl_build" part-id="44098-3-detail-select" />
        <column table="a" column="filial" part-id="44098-3-detail-select" />
        <column table="a" column="kurator" part-id="44098-3-detail-select" />
        <column table="a" column="name_status" part-id="44098-3-detail-select" />
        <column table="a" column="status" part-id="44098-3-detail-select" />
        <column table="a" column="fio" part-id="44098-3-detail-select" />
        <column table="a" column="name_direct" part-id="44098-3-detail-select" />
        <column table="a" column="name_viza" part-id="44098-3-detail-select" />
        <column table="a" column="dat_post" part-id="44098-3-detail-select" />
        <column table="a" column="dat_viz" part-id="44098-3-detail-select" />
        <column table="a" column="prim" part-id="44098-3-detail-select" />
        <column table="a" column="spec_text" part-id="44098-3-detail-select" />
        <column table="a" column="tel" part-id="44098-3-detail-select" />
        <column table="a" column="dolgn" part-id="44098-3-detail-select" />
        <column table="a" column="polzov" part-id="44098-3-detail-select" />
        <column table="a" column="dpk" part-id="44098-3-detail-select" />
        <column table="a" column="ym" part-id="44098-3-detail-select" />
        <column table="a" column="dt_lack_req" part-id="44098-3-detail-select" />
        <column table="a" column="dt_lack_req_max" part-id="44098-3-detail-select" />
        <column table="a" column="dt_docs_got" part-id="44098-3-detail-select" />
        <column table="a" column="dt_pz" part-id="44098-3-detail-select" />
        <column table="a" column="dt_cost_put" part-id="44098-3-detail-select" />
        <column table="a" column="dt_project" part-id="44098-3-detail-select" />
        <column table="a" column="dt_mess" part-id="44098-3-detail-select" />
        <column table="a" column="dt_mess_too" part-id="44098-3-detail-select" />
        <column table="a" column="dt_client_proj" part-id="44098-3-detail-select" />
        <column table="a" column="dt_client_sign" part-id="44098-3-detail-select" />
        <column table="a" column="dt_pass_up" part-id="44098-3-detail-select" />
        <column table="a" column="dt_pass_eb" part-id="44098-3-detail-select" />
        <column table="a" column="dt_pass_cc" part-id="44098-3-detail-select" />
        <column table="a" column="dt_pass_od" part-id="44098-3-detail-select" />
        <column table="a" column="dt_rmo" part-id="44098-3-detail-select" />
        <column table="a" column="dt_rmo_max" part-id="44098-3-detail-select" />
        <column table="a" column="mes_req" part-id="44098-3-detail-select" />
        <column table="a" column="day_req" part-id="44098-3-detail-select" />
        <column table="a" column="srok_req" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_req" part-id="44098-3-detail-select" />
        <column table="a" column="mes_tu" part-id="44098-3-detail-select" />
        <column table="a" column="day_tu" part-id="44098-3-detail-select" />
        <column table="a" column="srok_tu" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_tu" part-id="44098-3-detail-select" />
        <column table="a" column="mes_ocen" part-id="44098-3-detail-select" />
        <column table="a" column="day_ocen" part-id="44098-3-detail-select" />
        <column table="a" column="srok_ocen" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_ocen" part-id="44098-3-detail-select" />
        <column table="a" column="mes_proj" part-id="44098-3-detail-select" />
        <column table="a" column="day_proj" part-id="44098-3-detail-select" />
        <column table="a" column="srok_proj" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_proj" part-id="44098-3-detail-select" />
        <column table="a" column="mes_dog" part-id="44098-3-detail-select" />
        <column table="a" column="day_dog" part-id="44098-3-detail-select" />
        <column table="a" column="srok_dog" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_dog" part-id="44098-3-detail-select" />
        <column table="a" column="mes_sign" part-id="44098-3-detail-select" />
        <column table="a" column="day_sign" part-id="44098-3-detail-select" />
        <column table="a" column="srok_sign" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_sign" part-id="44098-3-detail-select" />
        <column table="a" column="day_22_4_sign" part-id="44098-3-detail-select" />
        <column table="a" column="srok_22_4_sign" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_22_4_sign" part-id="44098-3-detail-select" />
        <column table="a" column="mes_mess" part-id="44098-3-detail-select" />
        <column table="a" column="day_mess" part-id="44098-3-detail-select" />
        <column table="a" column="srok_mess" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_mess" part-id="44098-3-detail-select" />
        <column table="a" column="mes_client_proj" part-id="44098-3-detail-select" />
        <column table="a" column="day_client_proj" part-id="44098-3-detail-select" />
        <column table="a" column="mes_all" part-id="44098-3-detail-select" />
        <column table="a" column="day_all" part-id="44098-3-detail-select" />
        <column table="a" column="srok_all" part-id="44098-3-detail-select" />
        <column table="a" column="otkl_all" part-id="44098-3-detail-select" />
        <column table="a" column="dat_lkk" part-id="44098-3-detail-select" />
        <column table="a" column="dt_sogl_dog" part-id="44098-3-detail-select" />
        <column table="a" column="dt_podp_dog" part-id="44098-3-detail-select" />
        <column table="a" column="dt_podp_dog_ep" part-id="44098-3-detail-select" />
        <column table="a" column="fio_podp_dog" part-id="44098-3-detail-select" />
        <column table="a" column="fio_kont" part-id="44098-3-detail-select" />
        <column table="a" column="e_mail_kont" part-id="44098-3-detail-select" />
        <column table="a" column="phone_kont" part-id="44098-3-detail-select" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" part-id="44098-3-detail_from" />
        <query name="44098-ltype2" join="left outer" as="lt" part-id="44098-3-detail_from">
          <call function="and">
            <call function="=">
              <column table="a" column="list_load" />
              <column table="lt" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="in" part-id="44098-3-detail-where">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge" part-id="44098-3-detail-where">
            <call function="coalesce">
              <column table="a" column="dt_client_proj" />
              <column table="a" column="dt_mess" />
              <column table="a" column="dt_podp_dog" />
              <column table="a" column="dt_sogl_dog" />
              <column table="a" column="dt_project" />
              <column table="a" column="dt_cost_put" />
              <column table="a" column="dt_pz" />
              <column table="a" column="dt_docs_got" />
              <column table="a" column="dt_request" />
            </call>
            <useparam name="p_dt1" />
          </call>
          <call function="le" part-id="44098-3-detail-where">
            <column table="a" column="dt_request" />
            <useparam name="p_dt2" />
          </call>
          <call function="=">
            <column table="lt" column="id" />
            <useparam name="p_list_type" />
          </call>
        </call>
      </where>
    </query>
    <query name="44098-dt3" timestamp="12.03.2018 10:29:18" use-repository="1">
      <select>
        <const as="dt3" type="date">date'2017-01-01'</const>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="44098-4" timestamp="24.05.2018 13:29:58" use-repository="1" order="num_req">
      <params>
        <param name="p_dt3" type="date">
          <const>to_date('19.03.2018','DD.MM.YYYY')</const>
        </param>
        <param name="p_dt4" type="date">
          <const>to_date('26.03.2018','DD.MM.YYYY')</const>
        </param>
        <param name="load_type_id" type="array" />
        <param name="kod_subject" type="array" />
        <param name="p_power_gt" type="number" />
        <param name="p_power_ls" type="number" />
      </params>
      <select>
        <call function="rownum" as="id" key="1" />
        <column table="a" column="kod_dop_contract" />
        <column table="a" column="kn_request" />
        <column table="a" column="num_ouco" />
        <column table="a" column="dat_ouco" />
        <column table="a" column="dt_contract" />
        <column table="a" column="num_req" />
        <column table="a" column="dt_request" />
        <column table="a" column="kurator_req" />
        <column table="a" column="load_type" />
        <column table="a" column="st_req" />
        <column table="a" column="creat_req_db" />
        <column table="a" column="req_path" />
        <column table="a" column="customer" />
        <column table="a" column="contr_kind" />
        <column table="a" column="contr_sum_f" />
        <column table="a" column="contr_sum_m" />
        <column table="a" column="contr_sum_e" />
        <column table="a" column="kn_zone" />
        <column table="a" column="load" />
        <column table="a" column="load1" />
        <column table="a" column="load2" />
        <column table="a" column="load3" />
        <column table="a" column="load_existed" />
        <column table="a" column="list_load" />
        <column table="a" column="list_eskl" />
        <column table="a" column="tbl_uved" />
        <column table="a" column="tbl_req" />
        <column table="a" column="tbl_tu" />
        <column table="a" column="tbl_ocen" />
        <column table="a" column="tbl_proj" />
        <column table="a" column="tbl_dog" />
        <column table="a" column="tbl_sign" />
        <column table="a" column="tbl_mess" />
        <column table="a" column="kateg_depend" />
        <column table="a" column="fl_build" />
        <column table="a" column="filial" />
        <column table="a" column="kurator" />
        <column table="a" column="name_status" />
        <column table="a" column="status" />
        <column table="a" column="fio" />
        <column table="a" column="name_direct" />
        <column table="a" column="name_viza" />
        <column table="a" column="dat_post" />
        <column table="a" column="dat_viz" />
        <column table="a" column="prim" />
        <column table="a" column="spec_text" />
        <column table="a" column="tel" />
        <column table="a" column="dolgn" />
        <column table="a" column="polzov" />
        <column table="a" column="dpk" />
        <column table="a" column="ym" />
        <column table="a" column="dt_lack_req" />
        <column table="a" column="dt_lack_req_max" />
        <column table="a" column="dt_docs_got" />
        <column table="a" column="dt_pz" />
        <column table="a" column="dt_cost_put" />
        <column table="a" column="dt_project" />
        <column table="a" column="dt_mess" />
        <column table="a" column="dt_mess_too" />
        <column table="a" column="dt_client_proj" />
        <column table="a" column="dt_client_sign" />
        <column table="a" column="dt_pass_up" />
        <column table="a" column="dt_pass_eb" />
        <column table="a" column="dt_pass_cc" />
        <column table="a" column="dt_pass_od" />
        <column table="a" column="dt_rmo" />
        <column table="a" column="dt_rmo_max" />
        <column table="a" column="mes_req" />
        <column table="a" column="day_req" />
        <column table="a" column="srok_req" />
        <column table="a" column="otkl_req" />
        <column table="a" column="mes_tu" />
        <column table="a" column="day_tu" />
        <column table="a" column="srok_tu" />
        <column table="a" column="otkl_tu" />
        <column table="a" column="mes_ocen" />
        <column table="a" column="day_ocen" />
        <column table="a" column="srok_ocen" />
        <column table="a" column="otkl_ocen" />
        <column table="a" column="mes_proj" />
        <column table="a" column="day_proj" />
        <column table="a" column="srok_proj" />
        <column table="a" column="otkl_proj" />
        <column table="a" column="mes_dog" />
        <column table="a" column="day_dog" />
        <column table="a" column="srok_dog" />
        <column table="a" column="otkl_dog" />
        <column table="a" column="mes_sign" />
        <column table="a" column="day_sign" />
        <column table="a" column="srok_sign" />
        <column table="a" column="otkl_sign" />
        <column table="a" column="day_22_4_sign" />
        <column table="a" column="srok_22_4_sign" />
        <column table="a" column="otkl_22_4_sign" />
        <column table="a" column="mes_mess" />
        <column table="a" column="day_mess" />
        <column table="a" column="srok_mess" />
        <column table="a" column="otkl_mess" />
        <column table="a" column="mes_client_proj" />
        <column table="a" column="day_client_proj" />
        <column table="a" column="mes_all" />
        <column table="a" column="day_all" />
        <column table="a" column="srok_all" />
        <column table="a" column="otkl_all" />
        <column table="a" column="dat_lkk" />
        <column table="a" column="dt_sogl_dog" />
        <column table="a" column="dt_podp_dog" />
        <column table="a" column="dt_podp_dog_ep" />
        <column table="a" column="fio_podp_dog" />
        <column table="a" column="fio_kont" />
        <column table="a" column="e_mail_kont" />
        <column table="a" column="phone_kont" />
        <column table="a" column="region" type="string" title="" />
        <call as="kod_subject" function="case" type="number">
          <call function="when">
            <call function="=">
              <column table="a" column="region" />
              <const>'Город'</const>
            </call>
            <const>0</const>
          </call>
          <item />
          <call function="when">
            <call function="=">
              <column table="a" column="region" />
              <const>'Область'</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="a" column="lp_addr" type="string" title="" />
        <column table="a" column="zayav_status" type="string" title="" />
        <column table="a" column="name_obj" type="string" title="" />
        <column table="a" column="dt_atp_ready" type="date" title="" />
        <column table="a" column="dt_atp_signed" type="date" title="" />
        <column table="a" column="dt_atp_sogl" type="date" title="" />
        <column table="a" column="dt_atp_signed_le" type="date" title="" />
        <column table="a" column="dt_atp_signed_to_eskl" type="date" title="" />
        <column table="a" column="dt_reg" type="date" title="" />
        <column table="a" column="dt_delivery" type="date" title="" />
        <column table="a" column="atp_num" type="number" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="ge" optional="1">
            <column table="a" column="dt_request" />
            <useparam name="p_dt3" />
          </call>
          <call function="le" optional="1">
            <column table="a" column="dt_request" />
            <useparam name="p_dt4" />
          </call>
          <call function="in" optional="1">
            <column table="a" column="load_type_kod" />
            <useparam name="load_type_id" />
          </call>
          <call function="in" optional="1">
            <column table="this" column="kod_subject" />
            <useparam name="kod_subject" />
          </call>
          <call function="ge" optional="1">
            <column table="a" column="load" />
            <useparam name="p_power_gt" />
          </call>
          <call function="le" optional="1">
            <column table="a" column="load" />
            <useparam name="p_power_ls" />
          </call>
        </call>
      </where>
    </query>
    <query name="47106-dt1" timestamp="26.04.2018 17:28:23" use-repository="1">
      <select>
        <call table="a" column="ym2" function="trunc" type="date" as="dt1">
          <call function="sysdate" />
          <const>'MM'</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="44098-direct-det-ltype" timestamp="01.05.2018 12:11:25" use-repository="1" order="kod_predpr, id_podr">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_predpr" />
        <column table="a" column="name_kr" />
        <column table="a" column="id_podr" as="id_podr" />
        <column table="a" column="name_podr" as="name_podr" />
        <column table="lt" column="load" />
        <column table="lt" column="id" as="lt_id" />
      </select>
      <from>
        <query name="44098-direct-det" as="a" />
        <query name="44098-ltype2" as="lt" join="cross" />
      </from>
    </query>
    <query name="44098-3-1-pre" timestamp="01.05.2018 12:19:46" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_docs_got" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_docs_got" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <column table="a" column="day_req" />
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-1" timestamp="24.09.2018 14:58:04" use-repository="1" order="kod_predpr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="filial" exclude="1" />
        <column table="dr" column="kod_predpr" />
        <column table="dr" column="name_kr" as="filial" />
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="sum" as="sum_0_2" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_req" />
            <const>0</const>
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_3_4" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_req" />
            <const>3</const>
            <const>4</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_5_6" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_req" />
            <const>5</const>
            <const>6</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_6" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_req" />
            <const>6</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_2" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_req" />
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_2" nvl="0">
          <column table="this" column="sum_more_2" />
          <column table="this" column="sum_all" />
        </call>
      </select>
      <from>
        <query name="44098-3-1-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-direct-ltype" timestamp="01.05.2018 12:13:09" use-repository="1">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_predpr" />
        <column table="a" column="name_kr" />
        <column table="lt" column="load" />
        <column table="lt" column="id" as="lt_id" />
      </select>
      <from>
        <query as="a" name="44098-direct" />
        <query name="44098-ltype2" as="lt" join="cross" />
      </from>
    </query>
    <query name="44098-3-2-pre" timestamp="01.05.2018 12:57:21" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_pz" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_pz" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <column table="a" column="day_tu" />
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-2" timestamp="01.05.2018 13:04:56" use-repository="1" order="kod_predpr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="filial" exclude="1" />
        <column table="dr" column="kod_predpr" />
        <call function="if" type="string" as="filial">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <column table="dr" column="name_kr" />
          <call function="||">
            <const>'ОПТУ + '</const>
            <column table="dr" column="name_kr" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="sum" as="sum_0_4" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_tu" />
            <const>0</const>
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>4</const>
              <const>8</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_5_10" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_tu" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>5</const>
              <const>9</const>
            </call>
            <const>10</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_11_15" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_tu" />
            <const>11</const>
            <const>15</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_16_20" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_tu" />
            <const>16</const>
            <const>20</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_20" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_tu" />
            <const>20</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_4" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_tu" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>4</const>
              <const>8</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_4" nvl="0">
          <column table="this" column="sum_more_4" />
          <column table="this" column="sum_all" />
        </call>
        <call function="if" type="string" as="col_name1" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'0-4 к.д'</const>
          <const>'0-8 к.д'</const>
        </call>
        <call function="if" type="string" as="col_name2" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'5-10 к.д'</const>
          <const>'9-10 к.д'</const>
        </call>
        <call function="if" type="number" as="num_days" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>4</const>
          <const>8</const>
        </call>
      </select>
      <from>
        <query name="44098-3-2-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-3-3-pre" timestamp="01.05.2018 13:09:01" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_cost_put" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_cost_put" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <column table="a" column="day_ocen" />
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-3" timestamp="01.05.2018 13:18:15" use-repository="1" order="kod_predpr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="filial" exclude="1" />
        <column table="dr" column="kod_predpr" />
        <call function="if" type="string" as="filial">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <column table="dr" column="name_kr" />
          <call function="||">
            <const>'ДЭТП по '</const>
            <column table="dr" column="name_kr" />
          </call>
        </call>
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="sum" as="sum_0_2" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_ocen" />
            <const>0</const>
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_3_4" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_ocen" />
            <const>3</const>
            <const>4</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_3_5" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_ocen" />
            <const>3</const>
            <const>5</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_5_6" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_ocen" />
            <const>5</const>
            <const>6</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_7_8" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_ocen" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>7</const>
              <const>6</const>
            </call>
            <const>8</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_8" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_ocen" />
            <const>8</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_2" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_ocen" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>2</const>
              <const>5</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_2" nvl="0">
          <column table="this" column="sum_more_2" />
          <column table="this" column="sum_all" />
        </call>
        <call function="if" type="string" as="col_name" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'7-8 к.д'</const>
          <const>'6-8 к.д'</const>
        </call>
        <call function="if" type="number" as="num_days" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>2</const>
          <const>5</const>
        </call>
      </select>
      <from>
        <query name="44098-3-3-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-3-4-pre" timestamp="01.05.2018 13:25:39" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_project" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_project" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <column table="a" column="day_proj" />
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-4" timestamp="01.05.2018 13:29:04" use-repository="1" order="kod_predpr, id_podr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="dr" column="kod_predpr" />
        <column table="dr" column="name_kr" as="filial" />
        <call function="over" as="sum_filial" type="number">
          <call function="count">
            <column table="a" column="kod_dop_contract" />
          </call>
          <call function="partition by">
            <column table="dr" column="name_kr" />
          </call>
        </call>
        <column table="dr" column="id_podr" />
        <column table="dr" column="name_podr" as="podr_for_vks" />
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="sum" as="sum_0_2" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_proj" />
            <const>0</const>
            <const>2</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_3_5" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_proj" />
            <const>3</const>
            <const>5</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_3_4" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_proj" />
            <const>3</const>
            <const>4</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_5_6" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_proj" />
            <const>5</const>
            <const>6</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_7_8" type="number" nvl="0">
          <call function="between">
            <column table="a" column="day_proj" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>7</const>
              <const>6</const>
            </call>
            <const>8</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_8" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_proj" />
            <const>8</const>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_2" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_proj" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>2</const>
              <const>5</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_2" nvl="0">
          <column table="this" column="sum_more_2" />
          <column table="this" column="sum_all" />
        </call>
        <call function="if" type="string" as="col_name" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'7-8 к.д'</const>
          <const>'6-8 к.д'</const>
        </call>
        <call function="if" type="number" as="num_days" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>2</const>
          <const>5</const>
        </call>
      </select>
      <from>
        <query name="44098-3-4-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-det-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="podr_for_vks" />
              <column table="dr" column="name_podr" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
              <column table="this" column="id_podr" />
              <column table="this" column="podr_for_vks" />
              <column table="this" column="sum_filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-3-5-pre" timestamp="01.05.2018 13:35:23" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_podp_dog" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_podp_dog" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <call function="if">
              <call function="is null">
                <call function="nvl">
                  <column table="a" column="day_dog" />
                  <column table="a" column="day_sign" />
                </call>
              </call>
              <const>null</const>
              <call function="+nvl">
                <column table="a" column="day_dog" />
                <column table="a" column="day_sign" />
              </call>
            </call>
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-5" timestamp="03.05.2018 11:48:45" use-repository="1" order="kod_predpr, id_podr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="dr" column="kod_predpr" />
        <column table="dr" column="name_kr" as="filial" />
        <call function="over" as="sum_filial" type="number">
          <call function="count">
            <column table="a" column="kod_dop_contract" />
          </call>
          <call function="partition by">
            <column table="dr" column="name_kr" />
          </call>
        </call>
        <column table="dr" column="id_podr" />
        <column table="dr" column="name_podr" as="podr_for_vks" />
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="sum" as="sum_0_2" type="number" nvl="0">
          <call function="between">
            <call function="if">
              <call function="is null">
                <call function="nvl">
                  <column table="a" column="day_dog" />
                  <column table="a" column="day_sign" />
                </call>
              </call>
              <const>null</const>
              <call function="+nvl">
                <column table="a" column="day_dog" />
                <column table="a" column="day_sign" />
              </call>
            </call>
            <const>0</const>
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>2</const>
              <const>3</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" group="sum" as="sum_more_2" type="number" nvl="0">
          <call function="gt">
            <call function="if">
              <call function="is null">
                <call function="nvl">
                  <column table="a" column="day_dog" />
                  <column table="a" column="day_sign" />
                </call>
              </call>
              <const>null</const>
              <call function="+nvl">
                <column table="a" column="day_dog" />
                <column table="a" column="day_sign" />
              </call>
            </call>
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>2</const>
              <const>3</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_2" nvl="0">
          <column table="this" column="sum_more_2" />
          <column table="this" column="sum_all" />
        </call>
        <call function="if" type="string" as="col_name1" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'0-2 к.д'</const>
          <const>'0-3 к.д'</const>
        </call>
        <call function="if" type="string" as="col_name2" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>'более 2 к.д.'</const>
          <const>'более 3 к.д.'</const>
        </call>
        <call function="if" type="number" as="num_days" group="max">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>2</const>
          <const>3</const>
        </call>
      </select>
      <from>
        <query name="44098-3-5-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-det-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="podr_podp_for_vks" />
              <column table="dr" column="name_podr" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
              <column table="this" column="id_podr" />
              <column table="this" column="podr_for_vks" />
              <column table="this" column="sum_filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-3-6-pre" timestamp="01.05.2018 13:37:01" use-repository="1">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="isv_viza_abon" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="in">
            <column table="a" column="load_type_kod" />
            <array>1,2,33,36,9,17</array>
          </call>
          <call function="ge">
            <column table="a" column="dt_mess" />
            <useparam name="p_dt1" />
          </call>
          <call function="le">
            <column table="a" column="dt_mess" />
            <useparam name="p_dt2" />
          </call>
          <call function="ge">
            <column table="a" column="day_all" />
            <const name="p_dt2">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="44098-3-6" timestamp="01.05.2018 13:39:52" use-repository="1" order="kod_predpr">
      <params>
        <usepart part="44098-params" />
      </params>
      <select>
        <column table="dr" column="kod_predpr" />
        <column table="dr" column="name_kr" as="filial" />
        <column table="a" column="kod_dop_contract" group="count" as="sum_all" />
        <call function="if" group="max" type="number" as="num_days">
          <call function="=">
            <useparam table="a" column="list_load" name="p_list_type" />
            <const>1</const>
          </call>
          <const>15</const>
          <const>20</const>
        </call>
        <call function="if" as="sum_less_15" group="sum" type="number" nvl="0">
          <call function="le">
            <column table="a" column="day_all" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>15</const>
              <const>20</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="sum_more_15" group="sum" type="number" nvl="0">
          <call function="gt">
            <column table="a" column="day_all" />
            <call function="if" type="number">
              <call function="=">
                <useparam table="a" column="list_load" name="p_list_type" />
                <const>1</const>
              </call>
              <const>15</const>
              <const>20</const>
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="/" as="percent_more_15" nvl="0">
          <column table="this" column="sum_more_15" />
          <column table="this" column="sum_all" />
        </call>
      </select>
      <from>
        <query name="44098-3-6-pre" as="a">
          <withparams>
            <usepart part="44098-useparams" />
          </withparams>
        </query>
        <query name="44098-direct-ltype" join="right outer" as="dr">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_filial" />
              <column table="dr" column="kod_direct" />
            </call>
            <call function="=">
              <column table="a" column="list_load" />
              <column table="dr" column="load" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="dr" column="lt_id" />
          <useparam name="p_list_type" />
        </call>
      </where>
      <grouping materialize-type="temp-table">
        <grset as="itog" title="Итог">
          <grset as="det" title="По филиалам">
            <group>
              <column table="this" column="kod_predpr" />
              <column table="this" column="filial" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="44098-3-49576-detail" timestamp="02.10.2018 14:26:54" use-repository="1">
      <params>
        <usepart part="44098-3-49576-params" />
      </params>
      <select>
        <usepart part="44098-3-detail-select" />
      </select>
      <from>
        <usepart part="44098-3-detail_from" />
      </from>
      <where>
        <call function="and">
          <usepart part="44098-3-detail-where" />
          <call function="in" optional="1" exclude="1">
            <column table="lt" column="id" />
            <useparam name="p_list_type" />
          </call>
        </call>
      </where>
    </query>
  </queries>
  <forms>
    <form name="44098" timestamp="22.01.2018 12:17:22">
      <content>
        <usefield field="cmn_combo_num" name="p_list_type" title="Группа" column-mandatory="1">
          <listquery>
            <query name="44098-ltype" />
          </listquery>
        </usefield>
        <fieldgroup title="Регистрация заявки">
          <usefield field="cmn_date" name="p_dt3" title="С">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt4" title="По">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Период времени (для этапов)">
          <usefield field="cmn_date" name="p_dt1" title="С" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt2" title="По" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <usefield name="p_dt_vld" field="cmn_string" column-visible="0">
          <defaultquery>
            <query name="44098-dt_vld" />
          </defaultquery>
        </usefield>
      </content>
    </form>
    <form name="44098-3" timestamp="25.09.2018 14:17:26">
      <content>
        <usefield field="cmn_combo_num" name="p_list_type" title="Мощность" column-mandatory="1" type="number">
          <listquery>
            <query name="44098-ltype2" />
          </listquery>
        </usefield>
        <fieldgroup title="Регистрация заявки" exclude="1">
          <usefield field="cmn_date" name="p_dt3" title="С">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt4" title="По">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Период времени (для этапов)" exclude="1">
          <usefield field="cmn_date" name="p_dt1" title="С" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt2" title="По" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Период времени (для этапов)">
          <usefield field="cmn_date" name="p_dt1" title="С" column-mandatory="1">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt2" title="По" column-mandatory="1">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <usefield name="p_dt_vld" field="cmn_string" column-visible="0" exclude="1">
          <defaultquery>
            <query name="44098-dt_vld" />
          </defaultquery>
        </usefield>
      </content>
    </form>
    <form name="4409" timestamp="07.03.2018 11:44:57">
      <content>
        <usefield field="cmn_combo_num" name="p_list_type" title="Группа" column-mandatory="1">
          <listquery>
            <query name="44098-ltype" />
          </listquery>
        </usefield>
        <fieldgroup title="Регистрация заявки">
          <usefield field="cmn_date" name="p_dt3" title="С">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt4" title="По">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Период времени (для этапов)">
          <usefield field="cmn_date" name="p_dt1" title="С" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt2" title="По" column-mandatory="1" valid="p_dt_vld">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <usefield name="p_dt_vld" field="cmn_string" column-visible="0">
          <defaultquery>
            <query name="44098-dt_vld" />
          </defaultquery>
        </usefield>
      </content>
    </form>
    <form name="44098-4" timestamp="24.05.2018 13:25:16">
      <content>
        <fieldgroup title="Регистрация заявки">
          <usefield field="cmn_date" name="p_dt3" title="С">
            <defaultquery>
              <query name="44098-dt3" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt4" title="По">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <usefield field="load_type" title="Тип заявки" />
        <usefield field="ipr_subject" />
        <fieldgroup title="Нагрузка всего">
          <usefield field="cmn_float" title="C" name="p_power_gt" />
          <usefield name="p_power_ls" title="По" field="cmn_float" />
          <field name="p_power_gt" type="number" controlType="UINumber" edit-mask="f" title="С" exclude="1" />
          <field title="По" name="p_power_ls" type="number" controlType="UINumber" edit-mask="f" step="0" exclude="1" />
        </fieldgroup>
      </content>
    </form>
    <form name="44098-3-49576" timestamp="02.10.2018 14:24:46">
      <content>
        <fieldgroup title="Период времени (для этапов)">
          <usefield field="cmn_date" name="p_dt1" title="С" column-mandatory="1">
            <defaultquery>
              <query name="44098-dt1" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_date" name="p_dt2" title="По" column-mandatory="1">
            <defaultquery>
              <query name="44098-dt2" />
            </defaultquery>
          </usefield>
        </fieldgroup>
      </content>
    </form>
  </forms>
  <parts>
    <part id="44098-3-49576-params" timestamp="02.10.2018 14:24:59">
      <param name="p_dt1" type="date">
        <const>date'2018-03-01'</const>
      </param>
      <param name="p_dt2" type="date">
        <const>date'2018-03-30'</const>
      </param>
    </part>
    <part id="44098-3-49576-withparams" timestamp="02.10.2018 14:25:13">
      <useparam name="p_dt1" />
      <useparam name="p_dt2" />
    </part>
  </parts>
</root>