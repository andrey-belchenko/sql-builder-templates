<?xml version="1.0" encoding="utf-8"?>
<root timestamp="2025-07-10T22:21:12.8688639+03:00">
  <customers child-name="customer" key-name="id" />
  <queries child-name="query" key-name="name">
    <query name="va_cons01" timestamp="06.02.2018 20:34:43" is-report="1" use-repository="1" edit-columns="1" allow-save="1" params-customization="1" title="Данные для расчета КПЭ" comment="Сводный отчет. Данные для расчета КПЭ" file="sql.builder.templates\sql.builder\projects\mped\analysis\va_anl1.xml">
      <content>
        <usefield field="va_god" />
        <fieldgroup title="Год ">
          <usefield field="va_god1" name="p_gode1" title="C" column-visible="0" />
          <usefield field="va_god1" name="p_gode2" title="По" column-visible="0" />
        </fieldgroup>
        <fieldgroup title="Месяц">
          <usefield field="va_mes1" />
          <usefield field="va_mes12" />
        </fieldgroup>
        <usefield field="va_direct1" column-mandatory="1" title="Головное подразделение" />
        <usefield field="va_direct2" title="Подразделение" column-visible="0" />
      </content>
      <params exclude="1">
        <param name="p_god" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes1" type="number">
          <const>1</const>
        </param>
        <param name="p_mes2" type="number">
          <const>12</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>0</const>
        </param>
      </params>
      <expressions comment="факты для расчета прибыли" part-id="va_cons01-expressions">
        <call function="=" as="is_21" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>21</const>
        </call>
        <call as="i_fact021" function="()" group="sum" type="number" title="Доход НД план">
          <fact column="va_plan_smet_val" condition="is_21" />
        </call>
        <call as="i_fact121" function="()" group="sum" type="number" title="Доход НД факт">
          <fact column="va_smet_vvod_val" condition="is_21" />
        </call>
        <call function="=" as="is_22" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>22</const>
        </call>
        <call as="i_fact022" function="()" group="sum" type="number" title="Расход ОД план">
          <fact column="va_plan_smet_val" condition="is_22" />
        </call>
        <call as="i_fact122" function="()" group="sum" type="number" title="Расход ОД факт">
          <fact column="va_smet_vvod_val" condition="is_22" />
        </call>
        <call function="=" as="is_23" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>23</const>
        </call>
        <call as="i_fact023" function="()" group="sum" type="number" title="Расход НД план">
          <fact column="va_plan_smet_val" condition="is_23" />
        </call>
        <call as="i_fact123" function="()" group="sum" type="number" title="Расход НД факт">
          <fact column="va_smet_vvod_val" condition="is_23" />
        </call>
        <call function="=" as="is_24" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>24</const>
        </call>
        <call as="i_fact024" function="()" group="sum" type="number" title="Доход проц план">
          <fact column="va_plan_smet_val" condition="is_24" />
        </call>
        <call as="i_fact124" function="()" group="sum" type="number" title="Доход проц факт">
          <fact column="va_smet_vvod_val" condition="is_24" />
        </call>
        <call function="=" as="is_25" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>25</const>
        </call>
        <call as="i_fact025" function="()" group="sum" type="number" title="Расход проц план">
          <fact column="va_plan_smet_val" condition="is_25" />
        </call>
        <call as="i_fact125" function="()" group="sum" type="number" title="Расход проц факт">
          <fact column="va_smet_vvod_val" condition="is_25" />
        </call>
        <call function="=" as="is_26" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>26</const>
        </call>
        <call as="i_fact026" function="()" group="sum" type="number" title="Доход прочие план">
          <fact column="va_plan_smet_val" condition="is_26" />
        </call>
        <call as="i_fact126" function="()" group="sum" type="number" title="Доход прочие факт">
          <fact column="va_smet_vvod_val" condition="is_26" />
        </call>
        <call function="=" as="is_27" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>27</const>
        </call>
        <call as="i_fact027" function="()" group="sum" type="number" title="Расход прочие план">
          <fact column="va_plan_smet_val" condition="is_27" />
        </call>
        <call as="i_fact127" function="()" group="sum" type="number" title="Расход прочие факт">
          <fact column="va_smet_vvod_val" condition="is_27" />
        </call>
      </expressions>
      <expressions comment="факты для расчета ebitda" part-id="va_cons01-expressions">
        <call function="=" as="is_28" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>28</const>
        </call>
        <call as="i_fact028" function="()" group="sum" type="number" title="Амортизация план">
          <fact column="va_plan_smet_val" condition="is_28" />
        </call>
        <call as="i_fact128" function="()" group="sum" type="number" title="Амортизация факт">
          <fact column="va_smet_vvod_val" condition="is_28" />
        </call>
        <call function="=" as="is_29" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>29</const>
        </call>
        <call as="i_fact029" function="()" group="sum" type="number" title="Расход коммерч  план">
          <fact column="va_plan_smet_val" condition="is_29" />
        </call>
        <call as="i_fact129" function="()" group="sum" type="number" title="Расход коммерч факт">
          <fact column="va_smet_vvod_val" condition="is_29" />
        </call>
        <call function="=" as="is_30" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>30</const>
        </call>
        <call as="i_fact030" function="()" group="sum" type="number" title="Расход управл план">
          <fact column="va_plan_smet_val" condition="is_30" />
        </call>
        <call as="i_fact130" function="()" group="sum" type="number" title="Расход управл факт">
          <fact column="va_smet_vvod_val" condition="is_30" />
        </call>
      </expressions>
      <expressions comment="управляемые расходы" part-id="va_cons01-expressions">
        <call function="=" as="is_01" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>01</const>
        </call>
        <call as="i_fact201" function="()" group="sum" type="number" title="Расход опл труд план">
          <fact column="va_plan_smet_val" condition="is_01" />
        </call>
        <call as="i_fact301" function="()" group="sum" type="number" title="Расход опл труд факт">
          <fact column="va_smet_vvod_val" condition="is_01" />
        </call>
        <call function="=" as="is_02" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>02</const>
        </call>
        <call as="i_fact202" function="()" group="sum" type="number" title="Расход ремонт план">
          <fact column="va_plan_smet_val" condition="is_02" />
        </call>
        <call as="i_fact302" function="()" group="sum" type="number" title="Расход ремонт факт">
          <fact column="va_smet_vvod_val" condition="is_02" />
        </call>
        <call function="=" as="is_03" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>03</const>
        </call>
        <call as="i_fact203" function="()" group="sum" type="number" title="Расход сервис контр план">
          <fact column="va_plan_smet_val" condition="is_03" />
        </call>
        <call as="i_fact303" function="()" group="sum" type="number" title="Расход сервис контр факт">
          <fact column="va_smet_vvod_val" condition="is_03" />
        </call>
        <call function="=" as="is_04" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>04</const>
        </call>
        <call as="i_fact204" function="()" group="sum" type="number" title="Расход прочие управл план">
          <fact column="va_plan_smet_val" condition="is_04" />
        </call>
        <call as="i_fact304" function="()" group="sum" type="number" title="Расход прочие управл факт">
          <fact column="va_smet_vvod_val" condition="is_04" />
        </call>
        <call function="=" as="is_31" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>31</const>
        </call>
        <call as="i_fact231" function="()" group="sum" type="number" title="Расход управл усл пост план">
          <fact column="va_plan_smet_val" condition="is_31" />
        </call>
        <call as="i_fact331" function="()" group="sum" type="number" title="Расход управл усл пост факт">
          <fact column="va_smet_vvod_val" condition="is_31" />
        </call>
      </expressions>
      <expressions comment="доходы основная деятельность" part-id="va_cons01-expressions">
        <call as="i_fact001" function="()" group="sum" type="number" title="Доход ОД план">
          <fact column="va_dohod_val_p" column-width="111" title="План" />
        </call>
        <call as="i_fact002" function="()" group="sum" type="number" title="Доход ОД факт">
          <fact column="va_dohod_val_f" column-width="111" title="План" />
        </call>
      </expressions>
      <expressions comment="доходы от участия  в других организациях" part-id="va_cons01-expressions">
        <call function="=" as="is_81" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>81</const>
        </call>
        <call as="i_fact007" function="()" group="sum" type="number" title="Доход уч др орг  план">
          <fact column="va_plan_smet_val" condition="is_81" />
        </call>
        <call as="i_fact008" function="()" group="sum" type="number" title="Доход  уч др орг  факт">
          <fact column="va_smet_vvod_val" condition="is_81" />
        </call>
      </expressions>
      <expressions comment="расчет выручки" part-id="va_cons01-expressions">
        <call as="i_fact011" function="+nvl" group="sum" type="number" title="выручка план">
          <fact column="i_fact001" column-width="111" />
          <fact column="i_fact021" column-width="111" />
        </call>
        <call as="i_fact012" function="+nvl" group="sum" type="number" title="выручка факт">
          <fact column="i_fact002" column-width="111" />
          <fact column="i_fact121" column-width="111" />
        </call>
      </expressions>
      <expressions comment="расчет прибыли" part-id="va_cons01-expressions">
        <call as="i_fact003" function="-nvl" group="sum" type="number" title="прибыль до нал план">
          <call function="+nvl">
            <fact column="i_fact001" column-width="111" />
            <fact column="i_fact021" column-width="111" />
            <fact column="i_fact026" column-width="111" />
            <fact column="i_fact024" column-width="111" />
          </call>
          <call function="+nvl">
            <fact column="i_fact022" column-width="111" />
            <fact column="i_fact023" column-width="111" />
            <fact column="i_fact027" column-width="111" />
            <fact column="i_fact025" column-width="111" />
          </call>
        </call>
        <call as="i_fact004" function="-nvl" group="sum" type="number" title="прибыль до нал факт">
          <call function="+nvl">
            <fact column="i_fact002" column-width="111" />
            <fact column="i_fact121" column-width="111" />
            <fact column="i_fact126" column-width="111" />
            <fact column="i_fact124" column-width="111" />
          </call>
          <call function="+nvl">
            <fact column="i_fact122" column-width="111" />
            <fact column="i_fact123" column-width="111" />
            <fact column="i_fact127" column-width="111" />
            <fact column="i_fact125" column-width="111" />
          </call>
        </call>
        <call function="-nvl" group="sum" as="i_fact005" title="ЧП план" type="number">
          <fact column="i_fact003" />
          <call function="*">
            <fact column="i_fact003" />
            <const>0.2</const>
          </call>
        </call>
        <call function="-nvl" group="sum" as="i_fact006" title="ЧП факт" type="number">
          <fact column="i_fact004" />
          <call function="*">
            <fact column="i_fact004" />
            <const>0.2</const>
          </call>
        </call>
      </expressions>
      <expressions comment="расчет EBITDA" part-id="va_cons01-expressions">
        <call as="i_fact009" function="-nvl" group="sum" type="number" title="EBITDA план">
          <call function="+nvl">
            <fact column="i_fact003" column-width="111" />
            <fact column="i_fact025" column-width="111" />
            <fact column="i_fact028" column-width="111" />
          </call>
          <call function="+nvl">
            <fact column="i_fact024" column-width="111" />
            <fact column="i_fact007" column-width="111" />
            <fact column="i_fact029" column-width="111" />
            <fact column="i_fact030" column-width="111" />
          </call>
        </call>
        <call as="i_fact010" function="-nvl" group="sum" type="number" title="EBITDA факт">
          <call function="+nvl">
            <fact column="i_fact004" column-width="111" />
            <fact column="i_fact125" column-width="111" />
            <fact column="i_fact128" column-width="111" />
          </call>
          <call function="+nvl">
            <fact column="i_fact124" column-width="111" />
            <fact column="i_fact008" column-width="111" />
            <fact column="i_fact129" column-width="111" />
            <fact column="i_fact130" column-width="111" />
          </call>
        </call>
        <call function="*" as="i_exp001" title="Рентабельность по EBITDA план" format="F0" group="outer">
          <call function="/">
            <fact table="a" column="i_fact009" column-width="111" />
            <fact table="a" column="i_fact011" column-width="111" />
          </call>
          <const>100</const>
        </call>
        <call function="*" as="i_exp002" title="Рентабельность по EBITDA факт" format="F0" group="outer">
          <call function="/">
            <fact table="a" column="i_fact010" column-width="111" />
            <fact table="a" column="i_fact012" column-width="111" />
          </call>
          <const>100</const>
        </call>
      </expressions>
      <expressions comment="численность персонала" part-id="va_cons01-expressions">
        <call as="i_fact013" function="()" group="sum" type="number" title="Численность персонала план">
          <fact table="a" column="va_cnt_perc_plan_summa" column-width="111" title="План" />
        </call>
        <call as="i_fact014" function="if" group="sum" type="number" title="Численность персонала факт">
          <call function="=">
            <column table="va_vvod" column="field" />
            <const>'popul_podr'</const>
          </call>
          <fact table="a" column="va_vvod_summa" column-width="111" title="Факт" />
        </call>
        <call as="i_fact015" function="()" group="min" type="number" title="Численность персонала план мин месяц">
          <fact table="a" column="va_cnt_perc_plan_ym_min" column-width="111" title="План" />
        </call>
        <call as="i_fact017" function="()" group="max" type="number" title="Численность персонала план макс месяц">
          <fact table="a" column="va_cnt_perc_plan_ym_max" column-width="111" title="План" />
        </call>
        <call as="i_fact016" function="if" group="min" type="number" title="Численность персонала факт мин месяц">
          <call function="=">
            <column table="va_vvod" column="field" />
            <const>'popul_podr'</const>
          </call>
          <fact table="a" column="va_vvod_ym_min" column-width="111" title="Факт" />
        </call>
        <call as="i_fact018" function="if" group="max" type="number" title="Численность персонала факт макс месяц">
          <call function="=">
            <column table="va_vvod" column="field" />
            <const>'popul_podr'</const>
          </call>
          <fact table="a" column="va_vvod_ym_max" column-width="111" title="Факт" />
        </call>
        <call function="/" as="i_exp003" title="Сред мес численность персонала план" group="outer">
          <fact table="a" column="i_fact013" column-width="111" />
          <call function="+nvl">
            <call function="month ym2 between">
              <fact column="i_fact017" />
              <fact column="i_fact015" />
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="/" as="i_exp004" format="F0" title="Сред мес численность персонала факт" group="outer">
          <fact table="a" column="i_fact014" column-width="111" />
          <call function="+nvl">
            <call function="month ym2 between">
              <fact column="i_fact018" />
              <fact column="i_fact016" />
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="/" as="i_exp005" title="Сред мес оплата труда план" format="F0" group="outer">
          <fact column="i_fact201" />
          <fact table="a" column="i_exp003" column-width="111" />
        </call>
        <call function="/" as="i_exp006" title="Сред мес оплата труда факт" group="outer">
          <fact column="i_fact301" />
          <fact table="a" column="i_exp004" column-width="111" />
        </call>
      </expressions>
      <expressions comment="Установленная мощность" part-id="va_cons01-expressions">
        <call as="i_fact019" function="()" group="sum" type="number" title="Установленная мощность план">
          <fact table="a" column="va_pwr_set_r_val_p" title="План" />
        </call>
        <call as="i_fact020" function="()" group="sum" type="number" title="Установленная мощность факт">
          <fact table="a" column="va_pwr_set_r_val_p" title="Факт" />
        </call>
        <call as="i_fact031" function="()" group="min" type="number" title="Установленная мощность мин месяц">
          <fact table="a" column="va_pwr_set_r_ym_min" column-width="111" title="План" />
        </call>
        <call as="i_fact032" function="()" group="max" type="number" title="Установленная мощность макс месяц">
          <fact table="a" column="va_pwr_set_r_ym_max" column-width="111" title="План" />
        </call>
        <call function="/" as="i_exp009" title="Сред мес установленная мощность план" group="outer">
          <fact table="a" column="i_fact019" column-width="111" />
          <call function="+nvl">
            <call function="month ym2 between">
              <fact column="i_fact032" />
              <fact column="i_fact031" />
            </call>
            <const>1</const>
          </call>
        </call>
        <call function="/" as="i_exp010" format="F0" title="Сред мес установленная мощность факт" group="outer">
          <fact table="a" column="i_fact020" column-width="111" />
          <call function="+nvl">
            <call function="month ym2 between">
              <fact column="i_fact032" />
              <fact column="i_fact031" />
            </call>
            <const>1</const>
          </call>
        </call>
      </expressions>
      <expressions comment="Удельные управляемые условно-постоянные расходы" part-id="va_cons01-expressions">
        <call function="/" as="i_exp007" title="Расход управл усл пост удельн план" format="F0" group="outer">
          <fact table="a" column="i_fact231" column-width="111" />
          <fact table="a" column="i_exp009" column-width="111" />
        </call>
        <call function="/" as="i_exp008" title="Расход управл усл пост удельн факт" format="F0" group="outer">
          <fact table="a" column="i_fact331" column-width="111" />
          <fact table="a" column="i_exp010" column-width="111" />
        </call>
      </expressions>
      <expressions comment="расходы по менеджерам" part-id="va_cons01-expressions">
        <call function="=" as="is_07" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>07</const>
        </call>
        <call as="i_fact207" function="()" group="sum" type="number" title="Начальник департамента по правовым вопросам план">
          <fact column="va_plan_smet_val" condition="is_07" />
        </call>
        <call as="i_fact307" function="()" group="sum" type="number" title="Начальник департамента по правовым вопросам факт">
          <fact column="va_smet_vvod_val" condition="is_07" />
        </call>
        <call function="=" as="is_08" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>08</const>
        </call>
        <call as="i_fact208" function="()" group="sum" type="number" title="Начальник департамента по обеспечению физ. защиты и информ. безопасности план">
          <fact column="va_plan_smet_val" condition="is_08" />
        </call>
        <call as="i_fact308" function="()" group="sum" type="number" title="Начальник департамента по обеспечению физ. защиты и информ. безопасности факт">
          <fact column="va_smet_vvod_val" condition="is_08" />
        </call>
        <call function="=" as="is_09" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>09</const>
        </call>
        <call as="i_fact209" function="()" group="sum" type="number" title="Директор по персоналу план">
          <fact column="va_plan_smet_val" condition="is_09" />
        </call>
        <call as="i_fact309" function="()" group="sum" type="number" title="Директор по персоналу факт">
          <fact column="va_smet_vvod_val" condition="is_09" />
        </call>
        <call function="=" as="is_10" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>10</const>
        </call>
        <call as="i_fact210" function="()" group="sum" type="number" title="Административный директор план">
          <fact column="va_plan_smet_val" condition="is_10" />
        </call>
        <call as="i_fact310" function="()" group="sum" type="number" title="Административный директор факт">
          <fact column="va_smet_vvod_val" condition="is_10" />
        </call>
        <call function="=" as="is_11" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>11</const>
        </call>
        <call as="i_fact211" function="()" group="sum" type="number" title="Руководитель аппарата генерального диpектоpа план">
          <fact column="va_plan_smet_val" condition="is_11" />
        </call>
        <call as="i_fact311" function="()" group="sum" type="number" title="Руководитель аппарата генерального диpектоpа факт">
          <fact column="va_smet_vvod_val" condition="is_11" />
        </call>
        <call function="=" as="is_12" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>12</const>
        </call>
        <call as="i_fact212" function="()" group="sum" type="number" title="Начальник департамента управления имуществом план">
          <fact column="va_plan_smet_val" condition="is_12" />
        </call>
        <call as="i_fact312" function="()" group="sum" type="number" title="Начальник департамента управления имуществом факт">
          <fact column="va_smet_vvod_val" condition="is_12" />
        </call>
        <call function="=" as="is_13" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>13</const>
        </call>
        <call as="i_fact213" function="()" group="sum" type="number" title="Директор Предприятия СДТУиИТ план">
          <fact column="va_plan_smet_val" condition="is_13" />
        </call>
        <call as="i_fact313" function="()" group="sum" type="number" title="Директор Предприятия СДТУиИТ факт">
          <fact column="va_smet_vvod_val" condition="is_13" />
        </call>
        <call function="=" as="is_41" dontpushpred="1">
          <column table="va_acc_item" column="kod_acc_item" />
          <const>41</const>
        </call>
        <call as="i_fact241" function="()" group="sum" type="number" title="Начальник департамента по связям с общественностью план">
          <fact column="va_plan_smet_val" condition="is_41" />
        </call>
        <call as="i_fact341" function="()" group="sum" type="number" title="Начальник департамента по связям с общественностью факт">
          <fact column="va_smet_vvod_val" condition="is_41" />
        </call>
      </expressions>
      <columnspreset>
        <column table="a" name="npp" title="№ пп (подр.)" type="string" assigned="1" sel_order="3" width="70" />
        <column table="a" name="namet" title="Подразделение" type="string" into="namet" assigned="1" sel_order="3" width="400" />
      </columnspreset>
      <select>
        <call function="row_num" as="npp" title="№ пп (подр.)" halign="center" format="F0" agg="no">
          <column table="va_dr_sp_tree" column="ord" />
        </call>
        <column table="va_dr_i_x" column="kod_direct" />
        <column table="va_dr_sp_tree" column="namet" />
        <call function="to_char" as="god" title="Год">
          <column table="va_god" column="val" />
        </call>
        <call function="mes-name" title="Месяц" as="mes">
          <column table="va_mes" column="val" />
        </call>
        <band title="Доходы (тыс. руб.)">
          <band title="Основная деятельность">
            <fact table="a" column="i_fact001" column-width="111" title="План" />
            <fact table="a" column="i_fact002" column-width="111" title="Факт" />
          </band>
          <band title="Неосновная деятельность">
            <fact table="a" column="i_fact021" column-width="111" title="План" />
            <fact table="a" column="i_fact121" column-width="111" title="Факт" />
          </band>
          <band title="Прочие">
            <fact table="a" column="i_fact026" column-width="111" title="План" />
            <fact table="a" column="i_fact126" column-width="111" title="Факт" />
          </band>
          <band title="Проценты">
            <fact table="a" column="i_fact024" column-width="111" title="План" />
            <fact table="a" column="i_fact124" column-width="111" title="Факт" />
          </band>
          <band title="От участия в других организациях">
            <fact table="a" column="i_fact007" title="План" />
            <fact table="a" column="i_fact008" title="Факт" />
          </band>
        </band>
        <band title="Расходы (тыс. руб.)">
          <band title="Основная деятельность">
            <fact table="a" column="i_fact022" column-width="111" title="План" />
            <fact table="a" column="i_fact122" column-width="111" title="Факт" />
          </band>
          <band title="Неосновная деятельность">
            <fact table="a" column="i_fact023" column-width="111" title="План" />
            <fact table="a" column="i_fact123" column-width="111" title="Факт" />
          </band>
          <band title="Прочие">
            <fact table="a" column="i_fact027" column-width="111" title="План" />
            <fact table="a" column="i_fact127" column-width="111" title="Факт" />
          </band>
          <band title="Проценты">
            <fact table="a" column="i_fact025" column-width="111" title="План" />
            <fact table="a" column="i_fact125" column-width="111" title="Факт" />
          </band>
        </band>
        <band title="Прибыль (убыток) до налогооблажения (тыс. руб.)">
          <fact table="a" column="i_fact003" column-width="111" title="План" />
          <fact table="a" column="i_fact004" column-width="111" title="Факт" />
        </band>
        <band title="Чистая прибыль (убыток) (тыс. руб.)">
          <fact table="a" column="i_fact005" column-width="111" title="План" />
          <fact table="a" column="i_fact006" column-width="111" title="Факт" />
        </band>
        <band title="Амортизация (тыс. руб.)">
          <fact table="a" column="i_fact028" column-width="111" title="План" />
          <fact table="a" column="i_fact128" column-width="111" title="Факт" />
        </band>
        <band title="Коммерческие расходы (тыс. руб.)">
          <fact table="a" column="i_fact029" column-width="111" title="План" />
          <fact table="a" column="i_fact129" column-width="111" title="Факт" />
        </band>
        <band title="Управленческие расходы (тыс. руб.)">
          <fact table="a" column="i_fact030" column-width="111" title="План" />
          <fact table="a" column="i_fact130" column-width="111" title="Факт" />
        </band>
        <band title="EBITDA (тыс. руб.)">
          <fact table="a" column="i_fact009" column-width="111" title="План" />
          <fact table="a" column="i_fact010" column-width="111" title="Факт" />
        </band>
        <band title="Рентабельность по EBITDA (%)">
          <fact table="a" column="i_exp001" column-width="111" title="План" />
          <fact table="a" column="i_exp002" column-width="111" title="Факт" />
        </band>
        <band title="Управляемые условно-постоянные расходы (тыс. руб.)">
          <band title="Всего">
            <fact table="a" column="i_fact231" column-width="111" title="План" />
            <fact table="a" column="i_fact331" column-width="111" title="Факт" />
          </band>
          <band title="Оплата труда">
            <fact table="a" column="i_fact201" column-width="111" title="План" />
            <fact table="a" column="i_fact301" column-width="111" title="Факт" />
          </band>
          <band title="Ремонты (без учета расходов на сервисные контракты)">
            <fact table="a" column="i_fact202" column-width="111" title="План" />
            <fact table="a" column="i_fact302" column-width="111" title="Факт" />
          </band>
          <band title="Сервисные контракты">
            <fact table="a" column="i_fact203" column-width="111" title="План" />
            <fact table="a" column="i_fact303" column-width="111" title="Факт" />
          </band>
          <band title="Прочие">
            <fact table="a" column="i_fact204" column-width="111" title="План" />
            <fact table="a" column="i_fact304" column-width="111" title="Факт" />
          </band>
        </band>
        <band title="Среднемесячная заработная плата  (тыс. руб.)">
          <fact table="a" column="i_exp005" column-width="111" title="План" />
          <fact table="a" column="i_exp006" column-width="111" title="Факт" />
        </band>
        <band title="Среднемесячная установленная мощность (МВт)">
          <fact table="a" column="i_exp009" title="План" />
          <fact table="a" column="i_exp010" title="Факт" />
        </band>
        <band title="Удельные управляемые условно-постоянные расходы (тыс. руб./ МВт)">
          <fact table="a" column="i_exp007" column-width="111" title="План" />
          <fact table="a" column="i_exp008" column-width="111" title="Факт" />
        </band>
        <band title="Среднемесячная численность персонала (чел.)">
          <fact table="a" column="i_exp003" column-width="111" title="План" />
          <fact table="a" column="i_exp004" column-width="111" title="Факт" />
        </band>
        <band title="Затраты линиям ответственности менеджеров (тыс. руб. )">
          <band title="Начальник департамента по правовым вопросам">
            <fact table="a" column="i_fact207" column-width="111" title="План" />
            <fact table="a" column="i_fact307" column-width="111" title="Факт" />
          </band>
          <band title="Начальник департамента по обеспечению физ. защиты и информ. безопасности">
            <fact table="a" column="i_fact208" column-width="111" title="План" />
            <fact table="a" column="i_fact308" column-width="111" title="Факт" />
          </band>
          <band title="Директор по персоналу">
            <fact table="a" column="i_fact209" column-width="111" title="План" />
            <fact table="a" column="i_fact309" column-width="111" title="Факт" />
          </band>
          <band title="Административный директор">
            <fact table="a" column="i_fact210" column-width="111" title="План" />
            <fact table="a" column="i_fact310" column-width="111" title="Факт" />
          </band>
          <band title="Руководитель аппарата генерального диpектоpа">
            <fact table="a" column="i_fact211" column-width="111" title="План" />
            <fact table="a" column="i_fact311" column-width="111" title="Факт" />
          </band>
          <band title="Начальник департамента управления имуществом">
            <fact table="a" column="i_fact212" column-width="111" title="План" />
            <fact table="a" column="i_fact312" column-width="111" title="Факт" />
          </band>
          <band title="Директор Предприятия СДТУиИТ">
            <fact table="a" column="i_fact213" column-width="111" title="План" />
            <fact table="a" column="i_fact313" column-width="111" title="Факт" />
          </band>
          <band title="Начальник департамента по связям с общественностью">
            <fact table="a" column="i_fact241" column-width="111" title="План" />
            <fact table="a" column="i_fact341" column-width="111" title="Факт" />
          </band>
        </band>
      </select>
      <from>
        <qube star-scheme="1" single-way="1">
          <link name="va_dr_i_x" all-rows="1">
            <link name="va_dr_sp_tree" />
          </link>
          <link name="va_dr_i_x_main" only-for-cond="1" />
          <link name="va_god" />
          <link name="va_mes" />
          <dimset as="a" />
          <where>
            <call function="is not null">
              <column table="va_dr_i_x" column="kod_direct" />
            </call>
            <call function="=">
              <column table="va_dr_i_x_main" column="kod_direct" />
              <useparam name="p_kod_direct1" />
            </call>
            <call function="in" optional="1">
              <column table="va_dr_i_x" column="kod_direct" />
              <useparam name="p_kod_direct2" />
            </call>
            <call function="=" optional="1">
              <column table="va_god" column="val" />
              <useparam name="p_god" />
            </call>
            <call function="ge" optional="1">
              <column table="va_god" column="val" />
              <useparam name="p_gode1" />
            </call>
            <call function="le" optional="1">
              <column table="va_god" column="val" />
              <useparam name="p_gode2" />
            </call>
            <call function="ge" optional="1">
              <column table="va_mes" column="val" />
              <useparam name="p_mes1" />
            </call>
            <call function="le" optional="1">
              <column table="va_mes" column="val" />
              <useparam name="p_mes2" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_qry_src003" timestamp="06.02.2018 23:30:26" can-use-simple-params="1" title="Доходы и расходы (факт) . " comment="Доходы и расходы (факт). Запрос для работы с формой" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_god" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes1" type="number">
          <const>1</const>
        </param>
        <param name="p_mes2" type="number">
          <const>12</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>0</const>
        </param>
        <param name="p_kod_spr_smet" type="number">
          <const>938</const>
        </param>
        <param name="p_child_smet" type="number">
          <const>2</const>
        </param>
        <param name="p_child_smet_not" type="number">
          <const>2</const>
        </param>
        <param name="p_kod_dir_sruct_apply" type="number">
          <const>2</const>
        </param>
      </params>
      <select>
        <column table="item" column="kod_direct" key="1" />
        <column table="item" column="parent_id" />
        <column table="item" column="namex" />
        <fact column="va_dir_struct_opt_no_self" as="no_self" />
        <fact column="va_dir_struct_opt_no_parent" as="no_parent" />
        <fact column="va_smet_vvod_vale" as="vale" table="a" />
        <fact column="va_smet_vvod_valt" as="valt" table="a" />
        <fact column="va_smet_vvod_val" as="val" table="a" />
        <column table="va_qry_src003_x" column="vale_x" />
        <column table="va_qry_src003_x" column="valt_x" />
        <column table="va_qry_src003_x" column="val_x" />
      </select>
      <from>
        <qube>
          <link name="va_direct" as="item" all-rows="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <link name="va_dir_sruct_apply" only-for-cond="1" />
          <dimset as="a">
            <link name="va_spr_smet_main" as="smet_main" />
            <link name="va_spr_smet" as="smet" />
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <column table="smet_main" column="kod_spr_smet" />
                  <useparam name="p_kod_spr_smet" />
                </call>
                <call function="=1">
                  <useparam name="p_child_smet" />
                </call>
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <column table="smet" column="kod_spr_smet" />
                  <useparam name="p_kod_spr_smet" />
                </call>
                <call function="=1">
                  <useparam name="p_child_smet_not" />
                </call>
              </call>
            </where>
          </dimset>
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=">
              <column table="va_dir_sruct_apply" column="kod_dir_sruct_apply" />
              <useparam name="p_kod_dir_sruct_apply" />
            </call>
          </where>
        </qube>
        <query join="left outer" name="va_qry_src003_x">
          <call function="=">
            <column table="va_qry_src003_x" column="kod_direct" />
            <column table="this" column="kod_direct" />
          </call>
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
            <useparam name="p_kod_direct" />
            <useparam name="p_kod_spr_smet" />
            <useparam name="p_child_smet" />
            <useparam name="p_child_smet_not" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="va_qry_src002" timestamp="03.03.2019 20:52:15" can-use-simple-params="1" title="Доходы и расходы (план)" comment="Доходы и расходы (план).Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_god" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes1" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes2" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_spr_smet" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="item" column="kod_direct" key="1" />
        <column table="item" column="parent_id" />
        <column table="item" column="namex" />
        <fact column="va_plan_smet_vale" as="vale" table="a" />
        <fact column="va_plan_smet_valt" as="valt" table="a" />
        <fact column="va_plan_smet_val" as="val" table="a" />
      </select>
      <from>
        <qube>
          <link name="va_direct" as="item" all-rows="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <link name="va_dir_sruct_apply" only-for-cond="1" />
          <dimset as="a">
            <link name="va_spr_smet" />
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
              <call function="=">
                <column table="va_spr_smet" column="kod_spr_smet" />
                <useparam name="p_kod_spr_smet" />
              </call>
            </where>
          </dimset>
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=">
              <column table="va_dir_sruct_apply" column="kod_dir_sruct_apply" />
              <const>0</const>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_qry_src001" timestamp="06.02.2018 18:44:41" can-use-simple-params="1" title="Доходы по основной деятельности. " comment="Доходы по основной деятельности. Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <usepart part="va_cons01-expressions" />
      <params>
        <param name="p_god" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes1" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes2" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="item" column="kod_direct" key="1" />
        <column table="item" column="parent_id" />
        <column table="item" column="namex" />
        <fact column="va_dohod_vale_p" table="a" format="N2" />
        <fact column="va_dohod_valt_p" table="a" format="N2" />
        <fact column="va_dohod_vale_f" table="a" format="N2" />
        <fact column="va_dohod_valt_f" table="a" format="N2" />
      </select>
      <from>
        <qube>
          <link name="va_direct" as="item" all-rows="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <dimset as="a">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
            </where>
          </dimset>
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=">
              <column table="va_dir_struct_type" column="kod_dir_struct_type" />
              <useparam name="p_kod_dir_struct_type" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_qry_src004" timestamp="06.02.2018 13:50:37" can-use-simple-params="1" comment="Численность персонала. Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_god" type="number">
          <const>2016</const>
        </param>
        <param name="p_mes" type="number">
          <const>1</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>0</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="item" column="kod_direct" key="1" />
        <column table="item" column="parent_id" />
        <column table="item" column="namex" />
        <call function="()" as="god" type="number">
          <useparam name="p_god" />
        </call>
        <call function="()" as="mes" type="number">
          <useparam name="p_mes" />
        </call>
        <fact column="va_vvod_summa" table="a" format="F0" as="val_f" title="Факт" />
        <column table="v" column="summa" as="val_p" title="План" format="F0" />
      </select>
      <from>
        <qube>
          <link name="va_direct" as="item" all-rows="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <dimset as="a">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <link name="va_vvod" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="=">
                <column table="va_mes" column="val" />
                <useparam name="p_mes" />
              </call>
              <call function="=">
                <column table="va_vvod" column="field" />
                <const>'popul_podr'</const>
              </call>
            </where>
          </dimset>
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=">
              <column table="va_dir_struct_type" column="kod_dir_struct_type" />
              <useparam name="p_kod_dir_struct_type" />
            </call>
          </where>
        </qube>
        <query name="va_cnt_perc_plan" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1" as="v" updateable="1">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="v" column="kod_direct" />
            </call>
            <call function="=">
              <column table="this" column="mes" />
              <column table="v" column="mes" />
            </call>
            <call function="=">
              <column table="this" column="god" />
              <column table="v" column="god" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="va_qry_src003_x" timestamp="06.02.2018 22:55:46" can-use-simple-params="1" title="Доходы и расходы (факт) c учетом подчиненных" comment="Доходы и расходы (факт). Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_god" type="number">
          <const>2017</const>
        </param>
        <param name="p_mes1" type="number">
          <const>1</const>
        </param>
        <param name="p_mes2" type="number">
          <const>12</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>39</const>
        </param>
        <param name="p_kod_spr_smet" type="number">
          <const>938</const>
        </param>
        <param name="p_child_smet" type="number">
          <const>2</const>
        </param>
        <param name="p_child_smet_not" type="number">
          <const>2</const>
        </param>
      </params>
      <select>
        <column table="item" column="kod_direct" key="1" />
        <fact column="va_smet_vvod_vale" as="vale_x" table="a" />
        <fact column="va_smet_vvod_valt" as="valt_x" table="a" />
        <fact column="va_smet_vvod_val" as="val_x" table="a" />
      </select>
      <from>
        <qube>
          <link name="va_dr_i_x" as="item" />
          <link name="va_dr_i_x_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <dimset as="a">
            <link name="va_spr_smet_main" as="smet_main" />
            <link name="va_spr_smet" as="smet" />
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le" optional="1">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <column table="smet_main" column="kod_spr_smet" />
                  <useparam name="p_kod_spr_smet" />
                </call>
                <call function="=1">
                  <useparam name="p_child_smet" />
                </call>
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <column table="smet" column="kod_spr_smet" />
                  <useparam name="p_kod_spr_smet" />
                </call>
                <call function="=1">
                  <useparam name="p_child_smet_not" />
                </call>
              </call>
            </where>
          </dimset>
          <where>
            <call function="=">
              <column table="va_dr_i_x_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=" exclude="1">
              <column table="va_dir_struct_type" column="kod_dir_struct_type" />
              <useparam name="p_kod_dir_struct_type" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="mped_spr_time_ym" class="1" order="ym desc" timestamp="30.08.2019 16:34:59" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <select>
        <column table="a" column="ym" key="1" />
        <column table="a" column="name" vid="1" is-name="1" />
      </select>
      <from>
        <query name="spr_time_ym_pre" as="a" />
      </from>
      <where>
        <call function="between">
          <call function="trunc">
            <column table="this" column="ym" />
          </call>
          <call function="-">
            <call function="year">
              <call function="sysdate" />
            </call>
            <const>4</const>
          </call>
          <call function="year">
            <call function="sysdate" />
          </call>
          <call function="+" exclude="1">
            <call function="year">
              <call function="sysdate" />
            </call>
            <const>1</const>
          </call>
        </call>
      </where>
    </query>
    <query name="mped_yes_no_pre" timestamp="04.07.2019 14:57:15" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <const as="id" type="number">0</const>
      <const as="name" type="string">'Нет'</const>
      <const>1</const>
      <const>'Да'</const>
    </query>
    <query name="mped_yes_no" class="1" order="id" timestamp="04.07.2019 15:08:11" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <select>
        <column table="a" column="id" key="1" />
        <column table="a" column="name" vid="1" is-name="1" />
      </select>
      <from>
        <query name="mped_yes_no_pre" as="a" />
      </from>
    </query>
    <query name="mped_null_value" class="1" timestamp="04.07.2019 17:23:44" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <select>
        <call function="null" as="id" key="1" />
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="mped_ym_stragg" class="1" order="ym desc" timestamp="05.07.2019 16:14:14" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="ym" group="stragg_dist" type="string" />
      </select>
      <from>
        <query name="spr_time_ym_pre" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="ym" />
          <useparam name="p_ym" />
        </call>
      </where>
    </query>
    <query name="mped_spr_time_ym_prev" class="1" timestamp="06.07.2019 23:20:01" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <select>
        <call as="val" function="ym add month">
          <call function="date to ym">
            <call function="sysdate" />
          </call>
          <const>-1</const>
        </call>
        <call function="to_char" as="name">
          <call function="ym add month">
            <call function="date to ym">
              <call function="sysdate" />
            </call>
            <const>-1</const>
          </call>
        </call>
      </select>
      <from>
        <table name="dual" as="a" />
      </from>
    </query>
    <query name="mped_spr_time_ym_string" class="1" timestamp="25.07.2019 17:36:43" file="sql.builder.templates\sql.builder\projects\mped\data\queries.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="name" group="stragg_dist" key="1" />
      </select>
      <from>
        <query name="spr_time_ym_pre" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="ym" />
          <useparam name="p_ym" />
        </call>
      </where>
    </query>
    <query name="pr_tek_start_val" timestamp="29.03.2019 16:09:34" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <select>
        <column table="a" column="id" />
      </select>
      <from>
        <query name="pr_tek_all_vals" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="id" />
          <const comment="Текущее состояние">1</const>
        </call>
      </where>
    </query>
    <query name="pr_tek_all_vals" timestamp="29.03.2019 16:09:23" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <const as="id" type="string">1</const>
      <const as="name" type="string">'Текущее состояние'</const>
      <const>2</const>
      <const>'Все строки'</const>
    </query>
    <query name="pr_has_sap_code" timestamp="04.07.2019 11:14:44" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <const as="id" type="string">1</const>
      <const as="name" type="string">'Все строки'</const>
      <const>2</const>
      <const>'Строки с кодом SAP'</const>
    </query>
    <query name="pr_has_sap_start_val" timestamp="04.07.2019 11:16:04" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <select>
        <column table="a" column="id" />
      </select>
      <from>
        <query name="pr_has_sap_code" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="id" />
          <const comment="Все строки">1</const>
        </call>
      </where>
    </query>
    <query name="va_year_def1" timestamp="14.12.2017 22:22:14" comment="Текущий год" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <select>
        <call function="year" as="val">
          <call function="sysdate" />
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_mes1" timestamp="14.12.2017 21:39:36" comment="Месяц январь" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <select>
        <call function="()" type="number" as="val">
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_mes12" timestamp="14.12.2017 21:40:15" comment="Месяц декабрь" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <select>
        <call function="()" type="number" as="val">
          <const>12</const>
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_ym1s" timestamp="07.12.2017 20:14:51" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <params>
        <param name="p_god" type="number" />
        <param name="p_mes1" type="number" />
      </params>
      <select>
        <call function="num to ym2" type="number" as="val">
          <useparam name="p_god" />
          <useparam name="p_mes1" />
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_ym2s" timestamp="11.12.2017 19:46:53" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <params>
        <param name="p_god" type="number" />
        <param name="p_mes2" type="number" />
      </params>
      <select>
        <call function="num to ym2" type="number" as="val">
          <useparam name="p_god" />
          <useparam name="p_mes2" />
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_mes_cur" timestamp="14.12.2017 21:37:50" comment="Текущий месяц" file="sql.builder.templates\sql.builder\projects\mped\fields\queries.xml">
      <select>
        <call function="month" type="number" as="val">
          <call function="sysdate" />
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="va_dr_sq_struct_copy" timestamp="06.02.2018 15:51:01" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_type.xml">
      <params>
        <param type="number" name="p_kod_dir_struct_type">
          <const>2</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_dir_struct_type" as="kod" />
        <call function="||" as="name">
          <column table="a" column="name" />
          <const>' - копия'</const>
        </call>
      </select>
      <from>
        <query name="va_dir_struct_type" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_struct_type" />
          <useparam name="p_kod_dir_struct_type" />
        </call>
      </where>
    </query>
    <query name="va_dr_sq_struct_opt_copy" timestamp="06.02.2018 16:05:06" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_type.xml">
      <params>
        <param type="number" name="p_kod_dir_struct_type">
          <const>2</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_dir_struct_type" as="kod" />
        <column table="a" column="kod_direct" />
        <column table="a" column="no_use" />
        <column table="a" column="no_parent" />
        <column table="a" column="no_self" />
      </select>
      <from>
        <query name="va_dir_struct_opt" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_struct_type" />
          <useparam name="p_kod_dir_struct_type" />
        </call>
      </where>
    </query>
    <query name="va_invert_p_child_smet" timestamp="06.02.2018 02:24:47" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <params>
        <param name="p_child_smet" type="number">
          <const>2017</const>
        </param>
      </params>
      <select>
        <call type="number" function="if" as="val">
          <call function="or">
            <call function="false" />
            <call function="=1" optional="1">
              <useparam name="p_child_smet" />
            </call>
          </call>
          <const>0</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="dual" />
      </from>
    </query>
    <query name="vb_utv_periods_show_data" class="1" order="id" timestamp="14.08.2019 16:18:10" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <const as="id" type="number">0</const>
      <const as="name" type="string">'План'</const>
      <const>1</const>
      <const>'Факт'</const>
      <const>2</const>
      <const>'Согласовано'</const>
    </query>
    <query name="vb_utv_periods_show_plan" class="1" timestamp="14.08.2019 16:47:18" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <params>
        <param name="p_show" type="array" />
      </params>
      <select>
        <call function="if" as="is_plan">
          <call function="in">
            <const>0</const>
            <useparam name="p_show" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="vb_utv_periods_show_fact" class="1" timestamp="14.08.2019 16:48:13" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <params>
        <param name="p_show" type="array" />
      </params>
      <select>
        <call function="if" as="is_plan">
          <call function="in">
            <const>1</const>
            <useparam name="p_show" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="vb_utv_periods_show_agree" class="1" timestamp="14.08.2019 16:50:35" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <params>
        <param name="p_show" type="array" />
      </params>
      <select>
        <call function="if" as="is_plan">
          <call function="in">
            <const>2</const>
            <useparam name="p_show" />
          </call>
          <const>1</const>
          <const>0</const>
        </call>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_ke30_no_smet" timestamp="18.07.2019 11:23:16" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="*" />
        <column table="kod_spr_vid_energ" column="vid_energ_name" />
        <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" />
      </select>
      <from>
        <query name="va_sp_calc" as="a">
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" />
            </link>
          </link>
          <link name="sap_code" />
          <link name="kod_direct" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="sap_code" column="kod_spr_smet" />
          </call>
          <call function="in">
            <column table="a" column="period" />
            <useparam name="p_ym" />
          </call>
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_ke30_no_smet_list" timestamp="18.07.2019 11:23:34" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="el_zatr_kod" group="1" />
        <column table="a" column="el_zatr_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_ke30_no_smet" as="a">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="52072_dt_chk_dr_no_smet" timestamp="24.04.2019 12:00:50" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="va_sp_doh_ras" as="a" />
        <query name="vb_spr_smet_to_sap" as="sap_code" join="left outer">
          <call function="=">
            <column table="a" column="st_id" />
            <column table="sap_code" column="sap_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="sap_code" column="kod_spr_smet" />
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_dr_no_smet_list" timestamp="24.04.2019 12:01:31" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="st_id" group="1" />
        <column table="a" column="st_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_dr_no_smet" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_ke30_no_mvp" timestamp="13.08.2019 11:39:49" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="*" />
        <column table="kod_spr_vid_energ" column="vid_energ_name" />
        <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" />
        <column table="sap_code_agg" column="full_kod_smet" />
      </select>
      <from>
        <query name="va_sp_calc" as="a">
          <link name="mvp_kod1" />
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" />
            </link>
          </link>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="mvp_kod1" column="mvp_code" />
          </call>
          <call function="in">
            <column table="a" column="period" />
            <useparam name="p_ym" />
          </call>
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_ke30_no_mvp_list" timestamp="18.07.2019 11:40:36" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="mvp_kod" group="1" />
        <column table="a" column="mvp_name" group="1" />
        <column table="a" column="name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_ke30_no_mvp" as="a">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="52072_dt_chk_dr_no_mb3" timestamp="24.04.2019 12:11:13" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="va_sp_doh_ras" as="a" />
        <query name="vb_spr_mb3" as="mb3_sap_code" join="left outer">
          <call function="=">
            <column table="a" column="mb3_id" />
            <column table="mb3_sap_code" column="mb3_sap_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="mb3_sap_code" column="mb3_sap_code" />
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_dr_no_mb3_list" timestamp="24.04.2019 12:12:08" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="mb3_id" group="1" />
        <column table="a" column="mb3_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_dr_no_mb3" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_zatr_no_podr" timestamp="24.04.2019 12:24:20" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="va_sp_zatr" as="a" />
        <query name="vb_spr_mb3" as="mb3_sap_code" join="left outer">
          <call function="=">
            <column table="a" column="mb3_id" />
            <column table="mb3_sap_code" column="mb3_sap_code" />
          </call>
          <link name="vb_dir_to_sap" />
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="vb_dir_to_sap" column="kod_direct" />
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_zatr_no_podr_mb3_list" timestamp="24.04.2019 12:24:20" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="mb3_id" group="1" />
        <column table="a" column="mb3_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_zatr_no_podr" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_dr_no_podr" timestamp="24.04.2019 12:25:02" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="*" />
      </select>
      <from>
        <query name="va_sp_doh_ras" as="a" />
        <query name="vb_spr_mb3" as="mb3_sap_code" join="left outer">
          <call function="=">
            <column table="a" column="mb3_id" />
            <column table="mb3_sap_code" column="mb3_sap_code" />
          </call>
          <link name="vb_dir_to_sap" />
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="vb_dir_to_sap" column="kod_direct" />
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_dr_no_podr_mb3_list" timestamp="24.04.2019 12:25:36" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="mb3_id" group="1" />
        <column table="a" column="mb3_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_dr_no_podr" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_mb3_vs_podr" timestamp="17.06.2019 18:17:16" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="kod_spr_mb3" />
        <column table="a" column="mb3_sap_code" />
        <column table="a" column="mb3_name" />
        <column table="a" column="dir_sap_code" />
      </select>
      <from>
        <query name="vb_spr_mb3" as="a">
          <link name="vb_dir_to_sap" />
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="vb_dir_to_sap" column="kod_direct" />
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_smet_sap_dubl1" timestamp="24.04.2019 12:50:18" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="sap_code" group="1" />
        <column table="kod_spr_smet" column="kod_smet" group="count_dist" as="count_smet" />
      </select>
      <from>
        <query name="vb_spr_smet_to_sap" as="a">
          <link name="kod_spr_smet" />
        </query>
      </from>
    </query>
    <query name="52072_dt_chk_smet_sap_dubl" timestamp="18.07.2019 12:41:03" order="sap_code, kod_smet, prizn" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="kod_spr_smet_to_sap" />
        <column table="a" column="sap_code" />
        <column table="a" column="period_s" />
        <column table="a" column="period_po" />
        <column table="kod_spr_smet" column="kod_smet" />
        <column table="kod_spr_smet" column="name" />
        <call as="dat_start" function="/" type="number">
          <column table="kod_spr_smet" column="dat_start" />
          <const>100</const>
        </call>
        <call as="dat_finish" function="/" type="number">
          <column table="kod_spr_smet" column="dat_finish" />
          <const>100</const>
        </call>
        <call as="prizn" function="case" type="string">
          <call function="when">
            <call function="=">
              <column table="kod_spr_smet" column="prizn" />
              <const>0</const>
            </call>
            <const>'ОД'</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="kod_spr_smet" column="prizn" />
              <const>1</const>
            </call>
            <const>'НД'</const>
          </call>
        </call>
      </select>
      <from>
        <query name="vb_spr_smet_to_sap" as="a">
          <link name="kod_spr_smet" />
        </query>
        <query name="52072_dt_chk_smet_sap_dubl1" as="count_smet" join="left outer">
          <call function="=">
            <column table="a" column="sap_code" />
            <column table="count_smet" column="sap_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="gt">
          <column table="count_smet" column="count_smet" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_vid_dey_dubl1" timestamp="24.04.2019 12:57:50" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="vid_dey_sap_code" group="1" />
        <column table="a" column="kod_spr_vid_dey" group="count_dist" as="count_vd" />
      </select>
      <from>
        <query name="vb_spr_vid_dey" as="a" />
      </from>
    </query>
    <query name="52072_dt_chk_vid_dey_dubl" timestamp="24.04.2019 13:23:31" order="vid_dey_sap_code, vid_dey_name" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <select>
        <column table="a" column="kod_spr_vid_dey" />
        <column table="a" column="vid_dey_sap_code" />
        <column table="a" column="vid_dey_name" />
        <column table="kod_spr_vid_energ" column="vid_energ_name" />
      </select>
      <from>
        <query name="vb_spr_vid_dey" as="a">
          <link name="kod_spr_vid_energ" />
        </query>
        <query name="52072_dt_chk_vid_dey_dubl1" as="count_vd" join="left outer">
          <call function="=">
            <column table="a" column="vid_dey_sap_code" />
            <column table="count_vd" column="vid_dey_sap_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="gt">
          <column table="count_vd" column="count_vd" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_ke30_no_vd" timestamp="18.07.2019 12:01:42" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="*" />
        <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" />
        <column table="sap_code_agg" column="full_kod_smet" />
      </select>
      <from>
        <query name="va_sp_calc" as="a">
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" />
            </link>
          </link>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
      <where>
        <call function="and">
          <call function="is null">
            <column table="vd" column="vid_dey_sap_code" />
          </call>
          <call function="in">
            <column table="a" column="period" />
            <useparam name="p_ym" />
          </call>
        </call>
      </where>
    </query>
    <query name="52072_dt_chk_ke30_no_vd_list" timestamp="18.07.2019 12:03:37" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <select>
        <column table="a" column="vid_dey_kod" group="1" />
        <column table="a" column="vid_dey_name" group="1" />
      </select>
      <from>
        <query name="52072_dt_chk_ke30_no_vd" as="a">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="va_rep_k422" timestamp="06.02.2018 18:44:42" title="K422. Утвержденные Советом директоров (по Бизнес-плану)" is-report="1" can-use-simple-params="1" order="item_ord" nogrid="1" mode="excel" use-repository="1" comment="K422. Утвержденные Советом директоров (по Бизнес-плану)" file="sql.builder.templates\sql.builder\projects\mped\reports\va_rep_k422.xml">
      <content>
        <fieldgroup noborder="1" part-id="va_rep_k422-content" title="-">
          <usefield field="va_god" column-mandatory="1" />
          <fieldgroup title="Месяц">
            <usefield field="va_mes1" name="p_mes1" title="C" column-mandatory="1" />
            <usefield field="va_mes12" name="p_mes2" title="По" column-mandatory="1" />
          </fieldgroup>
        </fieldgroup>
      </content>
      <print-templates>
        <excel>
          <template name="mpedK422.xlsx" title="K422" print-proc="2" print-xlsx="1" format-source="41050-format.xlsx" />
        </excel>
      </print-templates>
      <usepart part="va_cons01-expressions" />
      <select>
        <column table="item" column="kod" as="item_kod" title="Статья" />
        <column table="item" column="name" as="item_name" title="Статья" />
        <column table="item" column="ei_name" title="Статья" />
        <column table="item" column="ord" as="item_ord" title="Статья" />
        <call function="case" as="p_val" type="number" title="План">
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>1</const>
            </call>
            <fact column="i_fact005" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>4</const>
            </call>
            <fact column="i_exp001" table="a" />
          </call>
        </call>
        <call function="case" as="f_val" type="number" title="Факт">
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>1</const>
            </call>
            <fact column="i_fact006" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>4</const>
            </call>
            <fact column="i_exp002" table="a" />
          </call>
        </call>
        <call function="-nvl" as="o_val" title="Отклонение">
          <column table="this" column="f_val" />
          <column table="this" column="p_val" />
        </call>
      </select>
      <from>
        <qube star-scheme="1" single-way="1">
          <link name="va_dr_i_x" only-for-cond="1" part-id="va_rep_k422-cube" />
          <dimset as="a" part-id="va_rep_k422-cube">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
            </where>
          </dimset>
          <where part-id="va_rep_k422-cube">
            <call function="=">
              <column table="va_dr_i_x" column="kod_direct" />
              <const>0</const>
            </call>
          </where>
        </qube>
        <query name="va_acc_k422_item" join="left outer" as="item">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="va_rep_k423" timestamp="06.02.2018 20:31:28" can-use-simple-params="1" order="item_ord" is-report="1" use-repository="1" title="K423. Оценка выполнения Бизнес-плана по методике ПАО &quot;Газпром&quot;" mode="excel" comment="K423. Оценка выполнения Бизнес-плана по методике ПАО &quot;Газпром&quot;" nogrid="1" file="sql.builder.templates\sql.builder\projects\mped\reports\va_rep_k423.xml">
      <content>
        <usepart part="va_rep_k422-content" />
      </content>
      <print-templates>
        <excel>
          <template name="mpedK423.xlsx" title="K423" print-proc="2" print-xlsx="1" format-source="41050-format.xlsx" />
        </excel>
      </print-templates>
      <usepart part="va_cons01-expressions" />
      <select>
        <column table="item" column="kod" as="item_kod" title="Статья" />
        <column table="item" column="name1" as="item_name1" title="Статья" />
        <column table="item" column="name2" as="item_name2" title="Статья" />
        <column table="item" column="ei_name" title="ЕИ" group="max" />
        <column table="item" column="ord" as="item_ord" title="Порядок" group="max" />
        <fact column="va_cb_acc_k423_p_val" table="a" as="p_val" mp="-3" group="sum" exclude="1" />
        <fact column="va_cb_acc_k423_f_val" table="a" as="f_val" mp="-3" group="sum" exclude="1" />
        <fact column="va_cb_acc_k423_o_val" table="a" as="o_val" mp="-3" group="sum" exclude="1" />
        <call function="case" as="p_val" type="number" title="План" group="sum">
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>10</const>
            </call>
            <fact column="i_fact005" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>20</const>
            </call>
            <fact column="i_exp001" table="a" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>31</const>
            </call>
            <fact column="i_fact202" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>32</const>
            </call>
            <fact column="i_fact203" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>33</const>
            </call>
            <fact column="i_fact201" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>34</const>
            </call>
            <fact column="i_fact204" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>40</const>
            </call>
            <fact column="i_exp005" table="a" />
          </call>
        </call>
        <call function="case" as="f_val" type="number" title="Факт" group="sum">
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>10</const>
            </call>
            <fact column="i_fact006" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>20</const>
            </call>
            <fact column="i_exp002" table="a" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>31</const>
            </call>
            <fact column="i_fact302" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>32</const>
            </call>
            <fact column="i_fact303" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>33</const>
            </call>
            <fact column="i_fact301" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>34</const>
            </call>
            <fact column="i_fact304" table="a" mp="-3" />
          </call>
          <call function="when">
            <call function="=">
              <column table="item" column="kod" />
              <const>40</const>
            </call>
            <fact column="i_exp006" table="a" />
          </call>
        </call>
        <call function="-nvl" as="o_val" title="Отклонение" group="sum">
          <column table="this" column="f_val" />
          <column table="this" column="p_val" />
        </call>
        <call function="()" as="l_val" type="number" group="sum">
          <const>null</const>
        </call>
      </select>
      <from>
        <qube>
          <usepart part="va_rep_k422-cube" />
        </qube>
        <query name="va_acc_k423_item" join="left outer" as="item">
          <call function="true" />
        </query>
      </from>
      <grouping>
        <grset as="l1" order="item_ord">
          <group>
            <column table="this" column="item_name1" />
          </group>
          <grset as="l2" order="item_ord">
            <group>
              <column table="this" column="item_name2" />
            </group>
            <where>
              <call function="is not null">
                <column table="this" column="item_name2" />
              </call>
            </where>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="va_rep_k424" timestamp="06.02.2018 18:44:42" title="K424.Оценка работы менеджмента (высших и ведущих менеджеров)" is-report="1" can-use-simple-params="1" order="item_ord" nogrid="1" mode="excel" use-repository="1" comment="K423. Оценка выполнения Бизнес-плана по методике ПАО &quot;Газпром&quot;" file="sql.builder.templates\sql.builder\projects\mped\reports\va_rep_k424.xml">
      <print-templates>
        <excel>
          <template name="mpedK424.xlsx" title="K424" print-proc="2" print-xlsx="1" format-source="41050-format.xlsx" />
        </excel>
      </print-templates>
      <content>
        <usepart part="va_rep_k422-content" />
      </content>
      <usepart part="va_cons01-expressions" />
      <select>
        <column table="item" column="kod" as="item_kod" title="Статья" />
        <column table="item" column="name1" as="item_name1" title="Статья" />
        <column table="item" column="name2" as="item_name2" title="Статья" />
        <column table="item" column="ei_name" title="ЕИ" group="max" />
        <column table="item" column="ord" as="item_ord" title="Порядок" group="max" />
        <call function="if" as="p_val" type="number" title="План" group="sum">
          <call function="=">
            <column table="va_dr_i_x" column="kod_direct" />
            <column table="item" column="kod_direct" />
          </call>
          <call function="case">
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>1,4</array>
              </call>
              <fact column="i_fact005" table="a" mp="-3" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>2,5</array>
              </call>
              <fact column="i_exp001" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>3,6,7,8</array>
              </call>
              <fact column="i_exp007" table="a" mp="-3" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>9,10,11</array>
              </call>
              <call function="*">
                <call function="/">
                  <fact column="i_exp007" table="a" />
                  <fact column="i_exp007" table="a0" />
                </call>
                <const>100</const>
              </call>
            </call>
          </call>
        </call>
        <call function="if" as="f_val" type="number" title="Факт" group="sum">
          <call function="=">
            <column table="va_dr_i_x" column="kod_direct" />
            <column table="item" column="kod_direct" />
          </call>
          <call function="case">
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>1,4</array>
              </call>
              <fact column="i_fact006" table="a" mp="-3" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>2,5</array>
              </call>
              <fact column="i_exp002" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>3,6,7,8</array>
              </call>
              <fact column="i_exp008" table="a" mp="-3" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>9,10,11</array>
              </call>
              <call function="*">
                <call function="/">
                  <fact column="i_exp008" table="a" />
                  <fact column="i_exp008" table="a0" />
                </call>
                <const>100</const>
              </call>
            </call>
          </call>
        </call>
        <call function="-nvl" as="o_val" title="Отклонение" group="sum">
          <column table="this" column="f_val" />
          <column table="this" column="p_val" />
        </call>
      </select>
      <from>
        <qube star-scheme="1" single-way="1">
          <link name="va_dr_i_x" />
          <dimset as="a">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
            </where>
          </dimset>
          <dimset as="a0">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <call function="-">
                  <useparam name="p_god" />
                  <const>1</const>
                </call>
              </call>
              <call function="ge">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
            </where>
          </dimset>
          <where>
            <call function="in">
              <column table="va_dr_i_x" column="kod_direct" />
              <array>0,311,317</array>
            </call>
          </where>
        </qube>
        <query name="va_acc_k424_item" join="left outer" as="item">
          <call function="true" />
        </query>
      </from>
      <grouping>
        <grset as="l1" order="item_ord">
          <group>
            <column table="this" column="item_name1" />
          </group>
          <grset as="l2" order="item_ord">
            <group>
              <column table="this" column="item_name2" />
            </group>
            <where>
              <call function="is not null">
                <column table="this" column="item_name2" />
              </call>
            </where>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="va_rep_k425" timestamp="06.02.2018 18:44:42" title="K425. Лимит условно-постоянных расходов по линиям ответственности менеджеров" is-report="1" can-use-simple-params="1" order="item_ord" nogrid="1" mode="excel" use-repository="1" comment="K423. Оценка выполнения Бизнес-плана по методике ПАО &quot;Газпром&quot;" file="sql.builder.templates\sql.builder\projects\mped\reports\va_rep_k425.xml">
      <print-templates>
        <excel>
          <template name="mpedK425.xlsx" title="K425" print-proc="2" print-xlsx="1" format-source="41050-format.xlsx" />
        </excel>
      </print-templates>
      <content>
        <usepart part="va_rep_k422-content" />
      </content>
      <usepart part="va_cons01-expressions" />
      <select>
        <column table="item" column="kod" as="item_kod" title="Статья" />
        <column table="item" column="name1" as="item_name1" title="Статья" />
        <column table="item" column="name2" as="item_name2" title="Статья" />
        <column table="item" column="ord" as="item_ord" title="Порядок" group="max" />
        <call function="if" as="p_val" type="number" title="План" group="sum">
          <call function="or">
            <call function="=">
              <column table="va_dr_i_x" column="kod_direct" />
              <column table="item" column="kod_direct" />
            </call>
            <call function="and">
              <call function="=">
                <column table="item" column="kod_direct" />
                <const>351</const>
              </call>
              <call function="=">
                <column table="va_dr_i_x" column="kod_direct" />
                <const>327</const>
              </call>
            </call>
          </call>
          <call function="case">
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>1,2,6</array>
              </call>
              <fact column="i_fact210" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>3</array>
              </call>
              <fact column="i_fact207" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>4</array>
              </call>
              <fact column="i_fact208" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>5</array>
              </call>
              <fact column="i_fact209" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>7</array>
              </call>
              <fact column="i_fact211" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>8</array>
              </call>
              <fact column="i_fact212" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>9</array>
              </call>
              <fact column="i_fact241" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>10</array>
              </call>
              <fact column="i_fact213" table="a" />
            </call>
          </call>
        </call>
        <call function="if" as="f_val" type="number" title="Факт" group="sum">
          <call function="or">
            <call function="=">
              <column table="va_dr_i_x" column="kod_direct" />
              <column table="item" column="kod_direct" />
            </call>
            <call function="and">
              <call function="=">
                <column table="item" column="kod_direct" />
                <const>351</const>
              </call>
              <call function="=">
                <column table="va_dr_i_x" column="kod_direct" />
                <const>327</const>
              </call>
            </call>
          </call>
          <call function="case">
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>1,2,6</array>
              </call>
              <fact column="i_fact310" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>3</array>
              </call>
              <fact column="i_fact307" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>4</array>
              </call>
              <fact column="i_fact308" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>5</array>
              </call>
              <fact column="i_fact309" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>7</array>
              </call>
              <fact column="i_fact311" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>8</array>
              </call>
              <fact column="i_fact312" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>9</array>
              </call>
              <fact column="i_fact341" table="a" />
            </call>
            <call function="when">
              <call function="in">
                <column table="item" column="kod" />
                <array>10</array>
              </call>
              <fact column="i_fact313" table="a" />
            </call>
          </call>
        </call>
        <call function="-nvl" as="o_val" title="Отклонение" group="sum">
          <column table="this" column="f_val" />
          <column table="this" column="p_val" />
        </call>
      </select>
      <from>
        <qube star-scheme="1" single-way="1">
          <link name="va_dr_i_x" />
          <dimset as="a">
            <link name="va_god" only-for-cond="1" />
            <link name="va_mes" only-for-cond="1" />
            <where>
              <call function="=">
                <column table="va_god" column="val" />
                <useparam name="p_god" />
              </call>
              <call function="ge">
                <column table="va_mes" column="val" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="va_mes" column="val" />
                <useparam name="p_mes2" />
              </call>
            </where>
          </dimset>
          <where>
            <call function="in">
              <column table="va_dr_i_x" column="kod_direct" />
              <array>327,351,311,317</array>
            </call>
          </where>
        </qube>
        <query name="va_acc_k425_item" join="left outer" as="item">
          <call function="true" />
        </query>
      </from>
      <grouping>
        <grset as="l1" order="item_ord">
          <group>
            <column table="this" column="item_name1" />
          </group>
          <grset as="l2" order="item_ord">
            <group>
              <column table="this" column="item_name2" />
            </group>
            <where>
              <call function="is not null">
                <column table="this" column="item_name2" />
              </call>
            </where>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="vbr_calculation" timestamp="20.08.2019 16:58:05" is-report="1" title="Данные по статьям калькуляции" mode="excel" can-use-simple-params="1" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <print-templates>
        <excel>
          <template name="mped_calc.xlsx" title="Отчет по статьям калькуляции" print-proc="2" print-xlsx="1" />
        </excel>
      </print-templates>
      <events>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="ee_op">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="te_op">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="total_op">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="ee_vp">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="te_vp">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="total_vp">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="ee_opr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="te_opr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="total_opr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="ee_ohr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="te_ohr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="total_ohr">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
        <useaction event-name="double-click" action-type="open-column-grouping-detail" call="vbr_calc_details" column="total">
          <useparam name="p_kod_direct" />
          <useparam name="p_ym" />
          <useparam name="p_vd" />
          <useparam name="p_subj" />
          <useparam name="p_mode" />
          <useparam name="p_dir_arr" />
        </useaction>
      </events>
      <content>
        <usefield field="va_direct1" title="Подразделение" name="p_kod_direct" type="number" column-mandatory="1" show-checkbox="0" />
        <usefield type="string" field="cmn_string" name="p_dir_name" column-visible="0">
          <defaultquery>
            <query name="va_direct_name_by_kod" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
          <listquery>
            <query name="mped_spr_time_ym" />
          </listquery>
          <defaultquery>
            <query name="mped_spr_time_ym_prev" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_ym_str" type="string" column-visible="0">
          <defaultquery>
            <query name="mped_spr_time_ym_string" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_vd" title="Вид деятельности" type="number">
          <listquery>
            <query name="vb_spr_vid_dey_od_list" />
          </listquery>
          <defaultquery>
            <query name="vb_spr_vid_dey_od_list" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_vd_str" type="string" column-visible="0">
          <defaultquery>
            <query name="vb_spr_vid_dey_od_string" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_subj" type="number" title="Субъект РФ">
          <listquery>
            <query name="vb_spr_fed_subject" />
          </listquery>
          <defaultquery>
            <query name="vb_spr_fed_subject" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_subj_str" type="string" column-visible="0">
          <defaultquery>
            <query name="vb_spr_fed_subject_string" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_combo_num" show-checkbox="0" column-mandatory="1" name="p_mode" type="number" title="Режим просмотра данных">
          <listquery>
            <query name="vbr_calculation_mode" />
          </listquery>
          <defaultquery>
            <query name="vbr_calculation_mode_def" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_mode_str" type="string" column-visible="0">
          <defaultquery>
            <query name="vbr_calculation_mode_string" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
          <listquery exclude="1">
            <query name="is_spr_dr_tree_start_kod_dr" />
          </listquery>
          <defaultquery>
            <query name="is_spr_dr_tree_start_kod_dr" />
          </defaultquery>
        </usefield>
      </content>
      <select>
        <column column="kod_sp_calc" table="va_sp_calc_rep" />
        <column table="vb_spr_smet_calc" column="kod_spr_smet_calc" />
        <column table="vb_spr_smet_calc" column="smet_calc_name" />
        <call as="ee_op" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>3</const>
            </call>
            <call function="in" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>(0, 2, 9)</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_ee" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="te_op" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>3</const>
            </call>
            <call function="in" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>(0, 2, 9)</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_te" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="total_op" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>3</const>
            </call>
            <call function="in" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>(0, 2, 9)</const>
            </call>
            <call function="*">
              <call function="+nvl">
                <fact column="va_sp_calc_rep_dr_ee" table="all" />
                <fact column="va_sp_calc_rep_dr_te" table="all" />
              </call>
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="ee_vp" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>0</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>3</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_ee" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="te_vp" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>0</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>3</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_te" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="total_vp" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>0</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>3</const>
            </call>
            <call function="*">
              <call function="+nvl">
                <fact column="va_sp_calc_rep_dr_ee" table="all" />
                <fact column="va_sp_calc_rep_dr_te" table="all" />
              </call>
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="ee_opr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>1</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>5</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_ee" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="te_opr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>1</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>5</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_te" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="total_opr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>1</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>5</const>
            </call>
            <call function="*">
              <call function="+nvl">
                <fact column="va_sp_calc_rep_dr_ee" table="all" />
                <fact column="va_sp_calc_rep_dr_te" table="all" />
              </call>
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="ee_ohr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>2</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>6</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_ee" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="te_ohr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>2</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>6</const>
            </call>
            <call function="*">
              <fact column="va_sp_calc_rep_dr_te" table="all" />
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="total_ohr" type="number" function="case" group="sum">
          <call function="when">
            <call function="=">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>2</const>
            </call>
            <call function="=" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>6</const>
            </call>
            <call function="*">
              <call function="+nvl">
                <fact column="va_sp_calc_rep_dr_ee" table="all" />
                <fact column="va_sp_calc_rep_dr_te" table="all" />
              </call>
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <call as="total" type="number" function="case" group="sum">
          <call function="when">
            <call function="in">
              <column table="vb_spr_schet_calc" column="kod_spr_schet_list" />
              <const>(0, 1, 2, 3)</const>
            </call>
            <call function="in" exclude="1">
              <column table="vb_spr_schet_calc" column="kod_schet" />
              <const>(0, 2, 3, 5, 6, 9)</const>
            </call>
            <call function="*">
              <call function="+nvl">
                <fact column="va_sp_calc_rep_dr_ee" table="all" />
                <fact column="va_sp_calc_rep_dr_te" table="all" />
              </call>
              <call function="if">
                <call function="and">
                  <call function="=">
                    <useparam name="p_mode" />
                    <const>3</const>
                  </call>
                </call>
                <const>-1</const>
                <const>1</const>
              </call>
            </call>
          </call>
        </call>
        <fact column="vb_spr_smet_calc_schet_no_mb3" group="min" />
      </select>
      <from>
        <qube single-way="1">
          <link name="vb_spr_smet_calc" />
          <dimset as="all">
            <link name="va_sp_calc_rep" only-for-cond="1" />
            <link name="is_spr_smet" only-for-cond="1" exclude="1" />
            <link name="va_direct" only-for-cond="1" />
            <link name="va_direct2" only-for-cond="1" />
            <link name="va_direct3" only-for-cond="1" />
            <link name="vb_spr_vid_dey" only-for-cond="1" />
            <link name="vb_spr_vid_energ" only-for-cond="1" />
            <link name="vb_spr_od_nd" only-for-cond="1" />
            <link name="ym" only-for-cond="1" />
            <link name="month" only-for-cond="1" />
            <link name="vb_spr_smet_zatr_calc" />
            <link name="vb_spr_schet_calc" />
            <link name="vb_spr_fed_subject" only-for-cond="1" />
            <link name="vbr_calculation_mode" only-for-cond="1" />
            <link name="vb_spr_rasp_zatr" only-for-cond="1" />
            <where>
              <call type="" function="and" as="">
                <call function="=" exclude="1">
                  <column table="is_spr_smet" column="prizn" />
                  <column table="vb_spr_vid_dey" column="prizn" />
                </call>
                <call function="=">
                  <column table="vb_spr_vid_dey" column="prizn" />
                  <const>0</const>
                </call>
                <call function="is not null">
                  <column table="vb_spr_smet_calc" column="kod_spr_smet_calc" />
                </call>
                <call function="in">
                  <column table="ym" column="val" />
                  <useparam name="p_ym" />
                </call>
                <call function="in">
                  <column table="vb_spr_vid_dey" column="kod_spr_vid_dey" />
                  <useparam name="p_vd" />
                </call>
                <call function="in">
                  <column table="vb_spr_fed_subject" column="kod_spr_subj" />
                  <useparam name="p_subj" />
                </call>
                <call function="or">
                  <call function="and">
                    <call function="=">
                      <useparam name="p_mode" />
                      <const>0</const>
                    </call>
                    <call function="in">
                      <column table="va_direct2" column="kod_direct" />
                      <useparam name="p_dir_arr" />
                    </call>
                  </call>
                  <call function="and">
                    <call function="=">
                      <useparam name="p_mode" />
                      <const>1</const>
                    </call>
                    <call function="in">
                      <column table="va_direct" column="kod_direct" />
                      <useparam name="p_dir_arr" />
                    </call>
                  </call>
                  <call function="and">
                    <call function="=">
                      <useparam name="p_mode" />
                      <const>2</const>
                    </call>
                    <call function="in">
                      <column table="va_direct2" column="kod_direct" />
                      <useparam name="p_dir_arr" />
                    </call>
                    <call function="!=">
                      <column table="va_sp_calc_rep" column="mvp_kod" />
                      <call function="substr">
                        <column table="va_sp_calc_rep" column="mb3_kod" />
                        <const>1</const>
                        <const>4</const>
                      </call>
                    </call>
                  </call>
                  <call function="and">
                    <call function="=">
                      <useparam name="p_mode" />
                      <const>3</const>
                    </call>
                    <call function="in">
                      <column table="va_direct3" column="kod_direct" />
                      <useparam name="p_dir_arr" />
                    </call>
                    <call function="!=">
                      <column table="va_sp_calc_rep" column="mvp_kod" />
                      <call function="nvl">
                        <call function="substr">
                          <column table="va_sp_calc_rep" column="mb3_kod" />
                          <const>1</const>
                          <const>4</const>
                        </call>
                        <column table="va_sp_calc_rep" column="mvp_partner_kod" />
                      </call>
                    </call>
                  </call>
                  <call function="and">
                    <call function="=">
                      <useparam name="p_mode" />
                      <const>4</const>
                    </call>
                    <call function="or">
                      <call function="in" comment="Затраты выбранного подразделения">
                        <column table="va_direct" column="kod_direct" />
                        <useparam name="p_dir_arr" />
                      </call>
                      <call function="and" comment="Затраты от распределения">
                        <call function="is not null">
                          <column table="vb_spr_rasp_zatr" column="kod_spr_rasp_zatr" />
                        </call>
                        <call function="in">
                          <column table="va_direct2" column="kod_direct" />
                          <useparam name="p_dir_arr" />
                        </call>
                        <call function="!=">
                          <column table="va_sp_calc_rep" column="mvp_kod" />
                          <call function="substr">
                            <column table="va_sp_calc_rep" column="mb3_kod" />
                            <const>1</const>
                            <const>4</const>
                          </call>
                        </call>
                      </call>
                    </call>
                  </call>
                </call>
              </call>
            </where>
          </dimset>
        </qube>
      </from>
      <grouping>
        <grset as="all" title="Всего">
          <grset as="sc" order="smet_calc_name" title="По статьям для калькуляции">
            <group>
              <sourcelink table="vb_spr_smet_calc" />
            </group>
            <grset as="rep">
              <group>
                <sourcelink table="va_sp_calc_rep" />
              </group>
            </grset>
          </grset>
        </grset>
      </grouping>
      <having exclude="1">
        <call function="!=0">
          <column table="this" column="total" />
        </call>
      </having>
    </query>
    <query name="vbr_calculation_mode" timestamp="20.08.2019 14:05:36" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <const as="id" type="number">0</const>
      <const as="name" type="string" title="1">'Все затраты'</const>
      <const>1</const>
      <const>'Затраты выбранного подразделения'</const>
      <const>2</const>
      <const>'Распределенные затраты (полученные)'</const>
      <const>3</const>
      <const>'Распределенные затраты (переданные)'</const>
      <const>4</const>
      <const>'Затраты выбранного подразделения с учетом ПСДТУиИТ'</const>
    </query>
    <query name="vbr_calculation_mode_def" timestamp="24.07.2019 18:17:12" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <select>
        <column table="a" column="id" />
        <column table="a" column="name" />
      </select>
      <from>
        <query name="vbr_calculation_mode" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="id" />
          <const>0</const>
        </call>
      </where>
    </query>
    <query name="vbr_calc_details" timestamp="20.08.2019 14:57:06" is-report="1" title="Детализация отчета по статьям калькуляции" visible="0" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_kod_direct" type="number" />
        <param name="p_ym" type="array" />
        <param name="p_vd" type="array" />
        <param name="p_subj" type="array" />
        <param name="p_mode" type="number" />
        <param type="array" name="p_dir_arr" />
      </params>
      <select>
        <column table="va_sp_calc_rep" column="kod_sp_calc" key="1" column-visible="0" format="F0" title="R" />
        <column table="vb_spr_smet_calc" column="kod_spr_smet_calc" column-visible="0" />
        <column table="va_sp_calc_rep" column="kod_direct2" column-visible="0" />
        <column table="va_sp_calc_rep" column="kod_direct3" column-visible="0" />
        <band title="Вид деятельности">
          <column table="va_sp_calc_rep" column="vid_dey_kod" title="Код" column-width="39" format="F0" />
          <column table="va_sp_calc_rep" column="vid_dey_name" title="Наименование" column-width="120" />
          <column table="vb_spr_vid_energ" column="vid_energ_name" column-width="94" />
          <column table="vb_spr_od_nd" column="od_nd_name" column-width="63" />
        </band>
        <band title="Объект генерации">
          <column table="va_sp_calc_rep" column="ob_gen_kod" title="Код" column-width="64" />
          <column table="va_sp_calc_rep" column="ob_gen_name" title="Наименование" column-width="133" />
        </band>
        <column table="va_sp_calc_rep" column="period" column-width="67" title="Период" format="F2" />
        <band title="Субъект РФ">
          <column table="va_sp_calc_rep" column="subject_fed_kod" title="Код" column-width="39" format="F0" />
          <column table="va_sp_calc_rep" column="subject_fed_name" title="Наименование" column-width="110" />
        </band>
        <band title="Заказ">
          <column table="va_sp_calc_rep" column="zakaz_kod" title="Код" column-width="39" />
          <column table="va_sp_calc_rep" column="zakaz_name" title="Наименование" column-width="92" />
        </band>
        <band title="МВЗ">
          <column table="va_sp_calc_rep" column="mb3_kod" title="Код" column-width="94" column-editable="1" />
          <column table="va_sp_calc_rep" column="mb3_name" title="Наименование" column-width="133" column-editable="1" />
          <column table="va_sp_calc_rep" column="kod_schet_mb3" column-width="133" title="Код счета МВЗ" />
        </band>
        <band title="МВП: Партнер">
          <column table="va_sp_calc_rep" column="mvp_partner_kod" title="Код" column-width="53" column-editable="1" />
          <column table="va_sp_calc_rep" column="mvp_partner_name" title="Наименование" column-width="129" column-editable="1" />
        </band>
        <band title="Элемент затрат">
          <column table="va_sp_calc_rep" column="el_zatr_kod" title="Код" column-width="87" format="F0" />
          <column table="va_sp_calc_rep" column="el_zatr_name" title="Наименование" column-width="103" />
        </band>
        <band title="МВП">
          <column table="va_sp_calc_rep" column="mvp_kod" title="Код" column-width="60" column-editable="1" />
          <column table="va_sp_calc_rep" column="mvp_name" title="Наименование" column-width="129" column-editable="1" />
        </band>
        <column table="va_sp_calc_rep" column="vyruchka" title="Выручка" column-width="63" />
        <column table="va_sp_calc_rep" column="vol_sbyt" title="ОбъемСбыта" column-width="85" />
        <column table="va_sp_calc_rep" column="zatr" title="Затраты" column-width="91" />
        <column table="va_sp_calc_rep" column="tut" title="ТУТ" column-width="85" />
        <column table="va_sp_calc_rep" column="rash_vod_m3" title="РасхВод М3" column-width="78" />
        <column table="va_sp_calc_rep" column="rash_vod_t" title="РасхВод Т" column-width="70" />
        <column table="va_sp_calc_rep" column="rez_tepl_nag" title="РезТеплНаг" column-width="78" />
        <column table="va_sp_calc_rep" column="pris_tep_nag" title="ПрисТепНаг" column-width="79" />
      </select>
      <from>
        <qube star-scheme="1">
          <link name="vb_spr_smet_calc" />
          <dimset as="all">
            <link name="va_sp_calc_rep" />
            <link name="is_spr_smet" exclude="1" />
            <link name="va_direct" />
            <link name="va_direct2" />
            <link name="va_direct3" />
            <link name="vb_spr_vid_dey" />
            <link name="vb_spr_vid_energ" />
            <link name="vb_spr_od_nd" />
            <link name="ym" />
            <link name="month" />
            <link name="vb_spr_smet_zatr_calc" />
            <link name="vb_spr_schet_calc" />
            <link name="vb_spr_fed_subject" />
            <link name="vbr_calculation_mode" />
            <link name="vb_spr_rasp_zatr" />
          </dimset>
        </qube>
      </from>
    </query>
    <query name="vbr_calculation_mode_string" class="1" timestamp="25.07.2019 17:35:54" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_mode" type="number" />
      </params>
      <select>
        <column table="a" column="name" data-size="300" key="1" group="max" />
      </select>
      <from>
        <query name="vbr_calculation_mode" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="id" />
          <useparam name="p_mode" />
        </call>
      </where>
    </query>
    <query name="vbr_calculation_svod_old" timestamp="30.08.2019 16:44:14" is-report="1" title="Сводный отчет по калькуляции" mode="excel" can-use-simple-params="1" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <procedure>
    begin
        vb_refs.report_calc_svod(:p_ym_str);
    end;
</procedure>
      <print-templates>
        <excel>
          <template name="mped_calc_svod.xlsx" print-proc="2" print-xlsx="1" title="Сводный отчет по калькуляции" />
        </excel>
      </print-templates>
      <content>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
          <listquery>
            <query name="mped_spr_time_ym" />
          </listquery>
          <defaultquery>
            <query name="mped_spr_time_ym_prev" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_ym_str" type="string" column-visible="0">
          <defaultquery>
            <query name="mped_spr_time_ym_string" />
          </defaultquery>
        </usefield>
      </content>
      <select>
        <call as="id" function="rownum" />
        <column column="skod" table="a" type="string" />
        <column as="excel_list" column="s1" table="a" type="string" />
        <column as="ord" column="n1" table="a" type="number" />
        <column as="name" column="s2" table="a" type="string" />
        <column as="teplo_ee" column="n2" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="teplo_te" column="n3" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="voda_ee" column="n4" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="voda_te" column="n5" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="opl_trud_ee" column="n6" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="opl_trud_te" column="n7" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="soc_ee" column="n8" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="soc_te" column="n9" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="amort_ee" column="n10" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="amort_te" column="n11" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="sod_obor_ee" column="n12" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="sod_obor_te" column="n13" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="ceh_ee" column="n14" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="ceh_te" column="n15" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="zavod_ee" column="n16" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="zavod_te" column="n17" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="usl_ryn_ee" column="n18" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="pokup_ee" column="n19" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="pokup_te" column="n20" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="total_ee" column="n21" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="total_te" column="n22" group="sum" mp="-3" nullif="0" table="a" type="number" />
        <column as="total" column="n23" group="sum" mp="-3" nullif="0" table="a" type="number" />
      </select>
      <from>
        <table as="a" name="rr_temp" />
      </from>
      <where>
        <call function="=">
          <column column="skod" table="this" />
          <const>'mped_rep_calculation_svod'</const>
        </call>
      </where>
      <grouping>
        <grset as="by_dep" title="По филиалам">
          <group>
            <column column="excel_list" table="this" />
          </group>
          <grset as="by_podr" order="ord" title="По подразделениям">
            <group>
              <column column="name" table="this" />
              <column column="ord" table="this" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="vbr_calculation_svod_by_dep" timestamp="02.07.2023 19:45:17" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <select>
        <call as="id" function="rownum" />
        <column table="a" column="skod" type="string" />
        <column table="a" column="s1" type="string" as="excel_list" />
        <column table="a" column="n1" type="number" as="ord" />
        <column table="a" column="s2" type="string" as="name" />
        <column table="a" column="n2" type="number" group="sum" as="teplo_ee" mp="-3" nullif="0" />
        <column table="a" column="n3" type="number" as="teplo_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n4" type="number" as="voda_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n5" type="number" as="voda_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n6" type="number" as="opl_trud_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n7" type="number" as="opl_trud_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n8" type="number" as="soc_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n9" type="number" as="soc_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n10" type="number" as="amort_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n11" type="number" as="amort_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n12" type="number" as="sod_obor_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n13" type="number" as="sod_obor_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n14" type="number" as="ceh_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n15" type="number" as="ceh_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n16" type="number" as="zavod_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n17" type="number" as="zavod_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n18" type="number" as="usl_ryn_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n19" type="number" as="pokup_ee_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n24" type="number" as="pokup_ee_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n20" type="number" as="pokup_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n21" type="number" as="total_ee" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n22" type="number" as="total_te" group="sum" mp="-3" nullif="0" />
        <column table="a" column="n23" type="number" as="total" group="sum" mp="-3" nullif="0" />
      </select>
      <from>
        <table name="rr_temp" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="skod" />
          <const>'mped_rep_calculation_svod'</const>
        </call>
      </where>
      <grouping>
        <grset as="by_dep" title="По филиалам">
          <group>
            <column table="this" column="excel_list" />
          </group>
          <grset as="by_podr" title="По подразделениям" order="ord">
            <group>
              <column table="this" column="name" />
              <column table="this" column="ord" />
            </group>
          </grset>
        </grset>
      </grouping>
    </query>
    <query name="vbr_calculation_svod_ref" timestamp="11.10.2019 14:03:44" order="ord" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <select>
        <call as="id" function="rownum" />
        <column table="a" column="skod" type="string" />
        <column table="a" column="n1" type="number" as="ord" />
        <column table="a" column="s2" type="string" as="name" />
        <column table="a" column="n2" type="number" as="vod_tax" mp="-3" nullif="0" />
        <column table="a" column="n3" type="number" as="en_hoz_ee" mp="-3" nullif="0" />
        <column table="a" column="n4" type="number" as="en_hoz_te" mp="-3" nullif="0" />
        <column table="a" column="n5" type="number" as="tax_ee" mp="-3" nullif="0" />
        <column table="a" column="n6" type="number" as="tax_te" mp="-3" nullif="0" />
        <column table="a" column="n7" type="number" as="remont_ee" mp="-3" nullif="0" />
        <column table="a" column="n8" type="number" as="remont_te" mp="-3" nullif="0" />
        <column table="a" column="n9" type="number" as="vod_tax_te" mp="-3" nullif="0" />
      </select>
      <from>
        <table name="rr_temp" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="skod" />
          <const>'mped_rep_calculation_svod_ref'</const>
        </call>
      </where>
    </query>
    <query name="vbr_calc_details_dev" is-report="1" title="Детализация отчета по статьям калькуляции" visible="0" timestamp="30.07.2023 17:38:58" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_ym" type="array" />
        <param name="p_sheet" type="string" />
        <param name="p_line" type="string" />
        <param name="p_col" type="string" />
      </params>
      <select>
        <call function="()" type="string" as="sheet" title="sheet">
          <useparam name="p_sheet" />
        </call>
        <call function="()" type="string" as="line" title="row">
          <useparam name="p_line" />
        </call>
        <call function="()" type="string" as="col" title="column">
          <useparam name="p_col" />
        </call>
        <column table="a" column="ym" key="1" />
        <column table="a" column="name" />
      </select>
      <from>
        <query name="mped_spr_time_ym" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="ym" />
          <useparam name="p_ym" />
        </call>
      </where>
    </query>
    <query name="vbr_calc_details_proc_dev" is-report="1" title="Детализация отчета по статьям калькуляции" visible="0" timestamp="30.07.2023 18:00:15" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_ym_str" type="array" />
        <param name="p_sheet" type="string" />
        <param name="p_line" type="string" />
        <param name="p_col" type="string" />
      </params>
      <procedure><![CDATA[ begin
        vb_refs.report_calc_svod_detail(:p_ym_str,:p_sheet,:p_line,:p_col);
    end;
]]></procedure>
      <select>
        <call function="row_num" as="rn" key="1">
          <const>1</const>
        </call>
        <column table="a" column="s1" as="yms" title="yms" />
        <column table="a" column="s2" title="sheet" as="sheet" />
        <column table="a" column="s3" as="line" title="row" />
        <column table="a" column="s4" as="col" title="column" />
      </select>
      <from>
        <query name="rr_temp" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="skod" />
          <const>'mped_rep_calculation_svod_detail'</const>
        </call>
      </where>
    </query>
    <query name="vbr_calc_svod_details" is-report="1" title="Детализация Сводного отчета по калькуляции" visible="0" timestamp="24.08.2023 17:08:29" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_ym_str" type="array" />
        <param name="p_sheet" type="string" />
        <param name="p_line" type="string" />
        <param name="p_col" type="string" />
      </params>
      <procedure><![CDATA[ begin
        vb_refs.report_calc_svod_detail(:p_ym_str,:p_sheet,:p_line,:p_col);
    end;
]]></procedure>
      <select>
        <column table="a" column="n1" key="1" column-visible="0" format="F0" title="R" as="kod_sp_calc" />
        <band title="Вид деятельности">
          <column table="a" column="n2" title="Код" column-width="39" format="F0" as="vid_dey_kod" />
          <column table="a" column="s1" title="Наименование" column-width="120" as="vid_dey_name" />
          <column table="a" column="s2" column-width="94" as="vid_energ_name" />
          <column table="a" column="s3" column-width="63" as="od_nd_name" />
        </band>
        <band title="Объект генерации">
          <column table="a" column="s4" title="Код" column-width="64" as="ob_gen_kod" />
          <column table="a" column="s5" title="Наименование" column-width="133" as="ob_gen_name" />
        </band>
        <column table="a" column="n3" column-width="67" title="Период" format="F2" as="period" />
        <band title="Субъект РФ">
          <column table="a" column="n4" title="Код" column-width="39" format="F0" as="subject_fed_kod" />
          <column table="a" title="Наименование" column-width="110" column="s6" as="subject_fed_name" />
        </band>
        <band title="Заказ">
          <column table="a" column="s7" title="Код" column-width="39" as="zakaz_kod" />
          <column table="a" column="s8" title="Наименование" column-width="92" as="zakaz_name" />
        </band>
        <band title="МВЗ">
          <column table="a" column="s9" title="Код" column-width="94" column-editable="1" as="mb3_kod" />
          <column table="a" column="s10" title="Наименование" column-width="133" column-editable="1" as="mb3_name" />
          <column table="a" column="n5" column-width="133" title="Код счета МВЗ" as="kod_schet_mb3" />
        </band>
        <band title="МВП: Партнер">
          <column table="a" column="s11" title="Код" column-width="53" column-editable="1" as="mvp_partner_kod" />
          <column table="a" column="s12" title="Наименование" column-width="129" column-editable="1" as="mvp_partner_name" />
        </band>
        <band title="Элемент затрат">
          <column table="a" column="n6" title="Код" column-width="87" format="F0" as="el_zatr_kod" />
          <column table="a" column="s13" title="Наименование" column-width="103" as="el_zatr_name" />
        </band>
        <band title="МВП">
          <column table="a" column="s14" title="Код" column-width="60" column-editable="1" as="mvp_kod" />
          <column table="a" column="s15" title="Наименование" column-width="129" column-editable="1" as="mvp_name" />
        </band>
        <column table="a" column="n7" title="Выручка" column-width="63" as="vyruchka" />
        <column table="a" column="n8" title="ОбъемСбыта" column-width="85" as="vol_sbyt" />
        <column table="a" column="n9" title="Затраты" column-width="91" as="zatr" />
        <column table="a" column="n10" title="ТУТ" column-width="85" as="tut" />
        <column table="a" column="n11" title="РасхВод М3" column-width="78" as="rash_vod_m3" />
        <column table="a" column="n12" title="РасхВод Т" column-width="70" as="rash_vod_t" />
        <column table="a" column="n13" title="РезТеплНаг" column-width="78" as="rez_tepl_nag" />
        <column table="a" column="n14" title="ПрисТепНаг" column-width="79" as="pris_tep_nag" />
      </select>
      <from>
        <query name="rr_temp" as="a" />
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="skod" />
            <const>'mped_rep_calculation_svod_detail'</const>
          </call>
          <call function="=">
            <column table="a" column="polzov" />
            <const>user</const>
          </call>
        </call>
      </where>
    </query>
    <query name="vbd_sap_mb3" timestamp="03.03.2019 22:46:53" file="sql.builder.templates\sql.builder\projects\mped\sap\dims.xml">
      <select>
        <column table="a" column="sap_code" group="1" key="1" />
      </select>
      <from>
        <query name="vb_dir_to_sap" as="a" />
      </from>
    </query>
    <query name="vbd_sap_st" timestamp="03.03.2019 19:07:37" file="sql.builder.templates\sql.builder\projects\mped\sap\dims.xml">
      <select>
        <column table="a" column="sap_code" group="1" key="1" />
      </select>
      <from>
        <query name="vb_spr_smet_to_sap" as="a" />
      </from>
    </query>
    <query name="vbr_sap_decode_check" timestamp="22.06.2019 17:55:04" title="Данные SAP в разрезе статей (Доходы и расходы)" is-report="1" mode="tree" order="ord" parent-node-id="kod_parent" file="sql.builder.templates\sql.builder\projects\mped\sap\rep.xml">
      <content>
        <usepart part="va_priod_fields" />
        <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
        <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
          <listquery exclude="1">
            <query name="is_spr_dr_tree_start_kod_dr" />
          </listquery>
          <defaultquery>
            <query name="is_spr_dr_tree_start_kod_dr" />
          </defaultquery>
        </usefield>
      </content>
      <select>
        <column table="a" column="kod_spr_smet" />
        <column table="a" column="full_name" />
        <column table="a" column="kod_parent" />
        <column table="a" column="ord" />
        <column table="a" column="dr_ee" />
        <column table="a" column="dr_te" />
        <column table="a" column="dr_od" />
        <column table="a" column="dr_nd" />
        <column table="a" column="vb_spr_smet_to_sap_sap_code" />
        <column table="a" column="dat_finish" />
      </select>
      <from>
        <query name="vbr_sap_decode_check_rep" as="a">
          <withparams>
            <useparam name="p_dir_arr" />
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
            <useparam name="p_ym1" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="vbr_sap_decode_check_rep" timestamp="22.08.2019 16:34:19" file="sql.builder.templates\sql.builder\projects\mped\sap\rep.xml">
      <params>
        <param name="p_dir_arr" type="array" />
        <param name="p_god" type="number" />
        <param name="p_mes1" type="number" />
        <param name="p_mes2" type="number" />
        <param name="p_ym1" type="number" />
      </params>
      <select>
        <column table="a" column="kod_spr_smet" />
        <column table="a" column="full_name" />
        <column table="a" column="kod_parent" />
        <column table="a" column="ord" />
        <call function="()" title="Э/Э" as="dr_ee" nullif="0" type="number">
          <query>
            <select>
              <call function="sum">
                <column table="b" column="va_sp_calc_rep_dr_ee" />
              </call>
            </select>
            <from>
              <query name="vbr_sap_decode_check_pre" as="b">
                <withparams>
                  <useparam name="p_dir_arr" />
                  <useparam name="p_god" />
                  <useparam name="p_mes1" />
                  <useparam name="p_mes2" />
                </withparams>
              </query>
            </from>
            <where>
              <call function="or">
                <call function="=0">
                  <column table="b" column="included" />
                </call>
                <call function="not in">
                  <column table="a" column="kod_spr_smet" />
                  <query>
                    <select>
                      <column table="inc" column="kod_parent" />
                    </select>
                    <from>
                      <query name="is_spr_smet_parent_list_for_included" as="inc" />
                    </from>
                  </query>
                </call>
              </call>
            </where>
            <start>
              <call function="=">
                <column table="b" column="kod_spr_smet" />
                <column table="a" column="kod_spr_smet" />
              </call>
            </start>
            <connect>
              <call function="and">
                <call function="=">
                  <column table="b" column="kod_spr_smet" prior="1" />
                  <column table="b" column="kod_parent" />
                </call>
              </call>
            </connect>
          </query>
        </call>
        <call function="()" title="Т/Э" as="dr_te" nullif="0" type="number">
          <query>
            <select>
              <call function="sum">
                <column table="b" column="va_sp_calc_rep_dr_te" />
              </call>
            </select>
            <from>
              <query name="vbr_sap_decode_check_pre" as="b">
                <withparams>
                  <useparam name="p_dir_arr" />
                  <useparam name="p_god" />
                  <useparam name="p_mes1" />
                  <useparam name="p_mes2" />
                </withparams>
              </query>
            </from>
            <where>
              <call function="or">
                <call function="=0">
                  <column table="b" column="included" />
                </call>
                <call function="not in">
                  <column table="a" column="kod_spr_smet" />
                  <query>
                    <select>
                      <column table="inc" column="kod_parent" />
                    </select>
                    <from>
                      <query name="is_spr_smet_parent_list_for_included" as="inc" />
                    </from>
                  </query>
                </call>
              </call>
            </where>
            <start>
              <call function="=">
                <column table="b" column="kod_spr_smet" />
                <column table="a" column="kod_spr_smet" />
              </call>
            </start>
            <connect>
              <call function="and">
                <call function="=">
                  <column table="b" column="kod_spr_smet" prior="1" />
                  <column table="b" column="kod_parent" />
                </call>
              </call>
            </connect>
          </query>
        </call>
        <call as="dr_od" title="ОД Итого" function="+nvl" nullif="0">
          <column table="this" column="dr_ee" />
          <column table="this" column="dr_te" />
        </call>
        <call function="()" title="НД" as="dr_nd" nullif="0" type="number">
          <query>
            <select>
              <call function="sum">
                <column table="b" column="va_sp_calc_rep_dr_nd" />
              </call>
            </select>
            <from>
              <query name="vbr_sap_decode_check_pre" as="b">
                <withparams>
                  <useparam name="p_dir_arr" />
                  <useparam name="p_god" />
                  <useparam name="p_mes1" />
                  <useparam name="p_mes2" />
                </withparams>
              </query>
            </from>
            <where>
              <call function="or">
                <call function="=0">
                  <column table="b" column="included" />
                </call>
                <call function="not in">
                  <column table="a" column="kod_spr_smet" />
                  <query>
                    <select>
                      <column table="inc" column="kod_parent" />
                    </select>
                    <from>
                      <query name="is_spr_smet_parent_list_for_included" as="inc" />
                    </from>
                  </query>
                </call>
              </call>
            </where>
            <start>
              <call function="=">
                <column table="b" column="kod_spr_smet" />
                <column table="a" column="kod_spr_smet" />
              </call>
            </start>
            <connect>
              <call function="and">
                <call function="=">
                  <column table="b" column="kod_spr_smet" prior="1" />
                  <column table="b" column="kod_parent" />
                </call>
              </call>
            </connect>
          </query>
        </call>
        <fact column="vb_spr_smet_to_sap_sap_code" title="SAP коды статей" />
        <column table="a" column="dat_finish" />
        <call title="СЕБЕСТОИМОСТЬ" as="sum_seb" function="over" type="number">
          <call function="sum">
            <call function="if">
              <call function="=">
                <column table="this" column="kod_spr_smet" />
                <const comment="РАСХОДЫ по основной деятельности">60</const>
              </call>
              <column table="this" column="dr_od" />
              <const>0</const>
            </call>
          </call>
          <call function="partition by">
            <const>1</const>
          </call>
        </call>
      </select>
      <from>
        <query name="is_spr_smet" as="a" />
        <query name="vbr_sap_decode_check_facts" join="cross" as="f" exclude="1" />
      </from>
      <where>
        <call function="le">
          <useparam name="p_ym1" />
          <call function="nvl">
            <column table="this" column="dat_finish" />
            <call function="date to ym2">
              <call function="sysdate" />
            </call>
          </call>
        </call>
      </where>
    </query>
    <query name="vbr_sap_decode_check_facts" timestamp="24.06.2019 18:36:02" materialize="1" file="sql.builder.templates\sql.builder\projects\mped\sap\rep.xml">
      <params>
        <param name="p_dir_arr" type="array" />
        <param name="p_god" type="number" />
        <param name="p_mes1" type="number" />
        <param name="p_mes2" type="number" />
        <param name="p_kod_spr_smet" type="number" />
      </params>
      <select>
        <fact column="va_sp_doh_ras_rep_dr_ee" group="sum" />
        <fact column="va_sp_doh_ras_rep_dr_te" group="sum" />
        <fact column="va_sp_doh_ras_rep_dr_nd" group="sum" />
      </select>
      <from>
        <query name="vbr_sap_decode_check_pre" as="a">
          <withparams>
            <useparam name="p_dir_arr" />
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
          </withparams>
        </query>
      </from>
      <start>
        <call function="=">
          <column table="a" column="kod_spr_smet" />
          <useparam name="p_kod_spr_smet" />
        </call>
      </start>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_spr_smet" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </connect>
    </query>
    <query name="vbr_sap_decode_check_pre" timestamp="12.08.2019 15:34:39" materialize="1" file="sql.builder.templates\sql.builder\projects\mped\sap\rep.xml">
      <params>
        <param name="p_dir_arr" type="array" />
        <param name="p_god" type="number" />
        <param name="p_mes1" type="number" />
        <param name="p_mes2" type="number" />
      </params>
      <select>
        <column table="s" column="kod_spr_smet" key="1" />
        <column table="s" column="full_name" />
        <column table="s" column="kod_parent" />
        <column table="s" column="ord" />
        <column table="s" column="included" />
        <fact column="va_sp_calc_rep_dr_ee" as="va_sp_calc_rep_dr_ee" />
        <fact column="va_sp_calc_rep_dr_te" as="va_sp_calc_rep_dr_te" />
        <fact column="va_sp_calc_rep_dr_nd" as="va_sp_calc_rep_dr_nd" />
        <fact column="va_sp_doh_ras_rep_dr_ee" exclude="1" />
        <fact column="va_sp_doh_ras_rep_dr_te" exclude="1" />
        <fact column="va_sp_doh_ras_rep_dr_nd" exclude="1" />
      </select>
      <from>
        <qube single-way="1">
          <link name="va_direct" only-for-cond="1" />
          <link name="is_spr_smet" />
          <link name="vb_spr_vid_dey" only-for-cond="1" />
          <link name="year" only-for-cond="1" />
          <link name="month" only-for-cond="1" />
          <link name="vb_spr_smet_to_sap" exclude="1" />
          <where>
            <call type="" function="and" as="" optional="1">
              <call function="in">
                <column table="va_direct" column="kod_direct" />
                <useparam name="p_dir_arr" />
              </call>
              <call function="and">
                <call function="=">
                  <column table="year" column="val" />
                  <useparam name="p_god" />
                </call>
                <call function="ge">
                  <column table="month" column="val" />
                  <useparam name="p_mes1" />
                </call>
                <call function="le">
                  <column table="month" column="val" />
                  <useparam name="p_mes2" />
                </call>
              </call>
              <call function="=">
                <column table="is_spr_smet" column="prizn" />
                <column table="vb_spr_vid_dey" column="prizn" />
              </call>
            </call>
          </where>
        </qube>
        <query name="is_spr_smet" as="s" join="right outer">
          <call function="=">
            <column table="s" column="kod_spr_smet" />
            <column table="is_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_plan_smet_x" class="1" timestamp="01.02.2018 02:16:53" comment="Транспонирование данных is_plan_smet" stored="va_plan_smet_x_mv" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\is_plan_smet.xml">
      <select>
        <column table="a" column="kod_plan_smet" type="number" index="1" />
        <column table="a" column="kod_direct" type="number" index="1" />
        <column table="a" column="kod_spr_smet" type="number" index="1" />
        <column table="a" column="god" type="number" title="" index="1" />
        <column table="a" column="mes" type="number" title="" index="1" />
        <column table="a" column="val" type="number" title="" />
        <column table="a" column="vale" type="number" title="" />
      </select>
      <from>
        <table name="is_plan_smet_x" view="1" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left inner">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_smet_tree" timestamp="02.03.2019 23:35:31" class="1" comment="Вычисление головного узла" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\is_spr_smet.xml">
      <select>
        <column table="a" column="kod_spr_smet" key="1" />
        <call function="if" type="string" as="root_kod_smet">
          <call function="is not null">
            <column table="a" column="kod_parent" />
          </call>
          <column table="a" column="root_kod_smet" />
        </call>
      </select>
      <from>
        <query name="is_spr_smet_tree_pre" as="a" />
      </from>
    </query>
    <query name="is_spr_smet_tree_pre" timestamp="02.03.2019 23:33:28" class="1" comment="Вычисление головного узла" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\is_spr_smet.xml">
      <select>
        <column table="a" column="kod_spr_smet" key="1" />
        <call function="if" type="string" as="root_kod_smet" exclude="1">
          <call function="is not null">
            <column table="a" column="kod_parent" />
          </call>
          <call function="connect_by_root">
            <column table="a" column="kod_smet" />
          </call>
        </call>
        <call function="connect_by_root" as="root_kod_smet">
          <column table="a" column="kod_smet" />
        </call>
        <column table="a" column="kod_parent" />
      </select>
      <from>
        <query name="is_spr_smet" as="a" />
      </from>
      <start>
        <call function="is null">
          <column table="a" column="kod_parent" />
        </call>
      </start>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="a" column="kod_spr_smet" prior="1" />
          </call>
        </call>
      </connect>
    </query>
    <query name="va_acc_k422_item_dt" timestamp="04.12.2017 16:43:24" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k422_item1.xml">
      <const as="kod" type="number">1</const>
      <const as="name" type="string">'Чистая прибыль'</const>
      <const as="ord" type="number">1</const>
      <const as="ei_name" type="string">'млн.руб.'</const>
      <const>4</const>
      <const>'Рентабельность по EBITDA'</const>
      <const>2</const>
      <const>'%'</const>
    </query>
    <query name="va_acc_k422_item" timestamp="14.12.2017 21:52:40" class="1" title="Строки отчета k422" comment="Строки отчета k422" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k422_item1.xml">
      <select>
        <column table="a" column="kod" />
        <column table="a" column="name" />
        <column table="a" column="ord" />
        <column table="a" column="ei_name" />
      </select>
      <from>
        <query name="va_acc_k422_item_dt" as="a" />
        <query name="va_filial" as="va_filial" join="left outer" exclude="1">
          <call function="true" />
        </query>
      </from>
      <links exclude="1">
        <dlink name="va_filial" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="va_acc_k423_item_dt" timestamp="04.12.2017 17:42:31" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k423_item.xml">
      <const as="kod" type="number">10</const>
      <const as="name1" type="string">'Чистая прибыль'</const>
      <const as="name2" type="string">null</const>
      <const as="ord" type="number">1</const>
      <const as="ei_name" type="string">'млн.руб.'</const>
      <const>20</const>
      <const>'EBITDA'</const>
      <const>null</const>
      <const>2</const>
      <const>'млн.руб.'</const>
      <const>31</const>
      <const>'Управляемые условно-постоянные расходы'</const>
      <const>'ремонты (без учета расходов на сервисные контракты)'</const>
      <const>3</const>
      <const>'млн.руб.'</const>
      <const>32</const>
      <const>'Управляемые условно-постоянные расходы'</const>
      <const>'сервисные контракты'</const>
      <const>4</const>
      <const>'млн.руб.'</const>
      <const>33</const>
      <const>'Управляемые условно-постоянные расходы'</const>
      <const>'расходы на оплату труда'</const>
      <const>5</const>
      <const>'млн.руб.'</const>
      <const>34</const>
      <const>'Управляемые условно-постоянные расходы'</const>
      <const>'прочие управляемые расходы'</const>
      <const>6</const>
      <const>'млн.руб.'</const>
      <const>40</const>
      <const>'Среднемесячная заработная плата'</const>
      <const>null</const>
      <const>7</const>
      <const>'тыс. руб./ мес.'</const>
    </query>
    <query name="va_acc_k423_item" timestamp="14.12.2017 21:52:58" class="1" title="Строки отчета k423" comment="Строки отчета k423" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k423_item.xml">
      <select>
        <column table="a" column="kod" />
        <column table="a" column="name1" />
        <column table="a" column="name2" />
        <column table="a" column="ord" />
        <column table="a" column="ei_name" />
      </select>
      <from>
        <query name="va_acc_k423_item_dt" as="a" />
        <query name="va_filial" as="va_filial" join="left outer" exclude="1">
          <call function="true" />
        </query>
      </from>
      <links exclude="1">
        <dlink name="va_filial" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="va_acc_k424_item_dt" timestamp="12.12.2017 22:11:19" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k424_item.xml">
      <const as="kod" type="number">1</const>
      <const as="name1" type="string">'КПЭ высших менеджеров'</const>
      <const as="name2" type="string">'Чистая прибыль'</const>
      <const as="ord" type="number">1</const>
      <const as="ei_name" type="string">'млн.руб.'</const>
      <const as="kod_direct" type="number">0</const>
      <const>2</const>
      <const>'КПЭ высших менеджеров'</const>
      <const>'Рентабельность по EBITDA'</const>
      <const>2</const>
      <const>'%'</const>
      <const>0</const>
      <const>3</const>
      <const>'КПЭ высших менеджеров'</const>
      <const>'Удельные управляемые затраты'</const>
      <const>3</const>
      <const>'млн.руб.'</const>
      <const>0</const>
      <const>4</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Чистая прибыль'</const>
      <const>4</const>
      <const>'млн.руб.'</const>
      <const>0</const>
      <const>5</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Рентабельность по EBITDA'</const>
      <const>5</const>
      <const>'%'</const>
      <const>0</const>
      <const>6</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Удельные управляемые затраты (ТГК-1)'</const>
      <const>6</const>
      <const>'млн.руб.'</const>
      <const>0</const>
      <const>7</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Удельные управляемые затраты (филиал "Карельский")'</const>
      <const>7</const>
      <const>'млн.руб.'</const>
      <const>311</const>
      <const>8</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Удельные управляемые затраты (филиал "Кольский")'</const>
      <const>8</const>
      <const>'млн.руб.'</const>
      <const>317</const>
      <const>9</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Темп прироста условно-постоянных затрат на МВт установленной мощности (ТГК-1)'</const>
      <const>9</const>
      <const>'%'</const>
      <const>0</const>
      <const>10</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Темп прироста условно-постоянных затрат на МВт установленной мощности (филиал "Карельский")'</const>
      <const>10</const>
      <const>'%'</const>
      <const>311</const>
      <const>11</const>
      <const>'КПЭ ведущих менеджеров'</const>
      <const>'Темп прироста условно-постоянных затрат на МВт установленной мощности (филиал "Кольский")'</const>
      <const>11</const>
      <const>'%'</const>
      <const>317</const>
    </query>
    <query name="va_acc_k424_item" timestamp="14.12.2017 21:52:32" class="1" title="Строки отчета k424" comment="Строки отчета k424" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k424_item.xml">
      <select>
        <column table="a" column="kod" />
        <column table="a" column="name1" />
        <column table="a" column="name2" />
        <column table="a" column="ord" />
        <column table="a" column="ei_name" />
        <column table="a" column="kod_direct" />
      </select>
      <from>
        <query name="va_acc_k424_item_dt" as="a" />
        <query name="va_filial" as="va_filial" join="left outer" exclude="1">
          <call function="true" />
        </query>
      </from>
      <links exclude="1">
        <dlink name="va_filial" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="va_acc_k425_item_dt" timestamp="12.12.2017 23:37:18" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k425_item.xml">
      <const as="kod" type="number">1</const>
      <const as="name1" type="string">'Филиал "Кольский"'</const>
      <const as="name2" type="string">'Административный директор'</const>
      <const as="ord" type="number">1</const>
      <const as="kod_direct" type="number">237</const>
      <const>2</const>
      <const>'Филиал "Карельский"'</const>
      <const>'Административный директор'</const>
      <const>2</const>
      <const>311</const>
      <const>3</const>
      <const>' Управление ТГК-1'</const>
      <const>'Начальник департамента по правовым вопросам'</const>
      <const>3</const>
      <const>351</const>
      <const>4</const>
      <const>' Управление ТГК-1'</const>
      <const>'Начальник департамента по обеспечению физ. защиты и информ. безопасности'</const>
      <const>4</const>
      <const>351</const>
      <const>5</const>
      <const>' Управление ТГК-1'</const>
      <const>'Директор по персоналу'</const>
      <const>5</const>
      <const>351</const>
      <const>6</const>
      <const>' Управление ТГК-1'</const>
      <const>'Административный директор'</const>
      <const>6</const>
      <const>351</const>
      <const>7</const>
      <const>' Управление ТГК-1'</const>
      <const>'Руководитель аппарата генерального диpектоpа'</const>
      <const>7</const>
      <const>351</const>
      <const>8</const>
      <const>' Управление ТГК-1'</const>
      <const>'Начальник департамента управления имуществом'</const>
      <const>8</const>
      <const>351</const>
      <const>9</const>
      <const>' Управление ТГК-1'</const>
      <const>'Начальник департамента по связям с общественностью'</const>
      <const>9</const>
      <const>351</const>
      <const>10</const>
      <const>' Управление ТГК-1'</const>
      <const>'Директор Предприятия СДТУиИТ'</const>
      <const>10</const>
      <const>351</const>
    </query>
    <query name="va_acc_k425_item" timestamp="14.12.2017 21:53:08" class="1" title="Строки отчета k425" comment="Строки отчета k425" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_acc_k425_item.xml">
      <select>
        <column table="a" column="kod" />
        <column table="a" column="name1" />
        <column table="a" column="name2" />
        <column table="a" column="ord" />
        <column table="a" column="kod_direct" />
      </select>
      <from>
        <query name="va_acc_k425_item_dt" as="a" />
        <query name="va_filial" as="va_filial" join="left outer" exclude="1">
          <call function="true" />
        </query>
      </from>
    </query>
    <query name="va_dr_x_ds" timestamp="06.02.2018 18:33:56" class="1" comment="Обработка настроек орг структуры. Промежуточные данные. Все подразделения" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dir_sruct.xml">
      <select>
        <call function="||-" as="kod_dir_struct" key="1">
          <column table="this" column="kod_direct" />
          <column table="this" column="kod_dir_struct_type" />
        </call>
        <call function="||-" as="kod_parent">
          <column table="a" column="kod_parent_i" />
          <column table="this" column="kod_dir_struct_type" />
        </call>
        <column table="a" column="kod_direct" />
        <column table="b" column="kod_dir_struct_type" />
        <column table="va_dir_struct_opt" column="no_use" />
        <column table="va_dir_struct_opt" column="no_parent" />
        <column table="va_dir_struct_opt" column="no_self" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
        <query join="left outer" name="va_dir_struct_type" as="b" dname="va_dir_struct_x">
          <call function="true" />
        </query>
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type">
          <call function="=">
            <column table="this" column="kod_dir_struct_type" />
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
          </call>
        </query>
        <query name="va_dir_struct_opt" as="va_dir_struct_opt" join="left outer">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dir_struct_type" />
              <column table="va_dir_struct_opt" column="kod_dir_struct_type" />
            </call>
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="va_dir_struct_opt" column="kod_direct" />
            </call>
          </call>
        </query>
        <query join="left outer" name="is_spr_direct" as="kod_direct" dname="va_dir_struct_view">
          <call function="=">
            <column table="kod_direct" column="kod_direct" />
            <column table="this" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_dr_sq_struct_view" timestamp="01.03.2019 01:46:07" class="1" comment="Обработка настроек орг структуры. Промежуточные данные. Все или только используемые подразделения" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dir_sruct.xml">
      <params>
        <param type="number" name="p_use_all">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="a" column="kod_dir_struct" key="1" />
        <column table="a" column="kod_parent" />
        <column table="a" column="kod_direct" />
        <column table="kod_direct" column="namex" as="name" />
        <column table="a" column="kod_dir_struct_type" />
        <column table="va_dir_struct_opt" column="no_use" editable="is_sys" editable-invert="1" />
        <column table="va_dir_struct_opt" column="no_parent" editable="is_sys" editable-invert="1" />
        <column table="va_dir_struct_opt" column="no_self" editable="is_sys" editable-invert="1" />
        <column table="kod_dir_struct_type" column="is_sys" />
        <column table="va_dir_struct_opt" column="kod_dir_struct_opt" />
        <column table="va_dir_struct_opt" column="kod_direct" as="kod_direct_o" />
        <column table="va_dir_struct_opt" column="kod_dir_struct_type" title="kod_dir_struct_type" as="kod_dir_struct_type_o" />
      </select>
      <from>
        <query name="va_dr_x_ds" as="a">
          <link name="kod_direct" />
        </query>
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type" dname="va_dr_sq_struct_view">
          <call function="=">
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
            <column table="this" column="kod_dir_struct_type" />
          </call>
        </query>
        <query name="va_dir_struct_opt" as="va_dir_struct_opt" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dir_struct_type" />
              <column table="va_dir_struct_opt" column="kod_dir_struct_type" />
            </call>
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="va_dir_struct_opt" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
      <start>
        <call function="=">
          <column table="a" column="kod_direct" />
          <const>0</const>
        </call>
      </start>
      <connect>
        <call function="and">
          <call function="or">
            <call function="=0">
              <column table="va_dir_struct_opt" column="no_use" />
            </call>
            <call function="=1" optional="1">
              <useparam name="p_use_all" />
            </call>
          </call>
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="a" column="kod_dir_struct" prior="1" />
          </call>
        </call>
      </connect>
    </query>
    <query name="va_dr_x_dsa_x_u" timestamp="05.02.2018 20:53:45" class="1" comment="Применение настройки орг. структуры к различными источникам данных. Обработка.  Промежуточные данные." file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dir_sruct.xml">
      <select>
        <call function="||-" as="kod_dir_str_app_x" key="1">
          <column table="s" column="kod_dir_struct" />
          <column table="a" column="kod_dir_sruct_apply" />
        </call>
        <call function="||-" as="kod_parent">
          <column table="s" column="kod_parent" />
          <column table="a" column="kod_dir_sruct_apply" />
        </call>
        <column table="s" column="kod_direct" />
        <column table="s" column="kod_dir_struct_type" />
        <column table="a" column="kod_dir_sruct_apply" />
        <column table="s" column="no_use" />
        <column table="s" column="no_parent" />
        <column table="s" column="no_self" />
      </select>
      <from>
        <query name="va_dir_sruct_apply" as="a">
          <link name="kod_dir_struct_type" as="t">
            <elink name="va_dr_x_ds_x_u" as="s" />
          </link>
        </query>
        <query join="left outer" name="va_dir_struct_type" as="b" exclude="1">
          <call function="true" />
        </query>
        <query name="va_dir_struct_opt" as="va_dir_struct_opt" join="left outer" exclude="1">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dir_struct_type" />
              <column table="va_dir_struct_opt" column="kod_dir_struct_type" />
            </call>
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="va_dir_struct_opt" column="kod_direct" />
            </call>
          </call>
        </query>
        <query join="left outer" name="is_spr_direct" as="kod_direct" dname="va_dir_struct_view">
          <call function="=">
            <column table="kod_direct" column="kod_direct" />
            <column table="this" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_dir_sruct_apply" timestamp="06.02.2018 03:08:09" class="1" title=" Применение настройки орг. структуры к различными источникам данных" comment="Применение настройки орг. структуры к различными источникам данных" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dir_sruct_apply.xml">
      <select>
        <column table="a" column="kod_dir_sruct_apply" type="number" key="1" />
        <column table="a" column="name" type="string" data-size="300" title="Данные" />
        <column table="a" column="kod_dir_struct_type" type="number" />
      </select>
      <from>
        <table name="va_dir_sruct_apply" as="a" />
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" title="Применяемая настройка">
          <call function="=">
            <column table="this" column="kod_dir_struct_type" />
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_dohod" timestamp="06.02.2018 13:52:11" class="1" title="Доходы по основной деятельности" comment="Доходы по основной деятельности" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dohod.xml">
      <select>
        <column table="a" column="kod_dohod" />
        <column table="a" column="god" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_spr_dohod" />
        <column table="a" column="pr_pf" is-private-dimension="va_pf" is-final-dimension="va_pf" dimension="va_pf" />
        <column table="a" column="pr_go" is-private-dimension="va_go" is-final-dimension="va_go" dimension="va_go" />
        <column table="a" column="pr_vid_en" is-private-dimension="va_vid_en" is-final-dimension="va_vid_en" dimension="va_vid_en" />
        <column table="a" column="sum_st" is-fact="1" agg="sum" as="val" />
        <call function="if" as="val_p" type="number" is-fact="1" agg="sum" title="ОД план доход">
          <call function="=0">
            <column table="this" column="pr_pf" />
          </call>
          <column table="this" column="val" />
        </call>
        <call function="if" as="val_f" type="number" is-fact="1" agg="sum" title="ОД факт доход">
          <call function="=1">
            <column table="this" column="pr_pf" />
          </call>
          <column table="this" column="val" />
        </call>
        <call function="if" as="valt_f" type="number" is-fact="1" agg="sum" title="ОД факт доход ТЭ">
          <call function="=">
            <column table="this" column="pr_vid_en" />
            <const>1</const>
          </call>
          <column table="this" column="val_f" />
        </call>
        <call function="if" as="vale_f" type="number" is-fact="1" agg="sum" title="ОД факт доход ЭЭ">
          <call function="=">
            <column table="this" column="pr_vid_en" />
            <const>2</const>
          </call>
          <column table="this" column="val_f" />
        </call>
        <call function="if" as="valt_p" type="number" is-fact="1" agg="sum" title="ОД план доход ТЭ">
          <call function="=">
            <column table="this" column="pr_vid_en" />
            <const>1</const>
          </call>
          <column table="this" column="val_p" />
        </call>
        <call function="if" as="vale_p" type="number" is-fact="1" agg="sum" title="ОД план доход ЭЭ">
          <call function="=">
            <column table="this" column="pr_vid_en" />
            <const>2</const>
          </call>
          <column table="this" column="val_p" />
        </call>
      </select>
      <from>
        <query name="po_dohod" as="a" />
        <query name="va_spr_dohod" as="kod_spr_dohod" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_spr_dohod" />
            <column table="kod_spr_dohod" column="kod_spr_dohod" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=0">
            <column table="a" column="pr_vvod" />
          </call>
          <call function="=1">
            <column table="kod_spr_dohod" column="is_earn" />
          </call>
          <call function="!=0">
            <column table="a" column="pr_vid_en" />
          </call>
        </call>
      </where>
      <links>
        <link name="kod_direct">
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dlink name="va_dr_ap03">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
          <dlink name="va_direct_dir_fact" exclude="1">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </link>
      </links>
    </query>
    <query name="va_spr_dohod" timestamp="14.12.2017 22:12:57" class="1" comment="Справочник статей доходов" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_dohod.xml">
      <select>
        <column table="a" column="kod_spr_dohod" />
        <column table="a" column="num_row" />
        <call function="if" as="is_earn" type="number">
          <call function="like" dontpushpred="1">
            <column table="this" column="num_row" />
            <const>'1.%'</const>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="po_spr_dohod" as="a" />
      </from>
    </query>
    <query name="va_earn_othr_edit" timestamp="05.02.2018 20:01:31" class="1" title="Установленная мощность" comment="Доходы от участия в других организациях. Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_earn_othr.xml">
      <params>
        <param name="p_year" type="number">
          <const>2017</const>
        </param>
        <param name="p_is_plan" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="b" column="kod_direct" key="1" />
        <column table="b" column="parent_id" as="kod_parent" />
        <column table="a" column="year" as="god" />
        <column table="b" column="namex" as="name" />
        <call function="()" as="is_plan" type="number">
          <useparam name="p_is_plan" />
        </call>
        <column table="v1" column="val" title="Январь" as="val1" />
        <column table="v2" column="val" as="val2" title="Февраль" />
        <column table="v3" column="val" title="Март" as="val3" />
        <column table="v4" column="val" title="Апрель" as="val4" />
        <column table="v5" column="val" title="Май" as="val5" />
        <column table="v6" column="val" title="Июнь" as="val6" />
        <column table="v7" column="val" title="Июль" as="val7" />
        <column table="v8" column="val" title="Август" as="val8" />
        <column table="v9" column="val" title="Сентябрь" as="val9" />
        <column table="v10" column="val" title="Октябрь" as="val10" />
        <column table="v11" column="val" title="Ноябрь" as="val11" />
        <column table="v12" column="val" title="Декабрь" as="val12" />
      </select>
      <from>
        <query name="spr_time_year" as="a" />
        <query name="va_dr_sq_filt" join="left outer" as="b">
          <withparams>
            <useparam name="p_kod_direct" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
          <call function="true" />
        </query>
        <query name="va_earn_othr" as="v1" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v1" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v1" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v1" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v1" column="mes" />
              <const>1</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v2" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v2" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v2" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v2" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v2" column="mes" />
              <const>2</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v3" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v3" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v3" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v3" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v3" column="mes" />
              <const>3</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v4" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v4" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v4" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v4" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v4" column="mes" />
              <const>4</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v5" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v5" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v5" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v5" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v5" column="mes" />
              <const>5</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v6" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v6" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v6" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v6" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v6" column="mes" />
              <const>6</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v7" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v7" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v7" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v7" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v7" column="mes" />
              <const>7</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v8" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v8" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v8" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v8" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v8" column="mes" />
              <const>8</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v9" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v9" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v9" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v9" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v9" column="mes" />
              <const>9</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v10" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v10" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v10" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v10" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v10" column="mes" />
              <const>10</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v11" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v11" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v11" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v11" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v11" column="mes" />
              <const>11</const>
            </call>
          </call>
        </query>
        <query name="va_earn_othr" as="v12" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v12" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v12" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v12" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v12" column="mes" />
              <const>12</const>
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="year" />
            <useparam name="p_year" />
          </call>
        </call>
      </where>
    </query>
    <query name="va_plan_fact" timestamp="14.12.2017 21:41:06" class="1" comment="Запрос для заполнения списка план/факт" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_plan_fact.xml">
      <const as="id" type="number">0</const>
      <const as="name" type="string">'План'</const>
      <const>1</const>
      <const>'Факт'</const>
    </query>
    <query name="va_plan_smet" timestamp="07.02.2018 15:35:46" class="1" comment="Расходы и доходы (план)" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_plan_smet.xml">
      <select>
        <call function="||-" as="kod" key="1">
          <column table="a" column="kod_plan_smet" type="number" />
          <column table="a" column="mes" />
        </call>
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="god" type="number" title="" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" type="number" title="" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <column table="a" column="val" type="number" title="" is-fact="1" agg="sum" />
        <column table="a" column="vale" type="number" title="" is-fact="1" agg="sum" />
        <call function="-nvl" as="valt" is-fact="1" agg="sum">
          <column table="this" column="val" />
          <column table="this" column="vale" />
        </call>
        <column table="kod_spr_smet" column="kod_dir_sruct_apply" />
      </select>
      <from>
        <query name="is_plan_smet_x" as="a" />
        <query name="va_direct" as="kod_direct" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_spr_smet" as="kod_spr_smet" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="va_dr_x_dsa_x_up" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dir_sruct_apply" />
              <column table="va_dr_x_dsa_x_up" column="kod_dir_sruct_apply" />
            </call>
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="va_dr_x_dsa_x_up" column="kod_direct_cld" />
            </call>
          </call>
        </query>
      </from>
      <where exclude="1">
        <call function="not in">
          <call function="nvl0">
            <column table="kod_direct" column="kod_spr_doc" />
          </call>
          <array>136,137,158,90</array>
        </call>
      </where>
      <links>
        <link name="kod_direct">
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dlink name="va_direct_dir_plan" exclude="1">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
              <dimlink name="va_direct_mm_all" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            </link>
          </dlink>
          <dlink name="va_dr_ap05" exclude="1">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
        </link>
        <link name="va_dr_x_dsa_x_up" as="va_dr_x_dsa_x_up1">
          <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_direct2">
            <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </link>
        <dlink name="va_spr_smet_smet">
          <link name="kod_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_spr_smet1">
            <dimlink name="va_acc_item" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </dlink>
      </links>
    </query>
    <query name="va_pwr_set_edit" timestamp="06.02.2018 18:45:32" class="1" title="Установленная мощность" comment="Установленная мощность. Запрос для работы с формой" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_pwr_set.xml">
      <params>
        <param name="p_year" type="number">
          <const>2017</const>
        </param>
        <param name="p_is_plan" type="number">
          <const>1</const>
        </param>
        <param name="p_kod_direct" type="number">
          <const>0</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>2</const>
        </param>
      </params>
      <select>
        <column table="b" column="kod_direct" key="1" />
        <column table="b" column="parent_id" as="kod_parent" />
        <column table="a" column="year" as="god" />
        <column table="b" column="namex" as="name" />
        <call function="()" as="is_plan" type="number">
          <useparam name="p_is_plan" />
        </call>
        <column table="v1" column="val" title="Январь" as="val1" />
        <column table="v2" column="val" as="val2" title="Февраль" />
        <column table="v3" column="val" title="Март" as="val3" />
        <column table="v4" column="val" title="Апрель" as="val4" />
        <column table="v5" column="val" title="Май" as="val5" />
        <column table="v6" column="val" title="Июнь" as="val6" />
        <column table="v7" column="val" title="Июль" as="val7" />
        <column table="v8" column="val" title="Август" as="val8" />
        <column table="v9" column="val" title="Сентябрь" as="val9" />
        <column table="v10" column="val" title="Октябрь" as="val10" />
        <column table="v11" column="val" title="Ноябрь" as="val11" />
        <column table="v12" column="val" title="Декабрь" as="val12" />
      </select>
      <from>
        <query name="spr_time_year" as="a" />
        <query name="va_dr_sq_filt" join="left outer" as="b">
          <withparams>
            <useparam name="p_kod_direct" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
          <call function="true" />
        </query>
        <query name="va_pwr_set_r" as="v1" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v1" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v1" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v1" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v1" column="mes" />
              <const>1</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v2" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v2" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v2" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v2" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v2" column="mes" />
              <const>2</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v3" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v3" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v3" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v3" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v3" column="mes" />
              <const>3</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v4" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v4" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v4" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v4" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v4" column="mes" />
              <const>4</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v5" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v5" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v5" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v5" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v5" column="mes" />
              <const>5</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v6" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v6" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v6" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v6" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v6" column="mes" />
              <const>6</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v7" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v7" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v7" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v7" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v7" column="mes" />
              <const>7</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v8" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v8" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v8" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v8" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v8" column="mes" />
              <const>8</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v9" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v9" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v9" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v9" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v9" column="mes" />
              <const>9</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v10" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v10" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v10" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v10" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v10" column="mes" />
              <const>10</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v11" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v11" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v11" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v11" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v11" column="mes" />
              <const>11</const>
            </call>
          </call>
        </query>
        <query name="va_pwr_set_r" as="v12" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v12" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v12" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v12" column="is_plan" />
              <column table="this" column="is_plan" />
            </call>
            <call function="=">
              <column table="v12" column="mes" />
              <const>12</const>
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="year" />
            <useparam name="p_year" />
          </call>
        </call>
      </where>
    </query>
    <query name="va_smet_vvod" timestamp="07.02.2018 15:35:44" class="1" comment="Доходы и расходы (факт)" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_smet_vvod.xml">
      <select>
        <column table="a" column="kod_smet_vvod" type="number" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="god" type="number" title="" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" type="number" title="" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <column table="a" column="val" type="number" title="" is-fact="1" fact="va_smet_vvod_val_tst" agg="sum" exclude="1" />
        <call function="if" is-fact="1" agg="sum" as="val" type="number">
          <call function="=1">
            <column table="kod_direct" column="is_in_podr_10" />
          </call>
          <call function="-nvl">
            <call function="/nvl">
              <column table="a" column="val" />
              <const>1000</const>
            </call>
            <column table="a" column="val_adr" />
          </call>
          <call function="+nvl">
            <call function="/nvl">
              <column table="a" column="val" />
              <const>1000</const>
            </call>
            <column table="a" column="val_adr" />
          </call>
        </call>
        <call function="if" is-fact="1" agg="sum" as="vale" type="number">
          <call function="=1">
            <column table="kod_direct" column="is_in_podr_10" />
          </call>
          <call function="-nvl">
            <call function="/nvl">
              <column table="a" column="vale" />
              <const>1000</const>
            </call>
            <column table="a" column="vale_adr" />
          </call>
          <call function="+nvl">
            <call function="/nvl">
              <column table="a" column="vale" />
              <const>1000</const>
            </call>
            <column table="a" column="vale_adr" />
          </call>
        </call>
        <call function="if" is-fact="1" agg="sum" as="valt" type="number">
          <call function="=1">
            <column table="kod_direct" column="is_in_podr_10" />
          </call>
          <call function="-nvl">
            <call function="/nvl">
              <column table="a" column="valt" />
              <const>1000</const>
            </call>
            <column table="a" column="valt_adr" />
          </call>
          <call function="+nvl">
            <call function="/nvl">
              <column table="a" column="valt" />
              <const>1000</const>
            </call>
            <column table="a" column="valt_adr" />
          </call>
        </call>
        <column table="kod_spr_smet" column="kod_dir_sruct_apply" />
      </select>
      <from>
        <query name="po_smet_vvod" as="a" />
        <query name="va_direct" as="kod_direct" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_spr_smet" as="kod_spr_smet" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="va_dr_x_dsa_x_up" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="and">
            <call function="=">
              <column table="this" column="kod_dir_sruct_apply" />
              <column table="va_dr_x_dsa_x_up" column="kod_dir_sruct_apply" />
            </call>
            <call function="=">
              <column table="this" column="kod_direct" />
              <column table="va_dr_x_dsa_x_up" column="kod_direct_cld" />
            </call>
          </call>
        </query>
      </from>
      <links>
        <link name="kod_direct">
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dlink name="va_direct_dir_fact" exclude="1">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="va_dr_ap04" exclude="1">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
        </link>
        <link name="va_dr_x_dsa_x_up" as="va_dr_x_dsa_x_up1">
          <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_direct2">
            <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </link>
        <dlink name="va_spr_smet_smet">
          <link name="kod_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_spr_smet1">
            <dimlink name="va_acc_item" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </dlink>
      </links>
    </query>
    <query name="va_spr_smet" timestamp="06.02.2018 23:27:59" class="1" comment="Справочник статей расходов" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_spr_smet.xml">
      <select>
        <column table="a" column="kod_spr_smet" />
        <column table="a" column="kod_smet" title="№" />
        <column table="a" column="kod_parent" />
        <column table="a" column="name" />
        <call function="||" as="full_name" is-name="1" vid="1">
          <column table="this" column="kod_smet" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <column table="a" column="prizn" />
        <column table="a" column="kod_dir_sruct_apply" />
        <call function="if" as="is_root_earn" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'22.'</const>
            </call>
            <call function="=1" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_od" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'I.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_nd" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'II.'</const>
            </call>
            <call function="=1" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_earn_prc" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.1.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_prc" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.2.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_earn_othr" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_othr" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.2.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="is_spr_smet" as="a" />
        <query join="left outer" name="va_dir_sruct_apply" as="kod_dir_sruct_apply" title="Применяемая настройка">
          <call function="=">
            <column table="this" column="kod_dir_sruct_apply" />
            <column table="kod_dir_sruct_apply" column="kod_dir_sruct_apply" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_spr_smet_main" timestamp="14.12.2017 22:15:07" class="1" comment="Главная статья сметы" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_spr_smet.xml">
      <select>
        <column table="a" column="kod_spr_smet" />
        <column table="a" column="kod_smet" />
        <column table="a" column="name" />
        <column table="a" column="prizn" />
        <call function="if" as="is_root_earn" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'22.'</const>
            </call>
            <call function="=1" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_od" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'I.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_nd" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'II.'</const>
            </call>
            <call function="=1" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_earn_prc" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.1.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_prc" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.2.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_earn_othr" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.1.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_spend_othr" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'97.2.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
        <call function="if" as="is_root_amort_od" type="number">
          <call function="and">
            <call function="=" dontpushpred="1">
              <column table="this" column="kod_smet" />
              <const>'5.'</const>
            </call>
            <call function="=0" dontpushpred="1">
              <column table="this" column="prizn" />
            </call>
          </call>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="is_spr_smet" as="a" />
      </from>
      <links>
        <dlink name="va_acc_item_smet">
          <link name="kod_acc_item" is-private-dimension="1" dimension="1" is-final-dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="va_spr_smet_smet" class="1" timestamp="14.12.2017 22:16:38" comment="Алгоритм сбора данных по дереву статей сметы" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_spr_smet.xml">
      <select>
        <column table="kod_spr_smet2" column="kod_spr_smet" type="number" />
        <column table="kod_spr_smet1" column="kod_spr_smet" type="number" as="kod_spr_smet_cld" />
        <column table="kod_spr_smet1" column="dat_finish" />
        <column table="po_algoritm_cld" column="god" type="number" title="" />
      </select>
      <from>
        <query name="is_spr_smet" as="kod_spr_smet1">
          <elink name="po_algoritm_cld">
            <link name="kod_spr_smet" as="kod_spr_smet2" />
          </elink>
        </query>
        <query name="va_spr_smet_main" as="kod_spr_smet" join="left inner">
          <call function="=">
            <column table="this" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="va_spr_smet" as="kod_spr_smet_cld" join="left inner">
          <call function="=">
            <column table="this" column="kod_spr_smet_cld" />
            <column table="kod_spr_smet_cld" column="kod_spr_smet" />
          </call>
        </query>
        <query name="va_plan_smet" as="va_plan_smet" join="left inner">
          <call function="and">
            <call function="=">
              <column table="this" column="god" />
              <column table="va_plan_smet" column="god" />
            </call>
            <call function="=">
              <column table="this" column="kod_spr_smet_cld" />
              <column table="va_plan_smet" column="kod_spr_smet" />
            </call>
            <call function="ge">
              <call function="nvl">
                <column table="this" column="dat_finish" />
                <call function="doomsday_ym2" />
              </call>
              <call function="num to ym2">
                <column table="va_plan_smet" column="god" />
                <column table="va_plan_smet" column="mes" />
              </call>
            </call>
          </call>
        </query>
        <query name="va_plan_smet_f" as="va_plan_smet_f" join="left inner">
          <call function="and">
            <call function="=">
              <column table="this" column="god" />
              <column table="va_plan_smet_f" column="god" />
            </call>
            <call function="=">
              <column table="this" column="kod_spr_smet_cld" />
              <column table="va_plan_smet_f" column="kod_spr_smet" />
            </call>
            <call function="ge">
              <call function="nvl">
                <column table="this" column="dat_finish" />
                <call function="doomsday_ym2" />
              </call>
              <call function="num to ym2">
                <column table="va_plan_smet_f" column="god" />
                <column table="va_plan_smet_f" column="mes" />
              </call>
            </call>
          </call>
        </query>
        <query name="va_smet_vvod" as="va_smet_vvod" join="left inner">
          <call function="and">
            <call function="=">
              <column table="this" column="god" />
              <column table="va_smet_vvod" column="god" />
            </call>
            <call function="=">
              <column table="this" column="kod_spr_smet_cld" />
              <column table="va_smet_vvod" column="kod_spr_smet" />
            </call>
            <call function="ge">
              <call function="nvl">
                <column table="this" column="dat_finish" />
                <call function="doomsday_ym2" />
              </call>
              <call function="num to ym2">
                <column table="va_smet_vvod" column="god" />
                <column table="va_smet_vvod" column="mes" />
              </call>
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="va_vvod" timestamp="06.02.2018 13:52:11" class="1" comment="Численность персонала факт" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_vvod.xml">
      <select>
        <column table="a" column="kod_vvod" />
        <column table="a" column="god" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <call function="if" as="ym_min" is-fact="1" agg="min" type="number">
          <call function="between">
            <column table="this" column="mes" />
            <const>1</const>
            <const>12</const>
          </call>
          <call function="num to ym2">
            <column table="this" column="god" />
            <column table="this" column="mes" />
          </call>
        </call>
        <call function="if" as="ym_max" is-fact="1" agg="max" type="number">
          <call function="between">
            <column table="this" column="mes" />
            <const>1</const>
            <const>12</const>
          </call>
          <call function="num to ym2">
            <column table="this" column="god" />
            <column table="this" column="mes" />
          </call>
        </call>
        <column table="a" column="kod_direct" />
        <column table="a" column="field" />
        <column table="a" column="dat_start" />
        <column table="a" column="dat_finish" />
        <column table="a" column="summa" is-fact="1" agg="sum" />
      </select>
      <from>
        <query name="po_vvod" as="a" />
        <query name="va_direct" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_direct">
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dlink name="va_dr_ap02">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
          <dlink name="va_direct_dir_fact" exclude="1">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </link>
      </links>
    </query>
    <query name="va_cnt_perc_plan" timestamp="06.02.2018 13:53:59" class="1" comment="Плановые данные о количестве персонала" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\va_vvod.xml">
      <select>
        <column table="a" column="kod_cnt_perc_plan" type="number" />
        <column table="a" column="god" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" type="number" />
        <column table="a" column="mes" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" type="number" />
        <call function="num to ym2" as="ym_min" is-fact="1" agg="min">
          <column table="this" column="god" />
          <column table="this" column="mes" />
        </call>
        <call function="num to ym2" as="ym_max" is-fact="1" agg="max">
          <column table="this" column="god" />
          <column table="this" column="mes" />
        </call>
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="summa" is-fact="1" agg="sum" type="number" format="F0" />
      </select>
      <from>
        <table name="va_cnt_perc_plan" as="a" />
        <query name="va_direct" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_direct">
          <dlink name="va_direct_dir_fact" exclude="1">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
          <dlink name="va_dr_i_link">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" as="kod_direct_all" />
          </dlink>
          <dlink name="va_dr_ap02">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
        </link>
      </links>
    </query>
    <query name="va_direct" timestamp="03.07.2019 14:53:03" title="Подразделение" class="1" comment="Подразделения. Имя хранилища va_direct_mv + &quot;Использовать хранилище&quot;" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" key="1" index="1" />
        <column table="a" column="kod_direct" as="id" />
        <column table="a" column="name_orig" title="Подразделение" is-name="1" vid="1" as="name" is-fact="1" agg="max" />
        <call function="if" as="namex" type="string" is-name="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <const>0</const>
          </call>
          <const>'ТГК-1'</const>
          <column table="this" column="name_orig" title="Подразделение" is-name="1" vid="1" />
        </call>
        <call function="if" as="parent_id" type="number" title="-">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <call function="if" as="is_in_podr_10" type="number">
          <call function="is not null">
            <column table="va_dr_sp_podr_10" column="kod_direct" />
          </call>
          <const>1</const>
        </call>
        <column table="a" column="kod_podr" index="1" />
        <column table="a" column="kod_spr_doc" index="1" />
        <column table="a" column="name_kr" title="Краткое наименование подразделения" />
        <column table="a" column="kod_predpr" title="Код предприятия балансодержателя" />
        <column table="a" column="kod_parent" />
        <column table="a" column="mes" />
        <column table="a" column="god" />
        <column table="va_direct_in_filial" column="kod_filial" index="1" exclude="1" />
        <call as="is_filial" type="number" function="if" index="1" exclude="1">
          <usepart part="va_filial_kod_direct_cond" />
          <const>1</const>
        </call>
        <column table="a" column="mvp_code" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
        <query name="va_dr_sp_podr_10" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="va_dr_sp_podr_10" column="kod_direct" />
          </call>
        </query>
        <query name="va_direct_in_filial" as="va_direct_in_filial" join="left outer" exclude="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="va_direct_in_filial" column="kod_direct" />
          </call>
        </query>
        <query name="va_dr_sp_tree" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="va_dr_sp_tree" column="kod_direct" />
          </call>
        </query>
      </from>
      <links>
        <dlink name="va_dr_i_link" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </dlink>
        <dlink name="va_dr_ap00">
          <link name="kod_direct_dir_str_app">
            <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </link>
        </dlink>
      </links>
    </query>
    <query name="va_dr_fq_root_val" timestamp="05.02.2018 19:52:59" class="1" comment="Подразделение верхнего уровня. ТГК-1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <const type="number" as="val">0</const>
      </select>
      <from>
        <query name="dual" as="a" />
      </from>
    </query>
    <query name="va_dr_i_x" timestamp="06.02.2018 13:54:22" title="Подразделение" class="1" inherit="va_direct" comment="Головное подразделение" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="y" column="year" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="m" column="mon" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
      </select>
      <from>
        <query name="spr_time_year" as="y" join="left outer">
          <call function="true" />
        </query>
        <query name="spr_time_mes" as="m" join="left outer">
          <call function="true" />
        </query>
      </from>
      <links>
        <dlink name="va_dr_i_x_link">
          <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="va_dr_i_link" timestamp="06.02.2018 13:54:22" title="Подразделение" class="1" comment="Орг структуры.  Все дочерние подразделения по каждому головному" stored="va_direct_dir_all_mv" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <call function="||-" as="kod_direct_dir_all" key="1" index="1">
          <column table="this" column="kod_dir_struct_type" />
          <column table="this" column="kod_direct" />
          <column table="this" column="kod_direct_cld" />
        </call>
        <call function="connect_by_root" as="kod_direct" index="1">
          <column table="b" column="kod_direct" />
        </call>
        <column table="a" column="kod_dir_struct_type" index="1" />
        <column table="b" column="kod_direct" as="kod_direct_cld" index="1" />
      </select>
      <from>
        <query name="va_dr_x_ds_x_u" as="a">
          <link name="kod_direct" as="b" />
        </query>
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type">
          <call function="=">
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
            <column table="this" column="kod_dir_struct_type" />
          </call>
        </query>
        <query name="va_dr_i_main" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_dir_struct" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </connect>
      <links>
        <link name="kod_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_dr_i_main" timestamp="06.02.2018 13:51:32" title="Подразделение" class="1" comment="Головное подразделение" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="name" title="Подразделение" is-name="1" vid="1" as="name" />
        <column table="a" column="is_filial" />
        <column table="a" column="kod_filial" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
    </query>
    <query name="va_dr_sq_filt" timestamp="06.02.2018 13:50:43" class="1" comment="Получение структуры подразделений по заданным параметрам" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="number">
          <const>2017</const>
        </param>
        <param name="p_kod_dir_struct_type" type="number">
          <const>1</const>
        </param>
      </params>
      <select>
        <column table="va_direct" column="kod_direct" />
        <column table="va_direct" column="name" />
        <column table="va_direct" column="namex" />
        <column table="va_direct" column="parent_id" />
        <column table="va_direct" column="is_in_podr_10" exclude="1" />
        <column table="va_direct" column="kod_podr" />
        <column table="va_direct" column="kod_spr_doc" />
        <column table="va_direct" column="kod_filial" />
        <column table="va_direct" column="is_filial" />
      </select>
      <from>
        <qube>
          <link name="va_direct" all-rows="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
            <call function="=">
              <column table="va_dir_struct_type" column="kod_dir_struct_type" />
              <useparam name="p_kod_dir_struct_type" />
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_dr_fq_list1" timestamp="08.07.2019 12:57:04" title="Подразделение" class="1" order="ord" comment="Подразделение. Запрос для заполнения выпадающего списка" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="namex" as="name" is-name="1" />
        <column table="a" column="parent_id" />
        <column table="a" column="namex" as="ord" title="-" />
      </select>
      <from>
        <qube>
          <link name="va_direct" all-rows="1" as="a" />
          <link name="va_dir_sruct_apply" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="va_dir_sruct_apply" column="kod_dir_sruct_apply" />
              <const>0</const>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_dr_x_dsa_x_up" timestamp="06.02.2018 13:51:21" title="Подразделение" class="1" stored="va_direct_dir_str_app_mv" comment="Подразделение. Все подчиненные для головного с учетом настроек для всех вариантов структуры" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <call function="||-" as="kod_direct_dir_str_app" key="1" index="1">
          <column table="this" column="kod_dir_sruct_apply" />
          <column table="this" column="kod_direct" />
          <column table="this" column="kod_direct_cld" />
        </call>
        <call function="connect_by_root" as="kod_direct" index="1">
          <column table="b" column="kod_direct" />
        </call>
        <column table="a" column="kod_dir_sruct_apply" index="1" />
        <column table="b" column="kod_direct" as="kod_direct_cld" index="1" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_u" as="a">
          <link name="kod_direct" as="b" />
        </query>
        <query join="left outer" name="va_dir_sruct_apply" as="kod_dir_struct_apply">
          <call function="=">
            <column table="kod_dir_struct_apply" column="kod_dir_sruct_apply" />
            <column table="this" column="kod_dir_sruct_apply" />
          </call>
        </query>
        <query name="va_dr_i_x" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="and" comment="Обработка настроек орг структуры. Промежуточные данные. Все или только использкемые подразделения">
          <call function="=0" comment="Обработка настроек орг структуры. Промежуточные данные. Построкение дерева с применением опций">
            <column table="a" column="no_self" />
          </call>
        </call>
      </where>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_dir_str_app_x" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
          <call function="=0">
            <column table="a" column="no_parent" />
          </call>
        </call>
      </connect>
      <links>
        <link name="kod_dir_struct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_dr_ap01" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для установленной мощности" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="va_dr_x_ds_x_u" timestamp="05.02.2018 20:52:14" title="Подразделение" class="1" comment="Обработка настроек орг структуры.  Промежуточные данные. Только используемые подразделения" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_dir_struct" />
        <column table="a" column="kod_dir_struct_type" />
        <column table="a" column="kod_parent" />
        <column table="a" column="kod_direct" />
        <column table="a" column="no_use" />
        <column table="a" column="no_parent" />
        <column table="a" column="no_self" />
      </select>
      <from>
        <query name="va_dr_x_ds" as="a">
          <link name="kod_direct" as="b" />
        </query>
        <query join="left outer" name="va_direct" as="kod_direct" dname="va_dir_struct_view">
          <call function="=">
            <column table="kod_direct" column="kod_direct" />
            <column table="this" column="kod_direct" />
          </call>
        </query>
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type">
          <call function="=">
            <column table="this" column="kod_dir_struct_type" />
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
          </call>
        </query>
      </from>
      <start>
        <call function="=0">
          <column table="a" column="kod_direct" />
        </call>
      </start>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_dir_struct" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
          <call function="=0">
            <column table="a" column="no_use" />
          </call>
        </call>
      </connect>
    </query>
    <query name="va_dr_ap00" timestamp="06.02.2018 13:52:11" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для использования по умолчанию" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
        <query name="va_dr_i_x" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="va_dr_i_x" column="kod_direct" />
          </call>
        </query>
        <query name="va_dr_i_x_main" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct" />
            <column table="va_dr_i_x_main" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>0</const>
        </call>
      </where>
    </query>
    <query name="va_dr_sp_tree" timestamp="29.03.2019 15:59:48" class="1" order="namex" stored="va_direct_tree_mv" comment="Подразделение. Определение порядкового номера и наименования с учетом иерархии" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" />
        <call function="rownum" as="ord" />
        <call function="level" as="lvl" />
        <call function="||" as="namet">
          <call function="lpad">
            <const>' '</const>
            <call function="*">
              <call function="-">
                <call function="level" />
                <const>1</const>
              </call>
              <const>4</const>
            </call>
          </call>
          <column table="a" column="namex" />
        </call>
        <column table="a" column="namex" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="parent_id" />
        </call>
      </connect>
      <start>
        <call function="=0">
          <column table="a" column="kod_direct" />
        </call>
      </start>
    </query>
    <query name="va_dr_ap03" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для данных о доходах по основной деятельности" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>3</const>
        </call>
      </where>
    </query>
    <query name="va_dr_i_x_main" timestamp="06.02.2018 13:52:28" title="Подразделение" class="1" inherit="va_direct" comment="Головное подразделение" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select />
      <from />
      <links>
        <dlink name="va_direct_dir_all" is-private-dimension="1" is-final-dimension="1" dimension="1" exclude="1">
          <dimlink name="va_direct_main_all" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </dlink>
      </links>
    </query>
    <query name="va_dr_ap02" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для данных о к-ве сотрудников" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>2</const>
        </call>
      </where>
    </query>
    <query name="va_dr_ap04" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для фактических данных по расходам" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>4</const>
        </call>
      </where>
    </query>
    <query name="va_dr_ap05" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для плановых данных по расходам" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>5</const>
        </call>
      </where>
    </query>
    <query name="va_dr_ap06" timestamp="05.02.2018 20:54:23" title="Подразделение" class="1" comment="Дерево орг. структуры с применением опций для доходов от участия в других организациях" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct_dir_str_app" />
        <column table="a" column="kod_direct" />
        <column table="a" column="kod_direct_cld" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_up" as="a" />
        <query name="va_dr_x_dsa_x_up" join="left outer" as="kod_direct_dir_str_app">
          <call function="=">
            <column table="kod_direct_dir_str_app" column="kod_direct_dir_str_app" />
            <column table="this" column="kod_direct_dir_str_app" />
          </call>
        </query>
        <query name="va_direct" as="kod_direct_cld" join="left outer">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="kod_dir_sruct_apply" />
          <const>6</const>
        </call>
      </where>
    </query>
    <query name="va_dr_sp_podr_10" timestamp="05.02.2018 19:59:20" class="1" stored="va_direct_in_podr_10_mv" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" group="1" index="1" />
        <column table="a" column="name_orig" title="Подразделение" is-name="1" vid="1" group="max" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="=">
          <column table="a" column="kod_podr" />
          <const>10</const>
        </call>
      </start>
    </query>
    <query name="va_dr_i_x_link" timestamp="06.02.2018 21:17:02" title="Подразделение" class="1" comment="Орг структуры.  Все дочерние подразделения по каждому головному" stored="va_dr_dl3_mv" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <call function="||-" as="kod_va_dr_dl3" key="1" index="1">
          <column table="this" column="kod_dir_sruct_apply" />
          <column table="this" column="kod_direct" />
          <column table="this" column="kod_direct_cld" />
        </call>
        <call function="connect_by_root" as="kod_direct" index="1">
          <column table="b" column="kod_direct" />
        </call>
        <column table="a" column="kod_dir_sruct_apply" index="1" />
        <column table="b" column="kod_direct" as="kod_direct_cld" index="1" />
      </select>
      <from>
        <query name="va_dr_x_dsa_x_u" as="a">
          <link name="kod_direct" as="b" />
        </query>
        <query join="left outer" name="va_dir_sruct_apply" as="kod_dir_struct_apply">
          <call function="=">
            <column table="kod_dir_struct_apply" column="kod_dir_sruct_apply" />
            <column table="this" column="kod_dir_sruct_apply" />
          </call>
        </query>
        <query name="va_dr_i_x_main" as="kod_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_dr_i_x" as="kod_direct_cld" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct_cld" />
            <column table="kod_direct_cld" column="kod_direct" />
          </call>
        </query>
      </from>
      <connect>
        <call function="and">
          <call function="=">
            <column table="a" column="kod_dir_str_app_x" prior="1" />
            <column table="a" column="kod_parent" />
          </call>
        </call>
      </connect>
      <links>
        <link name="kod_dir_struct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_struct_type" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_dr_sp_tree_test" timestamp="06.02.2018 20:49:05" class="1" order="namex" stored="va_direct_tree_mv" comment="Подразделение. Определение порядкового номера и наименования с учетом иерархии" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" />
        <call function="rownum" as="ord" />
        <call function="level" as="lvl" />
        <call function="||" as="namet">
          <call function="lpad">
            <const>' '</const>
            <call function="*">
              <call function="-">
                <call function="level" />
                <const>1</const>
              </call>
              <const>4</const>
            </call>
          </call>
          <column table="a" column="namex" />
        </call>
        <column table="a" column="namex" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="parent_id" />
        </call>
      </connect>
      <start>
        <call function="=0">
          <column table="a" column="kod_direct" />
        </call>
      </start>
    </query>
    <query name="vbx_spr_direct" timestamp="27.03.2019 15:36:41" title="Подразделение" class="1" comment="Подразделение. Запрос для заполнения выпадающего списка" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="pr_filter" type="number" />
      </params>
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="namex" as="name" is-name="1" />
        <column table="a" column="parent_id" />
        <column table="a" column="namex" as="ord" title="-" />
        <column table="a" column="name_kr" />
        <column table="a" column="kod_predpr" />
      </select>
      <from>
        <qube>
          <link name="va_direct" all-rows="1" as="a" />
          <link name="va_dir_sruct_apply" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <where>
            <call type="" function="and">
              <call function="true" />
              <call type="" function="and" as="" optional="1">
                <call function="=">
                  <column table="va_dir_sruct_apply" column="kod_dir_sruct_apply" />
                  <const>0</const>
                </call>
                <call function="=" as="" type="">
                  <column table="va_dr_i_main" column="kod_direct" />
                  <const>0</const>
                </call>
                <call function="=1">
                  <useparam name="pr_filter" />
                </call>
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="is_spr_dr_tree_start_kod_dr" timestamp="26.04.2019 16:42:11" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="number" />
      </params>
      <select>
        <column table="a" column="kod_direct" key="1" group="1" />
        <column table="a" column="kod_direct" as="nam" group="1" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="=">
          <column table="a" column="kod_direct" />
          <call function="if">
            <call function="=">
              <useparam name="p_kod_direct" />
              <const>0</const>
            </call>
            <column table="a" column="kod_direct" />
            <useparam name="p_kod_direct" />
          </call>
        </call>
      </start>
    </query>
    <query name="va_dr_fq_list1_name_stragg" timestamp="06.07.2019 11:41:08" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="array" />
      </params>
      <select>
        <column table="a" column="name" group="stragg_dist" />
        <column table="a" column="ord" group="stragg_dist" />
      </select>
      <from>
        <query name="va_dr_fq_list1" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="kod_direct" />
          <useparam name="p_kod_direct" />
        </call>
      </where>
    </query>
    <query name="va_dr_fq_list1_kod_stragg" timestamp="08.07.2019 15:09:37" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="array" />
      </params>
      <select>
        <call group="stragg_dist" type="string" function="to_char" as="kod_direct">
          <column table="a" column="kod_direct" />
        </call>
        <column table="a" column="ord" group="stragg_dist" />
      </select>
      <from>
        <query name="va_dr_fq_list1" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="kod_direct" />
          <useparam name="p_kod_direct" />
        </call>
      </where>
    </query>
    <query name="va_dr_fq_list1_has_mvp" timestamp="08.07.2019 13:45:55" title="Подразделение" class="1" order="mvp_code nulls first, ord" comment="Подразделение. Запрос для заполнения выпадающего списка" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="namex" as="name" is-name="1" />
        <column table="a" column="mvp_code" title="Код МВП" />
        <column table="a" column="parent_id" />
        <column table="a" column="namex" as="ord" title="-" />
      </select>
      <from>
        <qube>
          <link name="va_direct" all-rows="1" as="a" />
          <link name="va_dir_sruct_apply" only-for-cond="1" />
          <link name="va_dir_struct_type" only-for-cond="1" />
          <link name="va_dr_i_main" only-for-cond="1" />
          <where>
            <call function="=">
              <column table="va_dr_i_main" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="=">
              <column table="va_dir_sruct_apply" column="kod_dir_sruct_apply" />
              <const>0</const>
            </call>
            <call function="or" exclude="1">
              <call function="is not null">
                <column table="a" column="mvp_code" />
              </call>
              <call function="=">
                <column table="a" column="kod_direct" />
                <const comment="ТГК">0</const>
              </call>
            </call>
          </where>
        </qube>
      </from>
    </query>
    <query name="va_direct_mvp" timestamp="08.07.2019 14:02:48" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="array" />
      </params>
      <select>
        <call as="mvp_code" type="string" function="if">
          <call function="=">
            <useparam name="p_kod_direct" />
            <const comment="ТГК-1">0</const>
          </call>
          <const>'ТГК-1'</const>
          <column table="a" column="mvp_code" />
        </call>
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
      <where>
        <call function="or">
          <call function="false" />
          <call function="in" optional="1">
            <column table="a" column="kod_direct" />
            <useparam name="p_kod_direct" />
          </call>
          <call function="=" optional="1">
            <useparam name="p_kod_direct" />
            <const comment="ТГК-1">0</const>
          </call>
        </call>
      </where>
    </query>
    <query name="va_direct_mvp_warn" timestamp="08.07.2019 14:09:46" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="array" />
      </params>
      <select>
        <call as="warn" type="string" function="if">
          <call function="is null">
            <column table="a" column="mvp_code" />
          </call>
          <const>'[inf]Необходимо выбрать подразделение с кодом МВП или ТГК-1'</const>
        </call>
      </select>
      <from>
        <query name="va_direct_mvp" as="a">
          <withparams>
            <useparam name="p_kod_direct" />
          </withparams>
        </query>
      </from>
    </query>
    <query name="va_direct2" timestamp="25.07.2019 18:20:11" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="namex" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
    </query>
    <query name="va_direct3" timestamp="25.07.2019 18:20:35" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <select>
        <column table="a" column="kod_direct" />
        <column table="a" column="namex" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
    </query>
    <query name="va_direct_name_by_kod" timestamp="25.07.2019 17:03:49" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\vs_dep.xml">
      <params>
        <param name="p_kod_direct" type="number" />
      </params>
      <select>
        <column table="a" column="namex" group="max" key="1" />
        <column column="kod_direct" table="a" group="1" />
      </select>
      <from>
        <query name="va_direct" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="kod_direct" />
          <useparam name="p_kod_direct" />
        </call>
      </where>
    </query>
    <query name="is_plan_smet" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_plan_smet.xml">
      <select>
        <column table="a" column="kod_plan_smet" type="number" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="sum1" type="number" title="" />
        <column table="a" column="sum2" type="number" title="" />
        <column table="a" column="sum3" type="number" title="" />
        <column table="a" column="sum4" type="number" title="" />
        <column table="a" column="sum5" type="number" title="" />
        <column table="a" column="sum6" type="number" title="" />
        <column table="a" column="sum7" type="number" title="" />
        <column table="a" column="sum8" type="number" title="" />
        <column table="a" column="sum9" type="number" title="" />
        <column table="a" column="sum10" type="number" title="" />
        <column table="a" column="sum11" type="number" title="" />
        <column table="a" column="sum12" type="number" title="" />
        <column table="a" column="polzov" type="string" title="" />
        <column table="a" column="dpk" type="date" title="" />
        <column table="a" column="kv1" type="number" title="" />
        <column table="a" column="kv2" type="number" title="" />
        <column table="a" column="kv3" type="number" title="" />
        <column table="a" column="kv4" type="number" title="" />
        <column table="a" column="period" type="number" title="" />
        <column table="a" column="esum1" type="number" title="" comment="суммы по электро" />
        <column table="a" column="esum2" type="number" title="" />
        <column table="a" column="esum3" type="number" title="" />
        <column table="a" column="esum4" type="number" title="" />
        <column table="a" column="esum5" type="number" title="" />
        <column table="a" column="esum6" type="number" title="" />
        <column table="a" column="esum7" type="number" title="" />
        <column table="a" column="esum8" type="number" title="" />
        <column table="a" column="esum9" type="number" title="" />
        <column table="a" column="esum10" type="number" title="" />
        <column table="a" column="esum11" type="number" title="" />
        <column table="a" column="esum12" type="number" title="" />
      </select>
      <from>
        <table name="is_plan_smet" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left inner">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_direct" class="1" timestamp="15.08.2019 18:14:54" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="kod_predpr" type="string" />
        <column table="a" column="name" type="string" title="Наименование" />
        <column table="a" column="kod_parent" type="number" />
        <column table="a" column="name_kr" type="string" title="" />
        <column table="a" column="mes" type="number" title="Месяц оконч." />
        <column table="a" column="god" type="number" title="Год оконч." />
        <column table="a" column="gor_obl" type="number" title="" />
        <column table="a" column="kod_podr" type="number" />
        <column table="a" column="en_gor" type="number" title="" />
        <column table="a" column="en_obl" type="number" title="" />
        <column table="a" column="tep_gor" type="number" title="" />
        <column table="a" column="kod_plant" type="string" />
        <column table="a" column="tep_obl" type="number" title="" />
        <column table="a" column="prizn_isp" type="number" title="" />
        <column table="a" column="crkp" type="number" title="" />
        <column table="a" column="kod_spr_doc" type="number" />
        <column table="a" column="kod_dir_old" type="number" />
        <column table="a" column="kod_gkpz" type="number" />
        <column table="a" column="path_doc" type="string" title="" comment="путь хранения док-тов дог-ра (только для верхнего уровня)" />
        <column table="a" column="d_c" type="date" title="" comment="дата создания строки в БД" />
        <column table="a" column="d_m" type="date" title="" />
        <column table="a" column="u_m" type="string" title="" />
        <column table="a" column="kod_kazn" type="string" comment="код из программы ЛЭИВО" />
        <column table="a" column="kod_nemo" type="number" comment="для синхронизации справочников НеМо" />
        <column table="a" column="fl_branch" type="number" title="" comment="флаг филилала (ППЭ)" />
        <column table="a" column="kod_xml_plan" type="number" />
        <column table="a" column="invest_pr" type="number" title="" />
        <column table="a" column="fl_ask_atp" type="number" title="" />
        <column table="a" column="kod_spr_pfm" type="number" />
        <column table="a" column="full_name" type="string" title="" comment="Полное наим. подразд(без сокращений)" />
        <column table="a" column="pr_vks_ofz" type="number" title="" />
        <column table="a" column="zone" type="number" title="" comment="тарифная зона (для города)" />
        <column table="a" column="kodp" type="number" title="" />
        <call function="trim" as="name_orig">
          <column table="a" column="name" />
        </call>
        <call function="if" type="number" as="kod_parent_i" title="-">
          <call function="and">
            <call function="!=0">
              <column table="a" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="a" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="a" column="kod_parent" title="Подразделение" is-name="1" vid="1" />
        </call>
        <call function="if" as="namex" type="string" is-name="1">
          <call function="=">
            <column table="a" column="kod_direct" />
            <const>0</const>
          </call>
          <const>'ТГК-1'</const>
          <column table="this" column="name_orig" title="Подразделение" is-name="1" vid="1" />
        </call>
        <column table="a" column="mvp_code" type="string" comment="SAP код МВП" />
        <column table="a" column="mvp_name" type="string" comment="Наименование кода SAP" />
        <column table="a" column="mb3_code" type="string" comment="Маска SAP кода МВЗ (детализация кода SAP)" />
        <column table="a" column="kod_spr_group" type="number" comment="Код группировки из справочника vb_spr_grouping" />
        <column table="a" column="use_in_mped" type="number" comment="1 - Показывать в новом МПЕД, 0 (null) - нет" />
        <call as="valid_mvp" function="case" type="string">
          <call function="when">
            <call function="lt">
              <call function="length">
                <column table="this" column="mvp_code" />
              </call>
              <const>4</const>
            </call>
            <const>'[inf]Код МВП должен состоять из 4 символов. Код не будет сохранен'</const>
          </call>
          <call function="when">
            <call function="is not null">
              <call function="trim">
                <call function="translate">
                  <call function="substr">
                    <column table="this" column="mvp_code" />
                    <const>2</const>
                    <const>3</const>
                  </call>
                  <const>'0123456789'</const>
                  <const>' '</const>
                </call>
              </call>
            </call>
            <const>'[inf]Код МВП должен быть вида Dxxx, где x - цифра. Код не будет сохранен'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="gt">
                <call function="length">
                  <column table="this" column="mvp_code" />
                </call>
                <const>4</const>
              </call>
              <call function="=">
                <call function="substr">
                  <column column="mvp_code" table="this" />
                  <const>1</const>
                  <const>1</const>
                </call>
                <const>'D'</const>
              </call>
            </call>
            <const>'[inf]Код МВП должен состоять из 4 символов. Код будет автоматически образен до 4 символов'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="!=">
                <call function="substr">
                  <column table="this" column="mvp_code" />
                  <const>1</const>
                  <const>1</const>
                </call>
                <const>'D'</const>
              </call>
              <call function="is null">
                <call function="trim">
                  <call function="translate">
                    <call function="substr">
                      <column table="this" column="mvp_code" />
                      <const>2</const>
                      <const>3</const>
                    </call>
                    <const>'0123456789'</const>
                    <const>' '</const>
                  </call>
                </call>
              </call>
            </call>
            <const>'[inf]Код МВП должен начинаться с буквы D. Код будет автоматически исправлен'</const>
          </call>
        </call>
        <call as="has_mvp" type="string" function="()">
          <query>
            <select>
              <call function="replace">
                <call function="sys_connect_by_path">
                  <column table="d" column="mvp_code" />
                  <const>'/'</const>
                </call>
                <const>'/'</const>
                <const>''</const>
              </call>
            </select>
            <from>
              <query name="is_spr_direct" as="d" />
            </from>
            <where>
              <call function="and">
                <call function="is not null">
                  <column table="d" column="mvp_code" />
                </call>
                <call function="=">
                  <call function="rownum" />
                  <const>1</const>
                </call>
              </call>
            </where>
            <connect>
              <call function="and">
                <call function="=">
                  <column table="d" column="kod_parent_i" prior="1" />
                  <column table="d" column="kod_direct" />
                </call>
              </call>
            </connect>
            <start>
              <call function="=">
                <column table="d" column="kod_direct" />
                <column table="a" column="kod_direct" />
              </call>
            </start>
          </query>
        </call>
        <call as="has_mvp_bool" function="if" type="number">
          <call function="or">
            <call function="is not null">
              <column table="this" column="has_mvp" />
            </call>
            <call function="gt">
              <call function="length">
                <column column="mb3_code" table="a" />
              </call>
              <const>0</const>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="valid_mb3" function="case" type="string">
          <call function="when" exclude="1">
            <call function="and">
              <call function="is not null" exclude="1">
                <column table="this" column="mb3_code" />
              </call>
              <call function="=0">
                <column table="this" column="has_mvp_bool" />
              </call>
            </call>
            <const>'[inf]Нет кода МВП у подразделения или головного подразделения'</const>
          </call>
          <call function="when">
            <call function="lt">
              <call function="length">
                <column table="this" column="mb3_code" />
              </call>
              <const>10</const>
            </call>
            <const>'[inf]Код МВЗ должен состоять из 10 символов. Код не будет сохранен'</const>
          </call>
          <call function="when">
            <call function="and">
              <call function="gt">
                <call function="length">
                  <column table="this" column="mb3_code" />
                </call>
                <const>10</const>
              </call>
            </call>
            <const>'[inf]Код МВЗ должен состоять из 10 символов. Код будет автоматически образен до 10 символов'</const>
          </call>
          <call function="when" exclude="1">
            <call function="and">
              <call function="=">
                <call function="length">
                  <column table="this" column="mb3_code" />
                </call>
                <const>10</const>
              </call>
              <call function="!=">
                <call function="substr">
                  <column table="this" column="mb3_code" />
                  <const>1</const>
                  <const>4</const>
                </call>
                <call function="||">
                  <const>'D'</const>
                  <call function="substr">
                    <column table="this" column="has_mvp" />
                    <const>2</const>
                    <const>3</const>
                  </call>
                </call>
              </call>
            </call>
            <const>'[inf]Не совпадает код МВП. Код МВЗ будет автоматически изменен'</const>
          </call>
          <call function="when">
            <call function="gt">
              <column table="mb3_code1" column="cnt" />
              <const>1</const>
            </call>
            <const>'[inf]Дублированная маска! Это приведет к дублированию данных'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="is_spr_direct" as="a" />
        <query name="is_spr_doc" as="kod_spr_doc" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_doc" />
            <column table="kod_spr_doc" column="kod_spr_doc" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_parent" join="left outer">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_parent" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_pfm" as="kod_spr_pfm" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_pfm" />
            <column table="kod_spr_pfm" column="kod_spr_pfm" />
          </call>
        </query>
        <query name="vb_spr_grouping" as="kod_spr_group" join="left outer">
          <call function="=">
            <column table="this" column="kod_spr_group" />
            <column table="kod_spr_group" column="kod_spr_group" />
          </call>
        </query>
        <query name="is_spr_direct_count_mb3" as="mb3_code1" join="left outer">
          <call function="=">
            <column table="this" column="mb3_code" />
            <column table="mb3_code1" column="mb3_code" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_direct_count_mb3" class="1" timestamp="18.07.2019 17:18:20" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="mb3_code" group="1" />
        <column table="a" column="kod_direct" group="count" as="cnt" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <where>
        <call function="is not null">
          <call function="trim">
            <column table="a" column="mb3_code" />
          </call>
        </call>
      </where>
    </query>
    <query name="is_spr_direct_mask" class="1" timestamp="23.07.2019 11:57:26" materialize="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="kod_direct" />
        <call as="mb3_code" function="replace">
          <column table="a" column="mb3_code" />
          <const>'X'</const>
          <const>'_'</const>
        </call>
      </select>
      <from>
        <query as="a" name="is_spr_direct" />
      </from>
      <where>
        <call function="and">
          <call function="is not null">
            <column table="a" column="mb3_code" />
          </call>
          <call function="!=">
            <column table="a" column="mb3_code" />
            <call function="||">
              <column table="a" column="mvp_code" />
              <const>'XXXXXX'</const>
            </call>
          </call>
        </call>
      </where>
      <start>
        <call function="=">
          <column table="a" column="mb3_code" />
          <call function="||">
            <column table="a" column="mvp_code" />
            <const>'XXXXXX'</const>
          </call>
        </call>
      </start>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
    </query>
    <query name="is_spr_direct_for_mped_has_mvp" class="1" timestamp="16.08.2019 18:08:48" order="mvp_code nulls first, name" comment="Подразделение. Запрос для заполнения выпадающего списка" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="kod_parent" />
        <column table="a" column="name_orig" />
        <call function="if" as="name" type="string" is-name="1" title="Подразделение">
          <call function="=">
            <column table="this" column="kod_direct" />
            <const>0</const>
          </call>
          <const>'ТГК-1'</const>
          <column table="this" column="name_orig" />
        </call>
        <column table="a" column="mvp_code" title="Код МВП" />
        <call function="if" as="parent_id" type="number" title="-">
          <call function="and">
            <call function="!=0">
              <column table="this" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="this" column="kod_parent" />
        </call>
        <column table="a" column="use_in_mped" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="use_in_mped" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="is_spr_direct_for_mped" class="1" timestamp="16.08.2019 18:14:21" order="name" comment="Подразделение. Запрос для заполнения выпадающего списка" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="kod_parent" />
        <column table="a" column="name_orig" />
        <call function="if" as="name" type="string" is-name="1" title="Подразделение">
          <call function="=">
            <column table="this" column="kod_direct" />
            <const>0</const>
          </call>
          <const>'ТГК-1'</const>
          <column table="this" column="name_orig" />
        </call>
        <call function="if" as="parent_id" type="number" title="-">
          <call function="and">
            <call function="!=0">
              <column table="this" column="kod_direct" />
              <const>0</const>
            </call>
            <call function="is null">
              <column table="this" column="kod_parent" />
            </call>
          </call>
          <const>0</const>
          <column table="this" column="kod_parent" />
        </call>
        <column table="a" column="use_in_mped" />
      </select>
      <from>
        <query name="is_spr_direct" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="use_in_mped" />
          <const>1</const>
        </call>
      </where>
    </query>
    <query name="is_spr_direct_for_mped_only_w_mvp" class="1" timestamp="18.08.2019 14:38:11" order="mvp_code nulls first, name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_direct.xml">
      <select>
        <column table="a" column="kod_direct" key="1" />
        <column table="a" column="name" />
        <column table="a" column="mvp_code" />
      </select>
      <from>
        <query name="is_spr_direct_for_mped_has_mvp" as="a" />
      </from>
      <where>
        <call function="is not null">
          <column table="this" column="mvp_code" />
        </call>
      </where>
    </query>
    <query name="is_spr_smet" class="1" timestamp="12.08.2019 15:34:39" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_smet.xml">
      <params>
        <param name="pr" type="number" />
      </params>
      <select>
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="kod_smet" type="string" />
        <call function="||" as="full_kod_smet" is-name="1" vid="1">
          <column table="is_spr_smet_tree" column="root_kod_smet" />
          <column table="this" column="kod_smet" />
        </call>
        <call function="cut_num" as="ord">
          <call function="decode">
            <column table="this" column="kod_smet" />
            <const>'I.'</const>
            <const>'1'</const>
            <const>'II.'</const>
            <const>'2'</const>
            <const>'III.'</const>
            <const>'3'</const>
            <const>'IV.'</const>
            <const>'4'</const>
            <column table="this" column="kod_smet" />
          </call>
        </call>
        <call as="kod_dir_sruct_apply" type="number" function="decode">
          <column table="this" column="prizn" />
          <const>1</const>
          <const>5</const>
          <const>4</const>
        </call>
        <column table="a" column="name" type="string" title="Наименование" />
        <column table="a" column="soderg" type="string" title="" />
        <column table="a" column="dat_start" type="number" title="" />
        <column table="a" column="dat_finish" type="number" title="" />
        <column table="a" column="dpk" type="date" title="" />
        <column table="a" column="kod_parent" type="number" />
        <column table="a" column="polzov" type="string" title="" />
        <column table="a" column="prizn" type="number" title="" comment="основная -0, неосновная деятельность - 1" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="repl_code" type="number" title="" />
        <column table="a" column="pr_post" type="number" title="" comment="для МПЭП: признак постоянных расходов" />
        <column table="a" column="pr_cons" type="number" title="" comment="для МПЭП: признак главн.статей для формир.с/с" />
        <column table="a" column="prib" type="number" title="" comment="1-из прибыли" />
        <column table="a" column="proch" type="number" title="" comment="1-прочие" />
        <column table="a" column="not_show" type="number" title="" comment="1 - не показывать для отч форм" />
        <column table="a" column="dr" type="number" title="" comment="0 - доход, 1 - расход" />
        <column table="a" column="included" type="number" comment="1 - статья включена в родительскую, 0 - нет" title="В том числе" controlType="UICheck" />
        <call function="||" as="full_name" is-name="1" vid="1">
          <column table="this" column="full_kod_smet" />
          <const>' '</const>
          <column table="this" column="name" />
        </call>
        <call function="nvl" type="number" as="ym_fin">
          <column table="this" column="dat_finish" />
          <call function="doomsday_ym2" />
        </call>
        <column table="this" column="dat_start" as="ym_start" />
        <call as="y_s" function="ym2 god" title="Год с">
          <column table="this" column="dat_start" />
        </call>
        <call as="m_s" function="ym2 mes" title="Месяц с">
          <column table="this" column="dat_start" />
        </call>
        <call as="y_po" function="ym2 god" title="Год по">
          <column table="this" column="dat_finish" />
        </call>
        <call function="ym2 mes" as="m_po" title="Месяц по">
          <column table="this" column="dat_finish" />
        </call>
        <call as="is_last_desc_all" function="true if 0" type="number">
          <call function="nvl0">
            <query>
              <select>
                <call function="max">
                  <call function="true if not null">
                    <column table="sm" column="kod_spr_smet" />
                  </call>
                </call>
              </select>
              <from>
                <query name="is_spr_smet" as="sm" />
              </from>
              <where>
                <call function="=">
                  <column table="sm" column="kod_parent" />
                  <column table="a" column="kod_spr_smet" />
                </call>
              </where>
            </query>
          </call>
        </call>
        <call as="is_last_desc_cur" function="true if 0" type="number">
          <call function="nvl0">
            <query>
              <select>
                <call function="max">
                  <call function="true if not null">
                    <column table="sm" column="kod_spr_smet" />
                  </call>
                </call>
              </select>
              <from>
                <query name="is_spr_smet" as="sm" />
              </from>
              <where>
                <call function="and">
                  <call function="=">
                    <column table="sm" column="kod_parent" />
                    <column table="a" column="kod_spr_smet" />
                  </call>
                  <call function="between">
                    <call function="date to ym2">
                      <call function="sysdate" />
                    </call>
                    <column table="sm" column="dat_start" />
                    <call function="nvl">
                      <column table="sm" column="dat_finish" />
                      <call function="doomsday_ym2" />
                    </call>
                  </call>
                </call>
              </where>
            </query>
          </call>
        </call>
        <call as="is_last_desc" function="if" type="number">
          <call function="and">
            <call function="true" />
            <call function="=" optional="1">
              <useparam name="pr" />
              <const>1</const>
            </call>
          </call>
          <column table="this" column="is_last_desc_cur" />
          <column table="this" column="is_last_desc_all" />
        </call>
        <call as="vb_spr_smet_to_sap_sap_code" type="string" function="()">
          <query>
            <select>
              <call function="stragg_dist">
                <column table="sap" column="sap_code" />
              </call>
            </select>
            <from>
              <query name="vb_spr_smet_to_sap" as="sap" />
            </from>
            <where>
              <call function="=">
                <column table="a" column="kod_spr_smet" />
                <column table="sap" column="kod_spr_smet" />
              </call>
            </where>
          </query>
        </call>
      </select>
      <from>
        <table name="is_spr_smet" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer">
          <call function="=">
            <column table="a" column="kod_parent" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="is_spr_smet_tree" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="is_spr_smet_tree" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="is_spr_smet_parent_list_for_included" class="1" timestamp="22.08.2019 16:33:58" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\is_spr_smet.xml">
      <select>
        <column table="a" column="kod_parent" group="1" />
      </select>
      <from>
        <query name="is_spr_smet" as="a" />
      </from>
      <where>
        <call function="is not null">
          <column table="a" column="kod_parent" />
        </call>
      </where>
      <start>
        <call function="=">
          <column table="a" column="included" />
          <const>1</const>
        </call>
      </start>
      <connect>
        <call function="=">
          <column table="a" column="kod_parent" prior="1" />
          <column table="a" column="kod_spr_smet" />
        </call>
      </connect>
    </query>
    <query name="po_algoritm" class="1" timestamp="19.11.2017 16:43:07" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_algoritm.xml">
      <select>
        <column table="a" column="kod_algoritm" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="kod_row_sm" type="number" />
        <column table="a" column="god" type="number" title="" />
      </select>
      <from>
        <table name="po_algoritm" as="a" />
        <query name="is_spr_smet" as="kod_spr_smet" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_row_sm" join="left inner" dname="po_algoritm_cld">
          <call function="=">
            <column table="a" column="kod_row_sm" />
            <column table="kod_row_sm" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_dob_sum" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_dob_sum.xml">
      <select>
        <column table="a" column="kod_dob_sum" type="number" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="kod_spr_detail" type="number" />
        <column table="a" column="sum_dob" type="number" title="" comment="сумма по факту" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="pr_go" type="number" title="" comment="город-0,область-1,общее-2" />
        <column table="a" column="pr_gm" type="number" title="" comment="ген.мощности: 0-все, 1-ТЭЦ, 2-ГЭС" />
        <column table="a" column="sum_dob_p" type="number" title="" comment="сумма по плану" />
      </select>
      <from>
        <table name="po_dob_sum" as="a" />
        <query name="po_spr_detail" as="kod_spr_detail" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_detail" />
            <column table="kod_spr_detail" column="kod_spr_detail" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_dohod" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_dohod.xml">
      <select>
        <column table="a" column="kod_dohod" type="number" />
        <column table="a" column="kod_spr_dohod" type="number" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="size_p" type="number" title="" comment="Объём" />
        <column table="a" column="price" type="number" title="" comment="цена" />
        <column table="a" column="d_m" type="date" title="" />
        <column table="a" column="u_m" type="string" title="" />
        <column table="a" column="sum_st" type="number" title="" comment="стоимость" />
        <column table="a" column="mes_utv" type="number" title="" comment="месяц проводки" />
        <column table="a" column="god_utv" type="number" title="" comment="год проводки" />
        <column table="a" column="prim" type="string" title="" />
        <column table="a" column="pr_pf" type="number" title="" comment="признак плана-0, факта-1" />
        <column table="a" column="pr_vid_en" type="number" title="" comment="признак тепла-1, электро-2" />
        <column table="a" column="pr_vvod" type="number" title="" comment="0-весь ввод, 1-только итоги (+ИСО)" />
        <column table="a" column="pr_go" type="number" title="" comment="0-город, 1-область" />
        <column table="a" column="day" type="number" title="" />
      </select>
      <from>
        <table name="po_dohod" as="a" />
        <query name="po_spr_dohod" as="kod_spr_dohod" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_dohod" />
            <column table="kod_spr_dohod" column="kod_spr_dohod" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_smet_vvod" class="1" timestamp="20.11.2017 21:15:56" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_smet_vvod.xml">
      <select>
        <column table="a" column="kod_smet_vvod" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="sum_ee" type="number" title="" />
        <column table="a" column="sum_te" type="number" title="" />
        <column table="a" column="u_m" type="string" title="" />
        <column table="a" column="d_m" type="date" title="" />
        <column table="a" column="sum_all" type="number" title="" />
        <column table="a" column="pr_corr" type="number" title="" comment="0-расчётная сумма, 1-ручная корректировка" />
        <column table="a" column="sum_adr_ee" type="number" title="" />
        <column table="a" column="sum_adr_te" type="number" title="" />
        <column table="a" column="sum_adr_all" type="number" title="" />
        <column table="a" column="otkl_ee" type="string" title="" comment="причина отклонения от плана по электро" />
        <column table="a" column="otkl_te" type="string" title="" comment="причина отклонения от плана по теплу" />
        <column table="a" column="otkl_all" type="string" title="" comment="причина отклонения от плана по общей сумме" />
        <column table="a" column="pr_utv" type="number" title="" comment="признак утверждения" />
        <column table="this" column="sum_all" type="number" title="" as="val" />
        <column table="this" column="sum_adr_all" type="number" title="" as="val_adr" />
        <column table="this" column="sum_ee" type="number" title="" as="vale" />
        <column table="this" column="sum_adr_ee" type="number" title="" as="vale_adr" />
        <column table="this" column="sum_te" type="number" title="" as="valt" />
        <column table="this" column="sum_adr_te" type="number" title="" as="valt_adr" />
      </select>
      <from>
        <table name="po_smet_vvod" as="a" />
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_spr_detail" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_spr_detail.xml">
      <select>
        <column table="a" column="kod_spr_detail" type="number" />
        <column table="a" column="prizn" type="number" title="" comment="из po_reports kod_rep" />
        <column table="a" column="num_pp" type="number" title="" comment="порядковый номер записи при выводе" />
        <column table="a" column="name" type="string" title="Наименование" />
        <column table="a" column="kod_spr_smet" type="number" comment="отношение к какой-либо статье (может и не быть)" />
        <column table="a" column="dat_start" type="number" title="" comment="начало действия детали ГГГГММ" />
        <column table="a" column="dat_finish" type="number" title="" comment="окончание действия детали ГГГГММ" />
        <column table="a" column="abbr" type="string" title="Аббревиатура" comment="номер статьи (для Формы2) в отчёте" />
        <column table="a" column="contain_" type="string" title="" comment="содержит значения" />
        <column table="a" column="prim" type="string" title="" />
        <column table="a" column="comments_" type="string" title="" comment="описание расчётов для разных режимов" />
        <column table="a" column="kod_parent" type="number" comment="код родителя" />
      </select>
      <from>
        <table name="po_spr_detail" as="a" />
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="po_reports" as="kod_rep" join="left outer">
          <call function="=">
            <column table="a" column="prizn" />
            <column table="kod_rep" column="kod_rep" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_spr_dohod" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_spr_dohod.xml">
      <select>
        <column table="a" column="kod_spr_dohod" type="number" />
        <column table="a" column="name" type="string" title="Наименование" />
        <column table="a" column="kod_spr_edizm" type="number" />
        <column table="a" column="num_row" type="string" title="" />
        <column table="a" column="dat_start" type="date" title="" comment="дата начала действия статьи" />
        <column table="a" column="dat_finish" type="date" title="" comment="дата окончания действия статьи" />
        <column table="a" column="kod_parent" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="kod_direction" type="number" comment="0-покупка,1-продажа,2-затраты ИСО" />
        <column table="a" column="kod_good" type="number" comment="0-э/э,1-мощность" />
        <column table="a" column="kod_marketsector_type" type="number" comment="0-опт,1-экспорт,2-розница" />
        <column table="a" column="kod_marketsector" type="number" comment="ID справочника энерготрейдинга" />
        <column table="a" column="kod_iso" type="number" />
        <column table="a" column="prim" type="string" title="" comment="особые правила для расчётных строк" />
        <column table="a" column="prizn_mntr" type="number" title="" comment="1- ээ 2 -тэ" />
      </select>
      <from>
        <table name="po_spr_dohod" as="a" />
        <query name="is_spr_smet" as="kod_spr_smet" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="is_spr_edizm" as="kod_spr_edizm" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_edizm" />
            <column table="kod_spr_edizm" column="kod_spr_edizm" />
          </call>
        </query>
      </from>
    </query>
    <query name="po_vvod" class="1" timestamp="07.12.2017 22:40:04" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\po_vvod.xml">
      <select>
        <column table="a" column="kod_vvod" type="number" />
        <column table="a" column="field" type="string" title="" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="gor_obl" type="number" title="" />
        <column table="a" column="tep_el" type="number" title="" />
        <column table="a" column="summa" type="number" title="" />
        <column table="a" column="stroka" type="string" title="" />
        <column table="a" column="polzov" type="string" title="" />
        <column table="a" column="data" type="date" title="" />
        <column table="a" column="dat_start" type="number" title="" />
        <column table="a" column="dat_finish" type="number" title="" />
        <column table="a" column="kod_filial" type="number" />
        <column table="a" column="tgk" type="number" title="" />
        <column table="a" column="kod_direct" type="number" comment="код подразделения" />
        <column table="a" column="kod_direct_old" type="number" comment="перенесён старый код с ZETA" />
        <column table="a" column="kod_filial_old" type="number" comment="перенесён старый код с ZETA" />
        <column table="a" column="sum_ee" type="number" title="" />
        <column table="a" column="sum_te" type="number" title="" />
        <column table="a" column="sum_all" type="number" title="" />
        <column table="a" column="pr_utv" type="number" title="" comment="признак утверждения" />
      </select>
      <from>
        <table name="po_vvod" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="kod_filial" join="left outer">
          <call function="=">
            <column table="a" column="kod_filial" />
            <column table="kod_filial" column="kod_direct" />
          </call>
        </query>
        <query name="po_fields" as="field" join="left outer">
          <call function="=">
            <column table="a" column="field" />
            <column table="field" column="field" />
          </call>
        </query>
      </from>
    </query>
    <query name="rr_temp" class="1" timestamp="25.08.2023 02:12:03" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\rr_temp.xml">
      <select>
        <column table="a" column="kod" type="number" title="" />
        <column table="a" column="f1" type="number" title="" />
        <column table="a" column="f2" type="number" title="" />
        <column table="a" column="f3" type="number" title="" />
        <column table="a" column="f4" type="number" title="" />
        <column table="a" column="f5" type="number" title="" />
        <column table="a" column="f6" type="number" title="" />
        <column table="a" column="f7" type="number" title="" />
        <column table="a" column="f8" type="number" title="" />
        <column table="a" column="f9" type="number" title="" />
        <column table="a" column="f10" type="number" title="" />
        <column table="a" column="f11" type="number" title="" />
        <column table="a" column="f12" type="number" title="" />
        <column table="a" column="polzov" type="string" title="" />
        <column table="a" column="kods" type="number" title="" />
        <column table="a" column="names" type="string" title="" />
        <column table="a" column="f13" type="number" title="" />
        <column table="a" column="f14" type="number" title="" />
        <column table="a" column="f15" type="number" title="" />
        <column table="a" column="f16" type="number" title="" />
        <column table="a" column="f17" type="number" title="" />
        <column table="a" column="f18" type="number" title="" />
        <column table="a" column="f19" type="number" title="" />
        <column table="a" column="f20" type="number" title="" />
        <column table="a" column="f21" type="number" title="" />
        <column table="a" column="f22" type="number" title="" />
        <column table="a" column="f23" type="number" title="" />
        <column table="a" column="f24" type="number" title="" />
        <column table="a" column="m1" type="number" title="" />
        <column table="a" column="m2" type="number" title="" />
        <column table="a" column="m3" type="number" title="" />
        <column table="a" column="m4" type="number" title="" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="kodp" type="string" title="" />
        <column table="a" column="s1" type="string" title="" />
        <column table="a" column="s2" type="string" title="" />
        <column table="a" column="s3" type="string" title="" />
        <column table="a" column="s4" type="string" title="" />
        <column table="a" column="s5" type="string" title="" />
        <column table="a" column="s6" type="string" title="" />
        <column table="a" column="n1" type="number" title="" />
        <column table="a" column="n2" type="number" title="" />
        <column table="a" column="n3" type="number" title="" />
        <column table="a" column="n4" type="number" title="" />
        <column table="a" column="n5" type="number" title="" />
        <column table="a" column="n6" type="number" title="" />
        <column table="a" column="n7" type="number" title="" />
        <column table="a" column="n8" type="number" title="" />
        <column table="a" column="n9" type="number" title="" />
        <column table="a" column="d1" type="date" title="" />
        <column table="a" column="d2" type="date" title="" />
        <column table="a" column="m5" type="number" title="" />
        <column table="a" column="m6" type="number" title="" />
        <column table="a" column="n10" type="number" title="" />
        <column table="a" column="n11" type="number" title="" />
        <column table="a" column="n12" type="number" title="" />
        <column table="a" column="n13" type="number" title="" />
        <column table="a" column="n14" type="number" title="" />
        <column table="a" column="n15" type="number" title="" />
        <column table="a" column="m7" type="number" title="" />
        <column table="a" column="m8" type="number" title="" />
        <column table="a" column="m9" type="number" title="" />
        <column table="a" column="m10" type="number" title="" />
        <column table="a" column="d3" type="date" title="" />
        <column table="a" column="d4" type="date" title="" />
        <column table="a" column="d5" type="date" title="" />
        <column table="a" column="d6" type="date" title="" />
        <column table="a" column="d7" type="date" title="" />
        <column table="a" column="d8" type="date" title="" />
        <column table="a" column="d9" type="date" title="" />
        <column table="a" column="d10" type="date" title="" />
        <column table="a" column="d11" type="date" title="" />
        <column table="a" column="d12" type="date" title="" />
        <column table="a" column="d13" type="date" title="" />
        <column table="a" column="d14" type="date" title="" />
        <column table="a" column="d15" type="date" title="" />
        <column table="a" column="d16" type="date" title="" />
        <column table="a" column="d17" type="date" title="" />
        <column table="a" column="d18" type="date" title="" />
        <column table="a" column="d19" type="date" title="" />
        <column table="a" column="d20" type="date" title="" />
        <column table="a" column="d21" type="date" title="" />
        <column table="a" column="d22" type="date" title="" />
        <column table="a" column="d23" type="date" title="" />
        <column table="a" column="d24" type="date" title="" />
        <column table="a" column="d25" type="date" title="" />
        <column table="a" column="d26" type="date" title="" />
        <column table="a" column="d27" type="date" title="" />
        <column table="a" column="d28" type="date" title="" />
        <column table="a" column="d29" type="date" title="" />
        <column table="a" column="d30" type="date" title="" />
        <column table="a" column="s7" type="string" title="" />
        <column table="a" column="s8" type="string" title="" />
        <column table="a" column="s9" type="string" title="" />
        <column table="a" column="n16" type="number" title="" />
        <column table="a" column="n17" type="number" title="" />
        <column table="a" column="n18" type="number" title="" />
        <column table="a" column="n19" type="number" title="" />
        <column table="a" column="n20" type="number" title="" />
        <column table="a" column="n21" type="number" title="" />
        <column table="a" column="n22" type="number" title="" />
        <column table="a" column="n23" type="number" title="" />
        <column table="a" column="n24" type="number" title="" />
        <column table="a" column="n25" type="number" title="" />
        <column table="a" column="n26" type="number" title="" />
        <column table="a" column="n27" type="number" title="" />
        <column table="a" column="n28" type="number" title="" />
        <column table="a" column="n29" type="number" title="" />
        <column table="a" column="n30" type="number" title="" />
        <column table="a" column="n31" type="number" title="" />
        <column table="a" column="n32" type="number" title="" />
        <column table="a" column="n33" type="number" title="" />
        <column table="a" column="n34" type="number" title="" />
        <column table="a" column="n35" type="number" title="" />
        <column table="a" column="n36" type="number" title="" />
        <column table="a" column="n37" type="number" title="" />
        <column table="a" column="n38" type="number" title="" />
        <column table="a" column="n39" type="number" title="" />
        <column table="a" column="n40" type="number" title="" />
        <column table="a" column="n41" type="number" title="" />
        <column table="a" column="n42" type="number" title="" />
        <column table="a" column="n43" type="number" title="" />
        <column table="a" column="n44" type="number" title="" />
        <column table="a" column="n45" type="number" title="" />
        <column table="a" column="n46" type="number" title="" />
        <column table="a" column="n47" type="number" title="" />
        <column table="a" column="n48" type="number" title="" />
        <column table="a" column="n49" type="number" title="" />
        <column table="a" column="n50" type="number" title="" />
        <column table="a" column="n51" type="number" title="" />
        <column table="a" column="n52" type="number" title="" />
        <column table="a" column="n53" type="number" title="" />
        <column table="a" column="n54" type="number" title="" />
        <column table="a" column="n55" type="number" title="" />
        <column table="a" column="n56" type="number" title="" />
        <column table="a" column="n57" type="number" title="" />
        <column table="a" column="n58" type="number" title="" />
        <column table="a" column="n59" type="number" title="" />
        <column table="a" column="n60" type="number" title="" />
        <column table="a" column="n61" type="number" title="" />
        <column table="a" column="n62" type="number" title="" />
        <column table="a" column="n63" type="number" title="" />
        <column table="a" column="n64" type="number" title="" />
        <column table="a" column="n65" type="number" title="" />
        <column table="a" column="n66" type="number" title="" />
        <column table="a" column="n67" type="number" title="" />
        <column table="a" column="n68" type="number" title="" />
        <column table="a" column="n69" type="number" title="" />
        <column table="a" column="n70" type="number" title="" />
        <column table="a" column="n71" type="number" title="" />
        <column table="a" column="n72" type="number" title="" />
        <column table="a" column="n73" type="number" title="" />
        <column table="a" column="n74" type="number" title="" />
        <column table="a" column="n75" type="number" title="" />
        <column table="a" column="n76" type="number" title="" />
        <column table="a" column="n77" type="number" title="" />
        <column table="a" column="n78" type="number" title="" />
        <column table="a" column="n79" type="number" title="" />
        <column table="a" column="n80" type="number" title="" />
        <column table="a" column="n81" type="number" title="" />
        <column table="a" column="n82" type="number" title="" />
        <column table="a" column="n83" type="number" title="" />
        <column table="a" column="n84" type="number" title="" />
        <column table="a" column="n85" type="number" title="" />
        <column table="a" column="n86" type="number" title="" />
        <column table="a" column="n87" type="number" title="" />
        <column table="a" column="n88" type="number" title="" />
        <column table="a" column="n89" type="number" title="" />
        <column table="a" column="n90" type="number" title="" />
        <column table="a" column="n91" type="number" title="" />
        <column table="a" column="n92" type="number" title="" />
        <column table="a" column="n93" type="number" title="" />
        <column table="a" column="n94" type="number" title="" />
        <column table="a" column="n95" type="number" title="" />
        <column table="a" column="n96" type="number" title="" />
        <column table="a" column="n97" type="number" title="" />
        <column table="a" column="n98" type="number" title="" />
        <column table="a" column="n99" type="number" title="" />
        <column table="a" column="n100" type="number" title="" />
        <column table="a" column="n101" type="number" title="" />
        <column table="a" column="n102" type="number" title="" />
        <column table="a" column="n103" type="number" title="" />
        <column table="a" column="n104" type="number" title="" />
        <column table="a" column="n105" type="number" title="" />
        <column table="a" column="n106" type="number" title="" />
        <column table="a" column="n107" type="number" title="" />
        <column table="a" column="n108" type="number" title="" />
        <column table="a" column="n109" type="number" title="" />
        <column table="a" column="n110" type="number" title="" />
        <column table="a" column="n111" type="number" title="" />
        <column table="a" column="n112" type="number" title="" />
        <column table="a" column="n113" type="number" title="" />
        <column table="a" column="n114" type="number" title="" />
        <column table="a" column="n115" type="number" title="" />
        <column table="a" column="n116" type="number" title="" />
        <column table="a" column="n117" type="number" title="" />
        <column table="a" column="n118" type="number" title="" />
        <column table="a" column="n119" type="number" title="" />
        <column table="a" column="n120" type="number" title="" />
        <column table="a" column="n121" type="number" title="" />
        <column table="a" column="n122" type="number" title="" />
        <column table="a" column="n123" type="number" title="" />
        <column table="a" column="n124" type="number" title="" />
        <column table="a" column="n125" type="number" title="" />
        <column table="a" column="n126" type="number" title="" />
        <column table="a" column="n127" type="number" title="" />
        <column table="a" column="n128" type="number" title="" />
        <column table="a" column="n129" type="number" title="" />
        <column table="a" column="n130" type="number" title="" />
        <column table="a" column="n131" type="number" title="" />
        <column table="a" column="n132" type="number" title="" />
        <column table="a" column="n133" type="number" title="" />
        <column table="a" column="n134" type="number" title="" />
        <column table="a" column="n135" type="number" title="" />
        <column table="a" column="n136" type="number" title="" />
        <column table="a" column="n137" type="number" title="" />
        <column table="a" column="n138" type="number" title="" />
        <column table="a" column="n139" type="number" title="" />
        <column table="a" column="n140" type="number" title="" />
        <column table="a" column="n141" type="number" title="" />
        <column table="a" column="n142" type="number" title="" />
        <column table="a" column="n143" type="number" title="" />
        <column table="a" column="n144" type="number" title="" />
        <column table="a" column="n145" type="number" title="" />
        <column table="a" column="n146" type="number" title="" />
        <column table="a" column="n147" type="number" title="" />
        <column table="a" column="n148" type="number" title="" />
        <column table="a" column="n149" type="number" title="" />
        <column table="a" column="n150" type="number" title="" />
        <column table="a" column="n151" type="number" title="" />
        <column table="a" column="n152" type="number" title="" />
        <column table="a" column="n153" type="number" title="" />
        <column table="a" column="n154" type="number" title="" />
        <column table="a" column="n155" type="number" title="" />
        <column table="a" column="n156" type="number" title="" />
        <column table="a" column="n157" type="number" title="" />
        <column table="a" column="n158" type="number" title="" />
        <column table="a" column="n159" type="number" title="" />
        <column table="a" column="n160" type="number" title="" />
        <column table="a" column="n161" type="number" title="" />
        <column table="a" column="n162" type="number" title="" />
        <column table="a" column="n163" type="number" title="" />
        <column table="a" column="n164" type="number" title="" />
        <column table="a" column="n165" type="number" title="" />
        <column table="a" column="n166" type="number" title="" />
        <column table="a" column="n167" type="number" title="" />
        <column table="a" column="n168" type="number" title="" />
        <column table="a" column="n169" type="number" title="" />
        <column table="a" column="n170" type="number" title="" />
        <column table="a" column="n171" type="number" title="" />
        <column table="a" column="n172" type="number" title="" />
        <column table="a" column="n173" type="number" title="" />
        <column table="a" column="n174" type="number" title="" />
        <column table="a" column="n175" type="number" title="" />
        <column table="a" column="n176" type="number" title="" />
        <column table="a" column="n177" type="number" title="" />
        <column table="a" column="n178" type="number" title="" />
        <column table="a" column="n179" type="number" title="" />
        <column table="a" column="n180" type="number" title="" />
        <column table="a" column="n181" type="number" title="" />
        <column table="a" column="n182" type="number" title="" />
        <column table="a" column="n183" type="number" title="" />
        <column table="a" column="n184" type="number" title="" />
        <column table="a" column="n185" type="number" title="" />
        <column table="a" column="n186" type="number" title="" />
        <column table="a" column="n187" type="number" title="" />
        <column table="a" column="n188" type="number" title="" />
        <column table="a" column="n189" type="number" title="" />
        <column table="a" column="n190" type="number" title="" />
        <column table="a" column="n191" type="number" title="" />
        <column table="a" column="n192" type="number" title="" />
        <column table="a" column="n193" type="number" title="" />
        <column table="a" column="n194" type="number" title="" />
        <column table="a" column="n195" type="number" title="" />
        <column table="a" column="n196" type="number" title="" />
        <column table="a" column="n197" type="number" title="" />
        <column table="a" column="n198" type="number" title="" />
        <column table="a" column="n199" type="number" title="" />
        <column table="a" column="n200" type="number" title="" />
        <column table="a" column="n201" type="number" title="" />
        <column table="a" column="n202" type="number" title="" />
        <column table="a" column="n203" type="number" title="" />
        <column table="a" column="n204" type="number" title="" />
        <column table="a" column="n205" type="number" title="" />
        <column table="a" column="n206" type="number" title="" />
        <column table="a" column="n207" type="number" title="" />
        <column table="a" column="n208" type="number" title="" />
        <column table="a" column="n209" type="number" title="" />
        <column table="a" column="n210" type="number" title="" />
        <column table="a" column="n211" type="number" title="" />
        <column table="a" column="n212" type="number" title="" />
        <column table="a" column="n213" type="number" title="" />
        <column table="a" column="n214" type="number" title="" />
        <column table="a" column="n215" type="number" title="" />
        <column table="a" column="n216" type="number" title="" />
        <column table="a" column="n217" type="number" title="" />
        <column table="a" column="n218" type="number" title="" />
        <column table="a" column="n219" type="number" title="" />
        <column table="a" column="n220" type="number" title="" />
        <column table="a" column="n221" type="number" title="" />
        <column table="a" column="n222" type="number" title="" />
        <column table="a" column="n223" type="number" title="" />
        <column table="a" column="n224" type="number" title="" />
        <column table="a" column="n225" type="number" title="" />
        <column table="a" column="n226" type="number" title="" />
        <column table="a" column="n227" type="number" title="" />
        <column table="a" column="n228" type="number" title="" />
        <column table="a" column="n229" type="number" title="" />
        <column table="a" column="n230" type="number" title="" />
        <column table="a" column="n231" type="number" title="" />
        <column table="a" column="n232" type="number" title="" />
        <column table="a" column="n233" type="number" title="" />
        <column table="a" column="n234" type="number" title="" />
        <column table="a" column="n235" type="number" title="" />
        <column table="a" column="n236" type="number" title="" />
        <column table="a" column="n237" type="number" title="" />
        <column table="a" column="n238" type="number" title="" />
        <column table="a" column="n239" type="number" title="" />
        <column table="a" column="n240" type="number" title="" />
        <column table="a" column="n241" type="number" title="" />
        <column table="a" column="n242" type="number" title="" />
        <column table="a" column="n243" type="number" title="" />
        <column table="a" column="n244" type="number" title="" />
        <column table="a" column="n245" type="number" title="" />
        <column table="a" column="n246" type="number" title="" />
        <column table="a" column="n247" type="number" title="" />
        <column table="a" column="n248" type="number" title="" />
        <column table="a" column="n249" type="number" title="" />
        <column table="a" column="n250" type="number" title="" />
        <column table="a" column="n251" type="number" title="" />
        <column table="a" column="n252" type="number" title="" />
        <column table="a" column="n253" type="number" title="" />
        <column table="a" column="n254" type="number" title="" />
        <column table="a" column="n255" type="number" title="" />
        <column table="a" column="n256" type="number" title="" />
        <column table="a" column="n257" type="number" title="" />
        <column table="a" column="n258" type="number" title="" />
        <column table="a" column="n259" type="number" title="" />
        <column table="a" column="n260" type="number" title="" />
        <column table="a" column="n261" type="number" title="" />
        <column table="a" column="n262" type="number" title="" />
        <column table="a" column="n263" type="number" title="" />
        <column table="a" column="n264" type="number" title="" />
        <column table="a" column="n265" type="number" title="" />
        <column table="a" column="n266" type="number" title="" />
        <column table="a" column="n267" type="number" title="" />
        <column table="a" column="n268" type="number" title="" />
        <column table="a" column="n269" type="number" title="" />
        <column table="a" column="n270" type="number" title="" />
        <column table="a" column="n271" type="number" title="" />
        <column table="a" column="n272" type="number" title="" />
        <column table="a" column="n273" type="number" title="" />
        <column table="a" column="n274" type="number" title="" />
        <column table="a" column="n275" type="number" title="" />
        <column table="a" column="n276" type="number" title="" />
        <column table="a" column="n277" type="number" title="" />
        <column table="a" column="n278" type="number" title="" />
        <column table="a" column="n279" type="number" title="" />
        <column table="a" column="n280" type="number" title="" />
        <column table="a" column="n281" type="number" title="" />
        <column table="a" column="n282" type="number" title="" />
        <column table="a" column="n283" type="number" title="" />
        <column table="a" column="n284" type="number" title="" />
        <column table="a" column="n285" type="number" title="" />
        <column table="a" column="n286" type="number" title="" />
        <column table="a" column="n287" type="number" title="" />
        <column table="a" column="n288" type="number" title="" />
        <column table="a" column="n289" type="number" title="" />
        <column table="a" column="n290" type="number" title="" />
        <column table="a" column="n291" type="number" title="" />
        <column table="a" column="n292" type="number" title="" />
        <column table="a" column="n293" type="number" title="" />
        <column table="a" column="n294" type="number" title="" />
        <column table="a" column="n295" type="number" title="" />
        <column table="a" column="n296" type="number" title="" />
        <column table="a" column="n297" type="number" title="" />
        <column table="a" column="n298" type="number" title="" />
        <column table="a" column="n299" type="number" title="" />
        <column table="a" column="n300" type="number" title="" />
        <column table="a" column="n301" type="number" title="" />
        <column table="a" column="n302" type="number" title="" />
        <column table="a" column="n303" type="number" title="" />
        <column table="a" column="n304" type="number" title="" />
        <column table="a" column="n305" type="number" title="" />
        <column table="a" column="n306" type="number" title="" />
        <column table="a" column="n307" type="number" title="" />
        <column table="a" column="n308" type="number" title="" />
        <column table="a" column="n309" type="number" title="" />
        <column table="a" column="n310" type="number" title="" />
        <column table="a" column="n311" type="number" title="" />
        <column table="a" column="n312" type="number" title="" />
        <column table="a" column="n313" type="number" title="" />
        <column table="a" column="n314" type="number" title="" />
        <column table="a" column="n315" type="number" title="" />
        <column table="a" column="n316" type="number" title="" />
        <column table="a" column="n317" type="number" title="" />
        <column table="a" column="n318" type="number" title="" />
        <column table="a" column="n319" type="number" title="" />
        <column table="a" column="n320" type="number" title="" />
        <column table="a" column="n321" type="number" title="" />
        <column table="a" column="n322" type="number" title="" />
        <column table="a" column="n323" type="number" title="" />
        <column table="a" column="n324" type="number" title="" />
        <column table="a" column="n325" type="number" title="" />
        <column table="a" column="n326" type="number" title="" />
        <column table="a" column="n327" type="number" title="" />
        <column table="a" column="n328" type="number" title="" />
        <column table="a" column="n329" type="number" title="" />
        <column table="a" column="n330" type="number" title="" />
        <column table="a" column="n331" type="number" title="" />
        <column table="a" column="n332" type="number" title="" />
        <column table="a" column="n333" type="number" title="" />
        <column table="a" column="n334" type="number" title="" />
        <column table="a" column="n335" type="number" title="" />
        <column table="a" column="n336" type="number" title="" />
        <column table="a" column="n337" type="number" title="" />
        <column table="a" column="n338" type="number" title="" />
        <column table="a" column="n339" type="number" title="" />
        <column table="a" column="n340" type="number" title="" />
        <column table="a" column="n341" type="number" title="" />
        <column table="a" column="n342" type="number" title="" />
        <column table="a" column="n343" type="number" title="" />
        <column table="a" column="n344" type="number" title="" />
        <column table="a" column="n345" type="number" title="" />
        <column table="a" column="n346" type="number" title="" />
        <column table="a" column="n347" type="number" title="" />
        <column table="a" column="n348" type="number" title="" />
        <column table="a" column="n349" type="number" title="" />
        <column table="a" column="n350" type="number" title="" />
        <column table="a" column="n351" type="number" title="" />
        <column table="a" column="n352" type="number" title="" />
        <column table="a" column="n353" type="number" title="" />
        <column table="a" column="n354" type="number" title="" />
        <column table="a" column="n355" type="number" title="" />
        <column table="a" column="n356" type="number" title="" />
        <column table="a" column="n357" type="number" title="" />
        <column table="a" column="n358" type="number" title="" />
        <column table="a" column="n359" type="number" title="" />
        <column table="a" column="n360" type="number" title="" />
        <column table="a" column="n361" type="number" title="" />
        <column table="a" column="n362" type="number" title="" />
        <column table="a" column="n363" type="number" title="" />
        <column table="a" column="n364" type="number" title="" />
        <column table="a" column="n365" type="number" title="" />
        <column table="a" column="n366" type="number" title="" />
        <column table="a" column="n367" type="number" title="" />
        <column table="a" column="n368" type="number" title="" />
        <column table="a" column="n369" type="number" title="" />
        <column table="a" column="n370" type="number" title="" />
        <column table="a" column="n371" type="number" title="" />
        <column table="a" column="n372" type="number" title="" />
        <column table="a" column="n373" type="number" title="" />
        <column table="a" column="n374" type="number" title="" />
        <column table="a" column="n375" type="number" title="" />
        <column table="a" column="n376" type="number" title="" />
        <column table="a" column="n377" type="number" title="" />
        <column table="a" column="n378" type="number" title="" />
        <column table="a" column="n379" type="number" title="" />
        <column table="a" column="n380" type="number" title="" />
        <column table="a" column="n381" type="number" title="" />
        <column table="a" column="n382" type="number" title="" />
        <column table="a" column="n383" type="number" title="" />
        <column table="a" column="n384" type="number" title="" />
        <column table="a" column="n385" type="number" title="" />
        <column table="a" column="n386" type="number" title="" />
        <column table="a" column="n387" type="number" title="" />
        <column table="a" column="n388" type="number" title="" />
        <column table="a" column="n389" type="number" title="" />
        <column table="a" column="n390" type="number" title="" />
        <column table="a" column="n391" type="number" title="" />
        <column table="a" column="n392" type="number" title="" />
        <column table="a" column="n393" type="number" title="" />
        <column table="a" column="n394" type="number" title="" />
        <column table="a" column="n395" type="number" title="" />
        <column table="a" column="n396" type="number" title="" />
        <column table="a" column="n397" type="number" title="" />
        <column table="a" column="n398" type="number" title="" />
        <column table="a" column="n399" type="number" title="" />
        <column table="a" column="n400" type="number" title="" />
        <column table="a" column="n401" type="number" title="" />
        <column table="a" column="n402" type="number" title="" />
        <column table="a" column="n403" type="number" title="" />
        <column table="a" column="n404" type="number" title="" />
        <column table="a" column="n405" type="number" title="" />
        <column table="a" column="n406" type="number" title="" />
        <column table="a" column="n407" type="number" title="" />
        <column table="a" column="n408" type="number" title="" />
        <column table="a" column="n409" type="number" title="" />
        <column table="a" column="n410" type="number" title="" />
        <column table="a" column="n411" type="number" title="" />
        <column table="a" column="n412" type="number" title="" />
        <column table="a" column="n413" type="number" title="" />
        <column table="a" column="n414" type="number" title="" />
        <column table="a" column="n415" type="number" title="" />
        <column table="a" column="n416" type="number" title="" />
        <column table="a" column="n417" type="number" title="" />
        <column table="a" column="n418" type="number" title="" />
        <column table="a" column="n419" type="number" title="" />
        <column table="a" column="n420" type="number" title="" />
        <column table="a" column="n421" type="number" title="" />
        <column table="a" column="n422" type="number" title="" />
        <column table="a" column="n423" type="number" title="" />
        <column table="a" column="n424" type="number" title="" />
        <column table="a" column="n425" type="number" title="" />
        <column table="a" column="n426" type="number" title="" />
        <column table="a" column="n427" type="number" title="" />
        <column table="a" column="n428" type="number" title="" />
        <column table="a" column="n429" type="number" title="" />
        <column table="a" column="n430" type="number" title="" />
        <column table="a" column="n431" type="number" title="" />
        <column table="a" column="n432" type="number" title="" />
        <column table="a" column="n433" type="number" title="" />
        <column table="a" column="n434" type="number" title="" />
        <column table="a" column="n435" type="number" title="" />
        <column table="a" column="n436" type="number" title="" />
        <column table="a" column="n437" type="number" title="" />
        <column table="a" column="n438" type="number" title="" />
        <column table="a" column="n439" type="number" title="" />
        <column table="a" column="n440" type="number" title="" />
        <column table="a" column="n441" type="number" title="" />
        <column table="a" column="n442" type="number" title="" />
        <column table="a" column="n443" type="number" title="" />
        <column table="a" column="n444" type="number" title="" />
        <column table="a" column="n445" type="number" title="" />
        <column table="a" column="n446" type="number" title="" />
        <column table="a" column="n447" type="number" title="" />
        <column table="a" column="n448" type="number" title="" />
        <column table="a" column="n449" type="number" title="" />
        <column table="a" column="n450" type="number" title="" />
        <column table="a" column="n451" type="number" title="" />
        <column table="a" column="n452" type="number" title="" />
        <column table="a" column="n453" type="number" title="" />
        <column table="a" column="n454" type="number" title="" />
        <column table="a" column="n455" type="number" title="" />
        <column table="a" column="n456" type="number" title="" />
        <column table="a" column="n457" type="number" title="" />
        <column table="a" column="n458" type="number" title="" />
        <column table="a" column="n459" type="number" title="" />
        <column table="a" column="n460" type="number" title="" />
        <column table="a" column="n461" type="number" title="" />
        <column table="a" column="n462" type="number" title="" />
        <column table="a" column="n463" type="number" title="" />
        <column table="a" column="n464" type="number" title="" />
        <column table="a" column="n465" type="number" title="" />
        <column table="a" column="n466" type="number" title="" />
        <column table="a" column="n467" type="number" title="" />
        <column table="a" column="n468" type="number" title="" />
        <column table="a" column="n469" type="number" title="" />
        <column table="a" column="n470" type="number" title="" />
        <column table="a" column="n471" type="number" title="" />
        <column table="a" column="n472" type="number" title="" />
        <column table="a" column="n473" type="number" title="" />
        <column table="a" column="n474" type="number" title="" />
        <column table="a" column="n475" type="number" title="" />
        <column table="a" column="n476" type="number" title="" />
        <column table="a" column="n477" type="number" title="" />
        <column table="a" column="n478" type="number" title="" />
        <column table="a" column="n479" type="number" title="" />
        <column table="a" column="n480" type="number" title="" />
        <column table="a" column="n481" type="number" title="" />
        <column table="a" column="n482" type="number" title="" />
        <column table="a" column="n483" type="number" title="" />
        <column table="a" column="n484" type="number" title="" />
        <column table="a" column="n485" type="number" title="" />
        <column table="a" column="n486" type="number" title="" />
        <column table="a" column="n487" type="number" title="" />
        <column table="a" column="n488" type="number" title="" />
        <column table="a" column="n489" type="number" title="" />
        <column table="a" column="n490" type="number" title="" />
        <column table="a" column="n491" type="number" title="" />
        <column table="a" column="n492" type="number" title="" />
        <column table="a" column="n493" type="number" title="" />
        <column table="a" column="n494" type="number" title="" />
        <column table="a" column="n495" type="number" title="" />
        <column table="a" column="n496" type="number" title="" />
        <column table="a" column="n497" type="number" title="" />
        <column table="a" column="n498" type="number" title="" />
        <column table="a" column="n499" type="number" title="" />
        <column table="a" column="n500" type="number" title="" />
        <column table="a" column="n501" type="number" title="" />
        <column table="a" column="n502" type="number" title="" />
        <column table="a" column="n503" type="number" title="" />
        <column table="a" column="n504" type="number" title="" />
        <column table="a" column="n505" type="number" title="" />
        <column table="a" column="n506" type="number" title="" />
        <column table="a" column="n507" type="number" title="" />
        <column table="a" column="n508" type="number" title="" />
        <column table="a" column="n509" type="number" title="" />
        <column table="a" column="n510" type="number" title="" />
        <column table="a" column="n511" type="number" title="" />
        <column table="a" column="n512" type="number" title="" />
        <column table="a" column="n513" type="number" title="" />
        <column table="a" column="n514" type="number" title="" />
        <column table="a" column="n515" type="number" title="" />
        <column table="a" column="n516" type="number" title="" />
        <column table="a" column="n517" type="number" title="" />
        <column table="a" column="n518" type="number" title="" />
        <column table="a" column="n519" type="number" title="" />
        <column table="a" column="n520" type="number" title="" />
        <column table="a" column="n521" type="number" title="" />
        <column table="a" column="n522" type="number" title="" />
        <column table="a" column="n523" type="number" title="" />
        <column table="a" column="n524" type="number" title="" />
        <column table="a" column="n525" type="number" title="" />
        <column table="a" column="n526" type="number" title="" />
        <column table="a" column="n527" type="number" title="" />
        <column table="a" column="n528" type="number" title="" />
        <column table="a" column="n529" type="number" title="" />
        <column table="a" column="n530" type="number" title="" />
        <column table="a" column="n531" type="number" title="" />
        <column table="a" column="n532" type="number" title="" />
        <column table="a" column="n533" type="number" title="" />
        <column table="a" column="n534" type="number" title="" />
        <column table="a" column="n535" type="number" title="" />
        <column table="a" column="n536" type="number" title="" />
        <column table="a" column="n537" type="number" title="" />
        <column table="a" column="n538" type="number" title="" />
        <column table="a" column="n539" type="number" title="" />
        <column table="a" column="n540" type="number" title="" />
        <column table="a" column="n541" type="number" title="" />
        <column table="a" column="n542" type="number" title="" />
        <column table="a" column="n543" type="number" title="" />
        <column table="a" column="n544" type="number" title="" />
        <column table="a" column="n545" type="number" title="" />
        <column table="a" column="n546" type="number" title="" />
        <column table="a" column="n547" type="number" title="" />
        <column table="a" column="n548" type="number" title="" />
        <column table="a" column="n549" type="number" title="" />
        <column table="a" column="n550" type="number" title="" />
        <column table="a" column="n551" type="number" title="" />
        <column table="a" column="n552" type="number" title="" />
        <column table="a" column="n553" type="number" title="" />
        <column table="a" column="n554" type="number" title="" />
        <column table="a" column="n555" type="number" title="" />
        <column table="a" column="n556" type="number" title="" />
        <column table="a" column="n557" type="number" title="" />
        <column table="a" column="n558" type="number" title="" />
        <column table="a" column="n559" type="number" title="" />
        <column table="a" column="n560" type="number" title="" />
        <column table="a" column="n561" type="number" title="" />
        <column table="a" column="n562" type="number" title="" />
        <column table="a" column="n563" type="number" title="" />
        <column table="a" column="n564" type="number" title="" />
        <column table="a" column="n565" type="number" title="" />
        <column table="a" column="n566" type="number" title="" />
        <column table="a" column="n567" type="number" title="" />
        <column table="a" column="n568" type="number" title="" />
        <column table="a" column="n569" type="number" title="" />
        <column table="a" column="n570" type="number" title="" />
        <column table="a" column="n571" type="number" title="" />
        <column table="a" column="n572" type="number" title="" />
        <column table="a" column="n573" type="number" title="" />
        <column table="a" column="n574" type="number" title="" />
        <column table="a" column="n575" type="number" title="" />
        <column table="a" column="n576" type="number" title="" />
        <column table="a" column="n577" type="number" title="" />
        <column table="a" column="n578" type="number" title="" />
        <column table="a" column="n579" type="number" title="" />
        <column table="a" column="n580" type="number" title="" />
        <column table="a" column="n581" type="number" title="" />
        <column table="a" column="n582" type="number" title="" />
        <column table="a" column="n583" type="number" title="" />
        <column table="a" column="n584" type="number" title="" />
        <column table="a" column="n585" type="number" title="" />
        <column table="a" column="n586" type="number" title="" />
        <column table="a" column="n587" type="number" title="" />
        <column table="a" column="n588" type="number" title="" />
        <column table="a" column="n589" type="number" title="" />
        <column table="a" column="n590" type="number" title="" />
        <column table="a" column="n591" type="number" title="" />
        <column table="a" column="n592" type="number" title="" />
        <column table="a" column="n593" type="number" title="" />
        <column table="a" column="n594" type="number" title="" />
        <column table="a" column="n595" type="number" title="" />
        <column table="a" column="n596" type="number" title="" />
        <column table="a" column="n597" type="number" title="" />
        <column table="a" column="n598" type="number" title="" />
        <column table="a" column="n599" type="number" title="" />
        <column table="a" column="n600" type="number" title="" />
        <column table="a" column="n601" type="number" title="" />
        <column table="a" column="n602" type="number" title="" />
        <column table="a" column="n603" type="number" title="" />
        <column table="a" column="n604" type="number" title="" />
        <column table="a" column="n605" type="number" title="" />
        <column table="a" column="n606" type="number" title="" />
        <column table="a" column="n607" type="number" title="" />
        <column table="a" column="n608" type="number" title="" />
        <column table="a" column="n609" type="number" title="" />
        <column table="a" column="n610" type="number" title="" />
        <column table="a" column="n611" type="number" title="" />
        <column table="a" column="n612" type="number" title="" />
        <column table="a" column="n613" type="number" title="" />
        <column table="a" column="n614" type="number" title="" />
        <column table="a" column="n615" type="number" title="" />
        <column table="a" column="n616" type="number" title="" />
        <column table="a" column="n617" type="number" title="" />
        <column table="a" column="n618" type="number" title="" />
        <column table="a" column="n619" type="number" title="" />
        <column table="a" column="n620" type="number" title="" />
        <column table="a" column="n621" type="number" title="" />
        <column table="a" column="n622" type="number" title="" />
        <column table="a" column="n623" type="number" title="" />
        <column table="a" column="n624" type="number" title="" />
        <column table="a" column="n625" type="number" title="" />
        <column table="a" column="n626" type="number" title="" />
        <column table="a" column="n627" type="number" title="" />
        <column table="a" column="n628" type="number" title="" />
        <column table="a" column="n629" type="number" title="" />
        <column table="a" column="n630" type="number" title="" />
        <column table="a" column="n631" type="number" title="" />
        <column table="a" column="n632" type="number" title="" />
        <column table="a" column="n633" type="number" title="" />
        <column table="a" column="n634" type="number" title="" />
        <column table="a" column="n635" type="number" title="" />
        <column table="a" column="n636" type="number" title="" />
        <column table="a" column="n637" type="number" title="" />
        <column table="a" column="n638" type="number" title="" />
        <column table="a" column="n639" type="number" title="" />
        <column table="a" column="n640" type="number" title="" />
        <column table="a" column="n641" type="number" title="" />
        <column table="a" column="n642" type="number" title="" />
        <column table="a" column="n643" type="number" title="" />
        <column table="a" column="n644" type="number" title="" />
        <column table="a" column="n645" type="number" title="" />
        <column table="a" column="n646" type="number" title="" />
        <column table="a" column="n647" type="number" title="" />
        <column table="a" column="n648" type="number" title="" />
        <column table="a" column="n649" type="number" title="" />
        <column table="a" column="n650" type="number" title="" />
        <column table="a" column="n651" type="number" title="" />
        <column table="a" column="n652" type="number" title="" />
        <column table="a" column="n653" type="number" title="" />
        <column table="a" column="n654" type="number" title="" />
        <column table="a" column="n655" type="number" title="" />
        <column table="a" column="n656" type="number" title="" />
        <column table="a" column="n657" type="number" title="" />
        <column table="a" column="n658" type="number" title="" />
        <column table="a" column="n659" type="number" title="" />
        <column table="a" column="n660" type="number" title="" />
        <column table="a" column="n661" type="number" title="" />
        <column table="a" column="n662" type="number" title="" />
        <column table="a" column="n663" type="number" title="" />
        <column table="a" column="n664" type="number" title="" />
        <column table="a" column="n665" type="number" title="" />
        <column table="a" column="n666" type="number" title="" />
        <column table="a" column="n667" type="number" title="" />
        <column table="a" column="n668" type="number" title="" />
        <column table="a" column="n669" type="number" title="" />
        <column table="a" column="n670" type="number" title="" />
        <column table="a" column="n671" type="number" title="" />
        <column table="a" column="n672" type="number" title="" />
        <column table="a" column="n673" type="number" title="" />
        <column table="a" column="n674" type="number" title="" />
        <column table="a" column="n675" type="number" title="" />
        <column table="a" column="n676" type="number" title="" />
        <column table="a" column="n677" type="number" title="" />
        <column table="a" column="n678" type="number" title="" />
        <column table="a" column="n679" type="number" title="" />
        <column table="a" column="n680" type="number" title="" />
        <column table="a" column="n681" type="number" title="" />
        <column table="a" column="n682" type="number" title="" />
        <column table="a" column="n683" type="number" title="" />
        <column table="a" column="n684" type="number" title="" />
        <column table="a" column="n685" type="number" title="" />
        <column table="a" column="n686" type="number" title="" />
        <column table="a" column="n687" type="number" title="" />
        <column table="a" column="n688" type="number" title="" />
        <column table="a" column="n689" type="number" title="" />
        <column table="a" column="n690" type="number" title="" />
        <column table="a" column="n691" type="number" title="" />
        <column table="a" column="n692" type="number" title="" />
        <column table="a" column="n693" type="number" title="" />
        <column table="a" column="n694" type="number" title="" />
        <column table="a" column="n695" type="number" title="" />
        <column table="a" column="n696" type="number" title="" />
        <column table="a" column="n697" type="number" title="" />
        <column table="a" column="n698" type="number" title="" />
        <column table="a" column="n699" type="number" title="" />
        <column table="a" column="n700" type="number" title="" />
        <column table="a" column="n701" type="number" title="" />
        <column table="a" column="n702" type="number" title="" />
        <column table="a" column="n703" type="number" title="" />
        <column table="a" column="n704" type="number" title="" />
        <column table="a" column="n705" type="number" title="" />
        <column table="a" column="n706" type="number" title="" />
        <column table="a" column="n707" type="number" title="" />
        <column table="a" column="n708" type="number" title="" />
        <column table="a" column="n709" type="number" title="" />
        <column table="a" column="n710" type="number" title="" />
        <column table="a" column="n711" type="number" title="" />
        <column table="a" column="n712" type="number" title="" />
        <column table="a" column="n713" type="number" title="" />
        <column table="a" column="n714" type="number" title="" />
        <column table="a" column="n715" type="number" title="" />
        <column table="a" column="n716" type="number" title="" />
        <column table="a" column="n717" type="number" title="" />
        <column table="a" column="n718" type="number" title="" />
        <column table="a" column="n719" type="number" title="" />
        <column table="a" column="n720" type="number" title="" />
        <column table="a" column="n721" type="number" title="" />
        <column table="a" column="n722" type="number" title="" />
        <column table="a" column="n723" type="number" title="" />
        <column table="a" column="n724" type="number" title="" />
        <column table="a" column="n725" type="number" title="" />
        <column table="a" column="n726" type="number" title="" />
        <column table="a" column="n727" type="number" title="" />
        <column table="a" column="n728" type="number" title="" />
        <column table="a" column="n729" type="number" title="" />
        <column table="a" column="n730" type="number" title="" />
        <column table="a" column="n731" type="number" title="" />
        <column table="a" column="n732" type="number" title="" />
        <column table="a" column="n733" type="number" title="" />
        <column table="a" column="n734" type="number" title="" />
        <column table="a" column="n735" type="number" title="" />
        <column table="a" column="n736" type="number" title="" />
        <column table="a" column="n737" type="number" title="" />
        <column table="a" column="n738" type="number" title="" />
        <column table="a" column="n739" type="number" title="" />
        <column table="a" column="n740" type="number" title="" />
        <column table="a" column="n741" type="number" title="" />
        <column table="a" column="n742" type="number" title="" />
        <column table="a" column="n743" type="number" title="" />
        <column table="a" column="n744" type="number" title="" />
        <column table="a" column="n745" type="number" title="" />
        <column table="a" column="n746" type="number" title="" />
        <column table="a" column="n747" type="number" title="" />
        <column table="a" column="n748" type="number" title="" />
        <column table="a" column="n749" type="number" title="" />
        <column table="a" column="n750" type="number" title="" />
        <column table="a" column="n751" type="number" title="" />
        <column table="a" column="n752" type="number" title="" />
        <column table="a" column="n753" type="number" title="" />
        <column table="a" column="n754" type="number" title="" />
        <column table="a" column="n755" type="number" title="" />
        <column table="a" column="n756" type="number" title="" />
        <column table="a" column="n757" type="number" title="" />
        <column table="a" column="n758" type="number" title="" />
        <column table="a" column="n759" type="number" title="" />
        <column table="a" column="n760" type="number" title="" />
        <column table="a" column="n761" type="number" title="" />
        <column table="a" column="n762" type="number" title="" />
        <column table="a" column="n763" type="number" title="" />
        <column table="a" column="n764" type="number" title="" />
        <column table="a" column="n765" type="number" title="" />
        <column table="a" column="n766" type="number" title="" />
        <column table="a" column="n767" type="number" title="" />
        <column table="a" column="n768" type="number" title="" />
        <column table="a" column="n769" type="number" title="" />
        <column table="a" column="n770" type="number" title="" />
        <column table="a" column="n771" type="number" title="" />
        <column table="a" column="n772" type="number" title="" />
        <column table="a" column="n773" type="number" title="" />
        <column table="a" column="n774" type="number" title="" />
        <column table="a" column="n775" type="number" title="" />
        <column table="a" column="n776" type="number" title="" />
        <column table="a" column="n777" type="number" title="" />
        <column table="a" column="n778" type="number" title="" />
        <column table="a" column="n779" type="number" title="" />
        <column table="a" column="n780" type="number" title="" />
        <column table="a" column="n781" type="number" title="" />
        <column table="a" column="n782" type="number" title="" />
        <column table="a" column="n783" type="number" title="" />
        <column table="a" column="n784" type="number" title="" />
        <column table="a" column="n785" type="number" title="" />
        <column table="a" column="n786" type="number" title="" />
        <column table="a" column="n787" type="number" title="" />
        <column table="a" column="n788" type="number" title="" />
        <column table="a" column="n789" type="number" title="" />
        <column table="a" column="n790" type="number" title="" />
        <column table="a" column="n791" type="number" title="" />
        <column table="a" column="n792" type="number" title="" />
        <column table="a" column="n793" type="number" title="" />
        <column table="a" column="n794" type="number" title="" />
        <column table="a" column="n795" type="number" title="" />
        <column table="a" column="n796" type="number" title="" />
        <column table="a" column="n797" type="number" title="" />
        <column table="a" column="n798" type="number" title="" />
        <column table="a" column="n799" type="number" title="" />
        <column table="a" column="i1" type="number" title="" />
        <column table="a" column="s10" type="string" title="" />
        <column table="a" column="s11" type="string" title="" />
        <column table="a" column="s12" type="string" title="" />
        <column table="a" column="s13" type="string" title="" />
        <column table="a" column="s14" type="string" title="" />
        <column table="a" column="s15" type="string" title="" />
        <column table="a" column="s16" type="string" title="" />
        <column table="a" column="s17" type="string" title="" />
        <column table="a" column="s18" type="string" title="" />
        <column table="a" column="s19" type="string" title="" />
        <column table="a" column="s20" type="string" title="" />
        <column table="a" column="s21" type="string" title="" />
        <column table="a" column="s22" type="string" title="" />
        <column table="a" column="s23" type="string" title="" />
        <column table="a" column="s24" type="string" title="" />
        <column table="a" column="s25" type="string" title="" />
        <column table="a" column="s26" type="string" title="" />
        <column table="a" column="s27" type="string" title="" />
        <column table="a" column="s28" type="string" title="" />
        <column table="a" column="s29" type="string" title="" />
        <column table="a" column="s30" type="string" title="" />
        <column table="a" column="s31" type="string" title="" />
        <column table="a" column="s32" type="string" title="" />
        <column table="a" column="s33" type="string" title="" />
        <column table="a" column="s34" type="string" title="" />
        <column table="a" column="s35" type="string" title="" />
        <column table="a" column="s36" type="string" title="" />
        <column table="a" column="s37" type="string" title="" />
        <column table="a" column="s38" type="string" title="" />
        <column table="a" column="s39" type="string" title="" />
        <column table="a" column="s40" type="string" title="" />
        <column table="a" column="s41" type="string" title="" />
        <column table="a" column="s42" type="string" title="" />
        <column table="a" column="s43" type="string" title="" />
        <column table="a" column="s44" type="string" title="" />
        <column table="a" column="s45" type="string" title="" />
        <column table="a" column="s46" type="string" title="" />
        <column table="a" column="s47" type="string" title="" />
        <column table="a" column="s48" type="string" title="" />
        <column table="a" column="s49" type="string" title="" />
        <column table="a" column="s50" type="string" title="" />
        <column table="a" column="s51" type="string" title="" />
        <column table="a" column="s52" type="string" title="" />
        <column table="a" column="s53" type="string" title="" />
        <column table="a" column="s54" type="string" title="" />
        <column table="a" column="s55" type="string" title="" />
        <column table="a" column="s56" type="string" title="" />
        <column table="a" column="s57" type="string" title="" />
        <column table="a" column="s58" type="string" title="" />
        <column table="a" column="s59" type="string" title="" />
        <column table="a" column="s60" type="string" title="" />
        <column table="a" column="s61" type="string" title="" />
        <column table="a" column="s62" type="string" title="" />
        <column table="a" column="s63" type="string" title="" />
        <column table="a" column="s64" type="string" title="" />
        <column table="a" column="s65" type="string" title="" />
        <column table="a" column="s66" type="string" title="" />
        <column table="a" column="s67" type="string" title="" />
        <column table="a" column="s68" type="string" title="" />
        <column table="a" column="s69" type="string" title="" />
        <column table="a" column="kod_rab" type="number" />
        <column table="a" column="skod" type="string" title="" />
        <column table="a" column="sid" type="string" title="" />
        <column table="a" column="sparentid" type="string" title="" />
        <column table="a" column="rn" type="number" title="" />
      </select>
      <from>
        <table name="rr_temp" as="a" />
      </from>
    </query>
    <query name="va_acc_item" timestamp="14.12.2017 20:01:52" class="1" comment="Показатели учета" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_acc_item.xml">
      <select>
        <column table="a" column="kod_acc_item" type="number" key="1" />
        <column table="a" column="name" type="string" title="Наименование" data-size="300" />
      </select>
      <from>
        <table name="va_acc_item" as="a" />
      </from>
    </query>
    <query name="va_acc_item_smet" timestamp="14.12.2017 20:02:32" class="1" comment="Привязка показателей учета по статям сметы" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_acc_item_smet.xml">
      <select>
        <column table="a" column="kod_acc_item_smet" type="number" key="1" />
        <column table="a" column="kod_acc_item" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="pr_childs" type="number" controlType="UICheck" />
        <call function="||" as="num" is-fact="1" agg="list">
          <column table="kod_spr_smet" column="full_kod_smet" />
          <call function="if">
            <call function="=1">
              <column table="this" column="pr_childs" />
            </call>
            <const>'*'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="va_acc_item_smet" as="a" />
        <query name="va_acc_item" as="kod_acc_item" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_acc_item" />
            <column table="kod_acc_item" column="kod_acc_item" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="va_spr_smet_main" join="left inner">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="va_spr_smet_main" column="kod_spr_smet" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_dir_struct_opt" timestamp="06.02.2018 13:53:59" class="1" comment="Опции настройки орг. структуры по подразделениям" title="Т. Опции настройки орг структуры по подразделениям" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_dir_struct_opt.xml">
      <select>
        <column table="a" column="kod_dir_struct_opt" type="number" key="1" />
        <column table="a" type="number" title="Не использовать" column="no_use" controlType="UICheck" is-fact="1" agg="max" />
        <column table="a" type="number" title="Не добавлять к головному" column="no_parent" controlType="UICheck" is-fact="1" agg="max" />
        <column table="a" type="number" column="no_self" title="Не учитывать собственные значения" controlType="UICheck" is-fact="1" agg="max" />
        <column table="a" type="number" column="kod_direct" is-private-dimension="va_direct" is-final-dimension="va_direct" dimension="va_direct" />
        <column table="a" type="number" column="kod_dir_struct_type" />
        <call function="||-" as="kod_dir_struct">
          <column table="this" column="kod_direct" />
          <column table="this" column="kod_dir_struct_type" />
        </call>
      </select>
      <from>
        <table name="va_dir_struct_opt" as="a" />
        <query join="left outer" name="va_dir_struct_type" as="kod_dir_struct_type">
          <call function="=">
            <column table="kod_dir_struct_type" column="kod_dir_struct_type" />
            <column table="a" column="kod_dir_struct_type" />
          </call>
        </query>
        <query join="left outer" name="va_dr_i_link">
          <call function="and">
            <call function="=">
              <column table="va_dr_i_link" column="kod_dir_struct_type" />
              <column table="a" column="kod_dir_struct_type" />
            </call>
            <call function="=">
              <column table="va_dr_i_link" column="kod_direct_cld" />
              <column table="a" column="kod_direct" />
            </call>
          </call>
        </query>
      </from>
      <links>
        <link name="va_dr_i_link" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
        <link name="kod_dir_struct_type" as="kod_dir_struct_type1" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_dir_struct_type" timestamp="06.02.2018 20:20:02" class="1" title="Тип настройки орг. структуры" comment="Тип настройки орг. структуры" delete-validation="del_vld" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_dir_struct_type.xml">
      <select>
        <column table="a" column="kod_dir_struct_type" type="number" key="1" />
        <column table="a" column="name" title="Наименование" data-size="300" type="string" vid="1" is-name="1" editable="is_sys" editable-invert="1" />
        <column table="a" type="number" column="pr_locked" title="Запрещено редактирование" controlType="UICheck" />
        <call function="if" type="number" as="is_sys" controlType="UICheck">
          <call function="=1">
            <column table="this" column="pr_locked" />
          </call>
          <const>1</const>
        </call>
        <call function="if" type="string" as="del_vld">
          <call function="=1">
            <column table="this" column="is_sys" />
          </call>
          <const>'Системная настройка'</const>
        </call>
      </select>
      <from>
        <table name="va_dir_struct_type" as="a" />
      </from>
      <links>
        <dlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="va_earn_othr" timestamp="06.02.2018 13:52:11" class="1" title="Доходы от участия в других организациях" comment="Доходы от участия в других организациях" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_earn_othr.xml">
      <select>
        <column table="a" column="kod_va_earn_othr" type="number" key="1" />
        <column table="a" type="number" column="kod_direct" />
        <column table="a" column="god" type="number" title="" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" type="number" title="" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <column table="a" type="number" column="is_plan" />
        <column table="a" type="number" column="val" is-fact="1" agg="sum" />
        <call function="if" as="val_p" type="number" is-fact="1" agg="sum">
          <call function="=0">
            <column table="this" column="is_plan" />
          </call>
          <column table="this" column="val" />
        </call>
        <call function="if" as="val_f" type="number" is-fact="1" agg="sum">
          <call function="=1">
            <column table="this" column="is_plan" />
          </call>
          <column table="this" column="val" />
        </call>
      </select>
      <from>
        <table name="va_earn_othr" as="a" />
        <query name="va_direct" as="kod_direct" join="left inner">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dlink name="va_dr_ap06">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_pwr_set_r" timestamp="06.02.2018 23:37:02" class="1" title="Установленная мощность" comment="Установленная мощность" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_pwr_set.xml">
      <select>
        <column table="a" column="kod_va_pwr_set" type="number" key="1" />
        <column table="a" type="number" column="kod_direct" />
        <column table="a" column="god" type="number" title="" is-private-dimension="va_god" is-final-dimension="va_god" dimension="va_god" />
        <column table="a" column="mes" type="number" title="" is-private-dimension="va_mes" is-final-dimension="va_mes" dimension="va_mes" />
        <column table="a" type="number" column="is_plan" />
        <column table="a" type="number" column="val" is-fact="1" agg="sum" />
        <call function="if" as="val_p" type="number" is-fact="1" agg="sum">
          <call function="=0">
            <column table="this" column="is_plan" />
          </call>
          <column table="this" column="val" />
        </call>
        <call function="if" as="val_f" type="number" is-fact="1" agg="sum">
          <call function="=1">
            <column table="this" column="is_plan" />
          </call>
          <column table="this" column="val" />
        </call>
        <call function="if" as="ym_min" is-fact="1" agg="min" type="number">
          <call function="between">
            <column table="this" column="mes" />
            <const>1</const>
            <const>12</const>
          </call>
          <call function="num to ym2">
            <column table="this" column="god" />
            <column table="this" column="mes" />
          </call>
        </call>
        <call function="if" as="ym_max" is-fact="1" agg="max" type="number">
          <call function="between">
            <column table="this" column="mes" />
            <const>1</const>
            <const>12</const>
          </call>
          <call function="num to ym2">
            <column table="this" column="god" />
            <column table="this" column="mes" />
          </call>
        </call>
      </select>
      <from>
        <table name="va_pwr_set_r" as="a" />
        <query name="va_direct" as="kod_direct" join="left inner">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
      </from>
      <links>
        <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dlink name="va_dr_ap01">
            <link name="kod_direct_dir_str_app">
              <link name="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
                <dimlink name="va_dr_i_x_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
              </link>
            </link>
          </dlink>
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_pwr_set_src" timestamp="19.12.2017 17:49:30" class="1" title="Установленная мощность" comment="Установленная мощность" order="kod_va_pwr_set" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_pwr_set.xml">
      <select>
        <call function="||-" as="kod_va_pwr_set" group="1" removeable="0" key="1">
          <column table="a" type="number" column="kod_direct" />
          <column table="mm" column="year" type="number" title="" as="god" />
          <column table="mm" column="mon" type="number" title="" as="mes" />
          <column table="pf" column="id" as="is_plan" />
        </call>
        <column table="a" type="number" column="kod_direct" group="max" />
        <column table="mm" column="year" type="number" title="" as="god" group="max" />
        <column table="mm" column="mon" type="number" title="" as="mes" group="max" />
        <column table="pf" column="id" as="is_plan" group="max" />
        <column table="a" type="number" column="summa" as="val" group="sum" />
      </select>
      <from>
        <query name="va_vvod" as="a" />
        <query name="va_plan_fact" as="pf" join="left outer">
          <call function="true" />
        </query>
        <query name="spr_time_ym" as="mm" join="left outer">
          <call function="between">
            <column table="mm" column="ym2" />
            <column table="a" column="dat_start" />
            <call function="nvl">
              <column table="a" column="dat_finish" />
              <call function="doomsday_ym2" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="and">
          <call function="=">
            <column table="a" column="field" />
            <const>'p_ees'</const>
          </call>
          <call function="=" exclude="1">
            <column table="a" column="kod_direct" />
            <const>337</const>
          </call>
        </call>
      </where>
    </query>
    <query name="va_sp_calc" class="1" timestamp="05.09.2019 18:02:10" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_calc.xml">
      <select>
        <column table="a" column="kod_sp_calc" type="number" column-mandatory="1" />
        <column table="a" column="vid_dey_kod" type="number" title="" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" title="" />
        <column table="a" column="ob_gen_kod" type="string" data-size="30" title="" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" title="" />
        <column table="a" column="period" type="number" title="" />
        <column table="a" column="subject_fed_kod" type="number" title="" controlType="UICombo">
          <listquery>
            <query name="vb_spr_fed_subject_kod_subj" />
          </listquery>
        </column>
        <column table="a" column="subject_fed_name" type="string" data-size="300" title="" controlType="UICombo">
          <listquery>
            <query name="vb_spr_fed_subject_name" />
          </listquery>
        </column>
        <column table="a" column="zakaz_kod" type="string" data-size="30" title="" />
        <column table="a" column="zakaz_name" type="string" data-size="300" title="" />
        <column table="a" column="mb3_kod" type="string" data-size="30" title="" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="" />
        <column table="a" column="mvp_partner_kod" type="string" data-size="30" title="" />
        <column table="a" column="mvp_partner_name" type="string" data-size="300" title="" />
        <column table="a" column="el_zatr_kod" type="number" title="" />
        <column table="a" column="el_zatr_name" type="string" data-size="300" title="" />
        <column table="a" column="mvp_kod" type="string" data-size="30" title="" />
        <column table="a" column="mvp_name" type="string" data-size="300" title="" />
        <column table="a" column="vyruchka" type="number" title="" />
        <column table="a" column="vol_sbyt" type="number" title="" />
        <column table="a" column="zatr" type="number" title="" />
        <column table="a" column="tut" type="number" title="" />
        <column table="a" column="rash_vod_m3" type="number" title="" />
        <column table="a" column="rash_vod_t" type="number" title="" />
        <column table="a" column="rez_tepl_nag" type="number" title="" />
        <column table="a" column="pris_tep_nag" type="number" title="" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="tip_bud_kod" type="number" />
        <column table="a" column="tip_bud_name" type="string" />
        <column table="vb_spr_smet_zatr_calc" column="kod_spr_smet_zatr" />
        <column table="kod_spr_smet_calc" column="schet_no_mb3" />
        <call as="kod_schet_mb3" function="nvl" type="number" format="F0">
          <call function="to_number">
            <call function="substr">
              <column table="a" column="mb3_kod" />
              <const>5</const>
              <const>1</const>
            </call>
          </call>
          <column table="this" column="schet_no_mb3" />
        </call>
        <call table="ur_mat_reminder" column="kod_mat" dgroup="count" as="color" function="case" title="Цвет" type="string">
          <call function="when">
            <call function="and">
              <call function="is null">
                <column table="a" column="mb3_kod" dgroup="max" />
              </call>
              <call function="or">
                <call function="is null">
                  <column table="this" column="schet_no_mb3" dgroup="max" />
                </call>
                <call function="is null">
                  <column table="this" column="mvp_kod" dgroup="max" />
                </call>
              </call>
              <call function="is null">
                <column table="this" column="kod_spr_smet_zatr" dgroup="max" />
              </call>
            </call>
            <use-color color="rebeccapurple" />
          </call>
          <call function="when">
            <call function="and">
              <call function="is null">
                <column table="a" column="mb3_kod" dgroup="max" />
              </call>
              <call function="or">
                <call function="is null">
                  <column table="this" column="schet_no_mb3" dgroup="max" />
                </call>
                <call function="is null">
                  <column table="this" column="mvp_kod" dgroup="max" />
                </call>
              </call>
            </call>
            <use-color color="darkred" />
          </call>
          <call function="when">
            <call function="is null">
              <column table="this" column="kod_spr_smet_zatr" dgroup="max" />
            </call>
            <use-color color="darkyellow" />
          </call>
        </call>
        <column table="kod_spr_od_nd" column="od_nd_name" exclude="1" />
        <call as="od_nd_name" title="ОД - НД" type="string" function="if">
          <call function="is null">
            <column table="this" column="vid_dey_kod" />
          </call>
          <const>'НД'</const>
          <column table="kod_spr_od_nd" column="od_nd_name" />
        </call>
        <call as="tip_bud_kod_str" function="to_char">
          <column table="this" column="tip_bud_kod" />
          <const>'099'</const>
        </call>
      </select>
      <from>
        <table name="va_sp_calc" as="a" />
        <query name="vb_spr_smet_zatr_calc" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="el_zatr_kod" />
              <column table="vb_spr_smet_zatr_calc" column="smet_code" />
            </call>
            <call function="between">
              <column table="a" column="period" />
              <column table="vb_spr_smet_zatr_calc" column="period_s" />
              <call function="nvl">
                <column table="vb_spr_smet_zatr_calc" column="period_po" />
                <const>9999.99</const>
              </call>
            </call>
          </call>
          <link name="kod_spr_smet_calc" />
        </query>
        <query name="vb_spr_vid_dey" join="left outer" as="vd">
          <call function="=">
            <column table="a" column="vid_dey_kod" />
            <column table="vd" column="vid_dey_sap_code" />
          </call>
          <link name="kod_spr_vid_energ">
            <link name="kod_spr_od_nd" />
          </link>
        </query>
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="is_spr_direct" as="mvp_kod1" join="left outer">
          <call function="=">
            <column table="a" column="mvp_kod" />
            <column table="mvp_kod1" column="mvp_code" />
          </call>
        </query>
        <query name="vb_spr_smet_to_sap_agg" as="sap_code_agg" join="left outer">
          <call function="=">
            <call function="to_char">
              <column table="a" column="el_zatr_kod" />
            </call>
            <column table="sap_code_agg" column="sap_code" />
          </call>
        </query>
        <query name="vb_spr_smet_to_sap" as="sap_code" join="left outer">
          <call function="and">
            <call function="=">
              <call function="to_char">
                <column table="a" column="el_zatr_kod" />
              </call>
              <column table="sap_code" column="sap_code" />
            </call>
            <call function="is null">
              <column table="sap_code" column="period_po" />
            </call>
          </call>
        </query>
      </from>
    </query>
    <query name="va_sp_calc_rep" class="1" timestamp="23.08.2019 10:55:44" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_calc.xml">
      <select>
        <column table="a" column="kod_sp_calc" type="number" column-mandatory="1" key="1" />
        <column table="a" column="vid_dey_kod" type="number" title="" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" title="" />
        <column table="a" column="ob_gen_kod" type="string" data-size="30" title="" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" title="" />
        <column table="a" column="period" type="number" title="" is-private-dimension="ym" is-final-dimension="ym" dimension="ym" />
        <column table="a" column="subject_fed_kod" type="number" title="" />
        <column table="a" column="subject_fed_name" type="string" data-size="300" title="" />
        <column table="a" column="zakaz_kod" type="string" data-size="30" title="" />
        <column table="a" column="zakaz_name" type="string" data-size="300" title="" />
        <column table="a" column="mb3_kod" type="string" data-size="30" title="" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="" />
        <column table="a" column="mvp_partner_kod" type="string" data-size="30" title="" />
        <column table="a" column="mvp_partner_name" type="string" data-size="300" title="" />
        <column table="a" column="el_zatr_kod" type="number" title="" />
        <column table="a" column="el_zatr_name" type="string" data-size="300" title="" />
        <column table="a" column="mvp_kod" type="string" data-size="30" title="" />
        <column table="a" column="mvp_name" type="string" data-size="300" title="" />
        <column table="a" column="vyruchka" type="number" title="" />
        <column table="a" column="vol_sbyt" type="number" title="" />
        <column table="a" column="zatr" type="number" />
        <column table="a" column="tut" type="number" title="" />
        <column table="a" column="rash_vod_m3" type="number" title="" />
        <column table="a" column="rash_vod_t" type="number" title="" />
        <column table="a" column="rez_tepl_nag" type="number" title="" />
        <column table="a" column="pris_tep_nag" type="number" title="" />
        <column column="kod_direct" table="a" type="number" as="kod_direct_load" />
        <column table="a" column="tip_bud_kod" type="number" />
        <column table="a" column="tip_bud_name" type="string" />
        <call as="summa_ft" type="number" function="if" is-fact="1" agg="sum" title="Доходы расходы (факт)">
          <call function="and">
            <call function="=">
              <call function="upper">
                <column table="this" column="tip_bud_name" />
              </call>
              <const>'ФАКТ'</const>
            </call>
            <call function="!=0">
              <call function="nvl0">
                <column table="this" column="zatr" />
              </call>
            </call>
          </call>
          <column table="this" column="zatr" as="" type="" />
        </call>
        <call title="Доходы и расходы (ЭЭ)" as="dr_ee" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>2</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <call title="Доходы и расходы (Тепло)" as="dr_te" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>3</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <call title="Доходы и расходы (НД)" as="dr_nd" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>1</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <column table="vb_spr_vid_dey" column="kod_spr_vid_energ" />
        <call as="mes" function="mes" is-private-dimension="month" is-final-dimension="month" dimension="month">
          <column table="this" column="period" />
        </call>
        <call as="god" function="trunc" is-private-dimension="year" is-final-dimension="year" dimension="year">
          <column table="this" column="period" />
        </call>
        <call as="kod_direct" function="coalesce" type="number">
          <column table="mb3" column="kod_direct" />
          <column table="mvp1" column="kod_direct" />
          <column table="mvp2" column="kod_direct" />
        </call>
        <column table="vb_spr_smet_zatr_calc" column="kod_spr_smet_zatr" is-private-dimension="vb_spr_smet_zatr_calc" is-final-dimension="vb_spr_smet_zatr_calc" dimension="vb_spr_smet_zatr_calc" />
        <column table="vb_spr_smet_zatr_calc" column="kod_spr_smet_calc" is-private-dimension="vb_spr_smet_calc" is-final-dimension="vb_spr_smet_calc" dimension="vb_spr_smet_calc" />
        <column table="vb_spr_smet_calc" column="schet_no_mb3" />
        <call as="kod_schet_mb3" function="nvl" type="number" format="F0">
          <call function="to_number">
            <call function="substr">
              <column table="a" column="mb3_kod" />
              <const>5</const>
              <const>1</const>
            </call>
          </call>
          <column table="this" column="schet_no_mb3" />
        </call>
        <column table="vb_spr_schet_calc" column="kod_spr_schet" is-private-dimension="vb_spr_schet_calc" is-final-dimension="vb_spr_schet_calc" dimension="vb_spr_schet_calc" />
        <column table="mvp2" column="kod_direct" as="kod_direct2" />
        <call as="kod_direct3" function="nvl" type="number">
          <column table="mvp1" column="kod_direct" />
          <column table="mvp3" column="kod_direct" />
        </call>
        <column table="vb_spr_vid_energ" column="kod_spr_od_nd" />
        <call as="zatr_rasp_otr" function="if" type="number" is-fact="1" agg="sum">
          <call function="!=">
            <column table="this" column="mvp_kod" />
            <call function="nvl">
              <call function="substr">
                <column table="this" column="mb3_kod" />
                <const>1</const>
                <const>4</const>
              </call>
              <column table="this" column="mvp_partner_kod" />
            </call>
          </call>
          <call function="*">
            <column table="this" column="zatr" />
            <const>-1</const>
          </call>
        </call>
        <column table="vb_spr_rasp_zatr" column="kod_spr_rasp_zatr" is-private-dimension="vb_spr_rasp_zatr" is-final-dimension="vb_spr_rasp_zatr" dimension="vb_spr_rasp_zatr" />
      </select>
      <from>
        <query name="va_sp_calc" as="a" />
        <query join="left outer" name="vb_spr_vid_dey" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column column="vid_dey_kod" table="this" />
            <column column="vid_dey_sap_code" table="vb_spr_vid_dey" />
          </call>
        </query>
        <query join="left outer" name="vb_spr_vid_energ" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column column="kod_spr_vid_energ" table="this" />
            <column column="kod_spr_vid_energ" table="vb_spr_vid_energ" />
          </call>
        </query>
        <query join="left outer" name="vb_spr_od_nd" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column column="kod_spr_od_nd" table="this" />
            <column column="kod_spr_od_nd" table="vb_spr_od_nd" />
          </call>
        </query>
        <query name="is_spr_direct_mask" as="mb3" join="left outer">
          <call function="like2">
            <column table="this" column="mb3_kod" />
            <column table="mb3" column="mb3_code" />
          </call>
        </query>
        <query name="is_spr_direct" as="mvp1" join="left outer">
          <call function="=">
            <call function="substr">
              <column table="this" column="mb3_kod" />
              <const>1</const>
              <const>4</const>
            </call>
            <column table="mvp1" column="mvp_code" />
          </call>
        </query>
        <query name="is_spr_direct" as="mvp2" join="left outer">
          <call function="=">
            <column table="this" column="mvp_kod" />
            <column table="mvp2" column="mvp_code" />
          </call>
        </query>
        <query name="is_spr_direct" as="mvp3" join="left outer">
          <call function="=">
            <column table="this" column="mvp_partner_kod" />
            <column table="mvp3" column="mvp_code" />
          </call>
        </query>
        <query name="va_direct" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct" />
            <column table="va_direct" column="kod_direct" />
          </call>
        </query>
        <query name="va_direct2" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct2" />
            <column table="va_direct2" column="kod_direct" />
          </call>
        </query>
        <query name="va_direct3" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="kod_direct3" />
            <column table="va_direct3" column="kod_direct" />
          </call>
        </query>
        <query name="vb_spr_smet_to_sap" join="left outer">
          <call function="and">
            <call function="=">
              <call function="to_char">
                <column table="a" column="el_zatr_kod" />
              </call>
              <column table="vb_spr_smet_to_sap" column="sap_code" />
            </call>
          </call>
        </query>
        <query name="vb_spr_smet_zatr_calc" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="el_zatr_kod" />
              <column table="vb_spr_smet_zatr_calc" column="smet_code" />
            </call>
            <call function="between">
              <column table="this" column="period" />
              <column table="vb_spr_smet_zatr_calc" column="period_s" />
              <call function="nvl">
                <column table="vb_spr_smet_zatr_calc" column="period_po" />
                <const>9999.99</const>
              </call>
            </call>
          </call>
        </query>
        <query name="vb_spr_smet_calc" join="left outer">
          <call function="=">
            <column table="this" column="kod_spr_smet_calc" />
            <column table="vb_spr_smet_calc" column="kod_spr_smet_calc" />
          </call>
        </query>
        <query name="vb_spr_schet_calc" join="left outer">
          <call function="=">
            <column table="this" column="kod_schet_mb3" />
            <column table="vb_spr_schet_calc" column="kod_schet" />
          </call>
        </query>
        <query name="vb_spr_fed_subject" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="subject_fed_kod" />
            <column table="vb_spr_fed_subject" column="kod_subj" />
          </call>
        </query>
        <query name="vbr_calculation_mode" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="in">
            <column table="vbr_calculation_mode" column="id" />
            <const>(1,2)</const>
          </call>
        </query>
        <query name="vb_spr_rasp_zatr" join="left outer">
          <call function="and">
            <call function="=">
              <call function="nvl" exclude="1">
                <column table="mb3" column="kod_direct" />
                <column table="mvp1" column="kod_direct" />
              </call>
              <column table="mvp3" column="kod_direct" />
              <column table="vb_spr_rasp_zatr" column="kod_direct" />
            </call>
            <call function="between">
              <column table="a" column="period" />
              <column table="vb_spr_rasp_zatr" column="period_s" />
              <call function="nvl">
                <column table="vb_spr_rasp_zatr" column="period_po" />
                <const>9999.99</const>
              </call>
            </call>
            <call function="=">
              <column table="vb_spr_rasp_zatr" column="rasp_calc" />
              <const>1</const>
            </call>
          </call>
        </query>
      </from>
      <links>
        <link name="vb_spr_smet_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <link name="kod_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
      </links>
    </query>
    <query name="va_sp_calc_buf" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_calc_buf.xml">
      <select>
        <call function="rowid" as="va_sp_calc_buf_id" key="1" />
        <column table="a" column="vid_dey" type="string" data-size="300" title="" />
        <column table="a" column="ob_gen" type="string" data-size="300" title="" />
        <column table="a" column="period" type="string" data-size="300" title="" />
        <column table="a" column="subject_fed" type="string" data-size="300" title="" />
        <column table="a" column="zakaz" type="string" data-size="300" title="" />
        <column table="a" column="mb3" type="string" data-size="300" title="" />
        <column table="a" column="mvp_partner" type="string" data-size="300" title="" />
        <column table="a" column="el_zatr" type="string" data-size="300" title="" />
        <column table="a" column="mvp" type="string" data-size="300" title="" />
        <column table="a" column="vyruchka" type="number" title="" />
        <column table="a" column="vol_sbyt" type="number" title="" />
        <column table="a" column="zatr" type="number" title="" />
        <column table="a" column="tut" type="number" title="" />
        <column table="a" column="rash_vod_m3" type="number" title="" />
        <column table="a" column="rash_vod_t" type="number" title="" />
        <column table="a" column="rez_tepl_nag" type="number" title="" />
        <column table="a" column="pris_tep_nag" type="number" title="" />
      </select>
      <from>
        <table name="va_sp_calc_buf" as="a" />
      </from>
    </query>
    <query name="va_sp_doh_ras" class="1" timestamp="18.06.2019 14:28:07" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_doh_ras.xml">
      <select>
        <column table="a" column="kod_sp_doh_ras" type="number" key="1" />
        <column table="a" column="ob_gen_id" type="string" data-size="30" index="1" title="Объект генерации (код)" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" title="Объект генерации (наименование)" />
        <column table="a" column="st_id" type="string" data-size="30" index="1" title="Статья доходов и расходов (код)" />
        <column table="a" column="st_name" type="string" data-size="300" title="Статья доходов и расходов  (наименование)" />
        <column table="a" column="tip_bud_id" type="string" data-size="10" index="1" title="Тип данных бюджета (код)" />
        <column table="a" column="tip_bud_name" type="string" data-size="300" title="Тип данных бюджета  (наименование)" />
        <column table="a" column="gr_st_id" type="string" data-size="30" index="1" title="Группировка статей затрат (код)" />
        <column table="a" column="gr_st_name" type="string" data-size="300" title="Группировка статей затрат  (наименование)" />
        <column table="a" column="vid_dey_id" type="string" data-size="30" index="1" title="Вид деятельности (код)" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" title="Вид деятельности  (наименование)" />
        <column table="a" column="mb3_id" type="string" data-size="30" index="1" title="МВЗ (код)" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="МВЗ  (наименование)" />
        <column table="a" column="mes" type="number" index="1" format="F0" halign="center" title="Месяц" />
        <column table="a" column="summa" type="number" title="Сумма" />
        <column table="a" column="god" type="number" index="1" format="F0" halign="center" title="Год" />
        <column table="a" column="kod_direct" type="number" />
      </select>
      <from>
        <table name="va_sp_doh_ras" as="a" />
        <query name="is_spr_direct" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="vb_spr_smet_to_sap_agg" as="sap_code" join="left outer">
          <call function="=">
            <column table="a" column="st_id" />
            <column table="sap_code" column="sap_code" />
          </call>
        </query>
      </from>
    </query>
    <query name="va_sp_doh_ras_rep" class="1" timestamp="16.05.2019 13:38:29" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_doh_ras.xml">
      <select>
        <column table="a" column="kod_sp_doh_ras" type="number" key="1" />
        <column table="a" column="ob_gen_id" type="string" data-size="30" index="1" title="Объект генерации (код)" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" title="Объект генерации (наименование)" />
        <column table="a" column="st_id" type="string" data-size="30" index="1" title="Статья доходов и расходов (код)" />
        <column table="a" column="st_name" type="string" data-size="300" title="Статья доходов и расходов  (наименование)" />
        <column table="a" column="tip_bud_id" type="string" data-size="10" index="1" title="Тип данных бюджета (код)" />
        <column table="a" column="tip_bud_name" type="string" data-size="300" title="Тип данных бюджета  (наименование)" />
        <column table="a" column="gr_st_id" type="string" data-size="30" index="1" title="Группировка статей затрат (код)" />
        <column table="a" column="gr_st_name" type="string" data-size="300" title="Группировка статей затрат  (наименование)" />
        <column table="a" column="vid_dey_id" type="string" data-size="30" index="1" title="Вид деятельности (код)" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" title="Вид деятельности  (наименование)" />
        <column table="a" column="mb3_id" type="string" data-size="30" index="1" title="МВЗ (код)" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="МВЗ  (наименование)" />
        <column table="a" column="mes" type="number" index="1" format="F0" halign="center" title="Месяц" is-private-dimension="month" is-final-dimension="month" dimension="month" />
        <column table="a" column="summa" type="number" title="Сумма" />
        <column table="a" column="god" type="number" index="1" format="F0" halign="center" title="Год" is-private-dimension="year" is-final-dimension="year" dimension="year" />
        <call as="summa_ft" type="number" function="if" is-fact="1" agg="sum" title="Доходы расходы (факт)">
          <call function="=">
            <call function="upper">
              <column table="this" column="tip_bud_name" />
            </call>
            <const>'ФАКТ'</const>
          </call>
          <call function="=" exclude="1">
            <column table="this" column="tip_bud_id" />
            <const>'010'</const>
          </call>
          <column table="this" column="summa" as="" type="" />
        </call>
        <column table="this" column="mb3_id" as="mb3_id_a" />
        <column table="this" column="st_id" as="st_id_a" />
        <call title="Доходы и расходы (ЭЭ)" as="dr_ee" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>2</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <call title="Доходы и расходы (Тепло)" as="dr_te" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>3</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <call title="Доходы и расходы (НД)" as="dr_nd" function="if" type="number" is-fact="1" agg="sum">
          <call function="=">
            <column table="this" column="kod_spr_vid_energ" />
            <const>1</const>
          </call>
          <column table="this" column="summa_ft" />
        </call>
        <column table="vb_spr_vid_dey" column="kod_spr_vid_energ" />
      </select>
      <from>
        <query name="va_sp_doh_ras" as="a" />
        <query name="vb_spr_mb3" join="left outer">
          <call function="=">
            <column table="this" column="mb3_id_a" />
            <column table="vb_spr_mb3" column="mb3_sap_code" />
          </call>
        </query>
        <query name="vb_spr_vid_dey" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="this" column="vid_dey_id" />
            <column table="vb_spr_vid_dey" column="vid_dey_sap_code" />
          </call>
        </query>
        <query name="vb_spr_smet_to_sap" join="left outer">
          <call function="=">
            <column table="this" column="st_id_a" />
            <column table="vb_spr_smet_to_sap" column="sap_code" />
          </call>
        </query>
        <query name="vbd_sap_st" join="left outer" exclude="1">
          <call function="=">
            <column table="this" column="st_id_a" />
            <column table="vbd_sap_st" column="sap_code" />
          </call>
        </query>
        <query name="vbd_sap_mb3" join="left outer" exclude="1">
          <call function="=">
            <column table="this" column="mb3_id_a" />
            <column table="vbd_sap_mb3" column="sap_code" />
          </call>
        </query>
      </from>
      <links>
        <link name="vb_spr_mb3" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="vb_dir_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
            <dimlink name="va_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" exclude="1" />
            <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" exclude="1" />
          </dimlink>
        </link>
        <link name="vb_spr_smet_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <link name="kod_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
        <link name="vbd_sap_st" is-private-dimension="1" is-final-dimension="1" dimension="1" exclude="1">
          <dlink name="vb_spr_smet_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
            <dimlink name="is_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </link>
      </links>
    </query>
    <query name="va_sp_doh_ras_frm" class="1" timestamp="18.06.2019 14:30:29" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_doh_ras.xml">
      <select>
        <column table="a" column="kod_sp_doh_ras" key="1" />
        <column table="a" column="ob_gen_id" data-size="30" index="1" />
        <column table="a" column="ob_gen_name" data-size="300" />
        <column table="a" column="st_id" data-size="30" index="1" />
        <column table="a" column="st_name" data-size="300" />
        <column table="a" column="tip_bud_id" data-size="10" index="1" />
        <column table="a" column="tip_bud_name" data-size="300" />
        <column table="a" column="gr_st_id" data-size="30" index="1" />
        <column table="a" column="gr_st_name" data-size="300" />
        <column table="a" column="vid_dey_id" data-size="30" index="1" />
        <column table="a" column="vid_dey_name" data-size="300" />
        <column table="a" column="mb3_id" data-size="30" index="1" />
        <column table="a" column="mb3_name" data-size="300" />
        <column table="a" column="mes" index="1" halign="center" />
        <column table="a" column="summa" />
        <column table="a" column="god" index="1" halign="center" />
        <column table="a" column="kod_direct" />
        <column table="kod_direct" column="name" title="Подразделение МПЭД" />
        <column table="sap_code" column="full_kod_smet" />
      </select>
      <from>
        <query name="va_sp_doh_ras" as="a">
          <link name="kod_direct" />
          <link name="sap_code" />
        </query>
      </from>
    </query>
    <query name="va_sp_doh_ras_buf" class="1" timestamp="18.11.2018 17:34:53" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_doh_ras_buf.xml">
      <select>
        <column table="a" column="ob_gen_id" type="string" data-size="30" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" />
        <column table="a" column="st_id" type="string" data-size="30" />
        <column table="a" column="st_name" type="string" data-size="300" />
        <column table="a" column="tip_bud_id" type="string" data-size="10" />
        <column table="a" column="tip_bud_name" type="string" data-size="300" />
        <column table="a" column="gr_st_id" type="string" data-size="30" />
        <column table="a" column="gr_st_name" type="string" data-size="300" />
        <column table="a" column="vid_dey_id" type="string" data-size="30" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" />
        <column table="a" column="mb3_id" type="string" data-size="30" />
        <column table="a" column="mb3_name" type="string" data-size="300" />
        <column table="a" column="mes" type="number" />
        <column table="a" column="summa" type="number" />
      </select>
      <from>
        <table name="va_sp_doh_ras_buf" as="a" />
      </from>
    </query>
    <query name="va_sp_zatr" class="1" timestamp="13.03.2019 15:35:59" title="Затраты" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_zatr.xml">
      <select>
        <column table="a" column="kod_sp_zatr" type="number" key="1" />
        <column column="ob_gen_id" data-size="30" index="1" table="a" title="Объект генерации (код)" type="string" />
        <column column="ob_gen_name" data-size="300" table="a" title="Объект генерации (наименование)" type="string" />
        <column column="st_id" data-size="30" index="1" table="a" title="Статья доходов и расходов (код)" type="string" />
        <column column="st_name" data-size="300" table="a" title="Статья доходов и расходов  (наименование)" type="string" />
        <column column="tip_bud_id" data-size="10" index="1" table="a" title="Тип данных бюджета (код)" type="string" />
        <column column="tip_bud_name" data-size="300" table="a" title="Тип данных бюджета  (наименование)" type="string" />
        <column table="a" column="mb3_id" type="string" data-size="30" index="1" title="МВЗ (код)" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="МВЗ  (наименование)" />
        <column table="a" column="vn_zak_id" type="string" data-size="10" index="1" title="Внутренний заказ (код)" />
        <column table="a" column="vn_zak_name" type="string" data-size="300" title="Внутренний заказ  (наименование)" />
        <column table="a" column="mes" type="number" index="1" format="F0" halign="center" title="Месяц" is-private-dimension="month" is-final-dimension="month" dimension="month" />
        <column table="a" column="summa" type="number" title="Сумма" />
        <column table="a" column="god" type="number" index="1" format="F0" halign="center" title="Год" is-private-dimension="year" is-final-dimension="year" dimension="year" />
        <call as="summa_ft" type="number" function="if" is-fact="1" agg="sum" title="Затраты (факт)">
          <call function="=">
            <column table="this" column="tip_bud_id" />
            <const>'010'</const>
          </call>
          <column table="this" column="summa" as="" type="" />
        </call>
        <column table="this" column="mb3_id" as="mb3_id_a" />
        <column table="this" column="st_id" as="st_id_a" />
      </select>
      <from>
        <table name="va_sp_zatr" as="a" />
        <query name="vbd_sap_mb3" join="left outer">
          <call function="=">
            <column table="this" column="mb3_id_a" />
            <column table="vbd_sap_mb3" column="sap_code" />
          </call>
        </query>
        <query name="vbd_sap_st" join="left outer">
          <call function="=">
            <column table="a" column="st_id_a" />
            <column table="vbd_sap_st" column="sap_code" />
          </call>
        </query>
      </from>
      <links>
        <link name="vbd_sap_mb3" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dlink name="vb_dir_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
            <dimlink name="va_direct" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
            <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </link>
        <link name="vbd_sap_st" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dlink name="vb_spr_smet_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1">
            <dimlink name="is_spr_smet" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          </dlink>
        </link>
      </links>
    </query>
    <query name="va_sp_zatr_buf" class="1" timestamp="18.11.2018 03:49:26" title="Затраты" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_sp_zatr_buf.xml">
      <select>
        <column table="a" column="ob_gen_id" type="string" data-size="30" />
        <column table="a" column="ob_gen_name" type="string" data-size="300" />
        <column table="a" column="st_id" type="string" data-size="30" />
        <column table="a" column="st_name" type="string" data-size="300" />
        <column table="a" column="tip_bud_id" type="string" data-size="10" />
        <column table="a" column="tip_bud_name" type="string" data-size="300" />
        <column table="a" column="mb3_id" type="string" data-size="30" />
        <column table="a" column="mb3_name" type="string" data-size="300" />
        <column table="a" column="vn_zak_id" type="string" data-size="10" />
        <column table="a" column="vn_zak_name" type="string" data-size="300" />
        <column table="a" column="mes" type="number" />
        <column table="a" column="summa" type="number" />
      </select>
      <from>
        <table name="va_sp_zatr_buf" as="a" />
      </from>
    </query>
    <query name="va_trade" class="1" timestamp="08.04.2019 13:04:43" title="Работа на рынке" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_trade.xml">
      <select>
        <column table="a" column="kod_trade" type="number" key="1" title="Код строки" />
        <column table="a" column="realtime" type="date" title="Дата и время формирования данных" controlType="UIDateTime" />
        <column table="a" column="kod_direct" type="number" title="Код ГТП" />
        <column table="a" column="name_direct" type="string" data-size="1024" title="ГТП" />
        <column table="a" column="date_value" type="date" title="Дата" index="1" />
        <column table="a" column="kod_direction" type="number" title="Код направления" />
        <call as="direct_name" type="string" function="decode" title="Направление">
          <column table="this" column="kod_direction" />
          <const>1</const>
          <const>'Продажа'</const>
          <const>'Покупка'</const>
        </call>
        <column table="a" column="kod_good" type="number" title="Код товара" />
        <call as="good_name" type="string" function="decode" title="Товар">
          <column table="this" column="kod_good" />
          <const>0</const>
          <const>'Электроэнергия'</const>
          <const>'Мощность'</const>
        </call>
        <column table="a" column="kod_marketsector_type" type="number" />
        <column table="a" column="kod_marketsector" type="number" title="Код рынка" />
        <column table="a" column="kod_iso" type="number" />
        <column table="a" column="size_p" type="number" title="Объем МВтч (МВт)" />
        <column table="a" column="price" type="number" title="Цена руб./МВтч (МВт)" />
        <column table="a" column="sum_st" type="number" title="Стоимость руб." />
        <column table="a" column="pr_pf" type="number" title="План/Факт" />
        <call as="pr_pf_name" type="string" function="decode" title="План/Факт">
          <column table="this" column="pr_pf" />
          <const>1</const>
          <const>'Факт'</const>
          <const>'План'</const>
        </call>
        <column table="a" column="id" type="number" />
        <column table="a" column="market_name" type="string" data-size="255" title="Рынок" />
        <column table="a" column="kod_gtp" type="string" data-size="32" title="Код ГТП" />
        <column table="a" column="kod_direct_gtp" type="number" title="Покупка/Продажа" />
        <column table="a" column="stationname" type="string" data-size="255" title="Станция" />
        <column table="a" column="filialname" type="string" data-size="255" title="Филиал" />
      </select>
      <from>
        <table name="va_trade" as="a" />
      </from>
    </query>
    <query name="va_trade_load_log" class="1" timestamp="17.11.2018 03:54:53" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_trade_load_log.xml">
      <select>
        <column table="a" column="kod_trade_load_log" type="number" key="1" />
        <column table="a" column="realtime" type="date" title="Дата и время формирования данных" index="1" controlType="UIDateTime" />
        <column table="a" column="date_value" type="date" title="Данные за дату" index="1" />
        <column table="a" column="load_time" type="date" title="Дата и время загрузки" index="1" controlType="UIDateTime" />
      </select>
      <from>
        <table name="va_trade_load_log" as="a" />
      </from>
    </query>
    <query name="va_sp_zatr_load_log" class="1" timestamp="08.07.2019 13:49:04" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\va_trade_load_log.xml">
      <select>
        <column table="a" column="kod_sp_zatr_load_log" type="number" key="1" />
        <column table="a" type="string" data-size="300" column="filename" title="Файл" />
        <column table="a" column="filetime" type="date" controlType="UIDateTime" title="Дата модификации файла" />
        <column table="a" column="god" title="Данные за год" type="number" format="F0" />
        <column table="a" type="date" title="Дата и время загрузки" controlType="UIDateTime" column="d_m" />
        <column table="a" type="string" column="u_m" title="Позователь БД" data-size="300" />
        <column table="a" type="string" column="t_m" data-size="300" title="Терминал, Пользователь Windows" />
        <column table="a" column="period" type="string" title="Периоды" />
        <column table="a" column="direct_name" type="string" title="Подразделения" />
        <column table="a" column="direct_kod" type="string" title="Подразделения (коды)" />
        <call as="warn" type="string" function="()" exclude="1">
          <const>'Необходимо выбрать подразделение с кодом МВП или ТГК-1'</const>
        </call>
      </select>
      <from>
        <table name="va_sp_zatr_load_log" as="a" />
      </from>
    </query>
    <query name="vb_dir_to_sap" class="1" timestamp="23.04.2019 10:18:18" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_dir_to_sap.xml">
      <select>
        <column table="a" column="kod_spr_smet_to_sap" type="number" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="sap_code" type="string" data-size="300" index="1" is-fact="1" agg="stragg_dist" />
      </select>
      <from>
        <table name="vb_dir_to_sap" as="a" />
        <query join="left outer" name="vbx_spr_direct" as="kod_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="kod_direct" column="kod_direct" />
            <column table="a" column="kod_direct" />
          </call>
        </query>
        <query join="left outer" name="va_direct" as="va_direct">
          <call function="=">
            <column table="va_direct" column="kod_direct" />
            <column table="a" column="kod_direct" />
          </call>
        </query>
        <query name="vbd_sap_mb3" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="sap_code" />
            <column table="vbd_sap_mb3" column="sap_code" />
          </call>
        </query>
      </from>
      <links>
        <link name="va_direct" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <dimlink name="va_dir_sruct_apply" is-private-dimension="1" is-final-dimension="1" dimension="1" />
          <dimlink name="va_dr_i_main" is-private-dimension="1" is-final-dimension="1" dimension="1" />
        </link>
        <dlink name="vb_spr_mb3" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="vb_spr_fed_subject" class="1" timestamp="24.07.2019 18:25:45" order="subject_name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_fed_subject.xml">
      <select>
        <column table="a" column="kod_spr_subj" type="number" column-mandatory="1" />
        <column table="a" column="subject_name" type="string" data-size="300" title="Субъект РФ" vid="1" is-name="1" />
        <column table="a" column="kod_subj" type="number" title="Код субъекта" vid="1" is-name="1" format="F0" />
      </select>
      <from>
        <table name="vb_spr_fed_subject" as="a" />
      </from>
    </query>
    <query name="vb_spr_fed_subject_string" class="1" timestamp="25.07.2019 17:18:41" order="subject_name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_fed_subject.xml">
      <params>
        <param name="p_subj" type="array" />
      </params>
      <select>
        <column table="a" column="subject_name" data-size="300" key="1" group="stragg_dist" />
      </select>
      <from>
        <query name="vb_spr_fed_subject" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="kod_spr_subj" />
          <useparam name="p_subj" />
        </call>
      </where>
    </query>
    <query name="vb_spr_fed_subject_name" class="1" timestamp="05.09.2019 18:00:20" order="subject_name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_fed_subject.xml">
      <select>
        <column table="a" column="subject_name" group="1" vid="1" is-name="1" key="1" />
        <column table="a" column="kod_subj" group="1" vid="1" />
      </select>
      <from>
        <query name="vb_spr_fed_subject" as="a" />
      </from>
    </query>
    <query name="vb_spr_fed_subject_kod_subj" class="1" timestamp="05.09.2019 18:01:14" order="subject_name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_fed_subject.xml">
      <select>
        <column table="a" column="kod_subj" group="1" vid="1" is-name="1" key="1" />
        <column table="a" column="subject_name" group="1" vid="1" />
      </select>
      <from>
        <query name="vb_spr_fed_subject" as="a" />
      </from>
    </query>
    <query name="vb_spr_grouping" class="1" timestamp="03.07.2019 16:11:10" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_grouping.xml">
      <select>
        <column table="a" column="kod_spr_group" type="number" column-mandatory="1" key="1" />
        <column table="a" column="gr_name" type="string" data-size="300" title="Группировка" vid="1" is-name="1" />
      </select>
      <from>
        <table name="vb_spr_grouping" as="a" />
      </from>
    </query>
    <query name="vb_spr_mb3" class="1" timestamp="17.04.2019 18:15:20" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_mb3.xml">
      <select>
        <column table="a" column="kod_spr_mb3" type="number" column-mandatory="1" />
        <column table="a" column="mb3_sap_code" type="string" data-size="300" title="" comment="Код SAP МВЗ" />
        <column table="a" column="mb3_name" type="string" data-size="300" title="" comment="Наименование МВЗ" />
        <column table="a" column="dir_sap_code" type="string" data-size="300" title="" comment="Код SAP подразделения" />
        <column table="a" column="prizn" type="number" title="" comment="основная -0, неосновная деятельность - 1" />
      </select>
      <from>
        <table name="vb_spr_mb3" as="a" />
        <query join="left outer" name="vb_dir_to_sap">
          <call function="=">
            <column table="a" column="dir_sap_code" />
            <column table="vb_dir_to_sap" column="sap_code" />
          </call>
        </query>
      </from>
      <links>
        <link name="vb_dir_to_sap" is-private-dimension="1" is-final-dimension="1" dimension="1" />
      </links>
    </query>
    <query name="vb_spr_od_nd" class="1" timestamp="06.06.2019 13:43:40" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_od_nd.xml">
      <select>
        <column table="a" column="kod_spr_od_nd" type="number" column-mandatory="1" />
        <column table="a" column="od_nd_name" type="string" data-size="300" title="ОД -  НД" />
      </select>
      <from>
        <table name="vb_spr_od_nd" as="a" />
      </from>
    </query>
    <query name="vb_spr_od_nd_plus_null" class="1" timestamp="18.07.2019 17:45:13" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_od_nd.xml">
      <select>
        <column table="b" column="kod_spr_od_nd" column-mandatory="1" key="1" />
        <column table="b" column="od_nd_name" data-size="300" title="ОД -  НД" />
      </select>
      <from>
        <query as="b">
          <union>
            <query>
              <select>
                <column table="a1" column="kod_spr_od_nd" column-mandatory="1" />
                <column table="a1" column="od_nd_name" data-size="300" />
              </select>
              <from>
                <query name="vb_spr_od_nd" as="a1" />
              </from>
            </query>
            <query>
              <select>
                <call as="kod_spr_od_nd" type="number" function="()">
                  <const>-1</const>
                </call>
                <call as="od_nd_name" type="string" function="()">
                  <const>'Пусто'</const>
                </call>
              </select>
              <from>
                <query name="dual" as="a2" />
              </from>
            </query>
          </union>
        </query>
      </from>
    </query>
    <query name="vb_spr_rasp_zatr" class="1" timestamp="18.08.2019 15:12:06" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_rasp_zatr.xml">
      <select>
        <column table="a" column="kod_spr_rasp_zatr" type="number" column-mandatory="1" />
        <column table="a" column="kod_direct" type="number" />
        <column table="a" column="rasp_doh_ras" type="number" title="" comment="Распределять для доходов и расходов" controlType="UICheck" />
        <column table="a" column="rasp_calc" type="number" title="" comment="Распределятб для Калькуляции с/с" controlType="UICheck" />
        <column table="a" column="period_s" type="number" title="" />
        <column table="a" column="period_po" type="number" title="" />
        <call as="valid_dir" function="case" type="string">
          <call function="when">
            <call function="gt">
              <call function="over">
                <call function="count">
                  <column table="this" column="kod_spr_rasp_zatr" />
                </call>
                <call function="partition by">
                  <column table="this" column="kod_direct" />
                </call>
              </call>
              <const>1</const>
            </call>
            <const>'[inf]Более одного одинакового подразделения в справочнике'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="vb_spr_rasp_zatr" as="a" />
        <query name="is_spr_direct_for_mped_only_w_mvp" as="kod_direct" join="left outer">
          <call function="=">
            <column table="a" column="kod_direct" />
            <column table="kod_direct" column="kod_direct" />
          </call>
        </query>
        <query name="mped_spr_time_ym" join="left outer" as="period_s">
          <call function="=">
            <column table="a" column="period_s" />
            <column table="period_s" column="ym" />
          </call>
        </query>
        <query name="mped_spr_time_ym" join="left outer" as="period_po">
          <call function="=">
            <column table="a" column="period_po" />
            <column table="period_po" column="ym" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_spr_schet_calc" class="1" timestamp="16.08.2019 17:48:52" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_schet_calc.xml">
      <select>
        <column table="a" column="kod_spr_schet" type="number" column-mandatory="1" />
        <column table="a" column="kod_schet" type="number" />
        <column table="a" column="kod_spr_schet_list" type="number" />
      </select>
      <from>
        <table name="vb_spr_schet_calc" as="a" />
        <query name="vb_spr_schet_list" as="kod_spr_schet_list" join="left outer">
          <call function="=">
            <column table="this" column="kod_spr_schet_list" />
            <column table="kod_spr_schet_list" column="kod_spr_schet_list" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_spr_schet_calc_group" class="1" timestamp="16.08.2019 17:35:11" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_schet_calc.xml">
      <select>
        <column table="a" column="kod_schet" type="number" group="1" key="1" as="id" />
        <column table="a" column="kod_schet" type="number" group="1" vid="1" title="Код счета" format="F0" halign="center" />
        <column table="kod_spr_schet_list" column="schet_name" type="string" data-size="300" title="Наименование счета" is-name="1" vid="1" group="max" />
      </select>
      <from>
        <query name="vb_spr_schet_calc" as="a">
          <link name="kod_spr_schet_list" />
        </query>
      </from>
    </query>
    <query name="vb_spr_schet_list" class="1" timestamp="16.08.2019 16:58:48" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_schet_list.xml">
      <select>
        <column table="a" column="kod_spr_schet_list" type="number" column-mandatory="1" key="1" />
        <column table="a" column="schet_name" type="string" data-size="300" title="" comment="Наименование счета" is-name="1" vid="1" />
      </select>
      <from>
        <table name="vb_spr_schet_list" as="a" />
      </from>
    </query>
    <query name="vb_spr_smet_calc" class="1" timestamp="16.08.2019 17:31:45" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_calc.xml">
      <select>
        <column table="a" column="kod_spr_smet_calc" type="number" column-mandatory="1" />
        <column table="a" column="smet_calc_name" type="string" data-size="300" title="" vid="1" is-name="1" />
        <column table="a" column="schet_no_mb3" type="number" title="" is-fact="1" agg="max" />
      </select>
      <from>
        <table name="vb_spr_smet_calc" as="a" />
        <query name="vb_spr_schet_calc_group" as="schet_no_mb3" join="left outer">
          <call function="=">
            <column table="a" column="schet_no_mb3" />
            <column table="schet_no_mb3" column="id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_spr_smet_to_sap" class="1" timestamp="30.07.2019 13:37:07" order="kod_spr_smet" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_to_sap.xml">
      <select>
        <column table="a" column="kod_spr_smet_to_sap" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="sap_code" type="string" data-size="300" index="1" is-fact="1" agg="stragg" format="F0" halign="left" />
        <column table="a" column="mb3_code" type="string" />
        <call as="sap_mb3" function="||" is-fact="1" agg="stragg">
          <const>'('</const>
          <column table="this" column="sap_code" />
          <const>' | '</const>
          <call function="nvl">
            <column table="this" column="mb3_code" />
            <const>'ВСЕ'</const>
          </call>
          <const>')'</const>
        </call>
        <column table="a" column="period_s" type="number" />
        <column table="a" column="period_po" type="number" />
      </select>
      <from>
        <table name="vb_spr_smet_to_sap" as="a" />
        <query name="vb_spr_smet_to_sap" as="kod_spr_smet_to_sap" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet_to_sap" />
            <column table="kod_spr_smet_to_sap" column="kod_spr_smet_to_sap" />
          </call>
        </query>
        <query name="is_spr_smet" as="kod_spr_smet" join="left inner" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="kod_spr_smet" />
            <column table="kod_spr_smet" column="kod_spr_smet" />
          </call>
        </query>
        <query name="vbd_sap_st" join="left outer" is-private-dimension="1" is-final-dimension="1" dimension="1">
          <call function="=">
            <column table="a" column="sap_code" />
            <column table="vbd_sap_st" column="sap_code" />
          </call>
        </query>
      </from>
      <where>
        <call function="is null">
          <column table="this" column="period_po" />
        </call>
      </where>
    </query>
    <query name="dim_smet_sap" class="1" timestamp="23.04.2019 10:43:40" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_to_sap.xml">
      <select>
        <call as="smet_sap_pk" key="1" function="||-">
          <column table="this" column="sap_code" />
          <column table="this" column="prizn" />
        </call>
        <column table="a" column="kod_spr_smet_to_sap" type="number" />
        <column table="a" column="kod_spr_smet" type="number" />
        <column table="a" column="sap_code" type="string" data-size="300" index="1" />
        <column table="a" column="mb3_code" type="string" />
        <column table="kod_spr_smet" column="kod_smet" />
        <column table="kod_spr_smet" column="prizn" />
        <column table="kod_spr_smet" column="full_name" />
        <column table="kod_spr_smet" column="kod_parent" />
      </select>
      <from>
        <query name="vb_spr_smet_to_sap" as="a">
          <link name="kod_spr_smet" />
        </query>
      </from>
    </query>
    <query name="vb_spr_smet_to_sap_agg_pre" class="1" timestamp="18.06.2019 14:23:23" order="full_kod_smet" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_to_sap.xml">
      <select>
        <column table="a" column="kod_spr_smet_to_sap" />
        <column table="a" column="sap_code" />
        <column table="kod_spr_smet" column="full_kod_smet" />
      </select>
      <from>
        <query name="vb_spr_smet_to_sap" as="a">
          <link name="kod_spr_smet" />
        </query>
      </from>
    </query>
    <query name="vb_spr_smet_to_sap_agg" class="1" timestamp="18.06.2019 14:30:01" order="full_kod_smet" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_to_sap.xml">
      <select>
        <column table="a" column="sap_code" group="1" />
        <column table="a" column="full_kod_smet" group="stragg_dist" title="Список статей сметы по коду SAP" />
      </select>
      <from>
        <query name="vb_spr_smet_to_sap_agg_pre" as="a" />
      </from>
    </query>
    <query name="vb_spr_smet_zatr_calc" class="1" timestamp="05.07.2019 12:01:25" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_smet_zatr_calc.xml">
      <select>
        <column table="a" column="kod_spr_smet_zatr" type="number" column-mandatory="1" comment="ID строки" />
        <column table="a" column="smet_code" type="number" title="" comment="Статья затрат" />
        <column table="a" column="smet_name" type="string" data-size="300" title="" comment="Наименование статьи затрат" />
        <column table="a" column="kod_spr_smet_calc" type="number" comment="Код статьи затрат для калькуляции, спр. vb_spr_smet_calc" />
        <column table="a" column="period_s" type="number" comment="Срок действия &quot;С&quot;" />
        <column table="a" column="period_po" type="number" comment="Срок действия &quot;По&quot;" />
        <column table="a" column="storn" type="number" title="" comment="Сторнировать в следующем преиоде: 0 - Нет, 1 - Да" />
        <call as="valid_storn" function="case" type="string">
          <call function="when">
            <call function="and">
              <call function="is not null">
                <column table="this" column="storn" />
              </call>
              <call function="is null">
                <column table="this" column="period_po" />
              </call>
            </call>
            <const>'[inf]Признак не может быть заполнен, если срок ПО пустой. Значение будет удалено'</const>
          </call>
        </call>
        <call as="valid_smet_code" function="case" type="string" exclude="1">
          <call function="when">
            <call function="and">
              <call function="gt">
                <call function="over">
                  <call function="count">
                    <column table="this" column="kod_spr_smet_zatr" />
                  </call>
                  <call function="partition by">
                    <column table="this" column="smet_code" />
                  </call>
                </call>
                <const>1</const>
              </call>
              <call function="is not null">
                <query>
                  <select>
                    <column group="max" table="b" column="kod_spr_smet_zatr" />
                  </select>
                  <from>
                    <query name="vb_spr_smet_zatr_calc" as="b" />
                  </from>
                  <where>
                    <call function="and">
                      <call function="=">
                        <column table="a" column="smet_code" type="number" title="" />
                        <column table="b" column="smet_code" />
                      </call>
                      <call function="!=">
                        <column table="a" column="kod_spr_smet_zatr" type="number" column-mandatory="1" />
                        <column table="b" column="kod_spr_smet_zatr" />
                      </call>
                      <call function="between">
                        <column table="b" column="period_s" />
                        <column table="a" column="period_s" type="number" />
                        <call function="nvl">
                          <column table="a" column="period_po" type="number" />
                          <call function="date to ym">
                            <call function="doomsday" />
                          </call>
                        </call>
                      </call>
                    </call>
                  </where>
                </query>
              </call>
            </call>
            <const>'[inf]Более одной одинаковой статьи затрат в один промежуток времени'</const>
          </call>
        </call>
        <call function="()" type="number" as="kod_spr_smet_zatr_an" exclude="1">
          <query>
            <select>
              <call function="max" type="number">
                <column table="b" column="kod_spr_smet_zatr" />
              </call>
            </select>
            <from>
              <query name="vb_spr_smet_zatr_calc" as="b" />
            </from>
            <where>
              <call function="and">
                <call function="=">
                  <column table="a" column="smet_code" type="number" title="" />
                  <column table="b" column="smet_code" />
                </call>
                <call function="!=">
                  <column table="a" column="kod_spr_smet_zatr" type="number" column-mandatory="1" />
                  <column table="b" column="kod_spr_smet_zatr" />
                </call>
                <call function="between">
                  <column table="b" column="period_s" />
                  <column table="a" column="period_s" type="number" />
                  <call function="nvl">
                    <column table="a" column="period_po" type="number" />
                    <call function="date to ym">
                      <call function="doomsday" />
                    </call>
                  </call>
                </call>
              </call>
            </where>
          </query>
        </call>
        <call as="per_intersect" function="if">
          <call function="or">
            <call function="between">
              <call function="over">
                <call function="lag">
                  <column table="this" column="period_s" />
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_s" />
                </call>
              </call>
              <column table="this" column="period_s" />
              <call function="nvl">
                <column table="this" column="period_po" />
                <const>9999.99</const>
              </call>
            </call>
            <call function="between">
              <call function="over">
                <call function="lead">
                  <column table="this" column="period_s" />
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_s" />
                </call>
              </call>
              <column table="this" column="period_s" />
              <call function="nvl">
                <column table="this" column="period_po" />
                <const>9999.99</const>
              </call>
            </call>
            <call function="between">
              <column table="this" column="period_s" />
              <call function="over">
                <call function="lag">
                  <column table="this" column="period_s" />
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_s" />
                </call>
              </call>
              <call function="over">
                <call function="lag">
                  <call function="nvl">
                    <column table="this" column="period_po" />
                    <const>9999.99</const>
                  </call>
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_s" />
                </call>
              </call>
            </call>
            <call function="between">
              <call function="nvl">
                <column table="this" column="period_po" />
                <const>9999.99</const>
              </call>
              <call function="over">
                <call function="lead">
                  <column table="this" column="period_s" />
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_po" />
                </call>
              </call>
              <call function="over">
                <call function="lead">
                  <call function="nvl">
                    <column table="this" column="period_po" />
                    <const>9999.99</const>
                  </call>
                </call>
                <call function="partition by">
                  <column table="this" column="smet_code" />
                </call>
                <call function="order by simple">
                  <column table="this" column="period_po" />
                </call>
              </call>
            </call>
          </call>
          <const>1</const>
          <const>0</const>
        </call>
        <call as="valid_smet" function="case" type="string">
          <call function="when">
            <call function="and">
              <call function="gt">
                <call function="over">
                  <call function="count">
                    <column table="this" column="kod_spr_smet_zatr" />
                  </call>
                  <call function="partition by">
                    <column table="this" column="smet_code" />
                  </call>
                </call>
                <const>1</const>
              </call>
              <call function="is not null" exclude="1">
                <column table="this" column="kod_spr_smet_zatr_an" />
              </call>
              <call function="=1">
                <column table="this" column="per_intersect" />
              </call>
            </call>
            <const>'[inf]Более одной одинаковой статьи затрат в один промежуток времени'</const>
          </call>
        </call>
        <call as="valid_po" function="case" type="string">
          <call function="when">
            <call function="and">
              <call function="lt">
                <column table="this" column="period_po" />
                <column table="this" column="period_s" />
              </call>
            </call>
            <const>'[inf]Срок По не может быть меньше срока С. Значение срока ПО будет приравнено сроку С'</const>
          </call>
        </call>
      </select>
      <from>
        <table name="vb_spr_smet_zatr_calc" as="a" />
        <query name="vb_spr_smet_calc" as="kod_spr_smet_calc" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_smet_calc" />
            <column table="kod_spr_smet_calc" column="kod_spr_smet_calc" />
          </call>
        </query>
        <query name="mped_spr_time_ym" join="left outer" as="period_s">
          <call function="=">
            <column table="a" column="period_s" />
            <column table="period_s" column="ym" />
          </call>
        </query>
        <query name="mped_spr_time_ym" join="left outer" as="period_po">
          <call function="=">
            <column table="a" column="period_po" />
            <column table="period_po" column="ym" />
          </call>
        </query>
        <query name="mped_yes_no" as="storn" join="left outer">
          <call function="=">
            <column table="a" column="storn" />
            <column table="storn" column="id" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_spr_vid_dey" class="1" timestamp="24.07.2019 18:25:24" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_vid_dey.xml">
      <select>
        <column table="a" column="kod_spr_vid_dey" type="number" column-mandatory="1" comment="ID строки" key="1" />
        <column table="a" column="vid_dey_sap_code" type="string" data-size="30" title="Код вида деятельности" comment="Код SAP Вида деятельности" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" comment="Наименование вида деятельности" title="Вид деятельности" />
        <column table="a" column="kod_spr_vid_energ" type="number" comment="Код вида энергии - vb_spr_vid_energ">
          <listquery>
            <query name="vb_spr_vid_energ" />
          </listquery>
        </column>
        <call as="prizn" function="case" exclude="1">
          <call function="when">
            <call function="in">
              <column table="this" column="kod_spr_vid_energ" />
              <const>(2,3)</const>
            </call>
            <const>0</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="kod_spr_vid_energ" />
              <const>1</const>
            </call>
            <const>1</const>
          </call>
        </call>
        <column table="kod_spr_vid_energ" column="kod_spr_od_nd" as="prizn" />
      </select>
      <from>
        <table name="vb_spr_vid_dey" as="a" />
        <query name="vb_spr_vid_energ" as="kod_spr_vid_energ" join="left outer">
          <call function="=">
            <column table="a" column="kod_spr_vid_energ" />
            <column table="kod_spr_vid_energ" column="kod_spr_vid_energ" />
          </call>
        </query>
      </from>
    </query>
    <query name="dim_smet_vid_dey" class="1" timestamp="22.04.2019 13:42:19" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_vid_dey.xml">
      <select>
        <call as="smet_vd_kod" function="||-" key="1">
          <column table="this" column="sap_code" />
          <column table="this" column="vid_dey_sap_code" />
        </call>
        <column table="a" column="vid_dey_sap_code" />
        <column table="a" column="kod_spr_vid_energ" />
        <call as="prizn" function="case">
          <call function="when">
            <call function="in">
              <column table="this" column="kod_spr_vid_energ" />
              <const>(2,3)</const>
            </call>
            <const comment="Основная деятельность (ОД)">0</const>
          </call>
          <call function="when">
            <call function="=">
              <column table="this" column="kod_spr_vid_energ" />
              <const>1</const>
            </call>
            <const comment="Неосновная деятельность (НД)">1</const>
          </call>
        </call>
        <column table="vb_spr_smet_to_sap" column="sap_code" />
        <column table="sm" column="kod_spr_smet" />
        <column table="sm" column="kod_smet" />
        <column table="sm" column="full_name" />
        <column table="sm" column="kod_parent" />
      </select>
      <from>
        <query name="vb_spr_vid_dey" as="a" />
        <query name="is_spr_smet" as="sm" join="inner">
          <call function="=">
            <column table="this" column="prizn" />
            <column table="sm" column="prizn" />
          </call>
          <elink name="vb_spr_smet_to_sap" />
        </query>
      </from>
      <where>
        <call function="is not null">
          <column table="this" column="sap_code" />
        </call>
      </where>
    </query>
    <query name="vb_spr_vid_dey_od_list" class="1" timestamp="24.07.2019 18:25:24" order="vid_dey_name" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_vid_dey.xml">
      <select>
        <column table="a" column="kod_spr_vid_dey" type="number" column-mandatory="1" comment="ID строки" key="1" />
        <column table="a" column="vid_dey_name" type="string" data-size="300" vid="1" is-name="1" />
        <column table="a" column="vid_dey_sap_code" />
      </select>
      <from>
        <query name="vb_spr_vid_dey" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="a" column="prizn" />
          <const>0</const>
        </call>
      </where>
    </query>
    <query name="vb_spr_vid_dey_od_string" class="1" timestamp="25.07.2019 17:40:04" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_vid_dey.xml">
      <params>
        <param name="p_vd" type="array" />
      </params>
      <select>
        <column table="a" column="vid_dey_sap_code" group="stragg_dist" key="1" />
      </select>
      <from>
        <query name="vb_spr_vid_dey" as="a" />
      </from>
      <where>
        <call function="in">
          <column table="a" column="kod_spr_vid_dey" />
          <useparam name="p_vd" />
        </call>
      </where>
    </query>
    <query name="vb_spr_vid_energ" class="1" timestamp="03.07.2019 16:00:01" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_spr_vid_energ.xml">
      <select>
        <column table="a" column="kod_spr_vid_energ" type="number" column-mandatory="1" />
        <column table="a" column="vid_energ_name" type="string" data-size="300" title="Вид энергии" comment="Вид энергии" />
        <column table="a" column="kod_spr_od_nd" type="number" comment="0 - ОД; 1 - НД">
          <listquery>
            <query name="vb_spr_od_nd" />
          </listquery>
        </column>
      </select>
      <from>
        <table name="vb_spr_vid_energ" as="a" />
        <query name="vb_spr_od_nd" join="left outer" as="kod_spr_od_nd">
          <call function="=">
            <column table="a" column="kod_spr_od_nd" />
            <column table="kod_spr_od_nd" column="kod_spr_od_nd" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_utv_periods" class="1" timestamp="16.08.2019 16:14:30" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <select>
        <column table="a" column="kod_utv" type="number" column-mandatory="1" />
        <column table="a" column="god" type="number" title="" />
        <column table="a" column="mes" type="number" title="" />
        <column table="a" column="kod_direct" type="number" comment="Подразделение" />
        <column table="a" column="plan_utv" type="number" title="" comment="1 - план утвержден, 0 - план не утвержден" controlType="UICheck" />
        <column table="a" column="fact_utv" type="number" title="Факт утвержден" comment="1 - факт утвержден, 0 - факт не утвержден" controlType="UICheck" />
        <column table="a" column="agree" type="number" comment="0/null - не проверено, 1 - проверено, 2 - проверено с ошибками" controlType="UICheck" />
        <column table="a" column="agree_comment" type="string" comment="Комментарий к проверке" controlType="UITextEx" />
        <call as="pl_utv_1" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>1</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_2" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>2</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_3" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>3</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_4" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>4</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_5" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>5</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_6" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>6</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_7" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>7</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_8" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>8</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_9" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>9</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_10" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>10</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_11" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>11</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="pl_utv_12" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>12</const>
          </call>
          <column table="this" column="plan_utv" />
        </call>
        <call as="f_utv_1" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>1</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_2" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>2</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_3" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>3</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_4" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>4</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_5" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>5</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_6" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>6</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_7" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>7</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_8" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>8</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_9" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>9</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_10" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>10</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_11" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>11</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="f_utv_12" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>12</const>
          </call>
          <column table="this" column="fact_utv" />
        </call>
        <call as="agree_1" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>1</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_2" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>2</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_3" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>3</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_4" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>4</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_5" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>5</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_6" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>6</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_7" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>7</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_8" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>8</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_9" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>9</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_10" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>10</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_11" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>11</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_12" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>12</const>
          </call>
          <column table="this" column="agree" />
        </call>
        <call as="agree_comment_1" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>1</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_2" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>2</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_3" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>3</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_4" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>4</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_5" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>5</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_6" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>6</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_7" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>7</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_8" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>8</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_9" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>9</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_10" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>10</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_11" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>11</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
        <call as="agree_comment_12" function="if" type="number" exclude="1">
          <call function="=">
            <column table="this" column="mes" />
            <const>12</const>
          </call>
          <column table="this" column="agree_comment" />
        </call>
      </select>
      <from>
        <table name="vb_utv_periods" as="a" />
        <query as="kod_direct" join="left outer" name="is_spr_direct">
          <call function="=">
            <column column="kod_direct" table="a" />
            <column column="kod_direct" table="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_utv_periods_by_god" class="1" timestamp="14.08.2019 17:11:58" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <params>
        <param name="god" type="number">
          <const>2019</const>
        </param>
      </params>
      <select>
        <call key="1" function="||-" as="id" group="1">
          <column table="this" column="kod_direct" />
          <column table="this" column="god" />
        </call>
        <column column="god" table="a" title="" type="number" group="1" />
        <column table="a" column="kod_direct" type="number" group="1" />
        <column table="a" column="pl_utv_1" group="sum" />
        <column table="a" column="pl_utv_2" group="sum" />
        <column table="a" column="pl_utv_3" group="sum" />
        <column table="a" column="pl_utv_4" group="sum" />
        <column table="a" column="pl_utv_5" group="sum" />
        <column table="a" column="pl_utv_6" group="sum" />
        <column table="a" column="pl_utv_7" group="sum" />
        <column table="a" column="pl_utv_8" group="sum" />
        <column table="a" column="pl_utv_9" group="sum" />
        <column table="a" column="pl_utv_10" group="sum" />
        <column table="a" column="pl_utv_11" group="sum" />
        <column table="a" column="pl_utv_12" group="sum" />
        <column table="a" column="f_utv_1" group="sum" />
        <column table="a" column="f_utv_2" group="sum" />
        <column table="a" column="f_utv_3" group="sum" />
        <column table="a" column="f_utv_4" group="sum" />
        <column table="a" column="f_utv_5" group="sum" />
        <column table="a" column="f_utv_6" group="sum" />
        <column table="a" column="f_utv_7" group="sum" />
        <column table="a" column="f_utv_8" group="sum" />
        <column table="a" column="f_utv_9" group="sum" />
        <column table="a" column="f_utv_10" group="sum" />
        <column table="a" column="f_utv_11" group="sum" />
        <column table="a" column="f_utv_12" group="sum" />
        <column table="a" column="agree_1" group="sum" />
        <column table="a" column="agree_2" group="sum" />
        <column table="a" column="agree_3" group="sum" />
        <column table="a" column="agree_4" group="sum" />
        <column table="a" column="agree_5" group="sum" />
        <column table="a" column="agree_6" group="sum" />
        <column table="a" column="agree_7" group="sum" />
        <column table="a" column="agree_8" group="sum" />
        <column table="a" column="agree_9" group="sum" />
        <column table="a" column="agree_10" group="sum" />
        <column table="a" column="agree_11" group="sum" />
        <column table="a" column="agree_12" group="sum" />
        <column table="a" column="agree_comment_1" group="max" />
        <column table="a" column="agree_comment_2" group="max" />
        <column table="a" column="agree_comment_3" group="max" />
        <column table="a" column="agree_comment_4" group="max" />
        <column table="a" column="agree_comment_5" group="max" />
        <column table="a" column="agree_comment_6" group="max" />
        <column table="a" column="agree_comment_7" group="max" />
        <column table="a" column="agree_comment_8" group="max" />
        <column table="a" column="agree_comment_9" group="max" />
        <column table="a" column="agree_comment_10" group="max" />
        <column table="a" column="agree_comment_11" group="max" />
        <column table="a" column="agree_comment_12" group="max" />
      </select>
      <from>
        <query name="vb_utv_periods" as="a" />
      </from>
      <where>
        <call function="=">
          <column table="this" column="god" />
          <useparam name="god" />
        </call>
      </where>
    </query>
    <query name="vb_utv_periods_dir_tree_old" class="1" timestamp="16.08.2019 15:53:05" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <params>
        <param name="god" type="number">
          <const>2019</const>
        </param>
      </params>
      <select>
        <column table="kod_direct" column="kod_direct" />
        <column table="kod_direct" column="parent_id" />
        <column table="kod_direct" column="name" />
        <column column="id" table="a" title="" />
        <column column="god" table="a" title="" />
        <column table="a" column="kod_direct" as="kod_dir_utv" />
        <column table="a" column="pl_utv_1" controlType="UICheck" />
        <column table="a" column="pl_utv_2" controlType="UICheck" />
        <column table="a" column="pl_utv_3" controlType="UICheck" />
        <column table="a" column="pl_utv_4" controlType="UICheck" />
        <column table="a" column="pl_utv_5" controlType="UICheck" />
        <column table="a" column="pl_utv_6" controlType="UICheck" />
        <column table="a" column="pl_utv_7" controlType="UICheck" />
        <column table="a" column="pl_utv_8" controlType="UICheck" />
        <column table="a" column="pl_utv_9" controlType="UICheck" />
        <column table="a" column="pl_utv_10" controlType="UICheck" />
        <column table="a" column="pl_utv_11" controlType="UICheck" />
        <column table="a" column="pl_utv_12" controlType="UICheck" />
        <column table="a" column="f_utv_1" controlType="UICheck" />
        <column table="a" column="f_utv_2" controlType="UICheck" />
        <column table="a" column="f_utv_3" controlType="UICheck" />
        <column table="a" column="f_utv_4" controlType="UICheck" />
        <column table="a" column="f_utv_5" controlType="UICheck" />
        <column table="a" column="f_utv_6" controlType="UICheck" />
        <column table="a" column="f_utv_7" controlType="UICheck" />
        <column table="a" column="f_utv_8" controlType="UICheck" />
        <column table="a" column="f_utv_9" controlType="UICheck" />
        <column table="a" column="f_utv_10" controlType="UICheck" />
        <column table="a" column="f_utv_11" controlType="UICheck" />
        <column table="a" column="f_utv_12" controlType="UICheck" />
        <column table="a" column="agree_1" controlType="UICheck" />
        <column table="a" column="agree_2" controlType="UICheck" />
        <column table="a" column="agree_3" controlType="UICheck" />
        <column table="a" column="agree_4" controlType="UICheck" />
        <column table="a" column="agree_5" controlType="UICheck" />
        <column table="a" column="agree_6" controlType="UICheck" />
        <column table="a" column="agree_7" controlType="UICheck" />
        <column table="a" column="agree_8" controlType="UICheck" />
        <column table="a" column="agree_9" controlType="UICheck" />
        <column table="a" column="agree_10" controlType="UICheck" />
        <column table="a" column="agree_11" controlType="UICheck" />
        <column table="a" column="agree_12" controlType="UICheck" />
        <column table="a" column="agree_comment_1" />
        <column table="a" column="agree_comment_2" />
        <column table="a" column="agree_comment_3" />
        <column table="a" column="agree_comment_4" />
        <column table="a" column="agree_comment_5" />
        <column table="a" column="agree_comment_6" />
        <column table="a" column="agree_comment_7" />
        <column table="a" column="agree_comment_8" />
        <column table="a" column="agree_comment_9" />
        <column table="a" column="agree_comment_10" />
        <column table="a" column="agree_comment_11" />
        <column table="a" column="agree_comment_12" />
        <call as="pl_utv_v_1" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_1" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_2" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_2" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_3" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_3" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_4" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_4" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_5" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_5" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_6" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_6" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_7" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_7" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_8" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_8" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_9" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_9" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_10" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_10" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_11" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_11" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="pl_utv_v_12" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="pl_utv_12" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_1" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_1" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_2" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_2" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_3" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_3" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_4" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_4" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_5" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_5" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_6" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_6" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_7" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_7" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_8" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_8" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_9" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_9" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_10" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_10" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_11" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_11" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
        <call as="f_utv_v_12" function="if" type="string" exclude="1">
          <call function="=">
            <column table="this" column="f_utv_12" />
            <const>1</const>
          </call>
          <const>'V'</const>
        </call>
      </select>
      <from>
        <query name="vb_utv_periods_by_god" as="a">
          <withparams>
            <useparam name="god" />
          </withparams>
        </query>
        <query as="kod_direct" join="right outer" name="va_dr_fq_list1">
          <call function="=">
            <column column="kod_direct" table="a" />
            <column column="kod_direct" table="kod_direct" />
          </call>
        </query>
      </from>
    </query>
    <query name="vb_utv_per_by_dir_tree_dist" timestamp="17.06.2019 18:31:46" class="1" stored="va_direct_tree_mv" comment="Если утверждено родительское подразделение, то утверждено дочернее" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <select>
        <call function="||-" group="1" as="id">
          <column table="this" column="ym" />
          <column table="this" column="kod_direct" />
        </call>
        <column table="a" column="ym" group="1" />
        <column table="a" column="kod_direct" group="1" />
        <column table="a" column="fact_utv" group="1" />
      </select>
      <from>
        <query name="vb_utv_per_by_dir_tree" as="a" />
      </from>
    </query>
    <query name="vb_utv_per_by_dir_tree" timestamp="17.06.2019 18:31:56" class="1" stored="va_direct_tree_mv" comment="Если утверждено родительское подразделение, то утверждено дочернее" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <select>
        <call as="id" function="rownum" />
        <call as="ym" function="num to ym">
          <column table="this" column="god" />
          <column table="this" column="mes" />
        </call>
        <call function="connect_by_root" as="god" type="number">
          <column table="utv" column="god" />
        </call>
        <call function="connect_by_root" as="mes" type="number">
          <column table="utv" column="mes" />
        </call>
        <column table="a" column="kod_direct" />
        <call as="fact_utv" function="connect_by_root" type="string">
          <call function="if">
            <call function="=">
              <column table="utv" column="fact_utv" />
              <const>1</const>
            </call>
            <const>'V'</const>
          </call>
        </call>
      </select>
      <from>
        <query as="a" name="is_spr_direct" />
        <query name="vb_utv_periods" as="utv" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="kod_direct" />
              <column table="utv" column="kod_direct" />
            </call>
            <call function="=">
              <column table="utv" column="fact_utv" />
              <const>1</const>
            </call>
          </call>
        </query>
      </from>
      <connect>
        <call function="=">
          <column table="a" column="kod_direct" prior="1" />
          <column table="a" column="kod_parent" />
        </call>
      </connect>
      <start>
        <call function="=">
          <column table="a" column="kod_direct" />
          <column table="utv" column="kod_direct" />
        </call>
      </start>
    </query>
    <query name="vb_spr_time_utv_ym_by_dir" class="1" timestamp="17.06.2019 18:49:23" order="ym desc" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <params>
        <param name="p_kod_direct" type="number">
          <const>1150</const>
        </param>
      </params>
      <select>
        <column table="a" column="ym" />
        <column table="a" column="name" />
        <column table="utv" column="fact_utv" halign="center" />
      </select>
      <from>
        <query name="spr_time_ym_pre" as="a" />
        <query name="vb_utv_per_by_dir_tree_dist" as="utv" join="left outer">
          <call function="and">
            <call function="=">
              <column table="a" column="ym" />
              <column table="utv" column="ym" />
            </call>
            <call function="=">
              <column table="utv" column="kod_direct" />
              <useparam name="p_kod_direct" />
            </call>
          </call>
        </query>
      </from>
      <where>
        <call function="le">
          <column table="a" column="year" />
          <call function="year">
            <call function="sysdate" />
          </call>
        </call>
      </where>
    </query>
    <query name="vb_spr_time_utv_ym_by_dir_bool" class="1" timestamp="23.07.2019 15:40:38" order="ym desc" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <params>
        <param name="p_kod_direct" type="number" />
        <param name="p_period" type="number" />
      </params>
      <select>
        <call as="utv" group="max" type="number" function="if">
          <call function="or">
            <call function="=">
              <column table="a" column="fact_utv" />
              <const>'V'</const>
            </call>
            <call function="lt">
              <column table="a" column="ym" />
              <const>2019.01</const>
            </call>
          </call>
          <const>0</const>
          <const>1</const>
        </call>
      </select>
      <from>
        <query name="vb_spr_time_utv_ym_by_dir" as="a">
          <withparams>
            <useparam name="p_kod_direct" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="ym" />
          <useparam name="p_period" />
        </call>
      </where>
    </query>
    <query name="vb_utv_periods_dir_tree" class="1" timestamp="16.08.2019 15:54:40" file="sql.builder.templates\sql.builder\projects\mped\scheme\original\vb_utv_periods.xml">
      <params>
        <param name="god" type="number">
          <const>2019</const>
        </param>
      </params>
      <select>
        <column table="b" column="kod_direct" key="1" as="id" />
        <column table="b" column="kod_direct" />
        <column table="b" column="parent_id" />
        <column table="b" column="name" />
        <column table="b" column="ord" />
        <column table="a" column="year" as="god" />
        <column table="v1" column="kod_utv" as="kod_utv_1" />
        <column table="v1" column="god" as="god_1" />
        <column table="v1" column="kod_direct" as="kod_direct_1" />
        <column table="v1" column="plan_utv" as="pl_utv_1" />
        <column table="v1" column="fact_utv" as="f_utv_1" />
        <column table="v1" column="agree" as="agree_1" />
        <column table="v1" column="agree_comment" as="agree_comment_1" />
        <column table="v2" column="kod_utv" as="kod_utv_2" />
        <column table="v2" column="god" as="god_2" />
        <column table="v2" column="kod_direct" as="kod_direct_2" />
        <column table="v2" column="plan_utv" as="pl_utv_2" />
        <column table="v2" column="fact_utv" as="f_utv_2" />
        <column table="v2" column="agree" as="agree_2" />
        <column table="v2" column="agree_comment" as="agree_comment_2" />
        <column table="v3" column="kod_utv" as="kod_utv_3" />
        <column table="v3" column="god" as="god_3" />
        <column table="v3" column="kod_direct" as="kod_direct_3" />
        <column table="v3" column="plan_utv" as="pl_utv_3" />
        <column table="v3" column="fact_utv" as="f_utv_3" />
        <column table="v3" column="agree" as="agree_3" />
        <column table="v3" column="agree_comment" as="agree_comment_3" />
        <column table="v4" column="kod_utv" as="kod_utv_4" />
        <column table="v4" column="god" as="god_4" />
        <column table="v4" column="kod_direct" as="kod_direct_4" />
        <column table="v4" column="plan_utv" as="pl_utv_4" />
        <column table="v4" column="fact_utv" as="f_utv_4" />
        <column table="v4" column="agree" as="agree_4" />
        <column table="v4" column="agree_comment" as="agree_comment_4" />
        <column table="v5" column="kod_utv" as="kod_utv_5" />
        <column table="v5" column="god" as="god_5" />
        <column table="v5" column="kod_direct" as="kod_direct_5" />
        <column table="v5" column="plan_utv" as="pl_utv_5" />
        <column table="v5" column="fact_utv" as="f_utv_5" />
        <column table="v5" column="agree" as="agree_5" />
        <column table="v5" column="agree_comment" as="agree_comment_5" />
        <column table="v6" column="kod_utv" as="kod_utv_6" />
        <column table="v6" column="god" as="god_6" />
        <column table="v6" column="kod_direct" as="kod_direct_6" />
        <column table="v6" column="plan_utv" as="pl_utv_6" />
        <column table="v6" column="fact_utv" as="f_utv_6" />
        <column table="v6" column="agree" as="agree_6" />
        <column table="v6" column="agree_comment" as="agree_comment_6" />
        <column table="v7" column="kod_utv" as="kod_utv_7" />
        <column table="v7" column="god" as="god_7" />
        <column table="v7" column="kod_direct" as="kod_direct_7" />
        <column table="v7" column="plan_utv" as="pl_utv_7" />
        <column table="v7" column="fact_utv" as="f_utv_7" />
        <column table="v7" column="agree" as="agree_7" />
        <column table="v7" column="agree_comment" as="agree_comment_7" />
        <column table="v8" column="kod_utv" as="kod_utv_8" />
        <column table="v8" column="god" as="god_8" />
        <column table="v8" column="kod_direct" as="kod_direct_8" />
        <column table="v8" column="plan_utv" as="pl_utv_8" />
        <column table="v8" column="fact_utv" as="f_utv_8" />
        <column table="v8" column="agree" as="agree_8" />
        <column table="v8" column="agree_comment" as="agree_comment_8" />
        <column table="v9" column="kod_utv" as="kod_utv_9" />
        <column table="v9" column="god" as="god_9" />
        <column table="v9" column="kod_direct" as="kod_direct_9" />
        <column table="v9" column="plan_utv" as="pl_utv_9" />
        <column table="v9" column="fact_utv" as="f_utv_9" />
        <column table="v9" column="agree" as="agree_9" />
        <column table="v9" column="agree_comment" as="agree_comment_9" />
        <column table="v10" column="kod_utv" as="kod_utv_10" />
        <column table="v10" column="god" as="god_10" />
        <column table="v10" column="kod_direct" as="kod_direct_10" />
        <column table="v10" column="plan_utv" as="pl_utv_10" />
        <column table="v10" column="fact_utv" as="f_utv_10" />
        <column table="v10" column="agree" as="agree_10" />
        <column table="v10" column="agree_comment" as="agree_comment_10" />
        <column table="v11" column="kod_utv" as="kod_utv_11" />
        <column table="v11" column="god" as="god_11" />
        <column table="v11" column="kod_direct" as="kod_direct_11" />
        <column table="v11" column="plan_utv" as="pl_utv_11" />
        <column table="v11" column="fact_utv" as="f_utv_11" />
        <column table="v11" column="agree" as="agree_11" />
        <column table="v11" column="agree_comment" as="agree_comment_11" />
        <column table="v12" column="kod_utv" as="kod_utv_12" />
        <column table="v12" column="god" as="god_12" />
        <column table="v12" column="kod_direct" as="kod_direct_12" />
        <column table="v12" column="plan_utv" as="pl_utv_12" />
        <column table="v12" column="fact_utv" as="f_utv_12" />
        <column table="v12" column="agree" as="agree_12" />
        <column table="v12" column="agree_comment" as="agree_comment_12" />
      </select>
      <from>
        <query name="spr_time_year" as="a" />
        <query name="va_dr_fq_list1" as="b" join="left outer">
          <call function="true" />
        </query>
        <query name="vb_utv_periods" as="v1" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v1" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v1" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v1" column="mes" />
              <const>1</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v2" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v2" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v2" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v2" column="mes" />
              <const>2</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v3" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v3" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v3" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v3" column="mes" />
              <const>3</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v4" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v4" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v4" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v4" column="mes" />
              <const>4</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v5" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v5" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v5" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v5" column="mes" />
              <const>5</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v6" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v6" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v6" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v6" column="mes" />
              <const>6</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v7" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v7" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v7" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v7" column="mes" />
              <const>7</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v8" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v8" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v8" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v8" column="mes" />
              <const>8</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v9" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v9" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v9" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v9" column="mes" />
              <const>9</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v10" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v10" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v10" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v10" column="mes" />
              <const>10</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v11" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v11" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v11" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v11" column="mes" />
              <const>11</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods" as="v12" join="left outer" updateable="1">
          <call function="and">
            <call function="=">
              <column table="v12" column="god" />
              <column table="this" column="god" />
            </call>
            <call function="=">
              <column table="v12" column="kod_direct" />
              <column table="this" column="kod_direct" />
            </call>
            <call function="=">
              <column table="v12" column="mes" />
              <const>12</const>
            </call>
          </call>
        </query>
        <query name="vb_utv_periods_by_god" as="a" exclude="1">
          <withparams>
            <useparam name="god" />
          </withparams>
        </query>
      </from>
      <where>
        <call function="=">
          <column table="a" column="year" />
          <useparam name="god" />
        </call>
      </where>
    </query>
  </queries>
  <functions child-name="function" key-name="name" />
  <parts child-name="part" key-name="id" />
  <views child-name="view" key-name="id">
    <view name="is_plan_smet_x" class="1" file="sql.builder.templates\sql.builder\projects\mped\scheme\extension\is_plan_smet.xml">
      select kod_plan_smet,kod_direct,kod_spr_smet,god,1 as mes,sum1 val,esum1 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,2 as mes,sum2 val,esum2 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,3 as mes,sum3 val,esum3 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,4 as mes,sum4 val,esum4 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,5 as mes,sum5 val,esum5 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,6 as mes,sum6 val,esum6 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,7 as mes,sum7 val,esum7 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,8 as mes,sum8 val,esum8 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,9 as mes,sum9 val,esum9 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,10 as mes,sum10 val,esum10 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,11 as mes,sum11 val,esum11 vale from  is_plan_smet
      union all
      select kod_plan_smet,kod_direct,kod_spr_smet,god,12 as mes,sum12 val,esum12 vale from  is_plan_smet
    </view>
  </views>
  <reports child-name="report" key-name="name">
    <report name="va_dr_struct_copy" timestamp="06.02.2018 16:05:25" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_type.xml">
      <params>
        <param type="number" name="p_kod_dir_struct_type">
          <const>2</const>
        </param>
      </params>
      <queries>
        <query name="va_dr_sq_struct_copy" as="a" update-target="va_dir_struct_type">
          <withparams>
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
          <query name="va_dr_sq_struct_opt_copy" as="b" update-target="va_dir_struct_opt">
            <call function="=">
              <column table="a" column="kod" />
              <column table="b" column="kod" />
            </call>
            <withparams>
              <useparam name="p_kod_dir_struct_type" />
            </withparams>
          </query>
        </query>
      </queries>
    </report>
    <report name="52072_data_check" timestamp="18.07.2019 12:06:24" title="Отчет по проверке данных" form="52072_data_check" mode="excel" nogrid="1" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <params>
        <param name="p_ym" type="array" />
      </params>
      <print-templates>
        <excel>
          <template name="52072.xlsx" print-proc="2" print-xlsx="1" title="Отчет по проверке данных" />
        </excel>
      </print-templates>
      <queries>
        <query name="52072_dt_chk_ke30_no_smet" as="c1">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query name="52072_dt_chk_ke30_no_smet_list" as="c2">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query as="c3" name="52072_dt_chk_dr_no_smet" exclude="1" />
        <query as="c4" name="52072_dt_chk_dr_no_smet_list" exclude="1" />
        <query name="52072_dt_chk_ke30_no_mvp" as="c5">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query name="52072_dt_chk_ke30_no_mvp_list" as="c6">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query name="52072_dt_chk_dr_no_mb3" as="c7" exclude="1" />
        <query name="52072_dt_chk_dr_no_mb3_list" as="c8" exclude="1" />
        <query name="52072_dt_chk_zatr_no_podr" as="c9" exclude="1" />
        <query name="52072_dt_chk_zatr_no_podr_mb3_list" as="c10" exclude="1" />
        <query name="52072_dt_chk_dr_no_podr" as="c11" exclude="1" />
        <query name="52072_dt_chk_dr_no_podr_mb3_list" as="c12" exclude="1" />
        <query name="52072_dt_chk_mb3_vs_podr" as="c13" exclude="1" />
        <query name="52072_dt_chk_ke30_no_vd" as="c16">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query name="52072_dt_chk_ke30_no_vd_list" as="c17">
          <withparams>
            <useparam name="p_ym" />
          </withparams>
        </query>
        <query name="52072_dt_chk_smet_sap_dubl" as="c14" />
        <query name="52072_dt_chk_vid_dey_dubl" as="c15" />
      </queries>
    </report>
    <report name="vbr_calculation_svod" title="Сводный отчет по калькуляции" mode="excel" timestamp="25.08.2023 15:09:31" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_ym" type="array" />
        <param name="p_ym_str" type="string" />
      </params>
      <procedure>
    begin
        vb_refs.report_calc_svod(:p_ym_str);
    end;
</procedure>
      <print-templates>
        <excel>
          <template name="mped_calc_svod.xlsx" print-proc="2" print-xlsx="1" title="Сводный отчет по калькуляции" />
        </excel>
      </print-templates>
      <queries>
        <query name="vbr_calculation_svod_by_dep" as="a">
          <events>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="teplo_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'teplo_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="teplo_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'teplo_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="voda_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'voda_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="voda_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'voda_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="opl_trud_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'opl_trud_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="opl_trud_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'opl_trud_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="soc_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'soc_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="soc_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'soc_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="amort_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'amort_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="amort_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'amort_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="sod_obor_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'sod_obor_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="sod_obor_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'sod_obor_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="ceh_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'ceh_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="ceh_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'ceh_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="zavod_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'zavod_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="zavod_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'zavod_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="usl_ryn_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'usl_ryn_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="pokup_ee_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'pokup_ee_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="pokup_ee_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'pokup_ee_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="pokup_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'pokup_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="total_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'total_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="total_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'total_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="total">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'total'</const>
            </useaction>
          </events>
        </query>
        <query name="vbr_calculation_svod_ref" as="ref">
          <events>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="vod_tax">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'vod_tax_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="vod_tax_te">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'vod_tax_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="en_hoz_ee">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'en_hoz_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="en_hoz_te">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'en_hoz_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="tax_ee">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'tax_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="tax_te">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'tax_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="remont_ee">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'remont_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_svod_details" event-name="double-click" column="remont_te">
              <useparam name="p_ym_str" />
              <const type="string">'Справка'</const>
              <column table="a" column="name" />
              <const type="string">'remont_te'</const>
            </useaction>
          </events>
        </query>
      </queries>
    </report>
    <report name="vbr_calculation_svod_dev" title="Сводный отчет по калькуляции" mode="excel" visible="0" form="vbr_calculation_svod" timestamp="30.07.2023 18:02:33" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <params>
        <param name="p_ym" type="array" />
        <param name="p_ym_str" type="string" />
      </params>
      <procedure>
    begin
        vb_refs.report_calc_svod(:p_ym_str);
    end;
</procedure>
      <print-templates>
        <excel>
          <template name="mped_calc_svod.xlsx" print-proc="2" print-xlsx="1" title="Сводный отчет по калькуляции" />
        </excel>
      </print-templates>
      <queries>
        <query name="vbr_calculation_svod_by_dep" as="a">
          <events>
            <useaction action-type="open-report" call="vbr_calc_details_dev" event-name="double-click" column="teplo_ee">
              <useparam name="p_ym" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'teplo_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_details_dev" event-name="double-click" column="teplo_te">
              <useparam name="p_ym" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'teplo_te'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_details_proc_dev" event-name="double-click" column="voda_ee">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'voda_ee'</const>
            </useaction>
            <useaction action-type="open-report" call="vbr_calc_details_proc_dev" event-name="double-click" column="voda_te">
              <useparam name="p_ym_str" />
              <column table="a" column="excel_list" />
              <column table="a" column="name" />
              <const type="string">'voda_te'</const>
            </useaction>
          </events>
        </query>
        <query name="vbr_calculation_svod_ref" as="ref" />
      </queries>
    </report>
  </reports>
  <forms child-name="form" key-name="name">
    <form name="va_acc_item" title="Настройка показателей учета по статям сметы" timestamp="19.12.2017 17:25:08" comment="Настройка показателей учета по статям сметы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_acc_item.xml">
      <content>
        <splitcontainer>
          <fieldgroup title="Показатели">
            <grid table="a" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
              </toolbar>
              <columns>
                <column table="a" column="kod_acc_item" column-visible="0" parname="p_kod_acc_item" />
                <column table="a" column="name" column-width="382" />
                <fact column="va_acc_item_smet_num" title="Статьи" table="a" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup title="Связанные статьи">
            <grid table="b" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand action-type="custom" title="Выбор статей сметы">
                  <useaction action-type="dynamic-form" modal="1" call="va_spr_smet_select">
                    <useparam name="p_kod_acc_item" />
                  </useaction>
                  <useaction action-type="refresh-table" object="b" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="с" column="full_name" column-width="493" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="va_acc_item" as="a" column-editable="0">
          <elink name="va_acc_item_smet" as="b" column-editable="0">
            <link name="kod_spr_smet" as="с" />
          </elink>
        </query>
      </from>
    </form>
    <form name="form_va_dir_sruct_apply" title="Применение настройки орг. структуры" timestamp="06.02.2018 21:13:58" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_apply.xml">
      <content>
        <grid show-toolbar="1" table="a">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand button-type="custom-commit" action-type="custom">
              <useaction action-type="save" />
              <useaction name="va_mv.refresh1" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="a" column="name" column-editable="0" column-width="260" />
            <column table="a" column="kod_dir_struct_type" column-width="252" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="va_dir_sruct_apply" as="a" />
      </from>
    </form>
    <form name="vbf_spr_direct_sap_old" timestamp="10.04.2019 12:51:23" title="Кодировка подразделений SAP" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_apply.xml">
      <content>
        <column table="a" column="name" column-width="368" title="Текущее подразделение" as="name1" />
        <splitcontainer is-vertical="1">
          <fieldgroup size="20" title="Орг. структура">
            <grid table="a" parent-field-name="parent_id" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <usefield field="cmn_check" checked="1" name="pr_filter" title="Ограничить список" />
              </toolbar>
              <columns>
                <column table="a" column="name" column-width="299" />
                <column table="a" column="name_kr" column-width="172" />
                <column table="a" column="kod_predpr" column-width="171" />
                <column table="a" column="kod_direct" column-width="368" column-visible="0" />
                <column as="id" column="kod_direct" column-editable="0" column-visible="0" column-width="100" format="F0" table="a" title="Код" />
                <column table="a" column="parent_id" />
                <column table="a" column="ord" column-visible="0" />
                <fact table="a" column="vb_dir_to_sap_sap_code" title="Коды SAP" column-width="106" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup title="Коды SAP">
            <grid table="sap" show-toolbar="1">
              <columns>
                <column table="sap" column="sap_code" column-width="434" title="Код" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="vbx_spr_direct" as="a" order="ord" auto-refresh="1">
          <withparams>
            <useparam name="pr_filter" />
          </withparams>
          <elink name="vb_dir_to_sap" as="sap" />
        </query>
      </from>
    </form>
    <form name="vbf_spr_direct_sap" timestamp="15.08.2019 18:20:54" title="Кодировка подразделений SAP" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_apply.xml">
      <content>
        <column table="a" column="name_orig" column-width="368" title="Текущее подразделение" as="name1" />
        <column table="a" column="name" column-width="368" title="Текущее подразделение" as="name1" exclude="1" />
        <usefield field="cmn_combo_num" name="pr" show-checkbox="0" title="Активность подразделения">
          <listquery>
            <query name="pr_tek_all_vals" />
          </listquery>
          <defaultquery>
            <query name="pr_tek_start_val" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_combo_num" name="has_sap" show-checkbox="0" title="Строки с кодом SAP">
          <listquery>
            <query name="pr_has_sap_code" />
          </listquery>
          <defaultquery>
            <query name="pr_has_sap_start_val" />
          </defaultquery>
        </usefield>
        <grid table="a" show-toolbar="1" auto-filter="1" parent-field-name="kod_parent_i">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand action-type="custom" button-type="custom-commit" editable="a_has_changes">
              <useaction action-type="save" />
              <useaction action-type="call-plsql" name="vb_refs.ins_spr_direct_mvp" />
              <useaction action-type="refresh-table" object="a" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="a" column="namex" column-width="297" column-editable="0" />
            <column table="a" column="kod_direct" column-visible="0" column-editable="0" />
            <column table="a" column="kod_parent_i" column-visible="0" column-editable="0" />
            <column table="a" column="mes" format="F0" column-width="76" column-editable="0" />
            <column table="a" column="god" format="F0" column-editable="0" />
            <column table="a" column="name_kr" column-width="136" column-editable="0" title="Краткое наименование" />
            <column table="a" column="kod_predpr" column-width="134" column-editable="0" title="Код предпр. балансодерж." />
            <fact table="a" column="vb_dir_to_sap_sap_code" title="Коды SAP" column-width="106" exclude="1" />
            <column table="a" column="mvp_code" column-editable="1" title="Код SAP (МВП)" column-width="95" valid="valid_mvp" />
            <column table="a" column="mvp_name" title="Наименование кода SAP" column-width="144" column-editable="1" />
            <column table="a" column="mb3_code" title="Детализация SAP кода" column-width="138" valid="valid_mb3" editable="has_mvp_bool" />
            <column table="a" column="kod_spr_group" title="Группировка" column-editable="1" column-width="131" />
            <column table="a" column="use_in_mped" title="Использовать в новом МПЕД" column-editable="1" column-width="190" format="F0" />
            <column table="a" column="valid_mvp" parname="valid_mvp" column-visible="0" />
            <column table="a" column="valid_mb3" parname="valid_mb3" column-visible="0" />
            <column table="a" column="has_mvp_bool" parname="has_mvp_bool" column-visible="0" />
          </columns>
        </grid>
        <splitcontainer is-vertical="1" exclude="1">
          <fieldgroup size="20" title="Орг. структура">
            <usefield field="cmn_combo_num" name="pr" show-checkbox="0" title="Активность подразделения">
              <listquery>
                <query name="pr_tek_all_vals" />
              </listquery>
              <defaultquery>
                <query name="pr_tek_start_val" />
              </defaultquery>
            </usefield>
            <usefield field="cmn_combo_num" name="has_sap" show-checkbox="0" title="Строки с кодом SAP">
              <listquery>
                <query name="pr_has_sap_code" />
              </listquery>
              <defaultquery>
                <query name="pr_has_sap_start_val" />
              </defaultquery>
            </usefield>
            <grid table="a" show-toolbar="1" auto-filter="1" parent-field-name="kod_parent_i">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand action-type="custom" button-type="custom-commit" editable="a_has_changes">
                  <useaction action-type="save" />
                  <useaction action-type="call-plsql" name="vb_refs.ins_spr_direct_mvp" />
                  <useaction action-type="refresh-form" object="a" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="a" column="namex" column-width="297" column-editable="0" />
                <column table="a" column="kod_direct" column-visible="0" column-editable="0" />
                <column table="a" column="kod_parent_i" column-visible="0" column-editable="0" />
                <column table="a" column="mes" format="F0" column-width="76" column-editable="0" />
                <column table="a" column="god" format="F0" column-editable="0" />
                <column table="a" column="name_kr" column-width="136" column-editable="0" title="Краткое наименование" />
                <column table="a" column="kod_predpr" column-width="134" column-editable="0" title="Код предпр. балансодерж." />
                <fact table="a" column="vb_dir_to_sap_sap_code" title="Коды SAP" column-width="106" exclude="1" />
                <column table="a" column="mvp_code" column-editable="1" title="Код SAP (МВП)" column-width="95" valid="valid_mvp" />
                <column table="a" column="mvp_name" title="Наименование кода SAP" column-width="144" column-editable="1" />
                <column table="a" column="mb3_code" title="Детализация SAP кода" column-width="138" valid="valid_mb3" />
                <column table="a" column="kod_spr_group" title="Группировка" column-editable="1" column-width="131" />
                <column table="a" column="valid_mvp" parname="valid_mvp" column-visible="0" />
                <column table="a" column="valid_mb3" parname="valid_mb3" column-visible="0" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup title="Коды SAP" exclude="1">
            <grid table="sap" show-toolbar="1">
              <columns>
                <column table="sap" column="sap_code" column-width="434" title="Код" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="is_spr_direct" order="namex" auto-refresh="1" as="a" updateable="1">
          <where>
            <call function="and">
              <call function="or">
                <call function="false" />
                <call function="!=" optional="1">
                  <useparam name="pr" />
                  <const>1</const>
                </call>
                <call function="and" optional="1">
                  <call function="=">
                    <useparam name="pr" />
                    <const>1</const>
                  </call>
                  <call function="is null">
                    <column table="a" column="god" />
                  </call>
                </call>
              </call>
              <call function="or">
                <call function="false" />
                <call function="!=" optional="1">
                  <useparam name="has_sap" />
                  <const>2</const>
                </call>
                <call function="and" optional="1">
                  <call function="=">
                    <useparam name="has_sap" />
                    <const>2</const>
                  </call>
                  <call function="or">
                    <call function="is not null">
                      <column table="a" column="mvp_code" />
                    </call>
                    <call function="is not null">
                      <column table="a" column="mb3_code" />
                    </call>
                  </call>
                </call>
              </call>
            </call>
          </where>
        </query>
        <query name="va_direct" as="a" order="namex" auto-refresh="1" exclude="1">
          <elink name="vb_dir_to_sap" as="sap" exclude="1" />
          <where>
            <call function="or">
              <call function="false" />
              <call function="!=" optional="1">
                <useparam name="pr" />
                <const>1</const>
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <useparam name="pr" />
                  <const>1</const>
                </call>
                <call function="is null">
                  <column table="a" column="god" />
                </call>
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_dir_struct_type" timestamp="01.03.2019 01:48:06" title="Настройка орг. структуры" comment="Настройка орг. структуры" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_type.xml">
      <content>
        <column table="s" column="kod_dir_struct_type" exclude="1" />
        <splitcontainer>
          <fieldgroup title="Тип структуры" size="20" width-perc="30">
            <grid table="a" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand action-type="execute-copy-by-report" call="va_dr_struct_copy" title="Копировать настройку">
                  <useparam name="p_kod_dir_struct_type" />
                </uicommand>
                <uicommand button-type="custom-commit" action-type="custom">
                  <useaction action-type="save" />
                  <useaction name="va_mv.refresh1" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="a" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" column-visible="0" />
                <column table="a" column="name" column-width="322" />
                <column table="a" column="pr_locked" column-width="322" column-editable="0" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup title="Настройка" size="60" width-perc="80">
            <usefield field="cmn_check" name="p_show_all" title="Показать неиспользуемые" exclude="1" />
            <grid table="b" parent-field-name="kod_parent" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand button-type="grid-refresh" column-visible="0" exclude="1" />
                <uicommand button-type="custom-commit" action-type="custom">
                  <useaction action-type="save" />
                  <useaction name="va_mv.refresh1" />
                </uicommand>
                <usefield field="cmn_check" name="p_show_all" title="Показать неиспользуемые" />
              </toolbar>
              <columns>
                <column table="b" column="kod_parent" />
                <column table="b" column="name" column-width="584" />
                <column table="b" column="no_use" column-width="92" />
                <column table="b" column="no_parent" column-width="77" />
                <column table="b" column="no_self" column-width="109" />
                <column table="b" column="kod_direct" column-width="154" column-visible="0" />
                <column table="b" column="kod_dir_struct_type" column-width="154" column-visible="0" />
                <column table="b" column="kod_dir_struct_opt" />
                <column table="b" column="kod_direct_o" />
                <column table="b" column="kod_dir_struct_type_o" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="va_dir_struct_type" as="a">
          <elink name="va_dr_sq_struct_view" as="b" order="name" auto-refresh="1">
            <withparams>
              <useparam name="p_show_all" />
            </withparams>
          </elink>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name" auto-refresh="1" exclude="1">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>0</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_earn_othr" timestamp="14.12.2017 21:36:07" title="Доходы от участия в других организациях" show-toolbar="1" comment="Доходы от участия в других организациях" file="sql.builder.templates\sql.builder\projects\mped\forms\va_earn_othr.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
        <uicommand button-type="custom-refresh" action-type="refresh-table" object="a" />
      </toolbar>
      <content>
        <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" editable="a_has_changes" editable-invert="1" />
        <fieldgroup size="20" title="Фильтры">
          <usefield field="va_god" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
          <usefield field="va_plan_fact" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
          <usefield field="va_direct1" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
        </fieldgroup>
        <fieldgroup title="Данные" size="60" uncollapsible="1">
          <grid table="a" parent-field-name="kod_parent" show-agg-panel="1">
            <toolbar>
              <uicommand button-type="grid-add" visible="0" />
              <uicommand button-type="grid-delete" visible="0" />
              <uicommand button-type="grid-save" visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="kod_parent" column-visible="0" />
              <column table="a" column="god" column-width="584" column-visible="0" />
              <column table="a" column="kod_direct" column-width="584" column-visible="0" />
              <column table="a" column="is_plan" column-width="584" column-visible="0" />
              <column table="a" column="name" column-width="584" />
              <column table="a" column="val1" editable="is_form_valid" />
              <column table="a" column="val2" editable="is_form_valid" />
              <column table="a" column="val3" editable="is_form_valid" />
              <column table="a" column="val4" editable="is_form_valid" />
              <column table="a" column="val5" editable="is_form_valid" />
              <column table="a" column="val6" editable="is_form_valid" />
              <column table="a" column="val7" editable="is_form_valid" />
              <column table="a" column="val8" editable="is_form_valid" />
              <column table="a" column="val9" editable="is_form_valid" />
              <column table="a" column="val10" editable="is_form_valid" />
              <column table="a" column="val11" editable="is_form_valid" />
              <column table="a" column="val12" editable="is_form_valid" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_earn_othr_edit" as="a" auto-refresh="1" order="name">
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_is_plan" />
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>6</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_pwr_set" timestamp="16.08.2019 00:31:26" title="Установленная мощность" show-toolbar="1" comment="Установленная мощность" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_pwr_set.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
        <uicommand button-type="custom-refresh" action-type="refresh-table" object="a" />
      </toolbar>
      <content>
        <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" editable="a_has_changes" editable-invert="1" column-visible="0" />
        <fieldgroup size="20" title="Фильтры">
          <usefield field="va_god" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
          <usefield field="va_plan_fact" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" exclude="1" />
          <usefield field="va_direct1" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
        </fieldgroup>
        <fieldgroup title="Данные" size="60" uncollapsible="1">
          <grid table="a" parent-field-name="kod_parent" show-agg-panel="1">
            <toolbar>
              <uicommand button-type="grid-add" visible="0" />
              <uicommand button-type="grid-delete" visible="0" />
              <uicommand button-type="grid-save" visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="kod_parent" column-visible="0" />
              <column table="a" column="god" column-width="584" column-visible="0" />
              <column table="a" column="kod_direct" column-width="584" column-visible="0" />
              <column table="a" column="is_plan" column-width="584" column-visible="0" />
              <column table="a" column="name" column-width="584" />
              <column table="a" column="val1" />
              <column table="a" column="val2" />
              <column table="a" column="val3" />
              <column table="a" column="val4" />
              <column table="a" column="val5" />
              <column table="a" column="val6" />
              <column table="a" column="val7" />
              <column table="a" column="val8" />
              <column table="a" column="val9" />
              <column table="a" column="val10" />
              <column table="a" column="val11" />
              <column table="a" column="val12" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_pwr_set_edit" as="a" auto-refresh="1" order="name">
          <withparams>
            <useparam name="p_god" />
            <const>1</const>
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>1</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_spr_smet_select" timestamp="06.02.2018 22:41:32" with-behavior="0" show-toolbar="1" form-size="973;613" title="Выбор статей сметы" comment="Выбор статей сметы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_spr_smet_select.xml">
      <params>
        <param name="p_kod_acc_item" type="number">
          <const>1</const>
        </param>
      </params>
      <toolbar>
        <uicommand action-type="add-selected" title="Добавить выделенные" />
        <uicommand action-type="remove-selected" title="Убрать выделенные" />
      </toolbar>
      <content>
        <splitcontainer is-vertical="1">
          <fieldgroup noborder="1">
            <usepart part="va_priod_fields" />
            <fieldgroup title="Доступные">
              <grid table="a" parent-field-name="kod_parent">
                <columns>
                  <column table="a" column="dummy" type="number" controlType="UICheck" title="Выбор" column-editable="1" as="check1" />
                  <column table="a" column="full_name" column-editable="0" column-width="250" />
                  <column table="a" column="kod_parent" column-visible="0" />
                  <column table="a" column="ord" column-visible="0" />
                </columns>
              </grid>
            </fieldgroup>
          </fieldgroup>
          <fieldgroup title="Выбранные">
            <grid table="b">
              <columns>
                <column table="b" column="kod_spr_smet" as="kod" column-visible="0" />
                <column table="c" column="full_name" column-width="323" />
                <column table="b" column="pr_childs" exclude="1" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="is_spr_smet" multi-select-column="check1" multi-select-target="b" as="a" auto-refresh="1" order="ord">
          <where>
            <call function="le">
              <call function="greatest_num">
                <column table="a" column="ym_start" />
                <useparam name="p_ym1" />
              </call>
              <call function="smallest">
                <column table="a" column="ym_fin" />
                <useparam name="p_ym2" />
              </call>
            </call>
          </where>
        </query>
        <query name="va_acc_item" as="m">
          <elink name="va_acc_item_smet" column="kod" as="b">
            <link name="kod_spr_smet" as="c" />
          </elink>
          <where>
            <call function="and">
              <call function="=">
                <column table="m" column="kod_acc_item" />
                <useparam name="p_kod_acc_item" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_sp_calc" timestamp="03.10.2019 19:40:29" title="Калькуляция" file="sql.builder.templates\sql.builder\projects\mped\forms\va_sp_calc.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
            <listquery>
              <query name="mped_spr_time_ym" />
            </listquery>
            <defaultquery>
              <query name="mped_spr_time_ym_prev" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Калькуляция" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <band title="Вид деятельности">
                <column table="a" column="vid_dey_kod" title="Код" column-width="39" format="F0" color="color" />
                <column table="a" column="vid_dey_name" title="Наименование" column-width="120" color="color" />
                <column table="kod_spr_vid_energ" column="vid_energ_name" column-width="94" color="color" />
                <column table="kod_spr_od_nd" column="od_nd_name" column-width="63" color="color" />
              </band>
              <band title="Объект генерации">
                <column table="a" column="ob_gen_kod" title="Код" column-width="64" color="color" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="133" color="color" />
              </band>
              <column table="a" column="period" column-width="67" title="Период" format="F2" color="color" />
              <band title="Субъект РФ">
                <column table="a" column="subject_fed_kod" title="Код" column-width="39" format="F0" color="color" column-editable="1" />
                <column table="a" column="subject_fed_name" title="Наименование" column-width="110" color="color" column-editable="1" />
              </band>
              <band title="Заказ">
                <column table="a" column="zakaz_kod" title="Код" column-width="39" color="color" />
                <column table="a" column="zakaz_name" title="Наименование" column-width="92" color="color" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_kod" title="Код" column-width="94" color="color" column-editable="1" />
                <column table="a" column="mb3_name" title="Наименование" column-width="133" column-editable="1" color="color" />
                <column table="a" column="kod_schet_mb3" column-width="133" color="color" title="Код счета МВЗ" />
              </band>
              <band title="МВП: Партнер">
                <column table="a" column="mvp_partner_kod" title="Код" column-width="53" column-editable="1" color="color" />
                <column table="a" column="mvp_partner_name" title="Наименование" column-width="129" column-editable="1" color="color" />
              </band>
              <band title="Элемент затрат">
                <column table="a" column="el_zatr_kod" title="Код" column-width="87" format="F0" color="color" column-editable="1" />
                <column table="a" column="el_zatr_name" title="Наименование" column-width="103" color="color" />
                <column table="sap_code_agg" column="full_kod_smet" column-width="113" color="color" />
              </band>
              <band title="МВП">
                <column table="a" column="mvp_kod" title="Код" column-width="60" column-editable="1" color="color" />
                <column table="a" column="mvp_name" title="Наименование" column-width="129" column-editable="1" color="color" />
                <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" color="color" />
              </band>
              <column table="a" column="vyruchka" title="Выручка" column-width="63" color="color" />
              <column table="a" column="vol_sbyt" title="ОбъемСбыта" column-width="85" color="color" />
              <column table="a" column="zatr" title="Затраты" column-width="91" color="color" />
              <column table="a" column="tut" title="ТУТ" column-width="85" color="color" />
              <column table="a" column="rash_vod_m3" title="РасхВод М3" column-width="78" color="color" />
              <column table="a" column="rash_vod_t" title="РасхВод Т" column-width="70" color="color" />
              <column table="a" column="rez_tepl_nag" title="РезТеплНаг" column-width="78" color="color" />
              <column table="a" column="pris_tep_nag" title="ПрисТепНаг" column-width="79" color="color" />
              <column table="a" column="color" parname="color" column-visible="0" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_calc" as="a" order="period" column-editable="0" auto-refresh="1">
          <where>
            <call function="and">
              <call function="in">
                <column table="a" column="period" />
                <useparam name="p_ym" />
              </call>
              <call function="=">
                <column table="kod_spr_od_nd" column="kod_spr_od_nd" />
                <const>0</const>
              </call>
            </call>
          </where>
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" />
            </link>
          </link>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
    </form>
    <form name="va_sp_calc_doh_ras" timestamp="18.07.2019 11:18:15" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_sp_calc.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
            <listquery>
              <query name="mped_spr_time_ym" />
            </listquery>
            <defaultquery>
              <query name="mped_spr_time_ym_prev" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Калькуляция" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <band title="Вид деятельности">
                <column table="a" column="vid_dey_kod" title="Код" column-width="39" format="F0" />
                <column table="a" column="vid_dey_name" title="Наименование" column-width="120" />
                <column table="kod_spr_vid_energ" column="vid_energ_name" column-width="94" />
                <column table="a" column="od_nd_name" column-width="63" />
              </band>
              <band title="Объект генерации">
                <column table="a" column="ob_gen_kod" title="Код" column-width="64" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="133" />
              </band>
              <column table="a" column="period" column-width="67" title="Период" format="F2" />
              <band title="Элемент затрат">
                <column table="a" column="el_zatr_kod" title="Код" column-width="87" format="F0" />
                <column table="a" column="el_zatr_name" title="Наименование" column-width="129" />
                <column table="sap_code_agg" column="full_kod_smet" column-width="113" />
              </band>
              <band title="Тип данных бюджета">
                <column table="a" column="tip_bud_kod_str" title="Код" column-width="31" />
                <column table="a" column="tip_bud_name" title="Наименование" column-width="101" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_kod" title="Код" column-width="94" column-editable="1" />
                <column table="a" column="mb3_name" title="Наименование" column-width="133" column-editable="1" />
                <column table="a" column="kod_schet_mb3" column-width="133" title="Код счета МВЗ" />
              </band>
              <band title="МВП">
                <column table="a" column="mvp_kod" title="Код" column-width="61" column-editable="1" />
                <column table="a" column="mvp_name" title="Наименование" column-width="146" column-editable="1" />
                <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" />
              </band>
              <column table="a" column="zatr" title="Сумма в функц.валюте" column-width="91" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_calc" as="a" order="period" column-editable="0" auto-refresh="1">
          <where>
            <call function="and">
              <call function="in">
                <column column="period" table="a" />
                <useparam name="p_ym" />
              </call>
              <call function="!=0">
                <call function="nvl0">
                  <column table="a" column="zatr" />
                </call>
              </call>
              <call function="or" exclude="1">
                <call function="!=0">
                  <call function="nvl0">
                    <column table="a" column="vyruchka" />
                  </call>
                </call>
              </call>
            </call>
          </where>
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" exclude="1" />
            </link>
          </link>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
    </form>
    <form name="va_sp_calc_zatr" timestamp="18.07.2019 11:18:40" title="Затраты" file="sql.builder.templates\sql.builder\projects\mped\forms\va_sp_calc.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
            <listquery>
              <query name="mped_spr_time_ym" />
            </listquery>
            <defaultquery>
              <query name="mped_spr_time_ym_prev" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Калькуляция" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <band title="Объект генерации">
                <column table="a" column="ob_gen_kod" title="Код" column-width="64" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="133" />
              </band>
              <column table="a" column="period" column-width="67" title="Период" format="F2" />
              <band title="Элемент затрат">
                <column table="a" column="el_zatr_kod" title="Код" column-width="87" format="F0" />
                <column table="a" column="el_zatr_name" title="Наименование" column-width="140" />
                <column table="sap_code_agg" column="full_kod_smet" column-width="113" />
              </band>
              <band title="Тип данных бюджета">
                <column table="a" column="tip_bud_kod_str" title="Код" column-width="31" />
                <column table="a" column="tip_bud_name" title="Наименование" column-width="101" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_kod" title="Код" column-width="94" column-editable="1" />
                <column table="a" column="mb3_name" title="Наименование" column-width="155" column-editable="1" />
                <column table="a" column="kod_schet_mb3" column-width="133" title="Код счета МВЗ" />
              </band>
              <band title="МВП">
                <column table="a" column="mvp_kod" title="Код" column-width="58" column-editable="1" />
                <column table="a" column="mvp_name" title="Наименование" column-width="156" column-editable="1" />
                <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" />
              </band>
              <column table="a" column="zatr" title="Сумма в функц.валюте" column-width="91" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_calc" as="a" order="period" column-editable="0" auto-refresh="1">
          <where>
            <call function="and">
              <call function="in">
                <column column="period" table="a" />
                <useparam name="p_ym" />
              </call>
              <call function="!=0">
                <call function="nvl0">
                  <column table="a" column="zatr" />
                </call>
              </call>
            </call>
          </where>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
    </form>
    <form name="va_sp_calc_ke30" timestamp="05.09.2019 18:02:10" title="Просмотр КЕ30" file="sql.builder.templates\sql.builder\projects\mped\forms\va_sp_calc.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
            <listquery>
              <query name="mped_spr_time_ym" />
            </listquery>
            <defaultquery>
              <query name="mped_spr_time_ym_prev" />
            </defaultquery>
          </usefield>
          <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_od_nd" title="ОД - НД" type="number">
            <listquery>
              <query name="vb_spr_od_nd_plus_null" />
            </listquery>
            <defaultquery>
              <query name="vb_spr_od_nd_plus_null" />
            </defaultquery>
          </usefield>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Калькуляция" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <band title="Вид деятельности">
                <column table="a" column="vid_dey_kod" title="Код" column-width="39" format="F0" color="color" />
                <column table="a" column="vid_dey_name" title="Наименование" column-width="120" color="color" />
                <column table="kod_spr_vid_energ" column="vid_energ_name" column-width="94" color="color" />
                <column table="kod_spr_od_nd" column="od_nd_name" column-width="63" color="color" />
              </band>
              <band title="Объект генерации">
                <column table="a" column="ob_gen_kod" title="Код" column-width="64" color="color" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="133" color="color" />
              </band>
              <column table="a" column="period" column-width="67" title="Период" format="F2" color="color" />
              <band title="Субъект РФ">
                <column table="a" column="subject_fed_kod" title="Код" column-width="39" format="F0" color="color" column-editable="1" />
                <column table="a" column="subject_fed_name" title="Наименование" column-width="110" color="color" column-editable="1" />
              </band>
              <band title="Заказ">
                <column table="a" column="zakaz_kod" title="Код" column-width="39" color="color" />
                <column table="a" column="zakaz_name" title="Наименование" column-width="92" color="color" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_kod" title="Код" column-width="94" color="color" column-editable="1" />
                <column table="a" column="mb3_name" title="Наименование" column-width="133" column-editable="1" color="color" />
                <column table="a" column="kod_schet_mb3" column-width="133" color="color" title="Код счета МВЗ" />
              </band>
              <band title="МВП: Партнер">
                <column table="a" column="mvp_partner_kod" title="Код" column-width="53" column-editable="1" color="color" />
                <column table="a" column="mvp_partner_name" title="Наименование" column-width="129" column-editable="1" color="color" />
              </band>
              <band title="Элемент затрат">
                <column table="a" column="el_zatr_kod" title="Код" column-width="87" format="F0" color="color" />
                <column table="a" column="el_zatr_name" title="Наименование" column-width="103" color="color" />
                <column table="sap_code_agg" column="full_kod_smet" column-width="113" color="color" />
              </band>
              <band title="МВП">
                <column table="a" column="mvp_kod" title="Код" column-width="60" column-editable="1" color="color" />
                <column table="a" column="mvp_name" title="Наименование" column-width="129" column-editable="1" color="color" />
                <column table="kod_direct" column="name" title="Подразделение МПЭД" column-width="131" color="color" />
              </band>
              <column table="a" column="vyruchka" title="Выручка" column-width="63" color="color" />
              <column table="a" column="vol_sbyt" title="ОбъемСбыта" column-width="85" color="color" />
              <column table="a" column="zatr" title="Затраты" column-width="91" color="color" />
              <column table="a" column="tut" title="ТУТ" column-width="85" color="color" />
              <column table="a" column="rash_vod_m3" title="РасхВод М3" column-width="78" color="color" />
              <column table="a" column="rash_vod_t" title="РасхВод Т" column-width="70" color="color" />
              <column table="a" column="rez_tepl_nag" title="РезТеплНаг" column-width="78" color="color" />
              <column table="a" column="pris_tep_nag" title="ПрисТепНаг" column-width="79" color="color" />
              <column table="a" column="color" parname="color" column-visible="0" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_calc" as="a" order="period" column-editable="0" auto-refresh="1">
          <where>
            <call function="and">
              <call function="in">
                <column table="a" column="period" />
                <useparam name="p_ym" />
              </call>
              <call function="in">
                <call function="nvl">
                  <column table="kod_spr_od_nd" column="kod_spr_od_nd" />
                  <const>-1</const>
                </call>
                <useparam name="p_od_nd" />
              </call>
            </call>
          </where>
          <link name="vd">
            <link name="kod_spr_vid_energ">
              <link name="kod_spr_od_nd" />
            </link>
          </link>
          <link name="kod_direct" />
          <link name="sap_code_agg" />
        </query>
      </from>
    </form>
    <form name="va_src001" timestamp="07.02.2018 15:39:15" title="Валовая выручка (план/факт)" show-toolbar="1" comment="Валовая выручка (план/факт)" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src001.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
      </toolbar>
      <content>
        <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" column-visible="0" />
        <fieldgroup size="20" title="Фильтры">
          <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
          <fieldgroup title="Месяц">
            <usefield field="va_mes1" name="p_mes1" title="С" show-checkbox="0" column-mandatory="1" />
            <usefield field="va_mes12" name="p_mes2" title="По" show-checkbox="0" column-mandatory="1" />
          </fieldgroup>
          <usefield field="va_direct1" show-checkbox="0" column-mandatory="1" />
        </fieldgroup>
        <fieldgroup title="Данные" size="60" uncollapsible="1">
          <grid table="a" parent-field-name="parent_id" show-agg-panel="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
              <uicommand button-type="grid-save" column-visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="parent_id" />
              <column table="a" column="namex" column-width="260" />
              <band title="План" column-width="100">
                <column table="a" column="va_dohod_vale_p" column-width="111" title="ЭЭ" />
                <column table="a" column="va_dohod_valt_p" column-width="110" title="ТЭ" />
              </band>
              <band title="Факт">
                <column table="a" column="va_dohod_vale_f" column-width="133" title="ЭЭ" />
                <column table="a" column="va_dohod_valt_f" column-width="128" title="ТЭ" />
              </band>
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_qry_src001" as="a" auto-refresh="1">
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>3</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_src002" timestamp="03.03.2019 21:47:28" title="Доходы и расходы (план)" show-toolbar="1" comment="Смета (план)" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src002.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
      </toolbar>
      <content>
        <splitcontainer is-vertical="1">
          <fieldgroup title="Статья" width-perc="25">
            <grid table="b" parent-field-name="kod_parent">
              <columns>
                <column table="b" column="kod_spr_smet" column-visible="0" parname="p_kod_spr_smet" />
                <column table="b" column="full_name" column-width="290" />
                <column table="b" column="kod_parent" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup width-perc="75" noborder="1">
            <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" column-visible="0" />
            <fieldgroup size="20" title="Фильтры">
              <usepart part="va_priod_fields" />
              <usefield field="va_direct1" show-checkbox="0" />
              <usefield field="va_spr_smet" exclude="1" />
            </fieldgroup>
            <fieldgroup title="Данные" uncollapsible="1">
              <grid table="a" parent-field-name="parent_id" show-agg-panel="1">
                <toolbar>
                  <uicommand button-type="grid-add" column-visible="0" />
                  <uicommand button-type="grid-delete" column-visible="0" />
                  <uicommand button-type="grid-save" column-visible="0" />
                </toolbar>
                <columns>
                  <column table="a" column="parent_id" />
                  <column table="a" column="namex" column-width="357" />
                  <column table="a" column="vale" title="ЭЭ" />
                  <column table="a" column="valt" title="ТЭ" />
                  <column table="a" column="val" title="Всего" />
                </columns>
              </grid>
            </fieldgroup>
          </fieldgroup>
        </splitcontainer>
        <fieldgroup size="60" noborder="1" uncollapsible="1" />
      </content>
      <from>
        <query name="is_spr_smet" as="b" auto-refresh="1" order="full_name">
          <where>
            <call function="le">
              <call function="greatest_num">
                <column table="b" column="ym_start" />
                <useparam name="p_ym1" />
              </call>
              <call function="smallest">
                <column table="b" column="ym_fin" />
                <useparam name="p_ym2" />
              </call>
            </call>
          </where>
        </query>
        <query name="va_qry_src002" as="a" auto-refresh="1">
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_spr_smet" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>5</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_src003" timestamp="07.02.2018 15:37:48" title="Доходы и расходы (факт)" comment="Смета (факт)" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
      </toolbar>
      <content>
        <splitcontainer is-vertical="1">
          <fieldgroup title="Статья" width-perc="25" uncollapsible="1">
            <grid table="b" parent-field-name="kod_parent">
              <columns>
                <column table="b" column="kod_spr_smet" column-visible="0" parname="p_kod_spr_smet" />
                <column table="b" column="kod_dir_sruct_apply" column-visible="0" parname="p_kod_dir_sruct_apply" />
                <column table="b" column="full_name" column-width="290" />
                <column table="b" column="kod_parent" />
                <column table="b" column="ord" column-visible="0" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup noborder="1" width-perc="75">
            <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" exclude="1" />
            <fieldgroup size="20" title="Условия">
              <usepart part="va_priod_fields" />
              <usefield field="va_direct1" show-checkbox="0" />
              <usefield field="va_spr_smet" exclude="1" />
              <fieldgroup noborder="1" is-layout-block="1">
                <usefield field="cmn_check" name="p_child_smet_not" visible="0">
                  <defaultquery>
                    <query name="va_invert_p_child_smet" />
                  </defaultquery>
                </usefield>
              </fieldgroup>
            </fieldgroup>
            <fieldgroup title="Данные" uncollapsible="1">
              <grid table="a" parent-field-name="parent_id" show-agg-panel="1" show-toolbar="1">
                <toolbar>
                  <uicommand button-type="grid-add" column-visible="0" />
                  <uicommand button-type="grid-delete" column-visible="0" />
                  <uicommand button-type="grid-save" column-visible="0" />
                  <usefield field="cmn_check" name="p_child_smet" title="Сумма c учетом включенных статей" />
                </toolbar>
                <columns>
                  <column table="a" column="parent_id" column-width="274" />
                  <column table="a" column="namex" column-width="357" />
                  <band title="Настройка структуры">
                    <column table="a" column="no_self" column-width="106" />
                    <column table="a" column="no_parent" column-width="91" />
                  </band>
                  <band title="Сумма без учета подчиненных">
                    <column table="a" column="vale" title="ЭЭ" />
                    <column table="a" column="valt" title="ТЭ" />
                    <column table="a" column="val" title="Всего" />
                  </band>
                  <band title="Сумма с учетом подчиненных">
                    <column table="a" column="vale_x" title="ЭЭ" />
                    <column table="a" column="valt_x" title="ТЭ" />
                    <column table="a" column="val_x" title="Всего" />
                  </band>
                  <column table="a" column="kod_direct" column-visible="0" />
                </columns>
              </grid>
            </fieldgroup>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="is_spr_smet" as="b" auto-refresh="1" order="ord">
          <where>
            <call function="le">
              <call function="greatest_num">
                <column table="b" column="ym_start" />
                <useparam name="p_ym1" />
              </call>
              <call function="smallest">
                <column table="b" column="ym_fin" />
                <useparam name="p_ym2" />
              </call>
            </call>
          </where>
        </query>
        <query name="va_qry_src003" as="a" auto-refresh="1">
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_mes1" />
            <useparam name="p_mes2" />
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_spr_smet" />
            <useparam name="p_child_smet" />
            <useparam name="p_child_smet_not" />
            <useparam name="p_kod_dir_sruct_apply" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name" exclude="1">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>5</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="po_algoritm" timestamp="18.06.2019 14:28:07" title="Настройка статей сметы" comment="Просмотр настройки статей сметы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <content>
        <splitcontainer is-vertical="1">
          <fieldgroup title="Статья">
            <usefield field="cmn_combo_num" name="pr">
              <listquery>
                <query name="pr_tek_all_vals" />
              </listquery>
              <defaultquery>
                <query name="pr_tek_start_val" />
              </defaultquery>
            </usefield>
            <grid table="b" parent-field-name="kod_parent" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand action-type="custom" button-type="custom-commit" editable="b_has_changes">
                  <useaction action-type="save" />
                  <useaction action-type="refresh-column" object="b" column="vb_spr_smet_to_sap_sap_code" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="b" column="kod_spr_smet" column-visible="0" parname="p_kod_spr_smet" />
                <column table="b" column="full_name" column-width="358" />
                <column table="b" column="kod_parent" />
                <column table="b" column="kod_spr_smet" as="id" format="F0" column-visible="0" exclude="1" />
                <fact table="b" column="vb_spr_smet_to_sap_sap_code" title="Код SAP" column-width="271" exclude="1" />
                <column table="b" column="vb_spr_smet_to_sap_sap_code" title="Код SAP" column-width="210" />
                <column table="b" column="included" editable="is_last_desc" />
                <column table="b" column="is_last_desc_all" parname="is_last_desc_all" column-visible="0" exclude="1" />
                <column table="b" column="is_last_desc_cur" parname="is_last_desc_cur" column-visible="0" exclude="1" />
                <column table="b" column="is_last_desc" parname="is_last_desc" column-visible="0" />
                <column table="b" column="m_s" column-width="52" format="F0" />
                <column table="b" column="y_s" column-width="44" format="F0" />
                <column table="b" column="m_po" column-width="59" format="F0" />
                <column table="b" column="y_po" column-width="52" format="F0" />
                <column table="b" column="ord" column-visible="0" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup title="Коды SAP">
            <grid table="sap" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand action-type="custom" button-type="custom-commit" editable="sap_has_changes">
                  <useaction action-type="save" />
                  <useaction action-type="call-plsql" name="vb_refs.ins_smet_to_sap">
                    <useparam name="p_kod_spr_smet" />
                  </useaction>
                  <useaction action-type="refresh-column" object="b" column="vb_spr_smet_to_sap_sap_code" />
                  <useaction action-type="refresh-table" object="sap" column="vb_spr_smet_to_sap_sap_code" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="sap" column="kod_spr_smet_to_sap" parname="kod_spr_smet_to_sap" column-visible="0" />
                <column table="sap" column="sap_code" column-width="288" title="Код статьи" parname="sap_code" />
                <column table="kod_spr_smet_to_sap" column="sap_code" column-width="292" parname="sap_code_old" as="sap_code_old" column-visible="0" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup noborder="1" exclude="1">
            <tabcontainer>
              <fieldgroup uncollapsible="1" title="Включенные статьи">
                <grid table="a">
                  <toolbar>
                    <uicommand button-type="grid-add" column-visible="0" />
                  </toolbar>
                  <columns>
                    <column table="c" column="full_name" column-width="434" />
                    <column table="a" column="god" column-editable="0" title="Год" format="F0" />
                  </columns>
                </grid>
              </fieldgroup>
              <fieldgroup title="Коды SAP">
                <grid table="sap" show-toolbar="1">
                  <columns>
                    <column table="sap" column="sap_code" column-width="288" title="Код статьи" />
                    <column table="sap" column="mb3_code" column-width="292" title="Код МВЗ" />
                  </columns>
                </grid>
              </fieldgroup>
            </tabcontainer>
          </fieldgroup>
        </splitcontainer>
      </content>
      <from>
        <query name="is_spr_smet" as="b" auto-refresh="1" order="ord">
          <withparams>
            <useparam name="pr" />
          </withparams>
          <elink name="po_algoritm" as="a" order="full_name, god" auto-refresh="1" exclude="1">
            <link name="kod_row_sm" as="c" />
          </elink>
          <elink name="vb_spr_smet_to_sap" as="sap" order="sap_code">
            <link name="kod_spr_smet_to_sap" />
            <events>
              <useaction event-name="instead-object-delete" name="vb_refs.del_smet_to_sap">
                <useparam name="kod_spr_smet_to_sap" />
                <useparam name="sap_code" />
              </useaction>
              <useaction action-type="call-plsql" name="vb_refs.upd_smet_to_sap" event-name="instead-object-save">
                <useparam name="kod_spr_smet_to_sap" />
                <useparam name="sap_code" />
                <useparam name="sap_code_old" />
              </useaction>
            </events>
          </elink>
          <where>
            <call function="or">
              <call function="false" />
              <call function="!=" optional="1">
                <useparam name="pr" />
                <const>1</const>
              </call>
              <call function="and" optional="1">
                <call function="=">
                  <useparam name="pr" />
                  <const>1</const>
                </call>
                <call function="between">
                  <call function="date to ym2">
                    <call function="sysdate" />
                  </call>
                  <column table="b" column="ym_start" />
                  <column table="b" column="ym_fin" />
                </call>
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="po_algoritm_old" timestamp="29.03.2019 11:36:46" title="Настройка статей сметы" comment="Просмотр настройки статей сметы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <content>
        <splitcontainer is-vertical="1">
          <fieldgroup title="Статья">
            <grid table="b" parent-field-name="kod_parent" show-toolbar="1">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
              </toolbar>
              <columns>
                <column table="b" column="kod_spr_smet" column-visible="0" parname="p_kod_spr_smet" />
                <column table="b" column="full_name" column-width="311" />
                <column table="b" column="kod_parent" />
                <column table="b" column="kod_spr_smet" as="id" title="Код" format="F0" column-visible="0" />
                <fact table="b" column="vb_spr_smet_to_sap_sap_mb3" title="Код SAP МВЗ" column-width="335" />
              </columns>
            </grid>
          </fieldgroup>
          <fieldgroup noborder="1">
            <fieldgroup size="20" title="Фильтры" noborder="1">
              <fieldgroup noborder="1" part-id="va_priod_fields">
                <fieldgroup noborder="1" is-layout-block="1">
                  <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
                </fieldgroup>
                <fieldgroup title="Месяц" is-layout-block="1">
                  <usefield field="va_mes1" show-checkbox="0" column-mandatory="1" />
                  <usefield field="va_mes12" show-checkbox="0" column-mandatory="1" />
                </fieldgroup>
                <usefield field="va_ym1s" column-visible="0" />
                <usefield field="va_ym2s" column-visible="0" />
              </fieldgroup>
            </fieldgroup>
            <tabcontainer>
              <fieldgroup uncollapsible="1" title="Включенные статьи">
                <grid table="a">
                  <toolbar>
                    <uicommand button-type="grid-add" column-visible="0" />
                  </toolbar>
                  <columns>
                    <column table="c" column="full_name" column-width="434" />
                  </columns>
                </grid>
              </fieldgroup>
              <fieldgroup title="Коды SAP">
                <grid table="sap" show-toolbar="1">
                  <columns>
                    <column table="sap" column="sap_code" column-width="288" title="Код статьи" />
                    <column table="sap" column="mb3_code" column-width="292" title="Код МВЗ" />
                  </columns>
                </grid>
              </fieldgroup>
            </tabcontainer>
          </fieldgroup>
        </splitcontainer>
        <fieldgroup size="60" noborder="1" uncollapsible="1" />
      </content>
      <from>
        <query name="is_spr_smet" as="b" auto-refresh="1" order="full_name">
          <elink name="po_algoritm" as="a" order="full_name" auto-refresh="1">
            <where>
              <call function="=">
                <column table="a" column="god" />
                <useparam name="p_god" />
              </call>
            </where>
            <link name="kod_row_sm" as="c" />
          </elink>
          <elink name="vb_spr_smet_to_sap" as="sap" />
          <where>
            <call function="le">
              <call function="greatest_num">
                <column table="b" column="ym_start" />
                <useparam name="p_ym1" />
              </call>
              <call function="smallest">
                <column table="b" column="ym_fin" />
                <useparam name="p_ym2" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_src004" timestamp="07.02.2018 15:39:48" title="Численность персонала" show-toolbar="1" comment="Численность персонала" use-repository="1" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src004.xml">
      <toolbar>
        <uicommand button-type="form-refresh" column-visible="0" />
        <uicommand button-type="custom-refresh" action-type="refresh-table" object="a" />
      </toolbar>
      <content>
        <column table="s" column="kod_dir_struct_type" parname="p_kod_dir_struct_type" column-visible="0" />
        <fieldgroup size="20" title="Фильтры">
          <usefield field="va_god" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
          <usefield field="va_mes_cur" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
          <usefield field="va_direct1" show-checkbox="0" column-mandatory="1" editable="a_has_changes" editable-invert="1" />
        </fieldgroup>
        <fieldgroup title="Данные" size="60" uncollapsible="1">
          <grid table="a" parent-field-name="parent_id" show-agg-panel="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="parent_id" />
              <column table="a" column="namex" column-width="565" />
              <column table="a" column="val_f" />
              <column table="a" column="val_p" />
              <column table="a" column="mes" column-visible="0" />
              <column table="a" column="god" column-visible="0" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_qry_src004" as="a" auto-refresh="1">
          <withparams>
            <useparam name="p_god" />
            <useparam name="p_mes" />
            <useparam name="p_kod_direct1" />
            <useparam name="p_kod_dir_struct_type" />
          </withparams>
        </query>
        <query name="va_dir_sruct_apply" as="s" order="name">
          <where>
            <call function="=">
              <column table="s" column="kod_dir_sruct_apply" />
              <const>2</const>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_trade" timestamp="03.12.2018 19:53:10" title="Данные энерготрейдинг" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="cmn_date" name="dat0" title="С" />
          <usefield field="cmn_date" name="dat1" title="По" />
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" dx-export="0" title="Данные энерготрейдинг">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-save" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="date_value" column-width="65" />
              <column table="a" column="market_name" column-width="128" />
              <column table="a" column="filialname" column-width="110" />
              <column table="a" column="stationname" column-width="169" />
              <column table="a" column="kod_gtp" column-width="61" />
              <column table="a" column="name_direct" column-width="198" />
              <column table="a" column="direct_name" column-width="86" />
              <column table="a" column="good_name" column-width="92" />
              <column table="a" column="size_p" column-width="112" />
              <column table="a" column="price" column-width="131" />
              <column table="a" column="sum_st" column-width="98" />
              <column table="a" column="pr_pf_name" column-width="74" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_trade" as="a" auto-refresh="1" column-editable="0" order="date_value desc">
          <where>
            <call function="and">
              <call function="true" />
              <call function="ge" optional="1">
                <column table="a" column="date_value" />
                <useparam name="dat0" />
              </call>
              <call function="le" optional="1">
                <column table="a" column="date_value" />
                <useparam name="dat1" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_sp_zatr" timestamp="16.04.2019 13:18:55" title="Затраты" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="va_god" column-mandatory="1" show-checkbox="0" />
          <fieldgroup title="Месяц">
            <usefield field="va_mes1" column-mandatory="1" show-checkbox="0" />
            <usefield field="va_mes12" column-mandatory="1" show-checkbox="0" />
          </fieldgroup>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Затраты" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-save" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="god" title="Год" column-width="51" />
              <band title="Объект генерации">
                <column table="a" column="ob_gen_id" title="Код" column-width="64" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="92" />
              </band>
              <band title="Статья доходов и расходов">
                <column table="a" column="st_id" title="Код" column-width="79" />
                <column table="a" column="st_name" title="Наименование" column-width="254" />
              </band>
              <band title="Тип данных бюджета">
                <column table="a" column="tip_bud_id" title="Код" column-width="39" />
                <column table="a" column="tip_bud_name" title="Наименование" column-width="121" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_id" title="Код" column-width="70" />
                <column table="a" column="mb3_name" title="Наименование" column-width="143" />
              </band>
              <band title="Внутренний заказ">
                <column table="a" column="vn_zak_id" title="Код" column-width="65" />
                <column table="a" column="vn_zak_name" title="Наименование" column-width="118" />
              </band>
              <column table="a" column="mes" title="Календарный месяц" column-width="121" />
              <column table="a" column="summa" title="Сумма в функц.валюте" column-width="137" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_zatr" as="a" auto-refresh="1" column-editable="0" order="god,mes">
          <where>
            <call function="and">
              <call function="=">
                <column table="a" column="god" />
                <useparam name="p_god" />
              </call>
              <call function="ge">
                <column table="a" column="mes" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="a" column="mes" />
                <useparam name="p_mes2" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_sp_doh_ras" timestamp="07.07.2019 00:05:25" title="Доходы и расходы" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade.xml">
      <content>
        <fieldgroup title="Фильтры">
          <usefield field="va_god" column-mandatory="1" show-checkbox="0" />
          <fieldgroup title="Месяц">
            <usefield field="va_mes1" column-mandatory="1" show-checkbox="0" />
            <usefield field="va_mes12" column-mandatory="1" show-checkbox="0" />
          </fieldgroup>
        </fieldgroup>
        <fieldgroup title="Данные">
          <grid show-toolbar="1" table="a" title="Доходы и расходы" show-footer="1">
            <toolbar>
              <uicommand button-type="grid-add" column-visible="0" />
              <uicommand button-type="grid-save" column-visible="0" />
              <uicommand button-type="grid-delete" column-visible="0" />
            </toolbar>
            <columns>
              <column table="a" column="god" title="Год" column-width="51" />
              <band title="Объект генерации">
                <column table="a" column="ob_gen_id" title="Код" column-width="64" />
                <column table="a" column="ob_gen_name" title="Наименование" column-width="92" />
              </band>
              <band title="Статья доходов и расходов">
                <column table="a" column="st_id" title="Код" column-width="77" />
                <column table="a" column="st_name" title="Наименование" column-width="202" />
                <column table="a" column="full_kod_smet" column-width="202" />
              </band>
              <band title="Тип данных бюджета">
                <column table="a" column="tip_bud_id" title="Код" column-width="31" />
                <column table="a" column="tip_bud_name" title="Наименование" column-width="101" />
              </band>
              <band title="Группировка статей затрат">
                <column table="a" column="gr_st_id" title="Код" column-width="65" />
                <column table="a" column="gr_st_name" title="Наименование" column-width="118" />
              </band>
              <band title="Вид деятельности">
                <column table="a" column="vid_dey_id" title="Код" column-width="65" />
                <column table="a" column="vid_dey_name" title="Наименование" column-width="118" />
              </band>
              <band title="МВЗ">
                <column table="a" column="mb3_id" title="Код" column-width="69" />
                <column table="a" column="mb3_name" title="Наименование" column-width="129" />
                <column table="a" column="name" />
              </band>
              <column table="a" column="mes" title="Календарный месяц" column-width="112" />
              <column table="a" column="summa" title="Сумма в функц.валюте" column-width="137" />
            </columns>
          </grid>
        </fieldgroup>
      </content>
      <from>
        <query name="va_sp_doh_ras_frm" as="a" auto-refresh="1" column-editable="0" order="god,mes">
          <where>
            <call function="and">
              <call function="=">
                <column table="a" column="god" />
                <useparam name="p_god" />
              </call>
              <call function="ge">
                <column table="a" column="mes" />
                <useparam name="p_mes1" />
              </call>
              <call function="le">
                <column table="a" column="mes" />
                <useparam name="p_mes2" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="va_trade_load_log" timestamp="03.12.2018 19:53:14" title="Лог загрузки (энерготрейдинг)" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade_load_log.xml">
      <content>
        <grid table="a" show-toolbar="1">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
          </toolbar>
          <columns>
            <column table="a" column="realtime" column-width="167" />
            <column table="a" column="load_time" column-width="140" />
            <column table="a" column="date_value" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="va_trade_load_log" as="a" auto-refresh="1" column-editable="0" order="load_time desc" />
      </from>
    </form>
    <form name="va_sp_zatr_load_log" timestamp="21.11.2018 23:52:36" title="Загрузка (затраты, доходы и расходы)" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade_load_log.xml">
      <content>
        <grid show-toolbar="1" table="a">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand action-type="custom" title="Загрузить из файла">
              <useaction action-type="call-client-method" assembly="sql.builder" type-name="sql.builder.MP.Test.Test" function="Test4" />
              <useaction action-type="refresh-table" object="a" />
            </uicommand>
          </toolbar>
          <columns>
            <column column="d_m" column-width="120" table="a" />
            <column column="god" column-width="52" table="a" />
            <column column="filename" column-width="184" table="a" />
            <column column="filetime" column-width="129" table="a" />
            <column column="u_m" column-width="89" table="a" />
            <column column="t_m" column-width="227" table="a" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="va_sp_zatr_load_log" as="a" auto-refresh="1" column-editable="0" order="d_m desc" />
      </from>
    </form>
    <form name="va_data_load_log" timestamp="16.08.2019 18:11:07" title="Загрузка KE30" file="sql.builder.templates\sql.builder\projects\mped\forms\va_trade_load_log.xml">
      <content>
        <column table="a" column="warn" exclude="1" />
        <usefield field="va_direct1_has_mvp" show-checkbox="0" name="p_kod_direct" type="number" column-mandatory="1" text-location="1" />
        <usefield field="cmn_string" show-checkbox="0" name="p_warn" title="Warning" type="string" column-visible="0">
          <defaultquery>
            <query name="va_direct_mvp_warn" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_mvp_kod" type="string" column-editable="0" valid="p_warn" title="Код МВП">
          <defaultquery>
            <query name="va_direct_mvp" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
          <listquery>
            <query name="mped_spr_time_ym" />
          </listquery>
          <defaultquery>
            <query name="mped_spr_time_ym_prev" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_dir_kod" title="Код подр." type="string" column-visible="0">
          <defaultquery>
            <query name="va_dr_fq_list1_kod_stragg" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_dir_name" title="Наим. подр." type="string" column-visible="0">
          <defaultquery>
            <query name="va_dr_fq_list1_name_stragg" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_string" show-checkbox="0" name="p_ym_row" title="Периоды строкой" type="string" column-visible="0">
          <defaultquery>
            <query name="mped_ym_stragg" />
          </defaultquery>
        </usefield>
        <grid show-toolbar="1" table="a">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand action-type="custom" title="Загрузить из файла" editable="is_form_valid">
              <useaction action-type="call-plsql" name="rr_temp_ins_load_ke30_params">
                <useparam name="p_dir_kod" />
                <useparam name="p_dir_name" />
                <useparam name="p_ym_row" />
              </useaction>
              <useaction action-type="call-client-method" assembly="sql.builder" type-name="sql.builder.MP.Test.Test" function="LoadKE30SapTempl" />
              <useaction action-type="refresh-table" object="a" />
            </uicommand>
          </toolbar>
          <columns>
            <column column="d_m" column-width="120" table="a" />
            <column column="god" column-width="52" table="a" column-visible="0" />
            <column table="a" column="direct_name" column-width="128" />
            <column table="a" column="direct_kod" column-width="206" column-visible="0" />
            <column table="a" column="period" column-width="181" />
            <column column="filename" column-width="184" table="a" />
            <column column="filetime" column-width="129" table="a" />
            <column column="u_m" column-width="89" table="a" />
            <column column="t_m" column-width="227" table="a" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="va_sp_zatr_load_log" as="a" auto-refresh="1" column-editable="0" order="d_m desc" />
      </from>
    </form>
    <form name="vbr_sap_decode_check_frm" title="Данные SAP в разрезе статей (Доходы и расходы)" timestamp="23.07.2019 16:19:21" file="sql.builder.templates\sql.builder\projects\mped\forms\vbr_sap_decode_check.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title="Отчет">
            <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
            <usefield field="cmn_combo_num" type="number" title="Период" name="p_period" show-checkbox="0">
              <listquery>
                <query name="vb_spr_time_utv_ym_by_dir" />
              </listquery>
            </usefield>
            <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
              <listquery exclude="1">
                <query name="is_spr_dr_tree_start_kod_dr" />
              </listquery>
              <defaultquery>
                <query name="is_spr_dr_tree_start_kod_dr" />
              </defaultquery>
            </usefield>
            <usefield field="cmn_integer" name="p_fact_utv" type="number" show-checkbox="0" title="Утверждено" column-visible="0">
              <defaultquery>
                <query name="vb_spr_time_utv_ym_by_dir_bool" />
              </defaultquery>
            </usefield>
            <grid table="a" show-toolbar="1" parent-field-name="kod_parent">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
                <uicommand action-type="custom" title="Загрузить в старый МПЭП" editable="p_fact_utv" prompt="Продолжить загрузку данных в старый МПЭП по выбранным параметрам?" message="!!! Процедура загрузки в процессе разработки !!!" />
              </toolbar>
              <columns>
                <column table="a" column="kod_spr_smet" />
                <column table="a" column="full_name" column-width="403" />
                <column table="a" column="kod_parent" column-visible="0" />
                <column table="a" column="ord" column-visible="0" />
                <column table="a" column="dr_ee" column-width="111" />
                <column table="a" column="dr_te" column-width="111" />
                <column table="a" column="dr_od" column-width="111" />
                <column table="a" column="dr_nd" column-width="90" />
                <column table="a" column="vb_spr_smet_to_sap_sap_code" column-width="596" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
        <usefield field="cmn_combo_num" type="number" title="Период" name="p_period" show-checkbox="0">
          <listquery>
            <query name="vb_spr_time_utv_ym_by_dir" />
          </listquery>
        </usefield>
        <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
          <listquery exclude="1">
            <query name="is_spr_dr_tree_start_kod_dr" />
          </listquery>
          <defaultquery>
            <query name="is_spr_dr_tree_start_kod_dr" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" name="p_fact_utv" type="number" show-checkbox="0" title="Утверждено" column-visible="0">
          <defaultquery>
            <query name="vb_spr_time_utv_ym_by_dir_bool" />
          </defaultquery>
        </usefield>
        <grid table="a" show-toolbar="1" parent-field-name="kod_parent">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand action-type="custom" title="Загрузить в старый МПЭП (недоступно до 2019.01 и для закрытых периодов)" editable="p_fact_utv" prompt="Продолжить загрузку данных в старый МПЭП по выбранным параметрам?" button-type="custom-add-form">
              <useaction name="vb_refs.load_data_to_mpep" action-type="call-plsql">
                <useparam name="p_kod_direct" />
                <useparam name="p_period" />
              </useaction>
            </uicommand>
          </toolbar>
          <columns>
            <column table="a" column="kod_spr_smet" />
            <column table="a" column="full_name" column-width="403" />
            <column table="a" column="kod_parent" column-visible="0" />
            <column table="a" column="ord" column-visible="0" />
            <column table="a" column="dr_ee" column-width="111" />
            <column table="a" column="dr_te" column-width="111" />
            <column table="a" column="dr_od" column-width="111" />
            <column table="a" column="dr_nd" column-width="90" />
            <column table="a" column="vb_spr_smet_to_sap_sap_code" column-width="596" />
          </columns>
        </grid>
        <column table="a" column="sum_seb" column-editable="0" />
      </content>
      <from>
        <query name="vbr_sap_decode_check_rep" as="a" order="ord">
          <withparams>
            <useparam name="p_dir_arr" />
            <call function="trunc">
              <useparam name="p_period" />
            </call>
            <call function="mes">
              <useparam name="p_period" />
            </call>
            <call function="mes">
              <useparam name="p_period" />
            </call>
            <call function="*">
              <useparam name="p_period" />
              <const>100</const>
            </call>
          </withparams>
          <link name="f" exclude="1" />
        </query>
      </from>
    </form>
    <form name="vb_spr_fed_subject" timestamp="05.07.2019 14:05:12" title="Субъекты Федерации" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_fed_subject.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="s" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <columns>
                <column table="s" column="kod_spr_subj" column-visible="0" />
                <column table="s" column="kod_subj" column-width="90" format="N0" halign="center" title="Код субъекта" />
                <column table="s" column="subject_name" title="Субъект Федерации" column-width="188" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="s" auto-filter="1" show-toolbar="1">
          <columns>
            <column table="s" column="kod_spr_subj" column-visible="0" exclude="1" />
            <column table="s" column="kod_subj" column-width="90" format="N0" halign="center" title="Код субъекта" />
            <column table="s" column="subject_name" title="Субъект Федерации" column-width="188" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_fed_subject" as="s" auto-refresh="1" order="kod_spr_subj" />
      </from>
    </form>
    <form name="vb_spr_grouping" timestamp="05.07.2019 14:03:15" title="Группировка" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_grouping.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="gr" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <columns>
                <column table="gr" column="kod_spr_group" column-visible="0" />
                <column table="gr" column="gr_name" title="Наименование группы" column-width="158" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="gr" auto-filter="1" show-toolbar="1">
          <columns>
            <column table="gr" column="kod_spr_group" column-visible="0" exclude="1" />
            <column table="gr" column="gr_name" title="Наименование группы" column-width="158" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_grouping" as="gr" auto-refresh="1" order="kod_spr_group" />
      </from>
    </form>
    <form name="vb_spr_rasp_zatr" timestamp="18.08.2019 15:12:06" title="Распределяемые затраты" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_rasp_zatr.xml">
      <content>
        <grid table="rz" auto-filter="1" show-toolbar="1">
          <toolbar>
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand action-type="custom" button-type="custom-commit" editable="rz_has_changes">
              <useaction action-type="save" />
              <useaction action-type="call-plsql" name="vb_refs.ins_spr_rasp_zatr" />
              <useaction action-type="refresh-form" object="rz" column="kod_spr_smet_zatr" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="rz" column="kod_spr_rasp_zatr" exclude="1" />
            <column table="rz" column="kod_direct" title="Подразделение" column-width="191" valid="valid_dir" column-mandatory="1" />
            <column table="rz" column="rasp_doh_ras" title="Распределять для Доходов и расходов" column-width="81" />
            <column table="rz" column="rasp_calc" title="Распределять для Калькуляции с/с" column-width="97" />
            <column table="rz" column="period_s" title="Дата начала действия" column-mandatory="1" />
            <column table="rz" column="period_po" title="Дата окончания действия" />
            <column table="rz" column="valid_dir" column-visible="0" parname="valid_dir" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_rasp_zatr" as="rz" auto-refresh="1" updateable="1" />
      </from>
    </form>
    <form name="vb_spr_schet_calc" timestamp="18.08.2019 14:56:28" title="Счет для калькуляции" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_schet_calc.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="s" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <columns>
                <column table="s" column="kod_spr_schet" column-visible="0" />
                <column table="s" column="kod_schet" column-width="109" title="Код счета по МВЗ" format="N0" halign="center" />
                <column table="s" column="schet_name" title="Наименование счета" column-width="188" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="s" auto-filter="1" show-toolbar="1">
          <columns>
            <column table="s" column="kod_spr_schet" column-visible="0" exclude="1" />
            <column table="s" column="kod_schet" column-width="109" title="Код счета по МВЗ" format="N0" halign="center" />
            <column table="s" column="kod_spr_schet_list" title="Наименование счета" column-width="202" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_schet_calc" as="s" auto-refresh="1" order="kod_spr_schet" />
      </from>
    </form>
    <form name="vb_spr_smet_calc" timestamp="05.07.2019 14:05:59" title="Статьи затрат для калькуляции" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_smet_calc.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="sc" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <columns>
                <column table="sc" column="kod_spr_smet_calc" column-visible="0" />
                <column table="sc" column="smet_calc_name" title="Статья затрат для калькуляции" column-width="272" />
                <column table="sc" column="schet_no_mb3" column-width="195" format="N0" halign="center" title="Код счета при отсутствии МВЗ" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="sc" auto-filter="1" show-toolbar="1">
          <columns>
            <column table="sc" column="kod_spr_smet_calc" column-visible="0" exclude="1" />
            <column table="sc" column="smet_calc_name" title="Статья затрат для калькуляции" column-width="272" />
            <column table="sc" column="schet_no_mb3" column-width="195" format="N0" halign="center" title="Код счета при отсутствии МВЗ" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_smet_calc" as="sc" auto-refresh="1" order="kod_spr_smet_calc" />
      </from>
    </form>
    <form name="vb_spr_smet_zatr_calc" timestamp="05.07.2019 14:01:52" title="Статьи затрат по статьям калькуляции" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_smet_zatr_calc.xml">
      <content>
        <grid table="szc" auto-filter="1" show-toolbar="1">
          <toolbar>
            <uicommand button-type="grid-save" column-visible="0" />
            <uicommand action-type="custom" button-type="custom-commit" editable="szc_has_changes">
              <useaction action-type="save" />
              <useaction action-type="call-plsql" name="vb_refs.ins_spr_smet_zatr_calc" />
              <useaction action-type="refresh-form" object="szc" column="kod_spr_smet_zatr" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="szc" column="kod_spr_smet_zatr" column-visible="0" exclude="1" />
            <column table="szc" column="smet_code" title="Статья затрат" format="F0" column-width="106" column-mandatory="1" column-editable="1" valid="valid_smet" />
            <column table="szc" column="smet_name" title="Наименование статьи затрат" column-width="168" column-editable="1" />
            <column table="szc" column="kod_spr_smet_calc" title="Статья калькуляции" column-width="262" column-editable="1" />
            <column table="szc" column="period_s" title="Срок действия &quot;С_&quot;" column-default="spr_time_ym_cur" column-mandatory="1" column-width="119" column-editable="1" />
            <column table="szc" column="period_po" title="Срок действия &quot;По_&quot;" parname="po_not_null" valid="valid_po" column-width="125" column-editable="1" />
            <column table="szc" column="storn" title="Сторнировать в следующем периоде" column-width="164" valid="valid_storn" editable="po_not_null" />
            <column table="szc" column="valid_storn" parname="valid_storn" column-visible="0" />
            <column table="szc" column="valid_smet" parname="valid_smet" column-visible="0" />
            <column table="szc" column="valid_po" parname="valid_po" column-visible="0" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_smet_zatr_calc" as="szc" auto-refresh="1" order="smet_code, period_s, period_po" updateable="1" />
      </from>
    </form>
    <form name="vb_spr_vid_dey" timestamp="05.07.2019 14:04:16" title="Настройка видов деятельности" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_vid_dey.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="vd" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <toolbar exclude="1">
                <uicommand button-type="grid-add" visible="0" />
                <uicommand button-type="grid-refresh" column-visible="0" exclude="1" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" exclude="1" />
                <uicommand title="Добавить" action-type="custom" editable="kod_fl" button-type="custom-add-form">
                  <useaction action-type="save" />
                </uicommand>
                <uicommand action-type="custom" prompt="Вы уверены, что хотите удалить отмеченные строки?" title="Удалить отмеченные" button-type="custom-delete" editable="kod_fl">
                  <useaction action-type="client-remove-row" />
                  <useaction action-type="save" object="vd" />
                  <useaction action-type="refresh-table" object="vd" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="vd" column="kod_spr_vid_dey" column-visible="0" title="Код" />
                <column table="vd" column="vid_dey_sap_code" title="Код SAP вида деятельности " column-width="93" />
                <column table="vd" column="vid_dey_name" title="Имя вида деятельности" column-width="164" />
                <column table="vd" column="kod_spr_vid_energ" column-editable="1" column-width="81" title="Вид энергии" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="vd" auto-filter="1" show-toolbar="1">
          <toolbar exclude="1">
            <uicommand button-type="grid-add" visible="0" />
            <uicommand button-type="grid-refresh" column-visible="0" exclude="1" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" exclude="1" />
            <uicommand title="Добавить" action-type="custom" editable="kod_fl" button-type="custom-add-form">
              <useaction action-type="save" />
            </uicommand>
            <uicommand action-type="custom" prompt="Вы уверены, что хотите удалить отмеченные строки?" title="Удалить отмеченные" button-type="custom-delete" editable="kod_fl">
              <useaction action-type="client-remove-row" />
              <useaction action-type="save" object="vd" />
              <useaction action-type="refresh-table" object="vd" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="vd" column="kod_spr_vid_dey" column-visible="0" title="Код" exclude="1" />
            <column table="vd" column="vid_dey_sap_code" title="Код SAP вида деятельности " column-width="93" />
            <column table="vd" column="vid_dey_name" title="Имя вида деятельности" column-width="164" />
            <column table="vd" column="kod_spr_vid_energ" column-editable="1" column-width="81" title="Вид энергии" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_vid_dey" as="vd" auto-refresh="1" order="vid_dey_name, vid_dey_sap_code" />
      </from>
    </form>
    <form name="vb_spr_vid_energ" timestamp="05.07.2019 14:04:01" title="Настройка видов энергии" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_spr_vid_energ.xml">
      <content>
        <splitcontainer exclude="1">
          <fieldgroup title=" ">
            <grid table="ve" auto-filter="1" show-toolbar="1" show-checkbox="1">
              <toolbar exclude="1">
                <uicommand button-type="grid-add" visible="0" />
                <uicommand button-type="grid-refresh" column-visible="0" exclude="1" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" exclude="1" />
                <uicommand title="Добавить" action-type="custom" editable="kod_fl" button-type="custom-add-form">
                  <useaction action-type="save" />
                </uicommand>
                <uicommand action-type="custom" prompt="Вы уверены, что хотите удалить отмеченные строки?" title="Удалить отмеченные" button-type="custom-delete" editable="kod_fl">
                  <useaction action-type="client-remove-row" />
                  <useaction action-type="save" object="vd" />
                  <useaction action-type="refresh-table" object="vd" />
                </uicommand>
              </toolbar>
              <columns>
                <column table="ve" column="kod_spr_vid_energ" column-visible="0" title="Код" />
                <column table="ve" column="vid_energ_name" title="Вид энергии" column-width="116" />
                <column table="ve" column="kod_spr_od_nd" column-editable="1" title="ОД - НД" />
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <grid table="ve" auto-filter="1" show-toolbar="1">
          <toolbar exclude="1">
            <uicommand button-type="grid-add" visible="0" />
            <uicommand button-type="grid-refresh" column-visible="0" exclude="1" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" exclude="1" />
            <uicommand title="Добавить" action-type="custom" editable="kod_fl" button-type="custom-add-form">
              <useaction action-type="save" />
            </uicommand>
            <uicommand action-type="custom" prompt="Вы уверены, что хотите удалить отмеченные строки?" title="Удалить отмеченные" button-type="custom-delete" editable="kod_fl">
              <useaction action-type="client-remove-row" />
              <useaction action-type="save" object="vd" />
              <useaction action-type="refresh-table" object="vd" />
            </uicommand>
          </toolbar>
          <columns>
            <column table="ve" column="kod_spr_vid_energ" column-visible="0" title="Код" exclude="1" />
            <column table="ve" column="vid_energ_name" title="Вид энергии" column-width="116" />
            <column table="ve" column="kod_spr_od_nd" column-editable="1" title="ОД - НД" />
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_spr_vid_energ" as="ve" auto-refresh="1" order="vid_energ_name" />
      </from>
    </form>
    <form name="vb_utv_periods_old" timestamp="16.08.2019 15:53:20" title="Закрытие периодов по подразделениям" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <content>
        <splitcontainer is-vertical="1" exclude="1">
          <fieldgroup title=" ">
            <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
            <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
            <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
              <defaultquery>
                <query name="is_spr_dr_tree_start_kod_dr" />
              </defaultquery>
            </usefield>
            <grid table="b" show-toolbar="1" parent-field-name="parent_id">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
              </toolbar>
              <columns>
                <column table="b" column="kod_direct" column-visible="0" />
                <column table="b" column="name" column-width="310" />
                <column table="b" column="parent_id" />
                <band title="Январь">
                  <column table="b" column="pl_utv_v_1" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_1" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Февраль">
                  <column table="b" column="pl_utv_v_2" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_2" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Март">
                  <column table="b" column="pl_utv_v_3" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_3" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Апрель">
                  <column table="b" column="pl_utv_v_4" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_4" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Май">
                  <column table="b" column="pl_utv_v_5" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_5" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Июнь">
                  <column table="b" column="pl_utv_v_6" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_6" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Июль">
                  <column table="b" column="pl_utv_v_7" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_7" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Август">
                  <column table="b" column="pl_utv_v_8" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_8" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Сентябрь">
                  <column table="b" column="pl_utv_v_9" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_9" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Октябрь">
                  <column table="b" column="pl_utv_v_10" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_10" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Ноябрь">
                  <column table="b" column="pl_utv_v_11" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_11" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Декабрь">
                  <column table="b" column="pl_utv_v_12" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_12" title="Ф" halign="center" column-width="31" />
                </band>
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
        <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
        <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
          <defaultquery>
            <query name="is_spr_dr_tree_start_kod_dr" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_show" type="number" title="Показать">
          <listquery>
            <query name="vb_utv_periods_show_data" />
          </listquery>
          <defaultquery>
            <query name="vb_utv_periods_show_data" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_plan" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_plan" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_fact" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_fact" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_agree" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_agree" />
          </defaultquery>
        </usefield>
        <grid table="b" show-toolbar="1" parent-field-name="parent_id">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" exclude="1" />
          </toolbar>
          <columns>
            <column table="b" column="kod_direct" column-visible="0" />
            <column table="b" column="name" column-width="310" />
            <column table="b" column="parent_id" />
            <band title="Январь">
              <column table="b" column="pl_utv_1" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_1" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_1" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_1" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Февраль">
              <column table="b" column="pl_utv_2" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_2" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_2" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_2" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Март">
              <column table="b" column="pl_utv_3" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_3" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_3" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_3" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Апрель">
              <column table="b" column="pl_utv_4" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_4" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_4" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_4" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Май">
              <column table="b" column="pl_utv_5" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_5" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_5" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_5" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Июнь">
              <column table="b" column="pl_utv_6" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_6" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_6" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_6" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Июль">
              <column table="b" column="pl_utv_7" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_7" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_7" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_7" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Август">
              <column table="b" column="pl_utv_8" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_8" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_8" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_8" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Сентябрь">
              <column table="b" column="pl_utv_9" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_9" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_9" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_9" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Октябрь">
              <column table="b" column="pl_utv_10" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_10" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_10" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_10" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Ноябрь">
              <column table="b" column="pl_utv_11" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_11" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_11" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_11" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Декабрь">
              <column table="b" column="pl_utv_12" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_12" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_12" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_12" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_utv_periods_dir_tree_old" as="b" updateable="1">
          <withparams>
            <useparam name="p_god" />
          </withparams>
          <where>
            <call function="and">
              <call function="true" />
              <call function="in" optional="1">
                <column table="b" column="kod_direct" />
                <useparam name="p_dir_arr" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="vb_utv_periods" timestamp="16.08.2019 16:14:30" title="Закрытие периодов по подразделениям" order="name" file="sql.builder.templates\sql.builder\projects\mped\forms\vb_utv_periods.xml">
      <content>
        <splitcontainer is-vertical="1" exclude="1">
          <fieldgroup title=" ">
            <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
            <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
            <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
              <defaultquery>
                <query name="is_spr_dr_tree_start_kod_dr" />
              </defaultquery>
            </usefield>
            <grid table="b" show-toolbar="1" parent-field-name="parent_id">
              <toolbar>
                <uicommand button-type="grid-add" column-visible="0" />
                <uicommand button-type="grid-delete" column-visible="0" />
                <uicommand button-type="grid-save" column-visible="0" />
              </toolbar>
              <columns>
                <column table="b" column="kod_direct" column-visible="0" />
                <column table="b" column="name" column-width="310" />
                <column table="b" column="parent_id" />
                <band title="Январь">
                  <column table="b" column="pl_utv_v_1" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_1" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Февраль">
                  <column table="b" column="pl_utv_v_2" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_2" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Март">
                  <column table="b" column="pl_utv_v_3" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_3" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Апрель">
                  <column table="b" column="pl_utv_v_4" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_4" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Май">
                  <column table="b" column="pl_utv_v_5" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_5" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Июнь">
                  <column table="b" column="pl_utv_v_6" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_6" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Июль">
                  <column table="b" column="pl_utv_v_7" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_7" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Август">
                  <column table="b" column="pl_utv_v_8" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_8" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Сентябрь">
                  <column table="b" column="pl_utv_v_9" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_9" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Октябрь">
                  <column table="b" column="pl_utv_v_10" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_10" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Ноябрь">
                  <column table="b" column="pl_utv_v_11" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_11" title="Ф" halign="center" column-width="31" />
                </band>
                <band title="Декабрь">
                  <column table="b" column="pl_utv_v_12" title="П" halign="center" column-width="31" />
                  <column table="b" column="f_utv_v_12" title="Ф" halign="center" column-width="31" />
                </band>
              </columns>
            </grid>
          </fieldgroup>
        </splitcontainer>
        <usefield field="va_god" show-checkbox="0" column-mandatory="1" />
        <usefield field="va_direct1" show-checkbox="0" name="p_kod_direct" />
        <usefield field="cmn_list" name="p_dir_arr" type="number" column-visible="0">
          <defaultquery>
            <query name="is_spr_dr_tree_start_kod_dr" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_show" type="number" title="Показать">
          <listquery>
            <query name="vb_utv_periods_show_data" />
          </listquery>
          <defaultquery>
            <query name="vb_utv_periods_show_data" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_plan" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_plan" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_fact" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_fact" />
          </defaultquery>
        </usefield>
        <usefield field="cmn_integer" show-checkbox="0" column-mandatory="1" name="p_show_agree" type="number" column-visible="0">
          <defaultquery>
            <query name="vb_utv_periods_show_agree" />
          </defaultquery>
        </usefield>
        <grid table="b" show-toolbar="1" parent-field-name="parent_id">
          <toolbar>
            <uicommand button-type="grid-add" column-visible="0" />
            <uicommand button-type="grid-delete" column-visible="0" />
            <uicommand button-type="grid-save" column-visible="0" exclude="1" />
          </toolbar>
          <columns>
            <column table="b" column="id" column-visible="0" />
            <column table="b" column="name" column-width="310" />
            <column table="b" column="kod_direct" column-width="310" column-visible="0" />
            <column table="b" column="parent_id" />
            <column table="b" column="ord" column-visible="0" />
            <column table="b" column="god" column-visible="0" />
            <band title="Январь">
              <column table="b" column="kod_utv_1" column-visible="0" />
              <column table="b" column="god_1" column-visible="0" />
              <column table="b" column="kod_direct_1" column-visible="0" />
              <column table="b" column="pl_utv_1" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_1" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_1" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_1" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Февраль">
              <column table="b" column="kod_utv_2" column-visible="0" />
              <column table="b" column="god_2" column-visible="0" />
              <column table="b" column="kod_direct_2" column-visible="0" />
              <column table="b" column="pl_utv_2" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_2" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_2" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_2" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Март">
              <column table="b" column="kod_utv_3" column-visible="0" />
              <column table="b" column="god_3" column-visible="0" />
              <column table="b" column="kod_direct_3" column-visible="0" />
              <column table="b" column="pl_utv_3" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_3" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_3" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_3" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Апрель">
              <column table="b" column="kod_utv_4" column-visible="0" />
              <column table="b" column="god_4" column-visible="0" />
              <column table="b" column="kod_direct_4" column-visible="0" />
              <column table="b" column="pl_utv_4" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_4" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_4" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_4" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Май">
              <column table="b" column="kod_utv_5" column-visible="0" />
              <column table="b" column="god_5" column-visible="0" />
              <column table="b" column="kod_direct_5" column-visible="0" />
              <column table="b" column="pl_utv_5" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_5" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_5" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_5" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Июнь">
              <column table="b" column="kod_utv_6" column-visible="0" />
              <column table="b" column="god_6" column-visible="0" />
              <column table="b" column="kod_direct_6" column-visible="0" />
              <column table="b" column="pl_utv_6" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_6" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_6" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_6" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Июль">
              <column table="b" column="kod_utv_7" column-visible="0" />
              <column table="b" column="god_7" column-visible="0" />
              <column table="b" column="kod_direct_7" column-visible="0" />
              <column table="b" column="pl_utv_7" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_7" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_7" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_7" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Август">
              <column table="b" column="kod_utv_8" column-visible="0" />
              <column table="b" column="god_8" column-visible="0" />
              <column table="b" column="kod_direct_8" column-visible="0" />
              <column table="b" column="pl_utv_8" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_8" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_8" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_8" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Сентябрь">
              <column table="b" column="kod_utv_9" column-visible="0" />
              <column table="b" column="god_9" column-visible="0" />
              <column table="b" column="kod_direct_9" column-visible="0" />
              <column table="b" column="pl_utv_9" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_9" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_9" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_9" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Октябрь">
              <column table="b" column="kod_utv_10" column-visible="0" />
              <column table="b" column="god_10" column-visible="0" />
              <column table="b" column="kod_direct_10" column-visible="0" />
              <column table="b" column="pl_utv_10" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_10" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_10" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_10" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Ноябрь">
              <column table="b" column="kod_utv_11" column-visible="0" />
              <column table="b" column="god_11" column-visible="0" />
              <column table="b" column="kod_direct_11" column-visible="0" />
              <column table="b" column="pl_utv_11" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_11" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_11" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_11" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
            <band title="Декабрь">
              <column table="b" column="kod_utv_12" column-visible="0" />
              <column table="b" column="god_12" column-visible="0" />
              <column table="b" column="kod_direct_12" column-visible="0" />
              <column table="b" column="pl_utv_12" title="План" halign="center" column-width="31" column-editable="1" visible="p_show_plan" />
              <column table="b" column="f_utv_12" title="Факт" halign="center" column-width="31" column-editable="1" visible="p_show_fact" />
              <column table="b" column="agree_12" title="Согласовано" halign="center" column-width="31" column-editable="1" visible="p_show_agree" />
              <column table="b" column="agree_comment_12" halign="center" column-width="31" column-editable="1" visible="p_show_agree" title="Замечание" />
            </band>
          </columns>
        </grid>
      </content>
      <from>
        <query name="vb_utv_periods_dir_tree" as="b" updateable="1">
          <withparams>
            <useparam name="p_god" />
          </withparams>
          <where>
            <call function="and">
              <call function="true" />
              <call function="in" optional="1">
                <column table="b" column="kod_direct" />
                <useparam name="p_dir_arr" />
              </call>
            </call>
          </where>
        </query>
      </from>
    </form>
    <form name="52072_data_check" timestamp="18.07.2019 10:42:38" file="sql.builder.templates\sql.builder\projects\mped\reports\data_check.xml">
      <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
        <listquery>
          <query name="mped_spr_time_ym" />
        </listquery>
        <defaultquery>
          <query name="mped_spr_time_ym_prev" />
        </defaultquery>
      </usefield>
    </form>
    <form name="vbr_calculation_svod" timestamp="30.08.2019 16:45:04" file="sql.builder.templates\sql.builder\projects\mped\reports\vbr_calculation.xml">
      <usefield field="cmn_list" show-checkbox="0" column-mandatory="1" name="p_ym" title="Периоды" type="number">
        <listquery>
          <query name="mped_spr_time_ym" />
        </listquery>
        <defaultquery>
          <query name="mped_spr_time_ym_prev" />
        </defaultquery>
      </usefield>
      <usefield field="cmn_string" show-checkbox="0" name="p_ym_str" type="string" column-visible="0">
        <defaultquery>
          <query name="mped_spr_time_ym_string" />
        </defaultquery>
      </usefield>
    </form>
  </forms>
  <datatypes />
  <editors />
  <folders />
  <globalparams child-name="param" key-name="name" />
  <!--<globalconsts child-name="globalconst" key-name="name">
  </globalconsts>-->
  <expression-packages child-name="expression-package" key-name="name" />
  <dimension-packages child-name="dimension-package" key-name="name">
    <dimension-package name="va" timestamp="20.08.2019 14:16:16" file="sql.builder.templates\sql.builder\projects\mped\cube\va.xml">
      <dimension class-type="va_sp_doh_ras_rep" name="va_sp_doh_ras_rep" />
      <dimension class-type="va_sp_zatr" name="va_sp_zatr" />
      <dimension class-type="vbd_sap_mb3" name="vbd_sap_mb3" />
      <dimension class-type="vbd_sap_st" name="vbd_sap_st" />
      <dimension class-type="is_spr_smet" name="is_spr_smet" />
      <dimension class-type="vb_spr_smet_to_sap" name="vb_spr_smet_to_sap" />
      <dimension class-type="vb_dir_to_sap" name="vb_dir_to_sap" />
      <dimension class-type="vbx_spr_direct" name="vbx_spr_direct" />
      <dimension name="va_dir_struct_opt" class-type="va_dir_struct_opt" />
      <dimension name="va_dir_sruct_apply" class-type="va_dir_sruct_apply" />
      <dimension class-type="va_earn_othr" name="va_earn_othr" />
      <dimension name="va_pwr_set_r" class-type="va_pwr_set_r" />
      <dimension name="va_dr_ap01" class-type="va_dr_ap01" />
      <dimension name="va_vvod" class-type="va_vvod" />
      <dimension name="va_cnt_perc_plan" class-type="va_cnt_perc_plan" />
      <dimension name="va_god" time-type="number" />
      <dimension name="va_mes" time-type="number" />
      <dimension name="va_spr_dohod" class-type="va_spr_dohod" />
      <dimension name="va_acc_item" class-type="va_acc_item" />
      <dimension name="va_spr_smet" class-type="va_spr_smet" />
      <dimension name="va_spr_smet_main" class-type="va_spr_smet_main" />
      <dimension name="va_direct" class-type="va_direct" />
      <dimension name="va_dr_i_x" class-type="va_dr_i_x" />
      <dimension name="va_dr_i_main" class-type="va_dr_i_main" />
      <dimension name="va_dr_i_x_main" class-type="va_dr_i_x_main" />
      <dimension name="va_dir_struct_type" class-type="va_dir_struct_type" />
      <dimension name="va_dr_i_link" class-type="va_dr_i_link" />
      <dimension name="va_dr_i_x_link" class-type="va_dr_i_x_link" />
      <dimension name="va_plan_smet" class-type="va_plan_smet" />
      <dimension name="va_smet_vvod" class-type="va_smet_vvod" />
      <dimension name="va_cb_acc_02_val" class-type="va_cb_acc_02_val" />
      <dimension name="va_acc_02_item" class-type="va_acc_02_item" />
      <dimension name="va_acc_k422_item" class-type="va_acc_k422_item" />
      <dimension name="va_acc_k423_item" class-type="va_acc_k423_item" />
      <dimension name="va_acc_k424_item" class-type="va_acc_k424_item" />
      <dimension name="va_acc_k425_item" class-type="va_acc_k425_item" />
      <dimension name="va_dohod" class-type="va_dohod" />
      <dimension name="va_vid_en" time-type="number" />
      <dimension name="va_pf" time-type="number" />
      <dimension name="va_go" time-type="number" />
      <dimension class-type="vb_spr_mb3" name="vb_spr_mb3" />
      <dimension name="vb_spr_vid_dey" class-type="vb_spr_vid_dey" />
      <dimension name="vb_spr_vid_energ" class-type="vb_spr_vid_energ" />
      <dimension name="vb_spr_od_nd" class-type="vb_spr_od_nd" />
      <dimension name="va_sp_calc_rep" class-type="va_sp_calc_rep" />
      <dimension name="vb_spr_smet_zatr_calc" class-type="vb_spr_smet_zatr_calc" />
      <dimension name="vb_spr_smet_calc" class-type="vb_spr_smet_calc" />
      <dimension name="vb_spr_schet_calc" class-type="vb_spr_schet_calc" />
      <dimension name="va_direct2" class-type="va_direct2" />
      <dimension name="va_direct3" class-type="va_direct3" />
      <dimension name="vb_spr_fed_subject" class-type="vb_spr_fed_subject" />
      <dimension name="vbr_calculation_mode" class-type="vbr_calculation_mode" />
      <dimension name="vb_spr_rasp_zatr" class-type="vb_spr_rasp_zatr" />
    </dimension-package>
  </dimension-packages>
  <security-packages child-name="security-package" key-name="name" />
  <color-packages child-name="color-package" key-name="name" />
  <format-packages child-name="format-package" key-name="name" />
  <button-types child-name="button-type" key-name="name" />
  <!--раздел qlikview организовать по аналогии с остальными вместо qlikview/customer/@id   дать имена   qwprojects/qwproject/@customer-->
  <qvprojects />
  <!--<images>
    <image char="" name="link" />
    <image char="" name="dlink" rotate-flip="RotateNoneFlipY"/>
    <image char="" name="call"/>
    <image char="" name="column"/>
  </images>
  <eltypes>
    <eltype  name="vcall" image="call"/>
    <eltype  name="vlink" image="link"/>
    <eltype  name="vdink" image="dlink"/>
    <eltype  name="vcolumn" image="column"/>
  </eltypes>-->
  <fields child-name="field" key-name="id">
    <field id="va_direct1" name="p_kod_direct1" controlType="UICombo" title="Подразделение" expand-all="1" type="number" timestamp="16.08.2019 18:13:45" parent-field-name="parent_id" comment="Подразделение (единичный выбор)" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="is_spr_direct_for_mped" />
      </listquery>
      <defaultquery>
        <query name="va_dr_fq_root_val" />
      </defaultquery>
    </field>
    <field id="va_god" name="p_god" controlType="UICombo" title="Год" type="number" timestamp="14.12.2017 21:37:27" comment="Год" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_year" />
      </listquery>
      <defaultquery>
        <query name="va_year_def1" />
      </defaultquery>
    </field>
    <field id="va_mes" name="mes" controlType="UICombo" title="Месяц" type="number" comment="Месяц" timestamp="14.12.2017 21:37:34" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_mes" />
      </listquery>
    </field>
    <field id="va_plan_fact" name="p_is_plan" controlType="UICombo" type="number" timestamp="14.12.2017 21:41:20" title="План/Факт" comment="Выбор План/Факт" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="va_plan_fact" />
      </listquery>
    </field>
    <field id="va_mes1" name="p_mes1" controlType="UICombo" title="C" type="number" timestamp="14.12.2017 21:39:54" comment="Месяц( по умолчанию январь)" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_mes" />
      </listquery>
      <defaultquery>
        <query name="va_mes1" />
      </defaultquery>
    </field>
    <field id="va_mes12" name="p_mes2" controlType="UICombo" type="number" timestamp="14.12.2017 21:40:32" title="По" comment="Месяц (по умолчанию декабрь)" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_mes" />
      </listquery>
      <defaultquery>
        <query name="va_mes12" />
      </defaultquery>
    </field>
    <field id="va_ym1s" name="p_ym1" controlType="UINumber" type="number" timestamp="07.12.2017 20:16:18" title="YM1" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <defaultquery>
        <query name="va_ym1s" />
      </defaultquery>
    </field>
    <field id="va_ym2s" name="p_ym2" controlType="UINumber" type="number" timestamp="07.12.2017 20:16:18" title="YM2" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <defaultquery>
        <query name="va_ym2s" />
      </defaultquery>
    </field>
    <field id="va_mes_cur" name="p_mes" controlType="UICombo" type="number" timestamp="14.12.2017 21:39:13" title="Месяц" comment="Месяц( по умолчанию текущий)" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_mes" />
      </listquery>
      <defaultquery>
        <query name="va_mes_cur" />
      </defaultquery>
    </field>
    <field id="va_direct2" name="p_kod_direct2" controlType="UIList" title="Подразделение" expand-all="1" type="number" timestamp="05.02.2018 19:57:51" parent-field-name="parent_id" comment="Подразделение (множественный выбор)" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="va_dr_fq_list1" />
      </listquery>
    </field>
    <field id="va_god1" name="p_god" controlType="UICombo" title="Год" type="number" timestamp="19.12.2017 17:37:00" comment="Год" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="spr_time_year" />
      </listquery>
    </field>
    <field id="va_direct1_has_mvp" name="p_kod_direct1" controlType="UICombo" title="Подразделение" type="number" timestamp="16.08.2019 18:17:04" parent-field-name="parent_id" comment="Подразделение (единичный выбор)" expand-all="1" file="sql.builder.templates\sql.builder\projects\mped\fields\fields.xml">
      <listquery>
        <query name="is_spr_direct_for_mped_has_mvp" />
      </listquery>
      <defaultquery>
        <query name="va_dr_fq_root_val" />
      </defaultquery>
    </field>
  </fields>
  <actions child-name="action" key-name="name">
    <action name="vb_refs.ins_spr_direct_mvp" action-type="call-plsql" timestamp="03.07.2019 17:03:25" file="sql.builder.templates\sql.builder\projects\mped\actions\actions.xml">
      <text>
    begin
        vb_refs.ins_spr_direct_mvp;
    end;
</text>
    </action>
    <action name="vb_refs.ins_spr_smet_zatr_calc" action-type="call-plsql" timestamp="04.07.2019 15:41:55" file="sql.builder.templates\sql.builder\projects\mped\actions\actions.xml">
      <text>
    begin
        vb_refs.ins_spr_smet_zatr_calc;
    end;
</text>
    </action>
    <action name="rr_temp_ins_load_ke30_params" action-type="call-plsql" timestamp="06.07.2019 11:50:27" file="sql.builder.templates\sql.builder\projects\mped\actions\actions.xml">
      <params>
        <param type="string" name="p_dir_kod" />
        <param type="string" name="p_dir_name" />
        <param type="string" name="p_ym_row" />
      </params>
      <text>
    begin
        delete from rr_temp a where a.skod = 'load_ke30_params';
        insert into rr_temp(skod,s1,s2,s3)
        values('load_ke30_params', :p_ym_row, :p_dir_name, :p_dir_kod);
    end;
</text>
    </action>
    <action name="vb_refs.load_data_to_mpep" action-type="call-plsql" timestamp="23.07.2019 15:32:15" file="sql.builder.templates\sql.builder\projects\mped\actions\actions.xml">
      <params>
        <param name="p_kod_direct" type="number" />
        <param name="p_period" type="number" />
      </params>
      <text>
    begin
        vb_refs.load_data_to_mpep(:p_kod_direct, :p_period);
    end;
</text>
    </action>
    <action name="vb_refs.ins_spr_rasp_zatr" action-type="call-plsql" timestamp="18.08.2019 14:43:35" file="sql.builder.templates\sql.builder\projects\mped\actions\actions.xml">
      <text>
    begin
        vb_refs.ins_spr_rasp_zatr;
    end;
</text>
    </action>
    <action name="va_mv.refresh1" action-type="call-plsql" timestamp="20.12.2017 18:07:25" file="sql.builder.templates\sql.builder\projects\mped\forms\va_dir_struct_type.xml">
      <text>
        begin
        va_mv.refresh1();
        end;
      </text>
    </action>
    <action name="vb_refs.del_smet_to_sap" action-type="call-plsql" timestamp="15.06.2019 13:40:09" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <params>
        <param name="kod_spr_smet_to_sap" type="number" />
        <param name="sap_code" type="string" />
      </params>
      <text>
    begin
        vb_refs.del_smet_to_sap(:kod_spr_smet_to_sap, :sap_code);
    end;
</text>
    </action>
    <action name="vb_refs.upd_smet_to_sap" action-type="call-plsql" timestamp="15.06.2019 17:15:59" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <params>
        <param name="kod_spr_smet_to_sap" type="number" />
        <param name="sap_code" type="string" />
        <param name="sap_code_old" type="string" />
      </params>
      <text>
    begin
        vb_refs.upd_smet_to_sap(:kod_spr_smet_to_sap, :sap_code, :sap_code_old);
    end;
</text>
    </action>
    <action name="vb_refs.ins_smet_to_sap" action-type="call-plsql" timestamp="15.06.2019 17:29:18" file="sql.builder.templates\sql.builder\projects\mped\forms\va_src003.xml">
      <params>
        <param name="p_kod_spr_smet" type="number" />
      </params>
      <text>
    begin
        vb_refs.ins_smet_to_sap(:p_kod_spr_smet);
    end;
</text>
    </action>
  </actions>
  <navigators child-name="navigator" key-name="name" />
  <projects child-name="project" key-name="name" />
</root>